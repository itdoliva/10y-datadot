import{c as commonjsGlobal,g as getDefaultExportFromCjs,a as getAugmentedNamespace,_ as __awaiter,b as __decorate,d as $format,$ as $locale}from"../chunks/index.Iqn8piLp.js";import{r as run_all,T as get_store_value,a as safe_not_equal,e as element,U as svg_element,d as space,t as text,f as claim_element,h as children$1,V as claim_svg_element,k as detach,l as claim_space,j as claim_text,y as attr,m as insert_hydration,o as append_hydration,p as set_data,n as noop$1,q as component_subscribe,W as destroy_each,X as init_binding_group,Y as set_input_value,Z as listen,B as construct_svelte_component,c as create_slot,u as update_slot_base,g as get_all_dirty_from_scope,b as get_slot_changes,_ as getContext$1,F as add_render_callback,$ as add_iframe_resize_listener,a0 as toggle_class,a1 as setContext$1,A as binding_callbacks,a2 as add_flush_callback,z as set_style,i as is_function,a3 as assign$1,H as identity$5,a4 as set_store_value,a5 as get_binding_group_value,a6 as onDestroy,a7 as action_destroyer,x as onMount,a8 as get_svelte_dataset,a9 as split_css_unit,v as empty$1,w as afterUpdate,aa as HtmlTagHydration,ab as claim_html_tag,ac as to_number,ad as createEventDispatcher,ae as bubble,af as set_svg_attributes,ag as head_selector}from"../chunks/scheduler.Byy3OCO3.js";import{a as transition_out,t as transition_in,S as SvelteComponent,i as init$2,b as create_component,d as claim_component,m as mount_component,g as group_outros,e as destroy_component,c as check_outros,f as bind$2,n as now$2,l as loop,h as create_in_transition,j as create_out_transition}from"../chunks/index.D376E_l6.js";import{w as writable$1,d as derived}from"../chunks/index.Djr9Q_kI.js";const globals=typeof window<"u"?window:typeof globalThis<"u"?globalThis:global;function ensure_array_like(A){return(A==null?void 0:A.length)!==void 0?A:Array.from(A)}function outro_and_destroy_block(A,T){transition_out(A,1,1,()=>{T.delete(A.key)})}function update_keyed_each(A,T,E,C,P,I,R,F,O,D,L,B){let V=A.length,U=I.length,z=V;const W={};for(;z--;)W[A[z].key]=z;const Z=[],X=new Map,K=new Map,Y=[];for(z=U;z--;){const ie=B(P,I,z),ne=E(ie);let he=R.get(ne);he?Y.push(()=>he.p(ie,T)):(he=D(ne,ie),he.c()),X.set(ne,Z[z]=he),ne in W&&K.set(ne,Math.abs(z-W[ne]))}const Q=new Set,J=new Set;function te(ie){transition_in(ie,1),ie.m(F,L),R.set(ie.key,ie),L=ie.first,U--}for(;V&&U;){const ie=Z[U-1],ne=A[V-1],he=ie.key,ve=ne.key;ie===ne?(L=ie.first,V--,U--):X.has(ve)?!R.has(he)||Q.has(he)?te(ie):J.has(ve)?V--:K.get(he)>K.get(ve)?(J.add(he),te(ie)):(Q.add(ve),V--):(O(ne,R),V--)}for(;V--;){const ie=A[V];X.has(ie.key)||O(ie,R)}for(;U;)te(Z[U-1]);return run_all(Y),Z}const loaded$1=writable$1(!1);let Loader$1=class{constructor(T){this.toLoad=["nodes"],this.setLoaded=E=>{if(!this.toLoad.includes(E))return;const C=this.toLoad.indexOf(E);if(this.toLoad.splice(C,1),this.toLoad.length===0){const P=Date.now()-this.initAt;setTimeout(()=>{loaded$1.set(!0)},Math.max(this.minLoadingTime-P,0))}},this.initAt=Date.now(),this.minLoadingTime=T}};const minLoadingTime=0,loader=new Loader$1(minLoadingTime),_page=Object.freeze(Object.defineProperty({__proto__:null},Symbol.toStringTag,{value:"Module"}));function ascending$1(A,T){return A==null||T==null?NaN:A<T?-1:A>T?1:A>=T?0:NaN}function descending(A,T){return A==null||T==null?NaN:T<A?-1:T>A?1:T>=A?0:NaN}function bisector(A){let T,E,C;A.length!==2?(T=ascending$1,E=(F,O)=>ascending$1(A(F),O),C=(F,O)=>A(F)-O):(T=A===ascending$1||A===descending?A:zero$1,E=A,C=A);function P(F,O,D=0,L=F.length){if(D<L){if(T(O,O)!==0)return L;do{const B=D+L>>>1;E(F[B],O)<0?D=B+1:L=B}while(D<L)}return D}function I(F,O,D=0,L=F.length){if(D<L){if(T(O,O)!==0)return L;do{const B=D+L>>>1;E(F[B],O)<=0?D=B+1:L=B}while(D<L)}return D}function R(F,O,D=0,L=F.length){const B=P(F,O,D,L-1);return B>D&&C(F[B-1],O)>-C(F[B],O)?B-1:B}return{left:P,center:R,right:I}}function zero$1(){return 0}function number$1(A){return A===null?NaN:+A}const ascendingBisect=bisector(ascending$1),bisectRight=ascendingBisect.right;bisector(number$1).center;function count(A,T){let E=0;for(let C of A)C!=null&&(C=+C)>=C&&++E;return E}function extent(A,T){let E,C;if(T===void 0)for(const P of A)P!=null&&(E===void 0?P>=P&&(E=C=P):(E>P&&(E=P),C<P&&(C=P)));else{let P=-1;for(let I of A)(I=T(I,++P,A))!=null&&(E===void 0?I>=I&&(E=C=I):(E>I&&(E=I),C<I&&(C=I)))}return[E,C]}class InternMap extends Map{constructor(T,E=keyof){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:E}}),T!=null)for(const[C,P]of T)this.set(C,P)}get(T){return super.get(intern_get(this,T))}has(T){return super.has(intern_get(this,T))}set(T,E){return super.set(intern_set(this,T),E)}delete(T){return super.delete(intern_delete(this,T))}}function intern_get({_intern:A,_key:T},E){const C=T(E);return A.has(C)?A.get(C):E}function intern_set({_intern:A,_key:T},E){const C=T(E);return A.has(C)?A.get(C):(A.set(C,E),E)}function intern_delete({_intern:A,_key:T},E){const C=T(E);return A.has(C)&&(E=A.get(C),A.delete(C)),E}function keyof(A){return A!==null&&typeof A=="object"?A.valueOf():A}function identity$4(A){return A}function groups(A,...T){return nest(A,Array.from,identity$4,T)}function rollup(A,T,...E){return nest(A,identity$4,T,E)}function nest(A,T,E,C){return function P(I,R){if(R>=C.length)return E(I);const F=new InternMap,O=C[R++];let D=-1;for(const L of I){const B=O(L,++D,I),V=F.get(B);V?V.push(L):F.set(B,[L])}for(const[L,B]of F)F.set(L,P(B,R));return T(F)}(A,0)}var array$1=Array.prototype,slice=array$1.slice;function constant$5(A){return()=>A}const e10=Math.sqrt(50),e5=Math.sqrt(10),e2=Math.sqrt(2);function tickSpec(A,T,E){const C=(T-A)/Math.max(0,E),P=Math.floor(Math.log10(C)),I=C/Math.pow(10,P),R=I>=e10?10:I>=e5?5:I>=e2?2:1;let F,O,D;return P<0?(D=Math.pow(10,-P)/R,F=Math.round(A*D),O=Math.round(T*D),F/D<A&&++F,O/D>T&&--O,D=-D):(D=Math.pow(10,P)*R,F=Math.round(A/D),O=Math.round(T/D),F*D<A&&++F,O*D>T&&--O),O<F&&.5<=E&&E<2?tickSpec(A,T,E*2):[F,O,D]}function ticks(A,T,E){if(T=+T,A=+A,E=+E,!(E>0))return[];if(A===T)return[A];const C=T<A,[P,I,R]=C?tickSpec(T,A,E):tickSpec(A,T,E);if(!(I>=P))return[];const F=I-P+1,O=new Array(F);if(C)if(R<0)for(let D=0;D<F;++D)O[D]=(I-D)/-R;else for(let D=0;D<F;++D)O[D]=(I-D)*R;else if(R<0)for(let D=0;D<F;++D)O[D]=(P+D)/-R;else for(let D=0;D<F;++D)O[D]=(P+D)*R;return O}function tickIncrement(A,T,E){return T=+T,A=+A,E=+E,tickSpec(A,T,E)[2]}function tickStep(A,T,E){T=+T,A=+A,E=+E;const C=T<A,P=C?tickIncrement(T,A,E):tickIncrement(A,T,E);return(C?-1:1)*(P<0?1/-P:P)}function nice(A,T,E){let C;for(;;){const P=tickIncrement(A,T,E);if(P===C||P===0||!isFinite(P))return[A,T];P>0?(A=Math.floor(A/P)*P,T=Math.ceil(T/P)*P):P<0&&(A=Math.ceil(A*P)/P,T=Math.floor(T*P)/P),C=P}}function thresholdSturges(A){return Math.max(1,Math.ceil(Math.log(count(A))/Math.LN2)+1)}function bin(){var A=identity$4,T=extent,E=thresholdSturges;function C(P){Array.isArray(P)||(P=Array.from(P));var I,R=P.length,F,O,D=new Array(R);for(I=0;I<R;++I)D[I]=A(P[I],I,P);var L=T(D),B=L[0],V=L[1],U=E(D,B,V);if(!Array.isArray(U)){const Y=V,Q=+U;if(T===extent&&([B,V]=nice(B,V,Q)),U=ticks(B,V,Q),U[0]<=B&&(O=tickIncrement(B,V,Q)),U[U.length-1]>=V)if(Y>=V&&T===extent){const J=tickIncrement(B,V,Q);isFinite(J)&&(J>0?V=(Math.floor(V/J)+1)*J:J<0&&(V=(Math.ceil(V*-J)+1)/-J))}else U.pop()}for(var z=U.length,W=0,Z=z;U[W]<=B;)++W;for(;U[Z-1]>V;)--Z;(W||Z<z)&&(U=U.slice(W,Z),z=Z-W);var X=new Array(z+1),K;for(I=0;I<=z;++I)K=X[I]=[],K.x0=I>0?U[I-1]:B,K.x1=I<z?U[I]:V;if(isFinite(O)){if(O>0)for(I=0;I<R;++I)(F=D[I])!=null&&B<=F&&F<=V&&X[Math.min(z,Math.floor((F-B)/O))].push(P[I]);else if(O<0){for(I=0;I<R;++I)if((F=D[I])!=null&&B<=F&&F<=V){const Y=Math.floor((B-F)*O);X[Math.min(z,Y+(U[Y]<=F))].push(P[I])}}}else for(I=0;I<R;++I)(F=D[I])!=null&&B<=F&&F<=V&&X[bisectRight(U,F,0,z)].push(P[I]);return X}return C.value=function(P){return arguments.length?(A=typeof P=="function"?P:constant$5(P),C):A},C.domain=function(P){return arguments.length?(T=typeof P=="function"?P:constant$5([P[0],P[1]]),C):T},C.thresholds=function(P){return arguments.length?(E=typeof P=="function"?P:constant$5(Array.isArray(P)?slice.call(P):P),C):E},C}function max$1(A,T){let E;if(T===void 0)for(const C of A)C!=null&&(E<C||E===void 0&&C>=C)&&(E=C);else{let C=-1;for(let P of A)(P=T(P,++C,A))!=null&&(E<P||E===void 0&&P>=P)&&(E=P)}return E}function range$2(A,T,E){A=+A,T=+T,E=(P=arguments.length)<2?(T=A,A=0,1):P<3?1:+E;for(var C=-1,P=Math.max(0,Math.ceil((T-A)/E))|0,I=new Array(P);++C<P;)I[C]=A+C*E;return I}var noop={value:()=>{}};function dispatch(){for(var A=0,T=arguments.length,E={},C;A<T;++A){if(!(C=arguments[A]+"")||C in E||/[\s.]/.test(C))throw new Error("illegal type: "+C);E[C]=[]}return new Dispatch(E)}function Dispatch(A){this._=A}function parseTypenames$1(A,T){return A.trim().split(/^|\s+/).map(function(E){var C="",P=E.indexOf(".");if(P>=0&&(C=E.slice(P+1),E=E.slice(0,P)),E&&!T.hasOwnProperty(E))throw new Error("unknown type: "+E);return{type:E,name:C}})}Dispatch.prototype=dispatch.prototype={constructor:Dispatch,on:function(A,T){var E=this._,C=parseTypenames$1(A+"",E),P,I=-1,R=C.length;if(arguments.length<2){for(;++I<R;)if((P=(A=C[I]).type)&&(P=get$1(E[P],A.name)))return P;return}if(T!=null&&typeof T!="function")throw new Error("invalid callback: "+T);for(;++I<R;)if(P=(A=C[I]).type)E[P]=set$1(E[P],A.name,T);else if(T==null)for(P in E)E[P]=set$1(E[P],A.name,null);return this},copy:function(){var A={},T=this._;for(var E in T)A[E]=T[E].slice();return new Dispatch(A)},call:function(A,T){if((P=arguments.length-2)>0)for(var E=new Array(P),C=0,P,I;C<P;++C)E[C]=arguments[C+2];if(!this._.hasOwnProperty(A))throw new Error("unknown type: "+A);for(I=this._[A],C=0,P=I.length;C<P;++C)I[C].value.apply(T,E)},apply:function(A,T,E){if(!this._.hasOwnProperty(A))throw new Error("unknown type: "+A);for(var C=this._[A],P=0,I=C.length;P<I;++P)C[P].value.apply(T,E)}};function get$1(A,T){for(var E=0,C=A.length,P;E<C;++E)if((P=A[E]).name===T)return P.value}function set$1(A,T,E){for(var C=0,P=A.length;C<P;++C)if(A[C].name===T){A[C]=noop,A=A.slice(0,C).concat(A.slice(C+1));break}return E!=null&&A.push({name:T,value:E}),A}var xhtml="http://www.w3.org/1999/xhtml";const namespaces={svg:"http://www.w3.org/2000/svg",xhtml,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};function namespace(A){var T=A+="",E=T.indexOf(":");return E>=0&&(T=A.slice(0,E))!=="xmlns"&&(A=A.slice(E+1)),namespaces.hasOwnProperty(T)?{space:namespaces[T],local:A}:A}function creatorInherit(A){return function(){var T=this.ownerDocument,E=this.namespaceURI;return E===xhtml&&T.documentElement.namespaceURI===xhtml?T.createElement(A):T.createElementNS(E,A)}}function creatorFixed(A){return function(){return this.ownerDocument.createElementNS(A.space,A.local)}}function creator(A){var T=namespace(A);return(T.local?creatorFixed:creatorInherit)(T)}function none(){}function selector$1(A){return A==null?none:function(){return this.querySelector(A)}}function selection_select(A){typeof A!="function"&&(A=selector$1(A));for(var T=this._groups,E=T.length,C=new Array(E),P=0;P<E;++P)for(var I=T[P],R=I.length,F=C[P]=new Array(R),O,D,L=0;L<R;++L)(O=I[L])&&(D=A.call(O,O.__data__,L,I))&&("__data__"in O&&(D.__data__=O.__data__),F[L]=D);return new Selection$1(C,this._parents)}function array(A){return A==null?[]:Array.isArray(A)?A:Array.from(A)}function empty(){return[]}function selectorAll(A){return A==null?empty:function(){return this.querySelectorAll(A)}}function arrayAll(A){return function(){return array(A.apply(this,arguments))}}function selection_selectAll(A){typeof A=="function"?A=arrayAll(A):A=selectorAll(A);for(var T=this._groups,E=T.length,C=[],P=[],I=0;I<E;++I)for(var R=T[I],F=R.length,O,D=0;D<F;++D)(O=R[D])&&(C.push(A.call(O,O.__data__,D,R)),P.push(O));return new Selection$1(C,P)}function matcher(A){return function(){return this.matches(A)}}function childMatcher(A){return function(T){return T.matches(A)}}var find=Array.prototype.find;function childFind(A){return function(){return find.call(this.children,A)}}function childFirst(){return this.firstElementChild}function selection_selectChild(A){return this.select(A==null?childFirst:childFind(typeof A=="function"?A:childMatcher(A)))}var filter=Array.prototype.filter;function children(){return Array.from(this.children)}function childrenFilter(A){return function(){return filter.call(this.children,A)}}function selection_selectChildren(A){return this.selectAll(A==null?children:childrenFilter(typeof A=="function"?A:childMatcher(A)))}function selection_filter(A){typeof A!="function"&&(A=matcher(A));for(var T=this._groups,E=T.length,C=new Array(E),P=0;P<E;++P)for(var I=T[P],R=I.length,F=C[P]=[],O,D=0;D<R;++D)(O=I[D])&&A.call(O,O.__data__,D,I)&&F.push(O);return new Selection$1(C,this._parents)}function sparse(A){return new Array(A.length)}function selection_enter(){return new Selection$1(this._enter||this._groups.map(sparse),this._parents)}function EnterNode(A,T){this.ownerDocument=A.ownerDocument,this.namespaceURI=A.namespaceURI,this._next=null,this._parent=A,this.__data__=T}EnterNode.prototype={constructor:EnterNode,appendChild:function(A){return this._parent.insertBefore(A,this._next)},insertBefore:function(A,T){return this._parent.insertBefore(A,T)},querySelector:function(A){return this._parent.querySelector(A)},querySelectorAll:function(A){return this._parent.querySelectorAll(A)}};function constant$4(A){return function(){return A}}function bindIndex(A,T,E,C,P,I){for(var R=0,F,O=T.length,D=I.length;R<D;++R)(F=T[R])?(F.__data__=I[R],C[R]=F):E[R]=new EnterNode(A,I[R]);for(;R<O;++R)(F=T[R])&&(P[R]=F)}function bindKey(A,T,E,C,P,I,R){var F,O,D=new Map,L=T.length,B=I.length,V=new Array(L),U;for(F=0;F<L;++F)(O=T[F])&&(V[F]=U=R.call(O,O.__data__,F,T)+"",D.has(U)?P[F]=O:D.set(U,O));for(F=0;F<B;++F)U=R.call(A,I[F],F,I)+"",(O=D.get(U))?(C[F]=O,O.__data__=I[F],D.delete(U)):E[F]=new EnterNode(A,I[F]);for(F=0;F<L;++F)(O=T[F])&&D.get(V[F])===O&&(P[F]=O)}function datum(A){return A.__data__}function selection_data(A,T){if(!arguments.length)return Array.from(this,datum);var E=T?bindKey:bindIndex,C=this._parents,P=this._groups;typeof A!="function"&&(A=constant$4(A));for(var I=P.length,R=new Array(I),F=new Array(I),O=new Array(I),D=0;D<I;++D){var L=C[D],B=P[D],V=B.length,U=arraylike(A.call(L,L&&L.__data__,D,C)),z=U.length,W=F[D]=new Array(z),Z=R[D]=new Array(z),X=O[D]=new Array(V);E(L,B,W,Z,X,U,T);for(var K=0,Y=0,Q,J;K<z;++K)if(Q=W[K]){for(K>=Y&&(Y=K+1);!(J=Z[Y])&&++Y<z;);Q._next=J||null}}return R=new Selection$1(R,C),R._enter=F,R._exit=O,R}function arraylike(A){return typeof A=="object"&&"length"in A?A:Array.from(A)}function selection_exit(){return new Selection$1(this._exit||this._groups.map(sparse),this._parents)}function selection_join(A,T,E){var C=this.enter(),P=this,I=this.exit();return typeof A=="function"?(C=A(C),C&&(C=C.selection())):C=C.append(A+""),T!=null&&(P=T(P),P&&(P=P.selection())),E==null?I.remove():E(I),C&&P?C.merge(P).order():P}function selection_merge(A){for(var T=A.selection?A.selection():A,E=this._groups,C=T._groups,P=E.length,I=C.length,R=Math.min(P,I),F=new Array(P),O=0;O<R;++O)for(var D=E[O],L=C[O],B=D.length,V=F[O]=new Array(B),U,z=0;z<B;++z)(U=D[z]||L[z])&&(V[z]=U);for(;O<P;++O)F[O]=E[O];return new Selection$1(F,this._parents)}function selection_order(){for(var A=this._groups,T=-1,E=A.length;++T<E;)for(var C=A[T],P=C.length-1,I=C[P],R;--P>=0;)(R=C[P])&&(I&&R.compareDocumentPosition(I)^4&&I.parentNode.insertBefore(R,I),I=R);return this}function selection_sort(A){A||(A=ascending);function T(B,V){return B&&V?A(B.__data__,V.__data__):!B-!V}for(var E=this._groups,C=E.length,P=new Array(C),I=0;I<C;++I){for(var R=E[I],F=R.length,O=P[I]=new Array(F),D,L=0;L<F;++L)(D=R[L])&&(O[L]=D);O.sort(T)}return new Selection$1(P,this._parents).order()}function ascending(A,T){return A<T?-1:A>T?1:A>=T?0:NaN}function selection_call(){var A=arguments[0];return arguments[0]=this,A.apply(null,arguments),this}function selection_nodes(){return Array.from(this)}function selection_node(){for(var A=this._groups,T=0,E=A.length;T<E;++T)for(var C=A[T],P=0,I=C.length;P<I;++P){var R=C[P];if(R)return R}return null}function selection_size(){let A=0;for(const T of this)++A;return A}function selection_empty(){return!this.node()}function selection_each(A){for(var T=this._groups,E=0,C=T.length;E<C;++E)for(var P=T[E],I=0,R=P.length,F;I<R;++I)(F=P[I])&&A.call(F,F.__data__,I,P);return this}function attrRemove$1(A){return function(){this.removeAttribute(A)}}function attrRemoveNS$1(A){return function(){this.removeAttributeNS(A.space,A.local)}}function attrConstant$1(A,T){return function(){this.setAttribute(A,T)}}function attrConstantNS$1(A,T){return function(){this.setAttributeNS(A.space,A.local,T)}}function attrFunction$1(A,T){return function(){var E=T.apply(this,arguments);E==null?this.removeAttribute(A):this.setAttribute(A,E)}}function attrFunctionNS$1(A,T){return function(){var E=T.apply(this,arguments);E==null?this.removeAttributeNS(A.space,A.local):this.setAttributeNS(A.space,A.local,E)}}function selection_attr(A,T){var E=namespace(A);if(arguments.length<2){var C=this.node();return E.local?C.getAttributeNS(E.space,E.local):C.getAttribute(E)}return this.each((T==null?E.local?attrRemoveNS$1:attrRemove$1:typeof T=="function"?E.local?attrFunctionNS$1:attrFunction$1:E.local?attrConstantNS$1:attrConstant$1)(E,T))}function defaultView(A){return A.ownerDocument&&A.ownerDocument.defaultView||A.document&&A||A.defaultView}function styleRemove$1(A){return function(){this.style.removeProperty(A)}}function styleConstant$1(A,T,E){return function(){this.style.setProperty(A,T,E)}}function styleFunction$1(A,T,E){return function(){var C=T.apply(this,arguments);C==null?this.style.removeProperty(A):this.style.setProperty(A,C,E)}}function selection_style(A,T,E){return arguments.length>1?this.each((T==null?styleRemove$1:typeof T=="function"?styleFunction$1:styleConstant$1)(A,T,E??"")):styleValue(this.node(),A)}function styleValue(A,T){return A.style.getPropertyValue(T)||defaultView(A).getComputedStyle(A,null).getPropertyValue(T)}function propertyRemove(A){return function(){delete this[A]}}function propertyConstant(A,T){return function(){this[A]=T}}function propertyFunction(A,T){return function(){var E=T.apply(this,arguments);E==null?delete this[A]:this[A]=E}}function selection_property(A,T){return arguments.length>1?this.each((T==null?propertyRemove:typeof T=="function"?propertyFunction:propertyConstant)(A,T)):this.node()[A]}function classArray(A){return A.trim().split(/^|\s+/)}function classList(A){return A.classList||new ClassList(A)}function ClassList(A){this._node=A,this._names=classArray(A.getAttribute("class")||"")}ClassList.prototype={add:function(A){var T=this._names.indexOf(A);T<0&&(this._names.push(A),this._node.setAttribute("class",this._names.join(" ")))},remove:function(A){var T=this._names.indexOf(A);T>=0&&(this._names.splice(T,1),this._node.setAttribute("class",this._names.join(" ")))},contains:function(A){return this._names.indexOf(A)>=0}};function classedAdd(A,T){for(var E=classList(A),C=-1,P=T.length;++C<P;)E.add(T[C])}function classedRemove(A,T){for(var E=classList(A),C=-1,P=T.length;++C<P;)E.remove(T[C])}function classedTrue(A){return function(){classedAdd(this,A)}}function classedFalse(A){return function(){classedRemove(this,A)}}function classedFunction(A,T){return function(){(T.apply(this,arguments)?classedAdd:classedRemove)(this,A)}}function selection_classed(A,T){var E=classArray(A+"");if(arguments.length<2){for(var C=classList(this.node()),P=-1,I=E.length;++P<I;)if(!C.contains(E[P]))return!1;return!0}return this.each((typeof T=="function"?classedFunction:T?classedTrue:classedFalse)(E,T))}function textRemove(){this.textContent=""}function textConstant$1(A){return function(){this.textContent=A}}function textFunction$1(A){return function(){var T=A.apply(this,arguments);this.textContent=T??""}}function selection_text(A){return arguments.length?this.each(A==null?textRemove:(typeof A=="function"?textFunction$1:textConstant$1)(A)):this.node().textContent}function htmlRemove(){this.innerHTML=""}function htmlConstant(A){return function(){this.innerHTML=A}}function htmlFunction(A){return function(){var T=A.apply(this,arguments);this.innerHTML=T??""}}function selection_html(A){return arguments.length?this.each(A==null?htmlRemove:(typeof A=="function"?htmlFunction:htmlConstant)(A)):this.node().innerHTML}function raise(){this.nextSibling&&this.parentNode.appendChild(this)}function selection_raise(){return this.each(raise)}function lower(){this.previousSibling&&this.parentNode.insertBefore(this,this.parentNode.firstChild)}function selection_lower(){return this.each(lower)}function selection_append(A){var T=typeof A=="function"?A:creator(A);return this.select(function(){return this.appendChild(T.apply(this,arguments))})}function constantNull(){return null}function selection_insert(A,T){var E=typeof A=="function"?A:creator(A),C=T==null?constantNull:typeof T=="function"?T:selector$1(T);return this.select(function(){return this.insertBefore(E.apply(this,arguments),C.apply(this,arguments)||null)})}function remove(){var A=this.parentNode;A&&A.removeChild(this)}function selection_remove(){return this.each(remove)}function selection_cloneShallow(){var A=this.cloneNode(!1),T=this.parentNode;return T?T.insertBefore(A,this.nextSibling):A}function selection_cloneDeep(){var A=this.cloneNode(!0),T=this.parentNode;return T?T.insertBefore(A,this.nextSibling):A}function selection_clone(A){return this.select(A?selection_cloneDeep:selection_cloneShallow)}function selection_datum(A){return arguments.length?this.property("__data__",A):this.node().__data__}function contextListener(A){return function(T){A.call(this,T,this.__data__)}}function parseTypenames(A){return A.trim().split(/^|\s+/).map(function(T){var E="",C=T.indexOf(".");return C>=0&&(E=T.slice(C+1),T=T.slice(0,C)),{type:T,name:E}})}function onRemove(A){return function(){var T=this.__on;if(T){for(var E=0,C=-1,P=T.length,I;E<P;++E)I=T[E],(!A.type||I.type===A.type)&&I.name===A.name?this.removeEventListener(I.type,I.listener,I.options):T[++C]=I;++C?T.length=C:delete this.__on}}}function onAdd(A,T,E){return function(){var C=this.__on,P,I=contextListener(T);if(C){for(var R=0,F=C.length;R<F;++R)if((P=C[R]).type===A.type&&P.name===A.name){this.removeEventListener(P.type,P.listener,P.options),this.addEventListener(P.type,P.listener=I,P.options=E),P.value=T;return}}this.addEventListener(A.type,I,E),P={type:A.type,name:A.name,value:T,listener:I,options:E},C?C.push(P):this.__on=[P]}}function selection_on(A,T,E){var C=parseTypenames(A+""),P,I=C.length,R;if(arguments.length<2){var F=this.node().__on;if(F){for(var O=0,D=F.length,L;O<D;++O)for(P=0,L=F[O];P<I;++P)if((R=C[P]).type===L.type&&R.name===L.name)return L.value}return}for(F=T?onAdd:onRemove,P=0;P<I;++P)this.each(F(C[P],T,E));return this}function dispatchEvent$1(A,T,E){var C=defaultView(A),P=C.CustomEvent;typeof P=="function"?P=new P(T,E):(P=C.document.createEvent("Event"),E?(P.initEvent(T,E.bubbles,E.cancelable),P.detail=E.detail):P.initEvent(T,!1,!1)),A.dispatchEvent(P)}function dispatchConstant(A,T){return function(){return dispatchEvent$1(this,A,T)}}function dispatchFunction(A,T){return function(){return dispatchEvent$1(this,A,T.apply(this,arguments))}}function selection_dispatch(A,T){return this.each((typeof T=="function"?dispatchFunction:dispatchConstant)(A,T))}function*selection_iterator(){for(var A=this._groups,T=0,E=A.length;T<E;++T)for(var C=A[T],P=0,I=C.length,R;P<I;++P)(R=C[P])&&(yield R)}var root$1=[null];function Selection$1(A,T){this._groups=A,this._parents=T}function selection(){return new Selection$1([[document.documentElement]],root$1)}function selection_selection(){return this}Selection$1.prototype=selection.prototype={constructor:Selection$1,select:selection_select,selectAll:selection_selectAll,selectChild:selection_selectChild,selectChildren:selection_selectChildren,filter:selection_filter,data:selection_data,enter:selection_enter,exit:selection_exit,join:selection_join,merge:selection_merge,selection:selection_selection,order:selection_order,sort:selection_sort,call:selection_call,nodes:selection_nodes,node:selection_node,size:selection_size,empty:selection_empty,each:selection_each,attr:selection_attr,style:selection_style,property:selection_property,classed:selection_classed,text:selection_text,html:selection_html,raise:selection_raise,lower:selection_lower,append:selection_append,insert:selection_insert,remove:selection_remove,clone:selection_clone,datum:selection_datum,on:selection_on,dispatch:selection_dispatch,[Symbol.iterator]:selection_iterator};function select(A){return typeof A=="string"?new Selection$1([[document.querySelector(A)]],[document.documentElement]):new Selection$1([[A]],root$1)}function sourceEvent(A){let T;for(;T=A.sourceEvent;)A=T;return A}function pointer(A,T){if(A=sourceEvent(A),T===void 0&&(T=A.currentTarget),T){var E=T.ownerSVGElement||T;if(E.createSVGPoint){var C=E.createSVGPoint();return C.x=A.clientX,C.y=A.clientY,C=C.matrixTransform(T.getScreenCTM().inverse()),[C.x,C.y]}if(T.getBoundingClientRect){var P=T.getBoundingClientRect();return[A.clientX-P.left-T.clientLeft,A.clientY-P.top-T.clientTop]}}return[A.pageX,A.pageY]}const nonpassive={passive:!1},nonpassivecapture={capture:!0,passive:!1};function nopropagation$1(A){A.stopImmediatePropagation()}function noevent$1(A){A.preventDefault(),A.stopImmediatePropagation()}function dragDisable(A){var T=A.document.documentElement,E=select(A).on("dragstart.drag",noevent$1,nonpassivecapture);"onselectstart"in T?E.on("selectstart.drag",noevent$1,nonpassivecapture):(T.__noselect=T.style.MozUserSelect,T.style.MozUserSelect="none")}function yesdrag(A,T){var E=A.document.documentElement,C=select(A).on("dragstart.drag",null);T&&(C.on("click.drag",noevent$1,nonpassivecapture),setTimeout(function(){C.on("click.drag",null)},0)),"onselectstart"in E?C.on("selectstart.drag",null):(E.style.MozUserSelect=E.__noselect,delete E.__noselect)}const constant$3=A=>()=>A;function DragEvent(A,{sourceEvent:T,subject:E,target:C,identifier:P,active:I,x:R,y:F,dx:O,dy:D,dispatch:L}){Object.defineProperties(this,{type:{value:A,enumerable:!0,configurable:!0},sourceEvent:{value:T,enumerable:!0,configurable:!0},subject:{value:E,enumerable:!0,configurable:!0},target:{value:C,enumerable:!0,configurable:!0},identifier:{value:P,enumerable:!0,configurable:!0},active:{value:I,enumerable:!0,configurable:!0},x:{value:R,enumerable:!0,configurable:!0},y:{value:F,enumerable:!0,configurable:!0},dx:{value:O,enumerable:!0,configurable:!0},dy:{value:D,enumerable:!0,configurable:!0},_:{value:L}})}DragEvent.prototype.on=function(){var A=this._.on.apply(this._,arguments);return A===this._?this:A};function defaultFilter$1(A){return!A.ctrlKey&&!A.button}function defaultContainer(){return this.parentNode}function defaultSubject(A,T){return T??{x:A.x,y:A.y}}function defaultTouchable$1(){return navigator.maxTouchPoints||"ontouchstart"in this}function drag(){var A=defaultFilter$1,T=defaultContainer,E=defaultSubject,C=defaultTouchable$1,P={},I=dispatch("start","drag","end"),R=0,F,O,D,L,B=0;function V(Q){Q.on("mousedown.drag",U).filter(C).on("touchstart.drag",Z).on("touchmove.drag",X,nonpassive).on("touchend.drag touchcancel.drag",K).style("touch-action","none").style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}function U(Q,J){if(!(L||!A.call(this,Q,J))){var te=Y(this,T.call(this,Q,J),Q,J,"mouse");te&&(select(Q.view).on("mousemove.drag",z,nonpassivecapture).on("mouseup.drag",W,nonpassivecapture),dragDisable(Q.view),nopropagation$1(Q),D=!1,F=Q.clientX,O=Q.clientY,te("start",Q))}}function z(Q){if(noevent$1(Q),!D){var J=Q.clientX-F,te=Q.clientY-O;D=J*J+te*te>B}P.mouse("drag",Q)}function W(Q){select(Q.view).on("mousemove.drag mouseup.drag",null),yesdrag(Q.view,D),noevent$1(Q),P.mouse("end",Q)}function Z(Q,J){if(A.call(this,Q,J)){var te=Q.changedTouches,ie=T.call(this,Q,J),ne=te.length,he,ve;for(he=0;he<ne;++he)(ve=Y(this,ie,Q,J,te[he].identifier,te[he]))&&(nopropagation$1(Q),ve("start",Q,te[he]))}}function X(Q){var J=Q.changedTouches,te=J.length,ie,ne;for(ie=0;ie<te;++ie)(ne=P[J[ie].identifier])&&(noevent$1(Q),ne("drag",Q,J[ie]))}function K(Q){var J=Q.changedTouches,te=J.length,ie,ne;for(L&&clearTimeout(L),L=setTimeout(function(){L=null},500),ie=0;ie<te;++ie)(ne=P[J[ie].identifier])&&(nopropagation$1(Q),ne("end",Q,J[ie]))}function Y(Q,J,te,ie,ne,he){var ve=I.copy(),ye=pointer(he||te,J),de,fe,ue;if((ue=E.call(Q,new DragEvent("beforestart",{sourceEvent:te,target:V,identifier:ne,active:R,x:ye[0],y:ye[1],dx:0,dy:0,dispatch:ve}),ie))!=null)return de=ue.x-ye[0]||0,fe=ue.y-ye[1]||0,function ge(ae,ce,se){var le=ye,_e;switch(ae){case"start":P[ne]=ge,_e=R++;break;case"end":delete P[ne],--R;case"drag":ye=pointer(se||ce,J),_e=R;break}ve.call(ae,Q,new DragEvent(ae,{sourceEvent:ce,subject:ue,target:V,identifier:ne,active:_e,x:ye[0]+de,y:ye[1]+fe,dx:ye[0]-le[0],dy:ye[1]-le[1],dispatch:ve}),ie)}}return V.filter=function(Q){return arguments.length?(A=typeof Q=="function"?Q:constant$3(!!Q),V):A},V.container=function(Q){return arguments.length?(T=typeof Q=="function"?Q:constant$3(Q),V):T},V.subject=function(Q){return arguments.length?(E=typeof Q=="function"?Q:constant$3(Q),V):E},V.touchable=function(Q){return arguments.length?(C=typeof Q=="function"?Q:constant$3(!!Q),V):C},V.on=function(){var Q=I.on.apply(I,arguments);return Q===I?V:Q},V.clickDistance=function(Q){return arguments.length?(B=(Q=+Q)*Q,V):Math.sqrt(B)},V}function define$1(A,T,E){A.prototype=T.prototype=E,E.constructor=A}function extend(A,T){var E=Object.create(A.prototype);for(var C in T)E[C]=T[C];return E}function Color$1(){}var darker=.7,brighter=1/darker,reI="\\s*([+-]?\\d+)\\s*",reN="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",reP="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",reHex=/^#([0-9a-f]{3,8})$/,reRgbInteger=new RegExp(`^rgb\\(${reI},${reI},${reI}\\)$`),reRgbPercent=new RegExp(`^rgb\\(${reP},${reP},${reP}\\)$`),reRgbaInteger=new RegExp(`^rgba\\(${reI},${reI},${reI},${reN}\\)$`),reRgbaPercent=new RegExp(`^rgba\\(${reP},${reP},${reP},${reN}\\)$`),reHslPercent=new RegExp(`^hsl\\(${reN},${reP},${reP}\\)$`),reHslaPercent=new RegExp(`^hsla\\(${reN},${reP},${reP},${reN}\\)$`),named={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};define$1(Color$1,color,{copy(A){return Object.assign(new this.constructor,this,A)},displayable(){return this.rgb().displayable()},hex:color_formatHex,formatHex:color_formatHex,formatHex8:color_formatHex8,formatHsl:color_formatHsl,formatRgb:color_formatRgb,toString:color_formatRgb});function color_formatHex(){return this.rgb().formatHex()}function color_formatHex8(){return this.rgb().formatHex8()}function color_formatHsl(){return hslConvert(this).formatHsl()}function color_formatRgb(){return this.rgb().formatRgb()}function color(A){var T,E;return A=(A+"").trim().toLowerCase(),(T=reHex.exec(A))?(E=T[1].length,T=parseInt(T[1],16),E===6?rgbn(T):E===3?new Rgb(T>>8&15|T>>4&240,T>>4&15|T&240,(T&15)<<4|T&15,1):E===8?rgba(T>>24&255,T>>16&255,T>>8&255,(T&255)/255):E===4?rgba(T>>12&15|T>>8&240,T>>8&15|T>>4&240,T>>4&15|T&240,((T&15)<<4|T&15)/255):null):(T=reRgbInteger.exec(A))?new Rgb(T[1],T[2],T[3],1):(T=reRgbPercent.exec(A))?new Rgb(T[1]*255/100,T[2]*255/100,T[3]*255/100,1):(T=reRgbaInteger.exec(A))?rgba(T[1],T[2],T[3],T[4]):(T=reRgbaPercent.exec(A))?rgba(T[1]*255/100,T[2]*255/100,T[3]*255/100,T[4]):(T=reHslPercent.exec(A))?hsla(T[1],T[2]/100,T[3]/100,1):(T=reHslaPercent.exec(A))?hsla(T[1],T[2]/100,T[3]/100,T[4]):named.hasOwnProperty(A)?rgbn(named[A]):A==="transparent"?new Rgb(NaN,NaN,NaN,0):null}function rgbn(A){return new Rgb(A>>16&255,A>>8&255,A&255,1)}function rgba(A,T,E,C){return C<=0&&(A=T=E=NaN),new Rgb(A,T,E,C)}function rgbConvert(A){return A instanceof Color$1||(A=color(A)),A?(A=A.rgb(),new Rgb(A.r,A.g,A.b,A.opacity)):new Rgb}function rgb(A,T,E,C){return arguments.length===1?rgbConvert(A):new Rgb(A,T,E,C??1)}function Rgb(A,T,E,C){this.r=+A,this.g=+T,this.b=+E,this.opacity=+C}define$1(Rgb,rgb,extend(Color$1,{brighter(A){return A=A==null?brighter:Math.pow(brighter,A),new Rgb(this.r*A,this.g*A,this.b*A,this.opacity)},darker(A){return A=A==null?darker:Math.pow(darker,A),new Rgb(this.r*A,this.g*A,this.b*A,this.opacity)},rgb(){return this},clamp(){return new Rgb(clampi(this.r),clampi(this.g),clampi(this.b),clampa(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:rgb_formatHex,formatHex:rgb_formatHex,formatHex8:rgb_formatHex8,formatRgb:rgb_formatRgb,toString:rgb_formatRgb}));function rgb_formatHex(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}`}function rgb_formatHex8(){return`#${hex(this.r)}${hex(this.g)}${hex(this.b)}${hex((isNaN(this.opacity)?1:this.opacity)*255)}`}function rgb_formatRgb(){const A=clampa(this.opacity);return`${A===1?"rgb(":"rgba("}${clampi(this.r)}, ${clampi(this.g)}, ${clampi(this.b)}${A===1?")":`, ${A})`}`}function clampa(A){return isNaN(A)?1:Math.max(0,Math.min(1,A))}function clampi(A){return Math.max(0,Math.min(255,Math.round(A)||0))}function hex(A){return A=clampi(A),(A<16?"0":"")+A.toString(16)}function hsla(A,T,E,C){return C<=0?A=T=E=NaN:E<=0||E>=1?A=T=NaN:T<=0&&(A=NaN),new Hsl(A,T,E,C)}function hslConvert(A){if(A instanceof Hsl)return new Hsl(A.h,A.s,A.l,A.opacity);if(A instanceof Color$1||(A=color(A)),!A)return new Hsl;if(A instanceof Hsl)return A;A=A.rgb();var T=A.r/255,E=A.g/255,C=A.b/255,P=Math.min(T,E,C),I=Math.max(T,E,C),R=NaN,F=I-P,O=(I+P)/2;return F?(T===I?R=(E-C)/F+(E<C)*6:E===I?R=(C-T)/F+2:R=(T-E)/F+4,F/=O<.5?I+P:2-I-P,R*=60):F=O>0&&O<1?0:R,new Hsl(R,F,O,A.opacity)}function hsl(A,T,E,C){return arguments.length===1?hslConvert(A):new Hsl(A,T,E,C??1)}function Hsl(A,T,E,C){this.h=+A,this.s=+T,this.l=+E,this.opacity=+C}define$1(Hsl,hsl,extend(Color$1,{brighter(A){return A=A==null?brighter:Math.pow(brighter,A),new Hsl(this.h,this.s,this.l*A,this.opacity)},darker(A){return A=A==null?darker:Math.pow(darker,A),new Hsl(this.h,this.s,this.l*A,this.opacity)},rgb(){var A=this.h%360+(this.h<0)*360,T=isNaN(A)||isNaN(this.s)?0:this.s,E=this.l,C=E+(E<.5?E:1-E)*T,P=2*E-C;return new Rgb(hsl2rgb(A>=240?A-240:A+120,P,C),hsl2rgb(A,P,C),hsl2rgb(A<120?A+240:A-120,P,C),this.opacity)},clamp(){return new Hsl(clamph(this.h),clampt(this.s),clampt(this.l),clampa(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const A=clampa(this.opacity);return`${A===1?"hsl(":"hsla("}${clamph(this.h)}, ${clampt(this.s)*100}%, ${clampt(this.l)*100}%${A===1?")":`, ${A})`}`}}));function clamph(A){return A=(A||0)%360,A<0?A+360:A}function clampt(A){return Math.max(0,Math.min(1,A||0))}function hsl2rgb(A,T,E){return(A<60?T+(E-T)*A/60:A<180?E:A<240?T+(E-T)*(240-A)/60:T)*255}const constant$2=A=>()=>A;function linear$1(A,T){return function(E){return A+E*T}}function exponential(A,T,E){return A=Math.pow(A,E),T=Math.pow(T,E)-A,E=1/E,function(C){return Math.pow(A+C*T,E)}}function gamma(A){return(A=+A)==1?nogamma:function(T,E){return E-T?exponential(T,E,A):constant$2(isNaN(T)?E:T)}}function nogamma(A,T){var E=T-A;return E?linear$1(A,E):constant$2(isNaN(A)?T:A)}const interpolateRgb=function A(T){var E=gamma(T);function C(P,I){var R=E((P=rgb(P)).r,(I=rgb(I)).r),F=E(P.g,I.g),O=E(P.b,I.b),D=nogamma(P.opacity,I.opacity);return function(L){return P.r=R(L),P.g=F(L),P.b=O(L),P.opacity=D(L),P+""}}return C.gamma=A,C}(1);function numberArray(A,T){T||(T=[]);var E=A?Math.min(T.length,A.length):0,C=T.slice(),P;return function(I){for(P=0;P<E;++P)C[P]=A[P]*(1-I)+T[P]*I;return C}}function isNumberArray(A){return ArrayBuffer.isView(A)&&!(A instanceof DataView)}function genericArray(A,T){var E=T?T.length:0,C=A?Math.min(E,A.length):0,P=new Array(C),I=new Array(E),R;for(R=0;R<C;++R)P[R]=interpolate$2(A[R],T[R]);for(;R<E;++R)I[R]=T[R];return function(F){for(R=0;R<C;++R)I[R]=P[R](F);return I}}function date(A,T){var E=new Date;return A=+A,T=+T,function(C){return E.setTime(A*(1-C)+T*C),E}}function interpolateNumber(A,T){return A=+A,T=+T,function(E){return A*(1-E)+T*E}}function object(A,T){var E={},C={},P;(A===null||typeof A!="object")&&(A={}),(T===null||typeof T!="object")&&(T={});for(P in T)P in A?E[P]=interpolate$2(A[P],T[P]):C[P]=T[P];return function(I){for(P in E)C[P]=E[P](I);return C}}var reA=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,reB=new RegExp(reA.source,"g");function zero(A){return function(){return A}}function one(A){return function(T){return A(T)+""}}function interpolateString(A,T){var E=reA.lastIndex=reB.lastIndex=0,C,P,I,R=-1,F=[],O=[];for(A=A+"",T=T+"";(C=reA.exec(A))&&(P=reB.exec(T));)(I=P.index)>E&&(I=T.slice(E,I),F[R]?F[R]+=I:F[++R]=I),(C=C[0])===(P=P[0])?F[R]?F[R]+=P:F[++R]=P:(F[++R]=null,O.push({i:R,x:interpolateNumber(C,P)})),E=reB.lastIndex;return E<T.length&&(I=T.slice(E),F[R]?F[R]+=I:F[++R]=I),F.length<2?O[0]?one(O[0].x):zero(T):(T=O.length,function(D){for(var L=0,B;L<T;++L)F[(B=O[L]).i]=B.x(D);return F.join("")})}function interpolate$2(A,T){var E=typeof T,C;return T==null||E==="boolean"?constant$2(T):(E==="number"?interpolateNumber:E==="string"?(C=color(T))?(T=C,interpolateRgb):interpolateString:T instanceof color?interpolateRgb:T instanceof Date?date:isNumberArray(T)?numberArray:Array.isArray(T)?genericArray:typeof T.valueOf!="function"&&typeof T.toString!="function"||isNaN(T)?object:interpolateNumber)(A,T)}function interpolateRound(A,T){return A=+A,T=+T,function(E){return Math.round(A*(1-E)+T*E)}}var degrees=180/Math.PI,identity$3={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1};function decompose(A,T,E,C,P,I){var R,F,O;return(R=Math.sqrt(A*A+T*T))&&(A/=R,T/=R),(O=A*E+T*C)&&(E-=A*O,C-=T*O),(F=Math.sqrt(E*E+C*C))&&(E/=F,C/=F,O/=F),A*C<T*E&&(A=-A,T=-T,O=-O,R=-R),{translateX:P,translateY:I,rotate:Math.atan2(T,A)*degrees,skewX:Math.atan(O)*degrees,scaleX:R,scaleY:F}}var svgNode;function parseCss(A){const T=new(typeof DOMMatrix=="function"?DOMMatrix:WebKitCSSMatrix)(A+"");return T.isIdentity?identity$3:decompose(T.a,T.b,T.c,T.d,T.e,T.f)}function parseSvg(A){return A==null||(svgNode||(svgNode=document.createElementNS("http://www.w3.org/2000/svg","g")),svgNode.setAttribute("transform",A),!(A=svgNode.transform.baseVal.consolidate()))?identity$3:(A=A.matrix,decompose(A.a,A.b,A.c,A.d,A.e,A.f))}function interpolateTransform(A,T,E,C){function P(D){return D.length?D.pop()+" ":""}function I(D,L,B,V,U,z){if(D!==B||L!==V){var W=U.push("translate(",null,T,null,E);z.push({i:W-4,x:interpolateNumber(D,B)},{i:W-2,x:interpolateNumber(L,V)})}else(B||V)&&U.push("translate("+B+T+V+E)}function R(D,L,B,V){D!==L?(D-L>180?L+=360:L-D>180&&(D+=360),V.push({i:B.push(P(B)+"rotate(",null,C)-2,x:interpolateNumber(D,L)})):L&&B.push(P(B)+"rotate("+L+C)}function F(D,L,B,V){D!==L?V.push({i:B.push(P(B)+"skewX(",null,C)-2,x:interpolateNumber(D,L)}):L&&B.push(P(B)+"skewX("+L+C)}function O(D,L,B,V,U,z){if(D!==B||L!==V){var W=U.push(P(U)+"scale(",null,",",null,")");z.push({i:W-4,x:interpolateNumber(D,B)},{i:W-2,x:interpolateNumber(L,V)})}else(B!==1||V!==1)&&U.push(P(U)+"scale("+B+","+V+")")}return function(D,L){var B=[],V=[];return D=A(D),L=A(L),I(D.translateX,D.translateY,L.translateX,L.translateY,B,V),R(D.rotate,L.rotate,B,V),F(D.skewX,L.skewX,B,V),O(D.scaleX,D.scaleY,L.scaleX,L.scaleY,B,V),D=L=null,function(U){for(var z=-1,W=V.length,Z;++z<W;)B[(Z=V[z]).i]=Z.x(U);return B.join("")}}}var interpolateTransformCss=interpolateTransform(parseCss,"px, ","px)","deg)"),interpolateTransformSvg=interpolateTransform(parseSvg,", ",")",")"),epsilon2=1e-12;function cosh(A){return((A=Math.exp(A))+1/A)/2}function sinh(A){return((A=Math.exp(A))-1/A)/2}function tanh(A){return((A=Math.exp(2*A))-1)/(A+1)}const interpolateZoom=function A(T,E,C){function P(I,R){var F=I[0],O=I[1],D=I[2],L=R[0],B=R[1],V=R[2],U=L-F,z=B-O,W=U*U+z*z,Z,X;if(W<epsilon2)X=Math.log(V/D)/T,Z=function(ie){return[F+ie*U,O+ie*z,D*Math.exp(T*ie*X)]};else{var K=Math.sqrt(W),Y=(V*V-D*D+C*W)/(2*D*E*K),Q=(V*V-D*D-C*W)/(2*V*E*K),J=Math.log(Math.sqrt(Y*Y+1)-Y),te=Math.log(Math.sqrt(Q*Q+1)-Q);X=(te-J)/T,Z=function(ie){var ne=ie*X,he=cosh(J),ve=D/(E*K)*(he*tanh(T*ne+J)-sinh(J));return[F+ve*U,O+ve*z,D*he/cosh(T*ne+J)]}}return Z.duration=X*1e3*T/Math.SQRT2,Z}return P.rho=function(I){var R=Math.max(.001,+I),F=R*R,O=F*F;return A(R,F,O)},P}(Math.SQRT2,2,4);var frame=0,timeout$1=0,interval=0,pokeDelay=1e3,taskHead,taskTail,clockLast=0,clockNow=0,clockSkew=0,clock=typeof performance=="object"&&performance.now?performance:Date,setFrame=typeof window=="object"&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(A){setTimeout(A,17)};function now$1(){return clockNow||(setFrame(clearNow),clockNow=clock.now()+clockSkew)}function clearNow(){clockNow=0}function Timer(){this._call=this._time=this._next=null}Timer.prototype=timer.prototype={constructor:Timer,restart:function(A,T,E){if(typeof A!="function")throw new TypeError("callback is not a function");E=(E==null?now$1():+E)+(T==null?0:+T),!this._next&&taskTail!==this&&(taskTail?taskTail._next=this:taskHead=this,taskTail=this),this._call=A,this._time=E,sleep()},stop:function(){this._call&&(this._call=null,this._time=1/0,sleep())}};function timer(A,T,E){var C=new Timer;return C.restart(A,T,E),C}function timerFlush(){now$1(),++frame;for(var A=taskHead,T;A;)(T=clockNow-A._time)>=0&&A._call.call(void 0,T),A=A._next;--frame}function wake(){clockNow=(clockLast=clock.now())+clockSkew,frame=timeout$1=0;try{timerFlush()}finally{frame=0,nap(),clockNow=0}}function poke(){var A=clock.now(),T=A-clockLast;T>pokeDelay&&(clockSkew-=T,clockLast=A)}function nap(){for(var A,T=taskHead,E,C=1/0;T;)T._call?(C>T._time&&(C=T._time),A=T,T=T._next):(E=T._next,T._next=null,T=A?A._next=E:taskHead=E);taskTail=A,sleep(C)}function sleep(A){if(!frame){timeout$1&&(timeout$1=clearTimeout(timeout$1));var T=A-clockNow;T>24?(A<1/0&&(timeout$1=setTimeout(wake,A-clock.now()-clockSkew)),interval&&(interval=clearInterval(interval))):(interval||(clockLast=clock.now(),interval=setInterval(poke,pokeDelay)),frame=1,setFrame(wake))}}function timeout(A,T,E){var C=new Timer;return T=T==null?0:+T,C.restart(P=>{C.stop(),A(P+T)},T,E),C}var emptyOn=dispatch("start","end","cancel","interrupt"),emptyTween=[],CREATED=0,SCHEDULED=1,STARTING=2,STARTED=3,RUNNING=4,ENDING=5,ENDED=6;function schedule(A,T,E,C,P,I){var R=A.__transition;if(!R)A.__transition={};else if(E in R)return;create(A,E,{name:T,index:C,group:P,on:emptyOn,tween:emptyTween,time:I.time,delay:I.delay,duration:I.duration,ease:I.ease,timer:null,state:CREATED})}function init$1(A,T){var E=get(A,T);if(E.state>CREATED)throw new Error("too late; already scheduled");return E}function set(A,T){var E=get(A,T);if(E.state>STARTED)throw new Error("too late; already running");return E}function get(A,T){var E=A.__transition;if(!E||!(E=E[T]))throw new Error("transition not found");return E}function create(A,T,E){var C=A.__transition,P;C[T]=E,E.timer=timer(I,0,E.time);function I(D){E.state=SCHEDULED,E.timer.restart(R,E.delay,E.time),E.delay<=D&&R(D-E.delay)}function R(D){var L,B,V,U;if(E.state!==SCHEDULED)return O();for(L in C)if(U=C[L],U.name===E.name){if(U.state===STARTED)return timeout(R);U.state===RUNNING?(U.state=ENDED,U.timer.stop(),U.on.call("interrupt",A,A.__data__,U.index,U.group),delete C[L]):+L<T&&(U.state=ENDED,U.timer.stop(),U.on.call("cancel",A,A.__data__,U.index,U.group),delete C[L])}if(timeout(function(){E.state===STARTED&&(E.state=RUNNING,E.timer.restart(F,E.delay,E.time),F(D))}),E.state=STARTING,E.on.call("start",A,A.__data__,E.index,E.group),E.state===STARTING){for(E.state=STARTED,P=new Array(V=E.tween.length),L=0,B=-1;L<V;++L)(U=E.tween[L].value.call(A,A.__data__,E.index,E.group))&&(P[++B]=U);P.length=B+1}}function F(D){for(var L=D<E.duration?E.ease.call(null,D/E.duration):(E.timer.restart(O),E.state=ENDING,1),B=-1,V=P.length;++B<V;)P[B].call(A,L);E.state===ENDING&&(E.on.call("end",A,A.__data__,E.index,E.group),O())}function O(){E.state=ENDED,E.timer.stop(),delete C[T];for(var D in C)return;delete A.__transition}}function interrupt(A,T){var E=A.__transition,C,P,I=!0,R;if(E){T=T==null?null:T+"";for(R in E){if((C=E[R]).name!==T){I=!1;continue}P=C.state>STARTING&&C.state<ENDING,C.state=ENDED,C.timer.stop(),C.on.call(P?"interrupt":"cancel",A,A.__data__,C.index,C.group),delete E[R]}I&&delete A.__transition}}function selection_interrupt(A){return this.each(function(){interrupt(this,A)})}function tweenRemove(A,T){var E,C;return function(){var P=set(this,A),I=P.tween;if(I!==E){C=E=I;for(var R=0,F=C.length;R<F;++R)if(C[R].name===T){C=C.slice(),C.splice(R,1);break}}P.tween=C}}function tweenFunction(A,T,E){var C,P;if(typeof E!="function")throw new Error;return function(){var I=set(this,A),R=I.tween;if(R!==C){P=(C=R).slice();for(var F={name:T,value:E},O=0,D=P.length;O<D;++O)if(P[O].name===T){P[O]=F;break}O===D&&P.push(F)}I.tween=P}}function transition_tween(A,T){var E=this._id;if(A+="",arguments.length<2){for(var C=get(this.node(),E).tween,P=0,I=C.length,R;P<I;++P)if((R=C[P]).name===A)return R.value;return null}return this.each((T==null?tweenRemove:tweenFunction)(E,A,T))}function tweenValue(A,T,E){var C=A._id;return A.each(function(){var P=set(this,C);(P.value||(P.value={}))[T]=E.apply(this,arguments)}),function(P){return get(P,C).value[T]}}function interpolate$1(A,T){var E;return(typeof T=="number"?interpolateNumber:T instanceof color?interpolateRgb:(E=color(T))?(T=E,interpolateRgb):interpolateString)(A,T)}function attrRemove(A){return function(){this.removeAttribute(A)}}function attrRemoveNS(A){return function(){this.removeAttributeNS(A.space,A.local)}}function attrConstant(A,T,E){var C,P=E+"",I;return function(){var R=this.getAttribute(A);return R===P?null:R===C?I:I=T(C=R,E)}}function attrConstantNS(A,T,E){var C,P=E+"",I;return function(){var R=this.getAttributeNS(A.space,A.local);return R===P?null:R===C?I:I=T(C=R,E)}}function attrFunction(A,T,E){var C,P,I;return function(){var R,F=E(this),O;return F==null?void this.removeAttribute(A):(R=this.getAttribute(A),O=F+"",R===O?null:R===C&&O===P?I:(P=O,I=T(C=R,F)))}}function attrFunctionNS(A,T,E){var C,P,I;return function(){var R,F=E(this),O;return F==null?void this.removeAttributeNS(A.space,A.local):(R=this.getAttributeNS(A.space,A.local),O=F+"",R===O?null:R===C&&O===P?I:(P=O,I=T(C=R,F)))}}function transition_attr(A,T){var E=namespace(A),C=E==="transform"?interpolateTransformSvg:interpolate$1;return this.attrTween(A,typeof T=="function"?(E.local?attrFunctionNS:attrFunction)(E,C,tweenValue(this,"attr."+A,T)):T==null?(E.local?attrRemoveNS:attrRemove)(E):(E.local?attrConstantNS:attrConstant)(E,C,T))}function attrInterpolate(A,T){return function(E){this.setAttribute(A,T.call(this,E))}}function attrInterpolateNS(A,T){return function(E){this.setAttributeNS(A.space,A.local,T.call(this,E))}}function attrTweenNS(A,T){var E,C;function P(){var I=T.apply(this,arguments);return I!==C&&(E=(C=I)&&attrInterpolateNS(A,I)),E}return P._value=T,P}function attrTween(A,T){var E,C;function P(){var I=T.apply(this,arguments);return I!==C&&(E=(C=I)&&attrInterpolate(A,I)),E}return P._value=T,P}function transition_attrTween(A,T){var E="attr."+A;if(arguments.length<2)return(E=this.tween(E))&&E._value;if(T==null)return this.tween(E,null);if(typeof T!="function")throw new Error;var C=namespace(A);return this.tween(E,(C.local?attrTweenNS:attrTween)(C,T))}function delayFunction(A,T){return function(){init$1(this,A).delay=+T.apply(this,arguments)}}function delayConstant(A,T){return T=+T,function(){init$1(this,A).delay=T}}function transition_delay(A){var T=this._id;return arguments.length?this.each((typeof A=="function"?delayFunction:delayConstant)(T,A)):get(this.node(),T).delay}function durationFunction(A,T){return function(){set(this,A).duration=+T.apply(this,arguments)}}function durationConstant(A,T){return T=+T,function(){set(this,A).duration=T}}function transition_duration(A){var T=this._id;return arguments.length?this.each((typeof A=="function"?durationFunction:durationConstant)(T,A)):get(this.node(),T).duration}function easeConstant(A,T){if(typeof T!="function")throw new Error;return function(){set(this,A).ease=T}}function transition_ease(A){var T=this._id;return arguments.length?this.each(easeConstant(T,A)):get(this.node(),T).ease}function easeVarying(A,T){return function(){var E=T.apply(this,arguments);if(typeof E!="function")throw new Error;set(this,A).ease=E}}function transition_easeVarying(A){if(typeof A!="function")throw new Error;return this.each(easeVarying(this._id,A))}function transition_filter(A){typeof A!="function"&&(A=matcher(A));for(var T=this._groups,E=T.length,C=new Array(E),P=0;P<E;++P)for(var I=T[P],R=I.length,F=C[P]=[],O,D=0;D<R;++D)(O=I[D])&&A.call(O,O.__data__,D,I)&&F.push(O);return new Transition(C,this._parents,this._name,this._id)}function transition_merge(A){if(A._id!==this._id)throw new Error;for(var T=this._groups,E=A._groups,C=T.length,P=E.length,I=Math.min(C,P),R=new Array(C),F=0;F<I;++F)for(var O=T[F],D=E[F],L=O.length,B=R[F]=new Array(L),V,U=0;U<L;++U)(V=O[U]||D[U])&&(B[U]=V);for(;F<C;++F)R[F]=T[F];return new Transition(R,this._parents,this._name,this._id)}function start$1(A){return(A+"").trim().split(/^|\s+/).every(function(T){var E=T.indexOf(".");return E>=0&&(T=T.slice(0,E)),!T||T==="start"})}function onFunction(A,T,E){var C,P,I=start$1(T)?init$1:set;return function(){var R=I(this,A),F=R.on;F!==C&&(P=(C=F).copy()).on(T,E),R.on=P}}function transition_on(A,T){var E=this._id;return arguments.length<2?get(this.node(),E).on.on(A):this.each(onFunction(E,A,T))}function removeFunction(A){return function(){var T=this.parentNode;for(var E in this.__transition)if(+E!==A)return;T&&T.removeChild(this)}}function transition_remove(){return this.on("end.remove",removeFunction(this._id))}function transition_select(A){var T=this._name,E=this._id;typeof A!="function"&&(A=selector$1(A));for(var C=this._groups,P=C.length,I=new Array(P),R=0;R<P;++R)for(var F=C[R],O=F.length,D=I[R]=new Array(O),L,B,V=0;V<O;++V)(L=F[V])&&(B=A.call(L,L.__data__,V,F))&&("__data__"in L&&(B.__data__=L.__data__),D[V]=B,schedule(D[V],T,E,V,D,get(L,E)));return new Transition(I,this._parents,T,E)}function transition_selectAll(A){var T=this._name,E=this._id;typeof A!="function"&&(A=selectorAll(A));for(var C=this._groups,P=C.length,I=[],R=[],F=0;F<P;++F)for(var O=C[F],D=O.length,L,B=0;B<D;++B)if(L=O[B]){for(var V=A.call(L,L.__data__,B,O),U,z=get(L,E),W=0,Z=V.length;W<Z;++W)(U=V[W])&&schedule(U,T,E,W,V,z);I.push(V),R.push(L)}return new Transition(I,R,T,E)}var Selection=selection.prototype.constructor;function transition_selection(){return new Selection(this._groups,this._parents)}function styleNull(A,T){var E,C,P;return function(){var I=styleValue(this,A),R=(this.style.removeProperty(A),styleValue(this,A));return I===R?null:I===E&&R===C?P:P=T(E=I,C=R)}}function styleRemove(A){return function(){this.style.removeProperty(A)}}function styleConstant(A,T,E){var C,P=E+"",I;return function(){var R=styleValue(this,A);return R===P?null:R===C?I:I=T(C=R,E)}}function styleFunction(A,T,E){var C,P,I;return function(){var R=styleValue(this,A),F=E(this),O=F+"";return F==null&&(O=F=(this.style.removeProperty(A),styleValue(this,A))),R===O?null:R===C&&O===P?I:(P=O,I=T(C=R,F))}}function styleMaybeRemove(A,T){var E,C,P,I="style."+T,R="end."+I,F;return function(){var O=set(this,A),D=O.on,L=O.value[I]==null?F||(F=styleRemove(T)):void 0;(D!==E||P!==L)&&(C=(E=D).copy()).on(R,P=L),O.on=C}}function transition_style(A,T,E){var C=(A+="")=="transform"?interpolateTransformCss:interpolate$1;return T==null?this.styleTween(A,styleNull(A,C)).on("end.style."+A,styleRemove(A)):typeof T=="function"?this.styleTween(A,styleFunction(A,C,tweenValue(this,"style."+A,T))).each(styleMaybeRemove(this._id,A)):this.styleTween(A,styleConstant(A,C,T),E).on("end.style."+A,null)}function styleInterpolate(A,T,E){return function(C){this.style.setProperty(A,T.call(this,C),E)}}function styleTween(A,T,E){var C,P;function I(){var R=T.apply(this,arguments);return R!==P&&(C=(P=R)&&styleInterpolate(A,R,E)),C}return I._value=T,I}function transition_styleTween(A,T,E){var C="style."+(A+="");if(arguments.length<2)return(C=this.tween(C))&&C._value;if(T==null)return this.tween(C,null);if(typeof T!="function")throw new Error;return this.tween(C,styleTween(A,T,E??""))}function textConstant(A){return function(){this.textContent=A}}function textFunction(A){return function(){var T=A(this);this.textContent=T??""}}function transition_text(A){return this.tween("text",typeof A=="function"?textFunction(tweenValue(this,"text",A)):textConstant(A==null?"":A+""))}function textInterpolate(A){return function(T){this.textContent=A.call(this,T)}}function textTween(A){var T,E;function C(){var P=A.apply(this,arguments);return P!==E&&(T=(E=P)&&textInterpolate(P)),T}return C._value=A,C}function transition_textTween(A){var T="text";if(arguments.length<1)return(T=this.tween(T))&&T._value;if(A==null)return this.tween(T,null);if(typeof A!="function")throw new Error;return this.tween(T,textTween(A))}function transition_transition(){for(var A=this._name,T=this._id,E=newId(),C=this._groups,P=C.length,I=0;I<P;++I)for(var R=C[I],F=R.length,O,D=0;D<F;++D)if(O=R[D]){var L=get(O,T);schedule(O,A,E,D,R,{time:L.time+L.delay+L.duration,delay:0,duration:L.duration,ease:L.ease})}return new Transition(C,this._parents,A,E)}function transition_end(){var A,T,E=this,C=E._id,P=E.size();return new Promise(function(I,R){var F={value:R},O={value:function(){--P===0&&I()}};E.each(function(){var D=set(this,C),L=D.on;L!==A&&(T=(A=L).copy(),T._.cancel.push(F),T._.interrupt.push(F),T._.end.push(O)),D.on=T}),P===0&&I()})}var id=0;function Transition(A,T,E,C){this._groups=A,this._parents=T,this._name=E,this._id=C}function newId(){return++id}var selection_prototype=selection.prototype;Transition.prototype={constructor:Transition,select:transition_select,selectAll:transition_selectAll,selectChild:selection_prototype.selectChild,selectChildren:selection_prototype.selectChildren,filter:transition_filter,merge:transition_merge,selection:transition_selection,transition:transition_transition,call:selection_prototype.call,nodes:selection_prototype.nodes,node:selection_prototype.node,size:selection_prototype.size,empty:selection_prototype.empty,each:selection_prototype.each,on:transition_on,attr:transition_attr,attrTween:transition_attrTween,style:transition_style,styleTween:transition_styleTween,text:transition_text,textTween:transition_textTween,remove:transition_remove,tween:transition_tween,delay:transition_delay,duration:transition_duration,ease:transition_ease,easeVarying:transition_easeVarying,end:transition_end,[Symbol.iterator]:selection_prototype[Symbol.iterator]};function quadIn(A){return A*A}function quadOut(A){return A*(2-A)}function quadInOut(A){return((A*=2)<=1?A*A:--A*(2-A)+1)/2}function cubicInOut(A){return((A*=2)<=1?A*A*A:(A-=2)*A*A+2)/2}var defaultTiming={time:null,delay:0,duration:250,ease:cubicInOut};function inherit(A,T){for(var E;!(E=A.__transition)||!(E=E[T]);)if(!(A=A.parentNode))throw new Error(`transition ${T} not found`);return E}function selection_transition(A){var T,E;A instanceof Transition?(T=A._id,A=A._name):(T=newId(),(E=defaultTiming).time=now$1(),A=A==null?null:A+"");for(var C=this._groups,P=C.length,I=0;I<P;++I)for(var R=C[I],F=R.length,O,D=0;D<F;++D)(O=R[D])&&schedule(O,A,T,D,R,E||inherit(O,T));return new Transition(C,this._parents,A,T)}selection.prototype.interrupt=selection_interrupt;selection.prototype.transition=selection_transition;function center$1(A,T){var E,C=1;A==null&&(A=0),T==null&&(T=0);function P(){var I,R=E.length,F,O=0,D=0;for(I=0;I<R;++I)F=E[I],O+=F.x,D+=F.y;for(O=(O/R-A)*C,D=(D/R-T)*C,I=0;I<R;++I)F=E[I],F.x-=O,F.y-=D}return P.initialize=function(I){E=I},P.x=function(I){return arguments.length?(A=+I,P):A},P.y=function(I){return arguments.length?(T=+I,P):T},P.strength=function(I){return arguments.length?(C=+I,P):C},P}function tree_add(A){const T=+this._x.call(null,A),E=+this._y.call(null,A);return add(this.cover(T,E),T,E,A)}function add(A,T,E,C){if(isNaN(T)||isNaN(E))return A;var P,I=A._root,R={data:C},F=A._x0,O=A._y0,D=A._x1,L=A._y1,B,V,U,z,W,Z,X,K;if(!I)return A._root=R,A;for(;I.length;)if((W=T>=(B=(F+D)/2))?F=B:D=B,(Z=E>=(V=(O+L)/2))?O=V:L=V,P=I,!(I=I[X=Z<<1|W]))return P[X]=R,A;if(U=+A._x.call(null,I.data),z=+A._y.call(null,I.data),T===U&&E===z)return R.next=I,P?P[X]=R:A._root=R,A;do P=P?P[X]=new Array(4):A._root=new Array(4),(W=T>=(B=(F+D)/2))?F=B:D=B,(Z=E>=(V=(O+L)/2))?O=V:L=V;while((X=Z<<1|W)===(K=(z>=V)<<1|U>=B));return P[K]=I,P[X]=R,A}function addAll(A){var T,E,C=A.length,P,I,R=new Array(C),F=new Array(C),O=1/0,D=1/0,L=-1/0,B=-1/0;for(E=0;E<C;++E)isNaN(P=+this._x.call(null,T=A[E]))||isNaN(I=+this._y.call(null,T))||(R[E]=P,F[E]=I,P<O&&(O=P),P>L&&(L=P),I<D&&(D=I),I>B&&(B=I));if(O>L||D>B)return this;for(this.cover(O,D).cover(L,B),E=0;E<C;++E)add(this,R[E],F[E],A[E]);return this}function tree_cover(A,T){if(isNaN(A=+A)||isNaN(T=+T))return this;var E=this._x0,C=this._y0,P=this._x1,I=this._y1;if(isNaN(E))P=(E=Math.floor(A))+1,I=(C=Math.floor(T))+1;else{for(var R=P-E||1,F=this._root,O,D;E>A||A>=P||C>T||T>=I;)switch(D=(T<C)<<1|A<E,O=new Array(4),O[D]=F,F=O,R*=2,D){case 0:P=E+R,I=C+R;break;case 1:E=P-R,I=C+R;break;case 2:P=E+R,C=I-R;break;case 3:E=P-R,C=I-R;break}this._root&&this._root.length&&(this._root=F)}return this._x0=E,this._y0=C,this._x1=P,this._y1=I,this}function tree_data(){var A=[];return this.visit(function(T){if(!T.length)do A.push(T.data);while(T=T.next)}),A}function tree_extent(A){return arguments.length?this.cover(+A[0][0],+A[0][1]).cover(+A[1][0],+A[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Quad$1(A,T,E,C,P){this.node=A,this.x0=T,this.y0=E,this.x1=C,this.y1=P}function tree_find(A,T,E){var C,P=this._x0,I=this._y0,R,F,O,D,L=this._x1,B=this._y1,V=[],U=this._root,z,W;for(U&&V.push(new Quad$1(U,P,I,L,B)),E==null?E=1/0:(P=A-E,I=T-E,L=A+E,B=T+E,E*=E);z=V.pop();)if(!(!(U=z.node)||(R=z.x0)>L||(F=z.y0)>B||(O=z.x1)<P||(D=z.y1)<I))if(U.length){var Z=(R+O)/2,X=(F+D)/2;V.push(new Quad$1(U[3],Z,X,O,D),new Quad$1(U[2],R,X,Z,D),new Quad$1(U[1],Z,F,O,X),new Quad$1(U[0],R,F,Z,X)),(W=(T>=X)<<1|A>=Z)&&(z=V[V.length-1],V[V.length-1]=V[V.length-1-W],V[V.length-1-W]=z)}else{var K=A-+this._x.call(null,U.data),Y=T-+this._y.call(null,U.data),Q=K*K+Y*Y;if(Q<E){var J=Math.sqrt(E=Q);P=A-J,I=T-J,L=A+J,B=T+J,C=U.data}}return C}function tree_remove(A){if(isNaN(L=+this._x.call(null,A))||isNaN(B=+this._y.call(null,A)))return this;var T,E=this._root,C,P,I,R=this._x0,F=this._y0,O=this._x1,D=this._y1,L,B,V,U,z,W,Z,X;if(!E)return this;if(E.length)for(;;){if((z=L>=(V=(R+O)/2))?R=V:O=V,(W=B>=(U=(F+D)/2))?F=U:D=U,T=E,!(E=E[Z=W<<1|z]))return this;if(!E.length)break;(T[Z+1&3]||T[Z+2&3]||T[Z+3&3])&&(C=T,X=Z)}for(;E.data!==A;)if(P=E,!(E=E.next))return this;return(I=E.next)&&delete E.next,P?(I?P.next=I:delete P.next,this):T?(I?T[Z]=I:delete T[Z],(E=T[0]||T[1]||T[2]||T[3])&&E===(T[3]||T[2]||T[1]||T[0])&&!E.length&&(C?C[X]=E:this._root=E),this):(this._root=I,this)}function removeAll(A){for(var T=0,E=A.length;T<E;++T)this.remove(A[T]);return this}function tree_root(){return this._root}function tree_size(){var A=0;return this.visit(function(T){if(!T.length)do++A;while(T=T.next)}),A}function tree_visit(A){var T=[],E,C=this._root,P,I,R,F,O;for(C&&T.push(new Quad$1(C,this._x0,this._y0,this._x1,this._y1));E=T.pop();)if(!A(C=E.node,I=E.x0,R=E.y0,F=E.x1,O=E.y1)&&C.length){var D=(I+F)/2,L=(R+O)/2;(P=C[3])&&T.push(new Quad$1(P,D,L,F,O)),(P=C[2])&&T.push(new Quad$1(P,I,L,D,O)),(P=C[1])&&T.push(new Quad$1(P,D,R,F,L)),(P=C[0])&&T.push(new Quad$1(P,I,R,D,L))}return this}function tree_visitAfter(A){var T=[],E=[],C;for(this._root&&T.push(new Quad$1(this._root,this._x0,this._y0,this._x1,this._y1));C=T.pop();){var P=C.node;if(P.length){var I,R=C.x0,F=C.y0,O=C.x1,D=C.y1,L=(R+O)/2,B=(F+D)/2;(I=P[0])&&T.push(new Quad$1(I,R,F,L,B)),(I=P[1])&&T.push(new Quad$1(I,L,F,O,B)),(I=P[2])&&T.push(new Quad$1(I,R,B,L,D)),(I=P[3])&&T.push(new Quad$1(I,L,B,O,D))}E.push(C)}for(;C=E.pop();)A(C.node,C.x0,C.y0,C.x1,C.y1);return this}function defaultX(A){return A[0]}function tree_x(A){return arguments.length?(this._x=A,this):this._x}function defaultY(A){return A[1]}function tree_y(A){return arguments.length?(this._y=A,this):this._y}function quadtree(A,T,E){var C=new Quadtree(T??defaultX,E??defaultY,NaN,NaN,NaN,NaN);return A==null?C:C.addAll(A)}function Quadtree(A,T,E,C,P,I){this._x=A,this._y=T,this._x0=E,this._y0=C,this._x1=P,this._y1=I,this._root=void 0}function leaf_copy(A){for(var T={data:A.data},E=T;A=A.next;)E=E.next={data:A.data};return T}var treeProto=quadtree.prototype=Quadtree.prototype;treeProto.copy=function(){var A=new Quadtree(this._x,this._y,this._x0,this._y0,this._x1,this._y1),T=this._root,E,C;if(!T)return A;if(!T.length)return A._root=leaf_copy(T),A;for(E=[{source:T,target:A._root=new Array(4)}];T=E.pop();)for(var P=0;P<4;++P)(C=T.source[P])&&(C.length?E.push({source:C,target:T.target[P]=new Array(4)}):T.target[P]=leaf_copy(C));return A};treeProto.add=tree_add;treeProto.addAll=addAll;treeProto.cover=tree_cover;treeProto.data=tree_data;treeProto.extent=tree_extent;treeProto.find=tree_find;treeProto.remove=tree_remove;treeProto.removeAll=removeAll;treeProto.root=tree_root;treeProto.size=tree_size;treeProto.visit=tree_visit;treeProto.visitAfter=tree_visitAfter;treeProto.x=tree_x;treeProto.y=tree_y;function constant$1(A){return function(){return A}}function jiggle(A){return(A()-.5)*1e-6}function x$3(A){return A.x+A.vx}function y$3(A){return A.y+A.vy}function collide(A){var T,E,C,P=1,I=1;typeof A!="function"&&(A=constant$1(A==null?1:+A));function R(){for(var D,L=T.length,B,V,U,z,W,Z,X=0;X<I;++X)for(B=quadtree(T,x$3,y$3).visitAfter(F),D=0;D<L;++D)V=T[D],W=E[V.index],Z=W*W,U=V.x+V.vx,z=V.y+V.vy,B.visit(K);function K(Y,Q,J,te,ie){var ne=Y.data,he=Y.r,ve=W+he;if(ne){if(ne.index>V.index){var ye=U-ne.x-ne.vx,de=z-ne.y-ne.vy,fe=ye*ye+de*de;fe<ve*ve&&(ye===0&&(ye=jiggle(C),fe+=ye*ye),de===0&&(de=jiggle(C),fe+=de*de),fe=(ve-(fe=Math.sqrt(fe)))/fe*P,V.vx+=(ye*=fe)*(ve=(he*=he)/(Z+he)),V.vy+=(de*=fe)*ve,ne.vx-=ye*(ve=1-ve),ne.vy-=de*ve)}return}return Q>U+ve||te<U-ve||J>z+ve||ie<z-ve}}function F(D){if(D.data)return D.r=E[D.data.index];for(var L=D.r=0;L<4;++L)D[L]&&D[L].r>D.r&&(D.r=D[L].r)}function O(){if(T){var D,L=T.length,B;for(E=new Array(L),D=0;D<L;++D)B=T[D],E[B.index]=+A(B,D,T)}}return R.initialize=function(D,L){T=D,C=L,O()},R.iterations=function(D){return arguments.length?(I=+D,R):I},R.strength=function(D){return arguments.length?(P=+D,R):P},R.radius=function(D){return arguments.length?(A=typeof D=="function"?D:constant$1(+D),O(),R):A},R}const a$1=1664525,c$2=1013904223,m$1=4294967296;function lcg(){let A=1;return()=>(A=(a$1*A+c$2)%m$1)/m$1}function x$2(A){return A.x}function y$2(A){return A.y}var initialRadius=10,initialAngle=Math.PI*(3-Math.sqrt(5));function simulation$1(A){var T,E=1,C=.001,P=1-Math.pow(C,1/300),I=0,R=.6,F=new Map,O=timer(B),D=dispatch("tick","end"),L=lcg();A==null&&(A=[]);function B(){V(),D.call("tick",T),E<C&&(O.stop(),D.call("end",T))}function V(W){var Z,X=A.length,K;W===void 0&&(W=1);for(var Y=0;Y<W;++Y)for(E+=(I-E)*P,F.forEach(function(Q){Q(E)}),Z=0;Z<X;++Z)K=A[Z],K.fx==null?K.x+=K.vx*=R:(K.x=K.fx,K.vx=0),K.fy==null?K.y+=K.vy*=R:(K.y=K.fy,K.vy=0);return T}function U(){for(var W=0,Z=A.length,X;W<Z;++W){if(X=A[W],X.index=W,X.fx!=null&&(X.x=X.fx),X.fy!=null&&(X.y=X.fy),isNaN(X.x)||isNaN(X.y)){var K=initialRadius*Math.sqrt(.5+W),Y=W*initialAngle;X.x=K*Math.cos(Y),X.y=K*Math.sin(Y)}(isNaN(X.vx)||isNaN(X.vy))&&(X.vx=X.vy=0)}}function z(W){return W.initialize&&W.initialize(A,L),W}return U(),T={tick:V,restart:function(){return O.restart(B),T},stop:function(){return O.stop(),T},nodes:function(W){return arguments.length?(A=W,U(),F.forEach(z),T):A},alpha:function(W){return arguments.length?(E=+W,T):E},alphaMin:function(W){return arguments.length?(C=+W,T):C},alphaDecay:function(W){return arguments.length?(P=+W,T):+P},alphaTarget:function(W){return arguments.length?(I=+W,T):I},velocityDecay:function(W){return arguments.length?(R=1-W,T):1-R},randomSource:function(W){return arguments.length?(L=W,F.forEach(z),T):L},force:function(W,Z){return arguments.length>1?(Z==null?F.delete(W):F.set(W,z(Z)),T):F.get(W)},find:function(W,Z,X){var K=0,Y=A.length,Q,J,te,ie,ne;for(X==null?X=1/0:X*=X,K=0;K<Y;++K)ie=A[K],Q=W-ie.x,J=Z-ie.y,te=Q*Q+J*J,te<X&&(ne=ie,X=te);return ne},on:function(W,Z){return arguments.length>1?(D.on(W,Z),T):D.on(W)}}}function manyBody(){var A,T,E,C,P=constant$1(-30),I,R=1,F=1/0,O=.81;function D(U){var z,W=A.length,Z=quadtree(A,x$2,y$2).visitAfter(B);for(C=U,z=0;z<W;++z)T=A[z],Z.visit(V)}function L(){if(A){var U,z=A.length,W;for(I=new Array(z),U=0;U<z;++U)W=A[U],I[W.index]=+P(W,U,A)}}function B(U){var z=0,W,Z,X=0,K,Y,Q;if(U.length){for(K=Y=Q=0;Q<4;++Q)(W=U[Q])&&(Z=Math.abs(W.value))&&(z+=W.value,X+=Z,K+=Z*W.x,Y+=Z*W.y);U.x=K/X,U.y=Y/X}else{W=U,W.x=W.data.x,W.y=W.data.y;do z+=I[W.data.index];while(W=W.next)}U.value=z}function V(U,z,W,Z){if(!U.value)return!0;var X=U.x-T.x,K=U.y-T.y,Y=Z-z,Q=X*X+K*K;if(Y*Y/O<Q)return Q<F&&(X===0&&(X=jiggle(E),Q+=X*X),K===0&&(K=jiggle(E),Q+=K*K),Q<R&&(Q=Math.sqrt(R*Q)),T.vx+=X*U.value*C/Q,T.vy+=K*U.value*C/Q),!0;if(U.length||Q>=F)return;(U.data!==T||U.next)&&(X===0&&(X=jiggle(E),Q+=X*X),K===0&&(K=jiggle(E),Q+=K*K),Q<R&&(Q=Math.sqrt(R*Q)));do U.data!==T&&(Y=I[U.data.index]*C/Q,T.vx+=X*Y,T.vy+=K*Y);while(U=U.next)}return D.initialize=function(U,z){A=U,E=z,L()},D.strength=function(U){return arguments.length?(P=typeof U=="function"?U:constant$1(+U),L(),D):P},D.distanceMin=function(U){return arguments.length?(R=U*U,D):Math.sqrt(R)},D.distanceMax=function(U){return arguments.length?(F=U*U,D):Math.sqrt(F)},D.theta=function(U){return arguments.length?(O=U*U,D):Math.sqrt(O)},D}function x$1(A){var T=constant$1(.1),E,C,P;typeof A!="function"&&(A=constant$1(A==null?0:+A));function I(F){for(var O=0,D=E.length,L;O<D;++O)L=E[O],L.vx+=(P[O]-L.x)*C[O]*F}function R(){if(E){var F,O=E.length;for(C=new Array(O),P=new Array(O),F=0;F<O;++F)C[F]=isNaN(P[F]=+A(E[F],F,E))?0:+T(E[F],F,E)}}return I.initialize=function(F){E=F,R()},I.strength=function(F){return arguments.length?(T=typeof F=="function"?F:constant$1(+F),R(),I):T},I.x=function(F){return arguments.length?(A=typeof F=="function"?F:constant$1(+F),R(),I):A},I}function y$1(A){var T=constant$1(.1),E,C,P;typeof A!="function"&&(A=constant$1(A==null?0:+A));function I(F){for(var O=0,D=E.length,L;O<D;++O)L=E[O],L.vy+=(P[O]-L.y)*C[O]*F}function R(){if(E){var F,O=E.length;for(C=new Array(O),P=new Array(O),F=0;F<O;++F)C[F]=isNaN(P[F]=+A(E[F],F,E))?0:+T(E[F],F,E)}}return I.initialize=function(F){E=F,R()},I.strength=function(F){return arguments.length?(T=typeof F=="function"?F:constant$1(+F),R(),I):T},I.y=function(F){return arguments.length?(A=typeof F=="function"?F:constant$1(+F),R(),I):A},I}function formatDecimal(A){return Math.abs(A=Math.round(A))>=1e21?A.toLocaleString("en").replace(/,/g,""):A.toString(10)}function formatDecimalParts(A,T){if((E=(A=T?A.toExponential(T-1):A.toExponential()).indexOf("e"))<0)return null;var E,C=A.slice(0,E);return[C.length>1?C[0]+C.slice(2):C,+A.slice(E+1)]}function exponent(A){return A=formatDecimalParts(Math.abs(A)),A?A[1]:NaN}function formatGroup(A,T){return function(E,C){for(var P=E.length,I=[],R=0,F=A[0],O=0;P>0&&F>0&&(O+F+1>C&&(F=Math.max(1,C-O)),I.push(E.substring(P-=F,P+F)),!((O+=F+1)>C));)F=A[R=(R+1)%A.length];return I.reverse().join(T)}}function formatNumerals(A){return function(T){return T.replace(/[0-9]/g,function(E){return A[+E]})}}var re=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function formatSpecifier(A){if(!(T=re.exec(A)))throw new Error("invalid format: "+A);var T;return new FormatSpecifier({fill:T[1],align:T[2],sign:T[3],symbol:T[4],zero:T[5],width:T[6],comma:T[7],precision:T[8]&&T[8].slice(1),trim:T[9],type:T[10]})}formatSpecifier.prototype=FormatSpecifier.prototype;function FormatSpecifier(A){this.fill=A.fill===void 0?" ":A.fill+"",this.align=A.align===void 0?">":A.align+"",this.sign=A.sign===void 0?"-":A.sign+"",this.symbol=A.symbol===void 0?"":A.symbol+"",this.zero=!!A.zero,this.width=A.width===void 0?void 0:+A.width,this.comma=!!A.comma,this.precision=A.precision===void 0?void 0:+A.precision,this.trim=!!A.trim,this.type=A.type===void 0?"":A.type+""}FormatSpecifier.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function formatTrim(A){e:for(var T=A.length,E=1,C=-1,P;E<T;++E)switch(A[E]){case".":C=P=E;break;case"0":C===0&&(C=E),P=E;break;default:if(!+A[E])break e;C>0&&(C=0);break}return C>0?A.slice(0,C)+A.slice(P+1):A}var prefixExponent;function formatPrefixAuto(A,T){var E=formatDecimalParts(A,T);if(!E)return A+"";var C=E[0],P=E[1],I=P-(prefixExponent=Math.max(-8,Math.min(8,Math.floor(P/3)))*3)+1,R=C.length;return I===R?C:I>R?C+new Array(I-R+1).join("0"):I>0?C.slice(0,I)+"."+C.slice(I):"0."+new Array(1-I).join("0")+formatDecimalParts(A,Math.max(0,T+I-1))[0]}function formatRounded(A,T){var E=formatDecimalParts(A,T);if(!E)return A+"";var C=E[0],P=E[1];return P<0?"0."+new Array(-P).join("0")+C:C.length>P+1?C.slice(0,P+1)+"."+C.slice(P+1):C+new Array(P-C.length+2).join("0")}const formatTypes={"%":(A,T)=>(A*100).toFixed(T),b:A=>Math.round(A).toString(2),c:A=>A+"",d:formatDecimal,e:(A,T)=>A.toExponential(T),f:(A,T)=>A.toFixed(T),g:(A,T)=>A.toPrecision(T),o:A=>Math.round(A).toString(8),p:(A,T)=>formatRounded(A*100,T),r:formatRounded,s:formatPrefixAuto,X:A=>Math.round(A).toString(16).toUpperCase(),x:A=>Math.round(A).toString(16)};function identity$2(A){return A}var map$2=Array.prototype.map,prefixes=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"];function formatLocale(A){var T=A.grouping===void 0||A.thousands===void 0?identity$2:formatGroup(map$2.call(A.grouping,Number),A.thousands+""),E=A.currency===void 0?"":A.currency[0]+"",C=A.currency===void 0?"":A.currency[1]+"",P=A.decimal===void 0?".":A.decimal+"",I=A.numerals===void 0?identity$2:formatNumerals(map$2.call(A.numerals,String)),R=A.percent===void 0?"%":A.percent+"",F=A.minus===void 0?"−":A.minus+"",O=A.nan===void 0?"NaN":A.nan+"";function D(B){B=formatSpecifier(B);var V=B.fill,U=B.align,z=B.sign,W=B.symbol,Z=B.zero,X=B.width,K=B.comma,Y=B.precision,Q=B.trim,J=B.type;J==="n"?(K=!0,J="g"):formatTypes[J]||(Y===void 0&&(Y=12),Q=!0,J="g"),(Z||V==="0"&&U==="=")&&(Z=!0,V="0",U="=");var te=W==="$"?E:W==="#"&&/[boxX]/.test(J)?"0"+J.toLowerCase():"",ie=W==="$"?C:/[%p]/.test(J)?R:"",ne=formatTypes[J],he=/[defgprs%]/.test(J);Y=Y===void 0?6:/[gprs]/.test(J)?Math.max(1,Math.min(21,Y)):Math.max(0,Math.min(20,Y));function ve(ye){var de=te,fe=ie,ue,ge,ae;if(J==="c")fe=ne(ye)+fe,ye="";else{ye=+ye;var ce=ye<0||1/ye<0;if(ye=isNaN(ye)?O:ne(Math.abs(ye),Y),Q&&(ye=formatTrim(ye)),ce&&+ye==0&&z!=="+"&&(ce=!1),de=(ce?z==="("?z:F:z==="-"||z==="("?"":z)+de,fe=(J==="s"?prefixes[8+prefixExponent/3]:"")+fe+(ce&&z==="("?")":""),he){for(ue=-1,ge=ye.length;++ue<ge;)if(ae=ye.charCodeAt(ue),48>ae||ae>57){fe=(ae===46?P+ye.slice(ue+1):ye.slice(ue))+fe,ye=ye.slice(0,ue);break}}}K&&!Z&&(ye=T(ye,1/0));var se=de.length+ye.length+fe.length,le=se<X?new Array(X-se+1).join(V):"";switch(K&&Z&&(ye=T(le+ye,le.length?X-fe.length:1/0),le=""),U){case"<":ye=de+ye+fe+le;break;case"=":ye=de+le+ye+fe;break;case"^":ye=le.slice(0,se=le.length>>1)+de+ye+fe+le.slice(se);break;default:ye=le+de+ye+fe;break}return I(ye)}return ve.toString=function(){return B+""},ve}function L(B,V){var U=D((B=formatSpecifier(B),B.type="f",B)),z=Math.max(-8,Math.min(8,Math.floor(exponent(V)/3)))*3,W=Math.pow(10,-z),Z=prefixes[8+z/3];return function(X){return U(W*X)+Z}}return{format:D,formatPrefix:L}}var locale,format,formatPrefix;defaultLocale({thousands:",",grouping:[3],currency:["$",""]});function defaultLocale(A){return locale=formatLocale(A),format=locale.format,formatPrefix=locale.formatPrefix,locale}function precisionFixed(A){return Math.max(0,-exponent(Math.abs(A)))}function precisionPrefix(A,T){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(exponent(T)/3)))*3-exponent(Math.abs(A)))}function precisionRound(A,T){return A=Math.abs(A),T=Math.abs(T)-A,Math.max(0,exponent(T)-exponent(A))+1}const defaultSource=Math.random,int=function A(T){function E(C,P){return arguments.length<2&&(P=C,C=0),C=Math.floor(C),P=Math.floor(P)-C,function(){return Math.floor(T()*P+C)}}return E.source=A,E}(defaultSource);function initRange(A,T){switch(arguments.length){case 0:break;case 1:this.range(A);break;default:this.range(T).domain(A);break}return this}const implicit=Symbol("implicit");function ordinal(){var A=new InternMap,T=[],E=[],C=implicit;function P(I){let R=A.get(I);if(R===void 0){if(C!==implicit)return C;A.set(I,R=T.push(I)-1)}return E[R%E.length]}return P.domain=function(I){if(!arguments.length)return T.slice();T=[],A=new InternMap;for(const R of I)A.has(R)||A.set(R,T.push(R)-1);return P},P.range=function(I){return arguments.length?(E=Array.from(I),P):E.slice()},P.unknown=function(I){return arguments.length?(C=I,P):C},P.copy=function(){return ordinal(T,E).unknown(C)},initRange.apply(P,arguments),P}function band(){var A=ordinal().unknown(void 0),T=A.domain,E=A.range,C=0,P=1,I,R,F=!1,O=0,D=0,L=.5;delete A.unknown;function B(){var V=T().length,U=P<C,z=U?P:C,W=U?C:P;I=(W-z)/Math.max(1,V-O+D*2),F&&(I=Math.floor(I)),z+=(W-z-I*(V-O))*L,R=I*(1-O),F&&(z=Math.round(z),R=Math.round(R));var Z=range$2(V).map(function(X){return z+I*X});return E(U?Z.reverse():Z)}return A.domain=function(V){return arguments.length?(T(V),B()):T()},A.range=function(V){return arguments.length?([C,P]=V,C=+C,P=+P,B()):[C,P]},A.rangeRound=function(V){return[C,P]=V,C=+C,P=+P,F=!0,B()},A.bandwidth=function(){return R},A.step=function(){return I},A.round=function(V){return arguments.length?(F=!!V,B()):F},A.padding=function(V){return arguments.length?(O=Math.min(1,D=+V),B()):O},A.paddingInner=function(V){return arguments.length?(O=Math.min(1,V),B()):O},A.paddingOuter=function(V){return arguments.length?(D=+V,B()):D},A.align=function(V){return arguments.length?(L=Math.max(0,Math.min(1,V)),B()):L},A.copy=function(){return band(T(),[C,P]).round(F).paddingInner(O).paddingOuter(D).align(L)},initRange.apply(B(),arguments)}function pointish(A){var T=A.copy;return A.padding=A.paddingOuter,delete A.paddingInner,delete A.paddingOuter,A.copy=function(){return pointish(T())},A}function point(){return pointish(band.apply(null,arguments).paddingInner(1))}function constants(A){return function(){return A}}function number(A){return+A}var unit=[0,1];function identity$1(A){return A}function normalize$1(A,T){return(T-=A=+A)?function(E){return(E-A)/T}:constants(isNaN(T)?NaN:.5)}function clamper(A,T){var E;return A>T&&(E=A,A=T,T=E),function(C){return Math.max(A,Math.min(T,C))}}function bimap(A,T,E){var C=A[0],P=A[1],I=T[0],R=T[1];return P<C?(C=normalize$1(P,C),I=E(R,I)):(C=normalize$1(C,P),I=E(I,R)),function(F){return I(C(F))}}function polymap(A,T,E){var C=Math.min(A.length,T.length)-1,P=new Array(C),I=new Array(C),R=-1;for(A[C]<A[0]&&(A=A.slice().reverse(),T=T.slice().reverse());++R<C;)P[R]=normalize$1(A[R],A[R+1]),I[R]=E(T[R],T[R+1]);return function(F){var O=bisectRight(A,F,1,C)-1;return I[O](P[O](F))}}function copy(A,T){return T.domain(A.domain()).range(A.range()).interpolate(A.interpolate()).clamp(A.clamp()).unknown(A.unknown())}function transformer(){var A=unit,T=unit,E=interpolate$2,C,P,I,R=identity$1,F,O,D;function L(){var V=Math.min(A.length,T.length);return R!==identity$1&&(R=clamper(A[0],A[V-1])),F=V>2?polymap:bimap,O=D=null,B}function B(V){return V==null||isNaN(V=+V)?I:(O||(O=F(A.map(C),T,E)))(C(R(V)))}return B.invert=function(V){return R(P((D||(D=F(T,A.map(C),interpolateNumber)))(V)))},B.domain=function(V){return arguments.length?(A=Array.from(V,number),L()):A.slice()},B.range=function(V){return arguments.length?(T=Array.from(V),L()):T.slice()},B.rangeRound=function(V){return T=Array.from(V),E=interpolateRound,L()},B.clamp=function(V){return arguments.length?(R=V?!0:identity$1,L()):R!==identity$1},B.interpolate=function(V){return arguments.length?(E=V,L()):E},B.unknown=function(V){return arguments.length?(I=V,B):I},function(V,U){return C=V,P=U,L()}}function continuous(){return transformer()(identity$1,identity$1)}function tickFormat(A,T,E,C){var P=tickStep(A,T,E),I;switch(C=formatSpecifier(C??",f"),C.type){case"s":{var R=Math.max(Math.abs(A),Math.abs(T));return C.precision==null&&!isNaN(I=precisionPrefix(P,R))&&(C.precision=I),formatPrefix(C,R)}case"":case"e":case"g":case"p":case"r":{C.precision==null&&!isNaN(I=precisionRound(P,Math.max(Math.abs(A),Math.abs(T))))&&(C.precision=I-(C.type==="e"));break}case"f":case"%":{C.precision==null&&!isNaN(I=precisionFixed(P))&&(C.precision=I-(C.type==="%")*2);break}}return format(C)}function linearish(A){var T=A.domain;return A.ticks=function(E){var C=T();return ticks(C[0],C[C.length-1],E??10)},A.tickFormat=function(E,C){var P=T();return tickFormat(P[0],P[P.length-1],E??10,C)},A.nice=function(E){E==null&&(E=10);var C=T(),P=0,I=C.length-1,R=C[P],F=C[I],O,D,L=10;for(F<R&&(D=R,R=F,F=D,D=P,P=I,I=D);L-- >0;){if(D=tickIncrement(R,F,E),D===O)return C[P]=R,C[I]=F,T(C);if(D>0)R=Math.floor(R/D)*D,F=Math.ceil(F/D)*D;else if(D<0)R=Math.ceil(R*D)/D,F=Math.floor(F*D)/D;else break;O=D}return A},A}function linear(){var A=continuous();return A.copy=function(){return copy(A,linear())},initRange.apply(A,arguments),linearish(A)}function quantize(){var A=0,T=1,E=1,C=[.5],P=[0,1],I;function R(O){return O!=null&&O<=O?P[bisectRight(C,O,0,E)]:I}function F(){var O=-1;for(C=new Array(E);++O<E;)C[O]=((O+1)*T-(O-E)*A)/(E+1);return R}return R.domain=function(O){return arguments.length?([A,T]=O,A=+A,T=+T,F()):[A,T]},R.range=function(O){return arguments.length?(E=(P=Array.from(O)).length-1,F()):P.slice()},R.invertExtent=function(O){var D=P.indexOf(O);return D<0?[NaN,NaN]:D<1?[A,C[0]]:D>=E?[C[E-1],T]:[C[D-1],C[D]]},R.unknown=function(O){return arguments.length&&(I=O),R},R.thresholds=function(){return C.slice()},R.copy=function(){return quantize().domain([A,T]).range(P).unknown(I)},initRange.apply(linearish(R),arguments)}const constant=A=>()=>A;function ZoomEvent(A,{sourceEvent:T,target:E,transform:C,dispatch:P}){Object.defineProperties(this,{type:{value:A,enumerable:!0,configurable:!0},sourceEvent:{value:T,enumerable:!0,configurable:!0},target:{value:E,enumerable:!0,configurable:!0},transform:{value:C,enumerable:!0,configurable:!0},_:{value:P}})}function Transform$1(A,T,E){this.k=A,this.x=T,this.y=E}Transform$1.prototype={constructor:Transform$1,scale:function(A){return A===1?this:new Transform$1(this.k*A,this.x,this.y)},translate:function(A,T){return A===0&T===0?this:new Transform$1(this.k,this.x+this.k*A,this.y+this.k*T)},apply:function(A){return[A[0]*this.k+this.x,A[1]*this.k+this.y]},applyX:function(A){return A*this.k+this.x},applyY:function(A){return A*this.k+this.y},invert:function(A){return[(A[0]-this.x)/this.k,(A[1]-this.y)/this.k]},invertX:function(A){return(A-this.x)/this.k},invertY:function(A){return(A-this.y)/this.k},rescaleX:function(A){return A.copy().domain(A.range().map(this.invertX,this).map(A.invert,A))},rescaleY:function(A){return A.copy().domain(A.range().map(this.invertY,this).map(A.invert,A))},toString:function(){return"translate("+this.x+","+this.y+") scale("+this.k+")"}};var identity=new Transform$1(1,0,0);Transform$1.prototype;function nopropagation(A){A.stopImmediatePropagation()}function noevent(A){A.preventDefault(),A.stopImmediatePropagation()}function defaultFilter(A){return(!A.ctrlKey||A.type==="wheel")&&!A.button}function defaultExtent(){var A=this;return A instanceof SVGElement?(A=A.ownerSVGElement||A,A.hasAttribute("viewBox")?(A=A.viewBox.baseVal,[[A.x,A.y],[A.x+A.width,A.y+A.height]]):[[0,0],[A.width.baseVal.value,A.height.baseVal.value]]):[[0,0],[A.clientWidth,A.clientHeight]]}function defaultTransform(){return this.__zoom||identity}function defaultWheelDelta(A){return-A.deltaY*(A.deltaMode===1?.05:A.deltaMode?1:.002)*(A.ctrlKey?10:1)}function defaultTouchable(){return navigator.maxTouchPoints||"ontouchstart"in this}function defaultConstrain(A,T,E){var C=A.invertX(T[0][0])-E[0][0],P=A.invertX(T[1][0])-E[1][0],I=A.invertY(T[0][1])-E[0][1],R=A.invertY(T[1][1])-E[1][1];return A.translate(P>C?(C+P)/2:Math.min(0,C)||Math.max(0,P),R>I?(I+R)/2:Math.min(0,I)||Math.max(0,R))}function zoom$1(){var A=defaultFilter,T=defaultExtent,E=defaultConstrain,C=defaultWheelDelta,P=defaultTouchable,I=[0,1/0],R=[[-1/0,-1/0],[1/0,1/0]],F=250,O=interpolateZoom,D=dispatch("start","zoom","end"),L,B,V,U=500,z=150,W=0,Z=10;function X(ue){ue.property("__zoom",defaultTransform).on("wheel.zoom",ne,{passive:!1}).on("mousedown.zoom",he).on("dblclick.zoom",ve).filter(P).on("touchstart.zoom",ye).on("touchmove.zoom",de).on("touchend.zoom touchcancel.zoom",fe).style("-webkit-tap-highlight-color","rgba(0,0,0,0)")}X.transform=function(ue,ge,ae,ce){var se=ue.selection?ue.selection():ue;se.property("__zoom",defaultTransform),ue!==se?J(ue,ge,ae,ce):se.interrupt().each(function(){te(this,arguments).event(ce).start().zoom(null,typeof ge=="function"?ge.apply(this,arguments):ge).end()})},X.scaleBy=function(ue,ge,ae,ce){X.scaleTo(ue,function(){var se=this.__zoom.k,le=typeof ge=="function"?ge.apply(this,arguments):ge;return se*le},ae,ce)},X.scaleTo=function(ue,ge,ae,ce){X.transform(ue,function(){var se=T.apply(this,arguments),le=this.__zoom,_e=ae==null?Q(se):typeof ae=="function"?ae.apply(this,arguments):ae,me=le.invert(_e),Ee=typeof ge=="function"?ge.apply(this,arguments):ge;return E(Y(K(le,Ee),_e,me),se,R)},ae,ce)},X.translateBy=function(ue,ge,ae,ce){X.transform(ue,function(){return E(this.__zoom.translate(typeof ge=="function"?ge.apply(this,arguments):ge,typeof ae=="function"?ae.apply(this,arguments):ae),T.apply(this,arguments),R)},null,ce)},X.translateTo=function(ue,ge,ae,ce,se){X.transform(ue,function(){var le=T.apply(this,arguments),_e=this.__zoom,me=ce==null?Q(le):typeof ce=="function"?ce.apply(this,arguments):ce;return E(identity.translate(me[0],me[1]).scale(_e.k).translate(typeof ge=="function"?-ge.apply(this,arguments):-ge,typeof ae=="function"?-ae.apply(this,arguments):-ae),le,R)},ce,se)};function K(ue,ge){return ge=Math.max(I[0],Math.min(I[1],ge)),ge===ue.k?ue:new Transform$1(ge,ue.x,ue.y)}function Y(ue,ge,ae){var ce=ge[0]-ae[0]*ue.k,se=ge[1]-ae[1]*ue.k;return ce===ue.x&&se===ue.y?ue:new Transform$1(ue.k,ce,se)}function Q(ue){return[(+ue[0][0]+ +ue[1][0])/2,(+ue[0][1]+ +ue[1][1])/2]}function J(ue,ge,ae,ce){ue.on("start.zoom",function(){te(this,arguments).event(ce).start()}).on("interrupt.zoom end.zoom",function(){te(this,arguments).event(ce).end()}).tween("zoom",function(){var se=this,le=arguments,_e=te(se,le).event(ce),me=T.apply(se,le),Ee=ae==null?Q(me):typeof ae=="function"?ae.apply(se,le):ae,Pe=Math.max(me[1][0]-me[0][0],me[1][1]-me[0][1]),Ce=se.__zoom,ke=typeof ge=="function"?ge.apply(se,le):ge,Be=O(Ce.invert(Ee).concat(Pe/Ce.k),ke.invert(Ee).concat(Pe/ke.k));return function(Me){if(Me===1)Me=ke;else{var Oe=Be(Me),Je=Pe/Oe[2];Me=new Transform$1(Je,Ee[0]-Oe[0]*Je,Ee[1]-Oe[1]*Je)}_e.zoom(null,Me)}})}function te(ue,ge,ae){return!ae&&ue.__zooming||new ie(ue,ge)}function ie(ue,ge){this.that=ue,this.args=ge,this.active=0,this.sourceEvent=null,this.extent=T.apply(ue,ge),this.taps=0}ie.prototype={event:function(ue){return ue&&(this.sourceEvent=ue),this},start:function(){return++this.active===1&&(this.that.__zooming=this,this.emit("start")),this},zoom:function(ue,ge){return this.mouse&&ue!=="mouse"&&(this.mouse[1]=ge.invert(this.mouse[0])),this.touch0&&ue!=="touch"&&(this.touch0[1]=ge.invert(this.touch0[0])),this.touch1&&ue!=="touch"&&(this.touch1[1]=ge.invert(this.touch1[0])),this.that.__zoom=ge,this.emit("zoom"),this},end:function(){return--this.active===0&&(delete this.that.__zooming,this.emit("end")),this},emit:function(ue){var ge=select(this.that).datum();D.call(ue,this.that,new ZoomEvent(ue,{sourceEvent:this.sourceEvent,target:X,type:ue,transform:this.that.__zoom,dispatch:D}),ge)}};function ne(ue,...ge){if(!A.apply(this,arguments))return;var ae=te(this,ge).event(ue),ce=this.__zoom,se=Math.max(I[0],Math.min(I[1],ce.k*Math.pow(2,C.apply(this,arguments)))),le=pointer(ue);if(ae.wheel)(ae.mouse[0][0]!==le[0]||ae.mouse[0][1]!==le[1])&&(ae.mouse[1]=ce.invert(ae.mouse[0]=le)),clearTimeout(ae.wheel);else{if(ce.k===se)return;ae.mouse=[le,ce.invert(le)],interrupt(this),ae.start()}noevent(ue),ae.wheel=setTimeout(_e,z),ae.zoom("mouse",E(Y(K(ce,se),ae.mouse[0],ae.mouse[1]),ae.extent,R));function _e(){ae.wheel=null,ae.end()}}function he(ue,...ge){if(V||!A.apply(this,arguments))return;var ae=ue.currentTarget,ce=te(this,ge,!0).event(ue),se=select(ue.view).on("mousemove.zoom",Ee,!0).on("mouseup.zoom",Pe,!0),le=pointer(ue,ae),_e=ue.clientX,me=ue.clientY;dragDisable(ue.view),nopropagation(ue),ce.mouse=[le,this.__zoom.invert(le)],interrupt(this),ce.start();function Ee(Ce){if(noevent(Ce),!ce.moved){var ke=Ce.clientX-_e,Be=Ce.clientY-me;ce.moved=ke*ke+Be*Be>W}ce.event(Ce).zoom("mouse",E(Y(ce.that.__zoom,ce.mouse[0]=pointer(Ce,ae),ce.mouse[1]),ce.extent,R))}function Pe(Ce){se.on("mousemove.zoom mouseup.zoom",null),yesdrag(Ce.view,ce.moved),noevent(Ce),ce.event(Ce).end()}}function ve(ue,...ge){if(A.apply(this,arguments)){var ae=this.__zoom,ce=pointer(ue.changedTouches?ue.changedTouches[0]:ue,this),se=ae.invert(ce),le=ae.k*(ue.shiftKey?.5:2),_e=E(Y(K(ae,le),ce,se),T.apply(this,ge),R);noevent(ue),F>0?select(this).transition().duration(F).call(J,_e,ce,ue):select(this).call(X.transform,_e,ce,ue)}}function ye(ue,...ge){if(A.apply(this,arguments)){var ae=ue.touches,ce=ae.length,se=te(this,ge,ue.changedTouches.length===ce).event(ue),le,_e,me,Ee;for(nopropagation(ue),_e=0;_e<ce;++_e)me=ae[_e],Ee=pointer(me,this),Ee=[Ee,this.__zoom.invert(Ee),me.identifier],se.touch0?!se.touch1&&se.touch0[2]!==Ee[2]&&(se.touch1=Ee,se.taps=0):(se.touch0=Ee,le=!0,se.taps=1+!!L);L&&(L=clearTimeout(L)),le&&(se.taps<2&&(B=Ee[0],L=setTimeout(function(){L=null},U)),interrupt(this),se.start())}}function de(ue,...ge){if(this.__zooming){var ae=te(this,ge).event(ue),ce=ue.changedTouches,se=ce.length,le,_e,me,Ee;for(noevent(ue),le=0;le<se;++le)_e=ce[le],me=pointer(_e,this),ae.touch0&&ae.touch0[2]===_e.identifier?ae.touch0[0]=me:ae.touch1&&ae.touch1[2]===_e.identifier&&(ae.touch1[0]=me);if(_e=ae.that.__zoom,ae.touch1){var Pe=ae.touch0[0],Ce=ae.touch0[1],ke=ae.touch1[0],Be=ae.touch1[1],Me=(Me=ke[0]-Pe[0])*Me+(Me=ke[1]-Pe[1])*Me,Oe=(Oe=Be[0]-Ce[0])*Oe+(Oe=Be[1]-Ce[1])*Oe;_e=K(_e,Math.sqrt(Me/Oe)),me=[(Pe[0]+ke[0])/2,(Pe[1]+ke[1])/2],Ee=[(Ce[0]+Be[0])/2,(Ce[1]+Be[1])/2]}else if(ae.touch0)me=ae.touch0[0],Ee=ae.touch0[1];else return;ae.zoom("touch",E(Y(_e,me,Ee),ae.extent,R))}}function fe(ue,...ge){if(this.__zooming){var ae=te(this,ge).event(ue),ce=ue.changedTouches,se=ce.length,le,_e;for(nopropagation(ue),V&&clearTimeout(V),V=setTimeout(function(){V=null},U),le=0;le<se;++le)_e=ce[le],ae.touch0&&ae.touch0[2]===_e.identifier?delete ae.touch0:ae.touch1&&ae.touch1[2]===_e.identifier&&delete ae.touch1;if(ae.touch1&&!ae.touch0&&(ae.touch0=ae.touch1,delete ae.touch1),ae.touch0)ae.touch0[1]=this.__zoom.invert(ae.touch0[0]);else if(ae.end(),ae.taps===2&&(_e=pointer(_e,this),Math.hypot(B[0]-_e[0],B[1]-_e[1])<Z)){var me=select(this).on("dblclick.zoom");me&&me.apply(this,arguments)}}}return X.wheelDelta=function(ue){return arguments.length?(C=typeof ue=="function"?ue:constant(+ue),X):C},X.filter=function(ue){return arguments.length?(A=typeof ue=="function"?ue:constant(!!ue),X):A},X.touchable=function(ue){return arguments.length?(P=typeof ue=="function"?ue:constant(!!ue),X):P},X.extent=function(ue){return arguments.length?(T=typeof ue=="function"?ue:constant([[+ue[0][0],+ue[0][1]],[+ue[1][0],+ue[1][1]]]),X):T},X.scaleExtent=function(ue){return arguments.length?(I[0]=+ue[0],I[1]=+ue[1],X):[I[0],I[1]]},X.translateExtent=function(ue){return arguments.length?(R[0][0]=+ue[0][0],R[1][0]=+ue[1][0],R[0][1]=+ue[0][1],R[1][1]=+ue[1][1],X):[[R[0][0],R[0][1]],[R[1][0],R[1][1]]]},X.constrain=function(ue){return arguments.length?(E=ue,X):E},X.duration=function(ue){return arguments.length?(F=+ue,X):F},X.interpolate=function(ue){return arguments.length?(O=ue,X):O},X.on=function(){var ue=D.on.apply(D,arguments);return ue===D?X:ue},X.clickDistance=function(ue){return arguments.length?(W=(ue=+ue)*ue,X):Math.sqrt(W)},X.tapDistance=function(ue){return arguments.length?(Z=+ue,X):Z},X}var lodash={exports:{}};/**
 * @license
 * Lodash <https://lodash.com/>
 * Copyright OpenJS Foundation and other contributors <https://openjsf.org/>
 * Released under MIT license <https://lodash.com/license>
 * Based on Underscore.js 1.8.3 <http://underscorejs.org/LICENSE>
 * Copyright Jeremy Ashkenas, DocumentCloud and Investigative Reporters & Editors
 */lodash.exports;(function(A,T){(function(){var E,C="4.17.21",P=200,I="Unsupported core-js use. Try https://npms.io/search?q=ponyfill.",R="Expected a function",F="Invalid `variable` option passed into `_.template`",O="__lodash_hash_undefined__",D=500,L="__lodash_placeholder__",B=1,V=2,U=4,z=1,W=2,Z=1,X=2,K=4,Y=8,Q=16,J=32,te=64,ie=128,ne=256,he=512,ve=30,ye="...",de=800,fe=16,ue=1,ge=2,ae=3,ce=1/0,se=9007199254740991,le=17976931348623157e292,_e=NaN,me=4294967295,Ee=me-1,Pe=me>>>1,Ce=[["ary",ie],["bind",Z],["bindKey",X],["curry",Y],["curryRight",Q],["flip",he],["partial",J],["partialRight",te],["rearg",ne]],ke="[object Arguments]",Be="[object Array]",Me="[object AsyncFunction]",Oe="[object Boolean]",Je="[object Date]",et="[object DOMException]",qe="[object Error]",De="[object Function]",Ue="[object GeneratorFunction]",Re="[object Map]",Ne="[object Number]",Ge="[object Null]",We="[object Object]",je="[object Promise]",Ye="[object Proxy]",Fe="[object RegExp]",He="[object Set]",nt="[object String]",ot="[object Symbol]",pt="[object Undefined]",dt="[object WeakMap]",yt="[object WeakSet]",Rt="[object ArrayBuffer]",wt="[object DataView]",Ot="[object Float32Array]",Ze="[object Float64Array]",St="[object Int8Array]",Wt="[object Int16Array]",qt="[object Int32Array]",Qe="[object Uint8Array]",xt="[object Uint8ClampedArray]",Lt="[object Uint16Array]",It="[object Uint32Array]",Ut=/\b__p \+= '';/g,rr=/\b(__p \+=) '' \+/g,Pt=/(__e\(.*?\)|\b__t\)) \+\n'';/g,Bt=/&(?:amp|lt|gt|quot|#39);/g,hr=/[&<>"']/g,wr=RegExp(Bt.source),Cr=RegExp(hr.source),nr=/<%-([\s\S]+?)%>/g,Or=/<%([\s\S]+?)%>/g,Mt=/<%=([\s\S]+?)%>/g,Pr=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,Dr=/^\w*$/,At=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,mt=/[\\^$.*+?()[\]{}|]/g,Lr=RegExp(mt.source),kr=/^\s+/,hn=/\s/,cn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,un=/\{\n\/\* \[wrapped with (.+)\] \*/,Yt=/,? & /,Wn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,An=/[()=,{}\[\]\/\s]/,fi=/\\(\\)?/g,pi=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,qn=/\w*$/,wn=/^[-+]0x[0-9a-f]+$/i,mi=/^0b[01]+$/i,ir=/^\[object .+?Constructor\]$/,dn=/^0o[0-7]+$/i,fn=/^(?:0|[1-9]\d*)$/,pn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,Br=/($^)/,mn=/['\n\r\u2028\u2029\\]/g,$r="\\ud800-\\udfff",rh="\\u0300-\\u036f",nh="\\ufe20-\\ufe2f",ih="\\u20d0-\\u20ff",Ea=rh+nh+ih,Aa="\\u2700-\\u27bf",wa="a-z\\xdf-\\xf6\\xf8-\\xff",sh="\\xac\\xb1\\xd7\\xf7",ah="\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf",oh="\\u2000-\\u206f",lh=" \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Ca="A-Z\\xc0-\\xd6\\xd8-\\xde",Pa="\\ufe0e\\ufe0f",ka=sh+ah+oh+lh,os="['’]",hh="["+$r+"]",Ia="["+ka+"]",_i="["+Ea+"]",Ma="\\d+",ch="["+Aa+"]",Na="["+wa+"]",Ra="[^"+$r+ka+Ma+Aa+wa+Ca+"]",ls="\\ud83c[\\udffb-\\udfff]",uh="(?:"+_i+"|"+ls+")",Fa="[^"+$r+"]",hs="(?:\\ud83c[\\udde6-\\uddff]){2}",cs="[\\ud800-\\udbff][\\udc00-\\udfff]",Cn="["+Ca+"]",Oa="\\u200d",Da="(?:"+Na+"|"+Ra+")",dh="(?:"+Cn+"|"+Ra+")",La="(?:"+os+"(?:d|ll|m|re|s|t|ve))?",Ba="(?:"+os+"(?:D|LL|M|RE|S|T|VE))?",$a=uh+"?",Va="["+Pa+"]?",fh="(?:"+Oa+"(?:"+[Fa,hs,cs].join("|")+")"+Va+$a+")*",ph="\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])",mh="\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])",Ga=Va+$a+fh,_h="(?:"+[ch,hs,cs].join("|")+")"+Ga,gh="(?:"+[Fa+_i+"?",_i,hs,cs,hh].join("|")+")",vh=RegExp(os,"g"),yh=RegExp(_i,"g"),us=RegExp(ls+"(?="+ls+")|"+gh+Ga,"g"),xh=RegExp([Cn+"?"+Na+"+"+La+"(?="+[Ia,Cn,"$"].join("|")+")",dh+"+"+Ba+"(?="+[Ia,Cn+Da,"$"].join("|")+")",Cn+"?"+Da+"+"+La,Cn+"+"+Ba,mh,ph,Ma,_h].join("|"),"g"),bh=RegExp("["+Oa+$r+Ea+Pa+"]"),Th=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Sh=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Eh=-1,Nt={};Nt[Ot]=Nt[Ze]=Nt[St]=Nt[Wt]=Nt[qt]=Nt[Qe]=Nt[xt]=Nt[Lt]=Nt[It]=!0,Nt[ke]=Nt[Be]=Nt[Rt]=Nt[Oe]=Nt[wt]=Nt[Je]=Nt[qe]=Nt[De]=Nt[Re]=Nt[Ne]=Nt[We]=Nt[Fe]=Nt[He]=Nt[nt]=Nt[dt]=!1;var kt={};kt[ke]=kt[Be]=kt[Rt]=kt[wt]=kt[Oe]=kt[Je]=kt[Ot]=kt[Ze]=kt[St]=kt[Wt]=kt[qt]=kt[Re]=kt[Ne]=kt[We]=kt[Fe]=kt[He]=kt[nt]=kt[ot]=kt[Qe]=kt[xt]=kt[Lt]=kt[It]=!0,kt[qe]=kt[De]=kt[dt]=!1;var Ah={À:"A",Á:"A",Â:"A",Ã:"A",Ä:"A",Å:"A",à:"a",á:"a",â:"a",ã:"a",ä:"a",å:"a",Ç:"C",ç:"c",Ð:"D",ð:"d",È:"E",É:"E",Ê:"E",Ë:"E",è:"e",é:"e",ê:"e",ë:"e",Ì:"I",Í:"I",Î:"I",Ï:"I",ì:"i",í:"i",î:"i",ï:"i",Ñ:"N",ñ:"n",Ò:"O",Ó:"O",Ô:"O",Õ:"O",Ö:"O",Ø:"O",ò:"o",ó:"o",ô:"o",õ:"o",ö:"o",ø:"o",Ù:"U",Ú:"U",Û:"U",Ü:"U",ù:"u",ú:"u",û:"u",ü:"u",Ý:"Y",ý:"y",ÿ:"y",Æ:"Ae",æ:"ae",Þ:"Th",þ:"th",ß:"ss",Ā:"A",Ă:"A",Ą:"A",ā:"a",ă:"a",ą:"a",Ć:"C",Ĉ:"C",Ċ:"C",Č:"C",ć:"c",ĉ:"c",ċ:"c",č:"c",Ď:"D",Đ:"D",ď:"d",đ:"d",Ē:"E",Ĕ:"E",Ė:"E",Ę:"E",Ě:"E",ē:"e",ĕ:"e",ė:"e",ę:"e",ě:"e",Ĝ:"G",Ğ:"G",Ġ:"G",Ģ:"G",ĝ:"g",ğ:"g",ġ:"g",ģ:"g",Ĥ:"H",Ħ:"H",ĥ:"h",ħ:"h",Ĩ:"I",Ī:"I",Ĭ:"I",Į:"I",İ:"I",ĩ:"i",ī:"i",ĭ:"i",į:"i",ı:"i",Ĵ:"J",ĵ:"j",Ķ:"K",ķ:"k",ĸ:"k",Ĺ:"L",Ļ:"L",Ľ:"L",Ŀ:"L",Ł:"L",ĺ:"l",ļ:"l",ľ:"l",ŀ:"l",ł:"l",Ń:"N",Ņ:"N",Ň:"N",Ŋ:"N",ń:"n",ņ:"n",ň:"n",ŋ:"n",Ō:"O",Ŏ:"O",Ő:"O",ō:"o",ŏ:"o",ő:"o",Ŕ:"R",Ŗ:"R",Ř:"R",ŕ:"r",ŗ:"r",ř:"r",Ś:"S",Ŝ:"S",Ş:"S",Š:"S",ś:"s",ŝ:"s",ş:"s",š:"s",Ţ:"T",Ť:"T",Ŧ:"T",ţ:"t",ť:"t",ŧ:"t",Ũ:"U",Ū:"U",Ŭ:"U",Ů:"U",Ű:"U",Ų:"U",ũ:"u",ū:"u",ŭ:"u",ů:"u",ű:"u",ų:"u",Ŵ:"W",ŵ:"w",Ŷ:"Y",ŷ:"y",Ÿ:"Y",Ź:"Z",Ż:"Z",Ž:"Z",ź:"z",ż:"z",ž:"z",Ĳ:"IJ",ĳ:"ij",Œ:"Oe",œ:"oe",ŉ:"'n",ſ:"s"},wh={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"},Ch={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"},Ph={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},kh=parseFloat,Ih=parseInt,Ua=typeof commonjsGlobal=="object"&&commonjsGlobal&&commonjsGlobal.Object===Object&&commonjsGlobal,Mh=typeof self=="object"&&self&&self.Object===Object&&self,jt=Ua||Mh||Function("return this")(),ds=T&&!T.nodeType&&T,_n=ds&&!0&&A&&!A.nodeType&&A,za=_n&&_n.exports===ds,fs=za&&Ua.process,vr=function(){try{var Ae=_n&&_n.require&&_n.require("util").types;return Ae||fs&&fs.binding&&fs.binding("util")}catch{}}(),Ha=vr&&vr.isArrayBuffer,Wa=vr&&vr.isDate,qa=vr&&vr.isMap,Xa=vr&&vr.isRegExp,Ya=vr&&vr.isSet,ja=vr&&vr.isTypedArray;function cr(Ae,Le,Ie){switch(Ie.length){case 0:return Ae.call(Le);case 1:return Ae.call(Le,Ie[0]);case 2:return Ae.call(Le,Ie[0],Ie[1]);case 3:return Ae.call(Le,Ie[0],Ie[1],Ie[2])}return Ae.apply(Le,Ie)}function Nh(Ae,Le,Ie,Ke){for(var lt=-1,bt=Ae==null?0:Ae.length;++lt<bt;){var zt=Ae[lt];Le(Ke,zt,Ie(zt),Ae)}return Ke}function yr(Ae,Le){for(var Ie=-1,Ke=Ae==null?0:Ae.length;++Ie<Ke&&Le(Ae[Ie],Ie,Ae)!==!1;);return Ae}function Rh(Ae,Le){for(var Ie=Ae==null?0:Ae.length;Ie--&&Le(Ae[Ie],Ie,Ae)!==!1;);return Ae}function Za(Ae,Le){for(var Ie=-1,Ke=Ae==null?0:Ae.length;++Ie<Ke;)if(!Le(Ae[Ie],Ie,Ae))return!1;return!0}function Jr(Ae,Le){for(var Ie=-1,Ke=Ae==null?0:Ae.length,lt=0,bt=[];++Ie<Ke;){var zt=Ae[Ie];Le(zt,Ie,Ae)&&(bt[lt++]=zt)}return bt}function gi(Ae,Le){var Ie=Ae==null?0:Ae.length;return!!Ie&&Pn(Ae,Le,0)>-1}function ps(Ae,Le,Ie){for(var Ke=-1,lt=Ae==null?0:Ae.length;++Ke<lt;)if(Ie(Le,Ae[Ke]))return!0;return!1}function Ft(Ae,Le){for(var Ie=-1,Ke=Ae==null?0:Ae.length,lt=Array(Ke);++Ie<Ke;)lt[Ie]=Le(Ae[Ie],Ie,Ae);return lt}function en(Ae,Le){for(var Ie=-1,Ke=Le.length,lt=Ae.length;++Ie<Ke;)Ae[lt+Ie]=Le[Ie];return Ae}function ms(Ae,Le,Ie,Ke){var lt=-1,bt=Ae==null?0:Ae.length;for(Ke&&bt&&(Ie=Ae[++lt]);++lt<bt;)Ie=Le(Ie,Ae[lt],lt,Ae);return Ie}function Fh(Ae,Le,Ie,Ke){var lt=Ae==null?0:Ae.length;for(Ke&&lt&&(Ie=Ae[--lt]);lt--;)Ie=Le(Ie,Ae[lt],lt,Ae);return Ie}function _s(Ae,Le){for(var Ie=-1,Ke=Ae==null?0:Ae.length;++Ie<Ke;)if(Le(Ae[Ie],Ie,Ae))return!0;return!1}var Oh=gs("length");function Dh(Ae){return Ae.split("")}function Lh(Ae){return Ae.match(Wn)||[]}function Ka(Ae,Le,Ie){var Ke;return Ie(Ae,function(lt,bt,zt){if(Le(lt,bt,zt))return Ke=bt,!1}),Ke}function vi(Ae,Le,Ie,Ke){for(var lt=Ae.length,bt=Ie+(Ke?1:-1);Ke?bt--:++bt<lt;)if(Le(Ae[bt],bt,Ae))return bt;return-1}function Pn(Ae,Le,Ie){return Le===Le?jh(Ae,Le,Ie):vi(Ae,Qa,Ie)}function Bh(Ae,Le,Ie,Ke){for(var lt=Ie-1,bt=Ae.length;++lt<bt;)if(Ke(Ae[lt],Le))return lt;return-1}function Qa(Ae){return Ae!==Ae}function Ja(Ae,Le){var Ie=Ae==null?0:Ae.length;return Ie?ys(Ae,Le)/Ie:_e}function gs(Ae){return function(Le){return Le==null?E:Le[Ae]}}function vs(Ae){return function(Le){return Ae==null?E:Ae[Le]}}function eo(Ae,Le,Ie,Ke,lt){return lt(Ae,function(bt,zt,Ct){Ie=Ke?(Ke=!1,bt):Le(Ie,bt,zt,Ct)}),Ie}function $h(Ae,Le){var Ie=Ae.length;for(Ae.sort(Le);Ie--;)Ae[Ie]=Ae[Ie].value;return Ae}function ys(Ae,Le){for(var Ie,Ke=-1,lt=Ae.length;++Ke<lt;){var bt=Le(Ae[Ke]);bt!==E&&(Ie=Ie===E?bt:Ie+bt)}return Ie}function xs(Ae,Le){for(var Ie=-1,Ke=Array(Ae);++Ie<Ae;)Ke[Ie]=Le(Ie);return Ke}function Vh(Ae,Le){return Ft(Le,function(Ie){return[Ie,Ae[Ie]]})}function to(Ae){return Ae&&Ae.slice(0,so(Ae)+1).replace(kr,"")}function ur(Ae){return function(Le){return Ae(Le)}}function bs(Ae,Le){return Ft(Le,function(Ie){return Ae[Ie]})}function Xn(Ae,Le){return Ae.has(Le)}function ro(Ae,Le){for(var Ie=-1,Ke=Ae.length;++Ie<Ke&&Pn(Le,Ae[Ie],0)>-1;);return Ie}function no(Ae,Le){for(var Ie=Ae.length;Ie--&&Pn(Le,Ae[Ie],0)>-1;);return Ie}function Gh(Ae,Le){for(var Ie=Ae.length,Ke=0;Ie--;)Ae[Ie]===Le&&++Ke;return Ke}var Uh=vs(Ah),zh=vs(wh);function Hh(Ae){return"\\"+Ph[Ae]}function Wh(Ae,Le){return Ae==null?E:Ae[Le]}function kn(Ae){return bh.test(Ae)}function qh(Ae){return Th.test(Ae)}function Xh(Ae){for(var Le,Ie=[];!(Le=Ae.next()).done;)Ie.push(Le.value);return Ie}function Ts(Ae){var Le=-1,Ie=Array(Ae.size);return Ae.forEach(function(Ke,lt){Ie[++Le]=[lt,Ke]}),Ie}function io(Ae,Le){return function(Ie){return Ae(Le(Ie))}}function tn(Ae,Le){for(var Ie=-1,Ke=Ae.length,lt=0,bt=[];++Ie<Ke;){var zt=Ae[Ie];(zt===Le||zt===L)&&(Ae[Ie]=L,bt[lt++]=Ie)}return bt}function yi(Ae){var Le=-1,Ie=Array(Ae.size);return Ae.forEach(function(Ke){Ie[++Le]=Ke}),Ie}function Yh(Ae){var Le=-1,Ie=Array(Ae.size);return Ae.forEach(function(Ke){Ie[++Le]=[Ke,Ke]}),Ie}function jh(Ae,Le,Ie){for(var Ke=Ie-1,lt=Ae.length;++Ke<lt;)if(Ae[Ke]===Le)return Ke;return-1}function Zh(Ae,Le,Ie){for(var Ke=Ie+1;Ke--;)if(Ae[Ke]===Le)return Ke;return Ke}function In(Ae){return kn(Ae)?Qh(Ae):Oh(Ae)}function Ir(Ae){return kn(Ae)?Jh(Ae):Dh(Ae)}function so(Ae){for(var Le=Ae.length;Le--&&hn.test(Ae.charAt(Le)););return Le}var Kh=vs(Ch);function Qh(Ae){for(var Le=us.lastIndex=0;us.test(Ae);)++Le;return Le}function Jh(Ae){return Ae.match(us)||[]}function ec(Ae){return Ae.match(xh)||[]}var tc=function Ae(Le){Le=Le==null?jt:Mn.defaults(jt.Object(),Le,Mn.pick(jt,Sh));var Ie=Le.Array,Ke=Le.Date,lt=Le.Error,bt=Le.Function,zt=Le.Math,Ct=Le.Object,Ss=Le.RegExp,rc=Le.String,xr=Le.TypeError,xi=Ie.prototype,nc=bt.prototype,Nn=Ct.prototype,bi=Le["__core-js_shared__"],Ti=nc.toString,Et=Nn.hasOwnProperty,ic=0,ao=function(){var G=/[^.]+$/.exec(bi&&bi.keys&&bi.keys.IE_PROTO||"");return G?"Symbol(src)_1."+G:""}(),Si=Nn.toString,sc=Ti.call(Ct),ac=jt._,oc=Ss("^"+Ti.call(Et).replace(mt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),Ei=za?Le.Buffer:E,rn=Le.Symbol,Ai=Le.Uint8Array,oo=Ei?Ei.allocUnsafe:E,wi=io(Ct.getPrototypeOf,Ct),lo=Ct.create,ho=Nn.propertyIsEnumerable,Ci=xi.splice,co=rn?rn.isConcatSpreadable:E,Yn=rn?rn.iterator:E,gn=rn?rn.toStringTag:E,Pi=function(){try{var G=Tn(Ct,"defineProperty");return G({},"",{}),G}catch{}}(),lc=Le.clearTimeout!==jt.clearTimeout&&Le.clearTimeout,hc=Ke&&Ke.now!==jt.Date.now&&Ke.now,cc=Le.setTimeout!==jt.setTimeout&&Le.setTimeout,ki=zt.ceil,Ii=zt.floor,Es=Ct.getOwnPropertySymbols,uc=Ei?Ei.isBuffer:E,uo=Le.isFinite,dc=xi.join,fc=io(Ct.keys,Ct),Ht=zt.max,Kt=zt.min,pc=Ke.now,mc=Le.parseInt,fo=zt.random,_c=xi.reverse,As=Tn(Le,"DataView"),jn=Tn(Le,"Map"),ws=Tn(Le,"Promise"),Rn=Tn(Le,"Set"),Zn=Tn(Le,"WeakMap"),Kn=Tn(Ct,"create"),Mi=Zn&&new Zn,Fn={},gc=Sn(As),vc=Sn(jn),yc=Sn(ws),xc=Sn(Rn),bc=Sn(Zn),Ni=rn?rn.prototype:E,Qn=Ni?Ni.valueOf:E,po=Ni?Ni.toString:E;function xe(G){if($t(G)&&!ht(G)&&!(G instanceof gt)){if(G instanceof br)return G;if(Et.call(G,"__wrapped__"))return ml(G)}return new br(G)}var On=function(){function G(){}return function(q){if(!Dt(q))return{};if(lo)return lo(q);G.prototype=q;var ee=new G;return G.prototype=E,ee}}();function Ri(){}function br(G,q){this.__wrapped__=G,this.__actions__=[],this.__chain__=!!q,this.__index__=0,this.__values__=E}xe.templateSettings={escape:nr,evaluate:Or,interpolate:Mt,variable:"",imports:{_:xe}},xe.prototype=Ri.prototype,xe.prototype.constructor=xe,br.prototype=On(Ri.prototype),br.prototype.constructor=br;function gt(G){this.__wrapped__=G,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=me,this.__views__=[]}function Tc(){var G=new gt(this.__wrapped__);return G.__actions__=sr(this.__actions__),G.__dir__=this.__dir__,G.__filtered__=this.__filtered__,G.__iteratees__=sr(this.__iteratees__),G.__takeCount__=this.__takeCount__,G.__views__=sr(this.__views__),G}function Sc(){if(this.__filtered__){var G=new gt(this);G.__dir__=-1,G.__filtered__=!0}else G=this.clone(),G.__dir__*=-1;return G}function Ec(){var G=this.__wrapped__.value(),q=this.__dir__,ee=ht(G),oe=q<0,pe=ee?G.length:0,be=Du(0,pe,this.__views__),Te=be.start,Se=be.end,we=Se-Te,$e=oe?Se:Te-1,Ve=this.__iteratees__,ze=Ve.length,Xe=0,tt=Kt(we,this.__takeCount__);if(!ee||!oe&&pe==we&&tt==we)return Bo(G,this.__actions__);var st=[];e:for(;we--&&Xe<tt;){$e+=q;for(var ut=-1,at=G[$e];++ut<ze;){var _t=Ve[ut],vt=_t.iteratee,mr=_t.type,tr=vt(at);if(mr==ge)at=tr;else if(!tr){if(mr==ue)continue e;break e}}st[Xe++]=at}return st}gt.prototype=On(Ri.prototype),gt.prototype.constructor=gt;function vn(G){var q=-1,ee=G==null?0:G.length;for(this.clear();++q<ee;){var oe=G[q];this.set(oe[0],oe[1])}}function Ac(){this.__data__=Kn?Kn(null):{},this.size=0}function wc(G){var q=this.has(G)&&delete this.__data__[G];return this.size-=q?1:0,q}function Cc(G){var q=this.__data__;if(Kn){var ee=q[G];return ee===O?E:ee}return Et.call(q,G)?q[G]:E}function Pc(G){var q=this.__data__;return Kn?q[G]!==E:Et.call(q,G)}function kc(G,q){var ee=this.__data__;return this.size+=this.has(G)?0:1,ee[G]=Kn&&q===E?O:q,this}vn.prototype.clear=Ac,vn.prototype.delete=wc,vn.prototype.get=Cc,vn.prototype.has=Pc,vn.prototype.set=kc;function Hr(G){var q=-1,ee=G==null?0:G.length;for(this.clear();++q<ee;){var oe=G[q];this.set(oe[0],oe[1])}}function Ic(){this.__data__=[],this.size=0}function Mc(G){var q=this.__data__,ee=Fi(q,G);if(ee<0)return!1;var oe=q.length-1;return ee==oe?q.pop():Ci.call(q,ee,1),--this.size,!0}function Nc(G){var q=this.__data__,ee=Fi(q,G);return ee<0?E:q[ee][1]}function Rc(G){return Fi(this.__data__,G)>-1}function Fc(G,q){var ee=this.__data__,oe=Fi(ee,G);return oe<0?(++this.size,ee.push([G,q])):ee[oe][1]=q,this}Hr.prototype.clear=Ic,Hr.prototype.delete=Mc,Hr.prototype.get=Nc,Hr.prototype.has=Rc,Hr.prototype.set=Fc;function Wr(G){var q=-1,ee=G==null?0:G.length;for(this.clear();++q<ee;){var oe=G[q];this.set(oe[0],oe[1])}}function Oc(){this.size=0,this.__data__={hash:new vn,map:new(jn||Hr),string:new vn}}function Dc(G){var q=qi(this,G).delete(G);return this.size-=q?1:0,q}function Lc(G){return qi(this,G).get(G)}function Bc(G){return qi(this,G).has(G)}function $c(G,q){var ee=qi(this,G),oe=ee.size;return ee.set(G,q),this.size+=ee.size==oe?0:1,this}Wr.prototype.clear=Oc,Wr.prototype.delete=Dc,Wr.prototype.get=Lc,Wr.prototype.has=Bc,Wr.prototype.set=$c;function yn(G){var q=-1,ee=G==null?0:G.length;for(this.__data__=new Wr;++q<ee;)this.add(G[q])}function Vc(G){return this.__data__.set(G,O),this}function Gc(G){return this.__data__.has(G)}yn.prototype.add=yn.prototype.push=Vc,yn.prototype.has=Gc;function Mr(G){var q=this.__data__=new Hr(G);this.size=q.size}function Uc(){this.__data__=new Hr,this.size=0}function zc(G){var q=this.__data__,ee=q.delete(G);return this.size=q.size,ee}function Hc(G){return this.__data__.get(G)}function Wc(G){return this.__data__.has(G)}function qc(G,q){var ee=this.__data__;if(ee instanceof Hr){var oe=ee.__data__;if(!jn||oe.length<P-1)return oe.push([G,q]),this.size=++ee.size,this;ee=this.__data__=new Wr(oe)}return ee.set(G,q),this.size=ee.size,this}Mr.prototype.clear=Uc,Mr.prototype.delete=zc,Mr.prototype.get=Hc,Mr.prototype.has=Wc,Mr.prototype.set=qc;function mo(G,q){var ee=ht(G),oe=!ee&&En(G),pe=!ee&&!oe&&ln(G),be=!ee&&!oe&&!pe&&$n(G),Te=ee||oe||pe||be,Se=Te?xs(G.length,rc):[],we=Se.length;for(var $e in G)(q||Et.call(G,$e))&&!(Te&&($e=="length"||pe&&($e=="offset"||$e=="parent")||be&&($e=="buffer"||$e=="byteLength"||$e=="byteOffset")||jr($e,we)))&&Se.push($e);return Se}function _o(G){var q=G.length;return q?G[Ls(0,q-1)]:E}function Xc(G,q){return Xi(sr(G),xn(q,0,G.length))}function Yc(G){return Xi(sr(G))}function Cs(G,q,ee){(ee!==E&&!Nr(G[q],ee)||ee===E&&!(q in G))&&qr(G,q,ee)}function Jn(G,q,ee){var oe=G[q];(!(Et.call(G,q)&&Nr(oe,ee))||ee===E&&!(q in G))&&qr(G,q,ee)}function Fi(G,q){for(var ee=G.length;ee--;)if(Nr(G[ee][0],q))return ee;return-1}function jc(G,q,ee,oe){return nn(G,function(pe,be,Te){q(oe,pe,ee(pe),Te)}),oe}function go(G,q){return G&&Gr(q,Xt(q),G)}function Zc(G,q){return G&&Gr(q,or(q),G)}function qr(G,q,ee){q=="__proto__"&&Pi?Pi(G,q,{configurable:!0,enumerable:!0,value:ee,writable:!0}):G[q]=ee}function Ps(G,q){for(var ee=-1,oe=q.length,pe=Ie(oe),be=G==null;++ee<oe;)pe[ee]=be?E:la(G,q[ee]);return pe}function xn(G,q,ee){return G===G&&(ee!==E&&(G=G<=ee?G:ee),q!==E&&(G=G>=q?G:q)),G}function Tr(G,q,ee,oe,pe,be){var Te,Se=q&B,we=q&V,$e=q&U;if(ee&&(Te=pe?ee(G,oe,pe,be):ee(G)),Te!==E)return Te;if(!Dt(G))return G;var Ve=ht(G);if(Ve){if(Te=Bu(G),!Se)return sr(G,Te)}else{var ze=Qt(G),Xe=ze==De||ze==Ue;if(ln(G))return Go(G,Se);if(ze==We||ze==ke||Xe&&!pe){if(Te=we||Xe?{}:al(G),!Se)return we?Cu(G,Zc(Te,G)):wu(G,go(Te,G))}else{if(!kt[ze])return pe?G:{};Te=$u(G,ze,Se)}}be||(be=new Mr);var tt=be.get(G);if(tt)return tt;be.set(G,Te),Ol(G)?G.forEach(function(at){Te.add(Tr(at,q,ee,at,G,be))}):Rl(G)&&G.forEach(function(at,_t){Te.set(_t,Tr(at,q,ee,_t,G,be))});var st=$e?we?Ys:Xs:we?or:Xt,ut=Ve?E:st(G);return yr(ut||G,function(at,_t){ut&&(_t=at,at=G[_t]),Jn(Te,_t,Tr(at,q,ee,_t,G,be))}),Te}function Kc(G){var q=Xt(G);return function(ee){return vo(ee,G,q)}}function vo(G,q,ee){var oe=ee.length;if(G==null)return!oe;for(G=Ct(G);oe--;){var pe=ee[oe],be=q[pe],Te=G[pe];if(Te===E&&!(pe in G)||!be(Te))return!1}return!0}function yo(G,q,ee){if(typeof G!="function")throw new xr(R);return ai(function(){G.apply(E,ee)},q)}function ei(G,q,ee,oe){var pe=-1,be=gi,Te=!0,Se=G.length,we=[],$e=q.length;if(!Se)return we;ee&&(q=Ft(q,ur(ee))),oe?(be=ps,Te=!1):q.length>=P&&(be=Xn,Te=!1,q=new yn(q));e:for(;++pe<Se;){var Ve=G[pe],ze=ee==null?Ve:ee(Ve);if(Ve=oe||Ve!==0?Ve:0,Te&&ze===ze){for(var Xe=$e;Xe--;)if(q[Xe]===ze)continue e;we.push(Ve)}else be(q,ze,oe)||we.push(Ve)}return we}var nn=qo(Vr),xo=qo(Is,!0);function Qc(G,q){var ee=!0;return nn(G,function(oe,pe,be){return ee=!!q(oe,pe,be),ee}),ee}function Oi(G,q,ee){for(var oe=-1,pe=G.length;++oe<pe;){var be=G[oe],Te=q(be);if(Te!=null&&(Se===E?Te===Te&&!pr(Te):ee(Te,Se)))var Se=Te,we=be}return we}function Jc(G,q,ee,oe){var pe=G.length;for(ee=ct(ee),ee<0&&(ee=-ee>pe?0:pe+ee),oe=oe===E||oe>pe?pe:ct(oe),oe<0&&(oe+=pe),oe=ee>oe?0:Ll(oe);ee<oe;)G[ee++]=q;return G}function bo(G,q){var ee=[];return nn(G,function(oe,pe,be){q(oe,pe,be)&&ee.push(oe)}),ee}function Zt(G,q,ee,oe,pe){var be=-1,Te=G.length;for(ee||(ee=Gu),pe||(pe=[]);++be<Te;){var Se=G[be];q>0&&ee(Se)?q>1?Zt(Se,q-1,ee,oe,pe):en(pe,Se):oe||(pe[pe.length]=Se)}return pe}var ks=Xo(),To=Xo(!0);function Vr(G,q){return G&&ks(G,q,Xt)}function Is(G,q){return G&&To(G,q,Xt)}function Di(G,q){return Jr(q,function(ee){return Zr(G[ee])})}function bn(G,q){q=an(q,G);for(var ee=0,oe=q.length;G!=null&&ee<oe;)G=G[Ur(q[ee++])];return ee&&ee==oe?G:E}function So(G,q,ee){var oe=q(G);return ht(G)?oe:en(oe,ee(G))}function Jt(G){return G==null?G===E?pt:Ge:gn&&gn in Ct(G)?Ou(G):Yu(G)}function Ms(G,q){return G>q}function eu(G,q){return G!=null&&Et.call(G,q)}function tu(G,q){return G!=null&&q in Ct(G)}function ru(G,q,ee){return G>=Kt(q,ee)&&G<Ht(q,ee)}function Ns(G,q,ee){for(var oe=ee?ps:gi,pe=G[0].length,be=G.length,Te=be,Se=Ie(be),we=1/0,$e=[];Te--;){var Ve=G[Te];Te&&q&&(Ve=Ft(Ve,ur(q))),we=Kt(Ve.length,we),Se[Te]=!ee&&(q||pe>=120&&Ve.length>=120)?new yn(Te&&Ve):E}Ve=G[0];var ze=-1,Xe=Se[0];e:for(;++ze<pe&&$e.length<we;){var tt=Ve[ze],st=q?q(tt):tt;if(tt=ee||tt!==0?tt:0,!(Xe?Xn(Xe,st):oe($e,st,ee))){for(Te=be;--Te;){var ut=Se[Te];if(!(ut?Xn(ut,st):oe(G[Te],st,ee)))continue e}Xe&&Xe.push(st),$e.push(tt)}}return $e}function nu(G,q,ee,oe){return Vr(G,function(pe,be,Te){q(oe,ee(pe),be,Te)}),oe}function ti(G,q,ee){q=an(q,G),G=cl(G,q);var oe=G==null?G:G[Ur(Er(q))];return oe==null?E:cr(oe,G,ee)}function Eo(G){return $t(G)&&Jt(G)==ke}function iu(G){return $t(G)&&Jt(G)==Rt}function su(G){return $t(G)&&Jt(G)==Je}function ri(G,q,ee,oe,pe){return G===q?!0:G==null||q==null||!$t(G)&&!$t(q)?G!==G&&q!==q:au(G,q,ee,oe,ri,pe)}function au(G,q,ee,oe,pe,be){var Te=ht(G),Se=ht(q),we=Te?Be:Qt(G),$e=Se?Be:Qt(q);we=we==ke?We:we,$e=$e==ke?We:$e;var Ve=we==We,ze=$e==We,Xe=we==$e;if(Xe&&ln(G)){if(!ln(q))return!1;Te=!0,Ve=!1}if(Xe&&!Ve)return be||(be=new Mr),Te||$n(G)?nl(G,q,ee,oe,pe,be):Ru(G,q,we,ee,oe,pe,be);if(!(ee&z)){var tt=Ve&&Et.call(G,"__wrapped__"),st=ze&&Et.call(q,"__wrapped__");if(tt||st){var ut=tt?G.value():G,at=st?q.value():q;return be||(be=new Mr),pe(ut,at,ee,oe,be)}}return Xe?(be||(be=new Mr),Fu(G,q,ee,oe,pe,be)):!1}function ou(G){return $t(G)&&Qt(G)==Re}function Rs(G,q,ee,oe){var pe=ee.length,be=pe,Te=!oe;if(G==null)return!be;for(G=Ct(G);pe--;){var Se=ee[pe];if(Te&&Se[2]?Se[1]!==G[Se[0]]:!(Se[0]in G))return!1}for(;++pe<be;){Se=ee[pe];var we=Se[0],$e=G[we],Ve=Se[1];if(Te&&Se[2]){if($e===E&&!(we in G))return!1}else{var ze=new Mr;if(oe)var Xe=oe($e,Ve,we,G,q,ze);if(!(Xe===E?ri(Ve,$e,z|W,oe,ze):Xe))return!1}}return!0}function Ao(G){if(!Dt(G)||zu(G))return!1;var q=Zr(G)?oc:ir;return q.test(Sn(G))}function lu(G){return $t(G)&&Jt(G)==Fe}function hu(G){return $t(G)&&Qt(G)==He}function cu(G){return $t(G)&&Ji(G.length)&&!!Nt[Jt(G)]}function wo(G){return typeof G=="function"?G:G==null?lr:typeof G=="object"?ht(G)?ko(G[0],G[1]):Po(G):Yl(G)}function Fs(G){if(!si(G))return fc(G);var q=[];for(var ee in Ct(G))Et.call(G,ee)&&ee!="constructor"&&q.push(ee);return q}function uu(G){if(!Dt(G))return Xu(G);var q=si(G),ee=[];for(var oe in G)oe=="constructor"&&(q||!Et.call(G,oe))||ee.push(oe);return ee}function Os(G,q){return G<q}function Co(G,q){var ee=-1,oe=ar(G)?Ie(G.length):[];return nn(G,function(pe,be,Te){oe[++ee]=q(pe,be,Te)}),oe}function Po(G){var q=Zs(G);return q.length==1&&q[0][2]?ll(q[0][0],q[0][1]):function(ee){return ee===G||Rs(ee,G,q)}}function ko(G,q){return Qs(G)&&ol(q)?ll(Ur(G),q):function(ee){var oe=la(ee,G);return oe===E&&oe===q?ha(ee,G):ri(q,oe,z|W)}}function Li(G,q,ee,oe,pe){G!==q&&ks(q,function(be,Te){if(pe||(pe=new Mr),Dt(be))du(G,q,Te,ee,Li,oe,pe);else{var Se=oe?oe(ea(G,Te),be,Te+"",G,q,pe):E;Se===E&&(Se=be),Cs(G,Te,Se)}},or)}function du(G,q,ee,oe,pe,be,Te){var Se=ea(G,ee),we=ea(q,ee),$e=Te.get(we);if($e){Cs(G,ee,$e);return}var Ve=be?be(Se,we,ee+"",G,q,Te):E,ze=Ve===E;if(ze){var Xe=ht(we),tt=!Xe&&ln(we),st=!Xe&&!tt&&$n(we);Ve=we,Xe||tt||st?ht(Se)?Ve=Se:Vt(Se)?Ve=sr(Se):tt?(ze=!1,Ve=Go(we,!0)):st?(ze=!1,Ve=Uo(we,!0)):Ve=[]:oi(we)||En(we)?(Ve=Se,En(Se)?Ve=Bl(Se):(!Dt(Se)||Zr(Se))&&(Ve=al(we))):ze=!1}ze&&(Te.set(we,Ve),pe(Ve,we,oe,be,Te),Te.delete(we)),Cs(G,ee,Ve)}function Io(G,q){var ee=G.length;if(ee)return q+=q<0?ee:0,jr(q,ee)?G[q]:E}function Mo(G,q,ee){q.length?q=Ft(q,function(be){return ht(be)?function(Te){return bn(Te,be.length===1?be[0]:be)}:be}):q=[lr];var oe=-1;q=Ft(q,ur(it()));var pe=Co(G,function(be,Te,Se){var we=Ft(q,function($e){return $e(be)});return{criteria:we,index:++oe,value:be}});return $h(pe,function(be,Te){return Au(be,Te,ee)})}function fu(G,q){return No(G,q,function(ee,oe){return ha(G,oe)})}function No(G,q,ee){for(var oe=-1,pe=q.length,be={};++oe<pe;){var Te=q[oe],Se=bn(G,Te);ee(Se,Te)&&ni(be,an(Te,G),Se)}return be}function pu(G){return function(q){return bn(q,G)}}function Ds(G,q,ee,oe){var pe=oe?Bh:Pn,be=-1,Te=q.length,Se=G;for(G===q&&(q=sr(q)),ee&&(Se=Ft(G,ur(ee)));++be<Te;)for(var we=0,$e=q[be],Ve=ee?ee($e):$e;(we=pe(Se,Ve,we,oe))>-1;)Se!==G&&Ci.call(Se,we,1),Ci.call(G,we,1);return G}function Ro(G,q){for(var ee=G?q.length:0,oe=ee-1;ee--;){var pe=q[ee];if(ee==oe||pe!==be){var be=pe;jr(pe)?Ci.call(G,pe,1):Vs(G,pe)}}return G}function Ls(G,q){return G+Ii(fo()*(q-G+1))}function mu(G,q,ee,oe){for(var pe=-1,be=Ht(ki((q-G)/(ee||1)),0),Te=Ie(be);be--;)Te[oe?be:++pe]=G,G+=ee;return Te}function Bs(G,q){var ee="";if(!G||q<1||q>se)return ee;do q%2&&(ee+=G),q=Ii(q/2),q&&(G+=G);while(q);return ee}function ft(G,q){return ta(hl(G,q,lr),G+"")}function _u(G){return _o(Vn(G))}function gu(G,q){var ee=Vn(G);return Xi(ee,xn(q,0,ee.length))}function ni(G,q,ee,oe){if(!Dt(G))return G;q=an(q,G);for(var pe=-1,be=q.length,Te=be-1,Se=G;Se!=null&&++pe<be;){var we=Ur(q[pe]),$e=ee;if(we==="__proto__"||we==="constructor"||we==="prototype")return G;if(pe!=Te){var Ve=Se[we];$e=oe?oe(Ve,we,Se):E,$e===E&&($e=Dt(Ve)?Ve:jr(q[pe+1])?[]:{})}Jn(Se,we,$e),Se=Se[we]}return G}var Fo=Mi?function(G,q){return Mi.set(G,q),G}:lr,vu=Pi?function(G,q){return Pi(G,"toString",{configurable:!0,enumerable:!1,value:ua(q),writable:!0})}:lr;function yu(G){return Xi(Vn(G))}function Sr(G,q,ee){var oe=-1,pe=G.length;q<0&&(q=-q>pe?0:pe+q),ee=ee>pe?pe:ee,ee<0&&(ee+=pe),pe=q>ee?0:ee-q>>>0,q>>>=0;for(var be=Ie(pe);++oe<pe;)be[oe]=G[oe+q];return be}function xu(G,q){var ee;return nn(G,function(oe,pe,be){return ee=q(oe,pe,be),!ee}),!!ee}function Bi(G,q,ee){var oe=0,pe=G==null?oe:G.length;if(typeof q=="number"&&q===q&&pe<=Pe){for(;oe<pe;){var be=oe+pe>>>1,Te=G[be];Te!==null&&!pr(Te)&&(ee?Te<=q:Te<q)?oe=be+1:pe=be}return pe}return $s(G,q,lr,ee)}function $s(G,q,ee,oe){var pe=0,be=G==null?0:G.length;if(be===0)return 0;q=ee(q);for(var Te=q!==q,Se=q===null,we=pr(q),$e=q===E;pe<be;){var Ve=Ii((pe+be)/2),ze=ee(G[Ve]),Xe=ze!==E,tt=ze===null,st=ze===ze,ut=pr(ze);if(Te)var at=oe||st;else $e?at=st&&(oe||Xe):Se?at=st&&Xe&&(oe||!tt):we?at=st&&Xe&&!tt&&(oe||!ut):tt||ut?at=!1:at=oe?ze<=q:ze<q;at?pe=Ve+1:be=Ve}return Kt(be,Ee)}function Oo(G,q){for(var ee=-1,oe=G.length,pe=0,be=[];++ee<oe;){var Te=G[ee],Se=q?q(Te):Te;if(!ee||!Nr(Se,we)){var we=Se;be[pe++]=Te===0?0:Te}}return be}function Do(G){return typeof G=="number"?G:pr(G)?_e:+G}function dr(G){if(typeof G=="string")return G;if(ht(G))return Ft(G,dr)+"";if(pr(G))return po?po.call(G):"";var q=G+"";return q=="0"&&1/G==-ce?"-0":q}function sn(G,q,ee){var oe=-1,pe=gi,be=G.length,Te=!0,Se=[],we=Se;if(ee)Te=!1,pe=ps;else if(be>=P){var $e=q?null:Mu(G);if($e)return yi($e);Te=!1,pe=Xn,we=new yn}else we=q?[]:Se;e:for(;++oe<be;){var Ve=G[oe],ze=q?q(Ve):Ve;if(Ve=ee||Ve!==0?Ve:0,Te&&ze===ze){for(var Xe=we.length;Xe--;)if(we[Xe]===ze)continue e;q&&we.push(ze),Se.push(Ve)}else pe(we,ze,ee)||(we!==Se&&we.push(ze),Se.push(Ve))}return Se}function Vs(G,q){return q=an(q,G),G=cl(G,q),G==null||delete G[Ur(Er(q))]}function Lo(G,q,ee,oe){return ni(G,q,ee(bn(G,q)),oe)}function $i(G,q,ee,oe){for(var pe=G.length,be=oe?pe:-1;(oe?be--:++be<pe)&&q(G[be],be,G););return ee?Sr(G,oe?0:be,oe?be+1:pe):Sr(G,oe?be+1:0,oe?pe:be)}function Bo(G,q){var ee=G;return ee instanceof gt&&(ee=ee.value()),ms(q,function(oe,pe){return pe.func.apply(pe.thisArg,en([oe],pe.args))},ee)}function Gs(G,q,ee){var oe=G.length;if(oe<2)return oe?sn(G[0]):[];for(var pe=-1,be=Ie(oe);++pe<oe;)for(var Te=G[pe],Se=-1;++Se<oe;)Se!=pe&&(be[pe]=ei(be[pe]||Te,G[Se],q,ee));return sn(Zt(be,1),q,ee)}function $o(G,q,ee){for(var oe=-1,pe=G.length,be=q.length,Te={};++oe<pe;){var Se=oe<be?q[oe]:E;ee(Te,G[oe],Se)}return Te}function Us(G){return Vt(G)?G:[]}function zs(G){return typeof G=="function"?G:lr}function an(G,q){return ht(G)?G:Qs(G,q)?[G]:pl(Tt(G))}var bu=ft;function on(G,q,ee){var oe=G.length;return ee=ee===E?oe:ee,!q&&ee>=oe?G:Sr(G,q,ee)}var Vo=lc||function(G){return jt.clearTimeout(G)};function Go(G,q){if(q)return G.slice();var ee=G.length,oe=oo?oo(ee):new G.constructor(ee);return G.copy(oe),oe}function Hs(G){var q=new G.constructor(G.byteLength);return new Ai(q).set(new Ai(G)),q}function Tu(G,q){var ee=q?Hs(G.buffer):G.buffer;return new G.constructor(ee,G.byteOffset,G.byteLength)}function Su(G){var q=new G.constructor(G.source,qn.exec(G));return q.lastIndex=G.lastIndex,q}function Eu(G){return Qn?Ct(Qn.call(G)):{}}function Uo(G,q){var ee=q?Hs(G.buffer):G.buffer;return new G.constructor(ee,G.byteOffset,G.length)}function zo(G,q){if(G!==q){var ee=G!==E,oe=G===null,pe=G===G,be=pr(G),Te=q!==E,Se=q===null,we=q===q,$e=pr(q);if(!Se&&!$e&&!be&&G>q||be&&Te&&we&&!Se&&!$e||oe&&Te&&we||!ee&&we||!pe)return 1;if(!oe&&!be&&!$e&&G<q||$e&&ee&&pe&&!oe&&!be||Se&&ee&&pe||!Te&&pe||!we)return-1}return 0}function Au(G,q,ee){for(var oe=-1,pe=G.criteria,be=q.criteria,Te=pe.length,Se=ee.length;++oe<Te;){var we=zo(pe[oe],be[oe]);if(we){if(oe>=Se)return we;var $e=ee[oe];return we*($e=="desc"?-1:1)}}return G.index-q.index}function Ho(G,q,ee,oe){for(var pe=-1,be=G.length,Te=ee.length,Se=-1,we=q.length,$e=Ht(be-Te,0),Ve=Ie(we+$e),ze=!oe;++Se<we;)Ve[Se]=q[Se];for(;++pe<Te;)(ze||pe<be)&&(Ve[ee[pe]]=G[pe]);for(;$e--;)Ve[Se++]=G[pe++];return Ve}function Wo(G,q,ee,oe){for(var pe=-1,be=G.length,Te=-1,Se=ee.length,we=-1,$e=q.length,Ve=Ht(be-Se,0),ze=Ie(Ve+$e),Xe=!oe;++pe<Ve;)ze[pe]=G[pe];for(var tt=pe;++we<$e;)ze[tt+we]=q[we];for(;++Te<Se;)(Xe||pe<be)&&(ze[tt+ee[Te]]=G[pe++]);return ze}function sr(G,q){var ee=-1,oe=G.length;for(q||(q=Ie(oe));++ee<oe;)q[ee]=G[ee];return q}function Gr(G,q,ee,oe){var pe=!ee;ee||(ee={});for(var be=-1,Te=q.length;++be<Te;){var Se=q[be],we=oe?oe(ee[Se],G[Se],Se,ee,G):E;we===E&&(we=G[Se]),pe?qr(ee,Se,we):Jn(ee,Se,we)}return ee}function wu(G,q){return Gr(G,Ks(G),q)}function Cu(G,q){return Gr(G,il(G),q)}function Vi(G,q){return function(ee,oe){var pe=ht(ee)?Nh:jc,be=q?q():{};return pe(ee,G,it(oe,2),be)}}function Dn(G){return ft(function(q,ee){var oe=-1,pe=ee.length,be=pe>1?ee[pe-1]:E,Te=pe>2?ee[2]:E;for(be=G.length>3&&typeof be=="function"?(pe--,be):E,Te&&er(ee[0],ee[1],Te)&&(be=pe<3?E:be,pe=1),q=Ct(q);++oe<pe;){var Se=ee[oe];Se&&G(q,Se,oe,be)}return q})}function qo(G,q){return function(ee,oe){if(ee==null)return ee;if(!ar(ee))return G(ee,oe);for(var pe=ee.length,be=q?pe:-1,Te=Ct(ee);(q?be--:++be<pe)&&oe(Te[be],be,Te)!==!1;);return ee}}function Xo(G){return function(q,ee,oe){for(var pe=-1,be=Ct(q),Te=oe(q),Se=Te.length;Se--;){var we=Te[G?Se:++pe];if(ee(be[we],we,be)===!1)break}return q}}function Pu(G,q,ee){var oe=q&Z,pe=ii(G);function be(){var Te=this&&this!==jt&&this instanceof be?pe:G;return Te.apply(oe?ee:this,arguments)}return be}function Yo(G){return function(q){q=Tt(q);var ee=kn(q)?Ir(q):E,oe=ee?ee[0]:q.charAt(0),pe=ee?on(ee,1).join(""):q.slice(1);return oe[G]()+pe}}function Ln(G){return function(q){return ms(ql(Wl(q).replace(vh,"")),G,"")}}function ii(G){return function(){var q=arguments;switch(q.length){case 0:return new G;case 1:return new G(q[0]);case 2:return new G(q[0],q[1]);case 3:return new G(q[0],q[1],q[2]);case 4:return new G(q[0],q[1],q[2],q[3]);case 5:return new G(q[0],q[1],q[2],q[3],q[4]);case 6:return new G(q[0],q[1],q[2],q[3],q[4],q[5]);case 7:return new G(q[0],q[1],q[2],q[3],q[4],q[5],q[6])}var ee=On(G.prototype),oe=G.apply(ee,q);return Dt(oe)?oe:ee}}function ku(G,q,ee){var oe=ii(G);function pe(){for(var be=arguments.length,Te=Ie(be),Se=be,we=Bn(pe);Se--;)Te[Se]=arguments[Se];var $e=be<3&&Te[0]!==we&&Te[be-1]!==we?[]:tn(Te,we);if(be-=$e.length,be<ee)return Jo(G,q,Gi,pe.placeholder,E,Te,$e,E,E,ee-be);var Ve=this&&this!==jt&&this instanceof pe?oe:G;return cr(Ve,this,Te)}return pe}function jo(G){return function(q,ee,oe){var pe=Ct(q);if(!ar(q)){var be=it(ee,3);q=Xt(q),ee=function(Se){return be(pe[Se],Se,pe)}}var Te=G(q,ee,oe);return Te>-1?pe[be?q[Te]:Te]:E}}function Zo(G){return Yr(function(q){var ee=q.length,oe=ee,pe=br.prototype.thru;for(G&&q.reverse();oe--;){var be=q[oe];if(typeof be!="function")throw new xr(R);if(pe&&!Te&&Wi(be)=="wrapper")var Te=new br([],!0)}for(oe=Te?oe:ee;++oe<ee;){be=q[oe];var Se=Wi(be),we=Se=="wrapper"?js(be):E;we&&Js(we[0])&&we[1]==(ie|Y|J|ne)&&!we[4].length&&we[9]==1?Te=Te[Wi(we[0])].apply(Te,we[3]):Te=be.length==1&&Js(be)?Te[Se]():Te.thru(be)}return function(){var $e=arguments,Ve=$e[0];if(Te&&$e.length==1&&ht(Ve))return Te.plant(Ve).value();for(var ze=0,Xe=ee?q[ze].apply(this,$e):Ve;++ze<ee;)Xe=q[ze].call(this,Xe);return Xe}})}function Gi(G,q,ee,oe,pe,be,Te,Se,we,$e){var Ve=q&ie,ze=q&Z,Xe=q&X,tt=q&(Y|Q),st=q&he,ut=Xe?E:ii(G);function at(){for(var _t=arguments.length,vt=Ie(_t),mr=_t;mr--;)vt[mr]=arguments[mr];if(tt)var tr=Bn(at),_r=Gh(vt,tr);if(oe&&(vt=Ho(vt,oe,pe,tt)),be&&(vt=Wo(vt,be,Te,tt)),_t-=_r,tt&&_t<$e){var Gt=tn(vt,tr);return Jo(G,q,Gi,at.placeholder,ee,vt,Gt,Se,we,$e-_t)}var Rr=ze?ee:this,Qr=Xe?Rr[G]:G;return _t=vt.length,Se?vt=ju(vt,Se):st&&_t>1&&vt.reverse(),Ve&&we<_t&&(vt.length=we),this&&this!==jt&&this instanceof at&&(Qr=ut||ii(Qr)),Qr.apply(Rr,vt)}return at}function Ko(G,q){return function(ee,oe){return nu(ee,G,q(oe),{})}}function Ui(G,q){return function(ee,oe){var pe;if(ee===E&&oe===E)return q;if(ee!==E&&(pe=ee),oe!==E){if(pe===E)return oe;typeof ee=="string"||typeof oe=="string"?(ee=dr(ee),oe=dr(oe)):(ee=Do(ee),oe=Do(oe)),pe=G(ee,oe)}return pe}}function Ws(G){return Yr(function(q){return q=Ft(q,ur(it())),ft(function(ee){var oe=this;return G(q,function(pe){return cr(pe,oe,ee)})})})}function zi(G,q){q=q===E?" ":dr(q);var ee=q.length;if(ee<2)return ee?Bs(q,G):q;var oe=Bs(q,ki(G/In(q)));return kn(q)?on(Ir(oe),0,G).join(""):oe.slice(0,G)}function Iu(G,q,ee,oe){var pe=q&Z,be=ii(G);function Te(){for(var Se=-1,we=arguments.length,$e=-1,Ve=oe.length,ze=Ie(Ve+we),Xe=this&&this!==jt&&this instanceof Te?be:G;++$e<Ve;)ze[$e]=oe[$e];for(;we--;)ze[$e++]=arguments[++Se];return cr(Xe,pe?ee:this,ze)}return Te}function Qo(G){return function(q,ee,oe){return oe&&typeof oe!="number"&&er(q,ee,oe)&&(ee=oe=E),q=Kr(q),ee===E?(ee=q,q=0):ee=Kr(ee),oe=oe===E?q<ee?1:-1:Kr(oe),mu(q,ee,oe,G)}}function Hi(G){return function(q,ee){return typeof q=="string"&&typeof ee=="string"||(q=Ar(q),ee=Ar(ee)),G(q,ee)}}function Jo(G,q,ee,oe,pe,be,Te,Se,we,$e){var Ve=q&Y,ze=Ve?Te:E,Xe=Ve?E:Te,tt=Ve?be:E,st=Ve?E:be;q|=Ve?J:te,q&=~(Ve?te:J),q&K||(q&=~(Z|X));var ut=[G,q,pe,tt,ze,st,Xe,Se,we,$e],at=ee.apply(E,ut);return Js(G)&&ul(at,ut),at.placeholder=oe,dl(at,G,q)}function qs(G){var q=zt[G];return function(ee,oe){if(ee=Ar(ee),oe=oe==null?0:Kt(ct(oe),292),oe&&uo(ee)){var pe=(Tt(ee)+"e").split("e"),be=q(pe[0]+"e"+(+pe[1]+oe));return pe=(Tt(be)+"e").split("e"),+(pe[0]+"e"+(+pe[1]-oe))}return q(ee)}}var Mu=Rn&&1/yi(new Rn([,-0]))[1]==ce?function(G){return new Rn(G)}:pa;function el(G){return function(q){var ee=Qt(q);return ee==Re?Ts(q):ee==He?Yh(q):Vh(q,G(q))}}function Xr(G,q,ee,oe,pe,be,Te,Se){var we=q&X;if(!we&&typeof G!="function")throw new xr(R);var $e=oe?oe.length:0;if($e||(q&=~(J|te),oe=pe=E),Te=Te===E?Te:Ht(ct(Te),0),Se=Se===E?Se:ct(Se),$e-=pe?pe.length:0,q&te){var Ve=oe,ze=pe;oe=pe=E}var Xe=we?E:js(G),tt=[G,q,ee,oe,pe,Ve,ze,be,Te,Se];if(Xe&&qu(tt,Xe),G=tt[0],q=tt[1],ee=tt[2],oe=tt[3],pe=tt[4],Se=tt[9]=tt[9]===E?we?0:G.length:Ht(tt[9]-$e,0),!Se&&q&(Y|Q)&&(q&=~(Y|Q)),!q||q==Z)var st=Pu(G,q,ee);else q==Y||q==Q?st=ku(G,q,Se):(q==J||q==(Z|J))&&!pe.length?st=Iu(G,q,ee,oe):st=Gi.apply(E,tt);var ut=Xe?Fo:ul;return dl(ut(st,tt),G,q)}function tl(G,q,ee,oe){return G===E||Nr(G,Nn[ee])&&!Et.call(oe,ee)?q:G}function rl(G,q,ee,oe,pe,be){return Dt(G)&&Dt(q)&&(be.set(q,G),Li(G,q,E,rl,be),be.delete(q)),G}function Nu(G){return oi(G)?E:G}function nl(G,q,ee,oe,pe,be){var Te=ee&z,Se=G.length,we=q.length;if(Se!=we&&!(Te&&we>Se))return!1;var $e=be.get(G),Ve=be.get(q);if($e&&Ve)return $e==q&&Ve==G;var ze=-1,Xe=!0,tt=ee&W?new yn:E;for(be.set(G,q),be.set(q,G);++ze<Se;){var st=G[ze],ut=q[ze];if(oe)var at=Te?oe(ut,st,ze,q,G,be):oe(st,ut,ze,G,q,be);if(at!==E){if(at)continue;Xe=!1;break}if(tt){if(!_s(q,function(_t,vt){if(!Xn(tt,vt)&&(st===_t||pe(st,_t,ee,oe,be)))return tt.push(vt)})){Xe=!1;break}}else if(!(st===ut||pe(st,ut,ee,oe,be))){Xe=!1;break}}return be.delete(G),be.delete(q),Xe}function Ru(G,q,ee,oe,pe,be,Te){switch(ee){case wt:if(G.byteLength!=q.byteLength||G.byteOffset!=q.byteOffset)return!1;G=G.buffer,q=q.buffer;case Rt:return!(G.byteLength!=q.byteLength||!be(new Ai(G),new Ai(q)));case Oe:case Je:case Ne:return Nr(+G,+q);case qe:return G.name==q.name&&G.message==q.message;case Fe:case nt:return G==q+"";case Re:var Se=Ts;case He:var we=oe&z;if(Se||(Se=yi),G.size!=q.size&&!we)return!1;var $e=Te.get(G);if($e)return $e==q;oe|=W,Te.set(G,q);var Ve=nl(Se(G),Se(q),oe,pe,be,Te);return Te.delete(G),Ve;case ot:if(Qn)return Qn.call(G)==Qn.call(q)}return!1}function Fu(G,q,ee,oe,pe,be){var Te=ee&z,Se=Xs(G),we=Se.length,$e=Xs(q),Ve=$e.length;if(we!=Ve&&!Te)return!1;for(var ze=we;ze--;){var Xe=Se[ze];if(!(Te?Xe in q:Et.call(q,Xe)))return!1}var tt=be.get(G),st=be.get(q);if(tt&&st)return tt==q&&st==G;var ut=!0;be.set(G,q),be.set(q,G);for(var at=Te;++ze<we;){Xe=Se[ze];var _t=G[Xe],vt=q[Xe];if(oe)var mr=Te?oe(vt,_t,Xe,q,G,be):oe(_t,vt,Xe,G,q,be);if(!(mr===E?_t===vt||pe(_t,vt,ee,oe,be):mr)){ut=!1;break}at||(at=Xe=="constructor")}if(ut&&!at){var tr=G.constructor,_r=q.constructor;tr!=_r&&"constructor"in G&&"constructor"in q&&!(typeof tr=="function"&&tr instanceof tr&&typeof _r=="function"&&_r instanceof _r)&&(ut=!1)}return be.delete(G),be.delete(q),ut}function Yr(G){return ta(hl(G,E,vl),G+"")}function Xs(G){return So(G,Xt,Ks)}function Ys(G){return So(G,or,il)}var js=Mi?function(G){return Mi.get(G)}:pa;function Wi(G){for(var q=G.name+"",ee=Fn[q],oe=Et.call(Fn,q)?ee.length:0;oe--;){var pe=ee[oe],be=pe.func;if(be==null||be==G)return pe.name}return q}function Bn(G){var q=Et.call(xe,"placeholder")?xe:G;return q.placeholder}function it(){var G=xe.iteratee||da;return G=G===da?wo:G,arguments.length?G(arguments[0],arguments[1]):G}function qi(G,q){var ee=G.__data__;return Uu(q)?ee[typeof q=="string"?"string":"hash"]:ee.map}function Zs(G){for(var q=Xt(G),ee=q.length;ee--;){var oe=q[ee],pe=G[oe];q[ee]=[oe,pe,ol(pe)]}return q}function Tn(G,q){var ee=Wh(G,q);return Ao(ee)?ee:E}function Ou(G){var q=Et.call(G,gn),ee=G[gn];try{G[gn]=E;var oe=!0}catch{}var pe=Si.call(G);return oe&&(q?G[gn]=ee:delete G[gn]),pe}var Ks=Es?function(G){return G==null?[]:(G=Ct(G),Jr(Es(G),function(q){return ho.call(G,q)}))}:ma,il=Es?function(G){for(var q=[];G;)en(q,Ks(G)),G=wi(G);return q}:ma,Qt=Jt;(As&&Qt(new As(new ArrayBuffer(1)))!=wt||jn&&Qt(new jn)!=Re||ws&&Qt(ws.resolve())!=je||Rn&&Qt(new Rn)!=He||Zn&&Qt(new Zn)!=dt)&&(Qt=function(G){var q=Jt(G),ee=q==We?G.constructor:E,oe=ee?Sn(ee):"";if(oe)switch(oe){case gc:return wt;case vc:return Re;case yc:return je;case xc:return He;case bc:return dt}return q});function Du(G,q,ee){for(var oe=-1,pe=ee.length;++oe<pe;){var be=ee[oe],Te=be.size;switch(be.type){case"drop":G+=Te;break;case"dropRight":q-=Te;break;case"take":q=Kt(q,G+Te);break;case"takeRight":G=Ht(G,q-Te);break}}return{start:G,end:q}}function Lu(G){var q=G.match(un);return q?q[1].split(Yt):[]}function sl(G,q,ee){q=an(q,G);for(var oe=-1,pe=q.length,be=!1;++oe<pe;){var Te=Ur(q[oe]);if(!(be=G!=null&&ee(G,Te)))break;G=G[Te]}return be||++oe!=pe?be:(pe=G==null?0:G.length,!!pe&&Ji(pe)&&jr(Te,pe)&&(ht(G)||En(G)))}function Bu(G){var q=G.length,ee=new G.constructor(q);return q&&typeof G[0]=="string"&&Et.call(G,"index")&&(ee.index=G.index,ee.input=G.input),ee}function al(G){return typeof G.constructor=="function"&&!si(G)?On(wi(G)):{}}function $u(G,q,ee){var oe=G.constructor;switch(q){case Rt:return Hs(G);case Oe:case Je:return new oe(+G);case wt:return Tu(G,ee);case Ot:case Ze:case St:case Wt:case qt:case Qe:case xt:case Lt:case It:return Uo(G,ee);case Re:return new oe;case Ne:case nt:return new oe(G);case Fe:return Su(G);case He:return new oe;case ot:return Eu(G)}}function Vu(G,q){var ee=q.length;if(!ee)return G;var oe=ee-1;return q[oe]=(ee>1?"& ":"")+q[oe],q=q.join(ee>2?", ":" "),G.replace(cn,`{
/* [wrapped with `+q+`] */
`)}function Gu(G){return ht(G)||En(G)||!!(co&&G&&G[co])}function jr(G,q){var ee=typeof G;return q=q??se,!!q&&(ee=="number"||ee!="symbol"&&fn.test(G))&&G>-1&&G%1==0&&G<q}function er(G,q,ee){if(!Dt(ee))return!1;var oe=typeof q;return(oe=="number"?ar(ee)&&jr(q,ee.length):oe=="string"&&q in ee)?Nr(ee[q],G):!1}function Qs(G,q){if(ht(G))return!1;var ee=typeof G;return ee=="number"||ee=="symbol"||ee=="boolean"||G==null||pr(G)?!0:Dr.test(G)||!Pr.test(G)||q!=null&&G in Ct(q)}function Uu(G){var q=typeof G;return q=="string"||q=="number"||q=="symbol"||q=="boolean"?G!=="__proto__":G===null}function Js(G){var q=Wi(G),ee=xe[q];if(typeof ee!="function"||!(q in gt.prototype))return!1;if(G===ee)return!0;var oe=js(ee);return!!oe&&G===oe[0]}function zu(G){return!!ao&&ao in G}var Hu=bi?Zr:_a;function si(G){var q=G&&G.constructor,ee=typeof q=="function"&&q.prototype||Nn;return G===ee}function ol(G){return G===G&&!Dt(G)}function ll(G,q){return function(ee){return ee==null?!1:ee[G]===q&&(q!==E||G in Ct(ee))}}function Wu(G){var q=Ki(G,function(oe){return ee.size===D&&ee.clear(),oe}),ee=q.cache;return q}function qu(G,q){var ee=G[1],oe=q[1],pe=ee|oe,be=pe<(Z|X|ie),Te=oe==ie&&ee==Y||oe==ie&&ee==ne&&G[7].length<=q[8]||oe==(ie|ne)&&q[7].length<=q[8]&&ee==Y;if(!(be||Te))return G;oe&Z&&(G[2]=q[2],pe|=ee&Z?0:K);var Se=q[3];if(Se){var we=G[3];G[3]=we?Ho(we,Se,q[4]):Se,G[4]=we?tn(G[3],L):q[4]}return Se=q[5],Se&&(we=G[5],G[5]=we?Wo(we,Se,q[6]):Se,G[6]=we?tn(G[5],L):q[6]),Se=q[7],Se&&(G[7]=Se),oe&ie&&(G[8]=G[8]==null?q[8]:Kt(G[8],q[8])),G[9]==null&&(G[9]=q[9]),G[0]=q[0],G[1]=pe,G}function Xu(G){var q=[];if(G!=null)for(var ee in Ct(G))q.push(ee);return q}function Yu(G){return Si.call(G)}function hl(G,q,ee){return q=Ht(q===E?G.length-1:q,0),function(){for(var oe=arguments,pe=-1,be=Ht(oe.length-q,0),Te=Ie(be);++pe<be;)Te[pe]=oe[q+pe];pe=-1;for(var Se=Ie(q+1);++pe<q;)Se[pe]=oe[pe];return Se[q]=ee(Te),cr(G,this,Se)}}function cl(G,q){return q.length<2?G:bn(G,Sr(q,0,-1))}function ju(G,q){for(var ee=G.length,oe=Kt(q.length,ee),pe=sr(G);oe--;){var be=q[oe];G[oe]=jr(be,ee)?pe[be]:E}return G}function ea(G,q){if(!(q==="constructor"&&typeof G[q]=="function")&&q!="__proto__")return G[q]}var ul=fl(Fo),ai=cc||function(G,q){return jt.setTimeout(G,q)},ta=fl(vu);function dl(G,q,ee){var oe=q+"";return ta(G,Vu(oe,Zu(Lu(oe),ee)))}function fl(G){var q=0,ee=0;return function(){var oe=pc(),pe=fe-(oe-ee);if(ee=oe,pe>0){if(++q>=de)return arguments[0]}else q=0;return G.apply(E,arguments)}}function Xi(G,q){var ee=-1,oe=G.length,pe=oe-1;for(q=q===E?oe:q;++ee<q;){var be=Ls(ee,pe),Te=G[be];G[be]=G[ee],G[ee]=Te}return G.length=q,G}var pl=Wu(function(G){var q=[];return G.charCodeAt(0)===46&&q.push(""),G.replace(At,function(ee,oe,pe,be){q.push(pe?be.replace(fi,"$1"):oe||ee)}),q});function Ur(G){if(typeof G=="string"||pr(G))return G;var q=G+"";return q=="0"&&1/G==-ce?"-0":q}function Sn(G){if(G!=null){try{return Ti.call(G)}catch{}try{return G+""}catch{}}return""}function Zu(G,q){return yr(Ce,function(ee){var oe="_."+ee[0];q&ee[1]&&!gi(G,oe)&&G.push(oe)}),G.sort()}function ml(G){if(G instanceof gt)return G.clone();var q=new br(G.__wrapped__,G.__chain__);return q.__actions__=sr(G.__actions__),q.__index__=G.__index__,q.__values__=G.__values__,q}function Ku(G,q,ee){(ee?er(G,q,ee):q===E)?q=1:q=Ht(ct(q),0);var oe=G==null?0:G.length;if(!oe||q<1)return[];for(var pe=0,be=0,Te=Ie(ki(oe/q));pe<oe;)Te[be++]=Sr(G,pe,pe+=q);return Te}function Qu(G){for(var q=-1,ee=G==null?0:G.length,oe=0,pe=[];++q<ee;){var be=G[q];be&&(pe[oe++]=be)}return pe}function Ju(){var G=arguments.length;if(!G)return[];for(var q=Ie(G-1),ee=arguments[0],oe=G;oe--;)q[oe-1]=arguments[oe];return en(ht(ee)?sr(ee):[ee],Zt(q,1))}var ed=ft(function(G,q){return Vt(G)?ei(G,Zt(q,1,Vt,!0)):[]}),td=ft(function(G,q){var ee=Er(q);return Vt(ee)&&(ee=E),Vt(G)?ei(G,Zt(q,1,Vt,!0),it(ee,2)):[]}),rd=ft(function(G,q){var ee=Er(q);return Vt(ee)&&(ee=E),Vt(G)?ei(G,Zt(q,1,Vt,!0),E,ee):[]});function nd(G,q,ee){var oe=G==null?0:G.length;return oe?(q=ee||q===E?1:ct(q),Sr(G,q<0?0:q,oe)):[]}function sd(G,q,ee){var oe=G==null?0:G.length;return oe?(q=ee||q===E?1:ct(q),q=oe-q,Sr(G,0,q<0?0:q)):[]}function ad(G,q){return G&&G.length?$i(G,it(q,3),!0,!0):[]}function od(G,q){return G&&G.length?$i(G,it(q,3),!0):[]}function ld(G,q,ee,oe){var pe=G==null?0:G.length;return pe?(ee&&typeof ee!="number"&&er(G,q,ee)&&(ee=0,oe=pe),Jc(G,q,ee,oe)):[]}function _l(G,q,ee){var oe=G==null?0:G.length;if(!oe)return-1;var pe=ee==null?0:ct(ee);return pe<0&&(pe=Ht(oe+pe,0)),vi(G,it(q,3),pe)}function gl(G,q,ee){var oe=G==null?0:G.length;if(!oe)return-1;var pe=oe-1;return ee!==E&&(pe=ct(ee),pe=ee<0?Ht(oe+pe,0):Kt(pe,oe-1)),vi(G,it(q,3),pe,!0)}function vl(G){var q=G==null?0:G.length;return q?Zt(G,1):[]}function hd(G){var q=G==null?0:G.length;return q?Zt(G,ce):[]}function cd(G,q){var ee=G==null?0:G.length;return ee?(q=q===E?1:ct(q),Zt(G,q)):[]}function ud(G){for(var q=-1,ee=G==null?0:G.length,oe={};++q<ee;){var pe=G[q];oe[pe[0]]=pe[1]}return oe}function yl(G){return G&&G.length?G[0]:E}function dd(G,q,ee){var oe=G==null?0:G.length;if(!oe)return-1;var pe=ee==null?0:ct(ee);return pe<0&&(pe=Ht(oe+pe,0)),Pn(G,q,pe)}function fd(G){var q=G==null?0:G.length;return q?Sr(G,0,-1):[]}var pd=ft(function(G){var q=Ft(G,Us);return q.length&&q[0]===G[0]?Ns(q):[]}),md=ft(function(G){var q=Er(G),ee=Ft(G,Us);return q===Er(ee)?q=E:ee.pop(),ee.length&&ee[0]===G[0]?Ns(ee,it(q,2)):[]}),_d=ft(function(G){var q=Er(G),ee=Ft(G,Us);return q=typeof q=="function"?q:E,q&&ee.pop(),ee.length&&ee[0]===G[0]?Ns(ee,E,q):[]});function gd(G,q){return G==null?"":dc.call(G,q)}function Er(G){var q=G==null?0:G.length;return q?G[q-1]:E}function vd(G,q,ee){var oe=G==null?0:G.length;if(!oe)return-1;var pe=oe;return ee!==E&&(pe=ct(ee),pe=pe<0?Ht(oe+pe,0):Kt(pe,oe-1)),q===q?Zh(G,q,pe):vi(G,Qa,pe,!0)}function yd(G,q){return G&&G.length?Io(G,ct(q)):E}var xd=ft(xl);function xl(G,q){return G&&G.length&&q&&q.length?Ds(G,q):G}function bd(G,q,ee){return G&&G.length&&q&&q.length?Ds(G,q,it(ee,2)):G}function Td(G,q,ee){return G&&G.length&&q&&q.length?Ds(G,q,E,ee):G}var Sd=Yr(function(G,q){var ee=G==null?0:G.length,oe=Ps(G,q);return Ro(G,Ft(q,function(pe){return jr(pe,ee)?+pe:pe}).sort(zo)),oe});function Ed(G,q){var ee=[];if(!(G&&G.length))return ee;var oe=-1,pe=[],be=G.length;for(q=it(q,3);++oe<be;){var Te=G[oe];q(Te,oe,G)&&(ee.push(Te),pe.push(oe))}return Ro(G,pe),ee}function ra(G){return G==null?G:_c.call(G)}function Ad(G,q,ee){var oe=G==null?0:G.length;return oe?(ee&&typeof ee!="number"&&er(G,q,ee)?(q=0,ee=oe):(q=q==null?0:ct(q),ee=ee===E?oe:ct(ee)),Sr(G,q,ee)):[]}function wd(G,q){return Bi(G,q)}function Cd(G,q,ee){return $s(G,q,it(ee,2))}function Pd(G,q){var ee=G==null?0:G.length;if(ee){var oe=Bi(G,q);if(oe<ee&&Nr(G[oe],q))return oe}return-1}function kd(G,q){return Bi(G,q,!0)}function Id(G,q,ee){return $s(G,q,it(ee,2),!0)}function Md(G,q){var ee=G==null?0:G.length;if(ee){var oe=Bi(G,q,!0)-1;if(Nr(G[oe],q))return oe}return-1}function Nd(G){return G&&G.length?Oo(G):[]}function Rd(G,q){return G&&G.length?Oo(G,it(q,2)):[]}function Fd(G){var q=G==null?0:G.length;return q?Sr(G,1,q):[]}function Od(G,q,ee){return G&&G.length?(q=ee||q===E?1:ct(q),Sr(G,0,q<0?0:q)):[]}function Dd(G,q,ee){var oe=G==null?0:G.length;return oe?(q=ee||q===E?1:ct(q),q=oe-q,Sr(G,q<0?0:q,oe)):[]}function Ld(G,q){return G&&G.length?$i(G,it(q,3),!1,!0):[]}function Bd(G,q){return G&&G.length?$i(G,it(q,3)):[]}var $d=ft(function(G){return sn(Zt(G,1,Vt,!0))}),Vd=ft(function(G){var q=Er(G);return Vt(q)&&(q=E),sn(Zt(G,1,Vt,!0),it(q,2))}),Gd=ft(function(G){var q=Er(G);return q=typeof q=="function"?q:E,sn(Zt(G,1,Vt,!0),E,q)});function Ud(G){return G&&G.length?sn(G):[]}function zd(G,q){return G&&G.length?sn(G,it(q,2)):[]}function Hd(G,q){return q=typeof q=="function"?q:E,G&&G.length?sn(G,E,q):[]}function na(G){if(!(G&&G.length))return[];var q=0;return G=Jr(G,function(ee){if(Vt(ee))return q=Ht(ee.length,q),!0}),xs(q,function(ee){return Ft(G,gs(ee))})}function bl(G,q){if(!(G&&G.length))return[];var ee=na(G);return q==null?ee:Ft(ee,function(oe){return cr(q,E,oe)})}var Wd=ft(function(G,q){return Vt(G)?ei(G,q):[]}),qd=ft(function(G){return Gs(Jr(G,Vt))}),Xd=ft(function(G){var q=Er(G);return Vt(q)&&(q=E),Gs(Jr(G,Vt),it(q,2))}),Yd=ft(function(G){var q=Er(G);return q=typeof q=="function"?q:E,Gs(Jr(G,Vt),E,q)}),jd=ft(na);function Zd(G,q){return $o(G||[],q||[],Jn)}function Kd(G,q){return $o(G||[],q||[],ni)}var Qd=ft(function(G){var q=G.length,ee=q>1?G[q-1]:E;return ee=typeof ee=="function"?(G.pop(),ee):E,bl(G,ee)});function Tl(G){var q=xe(G);return q.__chain__=!0,q}function Jd(G,q){return q(G),G}function Yi(G,q){return q(G)}var ef=Yr(function(G){var q=G.length,ee=q?G[0]:0,oe=this.__wrapped__,pe=function(be){return Ps(be,G)};return q>1||this.__actions__.length||!(oe instanceof gt)||!jr(ee)?this.thru(pe):(oe=oe.slice(ee,+ee+(q?1:0)),oe.__actions__.push({func:Yi,args:[pe],thisArg:E}),new br(oe,this.__chain__).thru(function(be){return q&&!be.length&&be.push(E),be}))});function tf(){return Tl(this)}function rf(){return new br(this.value(),this.__chain__)}function nf(){this.__values__===E&&(this.__values__=Dl(this.value()));var G=this.__index__>=this.__values__.length,q=G?E:this.__values__[this.__index__++];return{done:G,value:q}}function sf(){return this}function af(G){for(var q,ee=this;ee instanceof Ri;){var oe=ml(ee);oe.__index__=0,oe.__values__=E,q?pe.__wrapped__=oe:q=oe;var pe=oe;ee=ee.__wrapped__}return pe.__wrapped__=G,q}function of(){var G=this.__wrapped__;if(G instanceof gt){var q=G;return this.__actions__.length&&(q=new gt(this)),q=q.reverse(),q.__actions__.push({func:Yi,args:[ra],thisArg:E}),new br(q,this.__chain__)}return this.thru(ra)}function lf(){return Bo(this.__wrapped__,this.__actions__)}var hf=Vi(function(G,q,ee){Et.call(G,ee)?++G[ee]:qr(G,ee,1)});function cf(G,q,ee){var oe=ht(G)?Za:Qc;return ee&&er(G,q,ee)&&(q=E),oe(G,it(q,3))}function uf(G,q){var ee=ht(G)?Jr:bo;return ee(G,it(q,3))}var df=jo(_l),ff=jo(gl);function pf(G,q){return Zt(ji(G,q),1)}function mf(G,q){return Zt(ji(G,q),ce)}function _f(G,q,ee){return ee=ee===E?1:ct(ee),Zt(ji(G,q),ee)}function Sl(G,q){var ee=ht(G)?yr:nn;return ee(G,it(q,3))}function El(G,q){var ee=ht(G)?Rh:xo;return ee(G,it(q,3))}var gf=Vi(function(G,q,ee){Et.call(G,ee)?G[ee].push(q):qr(G,ee,[q])});function vf(G,q,ee,oe){G=ar(G)?G:Vn(G),ee=ee&&!oe?ct(ee):0;var pe=G.length;return ee<0&&(ee=Ht(pe+ee,0)),es(G)?ee<=pe&&G.indexOf(q,ee)>-1:!!pe&&Pn(G,q,ee)>-1}var yf=ft(function(G,q,ee){var oe=-1,pe=typeof q=="function",be=ar(G)?Ie(G.length):[];return nn(G,function(Te){be[++oe]=pe?cr(q,Te,ee):ti(Te,q,ee)}),be}),xf=Vi(function(G,q,ee){qr(G,ee,q)});function ji(G,q){var ee=ht(G)?Ft:Co;return ee(G,it(q,3))}function bf(G,q,ee,oe){return G==null?[]:(ht(q)||(q=q==null?[]:[q]),ee=oe?E:ee,ht(ee)||(ee=ee==null?[]:[ee]),Mo(G,q,ee))}var Tf=Vi(function(G,q,ee){G[ee?0:1].push(q)},function(){return[[],[]]});function Sf(G,q,ee){var oe=ht(G)?ms:eo,pe=arguments.length<3;return oe(G,it(q,4),ee,pe,nn)}function Ef(G,q,ee){var oe=ht(G)?Fh:eo,pe=arguments.length<3;return oe(G,it(q,4),ee,pe,xo)}function Af(G,q){var ee=ht(G)?Jr:bo;return ee(G,Qi(it(q,3)))}function wf(G){var q=ht(G)?_o:_u;return q(G)}function Cf(G,q,ee){(ee?er(G,q,ee):q===E)?q=1:q=ct(q);var oe=ht(G)?Xc:gu;return oe(G,q)}function Pf(G){var q=ht(G)?Yc:yu;return q(G)}function kf(G){if(G==null)return 0;if(ar(G))return es(G)?In(G):G.length;var q=Qt(G);return q==Re||q==He?G.size:Fs(G).length}function If(G,q,ee){var oe=ht(G)?_s:xu;return ee&&er(G,q,ee)&&(q=E),oe(G,it(q,3))}var Mf=ft(function(G,q){if(G==null)return[];var ee=q.length;return ee>1&&er(G,q[0],q[1])?q=[]:ee>2&&er(q[0],q[1],q[2])&&(q=[q[0]]),Mo(G,Zt(q,1),[])}),Zi=hc||function(){return jt.Date.now()};function Nf(G,q){if(typeof q!="function")throw new xr(R);return G=ct(G),function(){if(--G<1)return q.apply(this,arguments)}}function Al(G,q,ee){return q=ee?E:q,q=G&&q==null?G.length:q,Xr(G,ie,E,E,E,E,q)}function wl(G,q){var ee;if(typeof q!="function")throw new xr(R);return G=ct(G),function(){return--G>0&&(ee=q.apply(this,arguments)),G<=1&&(q=E),ee}}var ia=ft(function(G,q,ee){var oe=Z;if(ee.length){var pe=tn(ee,Bn(ia));oe|=J}return Xr(G,oe,q,ee,pe)}),Cl=ft(function(G,q,ee){var oe=Z|X;if(ee.length){var pe=tn(ee,Bn(Cl));oe|=J}return Xr(q,oe,G,ee,pe)});function Pl(G,q,ee){q=ee?E:q;var oe=Xr(G,Y,E,E,E,E,E,q);return oe.placeholder=Pl.placeholder,oe}function kl(G,q,ee){q=ee?E:q;var oe=Xr(G,Q,E,E,E,E,E,q);return oe.placeholder=kl.placeholder,oe}function Il(G,q,ee){var oe,pe,be,Te,Se,we,$e=0,Ve=!1,ze=!1,Xe=!0;if(typeof G!="function")throw new xr(R);q=Ar(q)||0,Dt(ee)&&(Ve=!!ee.leading,ze="maxWait"in ee,be=ze?Ht(Ar(ee.maxWait)||0,q):be,Xe="trailing"in ee?!!ee.trailing:Xe);function tt(Gt){var Rr=oe,Qr=pe;return oe=pe=E,$e=Gt,Te=G.apply(Qr,Rr),Te}function st(Gt){return $e=Gt,Se=ai(_t,q),Ve?tt(Gt):Te}function ut(Gt){var Rr=Gt-we,Qr=Gt-$e,jl=q-Rr;return ze?Kt(jl,be-Qr):jl}function at(Gt){var Rr=Gt-we,Qr=Gt-$e;return we===E||Rr>=q||Rr<0||ze&&Qr>=be}function _t(){var Gt=Zi();if(at(Gt))return vt(Gt);Se=ai(_t,ut(Gt))}function vt(Gt){return Se=E,Xe&&oe?tt(Gt):(oe=pe=E,Te)}function mr(){Se!==E&&Vo(Se),$e=0,oe=we=pe=Se=E}function tr(){return Se===E?Te:vt(Zi())}function _r(){var Gt=Zi(),Rr=at(Gt);if(oe=arguments,pe=this,we=Gt,Rr){if(Se===E)return st(we);if(ze)return Vo(Se),Se=ai(_t,q),tt(we)}return Se===E&&(Se=ai(_t,q)),Te}return _r.cancel=mr,_r.flush=tr,_r}var Rf=ft(function(G,q){return yo(G,1,q)}),Ff=ft(function(G,q,ee){return yo(G,Ar(q)||0,ee)});function Of(G){return Xr(G,he)}function Ki(G,q){if(typeof G!="function"||q!=null&&typeof q!="function")throw new xr(R);var ee=function(){var oe=arguments,pe=q?q.apply(this,oe):oe[0],be=ee.cache;if(be.has(pe))return be.get(pe);var Te=G.apply(this,oe);return ee.cache=be.set(pe,Te)||be,Te};return ee.cache=new(Ki.Cache||Wr),ee}Ki.Cache=Wr;function Qi(G){if(typeof G!="function")throw new xr(R);return function(){var q=arguments;switch(q.length){case 0:return!G.call(this);case 1:return!G.call(this,q[0]);case 2:return!G.call(this,q[0],q[1]);case 3:return!G.call(this,q[0],q[1],q[2])}return!G.apply(this,q)}}function Df(G){return wl(2,G)}var Lf=bu(function(G,q){q=q.length==1&&ht(q[0])?Ft(q[0],ur(it())):Ft(Zt(q,1),ur(it()));var ee=q.length;return ft(function(oe){for(var pe=-1,be=Kt(oe.length,ee);++pe<be;)oe[pe]=q[pe].call(this,oe[pe]);return cr(G,this,oe)})}),sa=ft(function(G,q){var ee=tn(q,Bn(sa));return Xr(G,J,E,q,ee)}),Ml=ft(function(G,q){var ee=tn(q,Bn(Ml));return Xr(G,te,E,q,ee)}),Bf=Yr(function(G,q){return Xr(G,ne,E,E,E,q)});function $f(G,q){if(typeof G!="function")throw new xr(R);return q=q===E?q:ct(q),ft(G,q)}function Vf(G,q){if(typeof G!="function")throw new xr(R);return q=q==null?0:Ht(ct(q),0),ft(function(ee){var oe=ee[q],pe=on(ee,0,q);return oe&&en(pe,oe),cr(G,this,pe)})}function Gf(G,q,ee){var oe=!0,pe=!0;if(typeof G!="function")throw new xr(R);return Dt(ee)&&(oe="leading"in ee?!!ee.leading:oe,pe="trailing"in ee?!!ee.trailing:pe),Il(G,q,{leading:oe,maxWait:q,trailing:pe})}function Uf(G){return Al(G,1)}function zf(G,q){return sa(zs(q),G)}function Hf(){if(!arguments.length)return[];var G=arguments[0];return ht(G)?G:[G]}function Wf(G){return Tr(G,U)}function qf(G,q){return q=typeof q=="function"?q:E,Tr(G,U,q)}function Xf(G){return Tr(G,B|U)}function Yf(G,q){return q=typeof q=="function"?q:E,Tr(G,B|U,q)}function jf(G,q){return q==null||vo(G,q,Xt(q))}function Nr(G,q){return G===q||G!==G&&q!==q}var Zf=Hi(Ms),Kf=Hi(function(G,q){return G>=q}),En=Eo(function(){return arguments}())?Eo:function(G){return $t(G)&&Et.call(G,"callee")&&!ho.call(G,"callee")},ht=Ie.isArray,Qf=Ha?ur(Ha):iu;function ar(G){return G!=null&&Ji(G.length)&&!Zr(G)}function Vt(G){return $t(G)&&ar(G)}function Jf(G){return G===!0||G===!1||$t(G)&&Jt(G)==Oe}var ln=uc||_a,ep=Wa?ur(Wa):su;function tp(G){return $t(G)&&G.nodeType===1&&!oi(G)}function rp(G){if(G==null)return!0;if(ar(G)&&(ht(G)||typeof G=="string"||typeof G.splice=="function"||ln(G)||$n(G)||En(G)))return!G.length;var q=Qt(G);if(q==Re||q==He)return!G.size;if(si(G))return!Fs(G).length;for(var ee in G)if(Et.call(G,ee))return!1;return!0}function np(G,q){return ri(G,q)}function sp(G,q,ee){ee=typeof ee=="function"?ee:E;var oe=ee?ee(G,q):E;return oe===E?ri(G,q,E,ee):!!oe}function aa(G){if(!$t(G))return!1;var q=Jt(G);return q==qe||q==et||typeof G.message=="string"&&typeof G.name=="string"&&!oi(G)}function ap(G){return typeof G=="number"&&uo(G)}function Zr(G){if(!Dt(G))return!1;var q=Jt(G);return q==De||q==Ue||q==Me||q==Ye}function Nl(G){return typeof G=="number"&&G==ct(G)}function Ji(G){return typeof G=="number"&&G>-1&&G%1==0&&G<=se}function Dt(G){var q=typeof G;return G!=null&&(q=="object"||q=="function")}function $t(G){return G!=null&&typeof G=="object"}var Rl=qa?ur(qa):ou;function lp(G,q){return G===q||Rs(G,q,Zs(q))}function hp(G,q,ee){return ee=typeof ee=="function"?ee:E,Rs(G,q,Zs(q),ee)}function cp(G){return Fl(G)&&G!=+G}function up(G){if(Hu(G))throw new lt(I);return Ao(G)}function dp(G){return G===null}function fp(G){return G==null}function Fl(G){return typeof G=="number"||$t(G)&&Jt(G)==Ne}function oi(G){if(!$t(G)||Jt(G)!=We)return!1;var q=wi(G);if(q===null)return!0;var ee=Et.call(q,"constructor")&&q.constructor;return typeof ee=="function"&&ee instanceof ee&&Ti.call(ee)==sc}var oa=Xa?ur(Xa):lu;function pp(G){return Nl(G)&&G>=-se&&G<=se}var Ol=Ya?ur(Ya):hu;function es(G){return typeof G=="string"||!ht(G)&&$t(G)&&Jt(G)==nt}function pr(G){return typeof G=="symbol"||$t(G)&&Jt(G)==ot}var $n=ja?ur(ja):cu;function mp(G){return G===E}function _p(G){return $t(G)&&Qt(G)==dt}function gp(G){return $t(G)&&Jt(G)==yt}var vp=Hi(Os),yp=Hi(function(G,q){return G<=q});function Dl(G){if(!G)return[];if(ar(G))return es(G)?Ir(G):sr(G);if(Yn&&G[Yn])return Xh(G[Yn]());var q=Qt(G),ee=q==Re?Ts:q==He?yi:Vn;return ee(G)}function Kr(G){if(!G)return G===0?G:0;if(G=Ar(G),G===ce||G===-ce){var q=G<0?-1:1;return q*le}return G===G?G:0}function ct(G){var q=Kr(G),ee=q%1;return q===q?ee?q-ee:q:0}function Ll(G){return G?xn(ct(G),0,me):0}function Ar(G){if(typeof G=="number")return G;if(pr(G))return _e;if(Dt(G)){var q=typeof G.valueOf=="function"?G.valueOf():G;G=Dt(q)?q+"":q}if(typeof G!="string")return G===0?G:+G;G=to(G);var ee=mi.test(G);return ee||dn.test(G)?Ih(G.slice(2),ee?2:8):wn.test(G)?_e:+G}function Bl(G){return Gr(G,or(G))}function xp(G){return G?xn(ct(G),-se,se):G===0?G:0}function Tt(G){return G==null?"":dr(G)}var bp=Dn(function(G,q){if(si(q)||ar(q)){Gr(q,Xt(q),G);return}for(var ee in q)Et.call(q,ee)&&Jn(G,ee,q[ee])}),$l=Dn(function(G,q){Gr(q,or(q),G)}),ts=Dn(function(G,q,ee,oe){Gr(q,or(q),G,oe)}),Tp=Dn(function(G,q,ee,oe){Gr(q,Xt(q),G,oe)}),Sp=Yr(Ps);function Ep(G,q){var ee=On(G);return q==null?ee:go(ee,q)}var Ap=ft(function(G,q){G=Ct(G);var ee=-1,oe=q.length,pe=oe>2?q[2]:E;for(pe&&er(q[0],q[1],pe)&&(oe=1);++ee<oe;)for(var be=q[ee],Te=or(be),Se=-1,we=Te.length;++Se<we;){var $e=Te[Se],Ve=G[$e];(Ve===E||Nr(Ve,Nn[$e])&&!Et.call(G,$e))&&(G[$e]=be[$e])}return G}),wp=ft(function(G){return G.push(E,rl),cr(Vl,E,G)});function Cp(G,q){return Ka(G,it(q,3),Vr)}function Pp(G,q){return Ka(G,it(q,3),Is)}function kp(G,q){return G==null?G:ks(G,it(q,3),or)}function Ip(G,q){return G==null?G:To(G,it(q,3),or)}function Mp(G,q){return G&&Vr(G,it(q,3))}function Np(G,q){return G&&Is(G,it(q,3))}function Rp(G){return G==null?[]:Di(G,Xt(G))}function Fp(G){return G==null?[]:Di(G,or(G))}function la(G,q,ee){var oe=G==null?E:bn(G,q);return oe===E?ee:oe}function Op(G,q){return G!=null&&sl(G,q,eu)}function ha(G,q){return G!=null&&sl(G,q,tu)}var Dp=Ko(function(G,q,ee){q!=null&&typeof q.toString!="function"&&(q=Si.call(q)),G[q]=ee},ua(lr)),Lp=Ko(function(G,q,ee){q!=null&&typeof q.toString!="function"&&(q=Si.call(q)),Et.call(G,q)?G[q].push(ee):G[q]=[ee]},it),Bp=ft(ti);function Xt(G){return ar(G)?mo(G):Fs(G)}function or(G){return ar(G)?mo(G,!0):uu(G)}function $p(G,q){var ee={};return q=it(q,3),Vr(G,function(oe,pe,be){qr(ee,q(oe,pe,be),oe)}),ee}function Vp(G,q){var ee={};return q=it(q,3),Vr(G,function(oe,pe,be){qr(ee,pe,q(oe,pe,be))}),ee}var Gp=Dn(function(G,q,ee){Li(G,q,ee)}),Vl=Dn(function(G,q,ee,oe){Li(G,q,ee,oe)}),Up=Yr(function(G,q){var ee={};if(G==null)return ee;var oe=!1;q=Ft(q,function(be){return be=an(be,G),oe||(oe=be.length>1),be}),Gr(G,Ys(G),ee),oe&&(ee=Tr(ee,B|V|U,Nu));for(var pe=q.length;pe--;)Vs(ee,q[pe]);return ee});function zp(G,q){return Gl(G,Qi(it(q)))}var Hp=Yr(function(G,q){return G==null?{}:fu(G,q)});function Gl(G,q){if(G==null)return{};var ee=Ft(Ys(G),function(oe){return[oe]});return q=it(q),No(G,ee,function(oe,pe){return q(oe,pe[0])})}function Wp(G,q,ee){q=an(q,G);var oe=-1,pe=q.length;for(pe||(pe=1,G=E);++oe<pe;){var be=G==null?E:G[Ur(q[oe])];be===E&&(oe=pe,be=ee),G=Zr(be)?be.call(G):be}return G}function qp(G,q,ee){return G==null?G:ni(G,q,ee)}function Xp(G,q,ee,oe){return oe=typeof oe=="function"?oe:E,G==null?G:ni(G,q,ee,oe)}var Ul=el(Xt),zl=el(or);function Yp(G,q,ee){var oe=ht(G),pe=oe||ln(G)||$n(G);if(q=it(q,4),ee==null){var be=G&&G.constructor;pe?ee=oe?new be:[]:Dt(G)?ee=Zr(be)?On(wi(G)):{}:ee={}}return(pe?yr:Vr)(G,function(Te,Se,we){return q(ee,Te,Se,we)}),ee}function jp(G,q){return G==null?!0:Vs(G,q)}function Zp(G,q,ee){return G==null?G:Lo(G,q,zs(ee))}function Kp(G,q,ee,oe){return oe=typeof oe=="function"?oe:E,G==null?G:Lo(G,q,zs(ee),oe)}function Vn(G){return G==null?[]:bs(G,Xt(G))}function Qp(G){return G==null?[]:bs(G,or(G))}function Jp(G,q,ee){return ee===E&&(ee=q,q=E),ee!==E&&(ee=Ar(ee),ee=ee===ee?ee:0),q!==E&&(q=Ar(q),q=q===q?q:0),xn(Ar(G),q,ee)}function em(G,q,ee){return q=Kr(q),ee===E?(ee=q,q=0):ee=Kr(ee),G=Ar(G),ru(G,q,ee)}function tm(G,q,ee){if(ee&&typeof ee!="boolean"&&er(G,q,ee)&&(q=ee=E),ee===E&&(typeof q=="boolean"?(ee=q,q=E):typeof G=="boolean"&&(ee=G,G=E)),G===E&&q===E?(G=0,q=1):(G=Kr(G),q===E?(q=G,G=0):q=Kr(q)),G>q){var oe=G;G=q,q=oe}if(ee||G%1||q%1){var pe=fo();return Kt(G+pe*(q-G+kh("1e-"+((pe+"").length-1))),q)}return Ls(G,q)}var rm=Ln(function(G,q,ee){return q=q.toLowerCase(),G+(ee?Hl(q):q)});function Hl(G){return ca(Tt(G).toLowerCase())}function Wl(G){return G=Tt(G),G&&G.replace(pn,Uh).replace(yh,"")}function im(G,q,ee){G=Tt(G),q=dr(q);var oe=G.length;ee=ee===E?oe:xn(ct(ee),0,oe);var pe=ee;return ee-=q.length,ee>=0&&G.slice(ee,pe)==q}function sm(G){return G=Tt(G),G&&Cr.test(G)?G.replace(hr,zh):G}function am(G){return G=Tt(G),G&&Lr.test(G)?G.replace(mt,"\\$&"):G}var om=Ln(function(G,q,ee){return G+(ee?"-":"")+q.toLowerCase()}),lm=Ln(function(G,q,ee){return G+(ee?" ":"")+q.toLowerCase()}),hm=Yo("toLowerCase");function cm(G,q,ee){G=Tt(G),q=ct(q);var oe=q?In(G):0;if(!q||oe>=q)return G;var pe=(q-oe)/2;return zi(Ii(pe),ee)+G+zi(ki(pe),ee)}function um(G,q,ee){G=Tt(G),q=ct(q);var oe=q?In(G):0;return q&&oe<q?G+zi(q-oe,ee):G}function dm(G,q,ee){G=Tt(G),q=ct(q);var oe=q?In(G):0;return q&&oe<q?zi(q-oe,ee)+G:G}function fm(G,q,ee){return ee||q==null?q=0:q&&(q=+q),mc(Tt(G).replace(kr,""),q||0)}function pm(G,q,ee){return(ee?er(G,q,ee):q===E)?q=1:q=ct(q),Bs(Tt(G),q)}function mm(){var G=arguments,q=Tt(G[0]);return G.length<3?q:q.replace(G[1],G[2])}var _m=Ln(function(G,q,ee){return G+(ee?"_":"")+q.toLowerCase()});function gm(G,q,ee){return ee&&typeof ee!="number"&&er(G,q,ee)&&(q=ee=E),ee=ee===E?me:ee>>>0,ee?(G=Tt(G),G&&(typeof q=="string"||q!=null&&!oa(q))&&(q=dr(q),!q&&kn(G))?on(Ir(G),0,ee):G.split(q,ee)):[]}var vm=Ln(function(G,q,ee){return G+(ee?" ":"")+ca(q)});function ym(G,q,ee){return G=Tt(G),ee=ee==null?0:xn(ct(ee),0,G.length),q=dr(q),G.slice(ee,ee+q.length)==q}function xm(G,q,ee){var oe=xe.templateSettings;ee&&er(G,q,ee)&&(q=E),G=Tt(G),q=ts({},q,oe,tl);var pe=ts({},q.imports,oe.imports,tl),be=Xt(pe),Te=bs(pe,be),Se,we,$e=0,Ve=q.interpolate||Br,ze="__p += '",Xe=Ss((q.escape||Br).source+"|"+Ve.source+"|"+(Ve===Mt?pi:Br).source+"|"+(q.evaluate||Br).source+"|$","g"),tt="//# sourceURL="+(Et.call(q,"sourceURL")?(q.sourceURL+"").replace(/\s/g," "):"lodash.templateSources["+ ++Eh+"]")+`
`;G.replace(Xe,function(at,_t,vt,mr,tr,_r){return vt||(vt=mr),ze+=G.slice($e,_r).replace(mn,Hh),_t&&(Se=!0,ze+=`' +
__e(`+_t+`) +
'`),tr&&(we=!0,ze+=`';
`+tr+`;
__p += '`),vt&&(ze+=`' +
((__t = (`+vt+`)) == null ? '' : __t) +
'`),$e=_r+at.length,at}),ze+=`';
`;var st=Et.call(q,"variable")&&q.variable;if(!st)ze=`with (obj) {
`+ze+`
}
`;else if(An.test(st))throw new lt(F);ze=(we?ze.replace(Ut,""):ze).replace(rr,"$1").replace(Pt,"$1;"),ze="function("+(st||"obj")+`) {
`+(st?"":`obj || (obj = {});
`)+"var __t, __p = ''"+(Se?", __e = _.escape":"")+(we?`, __j = Array.prototype.join;
function print() { __p += __j.call(arguments, '') }
`:`;
`)+ze+`return __p
}`;var ut=Xl(function(){return bt(be,tt+"return "+ze).apply(E,Te)});if(ut.source=ze,aa(ut))throw ut;return ut}function bm(G){return Tt(G).toLowerCase()}function Tm(G){return Tt(G).toUpperCase()}function Sm(G,q,ee){if(G=Tt(G),G&&(ee||q===E))return to(G);if(!G||!(q=dr(q)))return G;var oe=Ir(G),pe=Ir(q),be=ro(oe,pe),Te=no(oe,pe)+1;return on(oe,be,Te).join("")}function Em(G,q,ee){if(G=Tt(G),G&&(ee||q===E))return G.slice(0,so(G)+1);if(!G||!(q=dr(q)))return G;var oe=Ir(G),pe=no(oe,Ir(q))+1;return on(oe,0,pe).join("")}function Am(G,q,ee){if(G=Tt(G),G&&(ee||q===E))return G.replace(kr,"");if(!G||!(q=dr(q)))return G;var oe=Ir(G),pe=ro(oe,Ir(q));return on(oe,pe).join("")}function wm(G,q){var ee=ve,oe=ye;if(Dt(q)){var pe="separator"in q?q.separator:pe;ee="length"in q?ct(q.length):ee,oe="omission"in q?dr(q.omission):oe}G=Tt(G);var be=G.length;if(kn(G)){var Te=Ir(G);be=Te.length}if(ee>=be)return G;var Se=ee-In(oe);if(Se<1)return oe;var we=Te?on(Te,0,Se).join(""):G.slice(0,Se);if(pe===E)return we+oe;if(Te&&(Se+=we.length-Se),oa(pe)){if(G.slice(Se).search(pe)){var $e,Ve=we;for(pe.global||(pe=Ss(pe.source,Tt(qn.exec(pe))+"g")),pe.lastIndex=0;$e=pe.exec(Ve);)var ze=$e.index;we=we.slice(0,ze===E?Se:ze)}}else if(G.indexOf(dr(pe),Se)!=Se){var Xe=we.lastIndexOf(pe);Xe>-1&&(we=we.slice(0,Xe))}return we+oe}function Cm(G){return G=Tt(G),G&&wr.test(G)?G.replace(Bt,Kh):G}var Pm=Ln(function(G,q,ee){return G+(ee?" ":"")+q.toUpperCase()}),ca=Yo("toUpperCase");function ql(G,q,ee){return G=Tt(G),q=ee?E:q,q===E?qh(G)?ec(G):Lh(G):G.match(q)||[]}var Xl=ft(function(G,q){try{return cr(G,E,q)}catch(ee){return aa(ee)?ee:new lt(ee)}}),km=Yr(function(G,q){return yr(q,function(ee){ee=Ur(ee),qr(G,ee,ia(G[ee],G))}),G});function Im(G){var q=G==null?0:G.length,ee=it();return G=q?Ft(G,function(oe){if(typeof oe[1]!="function")throw new xr(R);return[ee(oe[0]),oe[1]]}):[],ft(function(oe){for(var pe=-1;++pe<q;){var be=G[pe];if(cr(be[0],this,oe))return cr(be[1],this,oe)}})}function Mm(G){return Kc(Tr(G,B))}function ua(G){return function(){return G}}function Nm(G,q){return G==null||G!==G?q:G}var Rm=Zo(),Fm=Zo(!0);function lr(G){return G}function da(G){return wo(typeof G=="function"?G:Tr(G,B))}function Om(G){return Po(Tr(G,B))}function Dm(G,q){return ko(G,Tr(q,B))}var Lm=ft(function(G,q){return function(ee){return ti(ee,G,q)}}),Bm=ft(function(G,q){return function(ee){return ti(G,ee,q)}});function fa(G,q,ee){var oe=Xt(q),pe=Di(q,oe);ee==null&&!(Dt(q)&&(pe.length||!oe.length))&&(ee=q,q=G,G=this,pe=Di(q,Xt(q)));var be=!(Dt(ee)&&"chain"in ee)||!!ee.chain,Te=Zr(G);return yr(pe,function(Se){var we=q[Se];G[Se]=we,Te&&(G.prototype[Se]=function(){var $e=this.__chain__;if(be||$e){var Ve=G(this.__wrapped__),ze=Ve.__actions__=sr(this.__actions__);return ze.push({func:we,args:arguments,thisArg:G}),Ve.__chain__=$e,Ve}return we.apply(G,en([this.value()],arguments))})}),G}function $m(){return jt._===this&&(jt._=ac),this}function pa(){}function Vm(G){return G=ct(G),ft(function(q){return Io(q,G)})}var Gm=Ws(Ft),Um=Ws(Za),zm=Ws(_s);function Yl(G){return Qs(G)?gs(Ur(G)):pu(G)}function Hm(G){return function(q){return G==null?E:bn(G,q)}}var Wm=Qo(),qm=Qo(!0);function ma(){return[]}function _a(){return!1}function Xm(){return{}}function Ym(){return""}function jm(){return!0}function Zm(G,q){if(G=ct(G),G<1||G>se)return[];var ee=me,oe=Kt(G,me);q=it(q),G-=me;for(var pe=xs(oe,q);++ee<G;)q(ee);return pe}function Km(G){return ht(G)?Ft(G,Ur):pr(G)?[G]:sr(pl(Tt(G)))}function Qm(G){var q=++ic;return Tt(G)+q}var Jm=Ui(function(G,q){return G+q},0),e_=qs("ceil"),t_=Ui(function(G,q){return G/q},1),r_=qs("floor");function n_(G){return G&&G.length?Oi(G,lr,Ms):E}function i_(G,q){return G&&G.length?Oi(G,it(q,2),Ms):E}function s_(G){return Ja(G,lr)}function a_(G,q){return Ja(G,it(q,2))}function o_(G){return G&&G.length?Oi(G,lr,Os):E}function l_(G,q){return G&&G.length?Oi(G,it(q,2),Os):E}var h_=Ui(function(G,q){return G*q},1),c_=qs("round"),u_=Ui(function(G,q){return G-q},0);function d_(G){return G&&G.length?ys(G,lr):0}function f_(G,q){return G&&G.length?ys(G,it(q,2)):0}return xe.after=Nf,xe.ary=Al,xe.assign=bp,xe.assignIn=$l,xe.assignInWith=ts,xe.assignWith=Tp,xe.at=Sp,xe.before=wl,xe.bind=ia,xe.bindAll=km,xe.bindKey=Cl,xe.castArray=Hf,xe.chain=Tl,xe.chunk=Ku,xe.compact=Qu,xe.concat=Ju,xe.cond=Im,xe.conforms=Mm,xe.constant=ua,xe.countBy=hf,xe.create=Ep,xe.curry=Pl,xe.curryRight=kl,xe.debounce=Il,xe.defaults=Ap,xe.defaultsDeep=wp,xe.defer=Rf,xe.delay=Ff,xe.difference=ed,xe.differenceBy=td,xe.differenceWith=rd,xe.drop=nd,xe.dropRight=sd,xe.dropRightWhile=ad,xe.dropWhile=od,xe.fill=ld,xe.filter=uf,xe.flatMap=pf,xe.flatMapDeep=mf,xe.flatMapDepth=_f,xe.flatten=vl,xe.flattenDeep=hd,xe.flattenDepth=cd,xe.flip=Of,xe.flow=Rm,xe.flowRight=Fm,xe.fromPairs=ud,xe.functions=Rp,xe.functionsIn=Fp,xe.groupBy=gf,xe.initial=fd,xe.intersection=pd,xe.intersectionBy=md,xe.intersectionWith=_d,xe.invert=Dp,xe.invertBy=Lp,xe.invokeMap=yf,xe.iteratee=da,xe.keyBy=xf,xe.keys=Xt,xe.keysIn=or,xe.map=ji,xe.mapKeys=$p,xe.mapValues=Vp,xe.matches=Om,xe.matchesProperty=Dm,xe.memoize=Ki,xe.merge=Gp,xe.mergeWith=Vl,xe.method=Lm,xe.methodOf=Bm,xe.mixin=fa,xe.negate=Qi,xe.nthArg=Vm,xe.omit=Up,xe.omitBy=zp,xe.once=Df,xe.orderBy=bf,xe.over=Gm,xe.overArgs=Lf,xe.overEvery=Um,xe.overSome=zm,xe.partial=sa,xe.partialRight=Ml,xe.partition=Tf,xe.pick=Hp,xe.pickBy=Gl,xe.property=Yl,xe.propertyOf=Hm,xe.pull=xd,xe.pullAll=xl,xe.pullAllBy=bd,xe.pullAllWith=Td,xe.pullAt=Sd,xe.range=Wm,xe.rangeRight=qm,xe.rearg=Bf,xe.reject=Af,xe.remove=Ed,xe.rest=$f,xe.reverse=ra,xe.sampleSize=Cf,xe.set=qp,xe.setWith=Xp,xe.shuffle=Pf,xe.slice=Ad,xe.sortBy=Mf,xe.sortedUniq=Nd,xe.sortedUniqBy=Rd,xe.split=gm,xe.spread=Vf,xe.tail=Fd,xe.take=Od,xe.takeRight=Dd,xe.takeRightWhile=Ld,xe.takeWhile=Bd,xe.tap=Jd,xe.throttle=Gf,xe.thru=Yi,xe.toArray=Dl,xe.toPairs=Ul,xe.toPairsIn=zl,xe.toPath=Km,xe.toPlainObject=Bl,xe.transform=Yp,xe.unary=Uf,xe.union=$d,xe.unionBy=Vd,xe.unionWith=Gd,xe.uniq=Ud,xe.uniqBy=zd,xe.uniqWith=Hd,xe.unset=jp,xe.unzip=na,xe.unzipWith=bl,xe.update=Zp,xe.updateWith=Kp,xe.values=Vn,xe.valuesIn=Qp,xe.without=Wd,xe.words=ql,xe.wrap=zf,xe.xor=qd,xe.xorBy=Xd,xe.xorWith=Yd,xe.zip=jd,xe.zipObject=Zd,xe.zipObjectDeep=Kd,xe.zipWith=Qd,xe.entries=Ul,xe.entriesIn=zl,xe.extend=$l,xe.extendWith=ts,fa(xe,xe),xe.add=Jm,xe.attempt=Xl,xe.camelCase=rm,xe.capitalize=Hl,xe.ceil=e_,xe.clamp=Jp,xe.clone=Wf,xe.cloneDeep=Xf,xe.cloneDeepWith=Yf,xe.cloneWith=qf,xe.conformsTo=jf,xe.deburr=Wl,xe.defaultTo=Nm,xe.divide=t_,xe.endsWith=im,xe.eq=Nr,xe.escape=sm,xe.escapeRegExp=am,xe.every=cf,xe.find=df,xe.findIndex=_l,xe.findKey=Cp,xe.findLast=ff,xe.findLastIndex=gl,xe.findLastKey=Pp,xe.floor=r_,xe.forEach=Sl,xe.forEachRight=El,xe.forIn=kp,xe.forInRight=Ip,xe.forOwn=Mp,xe.forOwnRight=Np,xe.get=la,xe.gt=Zf,xe.gte=Kf,xe.has=Op,xe.hasIn=ha,xe.head=yl,xe.identity=lr,xe.includes=vf,xe.indexOf=dd,xe.inRange=em,xe.invoke=Bp,xe.isArguments=En,xe.isArray=ht,xe.isArrayBuffer=Qf,xe.isArrayLike=ar,xe.isArrayLikeObject=Vt,xe.isBoolean=Jf,xe.isBuffer=ln,xe.isDate=ep,xe.isElement=tp,xe.isEmpty=rp,xe.isEqual=np,xe.isEqualWith=sp,xe.isError=aa,xe.isFinite=ap,xe.isFunction=Zr,xe.isInteger=Nl,xe.isLength=Ji,xe.isMap=Rl,xe.isMatch=lp,xe.isMatchWith=hp,xe.isNaN=cp,xe.isNative=up,xe.isNil=fp,xe.isNull=dp,xe.isNumber=Fl,xe.isObject=Dt,xe.isObjectLike=$t,xe.isPlainObject=oi,xe.isRegExp=oa,xe.isSafeInteger=pp,xe.isSet=Ol,xe.isString=es,xe.isSymbol=pr,xe.isTypedArray=$n,xe.isUndefined=mp,xe.isWeakMap=_p,xe.isWeakSet=gp,xe.join=gd,xe.kebabCase=om,xe.last=Er,xe.lastIndexOf=vd,xe.lowerCase=lm,xe.lowerFirst=hm,xe.lt=vp,xe.lte=yp,xe.max=n_,xe.maxBy=i_,xe.mean=s_,xe.meanBy=a_,xe.min=o_,xe.minBy=l_,xe.stubArray=ma,xe.stubFalse=_a,xe.stubObject=Xm,xe.stubString=Ym,xe.stubTrue=jm,xe.multiply=h_,xe.nth=yd,xe.noConflict=$m,xe.noop=pa,xe.now=Zi,xe.pad=cm,xe.padEnd=um,xe.padStart=dm,xe.parseInt=fm,xe.random=tm,xe.reduce=Sf,xe.reduceRight=Ef,xe.repeat=pm,xe.replace=mm,xe.result=Wp,xe.round=c_,xe.runInContext=Ae,xe.sample=wf,xe.size=kf,xe.snakeCase=_m,xe.some=If,xe.sortedIndex=wd,xe.sortedIndexBy=Cd,xe.sortedIndexOf=Pd,xe.sortedLastIndex=kd,xe.sortedLastIndexBy=Id,xe.sortedLastIndexOf=Md,xe.startCase=vm,xe.startsWith=ym,xe.subtract=u_,xe.sum=d_,xe.sumBy=f_,xe.template=xm,xe.times=Zm,xe.toFinite=Kr,xe.toInteger=ct,xe.toLength=Ll,xe.toLower=bm,xe.toNumber=Ar,xe.toSafeInteger=xp,xe.toString=Tt,xe.toUpper=Tm,xe.trim=Sm,xe.trimEnd=Em,xe.trimStart=Am,xe.truncate=wm,xe.unescape=Cm,xe.uniqueId=Qm,xe.upperCase=Pm,xe.upperFirst=ca,xe.each=Sl,xe.eachRight=El,xe.first=yl,fa(xe,function(){var G={};return Vr(xe,function(q,ee){Et.call(xe.prototype,ee)||(G[ee]=q)}),G}(),{chain:!1}),xe.VERSION=C,yr(["bind","bindKey","curry","curryRight","partial","partialRight"],function(G){xe[G].placeholder=xe}),yr(["drop","take"],function(G,q){gt.prototype[G]=function(ee){ee=ee===E?1:Ht(ct(ee),0);var oe=this.__filtered__&&!q?new gt(this):this.clone();return oe.__filtered__?oe.__takeCount__=Kt(ee,oe.__takeCount__):oe.__views__.push({size:Kt(ee,me),type:G+(oe.__dir__<0?"Right":"")}),oe},gt.prototype[G+"Right"]=function(ee){return this.reverse()[G](ee).reverse()}}),yr(["filter","map","takeWhile"],function(G,q){var ee=q+1,oe=ee==ue||ee==ae;gt.prototype[G]=function(pe){var be=this.clone();return be.__iteratees__.push({iteratee:it(pe,3),type:ee}),be.__filtered__=be.__filtered__||oe,be}}),yr(["head","last"],function(G,q){var ee="take"+(q?"Right":"");gt.prototype[G]=function(){return this[ee](1).value()[0]}}),yr(["initial","tail"],function(G,q){var ee="drop"+(q?"":"Right");gt.prototype[G]=function(){return this.__filtered__?new gt(this):this[ee](1)}}),gt.prototype.compact=function(){return this.filter(lr)},gt.prototype.find=function(G){return this.filter(G).head()},gt.prototype.findLast=function(G){return this.reverse().find(G)},gt.prototype.invokeMap=ft(function(G,q){return typeof G=="function"?new gt(this):this.map(function(ee){return ti(ee,G,q)})}),gt.prototype.reject=function(G){return this.filter(Qi(it(G)))},gt.prototype.slice=function(G,q){G=ct(G);var ee=this;return ee.__filtered__&&(G>0||q<0)?new gt(ee):(G<0?ee=ee.takeRight(-G):G&&(ee=ee.drop(G)),q!==E&&(q=ct(q),ee=q<0?ee.dropRight(-q):ee.take(q-G)),ee)},gt.prototype.takeRightWhile=function(G){return this.reverse().takeWhile(G).reverse()},gt.prototype.toArray=function(){return this.take(me)},Vr(gt.prototype,function(G,q){var ee=/^(?:filter|find|map|reject)|While$/.test(q),oe=/^(?:head|last)$/.test(q),pe=xe[oe?"take"+(q=="last"?"Right":""):q],be=oe||/^find/.test(q);pe&&(xe.prototype[q]=function(){var Te=this.__wrapped__,Se=oe?[1]:arguments,we=Te instanceof gt,$e=Se[0],Ve=we||ht(Te),ze=function(_t){var vt=pe.apply(xe,en([_t],Se));return oe&&Xe?vt[0]:vt};Ve&&ee&&typeof $e=="function"&&$e.length!=1&&(we=Ve=!1);var Xe=this.__chain__,tt=!!this.__actions__.length,st=be&&!Xe,ut=we&&!tt;if(!be&&Ve){Te=ut?Te:new gt(this);var at=G.apply(Te,Se);return at.__actions__.push({func:Yi,args:[ze],thisArg:E}),new br(at,Xe)}return st&&ut?G.apply(this,Se):(at=this.thru(ze),st?oe?at.value()[0]:at.value():at)})}),yr(["pop","push","shift","sort","splice","unshift"],function(G){var q=xi[G],ee=/^(?:push|sort|unshift)$/.test(G)?"tap":"thru",oe=/^(?:pop|shift)$/.test(G);xe.prototype[G]=function(){var pe=arguments;if(oe&&!this.__chain__){var be=this.value();return q.apply(ht(be)?be:[],pe)}return this[ee](function(Te){return q.apply(ht(Te)?Te:[],pe)})}}),Vr(gt.prototype,function(G,q){var ee=xe[q];if(ee){var oe=ee.name+"";Et.call(Fn,oe)||(Fn[oe]=[]),Fn[oe].push({name:q,func:ee})}}),Fn[Gi(E,X).name]=[{name:"wrapper",func:E}],gt.prototype.clone=Tc,gt.prototype.reverse=Sc,gt.prototype.value=Ec,xe.prototype.at=ef,xe.prototype.chain=tf,xe.prototype.commit=rf,xe.prototype.next=nf,xe.prototype.plant=af,xe.prototype.reverse=of,xe.prototype.toJSON=xe.prototype.valueOf=xe.prototype.value=lf,xe.prototype.first=xe.prototype.head,Yn&&(xe.prototype[Yn]=sf),xe},Mn=tc();_n?((_n.exports=Mn)._=Mn,ds._=Mn):jt._=Mn}).call(commonjsGlobal)})(lodash,lodash.exports);var lodashExports=lodash.exports;const _=getDefaultExportFromCjs(lodashExports),app=writable$1(),width=writable$1(100),height=writable$1(100),pixelRatio=writable$1(1),figureWidth=writable$1(0),figureHeight=writable$1(0),hoveredFilter=writable$1({active:!1}),hovered=writable$1(),complexityOn=writable$1(!1),linkClientOn=writable$1(!1),linkProjectOn=writable$1(!1),isSwitchingLayout=writable$1(!1),clients=writable$1([]),projects=writable$1([]),categories=writable$1([]),sortBy=writable$1("dt"),fyears=writable$1(),fdesigns=writable$1([]),fgoals=writable$1([]),findustries=writable$1([]),fproducts=writable$1([]),selected=writable$1(),categoriesEnriched=writable$1(),nodeSize=derived([width],([A])=>A<768?30:Math.round(.01*A+12.5)),lineWidth=derived([nodeSize],([A])=>Math.max(1,Math.round(A/25))),gap=derived(nodeSize,A=>A*.9);function randomDensity(A,T=100,E=!0){const C=Array.from({length:T},int(A));let I=bin().thresholds(range$2(A))(C).map(R=>R.length/T);if(E){const R=max$1(I);I=I.map(F=>+(F/R).toFixed(1))}return I}function makeSectorData(A,T,E){const C=U=>U[T],P=Array.from(new Set(A.map(C))).sort(ascending$1);let I=0,R=0,F=0;const O=[];A.sort((U,z)=>ascending$1(C(U),C(z)||U.i-z.i)).forEach(U=>{const z=P.indexOf(C(U));(I!==z||F===E)&&(R+=1,F=0),O.push({id:U.id,sectorIndex:z,pileIndex:R,inPileIndex:F,sectorName:`${P[z]}`}),F++,I=z});const D=P.length,L=D===1?0:D+1,B=max$1(O,U=>U.pileIndex),V={nGaps:L,nPiles:B,sectorNames:P.map(U=>`${U}`)};return[O,V]}function _assertThisInitialized(A){if(A===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return A}function _inheritsLoose(A,T){A.prototype=Object.create(T.prototype),A.prototype.constructor=A,A.__proto__=T}/*!
 * GSAP 3.12.5
 * https://gsap.com
 *
 * @license Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _config={autoSleep:120,force3D:"auto",nullTargetWarn:1,units:{lineHeight:""}},_defaults={duration:.5,overwrite:!1,delay:0},_suppressOverwrites,_reverting$1,_context,_bigNum$1=1e8,_tinyNum=1/_bigNum$1,_2PI=Math.PI*2,_HALF_PI=_2PI/4,_gsID=0,_sqrt=Math.sqrt,_cos=Math.cos,_sin=Math.sin,_isString=function(T){return typeof T=="string"},_isFunction=function(T){return typeof T=="function"},_isNumber=function(T){return typeof T=="number"},_isUndefined=function(T){return typeof T>"u"},_isObject=function(T){return typeof T=="object"},_isNotFalse=function(T){return T!==!1},_windowExists$1=function(){return typeof window<"u"},_isFuncOrString=function(T){return _isFunction(T)||_isString(T)},_isTypedArray=typeof ArrayBuffer=="function"&&ArrayBuffer.isView||function(){},_isArray=Array.isArray,_strictNumExp=/(?:-?\.?\d|\.)+/gi,_numExp=/[-+=.]*\d+[.e\-+]*\d*[e\-+]*\d*/g,_numWithUnitExp=/[-+=.]*\d+[.e-]*\d*[a-z%]*/g,_complexStringNumExp=/[-+=.]*\d+\.?\d*(?:e-|e\+)?\d*/gi,_relExp=/[+-]=-?[.\d]+/,_delimitedValueExp=/[^,'"\[\]\s]+/gi,_unitExp=/^[+\-=e\s\d]*\d+[.\d]*([a-z]*|%)\s*$/i,_globalTimeline,_win$1,_coreInitted,_doc$1,_globals={},_installScope={},_coreReady,_install=function(T){return(_installScope=_merge(T,_globals))&&gsap},_missingPlugin=function(T,E){return console.warn("Invalid property",T,"set to",E,"Missing plugin? gsap.registerPlugin()")},_warn=function(T,E){return!E&&console.warn(T)},_addGlobal=function(T,E){return T&&(_globals[T]=E)&&_installScope&&(_installScope[T]=E)||_globals},_emptyFunc=function(){return 0},_startAtRevertConfig={suppressEvents:!0,isStart:!0,kill:!1},_revertConfigNoKill={suppressEvents:!0,kill:!1},_revertConfig={suppressEvents:!0},_reservedProps={},_lazyTweens=[],_lazyLookup={},_lastRenderedFrame,_plugins={},_effects={},_nextGCFrame=30,_harnessPlugins=[],_callbackNames="",_harness=function(T){var E=T[0],C,P;if(_isObject(E)||_isFunction(E)||(T=[T]),!(C=(E._gsap||{}).harness)){for(P=_harnessPlugins.length;P--&&!_harnessPlugins[P].targetTest(E););C=_harnessPlugins[P]}for(P=T.length;P--;)T[P]&&(T[P]._gsap||(T[P]._gsap=new GSCache(T[P],C)))||T.splice(P,1);return T},_getCache=function(T){return T._gsap||_harness(toArray(T))[0]._gsap},_getProperty=function(T,E,C){return(C=T[E])&&_isFunction(C)?T[E]():_isUndefined(C)&&T.getAttribute&&T.getAttribute(E)||C},_forEachName=function(T,E){return(T=T.split(",")).forEach(E)||T},_round=function(T){return Math.round(T*1e5)/1e5||0},_roundPrecise=function(T){return Math.round(T*1e7)/1e7||0},_parseRelative=function(T,E){var C=E.charAt(0),P=parseFloat(E.substr(2));return T=parseFloat(T),C==="+"?T+P:C==="-"?T-P:C==="*"?T*P:T/P},_arrayContainsAny=function(T,E){for(var C=E.length,P=0;T.indexOf(E[P])<0&&++P<C;);return P<C},_lazyRender=function(){var T=_lazyTweens.length,E=_lazyTweens.slice(0),C,P;for(_lazyLookup={},_lazyTweens.length=0,C=0;C<T;C++)P=E[C],P&&P._lazy&&(P.render(P._lazy[0],P._lazy[1],!0)._lazy=0)},_lazySafeRender=function(T,E,C,P){_lazyTweens.length&&!_reverting$1&&_lazyRender(),T.render(E,C,_reverting$1&&E<0&&(T._initted||T._startAt)),_lazyTweens.length&&!_reverting$1&&_lazyRender()},_numericIfPossible=function(T){var E=parseFloat(T);return(E||E===0)&&(T+"").match(_delimitedValueExp).length<2?E:_isString(T)?T.trim():T},_passThrough=function(T){return T},_setDefaults=function(T,E){for(var C in E)C in T||(T[C]=E[C]);return T},_setKeyframeDefaults=function(T){return function(E,C){for(var P in C)P in E||P==="duration"&&T||P==="ease"||(E[P]=C[P])}},_merge=function(T,E){for(var C in E)T[C]=E[C];return T},_mergeDeep=function A(T,E){for(var C in E)C!=="__proto__"&&C!=="constructor"&&C!=="prototype"&&(T[C]=_isObject(E[C])?A(T[C]||(T[C]={}),E[C]):E[C]);return T},_copyExcluding=function(T,E){var C={},P;for(P in T)P in E||(C[P]=T[P]);return C},_inheritDefaults=function(T){var E=T.parent||_globalTimeline,C=T.keyframes?_setKeyframeDefaults(_isArray(T.keyframes)):_setDefaults;if(_isNotFalse(T.inherit))for(;E;)C(T,E.vars.defaults),E=E.parent||E._dp;return T},_arraysMatch=function(T,E){for(var C=T.length,P=C===E.length;P&&C--&&T[C]===E[C];);return C<0},_addLinkedListItem=function(T,E,C,P,I){var R=T[P],F;if(I)for(F=E[I];R&&R[I]>F;)R=R._prev;return R?(E._next=R._next,R._next=E):(E._next=T[C],T[C]=E),E._next?E._next._prev=E:T[P]=E,E._prev=R,E.parent=E._dp=T,E},_removeLinkedListItem=function(T,E,C,P){C===void 0&&(C="_first"),P===void 0&&(P="_last");var I=E._prev,R=E._next;I?I._next=R:T[C]===E&&(T[C]=R),R?R._prev=I:T[P]===E&&(T[P]=I),E._next=E._prev=E.parent=null},_removeFromParent=function(T,E){T.parent&&(!E||T.parent.autoRemoveChildren)&&T.parent.remove&&T.parent.remove(T),T._act=0},_uncache=function(T,E){if(T&&(!E||E._end>T._dur||E._start<0))for(var C=T;C;)C._dirty=1,C=C.parent;return T},_recacheAncestors=function(T){for(var E=T.parent;E&&E.parent;)E._dirty=1,E.totalDuration(),E=E.parent;return T},_rewindStartAt=function(T,E,C,P){return T._startAt&&(_reverting$1?T._startAt.revert(_revertConfigNoKill):T.vars.immediateRender&&!T.vars.autoRevert||T._startAt.render(E,!0,P))},_hasNoPausedAncestors=function A(T){return!T||T._ts&&A(T.parent)},_elapsedCycleDuration=function(T){return T._repeat?_animationCycle(T._tTime,T=T.duration()+T._rDelay)*T:0},_animationCycle=function(T,E){var C=Math.floor(T/=E);return T&&C===T?C-1:C},_parentToChildTotalTime=function(T,E){return(T-E._start)*E._ts+(E._ts>=0?0:E._dirty?E.totalDuration():E._tDur)},_setEnd=function(T){return T._end=_roundPrecise(T._start+(T._tDur/Math.abs(T._ts||T._rts||_tinyNum)||0))},_alignPlayhead=function(T,E){var C=T._dp;return C&&C.smoothChildTiming&&T._ts&&(T._start=_roundPrecise(C._time-(T._ts>0?E/T._ts:((T._dirty?T.totalDuration():T._tDur)-E)/-T._ts)),_setEnd(T),C._dirty||_uncache(C,T)),T},_postAddChecks=function(T,E){var C;if((E._time||!E._dur&&E._initted||E._start<T._time&&(E._dur||!E.add))&&(C=_parentToChildTotalTime(T.rawTime(),E),(!E._dur||_clamp(0,E.totalDuration(),C)-E._tTime>_tinyNum)&&E.render(C,!0)),_uncache(T,E)._dp&&T._initted&&T._time>=T._dur&&T._ts){if(T._dur<T.duration())for(C=T;C._dp;)C.rawTime()>=0&&C.totalTime(C._tTime),C=C._dp;T._zTime=-_tinyNum}},_addToTimeline=function(T,E,C,P){return E.parent&&_removeFromParent(E),E._start=_roundPrecise((_isNumber(C)?C:C||T!==_globalTimeline?_parsePosition(T,C,E):T._time)+E._delay),E._end=_roundPrecise(E._start+(E.totalDuration()/Math.abs(E.timeScale())||0)),_addLinkedListItem(T,E,"_first","_last",T._sort?"_start":0),_isFromOrFromStart(E)||(T._recent=E),P||_postAddChecks(T,E),T._ts<0&&_alignPlayhead(T,T._tTime),T},_scrollTrigger=function(T,E){return(_globals.ScrollTrigger||_missingPlugin("scrollTrigger",E))&&_globals.ScrollTrigger.create(E,T)},_attemptInitTween=function(T,E,C,P,I){if(_initTween(T,E,I),!T._initted)return 1;if(!C&&T._pt&&!_reverting$1&&(T._dur&&T.vars.lazy!==!1||!T._dur&&T.vars.lazy)&&_lastRenderedFrame!==_ticker.frame)return _lazyTweens.push(T),T._lazy=[I,P],1},_parentPlayheadIsBeforeStart=function A(T){var E=T.parent;return E&&E._ts&&E._initted&&!E._lock&&(E.rawTime()<0||A(E))},_isFromOrFromStart=function(T){var E=T.data;return E==="isFromStart"||E==="isStart"},_renderZeroDurationTween=function(T,E,C,P){var I=T.ratio,R=E<0||!E&&(!T._start&&_parentPlayheadIsBeforeStart(T)&&!(!T._initted&&_isFromOrFromStart(T))||(T._ts<0||T._dp._ts<0)&&!_isFromOrFromStart(T))?0:1,F=T._rDelay,O=0,D,L,B;if(F&&T._repeat&&(O=_clamp(0,T._tDur,E),L=_animationCycle(O,F),T._yoyo&&L&1&&(R=1-R),L!==_animationCycle(T._tTime,F)&&(I=1-R,T.vars.repeatRefresh&&T._initted&&T.invalidate())),R!==I||_reverting$1||P||T._zTime===_tinyNum||!E&&T._zTime){if(!T._initted&&_attemptInitTween(T,E,P,C,O))return;for(B=T._zTime,T._zTime=E||(C?_tinyNum:0),C||(C=E&&!B),T.ratio=R,T._from&&(R=1-R),T._time=0,T._tTime=O,D=T._pt;D;)D.r(R,D.d),D=D._next;E<0&&_rewindStartAt(T,E,C,!0),T._onUpdate&&!C&&_callback(T,"onUpdate"),O&&T._repeat&&!C&&T.parent&&_callback(T,"onRepeat"),(E>=T._tDur||E<0)&&T.ratio===R&&(R&&_removeFromParent(T,1),!C&&!_reverting$1&&(_callback(T,R?"onComplete":"onReverseComplete",!0),T._prom&&T._prom()))}else T._zTime||(T._zTime=E)},_findNextPauseTween=function(T,E,C){var P;if(C>E)for(P=T._first;P&&P._start<=C;){if(P.data==="isPause"&&P._start>E)return P;P=P._next}else for(P=T._last;P&&P._start>=C;){if(P.data==="isPause"&&P._start<E)return P;P=P._prev}},_setDuration=function(T,E,C,P){var I=T._repeat,R=_roundPrecise(E)||0,F=T._tTime/T._tDur;return F&&!P&&(T._time*=R/T._dur),T._dur=R,T._tDur=I?I<0?1e10:_roundPrecise(R*(I+1)+T._rDelay*I):R,F>0&&!P&&_alignPlayhead(T,T._tTime=T._tDur*F),T.parent&&_setEnd(T),C||_uncache(T.parent,T),T},_onUpdateTotalDuration=function(T){return T instanceof Timeline$1?_uncache(T):_setDuration(T,T._dur)},_zeroPosition={_start:0,endTime:_emptyFunc,totalDuration:_emptyFunc},_parsePosition=function A(T,E,C){var P=T.labels,I=T._recent||_zeroPosition,R=T.duration()>=_bigNum$1?I.endTime(!1):T._dur,F,O,D;return _isString(E)&&(isNaN(E)||E in P)?(O=E.charAt(0),D=E.substr(-1)==="%",F=E.indexOf("="),O==="<"||O===">"?(F>=0&&(E=E.replace(/=/,"")),(O==="<"?I._start:I.endTime(I._repeat>=0))+(parseFloat(E.substr(1))||0)*(D?(F<0?I:C).totalDuration()/100:1)):F<0?(E in P||(P[E]=R),P[E]):(O=parseFloat(E.charAt(F-1)+E.substr(F+1)),D&&C&&(O=O/100*(_isArray(C)?C[0]:C).totalDuration()),F>1?A(T,E.substr(0,F-1),C)+O:R+O)):E==null?R:+E},_createTweenType=function(T,E,C){var P=_isNumber(E[1]),I=(P?2:1)+(T<2?0:1),R=E[I],F,O;if(P&&(R.duration=E[1]),R.parent=C,T){for(F=R,O=C;O&&!("immediateRender"in F);)F=O.vars.defaults||{},O=_isNotFalse(O.vars.inherit)&&O.parent;R.immediateRender=_isNotFalse(F.immediateRender),T<2?R.runBackwards=1:R.startAt=E[I-1]}return new Tween(E[0],R,E[I+1])},_conditionalReturn=function(T,E){return T||T===0?E(T):E},_clamp=function(T,E,C){return C<T?T:C>E?E:C},getUnit=function(T,E){return!_isString(T)||!(E=_unitExp.exec(T))?"":E[1]},clamp$1=function(T,E,C){return _conditionalReturn(C,function(P){return _clamp(T,E,P)})},_slice=[].slice,_isArrayLike=function(T,E){return T&&_isObject(T)&&"length"in T&&(!E&&!T.length||T.length-1 in T&&_isObject(T[0]))&&!T.nodeType&&T!==_win$1},_flatten=function(T,E,C){return C===void 0&&(C=[]),T.forEach(function(P){var I;return _isString(P)&&!E||_isArrayLike(P,1)?(I=C).push.apply(I,toArray(P)):C.push(P)})||C},toArray=function(T,E,C){return _context&&!E&&_context.selector?_context.selector(T):_isString(T)&&!C&&(_coreInitted||!_wake())?_slice.call((E||_doc$1).querySelectorAll(T),0):_isArray(T)?_flatten(T,C):_isArrayLike(T)?_slice.call(T,0):T?[T]:[]},selector=function(T){return T=toArray(T)[0]||_warn("Invalid scope")||{},function(E){var C=T.current||T.nativeElement||T;return toArray(E,C.querySelectorAll?C:C===T?_warn("Invalid scope")||_doc$1.createElement("div"):T)}},shuffle=function(T){return T.sort(function(){return .5-Math.random()})},distribute=function(T){if(_isFunction(T))return T;var E=_isObject(T)?T:{each:T},C=_parseEase(E.ease),P=E.from||0,I=parseFloat(E.base)||0,R={},F=P>0&&P<1,O=isNaN(P)||F,D=E.axis,L=P,B=P;return _isString(P)?L=B={center:.5,edges:.5,end:1}[P]||0:!F&&O&&(L=P[0],B=P[1]),function(V,U,z){var W=(z||E).length,Z=R[W],X,K,Y,Q,J,te,ie,ne,he;if(!Z){if(he=E.grid==="auto"?0:(E.grid||[1,_bigNum$1])[1],!he){for(ie=-_bigNum$1;ie<(ie=z[he++].getBoundingClientRect().left)&&he<W;);he<W&&he--}for(Z=R[W]=[],X=O?Math.min(he,W)*L-.5:P%he,K=he===_bigNum$1?0:O?W*B/he-.5:P/he|0,ie=0,ne=_bigNum$1,te=0;te<W;te++)Y=te%he-X,Q=K-(te/he|0),Z[te]=J=D?Math.abs(D==="y"?Q:Y):_sqrt(Y*Y+Q*Q),J>ie&&(ie=J),J<ne&&(ne=J);P==="random"&&shuffle(Z),Z.max=ie-ne,Z.min=ne,Z.v=W=(parseFloat(E.amount)||parseFloat(E.each)*(he>W?W-1:D?D==="y"?W/he:he:Math.max(he,W/he))||0)*(P==="edges"?-1:1),Z.b=W<0?I-W:I,Z.u=getUnit(E.amount||E.each)||0,C=C&&W<0?_invertEase(C):C}return W=(Z[V]-Z.min)/Z.max||0,_roundPrecise(Z.b+(C?C(W):W)*Z.v)+Z.u}},_roundModifier=function(T){var E=Math.pow(10,((T+"").split(".")[1]||"").length);return function(C){var P=_roundPrecise(Math.round(parseFloat(C)/T)*T*E);return(P-P%1)/E+(_isNumber(C)?0:getUnit(C))}},snap=function(T,E){var C=_isArray(T),P,I;return!C&&_isObject(T)&&(P=C=T.radius||_bigNum$1,T.values?(T=toArray(T.values),(I=!_isNumber(T[0]))&&(P*=P)):T=_roundModifier(T.increment)),_conditionalReturn(E,C?_isFunction(T)?function(R){return I=T(R),Math.abs(I-R)<=P?I:R}:function(R){for(var F=parseFloat(I?R.x:R),O=parseFloat(I?R.y:0),D=_bigNum$1,L=0,B=T.length,V,U;B--;)I?(V=T[B].x-F,U=T[B].y-O,V=V*V+U*U):V=Math.abs(T[B]-F),V<D&&(D=V,L=B);return L=!P||D<=P?T[L]:R,I||L===R||_isNumber(R)?L:L+getUnit(R)}:_roundModifier(T))},random$1=function(T,E,C,P){return _conditionalReturn(_isArray(T)?!E:C===!0?!!(C=0):!P,function(){return _isArray(T)?T[~~(Math.random()*T.length)]:(C=C||1e-5)&&(P=C<1?Math.pow(10,(C+"").length-2):1)&&Math.floor(Math.round((T-C/2+Math.random()*(E-T+C*.99))/C)*C*P)/P})},pipe=function(){for(var T=arguments.length,E=new Array(T),C=0;C<T;C++)E[C]=arguments[C];return function(P){return E.reduce(function(I,R){return R(I)},P)}},unitize=function(T,E){return function(C){return T(parseFloat(C))+(E||getUnit(C))}},normalize=function(T,E,C){return mapRange(T,E,0,1,C)},_wrapArray=function(T,E,C){return _conditionalReturn(C,function(P){return T[~~E(P)]})},wrap=function A(T,E,C){var P=E-T;return _isArray(T)?_wrapArray(T,A(0,T.length),E):_conditionalReturn(C,function(I){return(P+(I-T)%P)%P+T})},wrapYoyo=function A(T,E,C){var P=E-T,I=P*2;return _isArray(T)?_wrapArray(T,A(0,T.length-1),E):_conditionalReturn(C,function(R){return R=(I+(R-T)%I)%I||0,T+(R>P?I-R:R)})},_replaceRandom=function(T){for(var E=0,C="",P,I,R,F;~(P=T.indexOf("random(",E));)R=T.indexOf(")",P),F=T.charAt(P+7)==="[",I=T.substr(P+7,R-P-7).match(F?_delimitedValueExp:_strictNumExp),C+=T.substr(E,P-E)+random$1(F?I:+I[0],F?0:+I[1],+I[2]||1e-5),E=R+1;return C+T.substr(E,T.length-E)},mapRange=function(T,E,C,P,I){var R=E-T,F=P-C;return _conditionalReturn(I,function(O){return C+((O-T)/R*F||0)})},interpolate=function A(T,E,C,P){var I=isNaN(T+E)?0:function(U){return(1-U)*T+U*E};if(!I){var R=_isString(T),F={},O,D,L,B,V;if(C===!0&&(P=1)&&(C=null),R)T={p:T},E={p:E};else if(_isArray(T)&&!_isArray(E)){for(L=[],B=T.length,V=B-2,D=1;D<B;D++)L.push(A(T[D-1],T[D]));B--,I=function(z){z*=B;var W=Math.min(V,~~z);return L[W](z-W)},C=E}else P||(T=_merge(_isArray(T)?[]:{},T));if(!L){for(O in E)_addPropTween.call(F,T,O,"get",E[O]);I=function(z){return _renderPropTweens(z,F)||(R?T.p:T)}}}return _conditionalReturn(C,I)},_getLabelInDirection=function(T,E,C){var P=T.labels,I=_bigNum$1,R,F,O;for(R in P)F=P[R]-E,F<0==!!C&&F&&I>(F=Math.abs(F))&&(O=R,I=F);return O},_callback=function(T,E,C){var P=T.vars,I=P[E],R=_context,F=T._ctx,O,D,L;if(I)return O=P[E+"Params"],D=P.callbackScope||T,C&&_lazyTweens.length&&_lazyRender(),F&&(_context=F),L=O?I.apply(D,O):I.call(D),_context=R,L},_interrupt=function(T){return _removeFromParent(T),T.scrollTrigger&&T.scrollTrigger.kill(!!_reverting$1),T.progress()<1&&_callback(T,"onInterrupt"),T},_quickTween,_registerPluginQueue=[],_createPlugin=function(T){if(T)if(T=!T.name&&T.default||T,_windowExists$1()||T.headless){var E=T.name,C=_isFunction(T),P=E&&!C&&T.init?function(){this._props=[]}:T,I={init:_emptyFunc,render:_renderPropTweens,add:_addPropTween,kill:_killPropTweensOf,modifier:_addPluginModifier,rawVars:0},R={targetTest:0,get:0,getSetter:_getSetter,aliases:{},register:0};if(_wake(),T!==P){if(_plugins[E])return;_setDefaults(P,_setDefaults(_copyExcluding(T,I),R)),_merge(P.prototype,_merge(I,_copyExcluding(T,R))),_plugins[P.prop=E]=P,T.targetTest&&(_harnessPlugins.push(P),_reservedProps[E]=1),E=(E==="css"?"CSS":E.charAt(0).toUpperCase()+E.substr(1))+"Plugin"}_addGlobal(E,P),T.register&&T.register(gsap,P,PropTween)}else _registerPluginQueue.push(T)},_255=255,_colorLookup={aqua:[0,_255,_255],lime:[0,_255,0],silver:[192,192,192],black:[0,0,0],maroon:[128,0,0],teal:[0,128,128],blue:[0,0,_255],navy:[0,0,128],white:[_255,_255,_255],olive:[128,128,0],yellow:[_255,_255,0],orange:[_255,165,0],gray:[128,128,128],purple:[128,0,128],green:[0,128,0],red:[_255,0,0],pink:[_255,192,203],cyan:[0,_255,_255],transparent:[_255,_255,_255,0]},_hue=function(T,E,C){return T+=T<0?1:T>1?-1:0,(T*6<1?E+(C-E)*T*6:T<.5?C:T*3<2?E+(C-E)*(2/3-T)*6:E)*_255+.5|0},splitColor=function(T,E,C){var P=T?_isNumber(T)?[T>>16,T>>8&_255,T&_255]:0:_colorLookup.black,I,R,F,O,D,L,B,V,U,z;if(!P){if(T.substr(-1)===","&&(T=T.substr(0,T.length-1)),_colorLookup[T])P=_colorLookup[T];else if(T.charAt(0)==="#"){if(T.length<6&&(I=T.charAt(1),R=T.charAt(2),F=T.charAt(3),T="#"+I+I+R+R+F+F+(T.length===5?T.charAt(4)+T.charAt(4):"")),T.length===9)return P=parseInt(T.substr(1,6),16),[P>>16,P>>8&_255,P&_255,parseInt(T.substr(7),16)/255];T=parseInt(T.substr(1),16),P=[T>>16,T>>8&_255,T&_255]}else if(T.substr(0,3)==="hsl"){if(P=z=T.match(_strictNumExp),!E)O=+P[0]%360/360,D=+P[1]/100,L=+P[2]/100,R=L<=.5?L*(D+1):L+D-L*D,I=L*2-R,P.length>3&&(P[3]*=1),P[0]=_hue(O+1/3,I,R),P[1]=_hue(O,I,R),P[2]=_hue(O-1/3,I,R);else if(~T.indexOf("="))return P=T.match(_numExp),C&&P.length<4&&(P[3]=1),P}else P=T.match(_strictNumExp)||_colorLookup.transparent;P=P.map(Number)}return E&&!z&&(I=P[0]/_255,R=P[1]/_255,F=P[2]/_255,B=Math.max(I,R,F),V=Math.min(I,R,F),L=(B+V)/2,B===V?O=D=0:(U=B-V,D=L>.5?U/(2-B-V):U/(B+V),O=B===I?(R-F)/U+(R<F?6:0):B===R?(F-I)/U+2:(I-R)/U+4,O*=60),P[0]=~~(O+.5),P[1]=~~(D*100+.5),P[2]=~~(L*100+.5)),C&&P.length<4&&(P[3]=1),P},_colorOrderData=function(T){var E=[],C=[],P=-1;return T.split(_colorExp).forEach(function(I){var R=I.match(_numWithUnitExp)||[];E.push.apply(E,R),C.push(P+=R.length+1)}),E.c=C,E},_formatColors=function(T,E,C){var P="",I=(T+P).match(_colorExp),R=E?"hsla(":"rgba(",F=0,O,D,L,B;if(!I)return T;if(I=I.map(function(V){return(V=splitColor(V,E,1))&&R+(E?V[0]+","+V[1]+"%,"+V[2]+"%,"+V[3]:V.join(","))+")"}),C&&(L=_colorOrderData(T),O=C.c,O.join(P)!==L.c.join(P)))for(D=T.replace(_colorExp,"1").split(_numWithUnitExp),B=D.length-1;F<B;F++)P+=D[F]+(~O.indexOf(F)?I.shift()||R+"0,0,0,0)":(L.length?L:I.length?I:C).shift());if(!D)for(D=T.split(_colorExp),B=D.length-1;F<B;F++)P+=D[F]+I[F];return P+D[B]},_colorExp=function(){var A="(?:\\b(?:(?:rgb|rgba|hsl|hsla)\\(.+?\\))|\\B#(?:[0-9a-f]{3,4}){1,2}\\b",T;for(T in _colorLookup)A+="|"+T+"\\b";return new RegExp(A+")","gi")}(),_hslExp=/hsl[a]?\(/,_colorStringFilter=function(T){var E=T.join(" "),C;if(_colorExp.lastIndex=0,_colorExp.test(E))return C=_hslExp.test(E),T[1]=_formatColors(T[1],C),T[0]=_formatColors(T[0],C,_colorOrderData(T[1])),!0},_tickerActive,_ticker=function(){var A=Date.now,T=500,E=33,C=A(),P=C,I=1e3/240,R=I,F=[],O,D,L,B,V,U,z=function W(Z){var X=A()-P,K=Z===!0,Y,Q,J,te;if((X>T||X<0)&&(C+=X-E),P+=X,J=P-C,Y=J-R,(Y>0||K)&&(te=++B.frame,V=J-B.time*1e3,B.time=J=J/1e3,R+=Y+(Y>=I?4:I-Y),Q=1),K||(O=D(W)),Q)for(U=0;U<F.length;U++)F[U](J,V,te,Z)};return B={time:0,frame:0,tick:function(){z(!0)},deltaRatio:function(Z){return V/(1e3/(Z||60))},wake:function(){_coreReady&&(!_coreInitted&&_windowExists$1()&&(_win$1=_coreInitted=window,_doc$1=_win$1.document||{},_globals.gsap=gsap,(_win$1.gsapVersions||(_win$1.gsapVersions=[])).push(gsap.version),_install(_installScope||_win$1.GreenSockGlobals||!_win$1.gsap&&_win$1||{}),_registerPluginQueue.forEach(_createPlugin)),L=typeof requestAnimationFrame<"u"&&requestAnimationFrame,O&&B.sleep(),D=L||function(Z){return setTimeout(Z,R-B.time*1e3+1|0)},_tickerActive=1,z(2))},sleep:function(){(L?cancelAnimationFrame:clearTimeout)(O),_tickerActive=0,D=_emptyFunc},lagSmoothing:function(Z,X){T=Z||1/0,E=Math.min(X||33,T)},fps:function(Z){I=1e3/(Z||240),R=B.time*1e3+I},add:function(Z,X,K){var Y=X?function(Q,J,te,ie){Z(Q,J,te,ie),B.remove(Y)}:Z;return B.remove(Z),F[K?"unshift":"push"](Y),_wake(),Y},remove:function(Z,X){~(X=F.indexOf(Z))&&F.splice(X,1)&&U>=X&&U--},_listeners:F},B}(),_wake=function(){return!_tickerActive&&_ticker.wake()},_easeMap={},_customEaseExp=/^[\d.\-M][\d.\-,\s]/,_quotesExp=/["']/g,_parseObjectInString=function(T){for(var E={},C=T.substr(1,T.length-3).split(":"),P=C[0],I=1,R=C.length,F,O,D;I<R;I++)O=C[I],F=I!==R-1?O.lastIndexOf(","):O.length,D=O.substr(0,F),E[P]=isNaN(D)?D.replace(_quotesExp,"").trim():+D,P=O.substr(F+1).trim();return E},_valueInParentheses=function(T){var E=T.indexOf("(")+1,C=T.indexOf(")"),P=T.indexOf("(",E);return T.substring(E,~P&&P<C?T.indexOf(")",C+1):C)},_configEaseFromString=function(T){var E=(T+"").split("("),C=_easeMap[E[0]];return C&&E.length>1&&C.config?C.config.apply(null,~T.indexOf("{")?[_parseObjectInString(E[1])]:_valueInParentheses(T).split(",").map(_numericIfPossible)):_easeMap._CE&&_customEaseExp.test(T)?_easeMap._CE("",T):C},_invertEase=function(T){return function(E){return 1-T(1-E)}},_propagateYoyoEase=function A(T,E){for(var C=T._first,P;C;)C instanceof Timeline$1?A(C,E):C.vars.yoyoEase&&(!C._yoyo||!C._repeat)&&C._yoyo!==E&&(C.timeline?A(C.timeline,E):(P=C._ease,C._ease=C._yEase,C._yEase=P,C._yoyo=E)),C=C._next},_parseEase=function(T,E){return T&&(_isFunction(T)?T:_easeMap[T]||_configEaseFromString(T))||E},_insertEase=function(T,E,C,P){C===void 0&&(C=function(O){return 1-E(1-O)}),P===void 0&&(P=function(O){return O<.5?E(O*2)/2:1-E((1-O)*2)/2});var I={easeIn:E,easeOut:C,easeInOut:P},R;return _forEachName(T,function(F){_easeMap[F]=_globals[F]=I,_easeMap[R=F.toLowerCase()]=C;for(var O in I)_easeMap[R+(O==="easeIn"?".in":O==="easeOut"?".out":".inOut")]=_easeMap[F+"."+O]=I[O]}),I},_easeInOutFromOut=function(T){return function(E){return E<.5?(1-T(1-E*2))/2:.5+T((E-.5)*2)/2}},_configElastic=function A(T,E,C){var P=E>=1?E:1,I=(C||(T?.3:.45))/(E<1?E:1),R=I/_2PI*(Math.asin(1/P)||0),F=function(L){return L===1?1:P*Math.pow(2,-10*L)*_sin((L-R)*I)+1},O=T==="out"?F:T==="in"?function(D){return 1-F(1-D)}:_easeInOutFromOut(F);return I=_2PI/I,O.config=function(D,L){return A(T,D,L)},O},_configBack=function A(T,E){E===void 0&&(E=1.70158);var C=function(R){return R?--R*R*((E+1)*R+E)+1:0},P=T==="out"?C:T==="in"?function(I){return 1-C(1-I)}:_easeInOutFromOut(C);return P.config=function(I){return A(T,I)},P};_forEachName("Linear,Quad,Cubic,Quart,Quint,Strong",function(A,T){var E=T<5?T+1:T;_insertEase(A+",Power"+(E-1),T?function(C){return Math.pow(C,E)}:function(C){return C},function(C){return 1-Math.pow(1-C,E)},function(C){return C<.5?Math.pow(C*2,E)/2:1-Math.pow((1-C)*2,E)/2})});_easeMap.Linear.easeNone=_easeMap.none=_easeMap.Linear.easeIn;_insertEase("Elastic",_configElastic("in"),_configElastic("out"),_configElastic());(function(A,T){var E=1/T,C=2*E,P=2.5*E,I=function(F){return F<E?A*F*F:F<C?A*Math.pow(F-1.5/T,2)+.75:F<P?A*(F-=2.25/T)*F+.9375:A*Math.pow(F-2.625/T,2)+.984375};_insertEase("Bounce",function(R){return 1-I(1-R)},I)})(7.5625,2.75);_insertEase("Expo",function(A){return A?Math.pow(2,10*(A-1)):0});_insertEase("Circ",function(A){return-(_sqrt(1-A*A)-1)});_insertEase("Sine",function(A){return A===1?1:-_cos(A*_HALF_PI)+1});_insertEase("Back",_configBack("in"),_configBack("out"),_configBack());_easeMap.SteppedEase=_easeMap.steps=_globals.SteppedEase={config:function(T,E){T===void 0&&(T=1);var C=1/T,P=T+(E?0:1),I=E?1:0,R=1-_tinyNum;return function(F){return((P*_clamp(0,R,F)|0)+I)*C}}};_defaults.ease=_easeMap["quad.out"];_forEachName("onComplete,onUpdate,onStart,onRepeat,onReverseComplete,onInterrupt",function(A){return _callbackNames+=A+","+A+"Params,"});var GSCache=function(T,E){this.id=_gsID++,T._gsap=this,this.target=T,this.harness=E,this.get=E?E.get:_getProperty,this.set=E?E.getSetter:_getSetter},Animation=function(){function A(E){this.vars=E,this._delay=+E.delay||0,(this._repeat=E.repeat===1/0?-2:E.repeat||0)&&(this._rDelay=E.repeatDelay||0,this._yoyo=!!E.yoyo||!!E.yoyoEase),this._ts=1,_setDuration(this,+E.duration,1,1),this.data=E.data,_context&&(this._ctx=_context,_context.data.push(this)),_tickerActive||_ticker.wake()}var T=A.prototype;return T.delay=function(C){return C||C===0?(this.parent&&this.parent.smoothChildTiming&&this.startTime(this._start+C-this._delay),this._delay=C,this):this._delay},T.duration=function(C){return arguments.length?this.totalDuration(this._repeat>0?C+(C+this._rDelay)*this._repeat:C):this.totalDuration()&&this._dur},T.totalDuration=function(C){return arguments.length?(this._dirty=0,_setDuration(this,this._repeat<0?C:(C-this._repeat*this._rDelay)/(this._repeat+1))):this._tDur},T.totalTime=function(C,P){if(_wake(),!arguments.length)return this._tTime;var I=this._dp;if(I&&I.smoothChildTiming&&this._ts){for(_alignPlayhead(this,C),!I._dp||I.parent||_postAddChecks(I,this);I&&I.parent;)I.parent._time!==I._start+(I._ts>=0?I._tTime/I._ts:(I.totalDuration()-I._tTime)/-I._ts)&&I.totalTime(I._tTime,!0),I=I.parent;!this.parent&&this._dp.autoRemoveChildren&&(this._ts>0&&C<this._tDur||this._ts<0&&C>0||!this._tDur&&!C)&&_addToTimeline(this._dp,this,this._start-this._delay)}return(this._tTime!==C||!this._dur&&!P||this._initted&&Math.abs(this._zTime)===_tinyNum||!C&&!this._initted&&(this.add||this._ptLookup))&&(this._ts||(this._pTime=C),_lazySafeRender(this,C,P)),this},T.time=function(C,P){return arguments.length?this.totalTime(Math.min(this.totalDuration(),C+_elapsedCycleDuration(this))%(this._dur+this._rDelay)||(C?this._dur:0),P):this._time},T.totalProgress=function(C,P){return arguments.length?this.totalTime(this.totalDuration()*C,P):this.totalDuration()?Math.min(1,this._tTime/this._tDur):this.rawTime()>0?1:0},T.progress=function(C,P){return arguments.length?this.totalTime(this.duration()*(this._yoyo&&!(this.iteration()&1)?1-C:C)+_elapsedCycleDuration(this),P):this.duration()?Math.min(1,this._time/this._dur):this.rawTime()>0?1:0},T.iteration=function(C,P){var I=this.duration()+this._rDelay;return arguments.length?this.totalTime(this._time+(C-1)*I,P):this._repeat?_animationCycle(this._tTime,I)+1:1},T.timeScale=function(C,P){if(!arguments.length)return this._rts===-_tinyNum?0:this._rts;if(this._rts===C)return this;var I=this.parent&&this._ts?_parentToChildTotalTime(this.parent._time,this):this._tTime;return this._rts=+C||0,this._ts=this._ps||C===-_tinyNum?0:this._rts,this.totalTime(_clamp(-Math.abs(this._delay),this._tDur,I),P!==!1),_setEnd(this),_recacheAncestors(this)},T.paused=function(C){return arguments.length?(this._ps!==C&&(this._ps=C,C?(this._pTime=this._tTime||Math.max(-this._delay,this.rawTime()),this._ts=this._act=0):(_wake(),this._ts=this._rts,this.totalTime(this.parent&&!this.parent.smoothChildTiming?this.rawTime():this._tTime||this._pTime,this.progress()===1&&Math.abs(this._zTime)!==_tinyNum&&(this._tTime-=_tinyNum)))),this):this._ps},T.startTime=function(C){if(arguments.length){this._start=C;var P=this.parent||this._dp;return P&&(P._sort||!this.parent)&&_addToTimeline(P,this,C-this._delay),this}return this._start},T.endTime=function(C){return this._start+(_isNotFalse(C)?this.totalDuration():this.duration())/Math.abs(this._ts||1)},T.rawTime=function(C){var P=this.parent||this._dp;return P?C&&(!this._ts||this._repeat&&this._time&&this.totalProgress()<1)?this._tTime%(this._dur+this._rDelay):this._ts?_parentToChildTotalTime(P.rawTime(C),this):this._tTime:this._tTime},T.revert=function(C){C===void 0&&(C=_revertConfig);var P=_reverting$1;return _reverting$1=C,(this._initted||this._startAt)&&(this.timeline&&this.timeline.revert(C),this.totalTime(-.01,C.suppressEvents)),this.data!=="nested"&&C.kill!==!1&&this.kill(),_reverting$1=P,this},T.globalTime=function(C){for(var P=this,I=arguments.length?C:P.rawTime();P;)I=P._start+I/(Math.abs(P._ts)||1),P=P._dp;return!this.parent&&this._sat?this._sat.globalTime(C):I},T.repeat=function(C){return arguments.length?(this._repeat=C===1/0?-2:C,_onUpdateTotalDuration(this)):this._repeat===-2?1/0:this._repeat},T.repeatDelay=function(C){if(arguments.length){var P=this._time;return this._rDelay=C,_onUpdateTotalDuration(this),P?this.time(P):this}return this._rDelay},T.yoyo=function(C){return arguments.length?(this._yoyo=C,this):this._yoyo},T.seek=function(C,P){return this.totalTime(_parsePosition(this,C),_isNotFalse(P))},T.restart=function(C,P){return this.play().totalTime(C?-this._delay:0,_isNotFalse(P))},T.play=function(C,P){return C!=null&&this.seek(C,P),this.reversed(!1).paused(!1)},T.reverse=function(C,P){return C!=null&&this.seek(C||this.totalDuration(),P),this.reversed(!0).paused(!1)},T.pause=function(C,P){return C!=null&&this.seek(C,P),this.paused(!0)},T.resume=function(){return this.paused(!1)},T.reversed=function(C){return arguments.length?(!!C!==this.reversed()&&this.timeScale(-this._rts||(C?-_tinyNum:0)),this):this._rts<0},T.invalidate=function(){return this._initted=this._act=0,this._zTime=-_tinyNum,this},T.isActive=function(){var C=this.parent||this._dp,P=this._start,I;return!!(!C||this._ts&&this._initted&&C.isActive()&&(I=C.rawTime(!0))>=P&&I<this.endTime(!0)-_tinyNum)},T.eventCallback=function(C,P,I){var R=this.vars;return arguments.length>1?(P?(R[C]=P,I&&(R[C+"Params"]=I),C==="onUpdate"&&(this._onUpdate=P)):delete R[C],this):R[C]},T.then=function(C){var P=this;return new Promise(function(I){var R=_isFunction(C)?C:_passThrough,F=function(){var D=P.then;P.then=null,_isFunction(R)&&(R=R(P))&&(R.then||R===P)&&(P.then=D),I(R),P.then=D};P._initted&&P.totalProgress()===1&&P._ts>=0||!P._tTime&&P._ts<0?F():P._prom=F})},T.kill=function(){_interrupt(this)},A}();_setDefaults(Animation.prototype,{_time:0,_start:0,_end:0,_tTime:0,_tDur:0,_dirty:0,_repeat:0,_yoyo:!1,parent:null,_initted:!1,_rDelay:0,_ts:1,_dp:0,ratio:0,_zTime:-_tinyNum,_prom:0,_ps:!1,_rts:1});var Timeline$1=function(A){_inheritsLoose(T,A);function T(C,P){var I;return C===void 0&&(C={}),I=A.call(this,C)||this,I.labels={},I.smoothChildTiming=!!C.smoothChildTiming,I.autoRemoveChildren=!!C.autoRemoveChildren,I._sort=_isNotFalse(C.sortChildren),_globalTimeline&&_addToTimeline(C.parent||_globalTimeline,_assertThisInitialized(I),P),C.reversed&&I.reverse(),C.paused&&I.paused(!0),C.scrollTrigger&&_scrollTrigger(_assertThisInitialized(I),C.scrollTrigger),I}var E=T.prototype;return E.to=function(P,I,R){return _createTweenType(0,arguments,this),this},E.from=function(P,I,R){return _createTweenType(1,arguments,this),this},E.fromTo=function(P,I,R,F){return _createTweenType(2,arguments,this),this},E.set=function(P,I,R){return I.duration=0,I.parent=this,_inheritDefaults(I).repeatDelay||(I.repeat=0),I.immediateRender=!!I.immediateRender,new Tween(P,I,_parsePosition(this,R),1),this},E.call=function(P,I,R){return _addToTimeline(this,Tween.delayedCall(0,P,I),R)},E.staggerTo=function(P,I,R,F,O,D,L){return R.duration=I,R.stagger=R.stagger||F,R.onComplete=D,R.onCompleteParams=L,R.parent=this,new Tween(P,R,_parsePosition(this,O)),this},E.staggerFrom=function(P,I,R,F,O,D,L){return R.runBackwards=1,_inheritDefaults(R).immediateRender=_isNotFalse(R.immediateRender),this.staggerTo(P,I,R,F,O,D,L)},E.staggerFromTo=function(P,I,R,F,O,D,L,B){return F.startAt=R,_inheritDefaults(F).immediateRender=_isNotFalse(F.immediateRender),this.staggerTo(P,I,F,O,D,L,B)},E.render=function(P,I,R){var F=this._time,O=this._dirty?this.totalDuration():this._tDur,D=this._dur,L=P<=0?0:_roundPrecise(P),B=this._zTime<0!=P<0&&(this._initted||!D),V,U,z,W,Z,X,K,Y,Q,J,te,ie;if(this!==_globalTimeline&&L>O&&P>=0&&(L=O),L!==this._tTime||R||B){if(F!==this._time&&D&&(L+=this._time-F,P+=this._time-F),V=L,Q=this._start,Y=this._ts,X=!Y,B&&(D||(F=this._zTime),(P||!I)&&(this._zTime=P)),this._repeat){if(te=this._yoyo,Z=D+this._rDelay,this._repeat<-1&&P<0)return this.totalTime(Z*100+P,I,R);if(V=_roundPrecise(L%Z),L===O?(W=this._repeat,V=D):(W=~~(L/Z),W&&W===L/Z&&(V=D,W--),V>D&&(V=D)),J=_animationCycle(this._tTime,Z),!F&&this._tTime&&J!==W&&this._tTime-J*Z-this._dur<=0&&(J=W),te&&W&1&&(V=D-V,ie=1),W!==J&&!this._lock){var ne=te&&J&1,he=ne===(te&&W&1);if(W<J&&(ne=!ne),F=ne?0:L%D?D:L,this._lock=1,this.render(F||(ie?0:_roundPrecise(W*Z)),I,!D)._lock=0,this._tTime=L,!I&&this.parent&&_callback(this,"onRepeat"),this.vars.repeatRefresh&&!ie&&(this.invalidate()._lock=1),F&&F!==this._time||X!==!this._ts||this.vars.onRepeat&&!this.parent&&!this._act)return this;if(D=this._dur,O=this._tDur,he&&(this._lock=2,F=ne?D:-1e-4,this.render(F,!0),this.vars.repeatRefresh&&!ie&&this.invalidate()),this._lock=0,!this._ts&&!X)return this;_propagateYoyoEase(this,ie)}}if(this._hasPause&&!this._forcing&&this._lock<2&&(K=_findNextPauseTween(this,_roundPrecise(F),_roundPrecise(V)),K&&(L-=V-(V=K._start))),this._tTime=L,this._time=V,this._act=!Y,this._initted||(this._onUpdate=this.vars.onUpdate,this._initted=1,this._zTime=P,F=0),!F&&V&&!I&&!W&&(_callback(this,"onStart"),this._tTime!==L))return this;if(V>=F&&P>=0)for(U=this._first;U;){if(z=U._next,(U._act||V>=U._start)&&U._ts&&K!==U){if(U.parent!==this)return this.render(P,I,R);if(U.render(U._ts>0?(V-U._start)*U._ts:(U._dirty?U.totalDuration():U._tDur)+(V-U._start)*U._ts,I,R),V!==this._time||!this._ts&&!X){K=0,z&&(L+=this._zTime=-_tinyNum);break}}U=z}else{U=this._last;for(var ve=P<0?P:V;U;){if(z=U._prev,(U._act||ve<=U._end)&&U._ts&&K!==U){if(U.parent!==this)return this.render(P,I,R);if(U.render(U._ts>0?(ve-U._start)*U._ts:(U._dirty?U.totalDuration():U._tDur)+(ve-U._start)*U._ts,I,R||_reverting$1&&(U._initted||U._startAt)),V!==this._time||!this._ts&&!X){K=0,z&&(L+=this._zTime=ve?-_tinyNum:_tinyNum);break}}U=z}}if(K&&!I&&(this.pause(),K.render(V>=F?0:-_tinyNum)._zTime=V>=F?1:-1,this._ts))return this._start=Q,_setEnd(this),this.render(P,I,R);this._onUpdate&&!I&&_callback(this,"onUpdate",!0),(L===O&&this._tTime>=this.totalDuration()||!L&&F)&&(Q===this._start||Math.abs(Y)!==Math.abs(this._ts))&&(this._lock||((P||!D)&&(L===O&&this._ts>0||!L&&this._ts<0)&&_removeFromParent(this,1),!I&&!(P<0&&!F)&&(L||F||!O)&&(_callback(this,L===O&&P>=0?"onComplete":"onReverseComplete",!0),this._prom&&!(L<O&&this.timeScale()>0)&&this._prom())))}return this},E.add=function(P,I){var R=this;if(_isNumber(I)||(I=_parsePosition(this,I,P)),!(P instanceof Animation)){if(_isArray(P))return P.forEach(function(F){return R.add(F,I)}),this;if(_isString(P))return this.addLabel(P,I);if(_isFunction(P))P=Tween.delayedCall(0,P);else return this}return this!==P?_addToTimeline(this,P,I):this},E.getChildren=function(P,I,R,F){P===void 0&&(P=!0),I===void 0&&(I=!0),R===void 0&&(R=!0),F===void 0&&(F=-_bigNum$1);for(var O=[],D=this._first;D;)D._start>=F&&(D instanceof Tween?I&&O.push(D):(R&&O.push(D),P&&O.push.apply(O,D.getChildren(!0,I,R)))),D=D._next;return O},E.getById=function(P){for(var I=this.getChildren(1,1,1),R=I.length;R--;)if(I[R].vars.id===P)return I[R]},E.remove=function(P){return _isString(P)?this.removeLabel(P):_isFunction(P)?this.killTweensOf(P):(_removeLinkedListItem(this,P),P===this._recent&&(this._recent=this._last),_uncache(this))},E.totalTime=function(P,I){return arguments.length?(this._forcing=1,!this._dp&&this._ts&&(this._start=_roundPrecise(_ticker.time-(this._ts>0?P/this._ts:(this.totalDuration()-P)/-this._ts))),A.prototype.totalTime.call(this,P,I),this._forcing=0,this):this._tTime},E.addLabel=function(P,I){return this.labels[P]=_parsePosition(this,I),this},E.removeLabel=function(P){return delete this.labels[P],this},E.addPause=function(P,I,R){var F=Tween.delayedCall(0,I||_emptyFunc,R);return F.data="isPause",this._hasPause=1,_addToTimeline(this,F,_parsePosition(this,P))},E.removePause=function(P){var I=this._first;for(P=_parsePosition(this,P);I;)I._start===P&&I.data==="isPause"&&_removeFromParent(I),I=I._next},E.killTweensOf=function(P,I,R){for(var F=this.getTweensOf(P,R),O=F.length;O--;)_overwritingTween!==F[O]&&F[O].kill(P,I);return this},E.getTweensOf=function(P,I){for(var R=[],F=toArray(P),O=this._first,D=_isNumber(I),L;O;)O instanceof Tween?_arrayContainsAny(O._targets,F)&&(D?(!_overwritingTween||O._initted&&O._ts)&&O.globalTime(0)<=I&&O.globalTime(O.totalDuration())>I:!I||O.isActive())&&R.push(O):(L=O.getTweensOf(F,I)).length&&R.push.apply(R,L),O=O._next;return R},E.tweenTo=function(P,I){I=I||{};var R=this,F=_parsePosition(R,P),O=I,D=O.startAt,L=O.onStart,B=O.onStartParams,V=O.immediateRender,U,z=Tween.to(R,_setDefaults({ease:I.ease||"none",lazy:!1,immediateRender:!1,time:F,overwrite:"auto",duration:I.duration||Math.abs((F-(D&&"time"in D?D.time:R._time))/R.timeScale())||_tinyNum,onStart:function(){if(R.pause(),!U){var Z=I.duration||Math.abs((F-(D&&"time"in D?D.time:R._time))/R.timeScale());z._dur!==Z&&_setDuration(z,Z,0,1).render(z._time,!0,!0),U=1}L&&L.apply(z,B||[])}},I));return V?z.render(0):z},E.tweenFromTo=function(P,I,R){return this.tweenTo(I,_setDefaults({startAt:{time:_parsePosition(this,P)}},R))},E.recent=function(){return this._recent},E.nextLabel=function(P){return P===void 0&&(P=this._time),_getLabelInDirection(this,_parsePosition(this,P))},E.previousLabel=function(P){return P===void 0&&(P=this._time),_getLabelInDirection(this,_parsePosition(this,P),1)},E.currentLabel=function(P){return arguments.length?this.seek(P,!0):this.previousLabel(this._time+_tinyNum)},E.shiftChildren=function(P,I,R){R===void 0&&(R=0);for(var F=this._first,O=this.labels,D;F;)F._start>=R&&(F._start+=P,F._end+=P),F=F._next;if(I)for(D in O)O[D]>=R&&(O[D]+=P);return _uncache(this)},E.invalidate=function(P){var I=this._first;for(this._lock=0;I;)I.invalidate(P),I=I._next;return A.prototype.invalidate.call(this,P)},E.clear=function(P){P===void 0&&(P=!0);for(var I=this._first,R;I;)R=I._next,this.remove(I),I=R;return this._dp&&(this._time=this._tTime=this._pTime=0),P&&(this.labels={}),_uncache(this)},E.totalDuration=function(P){var I=0,R=this,F=R._last,O=_bigNum$1,D,L,B;if(arguments.length)return R.timeScale((R._repeat<0?R.duration():R.totalDuration())/(R.reversed()?-P:P));if(R._dirty){for(B=R.parent;F;)D=F._prev,F._dirty&&F.totalDuration(),L=F._start,L>O&&R._sort&&F._ts&&!R._lock?(R._lock=1,_addToTimeline(R,F,L-F._delay,1)._lock=0):O=L,L<0&&F._ts&&(I-=L,(!B&&!R._dp||B&&B.smoothChildTiming)&&(R._start+=L/R._ts,R._time-=L,R._tTime-=L),R.shiftChildren(-L,!1,-1/0),O=0),F._end>I&&F._ts&&(I=F._end),F=D;_setDuration(R,R===_globalTimeline&&R._time>I?R._time:I,1,1),R._dirty=0}return R._tDur},T.updateRoot=function(P){if(_globalTimeline._ts&&(_lazySafeRender(_globalTimeline,_parentToChildTotalTime(P,_globalTimeline)),_lastRenderedFrame=_ticker.frame),_ticker.frame>=_nextGCFrame){_nextGCFrame+=_config.autoSleep||120;var I=_globalTimeline._first;if((!I||!I._ts)&&_config.autoSleep&&_ticker._listeners.length<2){for(;I&&!I._ts;)I=I._next;I||_ticker.sleep()}}},T}(Animation);_setDefaults(Timeline$1.prototype,{_lock:0,_hasPause:0,_forcing:0});var _addComplexStringPropTween=function(T,E,C,P,I,R,F){var O=new PropTween(this._pt,T,E,0,1,_renderComplexString,null,I),D=0,L=0,B,V,U,z,W,Z,X,K;for(O.b=C,O.e=P,C+="",P+="",(X=~P.indexOf("random("))&&(P=_replaceRandom(P)),R&&(K=[C,P],R(K,T,E),C=K[0],P=K[1]),V=C.match(_complexStringNumExp)||[];B=_complexStringNumExp.exec(P);)z=B[0],W=P.substring(D,B.index),U?U=(U+1)%5:W.substr(-5)==="rgba("&&(U=1),z!==V[L++]&&(Z=parseFloat(V[L-1])||0,O._pt={_next:O._pt,p:W||L===1?W:",",s:Z,c:z.charAt(1)==="="?_parseRelative(Z,z)-Z:parseFloat(z)-Z,m:U&&U<4?Math.round:0},D=_complexStringNumExp.lastIndex);return O.c=D<P.length?P.substring(D,P.length):"",O.fp=F,(_relExp.test(P)||X)&&(O.e=0),this._pt=O,O},_addPropTween=function(T,E,C,P,I,R,F,O,D,L){_isFunction(P)&&(P=P(I||0,T,R));var B=T[E],V=C!=="get"?C:_isFunction(B)?D?T[E.indexOf("set")||!_isFunction(T["get"+E.substr(3)])?E:"get"+E.substr(3)](D):T[E]():B,U=_isFunction(B)?D?_setterFuncWithParam:_setterFunc:_setterPlain,z;if(_isString(P)&&(~P.indexOf("random(")&&(P=_replaceRandom(P)),P.charAt(1)==="="&&(z=_parseRelative(V,P)+(getUnit(V)||0),(z||z===0)&&(P=z))),!L||V!==P||_forceAllPropTweens)return!isNaN(V*P)&&P!==""?(z=new PropTween(this._pt,T,E,+V||0,P-(V||0),typeof B=="boolean"?_renderBoolean:_renderPlain,0,U),D&&(z.fp=D),F&&z.modifier(F,this,T),this._pt=z):(!B&&!(E in T)&&_missingPlugin(E,P),_addComplexStringPropTween.call(this,T,E,V,P,U,O||_config.stringFilter,D))},_processVars=function(T,E,C,P,I){if(_isFunction(T)&&(T=_parseFuncOrString(T,I,E,C,P)),!_isObject(T)||T.style&&T.nodeType||_isArray(T)||_isTypedArray(T))return _isString(T)?_parseFuncOrString(T,I,E,C,P):T;var R={},F;for(F in T)R[F]=_parseFuncOrString(T[F],I,E,C,P);return R},_checkPlugin=function(T,E,C,P,I,R){var F,O,D,L;if(_plugins[T]&&(F=new _plugins[T]).init(I,F.rawVars?E[T]:_processVars(E[T],P,I,R,C),C,P,R)!==!1&&(C._pt=O=new PropTween(C._pt,I,T,0,1,F.render,F,0,F.priority),C!==_quickTween))for(D=C._ptLookup[C._targets.indexOf(I)],L=F._props.length;L--;)D[F._props[L]]=O;return F},_overwritingTween,_forceAllPropTweens,_initTween=function A(T,E,C){var P=T.vars,I=P.ease,R=P.startAt,F=P.immediateRender,O=P.lazy,D=P.onUpdate,L=P.runBackwards,B=P.yoyoEase,V=P.keyframes,U=P.autoRevert,z=T._dur,W=T._startAt,Z=T._targets,X=T.parent,K=X&&X.data==="nested"?X.vars.targets:Z,Y=T._overwrite==="auto"&&!_suppressOverwrites,Q=T.timeline,J,te,ie,ne,he,ve,ye,de,fe,ue,ge,ae,ce;if(Q&&(!V||!I)&&(I="none"),T._ease=_parseEase(I,_defaults.ease),T._yEase=B?_invertEase(_parseEase(B===!0?I:B,_defaults.ease)):0,B&&T._yoyo&&!T._repeat&&(B=T._yEase,T._yEase=T._ease,T._ease=B),T._from=!Q&&!!P.runBackwards,!Q||V&&!P.stagger){if(de=Z[0]?_getCache(Z[0]).harness:0,ae=de&&P[de.prop],J=_copyExcluding(P,_reservedProps),W&&(W._zTime<0&&W.progress(1),E<0&&L&&F&&!U?W.render(-1,!0):W.revert(L&&z?_revertConfigNoKill:_startAtRevertConfig),W._lazy=0),R){if(_removeFromParent(T._startAt=Tween.set(Z,_setDefaults({data:"isStart",overwrite:!1,parent:X,immediateRender:!0,lazy:!W&&_isNotFalse(O),startAt:null,delay:0,onUpdate:D&&function(){return _callback(T,"onUpdate")},stagger:0},R))),T._startAt._dp=0,T._startAt._sat=T,E<0&&(_reverting$1||!F&&!U)&&T._startAt.revert(_revertConfigNoKill),F&&z&&E<=0&&C<=0){E&&(T._zTime=E);return}}else if(L&&z&&!W){if(E&&(F=!1),ie=_setDefaults({overwrite:!1,data:"isFromStart",lazy:F&&!W&&_isNotFalse(O),immediateRender:F,stagger:0,parent:X},J),ae&&(ie[de.prop]=ae),_removeFromParent(T._startAt=Tween.set(Z,ie)),T._startAt._dp=0,T._startAt._sat=T,E<0&&(_reverting$1?T._startAt.revert(_revertConfigNoKill):T._startAt.render(-1,!0)),T._zTime=E,!F)A(T._startAt,_tinyNum,_tinyNum);else if(!E)return}for(T._pt=T._ptCache=0,O=z&&_isNotFalse(O)||O&&!z,te=0;te<Z.length;te++){if(he=Z[te],ye=he._gsap||_harness(Z)[te]._gsap,T._ptLookup[te]=ue={},_lazyLookup[ye.id]&&_lazyTweens.length&&_lazyRender(),ge=K===Z?te:K.indexOf(he),de&&(fe=new de).init(he,ae||J,T,ge,K)!==!1&&(T._pt=ne=new PropTween(T._pt,he,fe.name,0,1,fe.render,fe,0,fe.priority),fe._props.forEach(function(se){ue[se]=ne}),fe.priority&&(ve=1)),!de||ae)for(ie in J)_plugins[ie]&&(fe=_checkPlugin(ie,J,T,ge,he,K))?fe.priority&&(ve=1):ue[ie]=ne=_addPropTween.call(T,he,ie,"get",J[ie],ge,K,0,P.stringFilter);T._op&&T._op[te]&&T.kill(he,T._op[te]),Y&&T._pt&&(_overwritingTween=T,_globalTimeline.killTweensOf(he,ue,T.globalTime(E)),ce=!T.parent,_overwritingTween=0),T._pt&&O&&(_lazyLookup[ye.id]=1)}ve&&_sortPropTweensByPriority(T),T._onInit&&T._onInit(T)}T._onUpdate=D,T._initted=(!T._op||T._pt)&&!ce,V&&E<=0&&Q.render(_bigNum$1,!0,!0)},_updatePropTweens=function(T,E,C,P,I,R,F,O){var D=(T._pt&&T._ptCache||(T._ptCache={}))[E],L,B,V,U;if(!D)for(D=T._ptCache[E]=[],V=T._ptLookup,U=T._targets.length;U--;){if(L=V[U][E],L&&L.d&&L.d._pt)for(L=L.d._pt;L&&L.p!==E&&L.fp!==E;)L=L._next;if(!L)return _forceAllPropTweens=1,T.vars[E]="+=0",_initTween(T,F),_forceAllPropTweens=0,O?_warn(E+" not eligible for reset"):1;D.push(L)}for(U=D.length;U--;)B=D[U],L=B._pt||B,L.s=(P||P===0)&&!I?P:L.s+(P||0)+R*L.c,L.c=C-L.s,B.e&&(B.e=_round(C)+getUnit(B.e)),B.b&&(B.b=L.s+getUnit(B.b))},_addAliasesToVars=function(T,E){var C=T[0]?_getCache(T[0]).harness:0,P=C&&C.aliases,I,R,F,O;if(!P)return E;I=_merge({},E);for(R in P)if(R in I)for(O=P[R].split(","),F=O.length;F--;)I[O[F]]=I[R];return I},_parseKeyframe=function(T,E,C,P){var I=E.ease||P||"power1.inOut",R,F;if(_isArray(E))F=C[T]||(C[T]=[]),E.forEach(function(O,D){return F.push({t:D/(E.length-1)*100,v:O,e:I})});else for(R in E)F=C[R]||(C[R]=[]),R==="ease"||F.push({t:parseFloat(T),v:E[R],e:I})},_parseFuncOrString=function(T,E,C,P,I){return _isFunction(T)?T.call(E,C,P,I):_isString(T)&&~T.indexOf("random(")?_replaceRandom(T):T},_staggerTweenProps=_callbackNames+"repeat,repeatDelay,yoyo,repeatRefresh,yoyoEase,autoRevert",_staggerPropsToSkip={};_forEachName(_staggerTweenProps+",id,stagger,delay,duration,paused,scrollTrigger",function(A){return _staggerPropsToSkip[A]=1});var Tween=function(A){_inheritsLoose(T,A);function T(C,P,I,R){var F;typeof P=="number"&&(I.duration=P,P=I,I=null),F=A.call(this,R?P:_inheritDefaults(P))||this;var O=F.vars,D=O.duration,L=O.delay,B=O.immediateRender,V=O.stagger,U=O.overwrite,z=O.keyframes,W=O.defaults,Z=O.scrollTrigger,X=O.yoyoEase,K=P.parent||_globalTimeline,Y=(_isArray(C)||_isTypedArray(C)?_isNumber(C[0]):"length"in P)?[C]:toArray(C),Q,J,te,ie,ne,he,ve,ye;if(F._targets=Y.length?_harness(Y):_warn("GSAP target "+C+" not found. https://gsap.com",!_config.nullTargetWarn)||[],F._ptLookup=[],F._overwrite=U,z||V||_isFuncOrString(D)||_isFuncOrString(L)){if(P=F.vars,Q=F.timeline=new Timeline$1({data:"nested",defaults:W||{},targets:K&&K.data==="nested"?K.vars.targets:Y}),Q.kill(),Q.parent=Q._dp=_assertThisInitialized(F),Q._start=0,V||_isFuncOrString(D)||_isFuncOrString(L)){if(ie=Y.length,ve=V&&distribute(V),_isObject(V))for(ne in V)~_staggerTweenProps.indexOf(ne)&&(ye||(ye={}),ye[ne]=V[ne]);for(J=0;J<ie;J++)te=_copyExcluding(P,_staggerPropsToSkip),te.stagger=0,X&&(te.yoyoEase=X),ye&&_merge(te,ye),he=Y[J],te.duration=+_parseFuncOrString(D,_assertThisInitialized(F),J,he,Y),te.delay=(+_parseFuncOrString(L,_assertThisInitialized(F),J,he,Y)||0)-F._delay,!V&&ie===1&&te.delay&&(F._delay=L=te.delay,F._start+=L,te.delay=0),Q.to(he,te,ve?ve(J,he,Y):0),Q._ease=_easeMap.none;Q.duration()?D=L=0:F.timeline=0}else if(z){_inheritDefaults(_setDefaults(Q.vars.defaults,{ease:"none"})),Q._ease=_parseEase(z.ease||P.ease||"none");var de=0,fe,ue,ge;if(_isArray(z))z.forEach(function(ae){return Q.to(Y,ae,">")}),Q.duration();else{te={};for(ne in z)ne==="ease"||ne==="easeEach"||_parseKeyframe(ne,z[ne],te,z.easeEach);for(ne in te)for(fe=te[ne].sort(function(ae,ce){return ae.t-ce.t}),de=0,J=0;J<fe.length;J++)ue=fe[J],ge={ease:ue.e,duration:(ue.t-(J?fe[J-1].t:0))/100*D},ge[ne]=ue.v,Q.to(Y,ge,de),de+=ge.duration;Q.duration()<D&&Q.to({},{duration:D-Q.duration()})}}D||F.duration(D=Q.duration())}else F.timeline=0;return U===!0&&!_suppressOverwrites&&(_overwritingTween=_assertThisInitialized(F),_globalTimeline.killTweensOf(Y),_overwritingTween=0),_addToTimeline(K,_assertThisInitialized(F),I),P.reversed&&F.reverse(),P.paused&&F.paused(!0),(B||!D&&!z&&F._start===_roundPrecise(K._time)&&_isNotFalse(B)&&_hasNoPausedAncestors(_assertThisInitialized(F))&&K.data!=="nested")&&(F._tTime=-_tinyNum,F.render(Math.max(0,-L)||0)),Z&&_scrollTrigger(_assertThisInitialized(F),Z),F}var E=T.prototype;return E.render=function(P,I,R){var F=this._time,O=this._tDur,D=this._dur,L=P<0,B=P>O-_tinyNum&&!L?O:P<_tinyNum?0:P,V,U,z,W,Z,X,K,Y,Q;if(!D)_renderZeroDurationTween(this,P,I,R);else if(B!==this._tTime||!P||R||!this._initted&&this._tTime||this._startAt&&this._zTime<0!==L){if(V=B,Y=this.timeline,this._repeat){if(W=D+this._rDelay,this._repeat<-1&&L)return this.totalTime(W*100+P,I,R);if(V=_roundPrecise(B%W),B===O?(z=this._repeat,V=D):(z=~~(B/W),z&&z===_roundPrecise(B/W)&&(V=D,z--),V>D&&(V=D)),X=this._yoyo&&z&1,X&&(Q=this._yEase,V=D-V),Z=_animationCycle(this._tTime,W),V===F&&!R&&this._initted&&z===Z)return this._tTime=B,this;z!==Z&&(Y&&this._yEase&&_propagateYoyoEase(Y,X),this.vars.repeatRefresh&&!X&&!this._lock&&this._time!==W&&this._initted&&(this._lock=R=1,this.render(_roundPrecise(W*z),!0).invalidate()._lock=0))}if(!this._initted){if(_attemptInitTween(this,L?P:V,R,I,B))return this._tTime=0,this;if(F!==this._time&&!(R&&this.vars.repeatRefresh&&z!==Z))return this;if(D!==this._dur)return this.render(P,I,R)}if(this._tTime=B,this._time=V,!this._act&&this._ts&&(this._act=1,this._lazy=0),this.ratio=K=(Q||this._ease)(V/D),this._from&&(this.ratio=K=1-K),V&&!F&&!I&&!z&&(_callback(this,"onStart"),this._tTime!==B))return this;for(U=this._pt;U;)U.r(K,U.d),U=U._next;Y&&Y.render(P<0?P:Y._dur*Y._ease(V/this._dur),I,R)||this._startAt&&(this._zTime=P),this._onUpdate&&!I&&(L&&_rewindStartAt(this,P,I,R),_callback(this,"onUpdate")),this._repeat&&z!==Z&&this.vars.onRepeat&&!I&&this.parent&&_callback(this,"onRepeat"),(B===this._tDur||!B)&&this._tTime===B&&(L&&!this._onUpdate&&_rewindStartAt(this,P,!0,!0),(P||!D)&&(B===this._tDur&&this._ts>0||!B&&this._ts<0)&&_removeFromParent(this,1),!I&&!(L&&!F)&&(B||F||X)&&(_callback(this,B===O?"onComplete":"onReverseComplete",!0),this._prom&&!(B<O&&this.timeScale()>0)&&this._prom()))}return this},E.targets=function(){return this._targets},E.invalidate=function(P){return(!P||!this.vars.runBackwards)&&(this._startAt=0),this._pt=this._op=this._onUpdate=this._lazy=this.ratio=0,this._ptLookup=[],this.timeline&&this.timeline.invalidate(P),A.prototype.invalidate.call(this,P)},E.resetTo=function(P,I,R,F,O){_tickerActive||_ticker.wake(),this._ts||this.play();var D=Math.min(this._dur,(this._dp._time-this._start)*this._ts),L;return this._initted||_initTween(this,D),L=this._ease(D/this._dur),_updatePropTweens(this,P,I,R,F,L,D,O)?this.resetTo(P,I,R,F,1):(_alignPlayhead(this,0),this.parent||_addLinkedListItem(this._dp,this,"_first","_last",this._dp._sort?"_start":0),this.render(0))},E.kill=function(P,I){if(I===void 0&&(I="all"),!P&&(!I||I==="all"))return this._lazy=this._pt=0,this.parent?_interrupt(this):this;if(this.timeline){var R=this.timeline.totalDuration();return this.timeline.killTweensOf(P,I,_overwritingTween&&_overwritingTween.vars.overwrite!==!0)._first||_interrupt(this),this.parent&&R!==this.timeline.totalDuration()&&_setDuration(this,this._dur*this.timeline._tDur/R,0,1),this}var F=this._targets,O=P?toArray(P):F,D=this._ptLookup,L=this._pt,B,V,U,z,W,Z,X;if((!I||I==="all")&&_arraysMatch(F,O))return I==="all"&&(this._pt=0),_interrupt(this);for(B=this._op=this._op||[],I!=="all"&&(_isString(I)&&(W={},_forEachName(I,function(K){return W[K]=1}),I=W),I=_addAliasesToVars(F,I)),X=F.length;X--;)if(~O.indexOf(F[X])){V=D[X],I==="all"?(B[X]=I,z=V,U={}):(U=B[X]=B[X]||{},z=I);for(W in z)Z=V&&V[W],Z&&((!("kill"in Z.d)||Z.d.kill(W)===!0)&&_removeLinkedListItem(this,Z,"_pt"),delete V[W]),U!=="all"&&(U[W]=1)}return this._initted&&!this._pt&&L&&_interrupt(this),this},T.to=function(P,I){return new T(P,I,arguments[2])},T.from=function(P,I){return _createTweenType(1,arguments)},T.delayedCall=function(P,I,R,F){return new T(I,0,{immediateRender:!1,lazy:!1,overwrite:!1,delay:P,onComplete:I,onReverseComplete:I,onCompleteParams:R,onReverseCompleteParams:R,callbackScope:F})},T.fromTo=function(P,I,R){return _createTweenType(2,arguments)},T.set=function(P,I){return I.duration=0,I.repeatDelay||(I.repeat=0),new T(P,I)},T.killTweensOf=function(P,I,R){return _globalTimeline.killTweensOf(P,I,R)},T}(Animation);_setDefaults(Tween.prototype,{_targets:[],_lazy:0,_startAt:0,_op:0,_onInit:0});_forEachName("staggerTo,staggerFrom,staggerFromTo",function(A){Tween[A]=function(){var T=new Timeline$1,E=_slice.call(arguments,0);return E.splice(A==="staggerFromTo"?5:4,0,0),T[A].apply(T,E)}});var _setterPlain=function(T,E,C){return T[E]=C},_setterFunc=function(T,E,C){return T[E](C)},_setterFuncWithParam=function(T,E,C,P){return T[E](P.fp,C)},_setterAttribute=function(T,E,C){return T.setAttribute(E,C)},_getSetter=function(T,E){return _isFunction(T[E])?_setterFunc:_isUndefined(T[E])&&T.setAttribute?_setterAttribute:_setterPlain},_renderPlain=function(T,E){return E.set(E.t,E.p,Math.round((E.s+E.c*T)*1e6)/1e6,E)},_renderBoolean=function(T,E){return E.set(E.t,E.p,!!(E.s+E.c*T),E)},_renderComplexString=function(T,E){var C=E._pt,P="";if(!T&&E.b)P=E.b;else if(T===1&&E.e)P=E.e;else{for(;C;)P=C.p+(C.m?C.m(C.s+C.c*T):Math.round((C.s+C.c*T)*1e4)/1e4)+P,C=C._next;P+=E.c}E.set(E.t,E.p,P,E)},_renderPropTweens=function(T,E){for(var C=E._pt;C;)C.r(T,C.d),C=C._next},_addPluginModifier=function(T,E,C,P){for(var I=this._pt,R;I;)R=I._next,I.p===P&&I.modifier(T,E,C),I=R},_killPropTweensOf=function(T){for(var E=this._pt,C,P;E;)P=E._next,E.p===T&&!E.op||E.op===T?_removeLinkedListItem(this,E,"_pt"):E.dep||(C=1),E=P;return!C},_setterWithModifier=function(T,E,C,P){P.mSet(T,E,P.m.call(P.tween,C,P.mt),P)},_sortPropTweensByPriority=function(T){for(var E=T._pt,C,P,I,R;E;){for(C=E._next,P=I;P&&P.pr>E.pr;)P=P._next;(E._prev=P?P._prev:R)?E._prev._next=E:I=E,(E._next=P)?P._prev=E:R=E,E=C}T._pt=I},PropTween=function(){function A(E,C,P,I,R,F,O,D,L){this.t=C,this.s=I,this.c=R,this.p=P,this.r=F||_renderPlain,this.d=O||this,this.set=D||_setterPlain,this.pr=L||0,this._next=E,E&&(E._prev=this)}var T=A.prototype;return T.modifier=function(C,P,I){this.mSet=this.mSet||this.set,this.set=_setterWithModifier,this.m=C,this.mt=I,this.tween=P},A}();_forEachName(_callbackNames+"parent,duration,ease,delay,overwrite,runBackwards,startAt,yoyo,immediateRender,repeat,repeatDelay,data,paused,reversed,lazy,callbackScope,stringFilter,id,yoyoEase,stagger,inherit,repeatRefresh,keyframes,autoRevert,scrollTrigger",function(A){return _reservedProps[A]=1});_globals.TweenMax=_globals.TweenLite=Tween;_globals.TimelineLite=_globals.TimelineMax=Timeline$1;_globalTimeline=new Timeline$1({sortChildren:!1,defaults:_defaults,autoRemoveChildren:!0,id:"root",smoothChildTiming:!0});_config.stringFilter=_colorStringFilter;var _media=[],_listeners={},_emptyArray=[],_lastMediaTime=0,_contextID=0,_dispatch=function(T){return(_listeners[T]||_emptyArray).map(function(E){return E()})},_onMediaChange=function(){var T=Date.now(),E=[];T-_lastMediaTime>2&&(_dispatch("matchMediaInit"),_media.forEach(function(C){var P=C.queries,I=C.conditions,R,F,O,D;for(F in P)R=_win$1.matchMedia(P[F]).matches,R&&(O=1),R!==I[F]&&(I[F]=R,D=1);D&&(C.revert(),O&&E.push(C))}),_dispatch("matchMediaRevert"),E.forEach(function(C){return C.onMatch(C,function(P){return C.add(null,P)})}),_lastMediaTime=T,_dispatch("matchMedia"))},Context$1=function(){function A(E,C){this.selector=C&&selector(C),this.data=[],this._r=[],this.isReverted=!1,this.id=_contextID++,E&&this.add(E)}var T=A.prototype;return T.add=function(C,P,I){_isFunction(C)&&(I=P,P=C,C=_isFunction);var R=this,F=function(){var D=_context,L=R.selector,B;return D&&D!==R&&D.data.push(R),I&&(R.selector=selector(I)),_context=R,B=P.apply(R,arguments),_isFunction(B)&&R._r.push(B),_context=D,R.selector=L,R.isReverted=!1,B};return R.last=F,C===_isFunction?F(R,function(O){return R.add(null,O)}):C?R[C]=F:F},T.ignore=function(C){var P=_context;_context=null,C(this),_context=P},T.getTweens=function(){var C=[];return this.data.forEach(function(P){return P instanceof A?C.push.apply(C,P.getTweens()):P instanceof Tween&&!(P.parent&&P.parent.data==="nested")&&C.push(P)}),C},T.clear=function(){this._r.length=this.data.length=0},T.kill=function(C,P){var I=this;if(C?function(){for(var F=I.getTweens(),O=I.data.length,D;O--;)D=I.data[O],D.data==="isFlip"&&(D.revert(),D.getChildren(!0,!0,!1).forEach(function(L){return F.splice(F.indexOf(L),1)}));for(F.map(function(L){return{g:L._dur||L._delay||L._sat&&!L._sat.vars.immediateRender?L.globalTime(0):-1/0,t:L}}).sort(function(L,B){return B.g-L.g||-1/0}).forEach(function(L){return L.t.revert(C)}),O=I.data.length;O--;)D=I.data[O],D instanceof Timeline$1?D.data!=="nested"&&(D.scrollTrigger&&D.scrollTrigger.revert(),D.kill()):!(D instanceof Tween)&&D.revert&&D.revert(C);I._r.forEach(function(L){return L(C,I)}),I.isReverted=!0}():this.data.forEach(function(F){return F.kill&&F.kill()}),this.clear(),P)for(var R=_media.length;R--;)_media[R].id===this.id&&_media.splice(R,1)},T.revert=function(C){this.kill(C||{})},A}(),MatchMedia=function(){function A(E){this.contexts=[],this.scope=E,_context&&_context.data.push(this)}var T=A.prototype;return T.add=function(C,P,I){_isObject(C)||(C={matches:C});var R=new Context$1(0,I||this.scope),F=R.conditions={},O,D,L;_context&&!R.selector&&(R.selector=_context.selector),this.contexts.push(R),P=R.add("onMatch",P),R.queries=C;for(D in C)D==="all"?L=1:(O=_win$1.matchMedia(C[D]),O&&(_media.indexOf(R)<0&&_media.push(R),(F[D]=O.matches)&&(L=1),O.addListener?O.addListener(_onMediaChange):O.addEventListener("change",_onMediaChange)));return L&&P(R,function(B){return R.add(null,B)}),this},T.revert=function(C){this.kill(C||{})},T.kill=function(C){this.contexts.forEach(function(P){return P.kill(C,!0)})},A}(),_gsap={registerPlugin:function(){for(var T=arguments.length,E=new Array(T),C=0;C<T;C++)E[C]=arguments[C];E.forEach(function(P){return _createPlugin(P)})},timeline:function(T){return new Timeline$1(T)},getTweensOf:function(T,E){return _globalTimeline.getTweensOf(T,E)},getProperty:function(T,E,C,P){_isString(T)&&(T=toArray(T)[0]);var I=_getCache(T||{}).get,R=C?_passThrough:_numericIfPossible;return C==="native"&&(C=""),T&&(E?R((_plugins[E]&&_plugins[E].get||I)(T,E,C,P)):function(F,O,D){return R((_plugins[F]&&_plugins[F].get||I)(T,F,O,D))})},quickSetter:function(T,E,C){if(T=toArray(T),T.length>1){var P=T.map(function(L){return gsap.quickSetter(L,E,C)}),I=P.length;return function(L){for(var B=I;B--;)P[B](L)}}T=T[0]||{};var R=_plugins[E],F=_getCache(T),O=F.harness&&(F.harness.aliases||{})[E]||E,D=R?function(L){var B=new R;_quickTween._pt=0,B.init(T,C?L+C:L,_quickTween,0,[T]),B.render(1,B),_quickTween._pt&&_renderPropTweens(1,_quickTween)}:F.set(T,O);return R?D:function(L){return D(T,O,C?L+C:L,F,1)}},quickTo:function(T,E,C){var P,I=gsap.to(T,_merge((P={},P[E]="+=0.1",P.paused=!0,P),C||{})),R=function(O,D,L){return I.resetTo(E,O,D,L)};return R.tween=I,R},isTweening:function(T){return _globalTimeline.getTweensOf(T,!0).length>0},defaults:function(T){return T&&T.ease&&(T.ease=_parseEase(T.ease,_defaults.ease)),_mergeDeep(_defaults,T||{})},config:function(T){return _mergeDeep(_config,T||{})},registerEffect:function(T){var E=T.name,C=T.effect,P=T.plugins,I=T.defaults,R=T.extendTimeline;(P||"").split(",").forEach(function(F){return F&&!_plugins[F]&&!_globals[F]&&_warn(E+" effect requires "+F+" plugin.")}),_effects[E]=function(F,O,D){return C(toArray(F),_setDefaults(O||{},I),D)},R&&(Timeline$1.prototype[E]=function(F,O,D){return this.add(_effects[E](F,_isObject(O)?O:(D=O)&&{},this),D)})},registerEase:function(T,E){_easeMap[T]=_parseEase(E)},parseEase:function(T,E){return arguments.length?_parseEase(T,E):_easeMap},getById:function(T){return _globalTimeline.getById(T)},exportRoot:function(T,E){T===void 0&&(T={});var C=new Timeline$1(T),P,I;for(C.smoothChildTiming=_isNotFalse(T.smoothChildTiming),_globalTimeline.remove(C),C._dp=0,C._time=C._tTime=_globalTimeline._time,P=_globalTimeline._first;P;)I=P._next,(E||!(!P._dur&&P instanceof Tween&&P.vars.onComplete===P._targets[0]))&&_addToTimeline(C,P,P._start-P._delay),P=I;return _addToTimeline(_globalTimeline,C,0),C},context:function(T,E){return T?new Context$1(T,E):_context},matchMedia:function(T){return new MatchMedia(T)},matchMediaRefresh:function(){return _media.forEach(function(T){var E=T.conditions,C,P;for(P in E)E[P]&&(E[P]=!1,C=1);C&&T.revert()})||_onMediaChange()},addEventListener:function(T,E){var C=_listeners[T]||(_listeners[T]=[]);~C.indexOf(E)||C.push(E)},removeEventListener:function(T,E){var C=_listeners[T],P=C&&C.indexOf(E);P>=0&&C.splice(P,1)},utils:{wrap,wrapYoyo,distribute,random:random$1,snap,normalize,getUnit,clamp:clamp$1,splitColor,toArray,selector,mapRange,pipe,unitize,interpolate,shuffle},install:_install,effects:_effects,ticker:_ticker,updateRoot:Timeline$1.updateRoot,plugins:_plugins,globalTimeline:_globalTimeline,core:{PropTween,globals:_addGlobal,Tween,Timeline:Timeline$1,Animation,getCache:_getCache,_removeLinkedListItem,reverting:function(){return _reverting$1},context:function(T){return T&&_context&&(_context.data.push(T),T._ctx=_context),_context},suppressOverwrites:function(T){return _suppressOverwrites=T}}};_forEachName("to,from,fromTo,delayedCall,set,killTweensOf",function(A){return _gsap[A]=Tween[A]});_ticker.add(Timeline$1.updateRoot);_quickTween=_gsap.to({},{duration:0});var _getPluginPropTween=function(T,E){for(var C=T._pt;C&&C.p!==E&&C.op!==E&&C.fp!==E;)C=C._next;return C},_addModifiers=function(T,E){var C=T._targets,P,I,R;for(P in E)for(I=C.length;I--;)R=T._ptLookup[I][P],R&&(R=R.d)&&(R._pt&&(R=_getPluginPropTween(R,P)),R&&R.modifier&&R.modifier(E[P],T,C[I],P))},_buildModifierPlugin=function(T,E){return{name:T,rawVars:1,init:function(P,I,R){R._onInit=function(F){var O,D;if(_isString(I)&&(O={},_forEachName(I,function(L){return O[L]=1}),I=O),E){O={};for(D in I)O[D]=E(I[D]);I=O}_addModifiers(F,I)}}}},gsap=_gsap.registerPlugin({name:"attr",init:function(T,E,C,P,I){var R,F,O;this.tween=C;for(R in E)O=T.getAttribute(R)||"",F=this.add(T,"setAttribute",(O||0)+"",E[R],P,I,0,0,R),F.op=R,F.b=O,this._props.push(R)},render:function(T,E){for(var C=E._pt;C;)_reverting$1?C.set(C.t,C.p,C.b,C):C.r(T,C.d),C=C._next}},{name:"endArray",init:function(T,E){for(var C=E.length;C--;)this.add(T,C,T[C]||0,E[C],0,0,0,0,0,1)}},_buildModifierPlugin("roundProps",_roundModifier),_buildModifierPlugin("modifiers"),_buildModifierPlugin("snap",snap))||_gsap;Tween.version=Timeline$1.version=gsap.version="3.12.5";_coreReady=1;_windowExists$1()&&_wake();_easeMap.Power0;_easeMap.Power1;_easeMap.Power2;_easeMap.Power3;_easeMap.Power4;_easeMap.Linear;_easeMap.Quad;_easeMap.Cubic;_easeMap.Quart;_easeMap.Quint;_easeMap.Strong;_easeMap.Elastic;_easeMap.Back;_easeMap.SteppedEase;_easeMap.Bounce;_easeMap.Sine;_easeMap.Expo;_easeMap.Circ;/*!
 * CSSPlugin 3.12.5
 * https://gsap.com
 *
 * Copyright 2008-2024, GreenSock. All rights reserved.
 * Subject to the terms at https://gsap.com/standard-license or for
 * Club GSAP members, the agreement issued with that membership.
 * @author: Jack Doyle, jack@greensock.com
*/var _win,_doc,_docElement,_pluginInitted,_tempDiv,_recentSetterPlugin,_reverting,_windowExists=function(){return typeof window<"u"},_transformProps={},_RAD2DEG=180/Math.PI,_DEG2RAD=Math.PI/180,_atan2=Math.atan2,_bigNum=1e8,_capsExp=/([A-Z])/g,_horizontalExp=/(left|right|width|margin|padding|x)/i,_complexExp=/[\s,\(]\S/,_propertyAliases={autoAlpha:"opacity,visibility",scale:"scaleX,scaleY",alpha:"opacity"},_renderCSSProp=function(T,E){return E.set(E.t,E.p,Math.round((E.s+E.c*T)*1e4)/1e4+E.u,E)},_renderPropWithEnd=function(T,E){return E.set(E.t,E.p,T===1?E.e:Math.round((E.s+E.c*T)*1e4)/1e4+E.u,E)},_renderCSSPropWithBeginning=function(T,E){return E.set(E.t,E.p,T?Math.round((E.s+E.c*T)*1e4)/1e4+E.u:E.b,E)},_renderRoundedCSSProp=function(T,E){var C=E.s+E.c*T;E.set(E.t,E.p,~~(C+(C<0?-.5:.5))+E.u,E)},_renderNonTweeningValue=function(T,E){return E.set(E.t,E.p,T?E.e:E.b,E)},_renderNonTweeningValueOnlyAtEnd=function(T,E){return E.set(E.t,E.p,T!==1?E.b:E.e,E)},_setterCSSStyle=function(T,E,C){return T.style[E]=C},_setterCSSProp=function(T,E,C){return T.style.setProperty(E,C)},_setterTransform=function(T,E,C){return T._gsap[E]=C},_setterScale=function(T,E,C){return T._gsap.scaleX=T._gsap.scaleY=C},_setterScaleWithRender=function(T,E,C,P,I){var R=T._gsap;R.scaleX=R.scaleY=C,R.renderTransform(I,R)},_setterTransformWithRender=function(T,E,C,P,I){var R=T._gsap;R[E]=C,R.renderTransform(I,R)},_transformProp="transform",_transformOriginProp=_transformProp+"Origin",_saveStyle=function A(T,E){var C=this,P=this.target,I=P.style,R=P._gsap;if(T in _transformProps&&I){if(this.tfm=this.tfm||{},T!=="transform")T=_propertyAliases[T]||T,~T.indexOf(",")?T.split(",").forEach(function(F){return C.tfm[F]=_get(P,F)}):this.tfm[T]=R.x?R[T]:_get(P,T),T===_transformOriginProp&&(this.tfm.zOrigin=R.zOrigin);else return _propertyAliases.transform.split(",").forEach(function(F){return A.call(C,F,E)});if(this.props.indexOf(_transformProp)>=0)return;R.svg&&(this.svgo=P.getAttribute("data-svg-origin"),this.props.push(_transformOriginProp,E,"")),T=_transformProp}(I||E)&&this.props.push(T,E,I[T])},_removeIndependentTransforms=function(T){T.translate&&(T.removeProperty("translate"),T.removeProperty("scale"),T.removeProperty("rotate"))},_revertStyle=function(){var T=this.props,E=this.target,C=E.style,P=E._gsap,I,R;for(I=0;I<T.length;I+=3)T[I+1]?E[T[I]]=T[I+2]:T[I+2]?C[T[I]]=T[I+2]:C.removeProperty(T[I].substr(0,2)==="--"?T[I]:T[I].replace(_capsExp,"-$1").toLowerCase());if(this.tfm){for(R in this.tfm)P[R]=this.tfm[R];P.svg&&(P.renderTransform(),E.setAttribute("data-svg-origin",this.svgo||"")),I=_reverting(),(!I||!I.isStart)&&!C[_transformProp]&&(_removeIndependentTransforms(C),P.zOrigin&&C[_transformOriginProp]&&(C[_transformOriginProp]+=" "+P.zOrigin+"px",P.zOrigin=0,P.renderTransform()),P.uncache=1)}},_getStyleSaver=function(T,E){var C={target:T,props:[],revert:_revertStyle,save:_saveStyle};return T._gsap||gsap.core.getCache(T),E&&E.split(",").forEach(function(P){return C.save(P)}),C},_supports3D,_createElement=function(T,E){var C=_doc.createElementNS?_doc.createElementNS((E||"http://www.w3.org/1999/xhtml").replace(/^https/,"http"),T):_doc.createElement(T);return C&&C.style?C:_doc.createElement(T)},_getComputedProperty=function A(T,E,C){var P=getComputedStyle(T);return P[E]||P.getPropertyValue(E.replace(_capsExp,"-$1").toLowerCase())||P.getPropertyValue(E)||!C&&A(T,_checkPropPrefix(E)||E,1)||""},_prefixes="O,Moz,ms,Ms,Webkit".split(","),_checkPropPrefix=function(T,E,C){var P=E||_tempDiv,I=P.style,R=5;if(T in I&&!C)return T;for(T=T.charAt(0).toUpperCase()+T.substr(1);R--&&!(_prefixes[R]+T in I););return R<0?null:(R===3?"ms":R>=0?_prefixes[R]:"")+T},_initCore=function(){_windowExists()&&window.document&&(_win=window,_doc=_win.document,_docElement=_doc.documentElement,_tempDiv=_createElement("div")||{style:{}},_createElement("div"),_transformProp=_checkPropPrefix(_transformProp),_transformOriginProp=_transformProp+"Origin",_tempDiv.style.cssText="border-width:0;line-height:0;position:absolute;padding:0",_supports3D=!!_checkPropPrefix("perspective"),_reverting=gsap.core.reverting,_pluginInitted=1)},_getBBoxHack=function A(T){var E=_createElement("svg",this.ownerSVGElement&&this.ownerSVGElement.getAttribute("xmlns")||"http://www.w3.org/2000/svg"),C=this.parentNode,P=this.nextSibling,I=this.style.cssText,R;if(_docElement.appendChild(E),E.appendChild(this),this.style.display="block",T)try{R=this.getBBox(),this._gsapBBox=this.getBBox,this.getBBox=A}catch{}else this._gsapBBox&&(R=this._gsapBBox());return C&&(P?C.insertBefore(this,P):C.appendChild(this)),_docElement.removeChild(E),this.style.cssText=I,R},_getAttributeFallbacks=function(T,E){for(var C=E.length;C--;)if(T.hasAttribute(E[C]))return T.getAttribute(E[C])},_getBBox=function(T){var E;try{E=T.getBBox()}catch{E=_getBBoxHack.call(T,!0)}return E&&(E.width||E.height)||T.getBBox===_getBBoxHack||(E=_getBBoxHack.call(T,!0)),E&&!E.width&&!E.x&&!E.y?{x:+_getAttributeFallbacks(T,["x","cx","x1"])||0,y:+_getAttributeFallbacks(T,["y","cy","y1"])||0,width:0,height:0}:E},_isSVG=function(T){return!!(T.getCTM&&(!T.parentNode||T.ownerSVGElement)&&_getBBox(T))},_removeProperty=function(T,E){if(E){var C=T.style,P;E in _transformProps&&E!==_transformOriginProp&&(E=_transformProp),C.removeProperty?(P=E.substr(0,2),(P==="ms"||E.substr(0,6)==="webkit")&&(E="-"+E),C.removeProperty(P==="--"?E:E.replace(_capsExp,"-$1").toLowerCase())):C.removeAttribute(E)}},_addNonTweeningPT=function(T,E,C,P,I,R){var F=new PropTween(T._pt,E,C,0,1,R?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue);return T._pt=F,F.b=P,F.e=I,T._props.push(C),F},_nonConvertibleUnits={deg:1,rad:1,turn:1},_nonStandardLayouts={grid:1,flex:1},_convertToUnit=function A(T,E,C,P){var I=parseFloat(C)||0,R=(C+"").trim().substr((I+"").length)||"px",F=_tempDiv.style,O=_horizontalExp.test(E),D=T.tagName.toLowerCase()==="svg",L=(D?"client":"offset")+(O?"Width":"Height"),B=100,V=P==="px",U=P==="%",z,W,Z,X;if(P===R||!I||_nonConvertibleUnits[P]||_nonConvertibleUnits[R])return I;if(R!=="px"&&!V&&(I=A(T,E,C,"px")),X=T.getCTM&&_isSVG(T),(U||R==="%")&&(_transformProps[E]||~E.indexOf("adius")))return z=X?T.getBBox()[O?"width":"height"]:T[L],_round(U?I/z*B:I/100*z);if(F[O?"width":"height"]=B+(V?R:P),W=~E.indexOf("adius")||P==="em"&&T.appendChild&&!D?T:T.parentNode,X&&(W=(T.ownerSVGElement||{}).parentNode),(!W||W===_doc||!W.appendChild)&&(W=_doc.body),Z=W._gsap,Z&&U&&Z.width&&O&&Z.time===_ticker.time&&!Z.uncache)return _round(I/Z.width*B);if(U&&(E==="height"||E==="width")){var K=T.style[E];T.style[E]=B+P,z=T[L],K?T.style[E]=K:_removeProperty(T,E)}else(U||R==="%")&&!_nonStandardLayouts[_getComputedProperty(W,"display")]&&(F.position=_getComputedProperty(T,"position")),W===T&&(F.position="static"),W.appendChild(_tempDiv),z=_tempDiv[L],W.removeChild(_tempDiv),F.position="absolute";return O&&U&&(Z=_getCache(W),Z.time=_ticker.time,Z.width=W[L]),_round(V?z*I/B:z&&I?B/z*I:0)},_get=function(T,E,C,P){var I;return _pluginInitted||_initCore(),E in _propertyAliases&&E!=="transform"&&(E=_propertyAliases[E],~E.indexOf(",")&&(E=E.split(",")[0])),_transformProps[E]&&E!=="transform"?(I=_parseTransform(T,P),I=E!=="transformOrigin"?I[E]:I.svg?I.origin:_firstTwoOnly(_getComputedProperty(T,_transformOriginProp))+" "+I.zOrigin+"px"):(I=T.style[E],(!I||I==="auto"||P||~(I+"").indexOf("calc("))&&(I=_specialProps[E]&&_specialProps[E](T,E,C)||_getComputedProperty(T,E)||_getProperty(T,E)||(E==="opacity"?1:0))),C&&!~(I+"").trim().indexOf(" ")?_convertToUnit(T,E,I,C)+C:I},_tweenComplexCSSString=function(T,E,C,P){if(!C||C==="none"){var I=_checkPropPrefix(E,T,1),R=I&&_getComputedProperty(T,I,1);R&&R!==C?(E=I,C=R):E==="borderColor"&&(C=_getComputedProperty(T,"borderTopColor"))}var F=new PropTween(this._pt,T.style,E,0,1,_renderComplexString),O=0,D=0,L,B,V,U,z,W,Z,X,K,Y,Q,J;if(F.b=C,F.e=P,C+="",P+="",P==="auto"&&(W=T.style[E],T.style[E]=P,P=_getComputedProperty(T,E)||P,W?T.style[E]=W:_removeProperty(T,E)),L=[C,P],_colorStringFilter(L),C=L[0],P=L[1],V=C.match(_numWithUnitExp)||[],J=P.match(_numWithUnitExp)||[],J.length){for(;B=_numWithUnitExp.exec(P);)Z=B[0],K=P.substring(O,B.index),z?z=(z+1)%5:(K.substr(-5)==="rgba("||K.substr(-5)==="hsla(")&&(z=1),Z!==(W=V[D++]||"")&&(U=parseFloat(W)||0,Q=W.substr((U+"").length),Z.charAt(1)==="="&&(Z=_parseRelative(U,Z)+Q),X=parseFloat(Z),Y=Z.substr((X+"").length),O=_numWithUnitExp.lastIndex-Y.length,Y||(Y=Y||_config.units[E]||Q,O===P.length&&(P+=Y,F.e+=Y)),Q!==Y&&(U=_convertToUnit(T,E,W,Y)||0),F._pt={_next:F._pt,p:K||D===1?K:",",s:U,c:X-U,m:z&&z<4||E==="zIndex"?Math.round:0});F.c=O<P.length?P.substring(O,P.length):""}else F.r=E==="display"&&P==="none"?_renderNonTweeningValueOnlyAtEnd:_renderNonTweeningValue;return _relExp.test(P)&&(F.e=0),this._pt=F,F},_keywordToPercent={top:"0%",bottom:"100%",left:"0%",right:"100%",center:"50%"},_convertKeywordsToPercentages=function(T){var E=T.split(" "),C=E[0],P=E[1]||"50%";return(C==="top"||C==="bottom"||P==="left"||P==="right")&&(T=C,C=P,P=T),E[0]=_keywordToPercent[C]||C,E[1]=_keywordToPercent[P]||P,E.join(" ")},_renderClearProps=function(T,E){if(E.tween&&E.tween._time===E.tween._dur){var C=E.t,P=C.style,I=E.u,R=C._gsap,F,O,D;if(I==="all"||I===!0)P.cssText="",O=1;else for(I=I.split(","),D=I.length;--D>-1;)F=I[D],_transformProps[F]&&(O=1,F=F==="transformOrigin"?_transformOriginProp:_transformProp),_removeProperty(C,F);O&&(_removeProperty(C,_transformProp),R&&(R.svg&&C.removeAttribute("transform"),_parseTransform(C,1),R.uncache=1,_removeIndependentTransforms(P)))}},_specialProps={clearProps:function(T,E,C,P,I){if(I.data!=="isFromStart"){var R=T._pt=new PropTween(T._pt,E,C,0,0,_renderClearProps);return R.u=P,R.pr=-10,R.tween=I,T._props.push(C),1}}},_identity2DMatrix=[1,0,0,1,0,0],_rotationalProperties={},_isNullTransform=function(T){return T==="matrix(1, 0, 0, 1, 0, 0)"||T==="none"||!T},_getComputedTransformMatrixAsArray=function(T){var E=_getComputedProperty(T,_transformProp);return _isNullTransform(E)?_identity2DMatrix:E.substr(7).match(_numExp).map(_round)},_getMatrix=function(T,E){var C=T._gsap||_getCache(T),P=T.style,I=_getComputedTransformMatrixAsArray(T),R,F,O,D;return C.svg&&T.getAttribute("transform")?(O=T.transform.baseVal.consolidate().matrix,I=[O.a,O.b,O.c,O.d,O.e,O.f],I.join(",")==="1,0,0,1,0,0"?_identity2DMatrix:I):(I===_identity2DMatrix&&!T.offsetParent&&T!==_docElement&&!C.svg&&(O=P.display,P.display="block",R=T.parentNode,(!R||!T.offsetParent)&&(D=1,F=T.nextElementSibling,_docElement.appendChild(T)),I=_getComputedTransformMatrixAsArray(T),O?P.display=O:_removeProperty(T,"display"),D&&(F?R.insertBefore(T,F):R?R.appendChild(T):_docElement.removeChild(T))),E&&I.length>6?[I[0],I[1],I[4],I[5],I[12],I[13]]:I)},_applySVGOrigin=function(T,E,C,P,I,R){var F=T._gsap,O=I||_getMatrix(T,!0),D=F.xOrigin||0,L=F.yOrigin||0,B=F.xOffset||0,V=F.yOffset||0,U=O[0],z=O[1],W=O[2],Z=O[3],X=O[4],K=O[5],Y=E.split(" "),Q=parseFloat(Y[0])||0,J=parseFloat(Y[1])||0,te,ie,ne,he;C?O!==_identity2DMatrix&&(ie=U*Z-z*W)&&(ne=Q*(Z/ie)+J*(-W/ie)+(W*K-Z*X)/ie,he=Q*(-z/ie)+J*(U/ie)-(U*K-z*X)/ie,Q=ne,J=he):(te=_getBBox(T),Q=te.x+(~Y[0].indexOf("%")?Q/100*te.width:Q),J=te.y+(~(Y[1]||Y[0]).indexOf("%")?J/100*te.height:J)),P||P!==!1&&F.smooth?(X=Q-D,K=J-L,F.xOffset=B+(X*U+K*W)-X,F.yOffset=V+(X*z+K*Z)-K):F.xOffset=F.yOffset=0,F.xOrigin=Q,F.yOrigin=J,F.smooth=!!P,F.origin=E,F.originIsAbsolute=!!C,T.style[_transformOriginProp]="0px 0px",R&&(_addNonTweeningPT(R,F,"xOrigin",D,Q),_addNonTweeningPT(R,F,"yOrigin",L,J),_addNonTweeningPT(R,F,"xOffset",B,F.xOffset),_addNonTweeningPT(R,F,"yOffset",V,F.yOffset)),T.setAttribute("data-svg-origin",Q+" "+J)},_parseTransform=function(T,E){var C=T._gsap||new GSCache(T);if("x"in C&&!E&&!C.uncache)return C;var P=T.style,I=C.scaleX<0,R="px",F="deg",O=getComputedStyle(T),D=_getComputedProperty(T,_transformOriginProp)||"0",L,B,V,U,z,W,Z,X,K,Y,Q,J,te,ie,ne,he,ve,ye,de,fe,ue,ge,ae,ce,se,le,_e,me,Ee,Pe,Ce,ke;return L=B=V=W=Z=X=K=Y=Q=0,U=z=1,C.svg=!!(T.getCTM&&_isSVG(T)),O.translate&&((O.translate!=="none"||O.scale!=="none"||O.rotate!=="none")&&(P[_transformProp]=(O.translate!=="none"?"translate3d("+(O.translate+" 0 0").split(" ").slice(0,3).join(", ")+") ":"")+(O.rotate!=="none"?"rotate("+O.rotate+") ":"")+(O.scale!=="none"?"scale("+O.scale.split(" ").join(",")+") ":"")+(O[_transformProp]!=="none"?O[_transformProp]:"")),P.scale=P.rotate=P.translate="none"),ie=_getMatrix(T,C.svg),C.svg&&(C.uncache?(se=T.getBBox(),D=C.xOrigin-se.x+"px "+(C.yOrigin-se.y)+"px",ce=""):ce=!E&&T.getAttribute("data-svg-origin"),_applySVGOrigin(T,ce||D,!!ce||C.originIsAbsolute,C.smooth!==!1,ie)),J=C.xOrigin||0,te=C.yOrigin||0,ie!==_identity2DMatrix&&(ye=ie[0],de=ie[1],fe=ie[2],ue=ie[3],L=ge=ie[4],B=ae=ie[5],ie.length===6?(U=Math.sqrt(ye*ye+de*de),z=Math.sqrt(ue*ue+fe*fe),W=ye||de?_atan2(de,ye)*_RAD2DEG:0,K=fe||ue?_atan2(fe,ue)*_RAD2DEG+W:0,K&&(z*=Math.abs(Math.cos(K*_DEG2RAD))),C.svg&&(L-=J-(J*ye+te*fe),B-=te-(J*de+te*ue))):(ke=ie[6],Pe=ie[7],_e=ie[8],me=ie[9],Ee=ie[10],Ce=ie[11],L=ie[12],B=ie[13],V=ie[14],ne=_atan2(ke,Ee),Z=ne*_RAD2DEG,ne&&(he=Math.cos(-ne),ve=Math.sin(-ne),ce=ge*he+_e*ve,se=ae*he+me*ve,le=ke*he+Ee*ve,_e=ge*-ve+_e*he,me=ae*-ve+me*he,Ee=ke*-ve+Ee*he,Ce=Pe*-ve+Ce*he,ge=ce,ae=se,ke=le),ne=_atan2(-fe,Ee),X=ne*_RAD2DEG,ne&&(he=Math.cos(-ne),ve=Math.sin(-ne),ce=ye*he-_e*ve,se=de*he-me*ve,le=fe*he-Ee*ve,Ce=ue*ve+Ce*he,ye=ce,de=se,fe=le),ne=_atan2(de,ye),W=ne*_RAD2DEG,ne&&(he=Math.cos(ne),ve=Math.sin(ne),ce=ye*he+de*ve,se=ge*he+ae*ve,de=de*he-ye*ve,ae=ae*he-ge*ve,ye=ce,ge=se),Z&&Math.abs(Z)+Math.abs(W)>359.9&&(Z=W=0,X=180-X),U=_round(Math.sqrt(ye*ye+de*de+fe*fe)),z=_round(Math.sqrt(ae*ae+ke*ke)),ne=_atan2(ge,ae),K=Math.abs(ne)>2e-4?ne*_RAD2DEG:0,Q=Ce?1/(Ce<0?-Ce:Ce):0),C.svg&&(ce=T.getAttribute("transform"),C.forceCSS=T.setAttribute("transform","")||!_isNullTransform(_getComputedProperty(T,_transformProp)),ce&&T.setAttribute("transform",ce))),Math.abs(K)>90&&Math.abs(K)<270&&(I?(U*=-1,K+=W<=0?180:-180,W+=W<=0?180:-180):(z*=-1,K+=K<=0?180:-180)),E=E||C.uncache,C.x=L-((C.xPercent=L&&(!E&&C.xPercent||(Math.round(T.offsetWidth/2)===Math.round(-L)?-50:0)))?T.offsetWidth*C.xPercent/100:0)+R,C.y=B-((C.yPercent=B&&(!E&&C.yPercent||(Math.round(T.offsetHeight/2)===Math.round(-B)?-50:0)))?T.offsetHeight*C.yPercent/100:0)+R,C.z=V+R,C.scaleX=_round(U),C.scaleY=_round(z),C.rotation=_round(W)+F,C.rotationX=_round(Z)+F,C.rotationY=_round(X)+F,C.skewX=K+F,C.skewY=Y+F,C.transformPerspective=Q+R,(C.zOrigin=parseFloat(D.split(" ")[2])||!E&&C.zOrigin||0)&&(P[_transformOriginProp]=_firstTwoOnly(D)),C.xOffset=C.yOffset=0,C.force3D=_config.force3D,C.renderTransform=C.svg?_renderSVGTransforms:_supports3D?_renderCSSTransforms:_renderNon3DTransforms,C.uncache=0,C},_firstTwoOnly=function(T){return(T=T.split(" "))[0]+" "+T[1]},_addPxTranslate=function(T,E,C){var P=getUnit(E);return _round(parseFloat(E)+parseFloat(_convertToUnit(T,"x",C+"px",P)))+P},_renderNon3DTransforms=function(T,E){E.z="0px",E.rotationY=E.rotationX="0deg",E.force3D=0,_renderCSSTransforms(T,E)},_zeroDeg="0deg",_zeroPx="0px",_endParenthesis=") ",_renderCSSTransforms=function(T,E){var C=E||this,P=C.xPercent,I=C.yPercent,R=C.x,F=C.y,O=C.z,D=C.rotation,L=C.rotationY,B=C.rotationX,V=C.skewX,U=C.skewY,z=C.scaleX,W=C.scaleY,Z=C.transformPerspective,X=C.force3D,K=C.target,Y=C.zOrigin,Q="",J=X==="auto"&&T&&T!==1||X===!0;if(Y&&(B!==_zeroDeg||L!==_zeroDeg)){var te=parseFloat(L)*_DEG2RAD,ie=Math.sin(te),ne=Math.cos(te),he;te=parseFloat(B)*_DEG2RAD,he=Math.cos(te),R=_addPxTranslate(K,R,ie*he*-Y),F=_addPxTranslate(K,F,-Math.sin(te)*-Y),O=_addPxTranslate(K,O,ne*he*-Y+Y)}Z!==_zeroPx&&(Q+="perspective("+Z+_endParenthesis),(P||I)&&(Q+="translate("+P+"%, "+I+"%) "),(J||R!==_zeroPx||F!==_zeroPx||O!==_zeroPx)&&(Q+=O!==_zeroPx||J?"translate3d("+R+", "+F+", "+O+") ":"translate("+R+", "+F+_endParenthesis),D!==_zeroDeg&&(Q+="rotate("+D+_endParenthesis),L!==_zeroDeg&&(Q+="rotateY("+L+_endParenthesis),B!==_zeroDeg&&(Q+="rotateX("+B+_endParenthesis),(V!==_zeroDeg||U!==_zeroDeg)&&(Q+="skew("+V+", "+U+_endParenthesis),(z!==1||W!==1)&&(Q+="scale("+z+", "+W+_endParenthesis),K.style[_transformProp]=Q||"translate(0, 0)"},_renderSVGTransforms=function(T,E){var C=E||this,P=C.xPercent,I=C.yPercent,R=C.x,F=C.y,O=C.rotation,D=C.skewX,L=C.skewY,B=C.scaleX,V=C.scaleY,U=C.target,z=C.xOrigin,W=C.yOrigin,Z=C.xOffset,X=C.yOffset,K=C.forceCSS,Y=parseFloat(R),Q=parseFloat(F),J,te,ie,ne,he;O=parseFloat(O),D=parseFloat(D),L=parseFloat(L),L&&(L=parseFloat(L),D+=L,O+=L),O||D?(O*=_DEG2RAD,D*=_DEG2RAD,J=Math.cos(O)*B,te=Math.sin(O)*B,ie=Math.sin(O-D)*-V,ne=Math.cos(O-D)*V,D&&(L*=_DEG2RAD,he=Math.tan(D-L),he=Math.sqrt(1+he*he),ie*=he,ne*=he,L&&(he=Math.tan(L),he=Math.sqrt(1+he*he),J*=he,te*=he)),J=_round(J),te=_round(te),ie=_round(ie),ne=_round(ne)):(J=B,ne=V,te=ie=0),(Y&&!~(R+"").indexOf("px")||Q&&!~(F+"").indexOf("px"))&&(Y=_convertToUnit(U,"x",R,"px"),Q=_convertToUnit(U,"y",F,"px")),(z||W||Z||X)&&(Y=_round(Y+z-(z*J+W*ie)+Z),Q=_round(Q+W-(z*te+W*ne)+X)),(P||I)&&(he=U.getBBox(),Y=_round(Y+P/100*he.width),Q=_round(Q+I/100*he.height)),he="matrix("+J+","+te+","+ie+","+ne+","+Y+","+Q+")",U.setAttribute("transform",he),K&&(U.style[_transformProp]=he)},_addRotationalPropTween=function(T,E,C,P,I){var R=360,F=_isString(I),O=parseFloat(I)*(F&&~I.indexOf("rad")?_RAD2DEG:1),D=O-P,L=P+D+"deg",B,V;return F&&(B=I.split("_")[1],B==="short"&&(D%=R,D!==D%(R/2)&&(D+=D<0?R:-R)),B==="cw"&&D<0?D=(D+R*_bigNum)%R-~~(D/R)*R:B==="ccw"&&D>0&&(D=(D-R*_bigNum)%R-~~(D/R)*R)),T._pt=V=new PropTween(T._pt,E,C,P,D,_renderPropWithEnd),V.e=L,V.u="deg",T._props.push(C),V},_assign=function(T,E){for(var C in E)T[C]=E[C];return T},_addRawTransformPTs=function(T,E,C){var P=_assign({},C._gsap),I="perspective,force3D,transformOrigin,svgOrigin",R=C.style,F,O,D,L,B,V,U,z;P.svg?(D=C.getAttribute("transform"),C.setAttribute("transform",""),R[_transformProp]=E,F=_parseTransform(C,1),_removeProperty(C,_transformProp),C.setAttribute("transform",D)):(D=getComputedStyle(C)[_transformProp],R[_transformProp]=E,F=_parseTransform(C,1),R[_transformProp]=D);for(O in _transformProps)D=P[O],L=F[O],D!==L&&I.indexOf(O)<0&&(U=getUnit(D),z=getUnit(L),B=U!==z?_convertToUnit(C,O,D,z):parseFloat(D),V=parseFloat(L),T._pt=new PropTween(T._pt,F,O,B,V-B,_renderCSSProp),T._pt.u=z||0,T._props.push(O));_assign(F,P)};_forEachName("padding,margin,Width,Radius",function(A,T){var E="Top",C="Right",P="Bottom",I="Left",R=(T<3?[E,C,P,I]:[E+I,E+C,P+C,P+I]).map(function(F){return T<2?A+F:"border"+F+A});_specialProps[T>1?"border"+A:A]=function(F,O,D,L,B){var V,U;if(arguments.length<4)return V=R.map(function(z){return _get(F,z,D)}),U=V.join(" "),U.split(V[0]).length===5?V[0]:U;V=(L+"").split(" "),U={},R.forEach(function(z,W){return U[z]=V[W]=V[W]||V[(W-1)/2|0]}),F.init(O,U,B)}});var CSSPlugin={name:"css",register:_initCore,targetTest:function(T){return T.style&&T.nodeType},init:function(T,E,C,P,I){var R=this._props,F=T.style,O=C.vars.startAt,D,L,B,V,U,z,W,Z,X,K,Y,Q,J,te,ie,ne;_pluginInitted||_initCore(),this.styles=this.styles||_getStyleSaver(T),ne=this.styles.props,this.tween=C;for(W in E)if(W!=="autoRound"&&(L=E[W],!(_plugins[W]&&_checkPlugin(W,E,C,P,T,I)))){if(U=typeof L,z=_specialProps[W],U==="function"&&(L=L.call(C,P,T,I),U=typeof L),U==="string"&&~L.indexOf("random(")&&(L=_replaceRandom(L)),z)z(this,T,W,L,C)&&(ie=1);else if(W.substr(0,2)==="--")D=(getComputedStyle(T).getPropertyValue(W)+"").trim(),L+="",_colorExp.lastIndex=0,_colorExp.test(D)||(Z=getUnit(D),X=getUnit(L)),X?Z!==X&&(D=_convertToUnit(T,W,D,X)+X):Z&&(L+=Z),this.add(F,"setProperty",D,L,P,I,0,0,W),R.push(W),ne.push(W,0,F[W]);else if(U!=="undefined"){if(O&&W in O?(D=typeof O[W]=="function"?O[W].call(C,P,T,I):O[W],_isString(D)&&~D.indexOf("random(")&&(D=_replaceRandom(D)),getUnit(D+"")||D==="auto"||(D+=_config.units[W]||getUnit(_get(T,W))||""),(D+"").charAt(1)==="="&&(D=_get(T,W))):D=_get(T,W),V=parseFloat(D),K=U==="string"&&L.charAt(1)==="="&&L.substr(0,2),K&&(L=L.substr(2)),B=parseFloat(L),W in _propertyAliases&&(W==="autoAlpha"&&(V===1&&_get(T,"visibility")==="hidden"&&B&&(V=0),ne.push("visibility",0,F.visibility),_addNonTweeningPT(this,F,"visibility",V?"inherit":"hidden",B?"inherit":"hidden",!B)),W!=="scale"&&W!=="transform"&&(W=_propertyAliases[W],~W.indexOf(",")&&(W=W.split(",")[0]))),Y=W in _transformProps,Y){if(this.styles.save(W),Q||(J=T._gsap,J.renderTransform&&!E.parseTransform||_parseTransform(T,E.parseTransform),te=E.smoothOrigin!==!1&&J.smooth,Q=this._pt=new PropTween(this._pt,F,_transformProp,0,1,J.renderTransform,J,0,-1),Q.dep=1),W==="scale")this._pt=new PropTween(this._pt,J,"scaleY",J.scaleY,(K?_parseRelative(J.scaleY,K+B):B)-J.scaleY||0,_renderCSSProp),this._pt.u=0,R.push("scaleY",W),W+="X";else if(W==="transformOrigin"){ne.push(_transformOriginProp,0,F[_transformOriginProp]),L=_convertKeywordsToPercentages(L),J.svg?_applySVGOrigin(T,L,0,te,0,this):(X=parseFloat(L.split(" ")[2])||0,X!==J.zOrigin&&_addNonTweeningPT(this,J,"zOrigin",J.zOrigin,X),_addNonTweeningPT(this,F,W,_firstTwoOnly(D),_firstTwoOnly(L)));continue}else if(W==="svgOrigin"){_applySVGOrigin(T,L,1,te,0,this);continue}else if(W in _rotationalProperties){_addRotationalPropTween(this,J,W,V,K?_parseRelative(V,K+L):L);continue}else if(W==="smoothOrigin"){_addNonTweeningPT(this,J,"smooth",J.smooth,L);continue}else if(W==="force3D"){J[W]=L;continue}else if(W==="transform"){_addRawTransformPTs(this,L,T);continue}}else W in F||(W=_checkPropPrefix(W)||W);if(Y||(B||B===0)&&(V||V===0)&&!_complexExp.test(L)&&W in F)Z=(D+"").substr((V+"").length),B||(B=0),X=getUnit(L)||(W in _config.units?_config.units[W]:Z),Z!==X&&(V=_convertToUnit(T,W,D,X)),this._pt=new PropTween(this._pt,Y?J:F,W,V,(K?_parseRelative(V,K+B):B)-V,!Y&&(X==="px"||W==="zIndex")&&E.autoRound!==!1?_renderRoundedCSSProp:_renderCSSProp),this._pt.u=X||0,Z!==X&&X!=="%"&&(this._pt.b=D,this._pt.r=_renderCSSPropWithBeginning);else if(W in F)_tweenComplexCSSString.call(this,T,W,D,K?K+L:L);else if(W in T)this.add(T,W,D||T[W],K?K+L:L,P,I);else if(W!=="parseTransform"){_missingPlugin(W,L);continue}Y||(W in F?ne.push(W,0,F[W]):ne.push(W,1,D||T[W])),R.push(W)}}ie&&_sortPropTweensByPriority(this)},render:function(T,E){if(E.tween._time||!_reverting())for(var C=E._pt;C;)C.r(T,C.d),C=C._next;else E.styles.revert()},get:_get,aliases:_propertyAliases,getSetter:function(T,E,C){var P=_propertyAliases[E];return P&&P.indexOf(",")<0&&(E=P),E in _transformProps&&E!==_transformOriginProp&&(T._gsap.x||_get(T,"x"))?C&&_recentSetterPlugin===C?E==="scale"?_setterScale:_setterTransform:(_recentSetterPlugin=C||{})&&(E==="scale"?_setterScaleWithRender:_setterTransformWithRender):T.style&&!_isUndefined(T.style[E])?_setterCSSStyle:~E.indexOf("-")?_setterCSSProp:_getSetter(T,E)},core:{_removeProperty,_getMatrix}};gsap.utils.checkPrefix=_checkPropPrefix;gsap.core.getStyleSaver=_getStyleSaver;(function(A,T,E,C){var P=_forEachName(A+","+T+","+E,function(I){_transformProps[I]=1});_forEachName(T,function(I){_config.units[I]="deg",_rotationalProperties[I]=1}),_propertyAliases[P[13]]=A+","+T,_forEachName(C,function(I){var R=I.split(":");_propertyAliases[R[1]]=P[R[0]]})})("x,y,z,scale,scaleX,scaleY,xPercent,yPercent","rotation,rotationX,rotationY,skewX,skewY","transform,transformOrigin,svgOrigin,force3D,smoothOrigin,transformPerspective","0:translateX,1:translateY,2:translateZ,8:rotate,8:rotationZ,8:rotateZ,9:rotateX,10:rotateY");_forEachName("x,y,z,top,right,bottom,left,width,height,fontSize,padding,margin,perspective",function(A){_config.units[A]="px"});gsap.registerPlugin(CSSPlugin);var gsapWithCSS=gsap.registerPlugin(CSSPlugin)||gsap;gsapWithCSS.core.Tween;function rotationOffset(A){return A+Math.PI/2}class AttributeController{constructor(T){this.queue=[],this.render={fx:0,fy:0,px:0,py:0,theta:0,radius:0,rotation:0,alpha:1,scale:1,renderable:!1},this.set=E=>{this.queue.push(E)},this.pop=E=>{const C=this.queue.findIndex(I=>I.id===E);return this.queue.splice(C,1)[0]},this.scale=()=>get_store_value(complexityOn)?this.simulation.complexityScale(this.deliverable.complexity):1,this.makeTimeline=(E,C="auto")=>{const P=()=>{I.kill()},I=gsapWithCSS.timeline({overwrite:C,onComplete:P,onInterrupt:P});return I},this.entrance=E=>{const C=this.cur.active,{x:P,y:I,theta:R,radius:F,time:O}=this.cur,D=O,L=this.makeTimeline("entrance");return E?L.set(this.render,{px:P,py:I,radius:F,theta:R,alpha:0,rotation:0}).set(this.render,{renderable:C,delay:.05}).set(this.render,{alpha:1,delay:D}):L.set(this.render,{px:0,py:0,radius:F-24,theta:R-Math.PI/8,alpha:0,rotation:rotationOffset(R-Math.PI/8),renderable:C}).to(this.render,{radius:F,theta:R,alpha:1,rotation:rotationOffset(R),delay:D,duration:c.maxDurationRadial,ease:"power3.inOut"}),L},this.exit=()=>{const E=get_store_value(figureHeight)*(Math.random()*.5+.3),C=Math.random()*.5,P=c.shifts-C-Math.random()*.3,I=this.makeTimeline("exit");return this.simulation.onSelectedState?I.fromTo(this.render,{py:0},{py:E,alpha:0,duration:P,delay:C,ease:"power1.in"}):I.to(this.render,{py:this.render.py+E,alpha:0,duration:P,delay:C,ease:"power1.in"}),I},this.filterIn=E=>{const C=this.makeTimeline("filterIn"),P=!this.prev.active&&this.cur.active;return E?P?C.set(this.render,{px:this.cur.x,py:this.cur.y}).set(this.render,{renderable:this.cur.active,delay:this.cur.time*c.filterDuration+.4+c.filterBetweenGap}):C.to(this.render,{px:this.cur.x,py:this.cur.y,ease:quadInOut,duration:.6,delay:this.prev.time*.4}):C.to(this.render,{alpha:0,theta:this.prev.theta-Math.PI/24,rotation:rotationOffset(this.prev.theta-Math.PI/24),radius:this.prev.radius+24,duration:.15,ease:quadInOut,delay:quadInOut(this.cur.time)*.3}).set(this.render,{alpha:0,theta:this.cur.theta-Math.PI/24,radius:this.cur.radius,rotation:rotationOffset(this.cur.theta-Math.PI/24)}).set(this.render,{renderable:this.cur.active,delay:.05}).to(this.render,{theta:this.cur.theta,rotation:rotationOffset(this.cur.theta),alpha:1,duration:.6,ease:quadInOut,delay:quadInOut(this.cur.time)*.4}),C},this.filterOut=E=>{const C=this.makeTimeline("filterOut");if(E){const P=this.cur.active,I=this.prev.time*c.filterDuration;C.set(this.render,{renderable:P,delay:I}).to(this.render,{px:this.cur.x,py:this.cur.y,duration:c.filterDuration,delay:c.filterBetweenGap,ease:quadInOut})}else{const P=this.prev.time*.4,I=.6/2;this.prev.active&&!this.cur.active?C.to(this.render,{theta:this.prev.theta+Math.PI/8,rotation:rotationOffset(this.prev.theta+Math.PI/8),radius:this.prev.radius+24,alpha:0,duration:.4,delay:P,ease:quadIn}).set(this.render,{renderable:!1}):C.to(this.render,{theta:this.prev.theta-Math.PI/24,rotation:rotationOffset(this.prev.theta-Math.PI/24),radius:this.prev.radius-24,alpha:0,duration:I,delay:P+c.filterBetweenGap,ease:quadIn}).set(this.render,{theta:this.cur.theta-Math.PI/8,rotation:rotationOffset(this.cur.theta-Math.PI/8),radius:this.cur.radius-24}).to(this.render,{theta:this.cur.theta,rotation:rotationOffset(this.cur.theta),radius:this.cur.radius,alpha:1,duration:I,ease:quadOut})}return C},this.sort=E=>{const C=this.makeTimeline("sort");return E?C.to(this.render,{px:this.cur.x,py:this.cur.y,ease:quadInOut,duration:.6,delay:this.prev.time*.4}):C.to(this.render,{theta:this.prev.theta-Math.PI/24,radius:this.prev.radius+24,rotation:rotationOffset(this.prev.theta-Math.PI/24),alpha:0,duration:.15,delay:quadInOut(this.cur.time)*.3,ease:quadInOut}).set(this.render,{theta:this.cur.theta-Math.PI/24,rotation:rotationOffset(this.cur.theta-Math.PI/24),radius:this.cur.radius,alpha:0,renderable:this.cur.active}).to(this.render,{theta:this.cur.theta,rotation:rotationOffset(this.cur.theta),alpha:1,duration:.6,ease:quadInOut,delay:quadInOut(this.cur.time)*.4}),C},this.selected=E=>{E&&this.makeTimeline().to(this.render,{alpha:0,scale:this.scale()*2,duration:.3,ease:quadInOut}).set(this.render,{scale:this.scale()})},this.complexity=()=>{this.makeTimeline().to(this.render,{scale:this.scale(),delay:Math.random()*.7,duration:.3,ease:quadInOut})},this.deliverable=T,this.simulation=T.simulation}play(T){const{type:E,attrId:C,layout:P}=T;return C&&(this.prev=this.cur,this.cur=this.pop(C)),this[E](P==="block")}}var ENV=(A=>(A[A.WEBGL_LEGACY=0]="WEBGL_LEGACY",A[A.WEBGL=1]="WEBGL",A[A.WEBGL2=2]="WEBGL2",A))(ENV||{}),RENDERER_TYPE=(A=>(A[A.UNKNOWN=0]="UNKNOWN",A[A.WEBGL=1]="WEBGL",A[A.CANVAS=2]="CANVAS",A))(RENDERER_TYPE||{}),BUFFER_BITS=(A=>(A[A.COLOR=16384]="COLOR",A[A.DEPTH=256]="DEPTH",A[A.STENCIL=1024]="STENCIL",A))(BUFFER_BITS||{}),BLEND_MODES=(A=>(A[A.NORMAL=0]="NORMAL",A[A.ADD=1]="ADD",A[A.MULTIPLY=2]="MULTIPLY",A[A.SCREEN=3]="SCREEN",A[A.OVERLAY=4]="OVERLAY",A[A.DARKEN=5]="DARKEN",A[A.LIGHTEN=6]="LIGHTEN",A[A.COLOR_DODGE=7]="COLOR_DODGE",A[A.COLOR_BURN=8]="COLOR_BURN",A[A.HARD_LIGHT=9]="HARD_LIGHT",A[A.SOFT_LIGHT=10]="SOFT_LIGHT",A[A.DIFFERENCE=11]="DIFFERENCE",A[A.EXCLUSION=12]="EXCLUSION",A[A.HUE=13]="HUE",A[A.SATURATION=14]="SATURATION",A[A.COLOR=15]="COLOR",A[A.LUMINOSITY=16]="LUMINOSITY",A[A.NORMAL_NPM=17]="NORMAL_NPM",A[A.ADD_NPM=18]="ADD_NPM",A[A.SCREEN_NPM=19]="SCREEN_NPM",A[A.NONE=20]="NONE",A[A.SRC_OVER=0]="SRC_OVER",A[A.SRC_IN=21]="SRC_IN",A[A.SRC_OUT=22]="SRC_OUT",A[A.SRC_ATOP=23]="SRC_ATOP",A[A.DST_OVER=24]="DST_OVER",A[A.DST_IN=25]="DST_IN",A[A.DST_OUT=26]="DST_OUT",A[A.DST_ATOP=27]="DST_ATOP",A[A.ERASE=26]="ERASE",A[A.SUBTRACT=28]="SUBTRACT",A[A.XOR=29]="XOR",A))(BLEND_MODES||{}),DRAW_MODES=(A=>(A[A.POINTS=0]="POINTS",A[A.LINES=1]="LINES",A[A.LINE_LOOP=2]="LINE_LOOP",A[A.LINE_STRIP=3]="LINE_STRIP",A[A.TRIANGLES=4]="TRIANGLES",A[A.TRIANGLE_STRIP=5]="TRIANGLE_STRIP",A[A.TRIANGLE_FAN=6]="TRIANGLE_FAN",A))(DRAW_MODES||{}),FORMATS=(A=>(A[A.RGBA=6408]="RGBA",A[A.RGB=6407]="RGB",A[A.RG=33319]="RG",A[A.RED=6403]="RED",A[A.RGBA_INTEGER=36249]="RGBA_INTEGER",A[A.RGB_INTEGER=36248]="RGB_INTEGER",A[A.RG_INTEGER=33320]="RG_INTEGER",A[A.RED_INTEGER=36244]="RED_INTEGER",A[A.ALPHA=6406]="ALPHA",A[A.LUMINANCE=6409]="LUMINANCE",A[A.LUMINANCE_ALPHA=6410]="LUMINANCE_ALPHA",A[A.DEPTH_COMPONENT=6402]="DEPTH_COMPONENT",A[A.DEPTH_STENCIL=34041]="DEPTH_STENCIL",A))(FORMATS||{}),TARGETS=(A=>(A[A.TEXTURE_2D=3553]="TEXTURE_2D",A[A.TEXTURE_CUBE_MAP=34067]="TEXTURE_CUBE_MAP",A[A.TEXTURE_2D_ARRAY=35866]="TEXTURE_2D_ARRAY",A[A.TEXTURE_CUBE_MAP_POSITIVE_X=34069]="TEXTURE_CUBE_MAP_POSITIVE_X",A[A.TEXTURE_CUBE_MAP_NEGATIVE_X=34070]="TEXTURE_CUBE_MAP_NEGATIVE_X",A[A.TEXTURE_CUBE_MAP_POSITIVE_Y=34071]="TEXTURE_CUBE_MAP_POSITIVE_Y",A[A.TEXTURE_CUBE_MAP_NEGATIVE_Y=34072]="TEXTURE_CUBE_MAP_NEGATIVE_Y",A[A.TEXTURE_CUBE_MAP_POSITIVE_Z=34073]="TEXTURE_CUBE_MAP_POSITIVE_Z",A[A.TEXTURE_CUBE_MAP_NEGATIVE_Z=34074]="TEXTURE_CUBE_MAP_NEGATIVE_Z",A))(TARGETS||{}),TYPES=(A=>(A[A.UNSIGNED_BYTE=5121]="UNSIGNED_BYTE",A[A.UNSIGNED_SHORT=5123]="UNSIGNED_SHORT",A[A.UNSIGNED_SHORT_5_6_5=33635]="UNSIGNED_SHORT_5_6_5",A[A.UNSIGNED_SHORT_4_4_4_4=32819]="UNSIGNED_SHORT_4_4_4_4",A[A.UNSIGNED_SHORT_5_5_5_1=32820]="UNSIGNED_SHORT_5_5_5_1",A[A.UNSIGNED_INT=5125]="UNSIGNED_INT",A[A.UNSIGNED_INT_10F_11F_11F_REV=35899]="UNSIGNED_INT_10F_11F_11F_REV",A[A.UNSIGNED_INT_2_10_10_10_REV=33640]="UNSIGNED_INT_2_10_10_10_REV",A[A.UNSIGNED_INT_24_8=34042]="UNSIGNED_INT_24_8",A[A.UNSIGNED_INT_5_9_9_9_REV=35902]="UNSIGNED_INT_5_9_9_9_REV",A[A.BYTE=5120]="BYTE",A[A.SHORT=5122]="SHORT",A[A.INT=5124]="INT",A[A.FLOAT=5126]="FLOAT",A[A.FLOAT_32_UNSIGNED_INT_24_8_REV=36269]="FLOAT_32_UNSIGNED_INT_24_8_REV",A[A.HALF_FLOAT=36193]="HALF_FLOAT",A))(TYPES||{}),SAMPLER_TYPES=(A=>(A[A.FLOAT=0]="FLOAT",A[A.INT=1]="INT",A[A.UINT=2]="UINT",A))(SAMPLER_TYPES||{}),SCALE_MODES=(A=>(A[A.NEAREST=0]="NEAREST",A[A.LINEAR=1]="LINEAR",A))(SCALE_MODES||{}),WRAP_MODES=(A=>(A[A.CLAMP=33071]="CLAMP",A[A.REPEAT=10497]="REPEAT",A[A.MIRRORED_REPEAT=33648]="MIRRORED_REPEAT",A))(WRAP_MODES||{}),MIPMAP_MODES=(A=>(A[A.OFF=0]="OFF",A[A.POW2=1]="POW2",A[A.ON=2]="ON",A[A.ON_MANUAL=3]="ON_MANUAL",A))(MIPMAP_MODES||{}),ALPHA_MODES=(A=>(A[A.NPM=0]="NPM",A[A.UNPACK=1]="UNPACK",A[A.PMA=2]="PMA",A[A.NO_PREMULTIPLIED_ALPHA=0]="NO_PREMULTIPLIED_ALPHA",A[A.PREMULTIPLY_ON_UPLOAD=1]="PREMULTIPLY_ON_UPLOAD",A[A.PREMULTIPLIED_ALPHA=2]="PREMULTIPLIED_ALPHA",A))(ALPHA_MODES||{}),CLEAR_MODES=(A=>(A[A.NO=0]="NO",A[A.YES=1]="YES",A[A.AUTO=2]="AUTO",A[A.BLEND=0]="BLEND",A[A.CLEAR=1]="CLEAR",A[A.BLIT=2]="BLIT",A))(CLEAR_MODES||{}),GC_MODES=(A=>(A[A.AUTO=0]="AUTO",A[A.MANUAL=1]="MANUAL",A))(GC_MODES||{}),PRECISION=(A=>(A.LOW="lowp",A.MEDIUM="mediump",A.HIGH="highp",A))(PRECISION||{}),MASK_TYPES=(A=>(A[A.NONE=0]="NONE",A[A.SCISSOR=1]="SCISSOR",A[A.STENCIL=2]="STENCIL",A[A.SPRITE=3]="SPRITE",A[A.COLOR=4]="COLOR",A))(MASK_TYPES||{}),MSAA_QUALITY=(A=>(A[A.NONE=0]="NONE",A[A.LOW=2]="LOW",A[A.MEDIUM=4]="MEDIUM",A[A.HIGH=8]="HIGH",A))(MSAA_QUALITY||{}),BUFFER_TYPE=(A=>(A[A.ELEMENT_ARRAY_BUFFER=34963]="ELEMENT_ARRAY_BUFFER",A[A.ARRAY_BUFFER=34962]="ARRAY_BUFFER",A[A.UNIFORM_BUFFER=35345]="UNIFORM_BUFFER",A))(BUFFER_TYPE||{});const BrowserAdapter={createCanvas:(A,T)=>{const E=document.createElement("canvas");return E.width=A,E.height=T,E},getCanvasRenderingContext2D:()=>CanvasRenderingContext2D,getWebGLRenderingContext:()=>WebGLRenderingContext,getNavigator:()=>navigator,getBaseUrl:()=>document.baseURI??window.location.href,getFontFaceSet:()=>document.fonts,fetch:(A,T)=>fetch(A,T),parseXML:A=>new DOMParser().parseFromString(A,"text/xml")},settings={ADAPTER:BrowserAdapter,RESOLUTION:1,CREATE_IMAGE_BITMAP:!1,ROUND_PIXELS:!1};var appleIphone=/iPhone/i,appleIpod=/iPod/i,appleTablet=/iPad/i,appleUniversal=/\biOS-universal(?:.+)Mac\b/i,androidPhone=/\bAndroid(?:.+)Mobile\b/i,androidTablet=/Android/i,amazonPhone=/(?:SD4930UR|\bSilk(?:.+)Mobile\b)/i,amazonTablet=/Silk/i,windowsPhone=/Windows Phone/i,windowsTablet=/\bWindows(?:.+)ARM\b/i,otherBlackBerry=/BlackBerry/i,otherBlackBerry10=/BB10/i,otherOpera=/Opera Mini/i,otherChrome=/\b(CriOS|Chrome)(?:.+)Mobile/i,otherFirefox=/Mobile(?:.+)Firefox\b/i,isAppleTabletOnIos13=function(A){return typeof A<"u"&&A.platform==="MacIntel"&&typeof A.maxTouchPoints=="number"&&A.maxTouchPoints>1&&typeof MSStream>"u"};function createMatch(A){return function(T){return T.test(A)}}function isMobile$1(A){var T={userAgent:"",platform:"",maxTouchPoints:0};!A&&typeof navigator<"u"?T={userAgent:navigator.userAgent,platform:navigator.platform,maxTouchPoints:navigator.maxTouchPoints||0}:typeof A=="string"?T.userAgent=A:A&&A.userAgent&&(T={userAgent:A.userAgent,platform:A.platform,maxTouchPoints:A.maxTouchPoints||0});var E=T.userAgent,C=E.split("[FBAN");typeof C[1]<"u"&&(E=C[0]),C=E.split("Twitter"),typeof C[1]<"u"&&(E=C[0]);var P=createMatch(E),I={apple:{phone:P(appleIphone)&&!P(windowsPhone),ipod:P(appleIpod),tablet:!P(appleIphone)&&(P(appleTablet)||isAppleTabletOnIos13(T))&&!P(windowsPhone),universal:P(appleUniversal),device:(P(appleIphone)||P(appleIpod)||P(appleTablet)||P(appleUniversal)||isAppleTabletOnIos13(T))&&!P(windowsPhone)},amazon:{phone:P(amazonPhone),tablet:!P(amazonPhone)&&P(amazonTablet),device:P(amazonPhone)||P(amazonTablet)},android:{phone:!P(windowsPhone)&&P(amazonPhone)||!P(windowsPhone)&&P(androidPhone),tablet:!P(windowsPhone)&&!P(amazonPhone)&&!P(androidPhone)&&(P(amazonTablet)||P(androidTablet)),device:!P(windowsPhone)&&(P(amazonPhone)||P(amazonTablet)||P(androidPhone)||P(androidTablet))||P(/\bokhttp\b/i)},windows:{phone:P(windowsPhone),tablet:P(windowsTablet),device:P(windowsPhone)||P(windowsTablet)},other:{blackberry:P(otherBlackBerry),blackberry10:P(otherBlackBerry10),opera:P(otherOpera),firefox:P(otherFirefox),chrome:P(otherChrome),device:P(otherBlackBerry)||P(otherBlackBerry10)||P(otherOpera)||P(otherFirefox)||P(otherChrome)},any:!1,phone:!1,tablet:!1};return I.any=I.apple.device||I.android.device||I.windows.device||I.other.device,I.phone=I.apple.phone||I.android.phone||I.windows.phone,I.tablet=I.apple.tablet||I.android.tablet||I.windows.tablet,I}const isMobileCall=isMobile$1.default??isMobile$1,isMobile=isMobileCall(globalThis.navigator);settings.RETINA_PREFIX=/@([0-9\.]+)x/;settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT=!1;var eventemitter3={exports:{}};(function(A){var T=Object.prototype.hasOwnProperty,E="~";function C(){}Object.create&&(C.prototype=Object.create(null),new C().__proto__||(E=!1));function P(O,D,L){this.fn=O,this.context=D,this.once=L||!1}function I(O,D,L,B,V){if(typeof L!="function")throw new TypeError("The listener must be a function");var U=new P(L,B||O,V),z=E?E+D:D;return O._events[z]?O._events[z].fn?O._events[z]=[O._events[z],U]:O._events[z].push(U):(O._events[z]=U,O._eventsCount++),O}function R(O,D){--O._eventsCount===0?O._events=new C:delete O._events[D]}function F(){this._events=new C,this._eventsCount=0}F.prototype.eventNames=function(){var D=[],L,B;if(this._eventsCount===0)return D;for(B in L=this._events)T.call(L,B)&&D.push(E?B.slice(1):B);return Object.getOwnPropertySymbols?D.concat(Object.getOwnPropertySymbols(L)):D},F.prototype.listeners=function(D){var L=E?E+D:D,B=this._events[L];if(!B)return[];if(B.fn)return[B.fn];for(var V=0,U=B.length,z=new Array(U);V<U;V++)z[V]=B[V].fn;return z},F.prototype.listenerCount=function(D){var L=E?E+D:D,B=this._events[L];return B?B.fn?1:B.length:0},F.prototype.emit=function(D,L,B,V,U,z){var W=E?E+D:D;if(!this._events[W])return!1;var Z=this._events[W],X=arguments.length,K,Y;if(Z.fn){switch(Z.once&&this.removeListener(D,Z.fn,void 0,!0),X){case 1:return Z.fn.call(Z.context),!0;case 2:return Z.fn.call(Z.context,L),!0;case 3:return Z.fn.call(Z.context,L,B),!0;case 4:return Z.fn.call(Z.context,L,B,V),!0;case 5:return Z.fn.call(Z.context,L,B,V,U),!0;case 6:return Z.fn.call(Z.context,L,B,V,U,z),!0}for(Y=1,K=new Array(X-1);Y<X;Y++)K[Y-1]=arguments[Y];Z.fn.apply(Z.context,K)}else{var Q=Z.length,J;for(Y=0;Y<Q;Y++)switch(Z[Y].once&&this.removeListener(D,Z[Y].fn,void 0,!0),X){case 1:Z[Y].fn.call(Z[Y].context);break;case 2:Z[Y].fn.call(Z[Y].context,L);break;case 3:Z[Y].fn.call(Z[Y].context,L,B);break;case 4:Z[Y].fn.call(Z[Y].context,L,B,V);break;default:if(!K)for(J=1,K=new Array(X-1);J<X;J++)K[J-1]=arguments[J];Z[Y].fn.apply(Z[Y].context,K)}}return!0},F.prototype.on=function(D,L,B){return I(this,D,L,B,!1)},F.prototype.once=function(D,L,B){return I(this,D,L,B,!0)},F.prototype.removeListener=function(D,L,B,V){var U=E?E+D:D;if(!this._events[U])return this;if(!L)return R(this,U),this;var z=this._events[U];if(z.fn)z.fn===L&&(!V||z.once)&&(!B||z.context===B)&&R(this,U);else{for(var W=0,Z=[],X=z.length;W<X;W++)(z[W].fn!==L||V&&!z[W].once||B&&z[W].context!==B)&&Z.push(z[W]);Z.length?this._events[U]=Z.length===1?Z[0]:Z:R(this,U)}return this},F.prototype.removeAllListeners=function(D){var L;return D?(L=E?E+D:D,this._events[L]&&R(this,L)):(this._events=new C,this._eventsCount=0),this},F.prototype.off=F.prototype.removeListener,F.prototype.addListener=F.prototype.on,F.prefixed=E,F.EventEmitter=F,A.exports=F})(eventemitter3);var eventemitter3Exports=eventemitter3.exports;const EventEmitter=getDefaultExportFromCjs(eventemitter3Exports);var earcut$2={exports:{}};earcut$2.exports=earcut;earcut$2.exports.default=earcut;function earcut(A,T,E){E=E||2;var C=T&&T.length,P=C?T[0]*E:A.length,I=linkedList(A,0,P,E,!0),R=[];if(!I||I.next===I.prev)return R;var F,O,D,L,B,V,U;if(C&&(I=eliminateHoles(A,T,I,E)),A.length>80*E){F=D=A[0],O=L=A[1];for(var z=E;z<P;z+=E)B=A[z],V=A[z+1],B<F&&(F=B),V<O&&(O=V),B>D&&(D=B),V>L&&(L=V);U=Math.max(D-F,L-O),U=U!==0?32767/U:0}return earcutLinked(I,R,E,F,O,U,0),R}function linkedList(A,T,E,C,P){var I,R;if(P===signedArea(A,T,E,C)>0)for(I=T;I<E;I+=C)R=insertNode(I,A[I],A[I+1],R);else for(I=E-C;I>=T;I-=C)R=insertNode(I,A[I],A[I+1],R);return R&&equals(R,R.next)&&(removeNode(R),R=R.next),R}function filterPoints(A,T){if(!A)return A;T||(T=A);var E=A,C;do if(C=!1,!E.steiner&&(equals(E,E.next)||area(E.prev,E,E.next)===0)){if(removeNode(E),E=T=E.prev,E===E.next)break;C=!0}else E=E.next;while(C||E!==T);return T}function earcutLinked(A,T,E,C,P,I,R){if(A){!R&&I&&indexCurve(A,C,P,I);for(var F=A,O,D;A.prev!==A.next;){if(O=A.prev,D=A.next,I?isEarHashed(A,C,P,I):isEar(A)){T.push(O.i/E|0),T.push(A.i/E|0),T.push(D.i/E|0),removeNode(A),A=D.next,F=D.next;continue}if(A=D,A===F){R?R===1?(A=cureLocalIntersections(filterPoints(A),T,E),earcutLinked(A,T,E,C,P,I,2)):R===2&&splitEarcut(A,T,E,C,P,I):earcutLinked(filterPoints(A),T,E,C,P,I,1);break}}}}function isEar(A){var T=A.prev,E=A,C=A.next;if(area(T,E,C)>=0)return!1;for(var P=T.x,I=E.x,R=C.x,F=T.y,O=E.y,D=C.y,L=P<I?P<R?P:R:I<R?I:R,B=F<O?F<D?F:D:O<D?O:D,V=P>I?P>R?P:R:I>R?I:R,U=F>O?F>D?F:D:O>D?O:D,z=C.next;z!==T;){if(z.x>=L&&z.x<=V&&z.y>=B&&z.y<=U&&pointInTriangle(P,F,I,O,R,D,z.x,z.y)&&area(z.prev,z,z.next)>=0)return!1;z=z.next}return!0}function isEarHashed(A,T,E,C){var P=A.prev,I=A,R=A.next;if(area(P,I,R)>=0)return!1;for(var F=P.x,O=I.x,D=R.x,L=P.y,B=I.y,V=R.y,U=F<O?F<D?F:D:O<D?O:D,z=L<B?L<V?L:V:B<V?B:V,W=F>O?F>D?F:D:O>D?O:D,Z=L>B?L>V?L:V:B>V?B:V,X=zOrder(U,z,T,E,C),K=zOrder(W,Z,T,E,C),Y=A.prevZ,Q=A.nextZ;Y&&Y.z>=X&&Q&&Q.z<=K;){if(Y.x>=U&&Y.x<=W&&Y.y>=z&&Y.y<=Z&&Y!==P&&Y!==R&&pointInTriangle(F,L,O,B,D,V,Y.x,Y.y)&&area(Y.prev,Y,Y.next)>=0||(Y=Y.prevZ,Q.x>=U&&Q.x<=W&&Q.y>=z&&Q.y<=Z&&Q!==P&&Q!==R&&pointInTriangle(F,L,O,B,D,V,Q.x,Q.y)&&area(Q.prev,Q,Q.next)>=0))return!1;Q=Q.nextZ}for(;Y&&Y.z>=X;){if(Y.x>=U&&Y.x<=W&&Y.y>=z&&Y.y<=Z&&Y!==P&&Y!==R&&pointInTriangle(F,L,O,B,D,V,Y.x,Y.y)&&area(Y.prev,Y,Y.next)>=0)return!1;Y=Y.prevZ}for(;Q&&Q.z<=K;){if(Q.x>=U&&Q.x<=W&&Q.y>=z&&Q.y<=Z&&Q!==P&&Q!==R&&pointInTriangle(F,L,O,B,D,V,Q.x,Q.y)&&area(Q.prev,Q,Q.next)>=0)return!1;Q=Q.nextZ}return!0}function cureLocalIntersections(A,T,E){var C=A;do{var P=C.prev,I=C.next.next;!equals(P,I)&&intersects(P,C,C.next,I)&&locallyInside(P,I)&&locallyInside(I,P)&&(T.push(P.i/E|0),T.push(C.i/E|0),T.push(I.i/E|0),removeNode(C),removeNode(C.next),C=A=I),C=C.next}while(C!==A);return filterPoints(C)}function splitEarcut(A,T,E,C,P,I){var R=A;do{for(var F=R.next.next;F!==R.prev;){if(R.i!==F.i&&isValidDiagonal(R,F)){var O=splitPolygon(R,F);R=filterPoints(R,R.next),O=filterPoints(O,O.next),earcutLinked(R,T,E,C,P,I,0),earcutLinked(O,T,E,C,P,I,0);return}F=F.next}R=R.next}while(R!==A)}function eliminateHoles(A,T,E,C){var P=[],I,R,F,O,D;for(I=0,R=T.length;I<R;I++)F=T[I]*C,O=I<R-1?T[I+1]*C:A.length,D=linkedList(A,F,O,C,!1),D===D.next&&(D.steiner=!0),P.push(getLeftmost(D));for(P.sort(compareX),I=0;I<P.length;I++)E=eliminateHole(P[I],E);return E}function compareX(A,T){return A.x-T.x}function eliminateHole(A,T){var E=findHoleBridge(A,T);if(!E)return T;var C=splitPolygon(E,A);return filterPoints(C,C.next),filterPoints(E,E.next)}function findHoleBridge(A,T){var E=T,C=A.x,P=A.y,I=-1/0,R;do{if(P<=E.y&&P>=E.next.y&&E.next.y!==E.y){var F=E.x+(P-E.y)*(E.next.x-E.x)/(E.next.y-E.y);if(F<=C&&F>I&&(I=F,R=E.x<E.next.x?E:E.next,F===C))return R}E=E.next}while(E!==T);if(!R)return null;var O=R,D=R.x,L=R.y,B=1/0,V;E=R;do C>=E.x&&E.x>=D&&C!==E.x&&pointInTriangle(P<L?C:I,P,D,L,P<L?I:C,P,E.x,E.y)&&(V=Math.abs(P-E.y)/(C-E.x),locallyInside(E,A)&&(V<B||V===B&&(E.x>R.x||E.x===R.x&&sectorContainsSector(R,E)))&&(R=E,B=V)),E=E.next;while(E!==O);return R}function sectorContainsSector(A,T){return area(A.prev,A,T.prev)<0&&area(T.next,A,A.next)<0}function indexCurve(A,T,E,C){var P=A;do P.z===0&&(P.z=zOrder(P.x,P.y,T,E,C)),P.prevZ=P.prev,P.nextZ=P.next,P=P.next;while(P!==A);P.prevZ.nextZ=null,P.prevZ=null,sortLinked(P)}function sortLinked(A){var T,E,C,P,I,R,F,O,D=1;do{for(E=A,A=null,I=null,R=0;E;){for(R++,C=E,F=0,T=0;T<D&&(F++,C=C.nextZ,!!C);T++);for(O=D;F>0||O>0&&C;)F!==0&&(O===0||!C||E.z<=C.z)?(P=E,E=E.nextZ,F--):(P=C,C=C.nextZ,O--),I?I.nextZ=P:A=P,P.prevZ=I,I=P;E=C}I.nextZ=null,D*=2}while(R>1);return A}function zOrder(A,T,E,C,P){return A=(A-E)*P|0,T=(T-C)*P|0,A=(A|A<<8)&16711935,A=(A|A<<4)&252645135,A=(A|A<<2)&858993459,A=(A|A<<1)&1431655765,T=(T|T<<8)&16711935,T=(T|T<<4)&252645135,T=(T|T<<2)&858993459,T=(T|T<<1)&1431655765,A|T<<1}function getLeftmost(A){var T=A,E=A;do(T.x<E.x||T.x===E.x&&T.y<E.y)&&(E=T),T=T.next;while(T!==A);return E}function pointInTriangle(A,T,E,C,P,I,R,F){return(P-R)*(T-F)>=(A-R)*(I-F)&&(A-R)*(C-F)>=(E-R)*(T-F)&&(E-R)*(I-F)>=(P-R)*(C-F)}function isValidDiagonal(A,T){return A.next.i!==T.i&&A.prev.i!==T.i&&!intersectsPolygon(A,T)&&(locallyInside(A,T)&&locallyInside(T,A)&&middleInside(A,T)&&(area(A.prev,A,T.prev)||area(A,T.prev,T))||equals(A,T)&&area(A.prev,A,A.next)>0&&area(T.prev,T,T.next)>0)}function area(A,T,E){return(T.y-A.y)*(E.x-T.x)-(T.x-A.x)*(E.y-T.y)}function equals(A,T){return A.x===T.x&&A.y===T.y}function intersects(A,T,E,C){var P=sign$1(area(A,T,E)),I=sign$1(area(A,T,C)),R=sign$1(area(E,C,A)),F=sign$1(area(E,C,T));return!!(P!==I&&R!==F||P===0&&onSegment(A,E,T)||I===0&&onSegment(A,C,T)||R===0&&onSegment(E,A,C)||F===0&&onSegment(E,T,C))}function onSegment(A,T,E){return T.x<=Math.max(A.x,E.x)&&T.x>=Math.min(A.x,E.x)&&T.y<=Math.max(A.y,E.y)&&T.y>=Math.min(A.y,E.y)}function sign$1(A){return A>0?1:A<0?-1:0}function intersectsPolygon(A,T){var E=A;do{if(E.i!==A.i&&E.next.i!==A.i&&E.i!==T.i&&E.next.i!==T.i&&intersects(E,E.next,A,T))return!0;E=E.next}while(E!==A);return!1}function locallyInside(A,T){return area(A.prev,A,A.next)<0?area(A,T,A.next)>=0&&area(A,A.prev,T)>=0:area(A,T,A.prev)<0||area(A,A.next,T)<0}function middleInside(A,T){var E=A,C=!1,P=(A.x+T.x)/2,I=(A.y+T.y)/2;do E.y>I!=E.next.y>I&&E.next.y!==E.y&&P<(E.next.x-E.x)*(I-E.y)/(E.next.y-E.y)+E.x&&(C=!C),E=E.next;while(E!==A);return C}function splitPolygon(A,T){var E=new Node(A.i,A.x,A.y),C=new Node(T.i,T.x,T.y),P=A.next,I=T.prev;return A.next=T,T.prev=A,E.next=P,P.prev=E,C.next=E,E.prev=C,I.next=C,C.prev=I,C}function insertNode(A,T,E,C){var P=new Node(A,T,E);return C?(P.next=C.next,P.prev=C,C.next.prev=P,C.next=P):(P.prev=P,P.next=P),P}function removeNode(A){A.next.prev=A.prev,A.prev.next=A.next,A.prevZ&&(A.prevZ.nextZ=A.nextZ),A.nextZ&&(A.nextZ.prevZ=A.prevZ)}function Node(A,T,E){this.i=A,this.x=T,this.y=E,this.prev=null,this.next=null,this.z=0,this.prevZ=null,this.nextZ=null,this.steiner=!1}earcut.deviation=function(A,T,E,C){var P=T&&T.length,I=P?T[0]*E:A.length,R=Math.abs(signedArea(A,0,I,E));if(P)for(var F=0,O=T.length;F<O;F++){var D=T[F]*E,L=F<O-1?T[F+1]*E:A.length;R-=Math.abs(signedArea(A,D,L,E))}var B=0;for(F=0;F<C.length;F+=3){var V=C[F]*E,U=C[F+1]*E,z=C[F+2]*E;B+=Math.abs((A[V]-A[z])*(A[U+1]-A[V+1])-(A[V]-A[U])*(A[z+1]-A[V+1]))}return R===0&&B===0?0:Math.abs((B-R)/R)};function signedArea(A,T,E,C){for(var P=0,I=T,R=E-C;I<E;I+=C)P+=(A[R]-A[I])*(A[I+1]+A[R+1]),R=I;return P}earcut.flatten=function(A){for(var T=A[0][0].length,E={vertices:[],holes:[],dimensions:T},C=0,P=0;P<A.length;P++){for(var I=0;I<A[P].length;I++)for(var R=0;R<T;R++)E.vertices.push(A[P][I][R]);P>0&&(C+=A[P-1].length,E.holes.push(C))}return E};var earcutExports=earcut$2.exports;const earcut$1=getDefaultExportFromCjs(earcutExports);var punycode$1={exports:{}};/*! https://mths.be/punycode v1.4.1 by @mathias */punycode$1.exports;(function(A,T){(function(E){var C=T&&!T.nodeType&&T,P=A&&!A.nodeType&&A,I=typeof commonjsGlobal=="object"&&commonjsGlobal;(I.global===I||I.window===I||I.self===I)&&(E=I);var R,F=2147483647,O=36,D=1,L=26,B=38,V=700,U=72,z=128,W="-",Z=/^xn--/,X=/[^\x20-\x7E]/,K=/[\x2E\u3002\uFF0E\uFF61]/g,Y={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},Q=O-D,J=Math.floor,te=String.fromCharCode,ie;function ne(_e){throw new RangeError(Y[_e])}function he(_e,me){for(var Ee=_e.length,Pe=[];Ee--;)Pe[Ee]=me(_e[Ee]);return Pe}function ve(_e,me){var Ee=_e.split("@"),Pe="";Ee.length>1&&(Pe=Ee[0]+"@",_e=Ee[1]),_e=_e.replace(K,".");var Ce=_e.split("."),ke=he(Ce,me).join(".");return Pe+ke}function ye(_e){for(var me=[],Ee=0,Pe=_e.length,Ce,ke;Ee<Pe;)Ce=_e.charCodeAt(Ee++),Ce>=55296&&Ce<=56319&&Ee<Pe?(ke=_e.charCodeAt(Ee++),(ke&64512)==56320?me.push(((Ce&1023)<<10)+(ke&1023)+65536):(me.push(Ce),Ee--)):me.push(Ce);return me}function de(_e){return he(_e,function(me){var Ee="";return me>65535&&(me-=65536,Ee+=te(me>>>10&1023|55296),me=56320|me&1023),Ee+=te(me),Ee}).join("")}function fe(_e){return _e-48<10?_e-22:_e-65<26?_e-65:_e-97<26?_e-97:O}function ue(_e,me){return _e+22+75*(_e<26)-((me!=0)<<5)}function ge(_e,me,Ee){var Pe=0;for(_e=Ee?J(_e/V):_e>>1,_e+=J(_e/me);_e>Q*L>>1;Pe+=O)_e=J(_e/Q);return J(Pe+(Q+1)*_e/(_e+B))}function ae(_e){var me=[],Ee=_e.length,Pe,Ce=0,ke=z,Be=U,Me,Oe,Je,et,qe,De,Ue,Re,Ne;for(Me=_e.lastIndexOf(W),Me<0&&(Me=0),Oe=0;Oe<Me;++Oe)_e.charCodeAt(Oe)>=128&&ne("not-basic"),me.push(_e.charCodeAt(Oe));for(Je=Me>0?Me+1:0;Je<Ee;){for(et=Ce,qe=1,De=O;Je>=Ee&&ne("invalid-input"),Ue=fe(_e.charCodeAt(Je++)),(Ue>=O||Ue>J((F-Ce)/qe))&&ne("overflow"),Ce+=Ue*qe,Re=De<=Be?D:De>=Be+L?L:De-Be,!(Ue<Re);De+=O)Ne=O-Re,qe>J(F/Ne)&&ne("overflow"),qe*=Ne;Pe=me.length+1,Be=ge(Ce-et,Pe,et==0),J(Ce/Pe)>F-ke&&ne("overflow"),ke+=J(Ce/Pe),Ce%=Pe,me.splice(Ce++,0,ke)}return de(me)}function ce(_e){var me,Ee,Pe,Ce,ke,Be,Me,Oe,Je,et,qe,De=[],Ue,Re,Ne,Ge;for(_e=ye(_e),Ue=_e.length,me=z,Ee=0,ke=U,Be=0;Be<Ue;++Be)qe=_e[Be],qe<128&&De.push(te(qe));for(Pe=Ce=De.length,Ce&&De.push(W);Pe<Ue;){for(Me=F,Be=0;Be<Ue;++Be)qe=_e[Be],qe>=me&&qe<Me&&(Me=qe);for(Re=Pe+1,Me-me>J((F-Ee)/Re)&&ne("overflow"),Ee+=(Me-me)*Re,me=Me,Be=0;Be<Ue;++Be)if(qe=_e[Be],qe<me&&++Ee>F&&ne("overflow"),qe==me){for(Oe=Ee,Je=O;et=Je<=ke?D:Je>=ke+L?L:Je-ke,!(Oe<et);Je+=O)Ge=Oe-et,Ne=O-et,De.push(te(ue(et+Ge%Ne,0))),Oe=J(Ge/Ne);De.push(te(ue(Oe,0))),ke=ge(Ee,Re,Pe==Ce),Ee=0,++Pe}++Ee,++me}return De.join("")}function se(_e){return ve(_e,function(me){return Z.test(me)?ae(me.slice(4).toLowerCase()):me})}function le(_e){return ve(_e,function(me){return X.test(me)?"xn--"+ce(me):me})}if(R={version:"1.4.1",ucs2:{decode:ye,encode:de},decode:ae,encode:ce,toASCII:le,toUnicode:se},C&&P)if(A.exports==C)P.exports=R;else for(ie in R)R.hasOwnProperty(ie)&&(C[ie]=R[ie]);else E.punycode=R})(commonjsGlobal)})(punycode$1,punycode$1.exports);var punycodeExports=punycode$1.exports,esErrors=Error,_eval=EvalError,range$1=RangeError,ref=ReferenceError,syntax=SyntaxError,type=TypeError,uri=URIError,shams=function(){if(typeof Symbol!="function"||typeof Object.getOwnPropertySymbols!="function")return!1;if(typeof Symbol.iterator=="symbol")return!0;var T={},E=Symbol("test"),C=Object(E);if(typeof E=="string"||Object.prototype.toString.call(E)!=="[object Symbol]"||Object.prototype.toString.call(C)!=="[object Symbol]")return!1;var P=42;T[E]=P;for(E in T)return!1;if(typeof Object.keys=="function"&&Object.keys(T).length!==0||typeof Object.getOwnPropertyNames=="function"&&Object.getOwnPropertyNames(T).length!==0)return!1;var I=Object.getOwnPropertySymbols(T);if(I.length!==1||I[0]!==E||!Object.prototype.propertyIsEnumerable.call(T,E))return!1;if(typeof Object.getOwnPropertyDescriptor=="function"){var R=Object.getOwnPropertyDescriptor(T,E);if(R.value!==P||R.enumerable!==!0)return!1}return!0},origSymbol=typeof Symbol<"u"&&Symbol,hasSymbolSham=shams,hasSymbols$1=function(){return typeof origSymbol!="function"||typeof Symbol!="function"||typeof origSymbol("foo")!="symbol"||typeof Symbol("bar")!="symbol"?!1:hasSymbolSham()},test={__proto__:null,foo:{}},$Object=Object,hasProto$1=function(){return{__proto__:test}.foo===test.foo&&!(test instanceof $Object)},ERROR_MESSAGE="Function.prototype.bind called on incompatible ",toStr$1=Object.prototype.toString,max=Math.max,funcType="[object Function]",concatty=function(T,E){for(var C=[],P=0;P<T.length;P+=1)C[P]=T[P];for(var I=0;I<E.length;I+=1)C[I+T.length]=E[I];return C},slicy=function(T,E){for(var C=[],P=E,I=0;P<T.length;P+=1,I+=1)C[I]=T[P];return C},joiny=function(A,T){for(var E="",C=0;C<A.length;C+=1)E+=A[C],C+1<A.length&&(E+=T);return E},implementation$1=function(T){var E=this;if(typeof E!="function"||toStr$1.apply(E)!==funcType)throw new TypeError(ERROR_MESSAGE+E);for(var C=slicy(arguments,1),P,I=function(){if(this instanceof P){var L=E.apply(this,concatty(C,arguments));return Object(L)===L?L:this}return E.apply(T,concatty(C,arguments))},R=max(0,E.length-C.length),F=[],O=0;O<R;O++)F[O]="$"+O;if(P=Function("binder","return function ("+joiny(F,",")+"){ return binder.apply(this,arguments); }")(I),E.prototype){var D=function(){};D.prototype=E.prototype,P.prototype=new D,D.prototype=null}return P},implementation=implementation$1,functionBind=Function.prototype.bind||implementation,call=Function.prototype.call,$hasOwn=Object.prototype.hasOwnProperty,bind$1=functionBind,hasown=bind$1.call(call,$hasOwn),undefined$1,$Error=esErrors,$EvalError=_eval,$RangeError=range$1,$ReferenceError=ref,$SyntaxError$1=syntax,$TypeError$3=type,$URIError=uri,$Function=Function,getEvalledConstructor=function(A){try{return $Function('"use strict"; return ('+A+").constructor;")()}catch{}},$gOPD$1=Object.getOwnPropertyDescriptor;if($gOPD$1)try{$gOPD$1({},"")}catch{$gOPD$1=null}var throwTypeError=function(){throw new $TypeError$3},ThrowTypeError=$gOPD$1?function(){try{return arguments.callee,throwTypeError}catch{try{return $gOPD$1(arguments,"callee").get}catch{return throwTypeError}}}():throwTypeError,hasSymbols=hasSymbols$1(),hasProto=hasProto$1(),getProto=Object.getPrototypeOf||(hasProto?function(A){return A.__proto__}:null),needsEval={},TypedArray=typeof Uint8Array>"u"||!getProto?undefined$1:getProto(Uint8Array),INTRINSICS={__proto__:null,"%AggregateError%":typeof AggregateError>"u"?undefined$1:AggregateError,"%Array%":Array,"%ArrayBuffer%":typeof ArrayBuffer>"u"?undefined$1:ArrayBuffer,"%ArrayIteratorPrototype%":hasSymbols&&getProto?getProto([][Symbol.iterator]()):undefined$1,"%AsyncFromSyncIteratorPrototype%":undefined$1,"%AsyncFunction%":needsEval,"%AsyncGenerator%":needsEval,"%AsyncGeneratorFunction%":needsEval,"%AsyncIteratorPrototype%":needsEval,"%Atomics%":typeof Atomics>"u"?undefined$1:Atomics,"%BigInt%":typeof BigInt>"u"?undefined$1:BigInt,"%BigInt64Array%":typeof BigInt64Array>"u"?undefined$1:BigInt64Array,"%BigUint64Array%":typeof BigUint64Array>"u"?undefined$1:BigUint64Array,"%Boolean%":Boolean,"%DataView%":typeof DataView>"u"?undefined$1:DataView,"%Date%":Date,"%decodeURI%":decodeURI,"%decodeURIComponent%":decodeURIComponent,"%encodeURI%":encodeURI,"%encodeURIComponent%":encodeURIComponent,"%Error%":$Error,"%eval%":eval,"%EvalError%":$EvalError,"%Float32Array%":typeof Float32Array>"u"?undefined$1:Float32Array,"%Float64Array%":typeof Float64Array>"u"?undefined$1:Float64Array,"%FinalizationRegistry%":typeof FinalizationRegistry>"u"?undefined$1:FinalizationRegistry,"%Function%":$Function,"%GeneratorFunction%":needsEval,"%Int8Array%":typeof Int8Array>"u"?undefined$1:Int8Array,"%Int16Array%":typeof Int16Array>"u"?undefined$1:Int16Array,"%Int32Array%":typeof Int32Array>"u"?undefined$1:Int32Array,"%isFinite%":isFinite,"%isNaN%":isNaN,"%IteratorPrototype%":hasSymbols&&getProto?getProto(getProto([][Symbol.iterator]())):undefined$1,"%JSON%":typeof JSON=="object"?JSON:undefined$1,"%Map%":typeof Map>"u"?undefined$1:Map,"%MapIteratorPrototype%":typeof Map>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Map()[Symbol.iterator]()),"%Math%":Math,"%Number%":Number,"%Object%":Object,"%parseFloat%":parseFloat,"%parseInt%":parseInt,"%Promise%":typeof Promise>"u"?undefined$1:Promise,"%Proxy%":typeof Proxy>"u"?undefined$1:Proxy,"%RangeError%":$RangeError,"%ReferenceError%":$ReferenceError,"%Reflect%":typeof Reflect>"u"?undefined$1:Reflect,"%RegExp%":RegExp,"%Set%":typeof Set>"u"?undefined$1:Set,"%SetIteratorPrototype%":typeof Set>"u"||!hasSymbols||!getProto?undefined$1:getProto(new Set()[Symbol.iterator]()),"%SharedArrayBuffer%":typeof SharedArrayBuffer>"u"?undefined$1:SharedArrayBuffer,"%String%":String,"%StringIteratorPrototype%":hasSymbols&&getProto?getProto(""[Symbol.iterator]()):undefined$1,"%Symbol%":hasSymbols?Symbol:undefined$1,"%SyntaxError%":$SyntaxError$1,"%ThrowTypeError%":ThrowTypeError,"%TypedArray%":TypedArray,"%TypeError%":$TypeError$3,"%Uint8Array%":typeof Uint8Array>"u"?undefined$1:Uint8Array,"%Uint8ClampedArray%":typeof Uint8ClampedArray>"u"?undefined$1:Uint8ClampedArray,"%Uint16Array%":typeof Uint16Array>"u"?undefined$1:Uint16Array,"%Uint32Array%":typeof Uint32Array>"u"?undefined$1:Uint32Array,"%URIError%":$URIError,"%WeakMap%":typeof WeakMap>"u"?undefined$1:WeakMap,"%WeakRef%":typeof WeakRef>"u"?undefined$1:WeakRef,"%WeakSet%":typeof WeakSet>"u"?undefined$1:WeakSet};if(getProto)try{null.error}catch(A){var errorProto=getProto(getProto(A));INTRINSICS["%Error.prototype%"]=errorProto}var doEval=function A(T){var E;if(T==="%AsyncFunction%")E=getEvalledConstructor("async function () {}");else if(T==="%GeneratorFunction%")E=getEvalledConstructor("function* () {}");else if(T==="%AsyncGeneratorFunction%")E=getEvalledConstructor("async function* () {}");else if(T==="%AsyncGenerator%"){var C=A("%AsyncGeneratorFunction%");C&&(E=C.prototype)}else if(T==="%AsyncIteratorPrototype%"){var P=A("%AsyncGenerator%");P&&getProto&&(E=getProto(P.prototype))}return INTRINSICS[T]=E,E},LEGACY_ALIASES={__proto__:null,"%ArrayBufferPrototype%":["ArrayBuffer","prototype"],"%ArrayPrototype%":["Array","prototype"],"%ArrayProto_entries%":["Array","prototype","entries"],"%ArrayProto_forEach%":["Array","prototype","forEach"],"%ArrayProto_keys%":["Array","prototype","keys"],"%ArrayProto_values%":["Array","prototype","values"],"%AsyncFunctionPrototype%":["AsyncFunction","prototype"],"%AsyncGenerator%":["AsyncGeneratorFunction","prototype"],"%AsyncGeneratorPrototype%":["AsyncGeneratorFunction","prototype","prototype"],"%BooleanPrototype%":["Boolean","prototype"],"%DataViewPrototype%":["DataView","prototype"],"%DatePrototype%":["Date","prototype"],"%ErrorPrototype%":["Error","prototype"],"%EvalErrorPrototype%":["EvalError","prototype"],"%Float32ArrayPrototype%":["Float32Array","prototype"],"%Float64ArrayPrototype%":["Float64Array","prototype"],"%FunctionPrototype%":["Function","prototype"],"%Generator%":["GeneratorFunction","prototype"],"%GeneratorPrototype%":["GeneratorFunction","prototype","prototype"],"%Int8ArrayPrototype%":["Int8Array","prototype"],"%Int16ArrayPrototype%":["Int16Array","prototype"],"%Int32ArrayPrototype%":["Int32Array","prototype"],"%JSONParse%":["JSON","parse"],"%JSONStringify%":["JSON","stringify"],"%MapPrototype%":["Map","prototype"],"%NumberPrototype%":["Number","prototype"],"%ObjectPrototype%":["Object","prototype"],"%ObjProto_toString%":["Object","prototype","toString"],"%ObjProto_valueOf%":["Object","prototype","valueOf"],"%PromisePrototype%":["Promise","prototype"],"%PromiseProto_then%":["Promise","prototype","then"],"%Promise_all%":["Promise","all"],"%Promise_reject%":["Promise","reject"],"%Promise_resolve%":["Promise","resolve"],"%RangeErrorPrototype%":["RangeError","prototype"],"%ReferenceErrorPrototype%":["ReferenceError","prototype"],"%RegExpPrototype%":["RegExp","prototype"],"%SetPrototype%":["Set","prototype"],"%SharedArrayBufferPrototype%":["SharedArrayBuffer","prototype"],"%StringPrototype%":["String","prototype"],"%SymbolPrototype%":["Symbol","prototype"],"%SyntaxErrorPrototype%":["SyntaxError","prototype"],"%TypedArrayPrototype%":["TypedArray","prototype"],"%TypeErrorPrototype%":["TypeError","prototype"],"%Uint8ArrayPrototype%":["Uint8Array","prototype"],"%Uint8ClampedArrayPrototype%":["Uint8ClampedArray","prototype"],"%Uint16ArrayPrototype%":["Uint16Array","prototype"],"%Uint32ArrayPrototype%":["Uint32Array","prototype"],"%URIErrorPrototype%":["URIError","prototype"],"%WeakMapPrototype%":["WeakMap","prototype"],"%WeakSetPrototype%":["WeakSet","prototype"]},bind=functionBind,hasOwn$1=hasown,$concat$1=bind.call(Function.call,Array.prototype.concat),$spliceApply=bind.call(Function.apply,Array.prototype.splice),$replace$1=bind.call(Function.call,String.prototype.replace),$strSlice=bind.call(Function.call,String.prototype.slice),$exec=bind.call(Function.call,RegExp.prototype.exec),rePropName=/[^%.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|%$))/g,reEscapeChar=/\\(\\)?/g,stringToPath=function(T){var E=$strSlice(T,0,1),C=$strSlice(T,-1);if(E==="%"&&C!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected closing `%`");if(C==="%"&&E!=="%")throw new $SyntaxError$1("invalid intrinsic syntax, expected opening `%`");var P=[];return $replace$1(T,rePropName,function(I,R,F,O){P[P.length]=F?$replace$1(O,reEscapeChar,"$1"):R||I}),P},getBaseIntrinsic=function(T,E){var C=T,P;if(hasOwn$1(LEGACY_ALIASES,C)&&(P=LEGACY_ALIASES[C],C="%"+P[0]+"%"),hasOwn$1(INTRINSICS,C)){var I=INTRINSICS[C];if(I===needsEval&&(I=doEval(C)),typeof I>"u"&&!E)throw new $TypeError$3("intrinsic "+T+" exists, but is not available. Please file an issue!");return{alias:P,name:C,value:I}}throw new $SyntaxError$1("intrinsic "+T+" does not exist!")},getIntrinsic=function(T,E){if(typeof T!="string"||T.length===0)throw new $TypeError$3("intrinsic name must be a non-empty string");if(arguments.length>1&&typeof E!="boolean")throw new $TypeError$3('"allowMissing" argument must be a boolean');if($exec(/^%?[^%]*%?$/,T)===null)throw new $SyntaxError$1("`%` may not be present anywhere but at the beginning and end of the intrinsic name");var C=stringToPath(T),P=C.length>0?C[0]:"",I=getBaseIntrinsic("%"+P+"%",E),R=I.name,F=I.value,O=!1,D=I.alias;D&&(P=D[0],$spliceApply(C,$concat$1([0,1],D)));for(var L=1,B=!0;L<C.length;L+=1){var V=C[L],U=$strSlice(V,0,1),z=$strSlice(V,-1);if((U==='"'||U==="'"||U==="`"||z==='"'||z==="'"||z==="`")&&U!==z)throw new $SyntaxError$1("property names with quotes must have matching quotes");if((V==="constructor"||!B)&&(O=!0),P+="."+V,R="%"+P+"%",hasOwn$1(INTRINSICS,R))F=INTRINSICS[R];else if(F!=null){if(!(V in F)){if(!E)throw new $TypeError$3("base intrinsic for "+T+" exists, but the property is not available.");return}if($gOPD$1&&L+1>=C.length){var W=$gOPD$1(F,V);B=!!W,B&&"get"in W&&!("originalValue"in W.get)?F=W.get:F=F[V]}else B=hasOwn$1(F,V),F=F[V];B&&!O&&(INTRINSICS[R]=F)}}return F},callBind$1={exports:{}},esDefineProperty,hasRequiredEsDefineProperty;function requireEsDefineProperty(){if(hasRequiredEsDefineProperty)return esDefineProperty;hasRequiredEsDefineProperty=1;var A=getIntrinsic,T=A("%Object.defineProperty%",!0)||!1;if(T)try{T({},"a",{value:1})}catch{T=!1}return esDefineProperty=T,esDefineProperty}var GetIntrinsic$3=getIntrinsic,$gOPD=GetIntrinsic$3("%Object.getOwnPropertyDescriptor%",!0);if($gOPD)try{$gOPD([],"length")}catch{$gOPD=null}var gopd$1=$gOPD,$defineProperty$1=requireEsDefineProperty(),$SyntaxError=syntax,$TypeError$2=type,gopd=gopd$1,defineDataProperty=function(T,E,C){if(!T||typeof T!="object"&&typeof T!="function")throw new $TypeError$2("`obj` must be an object or a function`");if(typeof E!="string"&&typeof E!="symbol")throw new $TypeError$2("`property` must be a string or a symbol`");if(arguments.length>3&&typeof arguments[3]!="boolean"&&arguments[3]!==null)throw new $TypeError$2("`nonEnumerable`, if provided, must be a boolean or null");if(arguments.length>4&&typeof arguments[4]!="boolean"&&arguments[4]!==null)throw new $TypeError$2("`nonWritable`, if provided, must be a boolean or null");if(arguments.length>5&&typeof arguments[5]!="boolean"&&arguments[5]!==null)throw new $TypeError$2("`nonConfigurable`, if provided, must be a boolean or null");if(arguments.length>6&&typeof arguments[6]!="boolean")throw new $TypeError$2("`loose`, if provided, must be a boolean");var P=arguments.length>3?arguments[3]:null,I=arguments.length>4?arguments[4]:null,R=arguments.length>5?arguments[5]:null,F=arguments.length>6?arguments[6]:!1,O=!!gopd&&gopd(T,E);if($defineProperty$1)$defineProperty$1(T,E,{configurable:R===null&&O?O.configurable:!R,enumerable:P===null&&O?O.enumerable:!P,value:C,writable:I===null&&O?O.writable:!I});else if(F||!P&&!I&&!R)T[E]=C;else throw new $SyntaxError("This environment does not support defining a property as non-configurable, non-writable, or non-enumerable.")},$defineProperty=requireEsDefineProperty(),hasPropertyDescriptors=function(){return!!$defineProperty};hasPropertyDescriptors.hasArrayLengthDefineBug=function(){if(!$defineProperty)return null;try{return $defineProperty([],"length",{value:1}).length!==1}catch{return!0}};var hasPropertyDescriptors_1=hasPropertyDescriptors,GetIntrinsic$2=getIntrinsic,define=defineDataProperty,hasDescriptors=hasPropertyDescriptors_1(),gOPD=gopd$1,$TypeError$1=type,$floor$1=GetIntrinsic$2("%Math.floor%"),setFunctionLength=function(T,E){if(typeof T!="function")throw new $TypeError$1("`fn` is not a function");if(typeof E!="number"||E<0||E>4294967295||$floor$1(E)!==E)throw new $TypeError$1("`length` must be a positive 32-bit integer");var C=arguments.length>2&&!!arguments[2],P=!0,I=!0;if("length"in T&&gOPD){var R=gOPD(T,"length");R&&!R.configurable&&(P=!1),R&&!R.writable&&(I=!1)}return(P||I||!C)&&(hasDescriptors?define(T,"length",E,!0,!0):define(T,"length",E)),T};(function(A){var T=functionBind,E=getIntrinsic,C=setFunctionLength,P=type,I=E("%Function.prototype.apply%"),R=E("%Function.prototype.call%"),F=E("%Reflect.apply%",!0)||T.call(R,I),O=requireEsDefineProperty(),D=E("%Math.max%");A.exports=function(V){if(typeof V!="function")throw new P("a function is required");var U=F(T,R,arguments);return C(U,1+D(0,V.length-(arguments.length-1)),!0)};var L=function(){return F(T,I,arguments)};O?O(A.exports,"apply",{value:L}):A.exports.apply=L})(callBind$1);var callBindExports=callBind$1.exports,GetIntrinsic$1=getIntrinsic,callBind=callBindExports,$indexOf=callBind(GetIntrinsic$1("String.prototype.indexOf")),callBound$1=function(T,E){var C=GetIntrinsic$1(T,!!E);return typeof C=="function"&&$indexOf(T,".prototype.")>-1?callBind(C):C};const __viteBrowserExternal={},__viteBrowserExternal$1=Object.freeze(Object.defineProperty({__proto__:null,default:__viteBrowserExternal},Symbol.toStringTag,{value:"Module"})),require$$0=getAugmentedNamespace(__viteBrowserExternal$1);var hasMap=typeof Map=="function"&&Map.prototype,mapSizeDescriptor=Object.getOwnPropertyDescriptor&&hasMap?Object.getOwnPropertyDescriptor(Map.prototype,"size"):null,mapSize$1=hasMap&&mapSizeDescriptor&&typeof mapSizeDescriptor.get=="function"?mapSizeDescriptor.get:null,mapForEach=hasMap&&Map.prototype.forEach,hasSet=typeof Set=="function"&&Set.prototype,setSizeDescriptor=Object.getOwnPropertyDescriptor&&hasSet?Object.getOwnPropertyDescriptor(Set.prototype,"size"):null,setSize=hasSet&&setSizeDescriptor&&typeof setSizeDescriptor.get=="function"?setSizeDescriptor.get:null,setForEach=hasSet&&Set.prototype.forEach,hasWeakMap=typeof WeakMap=="function"&&WeakMap.prototype,weakMapHas=hasWeakMap?WeakMap.prototype.has:null,hasWeakSet=typeof WeakSet=="function"&&WeakSet.prototype,weakSetHas=hasWeakSet?WeakSet.prototype.has:null,hasWeakRef=typeof WeakRef=="function"&&WeakRef.prototype,weakRefDeref=hasWeakRef?WeakRef.prototype.deref:null,booleanValueOf=Boolean.prototype.valueOf,objectToString=Object.prototype.toString,functionToString=Function.prototype.toString,$match=String.prototype.match,$slice=String.prototype.slice,$replace=String.prototype.replace,$toUpperCase=String.prototype.toUpperCase,$toLowerCase=String.prototype.toLowerCase,$test=RegExp.prototype.test,$concat=Array.prototype.concat,$join=Array.prototype.join,$arrSlice=Array.prototype.slice,$floor=Math.floor,bigIntValueOf=typeof BigInt=="function"?BigInt.prototype.valueOf:null,gOPS=Object.getOwnPropertySymbols,symToString=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Symbol.prototype.toString:null,hasShammedSymbols=typeof Symbol=="function"&&typeof Symbol.iterator=="object",toStringTag=typeof Symbol=="function"&&Symbol.toStringTag&&(typeof Symbol.toStringTag===hasShammedSymbols||!0)?Symbol.toStringTag:null,isEnumerable=Object.prototype.propertyIsEnumerable,gPO=(typeof Reflect=="function"?Reflect.getPrototypeOf:Object.getPrototypeOf)||([].__proto__===Array.prototype?function(A){return A.__proto__}:null);function addNumericSeparator(A,T){if(A===1/0||A===-1/0||A!==A||A&&A>-1e3&&A<1e3||$test.call(/e/,T))return T;var E=/[0-9](?=(?:[0-9]{3})+(?![0-9]))/g;if(typeof A=="number"){var C=A<0?-$floor(-A):$floor(A);if(C!==A){var P=String(C),I=$slice.call(T,P.length+1);return $replace.call(P,E,"$&_")+"."+$replace.call($replace.call(I,/([0-9]{3})/g,"$&_"),/_$/,"")}}return $replace.call(T,E,"$&_")}var utilInspect=require$$0,inspectCustom=utilInspect.custom,inspectSymbol=isSymbol(inspectCustom)?inspectCustom:null,objectInspect=function A(T,E,C,P){var I=E||{};if(has$3(I,"quoteStyle")&&I.quoteStyle!=="single"&&I.quoteStyle!=="double")throw new TypeError('option "quoteStyle" must be "single" or "double"');if(has$3(I,"maxStringLength")&&(typeof I.maxStringLength=="number"?I.maxStringLength<0&&I.maxStringLength!==1/0:I.maxStringLength!==null))throw new TypeError('option "maxStringLength", if provided, must be a positive integer, Infinity, or `null`');var R=has$3(I,"customInspect")?I.customInspect:!0;if(typeof R!="boolean"&&R!=="symbol")throw new TypeError("option \"customInspect\", if provided, must be `true`, `false`, or `'symbol'`");if(has$3(I,"indent")&&I.indent!==null&&I.indent!=="	"&&!(parseInt(I.indent,10)===I.indent&&I.indent>0))throw new TypeError('option "indent" must be "\\t", an integer > 0, or `null`');if(has$3(I,"numericSeparator")&&typeof I.numericSeparator!="boolean")throw new TypeError('option "numericSeparator", if provided, must be `true` or `false`');var F=I.numericSeparator;if(typeof T>"u")return"undefined";if(T===null)return"null";if(typeof T=="boolean")return T?"true":"false";if(typeof T=="string")return inspectString(T,I);if(typeof T=="number"){if(T===0)return 1/0/T>0?"0":"-0";var O=String(T);return F?addNumericSeparator(T,O):O}if(typeof T=="bigint"){var D=String(T)+"n";return F?addNumericSeparator(T,D):D}var L=typeof I.depth>"u"?5:I.depth;if(typeof C>"u"&&(C=0),C>=L&&L>0&&typeof T=="object")return isArray$4(T)?"[Array]":"[Object]";var B=getIndent(I,C);if(typeof P>"u")P=[];else if(indexOf(P,T)>=0)return"[Circular]";function V(fe,ue,ge){if(ue&&(P=$arrSlice.call(P),P.push(ue)),ge){var ae={depth:I.depth};return has$3(I,"quoteStyle")&&(ae.quoteStyle=I.quoteStyle),A(fe,ae,C+1,P)}return A(fe,I,C+1,P)}if(typeof T=="function"&&!isRegExp$1(T)){var U=nameOf(T),z=arrObjKeys(T,V);return"[Function"+(U?": "+U:" (anonymous)")+"]"+(z.length>0?" { "+$join.call(z,", ")+" }":"")}if(isSymbol(T)){var W=hasShammedSymbols?$replace.call(String(T),/^(Symbol\(.*\))_[^)]*$/,"$1"):symToString.call(T);return typeof T=="object"&&!hasShammedSymbols?markBoxed(W):W}if(isElement(T)){for(var Z="<"+$toLowerCase.call(String(T.nodeName)),X=T.attributes||[],K=0;K<X.length;K++)Z+=" "+X[K].name+"="+wrapQuotes(quote(X[K].value),"double",I);return Z+=">",T.childNodes&&T.childNodes.length&&(Z+="..."),Z+="</"+$toLowerCase.call(String(T.nodeName))+">",Z}if(isArray$4(T)){if(T.length===0)return"[]";var Y=arrObjKeys(T,V);return B&&!singleLineValues(Y)?"["+indentedJoin(Y,B)+"]":"[ "+$join.call(Y,", ")+" ]"}if(isError(T)){var Q=arrObjKeys(T,V);return!("cause"in Error.prototype)&&"cause"in T&&!isEnumerable.call(T,"cause")?"{ ["+String(T)+"] "+$join.call($concat.call("[cause]: "+V(T.cause),Q),", ")+" }":Q.length===0?"["+String(T)+"]":"{ ["+String(T)+"] "+$join.call(Q,", ")+" }"}if(typeof T=="object"&&R){if(inspectSymbol&&typeof T[inspectSymbol]=="function"&&utilInspect)return utilInspect(T,{depth:L-C});if(R!=="symbol"&&typeof T.inspect=="function")return T.inspect()}if(isMap(T)){var J=[];return mapForEach&&mapForEach.call(T,function(fe,ue){J.push(V(ue,T,!0)+" => "+V(fe,T))}),collectionOf("Map",mapSize$1.call(T),J,B)}if(isSet(T)){var te=[];return setForEach&&setForEach.call(T,function(fe){te.push(V(fe,T))}),collectionOf("Set",setSize.call(T),te,B)}if(isWeakMap(T))return weakCollectionOf("WeakMap");if(isWeakSet(T))return weakCollectionOf("WeakSet");if(isWeakRef(T))return weakCollectionOf("WeakRef");if(isNumber$1(T))return markBoxed(V(Number(T)));if(isBigInt(T))return markBoxed(V(bigIntValueOf.call(T)));if(isBoolean$1(T))return markBoxed(booleanValueOf.call(T));if(isString$1(T))return markBoxed(V(String(T)));if(typeof window<"u"&&T===window)return"{ [object Window] }";if(T===commonjsGlobal)return"{ [object globalThis] }";if(!isDate(T)&&!isRegExp$1(T)){var ie=arrObjKeys(T,V),ne=gPO?gPO(T)===Object.prototype:T instanceof Object||T.constructor===Object,he=T instanceof Object?"":"null prototype",ve=!ne&&toStringTag&&Object(T)===T&&toStringTag in T?$slice.call(toStr(T),8,-1):he?"Object":"",ye=ne||typeof T.constructor!="function"?"":T.constructor.name?T.constructor.name+" ":"",de=ye+(ve||he?"["+$join.call($concat.call([],ve||[],he||[]),": ")+"] ":"");return ie.length===0?de+"{}":B?de+"{"+indentedJoin(ie,B)+"}":de+"{ "+$join.call(ie,", ")+" }"}return String(T)};function wrapQuotes(A,T,E){var C=(E.quoteStyle||T)==="double"?'"':"'";return C+A+C}function quote(A){return $replace.call(String(A),/"/g,"&quot;")}function isArray$4(A){return toStr(A)==="[object Array]"&&(!toStringTag||!(typeof A=="object"&&toStringTag in A))}function isDate(A){return toStr(A)==="[object Date]"&&(!toStringTag||!(typeof A=="object"&&toStringTag in A))}function isRegExp$1(A){return toStr(A)==="[object RegExp]"&&(!toStringTag||!(typeof A=="object"&&toStringTag in A))}function isError(A){return toStr(A)==="[object Error]"&&(!toStringTag||!(typeof A=="object"&&toStringTag in A))}function isString$1(A){return toStr(A)==="[object String]"&&(!toStringTag||!(typeof A=="object"&&toStringTag in A))}function isNumber$1(A){return toStr(A)==="[object Number]"&&(!toStringTag||!(typeof A=="object"&&toStringTag in A))}function isBoolean$1(A){return toStr(A)==="[object Boolean]"&&(!toStringTag||!(typeof A=="object"&&toStringTag in A))}function isSymbol(A){if(hasShammedSymbols)return A&&typeof A=="object"&&A instanceof Symbol;if(typeof A=="symbol")return!0;if(!A||typeof A!="object"||!symToString)return!1;try{return symToString.call(A),!0}catch{}return!1}function isBigInt(A){if(!A||typeof A!="object"||!bigIntValueOf)return!1;try{return bigIntValueOf.call(A),!0}catch{}return!1}var hasOwn=Object.prototype.hasOwnProperty||function(A){return A in this};function has$3(A,T){return hasOwn.call(A,T)}function toStr(A){return objectToString.call(A)}function nameOf(A){if(A.name)return A.name;var T=$match.call(functionToString.call(A),/^function\s*([\w$]+)/);return T?T[1]:null}function indexOf(A,T){if(A.indexOf)return A.indexOf(T);for(var E=0,C=A.length;E<C;E++)if(A[E]===T)return E;return-1}function isMap(A){if(!mapSize$1||!A||typeof A!="object")return!1;try{mapSize$1.call(A);try{setSize.call(A)}catch{return!0}return A instanceof Map}catch{}return!1}function isWeakMap(A){if(!weakMapHas||!A||typeof A!="object")return!1;try{weakMapHas.call(A,weakMapHas);try{weakSetHas.call(A,weakSetHas)}catch{return!0}return A instanceof WeakMap}catch{}return!1}function isWeakRef(A){if(!weakRefDeref||!A||typeof A!="object")return!1;try{return weakRefDeref.call(A),!0}catch{}return!1}function isSet(A){if(!setSize||!A||typeof A!="object")return!1;try{setSize.call(A);try{mapSize$1.call(A)}catch{return!0}return A instanceof Set}catch{}return!1}function isWeakSet(A){if(!weakSetHas||!A||typeof A!="object")return!1;try{weakSetHas.call(A,weakSetHas);try{weakMapHas.call(A,weakMapHas)}catch{return!0}return A instanceof WeakSet}catch{}return!1}function isElement(A){return!A||typeof A!="object"?!1:typeof HTMLElement<"u"&&A instanceof HTMLElement?!0:typeof A.nodeName=="string"&&typeof A.getAttribute=="function"}function inspectString(A,T){if(A.length>T.maxStringLength){var E=A.length-T.maxStringLength,C="... "+E+" more character"+(E>1?"s":"");return inspectString($slice.call(A,0,T.maxStringLength),T)+C}var P=$replace.call($replace.call(A,/(['\\])/g,"\\$1"),/[\x00-\x1f]/g,lowbyte);return wrapQuotes(P,"single",T)}function lowbyte(A){var T=A.charCodeAt(0),E={8:"b",9:"t",10:"n",12:"f",13:"r"}[T];return E?"\\"+E:"\\x"+(T<16?"0":"")+$toUpperCase.call(T.toString(16))}function markBoxed(A){return"Object("+A+")"}function weakCollectionOf(A){return A+" { ? }"}function collectionOf(A,T,E,C){var P=C?indentedJoin(E,C):$join.call(E,", ");return A+" ("+T+") {"+P+"}"}function singleLineValues(A){for(var T=0;T<A.length;T++)if(indexOf(A[T],`
`)>=0)return!1;return!0}function getIndent(A,T){var E;if(A.indent==="	")E="	";else if(typeof A.indent=="number"&&A.indent>0)E=$join.call(Array(A.indent+1)," ");else return null;return{base:E,prev:$join.call(Array(T+1),E)}}function indentedJoin(A,T){if(A.length===0)return"";var E=`
`+T.prev+T.base;return E+$join.call(A,","+E)+`
`+T.prev}function arrObjKeys(A,T){var E=isArray$4(A),C=[];if(E){C.length=A.length;for(var P=0;P<A.length;P++)C[P]=has$3(A,P)?T(A[P],A):""}var I=typeof gOPS=="function"?gOPS(A):[],R;if(hasShammedSymbols){R={};for(var F=0;F<I.length;F++)R["$"+I[F]]=I[F]}for(var O in A)has$3(A,O)&&(E&&String(Number(O))===O&&O<A.length||hasShammedSymbols&&R["$"+O]instanceof Symbol||($test.call(/[^\w$]/,O)?C.push(T(O,A)+": "+T(A[O],A)):C.push(O+": "+T(A[O],A))));if(typeof gOPS=="function")for(var D=0;D<I.length;D++)isEnumerable.call(A,I[D])&&C.push("["+T(I[D])+"]: "+T(A[I[D]],A));return C}var GetIntrinsic=getIntrinsic,callBound=callBound$1,inspect=objectInspect,$TypeError=type,$WeakMap=GetIntrinsic("%WeakMap%",!0),$Map=GetIntrinsic("%Map%",!0),$weakMapGet=callBound("WeakMap.prototype.get",!0),$weakMapSet=callBound("WeakMap.prototype.set",!0),$weakMapHas=callBound("WeakMap.prototype.has",!0),$mapGet=callBound("Map.prototype.get",!0),$mapSet=callBound("Map.prototype.set",!0),$mapHas=callBound("Map.prototype.has",!0),listGetNode=function(A,T){for(var E=A,C;(C=E.next)!==null;E=C)if(C.key===T)return E.next=C.next,C.next=A.next,A.next=C,C},listGet=function(A,T){var E=listGetNode(A,T);return E&&E.value},listSet=function(A,T,E){var C=listGetNode(A,T);C?C.value=E:A.next={key:T,next:A.next,value:E}},listHas=function(A,T){return!!listGetNode(A,T)},sideChannel=function(){var T,E,C,P={assert:function(I){if(!P.has(I))throw new $TypeError("Side channel does not contain "+inspect(I))},get:function(I){if($WeakMap&&I&&(typeof I=="object"||typeof I=="function")){if(T)return $weakMapGet(T,I)}else if($Map){if(E)return $mapGet(E,I)}else if(C)return listGet(C,I)},has:function(I){if($WeakMap&&I&&(typeof I=="object"||typeof I=="function")){if(T)return $weakMapHas(T,I)}else if($Map){if(E)return $mapHas(E,I)}else if(C)return listHas(C,I);return!1},set:function(I,R){$WeakMap&&I&&(typeof I=="object"||typeof I=="function")?(T||(T=new $WeakMap),$weakMapSet(T,I,R)):$Map?(E||(E=new $Map),$mapSet(E,I,R)):(C||(C={key:{},next:null}),listSet(C,I,R))}};return P},replace=String.prototype.replace,percentTwenties=/%20/g,Format={RFC1738:"RFC1738",RFC3986:"RFC3986"},formats$4={default:Format.RFC3986,formatters:{RFC1738:function(A){return replace.call(A,percentTwenties,"+")},RFC3986:function(A){return String(A)}},RFC1738:Format.RFC1738,RFC3986:Format.RFC3986},formats$3=formats$4,has$2=Object.prototype.hasOwnProperty,isArray$3=Array.isArray,hexTable=function(){for(var A=[],T=0;T<256;++T)A.push("%"+((T<16?"0":"")+T.toString(16)).toUpperCase());return A}(),compactQueue=function(T){for(;T.length>1;){var E=T.pop(),C=E.obj[E.prop];if(isArray$3(C)){for(var P=[],I=0;I<C.length;++I)typeof C[I]<"u"&&P.push(C[I]);E.obj[E.prop]=P}}},arrayToObject=function(T,E){for(var C=E&&E.plainObjects?Object.create(null):{},P=0;P<T.length;++P)typeof T[P]<"u"&&(C[P]=T[P]);return C},merge=function A(T,E,C){if(!E)return T;if(typeof E!="object"){if(isArray$3(T))T.push(E);else if(T&&typeof T=="object")(C&&(C.plainObjects||C.allowPrototypes)||!has$2.call(Object.prototype,E))&&(T[E]=!0);else return[T,E];return T}if(!T||typeof T!="object")return[T].concat(E);var P=T;return isArray$3(T)&&!isArray$3(E)&&(P=arrayToObject(T,C)),isArray$3(T)&&isArray$3(E)?(E.forEach(function(I,R){if(has$2.call(T,R)){var F=T[R];F&&typeof F=="object"&&I&&typeof I=="object"?T[R]=A(F,I,C):T.push(I)}else T[R]=I}),T):Object.keys(E).reduce(function(I,R){var F=E[R];return has$2.call(I,R)?I[R]=A(I[R],F,C):I[R]=F,I},P)},assign=function(T,E){return Object.keys(E).reduce(function(C,P){return C[P]=E[P],C},T)},decode=function(A,T,E){var C=A.replace(/\+/g," ");if(E==="iso-8859-1")return C.replace(/%[0-9a-f]{2}/gi,unescape);try{return decodeURIComponent(C)}catch{return C}},limit=1024,encode=function(T,E,C,P,I){if(T.length===0)return T;var R=T;if(typeof T=="symbol"?R=Symbol.prototype.toString.call(T):typeof T!="string"&&(R=String(T)),C==="iso-8859-1")return escape(R).replace(/%u[0-9a-f]{4}/gi,function(U){return"%26%23"+parseInt(U.slice(2),16)+"%3B"});for(var F="",O=0;O<R.length;O+=limit){for(var D=R.length>=limit?R.slice(O,O+limit):R,L=[],B=0;B<D.length;++B){var V=D.charCodeAt(B);if(V===45||V===46||V===95||V===126||V>=48&&V<=57||V>=65&&V<=90||V>=97&&V<=122||I===formats$3.RFC1738&&(V===40||V===41)){L[L.length]=D.charAt(B);continue}if(V<128){L[L.length]=hexTable[V];continue}if(V<2048){L[L.length]=hexTable[192|V>>6]+hexTable[128|V&63];continue}if(V<55296||V>=57344){L[L.length]=hexTable[224|V>>12]+hexTable[128|V>>6&63]+hexTable[128|V&63];continue}B+=1,V=65536+((V&1023)<<10|D.charCodeAt(B)&1023),L[L.length]=hexTable[240|V>>18]+hexTable[128|V>>12&63]+hexTable[128|V>>6&63]+hexTable[128|V&63]}F+=L.join("")}return F},compact=function(T){for(var E=[{obj:{o:T},prop:"o"}],C=[],P=0;P<E.length;++P)for(var I=E[P],R=I.obj[I.prop],F=Object.keys(R),O=0;O<F.length;++O){var D=F[O],L=R[D];typeof L=="object"&&L!==null&&C.indexOf(L)===-1&&(E.push({obj:R,prop:D}),C.push(L))}return compactQueue(E),T},isRegExp=function(T){return Object.prototype.toString.call(T)==="[object RegExp]"},isBuffer=function(T){return!T||typeof T!="object"?!1:!!(T.constructor&&T.constructor.isBuffer&&T.constructor.isBuffer(T))},combine=function(T,E){return[].concat(T,E)},maybeMap=function(T,E){if(isArray$3(T)){for(var C=[],P=0;P<T.length;P+=1)C.push(E(T[P]));return C}return E(T)},utils$2={arrayToObject,assign,combine,compact,decode,encode,isBuffer,isRegExp,maybeMap,merge},getSideChannel=sideChannel,utils$1=utils$2,formats$2=formats$4,has$1=Object.prototype.hasOwnProperty,arrayPrefixGenerators={brackets:function(T){return T+"[]"},comma:"comma",indices:function(T,E){return T+"["+E+"]"},repeat:function(T){return T}},isArray$2=Array.isArray,push=Array.prototype.push,pushToArray=function(A,T){push.apply(A,isArray$2(T)?T:[T])},toISO=Date.prototype.toISOString,defaultFormat=formats$2.default,defaults$1={addQueryPrefix:!1,allowDots:!1,allowEmptyArrays:!1,arrayFormat:"indices",charset:"utf-8",charsetSentinel:!1,delimiter:"&",encode:!0,encodeDotInKeys:!1,encoder:utils$1.encode,encodeValuesOnly:!1,format:defaultFormat,formatter:formats$2.formatters[defaultFormat],indices:!1,serializeDate:function(T){return toISO.call(T)},skipNulls:!1,strictNullHandling:!1},isNonNullishPrimitive=function(T){return typeof T=="string"||typeof T=="number"||typeof T=="boolean"||typeof T=="symbol"||typeof T=="bigint"},sentinel={},stringify$1=function A(T,E,C,P,I,R,F,O,D,L,B,V,U,z,W,Z,X,K){for(var Y=T,Q=K,J=0,te=!1;(Q=Q.get(sentinel))!==void 0&&!te;){var ie=Q.get(T);if(J+=1,typeof ie<"u"){if(ie===J)throw new RangeError("Cyclic object value");te=!0}typeof Q.get(sentinel)>"u"&&(J=0)}if(typeof L=="function"?Y=L(E,Y):Y instanceof Date?Y=U(Y):C==="comma"&&isArray$2(Y)&&(Y=utils$1.maybeMap(Y,function(_e){return _e instanceof Date?U(_e):_e})),Y===null){if(R)return D&&!Z?D(E,defaults$1.encoder,X,"key",z):E;Y=""}if(isNonNullishPrimitive(Y)||utils$1.isBuffer(Y)){if(D){var ne=Z?E:D(E,defaults$1.encoder,X,"key",z);return[W(ne)+"="+W(D(Y,defaults$1.encoder,X,"value",z))]}return[W(E)+"="+W(String(Y))]}var he=[];if(typeof Y>"u")return he;var ve;if(C==="comma"&&isArray$2(Y))Z&&D&&(Y=utils$1.maybeMap(Y,D)),ve=[{value:Y.length>0?Y.join(",")||null:void 0}];else if(isArray$2(L))ve=L;else{var ye=Object.keys(Y);ve=B?ye.sort(B):ye}var de=O?E.replace(/\./g,"%2E"):E,fe=P&&isArray$2(Y)&&Y.length===1?de+"[]":de;if(I&&isArray$2(Y)&&Y.length===0)return fe+"[]";for(var ue=0;ue<ve.length;++ue){var ge=ve[ue],ae=typeof ge=="object"&&typeof ge.value<"u"?ge.value:Y[ge];if(!(F&&ae===null)){var ce=V&&O?ge.replace(/\./g,"%2E"):ge,se=isArray$2(Y)?typeof C=="function"?C(fe,ce):fe:fe+(V?"."+ce:"["+ce+"]");K.set(T,J);var le=getSideChannel();le.set(sentinel,K),pushToArray(he,A(ae,se,C,P,I,R,F,O,C==="comma"&&Z&&isArray$2(Y)?null:D,L,B,V,U,z,W,Z,X,le))}}return he},normalizeStringifyOptions=function(T){if(!T)return defaults$1;if(typeof T.allowEmptyArrays<"u"&&typeof T.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof T.encodeDotInKeys<"u"&&typeof T.encodeDotInKeys!="boolean")throw new TypeError("`encodeDotInKeys` option can only be `true` or `false`, when provided");if(T.encoder!==null&&typeof T.encoder<"u"&&typeof T.encoder!="function")throw new TypeError("Encoder has to be a function.");var E=T.charset||defaults$1.charset;if(typeof T.charset<"u"&&T.charset!=="utf-8"&&T.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var C=formats$2.default;if(typeof T.format<"u"){if(!has$1.call(formats$2.formatters,T.format))throw new TypeError("Unknown format option provided.");C=T.format}var P=formats$2.formatters[C],I=defaults$1.filter;(typeof T.filter=="function"||isArray$2(T.filter))&&(I=T.filter);var R;if(T.arrayFormat in arrayPrefixGenerators?R=T.arrayFormat:"indices"in T?R=T.indices?"indices":"repeat":R=defaults$1.arrayFormat,"commaRoundTrip"in T&&typeof T.commaRoundTrip!="boolean")throw new TypeError("`commaRoundTrip` must be a boolean, or absent");var F=typeof T.allowDots>"u"?T.encodeDotInKeys===!0?!0:defaults$1.allowDots:!!T.allowDots;return{addQueryPrefix:typeof T.addQueryPrefix=="boolean"?T.addQueryPrefix:defaults$1.addQueryPrefix,allowDots:F,allowEmptyArrays:typeof T.allowEmptyArrays=="boolean"?!!T.allowEmptyArrays:defaults$1.allowEmptyArrays,arrayFormat:R,charset:E,charsetSentinel:typeof T.charsetSentinel=="boolean"?T.charsetSentinel:defaults$1.charsetSentinel,commaRoundTrip:T.commaRoundTrip,delimiter:typeof T.delimiter>"u"?defaults$1.delimiter:T.delimiter,encode:typeof T.encode=="boolean"?T.encode:defaults$1.encode,encodeDotInKeys:typeof T.encodeDotInKeys=="boolean"?T.encodeDotInKeys:defaults$1.encodeDotInKeys,encoder:typeof T.encoder=="function"?T.encoder:defaults$1.encoder,encodeValuesOnly:typeof T.encodeValuesOnly=="boolean"?T.encodeValuesOnly:defaults$1.encodeValuesOnly,filter:I,format:C,formatter:P,serializeDate:typeof T.serializeDate=="function"?T.serializeDate:defaults$1.serializeDate,skipNulls:typeof T.skipNulls=="boolean"?T.skipNulls:defaults$1.skipNulls,sort:typeof T.sort=="function"?T.sort:null,strictNullHandling:typeof T.strictNullHandling=="boolean"?T.strictNullHandling:defaults$1.strictNullHandling}},stringify_1=function(A,T){var E=A,C=normalizeStringifyOptions(T),P,I;typeof C.filter=="function"?(I=C.filter,E=I("",E)):isArray$2(C.filter)&&(I=C.filter,P=I);var R=[];if(typeof E!="object"||E===null)return"";var F=arrayPrefixGenerators[C.arrayFormat],O=F==="comma"&&C.commaRoundTrip;P||(P=Object.keys(E)),C.sort&&P.sort(C.sort);for(var D=getSideChannel(),L=0;L<P.length;++L){var B=P[L];C.skipNulls&&E[B]===null||pushToArray(R,stringify$1(E[B],B,F,O,C.allowEmptyArrays,C.strictNullHandling,C.skipNulls,C.encodeDotInKeys,C.encode?C.encoder:null,C.filter,C.sort,C.allowDots,C.serializeDate,C.format,C.formatter,C.encodeValuesOnly,C.charset,D))}var V=R.join(C.delimiter),U=C.addQueryPrefix===!0?"?":"";return C.charsetSentinel&&(C.charset==="iso-8859-1"?U+="utf8=%26%2310003%3B&":U+="utf8=%E2%9C%93&"),V.length>0?U+V:""},utils=utils$2,has=Object.prototype.hasOwnProperty,isArray$1=Array.isArray,defaults={allowDots:!1,allowEmptyArrays:!1,allowPrototypes:!1,allowSparse:!1,arrayLimit:20,charset:"utf-8",charsetSentinel:!1,comma:!1,decodeDotInKeys:!1,decoder:utils.decode,delimiter:"&",depth:5,duplicates:"combine",ignoreQueryPrefix:!1,interpretNumericEntities:!1,parameterLimit:1e3,parseArrays:!0,plainObjects:!1,strictNullHandling:!1},interpretNumericEntities=function(A){return A.replace(/&#(\d+);/g,function(T,E){return String.fromCharCode(parseInt(E,10))})},parseArrayValue=function(A,T){return A&&typeof A=="string"&&T.comma&&A.indexOf(",")>-1?A.split(","):A},isoSentinel="utf8=%26%2310003%3B",charsetSentinel="utf8=%E2%9C%93",parseValues=function(T,E){var C={__proto__:null},P=E.ignoreQueryPrefix?T.replace(/^\?/,""):T,I=E.parameterLimit===1/0?void 0:E.parameterLimit,R=P.split(E.delimiter,I),F=-1,O,D=E.charset;if(E.charsetSentinel)for(O=0;O<R.length;++O)R[O].indexOf("utf8=")===0&&(R[O]===charsetSentinel?D="utf-8":R[O]===isoSentinel&&(D="iso-8859-1"),F=O,O=R.length);for(O=0;O<R.length;++O)if(O!==F){var L=R[O],B=L.indexOf("]="),V=B===-1?L.indexOf("="):B+1,U,z;V===-1?(U=E.decoder(L,defaults.decoder,D,"key"),z=E.strictNullHandling?null:""):(U=E.decoder(L.slice(0,V),defaults.decoder,D,"key"),z=utils.maybeMap(parseArrayValue(L.slice(V+1),E),function(Z){return E.decoder(Z,defaults.decoder,D,"value")})),z&&E.interpretNumericEntities&&D==="iso-8859-1"&&(z=interpretNumericEntities(z)),L.indexOf("[]=")>-1&&(z=isArray$1(z)?[z]:z);var W=has.call(C,U);W&&E.duplicates==="combine"?C[U]=utils.combine(C[U],z):(!W||E.duplicates==="last")&&(C[U]=z)}return C},parseObject=function(A,T,E,C){for(var P=C?T:parseArrayValue(T,E),I=A.length-1;I>=0;--I){var R,F=A[I];if(F==="[]"&&E.parseArrays)R=E.allowEmptyArrays&&P===""?[]:[].concat(P);else{R=E.plainObjects?Object.create(null):{};var O=F.charAt(0)==="["&&F.charAt(F.length-1)==="]"?F.slice(1,-1):F,D=E.decodeDotInKeys?O.replace(/%2E/g,"."):O,L=parseInt(D,10);!E.parseArrays&&D===""?R={0:P}:!isNaN(L)&&F!==D&&String(L)===D&&L>=0&&E.parseArrays&&L<=E.arrayLimit?(R=[],R[L]=P):D!=="__proto__"&&(R[D]=P)}P=R}return P},parseKeys=function(T,E,C,P){if(T){var I=C.allowDots?T.replace(/\.([^.[]+)/g,"[$1]"):T,R=/(\[[^[\]]*])/,F=/(\[[^[\]]*])/g,O=C.depth>0&&R.exec(I),D=O?I.slice(0,O.index):I,L=[];if(D){if(!C.plainObjects&&has.call(Object.prototype,D)&&!C.allowPrototypes)return;L.push(D)}for(var B=0;C.depth>0&&(O=F.exec(I))!==null&&B<C.depth;){if(B+=1,!C.plainObjects&&has.call(Object.prototype,O[1].slice(1,-1))&&!C.allowPrototypes)return;L.push(O[1])}return O&&L.push("["+I.slice(O.index)+"]"),parseObject(L,E,C,P)}},normalizeParseOptions=function(T){if(!T)return defaults;if(typeof T.allowEmptyArrays<"u"&&typeof T.allowEmptyArrays!="boolean")throw new TypeError("`allowEmptyArrays` option can only be `true` or `false`, when provided");if(typeof T.decodeDotInKeys<"u"&&typeof T.decodeDotInKeys!="boolean")throw new TypeError("`decodeDotInKeys` option can only be `true` or `false`, when provided");if(T.decoder!==null&&typeof T.decoder<"u"&&typeof T.decoder!="function")throw new TypeError("Decoder has to be a function.");if(typeof T.charset<"u"&&T.charset!=="utf-8"&&T.charset!=="iso-8859-1")throw new TypeError("The charset option must be either utf-8, iso-8859-1, or undefined");var E=typeof T.charset>"u"?defaults.charset:T.charset,C=typeof T.duplicates>"u"?defaults.duplicates:T.duplicates;if(C!=="combine"&&C!=="first"&&C!=="last")throw new TypeError("The duplicates option must be either combine, first, or last");var P=typeof T.allowDots>"u"?T.decodeDotInKeys===!0?!0:defaults.allowDots:!!T.allowDots;return{allowDots:P,allowEmptyArrays:typeof T.allowEmptyArrays=="boolean"?!!T.allowEmptyArrays:defaults.allowEmptyArrays,allowPrototypes:typeof T.allowPrototypes=="boolean"?T.allowPrototypes:defaults.allowPrototypes,allowSparse:typeof T.allowSparse=="boolean"?T.allowSparse:defaults.allowSparse,arrayLimit:typeof T.arrayLimit=="number"?T.arrayLimit:defaults.arrayLimit,charset:E,charsetSentinel:typeof T.charsetSentinel=="boolean"?T.charsetSentinel:defaults.charsetSentinel,comma:typeof T.comma=="boolean"?T.comma:defaults.comma,decodeDotInKeys:typeof T.decodeDotInKeys=="boolean"?T.decodeDotInKeys:defaults.decodeDotInKeys,decoder:typeof T.decoder=="function"?T.decoder:defaults.decoder,delimiter:typeof T.delimiter=="string"||utils.isRegExp(T.delimiter)?T.delimiter:defaults.delimiter,depth:typeof T.depth=="number"||T.depth===!1?+T.depth:defaults.depth,duplicates:C,ignoreQueryPrefix:T.ignoreQueryPrefix===!0,interpretNumericEntities:typeof T.interpretNumericEntities=="boolean"?T.interpretNumericEntities:defaults.interpretNumericEntities,parameterLimit:typeof T.parameterLimit=="number"?T.parameterLimit:defaults.parameterLimit,parseArrays:T.parseArrays!==!1,plainObjects:typeof T.plainObjects=="boolean"?T.plainObjects:defaults.plainObjects,strictNullHandling:typeof T.strictNullHandling=="boolean"?T.strictNullHandling:defaults.strictNullHandling}},parse$1=function(A,T){var E=normalizeParseOptions(T);if(A===""||A===null||typeof A>"u")return E.plainObjects?Object.create(null):{};for(var C=typeof A=="string"?parseValues(A,E):A,P=E.plainObjects?Object.create(null):{},I=Object.keys(C),R=0;R<I.length;++R){var F=I[R],O=parseKeys(F,C[F],E,typeof A=="string");P=utils.merge(P,O,E)}return E.allowSparse===!0?P:utils.compact(P)},stringify=stringify_1,parse=parse$1,formats$1=formats$4,lib={formats:formats$1,parse,stringify},punycode=punycodeExports;function Url(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}var protocolPattern=/^([a-z0-9.+-]+:)/i,portPattern=/:[0-9]*$/,simplePathPattern=/^(\/\/?(?!\/)[^?\s]*)(\?[^\s]*)?$/,delims=["<",">",'"',"`"," ","\r",`
`,"	"],unwise=["{","}","|","\\","^","`"].concat(delims),autoEscape=["'"].concat(unwise),nonHostChars=["%","/","?",";","#"].concat(autoEscape),hostEndingChars=["/","?","#"],hostnameMaxLen=255,hostnamePartPattern=/^[+a-z0-9A-Z_-]{0,63}$/,hostnamePartStart=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,unsafeProtocol={javascript:!0,"javascript:":!0},hostlessProtocol={javascript:!0,"javascript:":!0},slashedProtocol={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},querystring=lib;function urlParse(A,T,E){if(A&&typeof A=="object"&&A instanceof Url)return A;var C=new Url;return C.parse(A,T,E),C}Url.prototype.parse=function(A,T,E){if(typeof A!="string")throw new TypeError("Parameter 'url' must be a string, not "+typeof A);var C=A.indexOf("?"),P=C!==-1&&C<A.indexOf("#")?"?":"#",I=A.split(P),R=/\\/g;I[0]=I[0].replace(R,"/"),A=I.join(P);var F=A;if(F=F.trim(),!E&&A.split("#").length===1){var O=simplePathPattern.exec(F);if(O)return this.path=F,this.href=F,this.pathname=O[1],O[2]?(this.search=O[2],T?this.query=querystring.parse(this.search.substr(1)):this.query=this.search.substr(1)):T&&(this.search="",this.query={}),this}var D=protocolPattern.exec(F);if(D){D=D[0];var L=D.toLowerCase();this.protocol=L,F=F.substr(D.length)}if(E||D||F.match(/^\/\/[^@/]+@[^@/]+/)){var B=F.substr(0,2)==="//";B&&!(D&&hostlessProtocol[D])&&(F=F.substr(2),this.slashes=!0)}if(!hostlessProtocol[D]&&(B||D&&!slashedProtocol[D])){for(var V=-1,U=0;U<hostEndingChars.length;U++){var z=F.indexOf(hostEndingChars[U]);z!==-1&&(V===-1||z<V)&&(V=z)}var W,Z;V===-1?Z=F.lastIndexOf("@"):Z=F.lastIndexOf("@",V),Z!==-1&&(W=F.slice(0,Z),F=F.slice(Z+1),this.auth=decodeURIComponent(W)),V=-1;for(var U=0;U<nonHostChars.length;U++){var z=F.indexOf(nonHostChars[U]);z!==-1&&(V===-1||z<V)&&(V=z)}V===-1&&(V=F.length),this.host=F.slice(0,V),F=F.slice(V),this.parseHost(),this.hostname=this.hostname||"";var X=this.hostname[0]==="["&&this.hostname[this.hostname.length-1]==="]";if(!X)for(var K=this.hostname.split(/\./),U=0,Y=K.length;U<Y;U++){var Q=K[U];if(Q&&!Q.match(hostnamePartPattern)){for(var J="",te=0,ie=Q.length;te<ie;te++)Q.charCodeAt(te)>127?J+="x":J+=Q[te];if(!J.match(hostnamePartPattern)){var ne=K.slice(0,U),he=K.slice(U+1),ve=Q.match(hostnamePartStart);ve&&(ne.push(ve[1]),he.unshift(ve[2])),he.length&&(F="/"+he.join(".")+F),this.hostname=ne.join(".");break}}}this.hostname.length>hostnameMaxLen?this.hostname="":this.hostname=this.hostname.toLowerCase(),X||(this.hostname=punycode.toASCII(this.hostname));var ye=this.port?":"+this.port:"",de=this.hostname||"";this.host=de+ye,this.href+=this.host,X&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),F[0]!=="/"&&(F="/"+F))}if(!unsafeProtocol[L])for(var U=0,Y=autoEscape.length;U<Y;U++){var fe=autoEscape[U];if(F.indexOf(fe)!==-1){var ue=encodeURIComponent(fe);ue===fe&&(ue=escape(fe)),F=F.split(fe).join(ue)}}var ge=F.indexOf("#");ge!==-1&&(this.hash=F.substr(ge),F=F.slice(0,ge));var ae=F.indexOf("?");if(ae!==-1?(this.search=F.substr(ae),this.query=F.substr(ae+1),T&&(this.query=querystring.parse(this.query)),F=F.slice(0,ae)):T&&(this.search="",this.query={}),F&&(this.pathname=F),slashedProtocol[L]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){var ye=this.pathname||"",ce=this.search||"";this.path=ye+ce}return this.href=this.format(),this};Url.prototype.format=function(){var A=this.auth||"";A&&(A=encodeURIComponent(A),A=A.replace(/%3A/i,":"),A+="@");var T=this.protocol||"",E=this.pathname||"",C=this.hash||"",P=!1,I="";this.host?P=A+this.host:this.hostname&&(P=A+(this.hostname.indexOf(":")===-1?this.hostname:"["+this.hostname+"]"),this.port&&(P+=":"+this.port)),this.query&&typeof this.query=="object"&&Object.keys(this.query).length&&(I=querystring.stringify(this.query,{arrayFormat:"repeat",addQueryPrefix:!1}));var R=this.search||I&&"?"+I||"";return T&&T.substr(-1)!==":"&&(T+=":"),this.slashes||(!T||slashedProtocol[T])&&P!==!1?(P="//"+(P||""),E&&E.charAt(0)!=="/"&&(E="/"+E)):P||(P=""),C&&C.charAt(0)!=="#"&&(C="#"+C),R&&R.charAt(0)!=="?"&&(R="?"+R),E=E.replace(/[?#]/g,function(F){return encodeURIComponent(F)}),R=R.replace("#","%23"),T+P+E+R+C};Url.prototype.resolve=function(A){return this.resolveObject(urlParse(A,!1,!0)).format()};Url.prototype.resolveObject=function(A){if(typeof A=="string"){var T=new Url;T.parse(A,!1,!0),A=T}for(var E=new Url,C=Object.keys(this),P=0;P<C.length;P++){var I=C[P];E[I]=this[I]}if(E.hash=A.hash,A.href==="")return E.href=E.format(),E;if(A.slashes&&!A.protocol){for(var R=Object.keys(A),F=0;F<R.length;F++){var O=R[F];O!=="protocol"&&(E[O]=A[O])}return slashedProtocol[E.protocol]&&E.hostname&&!E.pathname&&(E.pathname="/",E.path=E.pathname),E.href=E.format(),E}if(A.protocol&&A.protocol!==E.protocol){if(!slashedProtocol[A.protocol]){for(var D=Object.keys(A),L=0;L<D.length;L++){var B=D[L];E[B]=A[B]}return E.href=E.format(),E}if(E.protocol=A.protocol,!A.host&&!hostlessProtocol[A.protocol]){for(var Y=(A.pathname||"").split("/");Y.length&&!(A.host=Y.shift()););A.host||(A.host=""),A.hostname||(A.hostname=""),Y[0]!==""&&Y.unshift(""),Y.length<2&&Y.unshift(""),E.pathname=Y.join("/")}else E.pathname=A.pathname;if(E.search=A.search,E.query=A.query,E.host=A.host||"",E.auth=A.auth,E.hostname=A.hostname||A.host,E.port=A.port,E.pathname||E.search){var V=E.pathname||"",U=E.search||"";E.path=V+U}return E.slashes=E.slashes||A.slashes,E.href=E.format(),E}var z=E.pathname&&E.pathname.charAt(0)==="/",W=A.host||A.pathname&&A.pathname.charAt(0)==="/",Z=W||z||E.host&&A.pathname,X=Z,K=E.pathname&&E.pathname.split("/")||[],Y=A.pathname&&A.pathname.split("/")||[],Q=E.protocol&&!slashedProtocol[E.protocol];if(Q&&(E.hostname="",E.port=null,E.host&&(K[0]===""?K[0]=E.host:K.unshift(E.host)),E.host="",A.protocol&&(A.hostname=null,A.port=null,A.host&&(Y[0]===""?Y[0]=A.host:Y.unshift(A.host)),A.host=null),Z=Z&&(Y[0]===""||K[0]==="")),W)E.host=A.host||A.host===""?A.host:E.host,E.hostname=A.hostname||A.hostname===""?A.hostname:E.hostname,E.search=A.search,E.query=A.query,K=Y;else if(Y.length)K||(K=[]),K.pop(),K=K.concat(Y),E.search=A.search,E.query=A.query;else if(A.search!=null){if(Q){E.host=K.shift(),E.hostname=E.host;var J=E.host&&E.host.indexOf("@")>0?E.host.split("@"):!1;J&&(E.auth=J.shift(),E.hostname=J.shift(),E.host=E.hostname)}return E.search=A.search,E.query=A.query,(E.pathname!==null||E.search!==null)&&(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.href=E.format(),E}if(!K.length)return E.pathname=null,E.search?E.path="/"+E.search:E.path=null,E.href=E.format(),E;for(var te=K.slice(-1)[0],ie=(E.host||A.host||K.length>1)&&(te==="."||te==="..")||te==="",ne=0,he=K.length;he>=0;he--)te=K[he],te==="."?K.splice(he,1):te===".."?(K.splice(he,1),ne++):ne&&(K.splice(he,1),ne--);if(!Z&&!X)for(;ne--;ne)K.unshift("..");Z&&K[0]!==""&&(!K[0]||K[0].charAt(0)!=="/")&&K.unshift(""),ie&&K.join("/").substr(-1)!=="/"&&K.push("");var ve=K[0]===""||K[0]&&K[0].charAt(0)==="/";if(Q){E.hostname=ve?"":K.length?K.shift():"",E.host=E.hostname;var J=E.host&&E.host.indexOf("@")>0?E.host.split("@"):!1;J&&(E.auth=J.shift(),E.hostname=J.shift(),E.host=E.hostname)}return Z=Z||E.host&&K.length,Z&&!ve&&K.unshift(""),K.length>0?E.pathname=K.join("/"):(E.pathname=null,E.path=null),(E.pathname!==null||E.search!==null)&&(E.path=(E.pathname?E.pathname:"")+(E.search?E.search:"")),E.auth=A.auth||E.auth,E.slashes=E.slashes||A.slashes,E.href=E.format(),E};Url.prototype.parseHost=function(){var A=this.host,T=portPattern.exec(A);T&&(T=T[0],T!==":"&&(this.port=T.substr(1)),A=A.substr(0,A.length-T.length)),A&&(this.hostname=A)};const warnings={};function deprecation(A,T,E=3){if(warnings[T])return;let C=new Error().stack;typeof C>"u"?console.warn("PixiJS Deprecation Warning: ",`${T}
Deprecated since v${A}`):(C=C.split(`
`).splice(E).join(`
`),console.groupCollapsed?(console.groupCollapsed("%cPixiJS Deprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",`${T}
Deprecated since v${A}`),console.warn(C),console.groupEnd()):(console.warn("PixiJS Deprecation Warning: ",`${T}
Deprecated since v${A}`),console.warn(C))),warnings[T]=!0}function assertPath(A){if(typeof A!="string")throw new TypeError(`Path must be a string. Received ${JSON.stringify(A)}`)}function removeUrlParams(A){return A.split("?")[0].split("#")[0]}function escapeRegExp(A){return A.replace(/[.*+?^${}()|[\]\\]/g,"\\$&")}function replaceAll(A,T,E){return A.replace(new RegExp(escapeRegExp(T),"g"),E)}function normalizeStringPosix(A,T){let E="",C=0,P=-1,I=0,R=-1;for(let F=0;F<=A.length;++F){if(F<A.length)R=A.charCodeAt(F);else{if(R===47)break;R=47}if(R===47){if(!(P===F-1||I===1))if(P!==F-1&&I===2){if(E.length<2||C!==2||E.charCodeAt(E.length-1)!==46||E.charCodeAt(E.length-2)!==46){if(E.length>2){const O=E.lastIndexOf("/");if(O!==E.length-1){O===-1?(E="",C=0):(E=E.slice(0,O),C=E.length-1-E.lastIndexOf("/")),P=F,I=0;continue}}else if(E.length===2||E.length===1){E="",C=0,P=F,I=0;continue}}}else E.length>0?E+=`/${A.slice(P+1,F)}`:E=A.slice(P+1,F),C=F-P-1;P=F,I=0}else R===46&&I!==-1?++I:I=-1}return E}const path={toPosix(A){return replaceAll(A,"\\","/")},isUrl(A){return/^https?:/.test(this.toPosix(A))},isDataUrl(A){return/^data:([a-z]+\/[a-z0-9-+.]+(;[a-z0-9-.!#$%*+.{}|~`]+=[a-z0-9-.!#$%*+.{}()_|~`]+)*)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s<>]*?)$/i.test(A)},isBlobUrl(A){return A.startsWith("blob:")},hasProtocol(A){return/^[^/:]+:/.test(this.toPosix(A))},getProtocol(A){assertPath(A),A=this.toPosix(A);const T=/^file:\/\/\//.exec(A);if(T)return T[0];const E=/^[^/:]+:\/{0,2}/.exec(A);return E?E[0]:""},toAbsolute(A,T,E){if(assertPath(A),this.isDataUrl(A)||this.isBlobUrl(A))return A;const C=removeUrlParams(this.toPosix(T??settings.ADAPTER.getBaseUrl())),P=removeUrlParams(this.toPosix(E??this.rootname(C)));return A=this.toPosix(A),A.startsWith("/")?path.join(P,A.slice(1)):this.isAbsolute(A)?A:this.join(C,A)},normalize(A){if(assertPath(A),A.length===0)return".";if(this.isDataUrl(A)||this.isBlobUrl(A))return A;A=this.toPosix(A);let T="";const E=A.startsWith("/");this.hasProtocol(A)&&(T=this.rootname(A),A=A.slice(T.length));const C=A.endsWith("/");return A=normalizeStringPosix(A),A.length>0&&C&&(A+="/"),E?`/${A}`:T+A},isAbsolute(A){return assertPath(A),A=this.toPosix(A),this.hasProtocol(A)?!0:A.startsWith("/")},join(...A){if(A.length===0)return".";let T;for(let E=0;E<A.length;++E){const C=A[E];if(assertPath(C),C.length>0)if(T===void 0)T=C;else{const P=A[E-1]??"";this.joinExtensions.includes(this.extname(P).toLowerCase())?T+=`/../${C}`:T+=`/${C}`}}return T===void 0?".":this.normalize(T)},dirname(A){if(assertPath(A),A.length===0)return".";A=this.toPosix(A);let T=A.charCodeAt(0);const E=T===47;let C=-1,P=!0;const I=this.getProtocol(A),R=A;A=A.slice(I.length);for(let F=A.length-1;F>=1;--F)if(T=A.charCodeAt(F),T===47){if(!P){C=F;break}}else P=!1;return C===-1?E?"/":this.isUrl(R)?I+A:I:E&&C===1?"//":I+A.slice(0,C)},rootname(A){assertPath(A),A=this.toPosix(A);let T="";if(A.startsWith("/")?T="/":T=this.getProtocol(A),this.isUrl(A)){const E=A.indexOf("/",T.length);E!==-1?T=A.slice(0,E):T=A,T.endsWith("/")||(T+="/")}return T},basename(A,T){assertPath(A),T&&assertPath(T),A=removeUrlParams(this.toPosix(A));let E=0,C=-1,P=!0,I;if(T!==void 0&&T.length>0&&T.length<=A.length){if(T.length===A.length&&T===A)return"";let R=T.length-1,F=-1;for(I=A.length-1;I>=0;--I){const O=A.charCodeAt(I);if(O===47){if(!P){E=I+1;break}}else F===-1&&(P=!1,F=I+1),R>=0&&(O===T.charCodeAt(R)?--R===-1&&(C=I):(R=-1,C=F))}return E===C?C=F:C===-1&&(C=A.length),A.slice(E,C)}for(I=A.length-1;I>=0;--I)if(A.charCodeAt(I)===47){if(!P){E=I+1;break}}else C===-1&&(P=!1,C=I+1);return C===-1?"":A.slice(E,C)},extname(A){assertPath(A),A=removeUrlParams(this.toPosix(A));let T=-1,E=0,C=-1,P=!0,I=0;for(let R=A.length-1;R>=0;--R){const F=A.charCodeAt(R);if(F===47){if(!P){E=R+1;break}continue}C===-1&&(P=!1,C=R+1),F===46?T===-1?T=R:I!==1&&(I=1):T!==-1&&(I=-1)}return T===-1||C===-1||I===0||I===1&&T===C-1&&T===E+1?"":A.slice(T,C)},parse(A){assertPath(A);const T={root:"",dir:"",base:"",ext:"",name:""};if(A.length===0)return T;A=removeUrlParams(this.toPosix(A));let E=A.charCodeAt(0);const C=this.isAbsolute(A);let P;T.root=this.rootname(A),C||this.hasProtocol(A)?P=1:P=0;let I=-1,R=0,F=-1,O=!0,D=A.length-1,L=0;for(;D>=P;--D){if(E=A.charCodeAt(D),E===47){if(!O){R=D+1;break}continue}F===-1&&(O=!1,F=D+1),E===46?I===-1?I=D:L!==1&&(L=1):I!==-1&&(L=-1)}return I===-1||F===-1||L===0||L===1&&I===F-1&&I===R+1?F!==-1&&(R===0&&C?T.base=T.name=A.slice(1,F):T.base=T.name=A.slice(R,F)):(R===0&&C?(T.name=A.slice(1,I),T.base=A.slice(1,F)):(T.name=A.slice(R,I),T.base=A.slice(R,F)),T.ext=A.slice(I,F)),T.dir=this.dirname(A),T},sep:"/",delimiter:":",joinExtensions:[".html"]};let promise;async function detectVideoAlphaMode(){return promise??(promise=(async()=>{var I;const A=document.createElement("canvas").getContext("webgl");if(!A)return ALPHA_MODES.UNPACK;const T=await new Promise(R=>{const F=document.createElement("video");F.onloadeddata=()=>R(F),F.onerror=()=>R(null),F.autoplay=!1,F.crossOrigin="anonymous",F.preload="auto",F.src="data:video/webm;base64,GkXfo59ChoEBQveBAULygQRC84EIQoKEd2VibUKHgQJChYECGFOAZwEAAAAAAAHTEU2bdLpNu4tTq4QVSalmU6yBoU27i1OrhBZUrmtTrIHGTbuMU6uEElTDZ1OsggEXTbuMU6uEHFO7a1OsggG97AEAAAAAAABZAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAVSalmoCrXsYMPQkBNgIRMYXZmV0GETGF2ZkSJiEBEAAAAAAAAFlSua8yuAQAAAAAAAEPXgQFzxYgAAAAAAAAAAZyBACK1nIN1bmSIgQCGhVZfVlA5g4EBI+ODhAJiWgDglLCBArqBApqBAlPAgQFVsIRVuYEBElTDZ9Vzc9JjwItjxYgAAAAAAAAAAWfInEWjh0VOQ09ERVJEh49MYXZjIGxpYnZweC12cDlnyKJFo4hEVVJBVElPTkSHlDAwOjAwOjAwLjA0MDAwMDAwMAAAH0O2dcfngQCgwqGggQAAAIJJg0IAABAAFgA4JBwYSgAAICAAEb///4r+AAB1oZ2mm+6BAaWWgkmDQgAAEAAWADgkHBhKAAAgIABIQBxTu2uRu4+zgQC3iveBAfGCAXHwgQM=",F.load()});if(!T)return ALPHA_MODES.UNPACK;const E=A.createTexture();A.bindTexture(A.TEXTURE_2D,E);const C=A.createFramebuffer();A.bindFramebuffer(A.FRAMEBUFFER,C),A.framebufferTexture2D(A.FRAMEBUFFER,A.COLOR_ATTACHMENT0,A.TEXTURE_2D,E,0),A.pixelStorei(A.UNPACK_PREMULTIPLY_ALPHA_WEBGL,!1),A.pixelStorei(A.UNPACK_COLORSPACE_CONVERSION_WEBGL,A.NONE),A.texImage2D(A.TEXTURE_2D,0,A.RGBA,A.RGBA,A.UNSIGNED_BYTE,T);const P=new Uint8Array(4);return A.readPixels(0,0,1,1,A.RGBA,A.UNSIGNED_BYTE,P),A.deleteFramebuffer(C),A.deleteTexture(E),(I=A.getExtension("WEBGL_lose_context"))==null||I.loseContext(),P[0]<=P[3]?ALPHA_MODES.PMA:ALPHA_MODES.UNPACK})()),promise}let supported;function isWebGLSupported(){return typeof supported>"u"&&(supported=function(){var T;const A={stencil:!0,failIfMajorPerformanceCaveat:settings.FAIL_IF_MAJOR_PERFORMANCE_CAVEAT};try{if(!settings.ADAPTER.getWebGLRenderingContext())return!1;const E=settings.ADAPTER.createCanvas();let C=E.getContext("webgl",A)||E.getContext("experimental-webgl",A);const P=!!((T=C==null?void 0:C.getContextAttributes())!=null&&T.stencil);if(C){const I=C.getExtension("WEBGL_lose_context");I&&I.loseContext()}return C=null,P}catch{return!1}}()),supported}var r={grad:.9,turn:360,rad:360/(2*Math.PI)},t=function(A){return typeof A=="string"?A.length>0:typeof A=="number"},n=function(A,T,E){return T===void 0&&(T=0),E===void 0&&(E=Math.pow(10,T)),Math.round(E*A)/E+0},e=function(A,T,E){return T===void 0&&(T=0),E===void 0&&(E=1),A>E?E:A>T?A:T},u=function(A){return(A=isFinite(A)?A%360:0)>0?A:A+360},a=function(A){return{r:e(A.r,0,255),g:e(A.g,0,255),b:e(A.b,0,255),a:e(A.a)}},o=function(A){return{r:n(A.r),g:n(A.g),b:n(A.b),a:n(A.a,3)}},i=/^#([0-9a-f]{3,8})$/i,s=function(A){var T=A.toString(16);return T.length<2?"0"+T:T},h$1=function(A){var T=A.r,E=A.g,C=A.b,P=A.a,I=Math.max(T,E,C),R=I-Math.min(T,E,C),F=R?I===T?(E-C)/R:I===E?2+(C-T)/R:4+(T-E)/R:0;return{h:60*(F<0?F+6:F),s:I?R/I*100:0,v:I/255*100,a:P}},b=function(A){var T=A.h,E=A.s,C=A.v,P=A.a;T=T/360*6,E/=100,C/=100;var I=Math.floor(T),R=C*(1-E),F=C*(1-(T-I)*E),O=C*(1-(1-T+I)*E),D=I%6;return{r:255*[C,F,R,R,O,C][D],g:255*[O,C,C,F,R,R][D],b:255*[R,R,O,C,C,F][D],a:P}},g=function(A){return{h:u(A.h),s:e(A.s,0,100),l:e(A.l,0,100),a:e(A.a)}},d=function(A){return{h:n(A.h),s:n(A.s),l:n(A.l),a:n(A.a,3)}},f=function(A){return b((E=(T=A).s,{h:T.h,s:(E*=((C=T.l)<50?C:100-C)/100)>0?2*E/(C+E)*100:0,v:C+E,a:T.a}));var T,E,C},c$1=function(A){return{h:(T=h$1(A)).h,s:(P=(200-(E=T.s))*(C=T.v)/100)>0&&P<200?E*C/100/(P<=100?P:200-P)*100:0,l:P/2,a:T.a};var T,E,C,P},l=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s*,\s*([+-]?\d*\.?\d+)%\s*,\s*([+-]?\d*\.?\d+)%\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,p=/^hsla?\(\s*([+-]?\d*\.?\d+)(deg|rad|grad|turn)?\s+([+-]?\d*\.?\d+)%\s+([+-]?\d*\.?\d+)%\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,v$1=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*,\s*([+-]?\d*\.?\d+)(%)?\s*(?:,\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,m=/^rgba?\(\s*([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s+([+-]?\d*\.?\d+)(%)?\s*(?:\/\s*([+-]?\d*\.?\d+)(%)?\s*)?\)$/i,y={string:[[function(A){var T=i.exec(A);return T?(A=T[1]).length<=4?{r:parseInt(A[0]+A[0],16),g:parseInt(A[1]+A[1],16),b:parseInt(A[2]+A[2],16),a:A.length===4?n(parseInt(A[3]+A[3],16)/255,2):1}:A.length===6||A.length===8?{r:parseInt(A.substr(0,2),16),g:parseInt(A.substr(2,2),16),b:parseInt(A.substr(4,2),16),a:A.length===8?n(parseInt(A.substr(6,2),16)/255,2):1}:null:null},"hex"],[function(A){var T=v$1.exec(A)||m.exec(A);return T?T[2]!==T[4]||T[4]!==T[6]?null:a({r:Number(T[1])/(T[2]?100/255:1),g:Number(T[3])/(T[4]?100/255:1),b:Number(T[5])/(T[6]?100/255:1),a:T[7]===void 0?1:Number(T[7])/(T[8]?100:1)}):null},"rgb"],[function(A){var T=l.exec(A)||p.exec(A);if(!T)return null;var E,C,P=g({h:(E=T[1],C=T[2],C===void 0&&(C="deg"),Number(E)*(r[C]||1)),s:Number(T[3]),l:Number(T[4]),a:T[5]===void 0?1:Number(T[5])/(T[6]?100:1)});return f(P)},"hsl"]],object:[[function(A){var T=A.r,E=A.g,C=A.b,P=A.a,I=P===void 0?1:P;return t(T)&&t(E)&&t(C)?a({r:Number(T),g:Number(E),b:Number(C),a:Number(I)}):null},"rgb"],[function(A){var T=A.h,E=A.s,C=A.l,P=A.a,I=P===void 0?1:P;if(!t(T)||!t(E)||!t(C))return null;var R=g({h:Number(T),s:Number(E),l:Number(C),a:Number(I)});return f(R)},"hsl"],[function(A){var T=A.h,E=A.s,C=A.v,P=A.a,I=P===void 0?1:P;if(!t(T)||!t(E)||!t(C))return null;var R=function(F){return{h:u(F.h),s:e(F.s,0,100),v:e(F.v,0,100),a:e(F.a)}}({h:Number(T),s:Number(E),v:Number(C),a:Number(I)});return b(R)},"hsv"]]},N=function(A,T){for(var E=0;E<T.length;E++){var C=T[E][0](A);if(C)return[C,T[E][1]]}return[null,void 0]},x=function(A){return typeof A=="string"?N(A.trim(),y.string):typeof A=="object"&&A!==null?N(A,y.object):[null,void 0]},M=function(A,T){var E=c$1(A);return{h:E.h,s:e(E.s+100*T,0,100),l:E.l,a:E.a}},H=function(A){return(299*A.r+587*A.g+114*A.b)/1e3/255},$=function(A,T){var E=c$1(A);return{h:E.h,s:E.s,l:e(E.l+100*T,0,100),a:E.a}},j=function(){function A(T){this.parsed=x(T)[0],this.rgba=this.parsed||{r:0,g:0,b:0,a:1}}return A.prototype.isValid=function(){return this.parsed!==null},A.prototype.brightness=function(){return n(H(this.rgba),2)},A.prototype.isDark=function(){return H(this.rgba)<.5},A.prototype.isLight=function(){return H(this.rgba)>=.5},A.prototype.toHex=function(){return T=o(this.rgba),E=T.r,C=T.g,P=T.b,R=(I=T.a)<1?s(n(255*I)):"","#"+s(E)+s(C)+s(P)+R;var T,E,C,P,I,R},A.prototype.toRgb=function(){return o(this.rgba)},A.prototype.toRgbString=function(){return T=o(this.rgba),E=T.r,C=T.g,P=T.b,(I=T.a)<1?"rgba("+E+", "+C+", "+P+", "+I+")":"rgb("+E+", "+C+", "+P+")";var T,E,C,P,I},A.prototype.toHsl=function(){return d(c$1(this.rgba))},A.prototype.toHslString=function(){return T=d(c$1(this.rgba)),E=T.h,C=T.s,P=T.l,(I=T.a)<1?"hsla("+E+", "+C+"%, "+P+"%, "+I+")":"hsl("+E+", "+C+"%, "+P+"%)";var T,E,C,P,I},A.prototype.toHsv=function(){return T=h$1(this.rgba),{h:n(T.h),s:n(T.s),v:n(T.v),a:n(T.a,3)};var T},A.prototype.invert=function(){return w$1({r:255-(T=this.rgba).r,g:255-T.g,b:255-T.b,a:T.a});var T},A.prototype.saturate=function(T){return T===void 0&&(T=.1),w$1(M(this.rgba,T))},A.prototype.desaturate=function(T){return T===void 0&&(T=.1),w$1(M(this.rgba,-T))},A.prototype.grayscale=function(){return w$1(M(this.rgba,-1))},A.prototype.lighten=function(T){return T===void 0&&(T=.1),w$1($(this.rgba,T))},A.prototype.darken=function(T){return T===void 0&&(T=.1),w$1($(this.rgba,-T))},A.prototype.rotate=function(T){return T===void 0&&(T=15),this.hue(this.hue()+T)},A.prototype.alpha=function(T){return typeof T=="number"?w$1({r:(E=this.rgba).r,g:E.g,b:E.b,a:T}):n(this.rgba.a,3);var E},A.prototype.hue=function(T){var E=c$1(this.rgba);return typeof T=="number"?w$1({h:T,s:E.s,l:E.l,a:E.a}):n(E.h)},A.prototype.isEqual=function(T){return this.toHex()===w$1(T).toHex()},A}(),w$1=function(A){return A instanceof j?A:new j(A)},S=[],k=function(A){A.forEach(function(T){S.indexOf(T)<0&&(T(j,y),S.push(T))})};function namesPlugin(A,T){var E={white:"#ffffff",bisque:"#ffe4c4",blue:"#0000ff",cadetblue:"#5f9ea0",chartreuse:"#7fff00",chocolate:"#d2691e",coral:"#ff7f50",antiquewhite:"#faebd7",aqua:"#00ffff",azure:"#f0ffff",whitesmoke:"#f5f5f5",papayawhip:"#ffefd5",plum:"#dda0dd",blanchedalmond:"#ffebcd",black:"#000000",gold:"#ffd700",goldenrod:"#daa520",gainsboro:"#dcdcdc",cornsilk:"#fff8dc",cornflowerblue:"#6495ed",burlywood:"#deb887",aquamarine:"#7fffd4",beige:"#f5f5dc",crimson:"#dc143c",cyan:"#00ffff",darkblue:"#00008b",darkcyan:"#008b8b",darkgoldenrod:"#b8860b",darkkhaki:"#bdb76b",darkgray:"#a9a9a9",darkgreen:"#006400",darkgrey:"#a9a9a9",peachpuff:"#ffdab9",darkmagenta:"#8b008b",darkred:"#8b0000",darkorchid:"#9932cc",darkorange:"#ff8c00",darkslateblue:"#483d8b",gray:"#808080",darkslategray:"#2f4f4f",darkslategrey:"#2f4f4f",deeppink:"#ff1493",deepskyblue:"#00bfff",wheat:"#f5deb3",firebrick:"#b22222",floralwhite:"#fffaf0",ghostwhite:"#f8f8ff",darkviolet:"#9400d3",magenta:"#ff00ff",green:"#008000",dodgerblue:"#1e90ff",grey:"#808080",honeydew:"#f0fff0",hotpink:"#ff69b4",blueviolet:"#8a2be2",forestgreen:"#228b22",lawngreen:"#7cfc00",indianred:"#cd5c5c",indigo:"#4b0082",fuchsia:"#ff00ff",brown:"#a52a2a",maroon:"#800000",mediumblue:"#0000cd",lightcoral:"#f08080",darkturquoise:"#00ced1",lightcyan:"#e0ffff",ivory:"#fffff0",lightyellow:"#ffffe0",lightsalmon:"#ffa07a",lightseagreen:"#20b2aa",linen:"#faf0e6",mediumaquamarine:"#66cdaa",lemonchiffon:"#fffacd",lime:"#00ff00",khaki:"#f0e68c",mediumseagreen:"#3cb371",limegreen:"#32cd32",mediumspringgreen:"#00fa9a",lightskyblue:"#87cefa",lightblue:"#add8e6",midnightblue:"#191970",lightpink:"#ffb6c1",mistyrose:"#ffe4e1",moccasin:"#ffe4b5",mintcream:"#f5fffa",lightslategray:"#778899",lightslategrey:"#778899",navajowhite:"#ffdead",navy:"#000080",mediumvioletred:"#c71585",powderblue:"#b0e0e6",palegoldenrod:"#eee8aa",oldlace:"#fdf5e6",paleturquoise:"#afeeee",mediumturquoise:"#48d1cc",mediumorchid:"#ba55d3",rebeccapurple:"#663399",lightsteelblue:"#b0c4de",mediumslateblue:"#7b68ee",thistle:"#d8bfd8",tan:"#d2b48c",orchid:"#da70d6",mediumpurple:"#9370db",purple:"#800080",pink:"#ffc0cb",skyblue:"#87ceeb",springgreen:"#00ff7f",palegreen:"#98fb98",red:"#ff0000",yellow:"#ffff00",slateblue:"#6a5acd",lavenderblush:"#fff0f5",peru:"#cd853f",palevioletred:"#db7093",violet:"#ee82ee",teal:"#008080",slategray:"#708090",slategrey:"#708090",aliceblue:"#f0f8ff",darkseagreen:"#8fbc8f",darkolivegreen:"#556b2f",greenyellow:"#adff2f",seagreen:"#2e8b57",seashell:"#fff5ee",tomato:"#ff6347",silver:"#c0c0c0",sienna:"#a0522d",lavender:"#e6e6fa",lightgreen:"#90ee90",orange:"#ffa500",orangered:"#ff4500",steelblue:"#4682b4",royalblue:"#4169e1",turquoise:"#40e0d0",yellowgreen:"#9acd32",salmon:"#fa8072",saddlebrown:"#8b4513",sandybrown:"#f4a460",rosybrown:"#bc8f8f",darksalmon:"#e9967a",lightgoldenrodyellow:"#fafad2",snow:"#fffafa",lightgrey:"#d3d3d3",lightgray:"#d3d3d3",dimgray:"#696969",dimgrey:"#696969",olivedrab:"#6b8e23",olive:"#808000"},C={};for(var P in E)C[E[P]]=P;var I={};A.prototype.toName=function(R){if(!(this.rgba.a||this.rgba.r||this.rgba.g||this.rgba.b))return"transparent";var F,O,D=C[this.toHex()];if(D)return D;if(R!=null&&R.closest){var L=this.toRgb(),B=1/0,V="black";if(!I.length)for(var U in E)I[U]=new A(E[U]).toRgb();for(var z in E){var W=(F=L,O=I[z],Math.pow(F.r-O.r,2)+Math.pow(F.g-O.g,2)+Math.pow(F.b-O.b,2));W<B&&(B=W,V=z)}return V}},T.string.push([function(R){var F=R.toLowerCase(),O=F==="transparent"?"#0000":E[F];return O?new A(O).toRgb():null},"name"])}k([namesPlugin]);const _Color=class rs{constructor(T=16777215){this._value=null,this._components=new Float32Array(4),this._components.fill(1),this._int=16777215,this.value=T}get red(){return this._components[0]}get green(){return this._components[1]}get blue(){return this._components[2]}get alpha(){return this._components[3]}setValue(T){return this.value=T,this}set value(T){if(T instanceof rs)this._value=this.cloneSource(T._value),this._int=T._int,this._components.set(T._components);else{if(T===null)throw new Error("Cannot set PIXI.Color#value to null");(this._value===null||!this.isSourceEqual(this._value,T))&&(this.normalize(T),this._value=this.cloneSource(T))}}get value(){return this._value}cloneSource(T){return typeof T=="string"||typeof T=="number"||T instanceof Number||T===null?T:Array.isArray(T)||ArrayBuffer.isView(T)?T.slice(0):typeof T=="object"&&T!==null?{...T}:T}isSourceEqual(T,E){const C=typeof T;if(C!==typeof E)return!1;if(C==="number"||C==="string"||T instanceof Number)return T===E;if(Array.isArray(T)&&Array.isArray(E)||ArrayBuffer.isView(T)&&ArrayBuffer.isView(E))return T.length!==E.length?!1:T.every((P,I)=>P===E[I]);if(T!==null&&E!==null){const P=Object.keys(T),I=Object.keys(E);return P.length!==I.length?!1:P.every(R=>T[R]===E[R])}return T===E}toRgba(){const[T,E,C,P]=this._components;return{r:T,g:E,b:C,a:P}}toRgb(){const[T,E,C]=this._components;return{r:T,g:E,b:C}}toRgbaString(){const[T,E,C]=this.toUint8RgbArray();return`rgba(${T},${E},${C},${this.alpha})`}toUint8RgbArray(T){const[E,C,P]=this._components;return T=T??[],T[0]=Math.round(E*255),T[1]=Math.round(C*255),T[2]=Math.round(P*255),T}toRgbArray(T){T=T??[];const[E,C,P]=this._components;return T[0]=E,T[1]=C,T[2]=P,T}toNumber(){return this._int}toLittleEndianNumber(){const T=this._int;return(T>>16)+(T&65280)+((T&255)<<16)}multiply(T){const[E,C,P,I]=rs.temp.setValue(T)._components;return this._components[0]*=E,this._components[1]*=C,this._components[2]*=P,this._components[3]*=I,this.refreshInt(),this._value=null,this}premultiply(T,E=!0){return E&&(this._components[0]*=T,this._components[1]*=T,this._components[2]*=T),this._components[3]=T,this.refreshInt(),this._value=null,this}toPremultiplied(T,E=!0){if(T===1)return(255<<24)+this._int;if(T===0)return E?0:this._int;let C=this._int>>16&255,P=this._int>>8&255,I=this._int&255;return E&&(C=C*T+.5|0,P=P*T+.5|0,I=I*T+.5|0),(T*255<<24)+(C<<16)+(P<<8)+I}toHex(){const T=this._int.toString(16);return`#${"000000".substring(0,6-T.length)+T}`}toHexa(){const T=Math.round(this._components[3]*255).toString(16);return this.toHex()+"00".substring(0,2-T.length)+T}setAlpha(T){return this._components[3]=this._clamp(T),this}round(T){const[E,C,P]=this._components;return this._components[0]=Math.round(E*T)/T,this._components[1]=Math.round(C*T)/T,this._components[2]=Math.round(P*T)/T,this.refreshInt(),this._value=null,this}toArray(T){T=T??[];const[E,C,P,I]=this._components;return T[0]=E,T[1]=C,T[2]=P,T[3]=I,T}normalize(T){let E,C,P,I;if((typeof T=="number"||T instanceof Number)&&T>=0&&T<=16777215){const R=T;E=(R>>16&255)/255,C=(R>>8&255)/255,P=(R&255)/255,I=1}else if((Array.isArray(T)||T instanceof Float32Array)&&T.length>=3&&T.length<=4)T=this._clamp(T),[E,C,P,I=1]=T;else if((T instanceof Uint8Array||T instanceof Uint8ClampedArray)&&T.length>=3&&T.length<=4)T=this._clamp(T,0,255),[E,C,P,I=255]=T,E/=255,C/=255,P/=255,I/=255;else if(typeof T=="string"||typeof T=="object"){if(typeof T=="string"){const F=rs.HEX_PATTERN.exec(T);F&&(T=`#${F[2]}`)}const R=w$1(T);R.isValid()&&({r:E,g:C,b:P,a:I}=R.rgba,E/=255,C/=255,P/=255)}if(E!==void 0)this._components[0]=E,this._components[1]=C,this._components[2]=P,this._components[3]=I,this.refreshInt();else throw new Error(`Unable to convert color ${T}`)}refreshInt(){this._clamp(this._components);const[T,E,C]=this._components;this._int=(T*255<<16)+(E*255<<8)+(C*255|0)}_clamp(T,E=0,C=1){return typeof T=="number"?Math.min(Math.max(T,E),C):(T.forEach((P,I)=>{T[I]=Math.min(Math.max(P,E),C)}),T)}};_Color.shared=new _Color,_Color.temp=new _Color,_Color.HEX_PATTERN=/^(#|0x)?(([a-f0-9]{3}){1,2}([a-f0-9]{2})?)$/i;let Color=_Color;function hex2string(A){return deprecation("7.2.0","utils.hex2string is deprecated, use Color#toHex instead"),Color.shared.setValue(A).toHex()}function rgb2hex(A){return deprecation("7.2.0","utils.rgb2hex is deprecated, use Color#toNumber instead"),Color.shared.setValue(A).toNumber()}function mapPremultipliedBlendModes(){const A=[],T=[];for(let C=0;C<32;C++)A[C]=C,T[C]=C;A[BLEND_MODES.NORMAL_NPM]=BLEND_MODES.NORMAL,A[BLEND_MODES.ADD_NPM]=BLEND_MODES.ADD,A[BLEND_MODES.SCREEN_NPM]=BLEND_MODES.SCREEN,T[BLEND_MODES.NORMAL]=BLEND_MODES.NORMAL_NPM,T[BLEND_MODES.ADD]=BLEND_MODES.ADD_NPM,T[BLEND_MODES.SCREEN]=BLEND_MODES.SCREEN_NPM;const E=[];return E.push(T),E.push(A),E}const premultiplyBlendMode=mapPremultipliedBlendModes();function correctBlendMode(A,T){return premultiplyBlendMode[T?1:0][A]}function createIndicesForQuads(A,T=null){const E=A*6;if(T=T||new Uint16Array(E),T.length!==E)throw new Error(`Out buffer length is incorrect, got ${T.length} and expected ${E}`);for(let C=0,P=0;C<E;C+=6,P+=4)T[C+0]=P+0,T[C+1]=P+1,T[C+2]=P+2,T[C+3]=P+0,T[C+4]=P+2,T[C+5]=P+3;return T}function getBufferType(A){if(A.BYTES_PER_ELEMENT===4)return A instanceof Float32Array?"Float32Array":A instanceof Uint32Array?"Uint32Array":"Int32Array";if(A.BYTES_PER_ELEMENT===2){if(A instanceof Uint16Array)return"Uint16Array"}else if(A.BYTES_PER_ELEMENT===1&&A instanceof Uint8Array)return"Uint8Array";return null}function nextPow2(A){return A+=A===0?1:0,--A,A|=A>>>1,A|=A>>>2,A|=A>>>4,A|=A>>>8,A|=A>>>16,A+1}function isPow2(A){return!(A&A-1)&&!!A}function log2(A){let T=(A>65535?1:0)<<4;A>>>=T;let E=(A>255?1:0)<<3;return A>>>=E,T|=E,E=(A>15?1:0)<<2,A>>>=E,T|=E,E=(A>3?1:0)<<1,A>>>=E,T|=E,T|A>>1}function removeItems(A,T,E){const C=A.length;let P;if(T>=C||E===0)return;E=T+E>C?C-T:E;const I=C-E;for(P=T;P<I;++P)A[P]=A[P+E];A.length=I}function sign(A){return A===0?0:A<0?-1:1}let nextUid=0;function uid(){return++nextUid}const _BoundingBox=class{constructor(A,T,E,C){this.left=A,this.top=T,this.right=E,this.bottom=C}get width(){return this.right-this.left}get height(){return this.bottom-this.top}isEmpty(){return this.left===this.right||this.top===this.bottom}};_BoundingBox.EMPTY=new _BoundingBox(0,0,0,0);let BoundingBox=_BoundingBox;const ProgramCache={},TextureCache=Object.create(null),BaseTextureCache=Object.create(null);class CanvasRenderTarget{constructor(T,E,C){this._canvas=settings.ADAPTER.createCanvas(),this._context=this._canvas.getContext("2d"),this.resolution=C||settings.RESOLUTION,this.resize(T,E)}clear(){this._checkDestroyed(),this._context.setTransform(1,0,0,1,0,0),this._context.clearRect(0,0,this._canvas.width,this._canvas.height)}resize(T,E){this._checkDestroyed(),this._canvas.width=Math.round(T*this.resolution),this._canvas.height=Math.round(E*this.resolution)}destroy(){this._context=null,this._canvas=null}get width(){return this._checkDestroyed(),this._canvas.width}set width(T){this._checkDestroyed(),this._canvas.width=Math.round(T)}get height(){return this._checkDestroyed(),this._canvas.height}set height(T){this._checkDestroyed(),this._canvas.height=Math.round(T)}get canvas(){return this._checkDestroyed(),this._canvas}get context(){return this._checkDestroyed(),this._context}_checkDestroyed(){if(this._canvas===null)throw new TypeError("The CanvasRenderTarget has already been destroyed")}}function checkRow(A,T,E){for(let C=0,P=4*E*T;C<T;++C,P+=4)if(A[P+3]!==0)return!1;return!0}function checkColumn(A,T,E,C,P){const I=4*T;for(let R=C,F=C*I+4*E;R<=P;++R,F+=I)if(A[F+3]!==0)return!1;return!0}function getCanvasBoundingBox(A){const{width:T,height:E}=A,C=A.getContext("2d",{willReadFrequently:!0});if(C===null)throw new TypeError("Failed to get canvas 2D context");const P=C.getImageData(0,0,T,E).data;let I=0,R=0,F=T-1,O=E-1;for(;R<E&&checkRow(P,T,R);)++R;if(R===E)return BoundingBox.EMPTY;for(;checkRow(P,T,O);)--O;for(;checkColumn(P,T,I,R,O);)++I;for(;checkColumn(P,T,F,R,O);)--F;return++F,++O,new BoundingBox(I,R,F,O)}function trimCanvas(A){const T=getCanvasBoundingBox(A),{width:E,height:C}=T;let P=null;if(!T.isEmpty()){const I=A.getContext("2d");if(I===null)throw new TypeError("Failed to get canvas 2D context");P=I.getImageData(T.left,T.top,E,C)}return{width:E,height:C,data:P}}function determineCrossOrigin(A,T=globalThis.location){if(A.startsWith("data:"))return"";T=T||globalThis.location;const E=new URL(A,document.baseURI);return E.hostname!==T.hostname||E.port!==T.port||E.protocol!==T.protocol?"anonymous":""}function getResolutionOfUrl(A,T=1){var C;const E=(C=settings.RETINA_PREFIX)==null?void 0:C.exec(A);return E?parseFloat(E[1]):T}var ExtensionType=(A=>(A.Renderer="renderer",A.Application="application",A.RendererSystem="renderer-webgl-system",A.RendererPlugin="renderer-webgl-plugin",A.CanvasRendererSystem="renderer-canvas-system",A.CanvasRendererPlugin="renderer-canvas-plugin",A.Asset="asset",A.LoadParser="load-parser",A.ResolveParser="resolve-parser",A.CacheParser="cache-parser",A.DetectionParser="detection-parser",A))(ExtensionType||{});const normalizeExtension=A=>{if(typeof A=="function"||typeof A=="object"&&A.extension){if(!A.extension)throw new Error("Extension class must have an extension object");A={...typeof A.extension!="object"?{type:A.extension}:A.extension,ref:A}}if(typeof A=="object")A={...A};else throw new Error("Invalid extension type");return typeof A.type=="string"&&(A.type=[A.type]),A},normalizePriority=(A,T)=>normalizeExtension(A).priority??T,extensions$1={_addHandlers:{},_removeHandlers:{},_queue:{},remove(...A){return A.map(normalizeExtension).forEach(T=>{T.type.forEach(E=>{var C,P;return(P=(C=this._removeHandlers)[E])==null?void 0:P.call(C,T)})}),this},add(...A){return A.map(normalizeExtension).forEach(T=>{T.type.forEach(E=>{const C=this._addHandlers,P=this._queue;C[E]?C[E](T):(P[E]=P[E]||[],P[E].push(T))})}),this},handle(A,T,E){const C=this._addHandlers,P=this._removeHandlers;if(C[A]||P[A])throw new Error(`Extension type ${A} already has a handler`);C[A]=T,P[A]=E;const I=this._queue;return I[A]&&(I[A].forEach(R=>T(R)),delete I[A]),this},handleByMap(A,T){return this.handle(A,E=>{T[E.name]=E.ref},E=>{delete T[E.name]})},handleByList(A,T,E=-1){return this.handle(A,C=>{T.includes(C.ref)||(T.push(C.ref),T.sort((P,I)=>normalizePriority(I,E)-normalizePriority(P,E)))},C=>{const P=T.indexOf(C.ref);P!==-1&&T.splice(P,1)})}};class ViewableBuffer{constructor(T){typeof T=="number"?this.rawBinaryData=new ArrayBuffer(T):T instanceof Uint8Array?this.rawBinaryData=T.buffer:this.rawBinaryData=T,this.uint32View=new Uint32Array(this.rawBinaryData),this.float32View=new Float32Array(this.rawBinaryData)}get int8View(){return this._int8View||(this._int8View=new Int8Array(this.rawBinaryData)),this._int8View}get uint8View(){return this._uint8View||(this._uint8View=new Uint8Array(this.rawBinaryData)),this._uint8View}get int16View(){return this._int16View||(this._int16View=new Int16Array(this.rawBinaryData)),this._int16View}get uint16View(){return this._uint16View||(this._uint16View=new Uint16Array(this.rawBinaryData)),this._uint16View}get int32View(){return this._int32View||(this._int32View=new Int32Array(this.rawBinaryData)),this._int32View}view(T){return this[`${T}View`]}destroy(){this.rawBinaryData=null,this._int8View=null,this._uint8View=null,this._int16View=null,this._uint16View=null,this._int32View=null,this.uint32View=null,this.float32View=null}static sizeOf(T){switch(T){case"int8":case"uint8":return 1;case"int16":case"uint16":return 2;case"int32":case"uint32":case"float32":return 4;default:throw new Error(`${T} isn't a valid view type`)}}}const fragTemplate$1=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join(`
`);function generateIfTestSrc(A){let T="";for(let E=0;E<A;++E)E>0&&(T+=`
else `),E<A-1&&(T+=`if(test == ${E}.0){}`);return T}function checkMaxIfStatementsInShader(A,T){if(A===0)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");const E=T.createShader(T.FRAGMENT_SHADER);for(;;){const C=fragTemplate$1.replace(/%forloop%/gi,generateIfTestSrc(A));if(T.shaderSource(E,C),T.compileShader(E),!T.getShaderParameter(E,T.COMPILE_STATUS))A=A/2|0;else break}return A}const BLEND$1=0,OFFSET$1=1,CULLING$1=2,DEPTH_TEST$1=3,WINDING$1=4,DEPTH_MASK$1=5;class State{constructor(){this.data=0,this.blendMode=BLEND_MODES.NORMAL,this.polygonOffset=0,this.blend=!0,this.depthMask=!0}get blend(){return!!(this.data&1<<BLEND$1)}set blend(T){!!(this.data&1<<BLEND$1)!==T&&(this.data^=1<<BLEND$1)}get offsets(){return!!(this.data&1<<OFFSET$1)}set offsets(T){!!(this.data&1<<OFFSET$1)!==T&&(this.data^=1<<OFFSET$1)}get culling(){return!!(this.data&1<<CULLING$1)}set culling(T){!!(this.data&1<<CULLING$1)!==T&&(this.data^=1<<CULLING$1)}get depthTest(){return!!(this.data&1<<DEPTH_TEST$1)}set depthTest(T){!!(this.data&1<<DEPTH_TEST$1)!==T&&(this.data^=1<<DEPTH_TEST$1)}get depthMask(){return!!(this.data&1<<DEPTH_MASK$1)}set depthMask(T){!!(this.data&1<<DEPTH_MASK$1)!==T&&(this.data^=1<<DEPTH_MASK$1)}get clockwiseFrontFace(){return!!(this.data&1<<WINDING$1)}set clockwiseFrontFace(T){!!(this.data&1<<WINDING$1)!==T&&(this.data^=1<<WINDING$1)}get blendMode(){return this._blendMode}set blendMode(T){this.blend=T!==BLEND_MODES.NONE,this._blendMode=T}get polygonOffset(){return this._polygonOffset}set polygonOffset(T){this.offsets=!!T,this._polygonOffset=T}static for2d(){const T=new State;return T.depthTest=!1,T.blend=!0,T}}State.prototype.toString=function(){return`[@pixi/core:State blendMode=${this.blendMode} clockwiseFrontFace=${this.clockwiseFrontFace} culling=${this.culling} depthMask=${this.depthMask} polygonOffset=${this.polygonOffset}]`};const INSTALLED=[];function autoDetectResource(A,T){if(!A)return null;let E="";if(typeof A=="string"){const C=/\.(\w{3,4})(?:$|\?|#)/i.exec(A);C&&(E=C[1].toLowerCase())}for(let C=INSTALLED.length-1;C>=0;--C){const P=INSTALLED[C];if(P.test&&P.test(A,E))return new P(A,T)}throw new Error("Unrecognized source type to auto-detect Resource")}class Runner{constructor(T){this.items=[],this._name=T,this._aliasCount=0}emit(T,E,C,P,I,R,F,O){if(arguments.length>8)throw new Error("max arguments reached");const{name:D,items:L}=this;this._aliasCount++;for(let B=0,V=L.length;B<V;B++)L[B][D](T,E,C,P,I,R,F,O);return L===this.items&&this._aliasCount--,this}ensureNonAliasedItems(){this._aliasCount>0&&this.items.length>1&&(this._aliasCount=0,this.items=this.items.slice(0))}add(T){return T[this._name]&&(this.ensureNonAliasedItems(),this.remove(T),this.items.push(T)),this}remove(T){const E=this.items.indexOf(T);return E!==-1&&(this.ensureNonAliasedItems(),this.items.splice(E,1)),this}contains(T){return this.items.includes(T)}removeAll(){return this.ensureNonAliasedItems(),this.items.length=0,this}destroy(){this.removeAll(),this.items=null,this._name=null}get empty(){return this.items.length===0}get name(){return this._name}}Object.defineProperties(Runner.prototype,{dispatch:{value:Runner.prototype.emit},run:{value:Runner.prototype.emit}});class Resource{constructor(T=0,E=0){this._width=T,this._height=E,this.destroyed=!1,this.internal=!1,this.onResize=new Runner("setRealSize"),this.onUpdate=new Runner("update"),this.onError=new Runner("onError")}bind(T){this.onResize.add(T),this.onUpdate.add(T),this.onError.add(T),(this._width||this._height)&&this.onResize.emit(this._width,this._height)}unbind(T){this.onResize.remove(T),this.onUpdate.remove(T),this.onError.remove(T)}resize(T,E){(T!==this._width||E!==this._height)&&(this._width=T,this._height=E,this.onResize.emit(T,E))}get valid(){return!!this._width&&!!this._height}update(){this.destroyed||this.onUpdate.emit()}load(){return Promise.resolve(this)}get width(){return this._width}get height(){return this._height}style(T,E,C){return!1}dispose(){}destroy(){this.destroyed||(this.destroyed=!0,this.dispose(),this.onError.removeAll(),this.onError=null,this.onResize.removeAll(),this.onResize=null,this.onUpdate.removeAll(),this.onUpdate=null)}static test(T,E){return!1}}class BufferResource extends Resource{constructor(T,E){const{width:C,height:P}=E||{};if(!C||!P)throw new Error("BufferResource width or height invalid");super(C,P),this.data=T,this.unpackAlignment=E.unpackAlignment??4}upload(T,E,C){const P=T.gl;P.pixelStorei(P.UNPACK_ALIGNMENT,this.unpackAlignment),P.pixelStorei(P.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.alphaMode===ALPHA_MODES.UNPACK);const I=E.realWidth,R=E.realHeight;return C.width===I&&C.height===R?P.texSubImage2D(E.target,0,0,0,I,R,E.format,C.type,this.data):(C.width=I,C.height=R,P.texImage2D(E.target,0,C.internalFormat,I,R,0,E.format,C.type,this.data)),!0}dispose(){this.data=null}static test(T){return T===null||T instanceof Int8Array||T instanceof Uint8Array||T instanceof Uint8ClampedArray||T instanceof Int16Array||T instanceof Uint16Array||T instanceof Int32Array||T instanceof Uint32Array||T instanceof Float32Array}}const defaultBufferOptions={scaleMode:SCALE_MODES.NEAREST,alphaMode:ALPHA_MODES.NPM},_BaseTexture=class Gn extends EventEmitter{constructor(T=null,E=null){super(),E=Object.assign({},Gn.defaultOptions,E);const{alphaMode:C,mipmap:P,anisotropicLevel:I,scaleMode:R,width:F,height:O,wrapMode:D,format:L,type:B,target:V,resolution:U,resourceOptions:z}=E;T&&!(T instanceof Resource)&&(T=autoDetectResource(T,z),T.internal=!0),this.resolution=U||settings.RESOLUTION,this.width=Math.round((F||0)*this.resolution)/this.resolution,this.height=Math.round((O||0)*this.resolution)/this.resolution,this._mipmap=P,this.anisotropicLevel=I,this._wrapMode=D,this._scaleMode=R,this.format=L,this.type=B,this.target=V,this.alphaMode=C,this.uid=uid(),this.touched=0,this.isPowerOfTwo=!1,this._refreshPOT(),this._glTextures={},this.dirtyId=0,this.dirtyStyleId=0,this.cacheId=null,this.valid=F>0&&O>0,this.textureCacheIds=[],this.destroyed=!1,this.resource=null,this._batchEnabled=0,this._batchLocation=0,this.parentTextureArray=null,this.setResource(T)}get realWidth(){return Math.round(this.width*this.resolution)}get realHeight(){return Math.round(this.height*this.resolution)}get mipmap(){return this._mipmap}set mipmap(T){this._mipmap!==T&&(this._mipmap=T,this.dirtyStyleId++)}get scaleMode(){return this._scaleMode}set scaleMode(T){this._scaleMode!==T&&(this._scaleMode=T,this.dirtyStyleId++)}get wrapMode(){return this._wrapMode}set wrapMode(T){this._wrapMode!==T&&(this._wrapMode=T,this.dirtyStyleId++)}setStyle(T,E){let C;return T!==void 0&&T!==this.scaleMode&&(this.scaleMode=T,C=!0),E!==void 0&&E!==this.mipmap&&(this.mipmap=E,C=!0),C&&this.dirtyStyleId++,this}setSize(T,E,C){return C=C||this.resolution,this.setRealSize(T*C,E*C,C)}setRealSize(T,E,C){return this.resolution=C||this.resolution,this.width=Math.round(T)/this.resolution,this.height=Math.round(E)/this.resolution,this._refreshPOT(),this.update(),this}_refreshPOT(){this.isPowerOfTwo=isPow2(this.realWidth)&&isPow2(this.realHeight)}setResolution(T){const E=this.resolution;return E===T?this:(this.resolution=T,this.valid&&(this.width=Math.round(this.width*E)/T,this.height=Math.round(this.height*E)/T,this.emit("update",this)),this._refreshPOT(),this)}setResource(T){if(this.resource===T)return this;if(this.resource)throw new Error("Resource can be set only once");return T.bind(this),this.resource=T,this}update(){this.valid?(this.dirtyId++,this.dirtyStyleId++,this.emit("update",this)):this.width>0&&this.height>0&&(this.valid=!0,this.emit("loaded",this),this.emit("update",this))}onError(T){this.emit("error",this,T)}destroy(){this.resource&&(this.resource.unbind(this),this.resource.internal&&this.resource.destroy(),this.resource=null),this.cacheId&&(delete BaseTextureCache[this.cacheId],delete TextureCache[this.cacheId],this.cacheId=null),this.valid=!1,this.dispose(),Gn.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}dispose(){this.emit("dispose",this)}castToBaseTexture(){return this}static from(T,E,C=settings.STRICT_TEXTURE_CACHE){const P=typeof T=="string";let I=null;if(P)I=T;else{if(!T._pixiId){const F=(E==null?void 0:E.pixiIdPrefix)||"pixiid";T._pixiId=`${F}_${uid()}`}I=T._pixiId}let R=BaseTextureCache[I];if(P&&C&&!R)throw new Error(`The cacheId "${I}" does not exist in BaseTextureCache.`);return R||(R=new Gn(T,E),R.cacheId=I,Gn.addToCache(R,I)),R}static fromBuffer(T,E,C,P){T=T||new Float32Array(E*C*4);const I=new BufferResource(T,{width:E,height:C,...P==null?void 0:P.resourceOptions});let R,F;return T instanceof Float32Array?(R=FORMATS.RGBA,F=TYPES.FLOAT):T instanceof Int32Array?(R=FORMATS.RGBA_INTEGER,F=TYPES.INT):T instanceof Uint32Array?(R=FORMATS.RGBA_INTEGER,F=TYPES.UNSIGNED_INT):T instanceof Int16Array?(R=FORMATS.RGBA_INTEGER,F=TYPES.SHORT):T instanceof Uint16Array?(R=FORMATS.RGBA_INTEGER,F=TYPES.UNSIGNED_SHORT):T instanceof Int8Array?(R=FORMATS.RGBA,F=TYPES.BYTE):(R=FORMATS.RGBA,F=TYPES.UNSIGNED_BYTE),I.internal=!0,new Gn(I,Object.assign({},defaultBufferOptions,{type:F,format:R},P))}static addToCache(T,E){E&&(T.textureCacheIds.includes(E)||T.textureCacheIds.push(E),BaseTextureCache[E]&&BaseTextureCache[E]!==T&&console.warn(`BaseTexture added to the cache with an id [${E}] that already had an entry`),BaseTextureCache[E]=T)}static removeFromCache(T){if(typeof T=="string"){const E=BaseTextureCache[T];if(E){const C=E.textureCacheIds.indexOf(T);return C>-1&&E.textureCacheIds.splice(C,1),delete BaseTextureCache[T],E}}else if(T!=null&&T.textureCacheIds){for(let E=0;E<T.textureCacheIds.length;++E)delete BaseTextureCache[T.textureCacheIds[E]];return T.textureCacheIds.length=0,T}return null}};_BaseTexture.defaultOptions={mipmap:MIPMAP_MODES.POW2,anisotropicLevel:0,scaleMode:SCALE_MODES.LINEAR,wrapMode:WRAP_MODES.CLAMP,alphaMode:ALPHA_MODES.UNPACK,target:TARGETS.TEXTURE_2D,format:FORMATS.RGBA,type:TYPES.UNSIGNED_BYTE},_BaseTexture._globalBatch=0;let BaseTexture=_BaseTexture;class BatchDrawCall{constructor(){this.texArray=null,this.blend=0,this.type=DRAW_MODES.TRIANGLES,this.start=0,this.size=0,this.data=null}}let UID$4=0;class Buffer{constructor(T,E=!0,C=!1){this.data=T||new Float32Array(1),this._glBuffers={},this._updateID=0,this.index=C,this.static=E,this.id=UID$4++,this.disposeRunner=new Runner("disposeBuffer")}update(T){T instanceof Array&&(T=new Float32Array(T)),this.data=T||this.data,this._updateID++}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.data=null}set index(T){this.type=T?BUFFER_TYPE.ELEMENT_ARRAY_BUFFER:BUFFER_TYPE.ARRAY_BUFFER}get index(){return this.type===BUFFER_TYPE.ELEMENT_ARRAY_BUFFER}static from(T){return T instanceof Array&&(T=new Float32Array(T)),new Buffer(T)}}class Attribute{constructor(T,E=0,C=!1,P=TYPES.FLOAT,I,R,F,O=1){this.buffer=T,this.size=E,this.normalized=C,this.type=P,this.stride=I,this.start=R,this.instance=F,this.divisor=O}destroy(){this.buffer=null}static from(T,E,C,P,I){return new Attribute(T,E,C,P,I)}}const map$1={Float32Array,Uint32Array,Int32Array,Uint8Array};function interleaveTypedArrays(A,T){let E=0,C=0;const P={};for(let O=0;O<A.length;O++)C+=T[O],E+=A[O].length;const I=new ArrayBuffer(E*4);let R=null,F=0;for(let O=0;O<A.length;O++){const D=T[O],L=A[O],B=getBufferType(L);P[B]||(P[B]=new map$1[B](I)),R=P[B];for(let V=0;V<L.length;V++){const U=(V/D|0)*C+F,z=V%D;R[U+z]=L[V]}F+=D}return new Float32Array(I)}const byteSizeMap$1={5126:4,5123:2,5121:1};let UID$3=0;const map={Float32Array,Uint32Array,Int32Array,Uint8Array,Uint16Array};class Geometry{constructor(T=[],E={}){this.buffers=T,this.indexBuffer=null,this.attributes=E,this.glVertexArrayObjects={},this.id=UID$3++,this.instanced=!1,this.instanceCount=1,this.disposeRunner=new Runner("disposeGeometry"),this.refCount=0}addAttribute(T,E,C=0,P=!1,I,R,F,O=!1){if(!E)throw new Error("You must pass a buffer when creating an attribute");E instanceof Buffer||(E instanceof Array&&(E=new Float32Array(E)),E=new Buffer(E));const D=T.split("|");if(D.length>1){for(let B=0;B<D.length;B++)this.addAttribute(D[B],E,C,P,I);return this}let L=this.buffers.indexOf(E);return L===-1&&(this.buffers.push(E),L=this.buffers.length-1),this.attributes[T]=new Attribute(L,C,P,I,R,F,O),this.instanced=this.instanced||O,this}getAttribute(T){return this.attributes[T]}getBuffer(T){return this.buffers[this.getAttribute(T).buffer]}addIndex(T){return T instanceof Buffer||(T instanceof Array&&(T=new Uint16Array(T)),T=new Buffer(T)),T.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER,this.indexBuffer=T,this.buffers.includes(T)||this.buffers.push(T),this}getIndex(){return this.indexBuffer}interleave(){if(this.buffers.length===1||this.buffers.length===2&&this.indexBuffer)return this;const T=[],E=[],C=new Buffer;let P;for(P in this.attributes){const I=this.attributes[P],R=this.buffers[I.buffer];T.push(R.data),E.push(I.size*byteSizeMap$1[I.type]/4),I.buffer=0}for(C.data=interleaveTypedArrays(T,E),P=0;P<this.buffers.length;P++)this.buffers[P]!==this.indexBuffer&&this.buffers[P].destroy();return this.buffers=[C],this.indexBuffer&&this.buffers.push(this.indexBuffer),this}getSize(){for(const T in this.attributes){const E=this.attributes[T];return this.buffers[E.buffer].data.length/(E.stride/4||E.size)}return 0}dispose(){this.disposeRunner.emit(this,!1)}destroy(){this.dispose(),this.buffers=null,this.indexBuffer=null,this.attributes=null}clone(){const T=new Geometry;for(let E=0;E<this.buffers.length;E++)T.buffers[E]=new Buffer(this.buffers[E].data.slice(0));for(const E in this.attributes){const C=this.attributes[E];T.attributes[E]=new Attribute(C.buffer,C.size,C.normalized,C.type,C.stride,C.start,C.instance)}return this.indexBuffer&&(T.indexBuffer=T.buffers[this.buffers.indexOf(this.indexBuffer)],T.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER),T}static merge(T){const E=new Geometry,C=[],P=[],I=[];let R;for(let F=0;F<T.length;F++){R=T[F];for(let O=0;O<R.buffers.length;O++)P[O]=P[O]||0,P[O]+=R.buffers[O].data.length,I[O]=0}for(let F=0;F<R.buffers.length;F++)C[F]=new map[getBufferType(R.buffers[F].data)](P[F]),E.buffers[F]=new Buffer(C[F]);for(let F=0;F<T.length;F++){R=T[F];for(let O=0;O<R.buffers.length;O++)C[O].set(R.buffers[O].data,I[O]),I[O]+=R.buffers[O].data.length}if(E.attributes=R.attributes,R.indexBuffer){E.indexBuffer=E.buffers[R.buffers.indexOf(R.indexBuffer)],E.indexBuffer.type=BUFFER_TYPE.ELEMENT_ARRAY_BUFFER;let F=0,O=0,D=0,L=0;for(let B=0;B<R.buffers.length;B++)if(R.buffers[B]!==R.indexBuffer){L=B;break}for(const B in R.attributes){const V=R.attributes[B];(V.buffer|0)===L&&(O+=V.size*byteSizeMap$1[V.type]/4)}for(let B=0;B<T.length;B++){const V=T[B].indexBuffer.data;for(let U=0;U<V.length;U++)E.indexBuffer.data[U+D]+=F;F+=T[B].buffers[L].data.length/O,D+=V.length}}return E}}class BatchGeometry extends Geometry{constructor(T=!1){super(),this._buffer=new Buffer(null,T,!1),this._indexBuffer=new Buffer(null,T,!0),this.addAttribute("aVertexPosition",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",this._buffer,2,!1,TYPES.FLOAT).addAttribute("aColor",this._buffer,4,!0,TYPES.UNSIGNED_BYTE).addAttribute("aTextureId",this._buffer,1,!0,TYPES.FLOAT).addIndex(this._indexBuffer)}}const PI_2=Math.PI*2,RAD_TO_DEG=180/Math.PI,DEG_TO_RAD=Math.PI/180;var SHAPES=(A=>(A[A.POLY=0]="POLY",A[A.RECT=1]="RECT",A[A.CIRC=2]="CIRC",A[A.ELIP=3]="ELIP",A[A.RREC=4]="RREC",A))(SHAPES||{});class Point{constructor(T=0,E=0){this.x=0,this.y=0,this.x=T,this.y=E}clone(){return new Point(this.x,this.y)}copyFrom(T){return this.set(T.x,T.y),this}copyTo(T){return T.set(this.x,this.y),T}equals(T){return T.x===this.x&&T.y===this.y}set(T=0,E=T){return this.x=T,this.y=E,this}}Point.prototype.toString=function(){return`[@pixi/math:Point x=${this.x} y=${this.y}]`};const tempPoints$1=[new Point,new Point,new Point,new Point];class Rectangle{constructor(T=0,E=0,C=0,P=0){this.x=Number(T),this.y=Number(E),this.width=Number(C),this.height=Number(P),this.type=SHAPES.RECT}get left(){return this.x}get right(){return this.x+this.width}get top(){return this.y}get bottom(){return this.y+this.height}static get EMPTY(){return new Rectangle(0,0,0,0)}clone(){return new Rectangle(this.x,this.y,this.width,this.height)}copyFrom(T){return this.x=T.x,this.y=T.y,this.width=T.width,this.height=T.height,this}copyTo(T){return T.x=this.x,T.y=this.y,T.width=this.width,T.height=this.height,T}contains(T,E){return this.width<=0||this.height<=0?!1:T>=this.x&&T<this.x+this.width&&E>=this.y&&E<this.y+this.height}intersects(T,E){if(!E){const ne=this.x<T.x?T.x:this.x;if((this.right>T.right?T.right:this.right)<=ne)return!1;const he=this.y<T.y?T.y:this.y;return(this.bottom>T.bottom?T.bottom:this.bottom)>he}const C=this.left,P=this.right,I=this.top,R=this.bottom;if(P<=C||R<=I)return!1;const F=tempPoints$1[0].set(T.left,T.top),O=tempPoints$1[1].set(T.left,T.bottom),D=tempPoints$1[2].set(T.right,T.top),L=tempPoints$1[3].set(T.right,T.bottom);if(D.x<=F.x||O.y<=F.y)return!1;const B=Math.sign(E.a*E.d-E.b*E.c);if(B===0||(E.apply(F,F),E.apply(O,O),E.apply(D,D),E.apply(L,L),Math.max(F.x,O.x,D.x,L.x)<=C||Math.min(F.x,O.x,D.x,L.x)>=P||Math.max(F.y,O.y,D.y,L.y)<=I||Math.min(F.y,O.y,D.y,L.y)>=R))return!1;const V=B*(O.y-F.y),U=B*(F.x-O.x),z=V*C+U*I,W=V*P+U*I,Z=V*C+U*R,X=V*P+U*R;if(Math.max(z,W,Z,X)<=V*F.x+U*F.y||Math.min(z,W,Z,X)>=V*L.x+U*L.y)return!1;const K=B*(F.y-D.y),Y=B*(D.x-F.x),Q=K*C+Y*I,J=K*P+Y*I,te=K*C+Y*R,ie=K*P+Y*R;return!(Math.max(Q,J,te,ie)<=K*F.x+Y*F.y||Math.min(Q,J,te,ie)>=K*L.x+Y*L.y)}pad(T=0,E=T){return this.x-=T,this.y-=E,this.width+=T*2,this.height+=E*2,this}fit(T){const E=Math.max(this.x,T.x),C=Math.min(this.x+this.width,T.x+T.width),P=Math.max(this.y,T.y),I=Math.min(this.y+this.height,T.y+T.height);return this.x=E,this.width=Math.max(C-E,0),this.y=P,this.height=Math.max(I-P,0),this}ceil(T=1,E=.001){const C=Math.ceil((this.x+this.width-E)*T)/T,P=Math.ceil((this.y+this.height-E)*T)/T;return this.x=Math.floor((this.x+E)*T)/T,this.y=Math.floor((this.y+E)*T)/T,this.width=C-this.x,this.height=P-this.y,this}enlarge(T){const E=Math.min(this.x,T.x),C=Math.max(this.x+this.width,T.x+T.width),P=Math.min(this.y,T.y),I=Math.max(this.y+this.height,T.y+T.height);return this.x=E,this.width=C-E,this.y=P,this.height=I-P,this}}Rectangle.prototype.toString=function(){return`[@pixi/math:Rectangle x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Circle{constructor(T=0,E=0,C=0){this.x=T,this.y=E,this.radius=C,this.type=SHAPES.CIRC}clone(){return new Circle(this.x,this.y,this.radius)}contains(T,E){if(this.radius<=0)return!1;const C=this.radius*this.radius;let P=this.x-T,I=this.y-E;return P*=P,I*=I,P+I<=C}getBounds(){return new Rectangle(this.x-this.radius,this.y-this.radius,this.radius*2,this.radius*2)}}Circle.prototype.toString=function(){return`[@pixi/math:Circle x=${this.x} y=${this.y} radius=${this.radius}]`};class Ellipse{constructor(T=0,E=0,C=0,P=0){this.x=T,this.y=E,this.width=C,this.height=P,this.type=SHAPES.ELIP}clone(){return new Ellipse(this.x,this.y,this.width,this.height)}contains(T,E){if(this.width<=0||this.height<=0)return!1;let C=(T-this.x)/this.width,P=(E-this.y)/this.height;return C*=C,P*=P,C+P<=1}getBounds(){return new Rectangle(this.x-this.width,this.y-this.height,this.width,this.height)}}Ellipse.prototype.toString=function(){return`[@pixi/math:Ellipse x=${this.x} y=${this.y} width=${this.width} height=${this.height}]`};class Polygon{constructor(...T){let E=Array.isArray(T[0])?T[0]:T;if(typeof E[0]!="number"){const C=[];for(let P=0,I=E.length;P<I;P++)C.push(E[P].x,E[P].y);E=C}this.points=E,this.type=SHAPES.POLY,this.closeStroke=!0}clone(){const T=this.points.slice(),E=new Polygon(T);return E.closeStroke=this.closeStroke,E}contains(T,E){let C=!1;const P=this.points.length/2;for(let I=0,R=P-1;I<P;R=I++){const F=this.points[I*2],O=this.points[I*2+1],D=this.points[R*2],L=this.points[R*2+1];O>E!=L>E&&T<(D-F)*((E-O)/(L-O))+F&&(C=!C)}return C}}Polygon.prototype.toString=function(){return`[@pixi/math:PolygoncloseStroke=${this.closeStroke}points=${this.points.reduce((A,T)=>`${A}, ${T}`,"")}]`};class RoundedRectangle{constructor(T=0,E=0,C=0,P=0,I=20){this.x=T,this.y=E,this.width=C,this.height=P,this.radius=I,this.type=SHAPES.RREC}clone(){return new RoundedRectangle(this.x,this.y,this.width,this.height,this.radius)}contains(T,E){if(this.width<=0||this.height<=0)return!1;if(T>=this.x&&T<=this.x+this.width&&E>=this.y&&E<=this.y+this.height){const C=Math.max(0,Math.min(this.radius,Math.min(this.width,this.height)/2));if(E>=this.y+C&&E<=this.y+this.height-C||T>=this.x+C&&T<=this.x+this.width-C)return!0;let P=T-(this.x+C),I=E-(this.y+C);const R=C*C;if(P*P+I*I<=R||(P=T-(this.x+this.width-C),P*P+I*I<=R)||(I=E-(this.y+this.height-C),P*P+I*I<=R)||(P=T-(this.x+C),P*P+I*I<=R))return!0}return!1}}RoundedRectangle.prototype.toString=function(){return`[@pixi/math:RoundedRectangle x=${this.x} y=${this.y}width=${this.width} height=${this.height} radius=${this.radius}]`};class Matrix{constructor(T=1,E=0,C=0,P=1,I=0,R=0){this.array=null,this.a=T,this.b=E,this.c=C,this.d=P,this.tx=I,this.ty=R}fromArray(T){this.a=T[0],this.b=T[1],this.c=T[3],this.d=T[4],this.tx=T[2],this.ty=T[5]}set(T,E,C,P,I,R){return this.a=T,this.b=E,this.c=C,this.d=P,this.tx=I,this.ty=R,this}toArray(T,E){this.array||(this.array=new Float32Array(9));const C=E||this.array;return T?(C[0]=this.a,C[1]=this.b,C[2]=0,C[3]=this.c,C[4]=this.d,C[5]=0,C[6]=this.tx,C[7]=this.ty,C[8]=1):(C[0]=this.a,C[1]=this.c,C[2]=this.tx,C[3]=this.b,C[4]=this.d,C[5]=this.ty,C[6]=0,C[7]=0,C[8]=1),C}apply(T,E){E=E||new Point;const C=T.x,P=T.y;return E.x=this.a*C+this.c*P+this.tx,E.y=this.b*C+this.d*P+this.ty,E}applyInverse(T,E){E=E||new Point;const C=1/(this.a*this.d+this.c*-this.b),P=T.x,I=T.y;return E.x=this.d*C*P+-this.c*C*I+(this.ty*this.c-this.tx*this.d)*C,E.y=this.a*C*I+-this.b*C*P+(-this.ty*this.a+this.tx*this.b)*C,E}translate(T,E){return this.tx+=T,this.ty+=E,this}scale(T,E){return this.a*=T,this.d*=E,this.c*=T,this.b*=E,this.tx*=T,this.ty*=E,this}rotate(T){const E=Math.cos(T),C=Math.sin(T),P=this.a,I=this.c,R=this.tx;return this.a=P*E-this.b*C,this.b=P*C+this.b*E,this.c=I*E-this.d*C,this.d=I*C+this.d*E,this.tx=R*E-this.ty*C,this.ty=R*C+this.ty*E,this}append(T){const E=this.a,C=this.b,P=this.c,I=this.d;return this.a=T.a*E+T.b*P,this.b=T.a*C+T.b*I,this.c=T.c*E+T.d*P,this.d=T.c*C+T.d*I,this.tx=T.tx*E+T.ty*P+this.tx,this.ty=T.tx*C+T.ty*I+this.ty,this}setTransform(T,E,C,P,I,R,F,O,D){return this.a=Math.cos(F+D)*I,this.b=Math.sin(F+D)*I,this.c=-Math.sin(F-O)*R,this.d=Math.cos(F-O)*R,this.tx=T-(C*this.a+P*this.c),this.ty=E-(C*this.b+P*this.d),this}prepend(T){const E=this.tx;if(T.a!==1||T.b!==0||T.c!==0||T.d!==1){const C=this.a,P=this.c;this.a=C*T.a+this.b*T.c,this.b=C*T.b+this.b*T.d,this.c=P*T.a+this.d*T.c,this.d=P*T.b+this.d*T.d}return this.tx=E*T.a+this.ty*T.c+T.tx,this.ty=E*T.b+this.ty*T.d+T.ty,this}decompose(T){const E=this.a,C=this.b,P=this.c,I=this.d,R=T.pivot,F=-Math.atan2(-P,I),O=Math.atan2(C,E),D=Math.abs(F+O);return D<1e-5||Math.abs(PI_2-D)<1e-5?(T.rotation=O,T.skew.x=T.skew.y=0):(T.rotation=0,T.skew.x=F,T.skew.y=O),T.scale.x=Math.sqrt(E*E+C*C),T.scale.y=Math.sqrt(P*P+I*I),T.position.x=this.tx+(R.x*E+R.y*P),T.position.y=this.ty+(R.x*C+R.y*I),T}invert(){const T=this.a,E=this.b,C=this.c,P=this.d,I=this.tx,R=T*P-E*C;return this.a=P/R,this.b=-E/R,this.c=-C/R,this.d=T/R,this.tx=(C*this.ty-P*I)/R,this.ty=-(T*this.ty-E*I)/R,this}identity(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this}clone(){const T=new Matrix;return T.a=this.a,T.b=this.b,T.c=this.c,T.d=this.d,T.tx=this.tx,T.ty=this.ty,T}copyTo(T){return T.a=this.a,T.b=this.b,T.c=this.c,T.d=this.d,T.tx=this.tx,T.ty=this.ty,T}copyFrom(T){return this.a=T.a,this.b=T.b,this.c=T.c,this.d=T.d,this.tx=T.tx,this.ty=T.ty,this}static get IDENTITY(){return new Matrix}static get TEMP_MATRIX(){return new Matrix}}Matrix.prototype.toString=function(){return`[@pixi/math:Matrix a=${this.a} b=${this.b} c=${this.c} d=${this.d} tx=${this.tx} ty=${this.ty}]`};const ux=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],uy=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],vx=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],vy=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],rotationCayley=[],rotationMatrices=[],signum=Math.sign;function init(){for(let A=0;A<16;A++){const T=[];rotationCayley.push(T);for(let E=0;E<16;E++){const C=signum(ux[A]*ux[E]+vx[A]*uy[E]),P=signum(uy[A]*ux[E]+vy[A]*uy[E]),I=signum(ux[A]*vx[E]+vx[A]*vy[E]),R=signum(uy[A]*vx[E]+vy[A]*vy[E]);for(let F=0;F<16;F++)if(ux[F]===C&&uy[F]===P&&vx[F]===I&&vy[F]===R){T.push(F);break}}}for(let A=0;A<16;A++){const T=new Matrix;T.set(ux[A],uy[A],vx[A],vy[A],0,0),rotationMatrices.push(T)}}init();const groupD8={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MAIN_DIAGONAL:10,MIRROR_HORIZONTAL:12,REVERSE_DIAGONAL:14,uX:A=>ux[A],uY:A=>uy[A],vX:A=>vx[A],vY:A=>vy[A],inv:A=>A&8?A&15:-A&7,add:(A,T)=>rotationCayley[A][T],sub:(A,T)=>rotationCayley[A][groupD8.inv(T)],rotate180:A=>A^4,isVertical:A=>(A&3)===2,byDirection:(A,T)=>Math.abs(A)*2<=Math.abs(T)?T>=0?groupD8.S:groupD8.N:Math.abs(T)*2<=Math.abs(A)?A>0?groupD8.E:groupD8.W:T>0?A>0?groupD8.SE:groupD8.SW:A>0?groupD8.NE:groupD8.NW,matrixAppendRotationInv:(A,T,E=0,C=0)=>{const P=rotationMatrices[groupD8.inv(T)];P.tx=E,P.ty=C,A.append(P)}};class ObservablePoint{constructor(T,E,C=0,P=0){this._x=C,this._y=P,this.cb=T,this.scope=E}clone(T=this.cb,E=this.scope){return new ObservablePoint(T,E,this._x,this._y)}set(T=0,E=T){return(this._x!==T||this._y!==E)&&(this._x=T,this._y=E,this.cb.call(this.scope)),this}copyFrom(T){return(this._x!==T.x||this._y!==T.y)&&(this._x=T.x,this._y=T.y,this.cb.call(this.scope)),this}copyTo(T){return T.set(this._x,this._y),T}equals(T){return T.x===this._x&&T.y===this._y}get x(){return this._x}set x(T){this._x!==T&&(this._x=T,this.cb.call(this.scope))}get y(){return this._y}set y(T){this._y!==T&&(this._y=T,this.cb.call(this.scope))}}ObservablePoint.prototype.toString=function(){return`[@pixi/math:ObservablePoint x=${this.x} y=${this.y} scope=${this.scope}]`};const _Transform=class{constructor(){this.worldTransform=new Matrix,this.localTransform=new Matrix,this.position=new ObservablePoint(this.onChange,this,0,0),this.scale=new ObservablePoint(this.onChange,this,1,1),this.pivot=new ObservablePoint(this.onChange,this,0,0),this.skew=new ObservablePoint(this.updateSkew,this,0,0),this._rotation=0,this._cx=1,this._sx=0,this._cy=0,this._sy=1,this._localID=0,this._currentLocalID=0,this._worldID=0,this._parentID=0}onChange(){this._localID++}updateSkew(){this._cx=Math.cos(this._rotation+this.skew.y),this._sx=Math.sin(this._rotation+this.skew.y),this._cy=-Math.sin(this._rotation-this.skew.x),this._sy=Math.cos(this._rotation-this.skew.x),this._localID++}updateLocalTransform(){const A=this.localTransform;this._localID!==this._currentLocalID&&(A.a=this._cx*this.scale.x,A.b=this._sx*this.scale.x,A.c=this._cy*this.scale.y,A.d=this._sy*this.scale.y,A.tx=this.position.x-(this.pivot.x*A.a+this.pivot.y*A.c),A.ty=this.position.y-(this.pivot.x*A.b+this.pivot.y*A.d),this._currentLocalID=this._localID,this._parentID=-1)}updateTransform(A){const T=this.localTransform;if(this._localID!==this._currentLocalID&&(T.a=this._cx*this.scale.x,T.b=this._sx*this.scale.x,T.c=this._cy*this.scale.y,T.d=this._sy*this.scale.y,T.tx=this.position.x-(this.pivot.x*T.a+this.pivot.y*T.c),T.ty=this.position.y-(this.pivot.x*T.b+this.pivot.y*T.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==A._worldID){const E=A.worldTransform,C=this.worldTransform;C.a=T.a*E.a+T.b*E.c,C.b=T.a*E.b+T.b*E.d,C.c=T.c*E.a+T.d*E.c,C.d=T.c*E.b+T.d*E.d,C.tx=T.tx*E.a+T.ty*E.c+E.tx,C.ty=T.tx*E.b+T.ty*E.d+E.ty,this._parentID=A._worldID,this._worldID++}}setFromMatrix(A){A.decompose(this),this._localID++}get rotation(){return this._rotation}set rotation(A){this._rotation!==A&&(this._rotation=A,this.updateSkew())}};_Transform.IDENTITY=new _Transform;let Transform=_Transform;Transform.prototype.toString=function(){return`[@pixi/math:Transform position=(${this.position.x}, ${this.position.y}) rotation=${this.rotation} scale=(${this.scale.x}, ${this.scale.y}) skew=(${this.skew.x}, ${this.skew.y}) ]`};var defaultFragment$2=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor *= texture2D(uSampler, vTextureCoord);
}`,defaultVertex$3=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void){
   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
   vTextureCoord = aTextureCoord;
}
`;function compileShader(A,T,E){const C=A.createShader(T);return A.shaderSource(C,E),A.compileShader(C),C}function booleanArray(A){const T=new Array(A);for(let E=0;E<T.length;E++)T[E]=!1;return T}function defaultValue(A,T){switch(A){case"float":return 0;case"vec2":return new Float32Array(2*T);case"vec3":return new Float32Array(3*T);case"vec4":return new Float32Array(4*T);case"int":case"uint":case"sampler2D":case"sampler2DArray":return 0;case"ivec2":return new Int32Array(2*T);case"ivec3":return new Int32Array(3*T);case"ivec4":return new Int32Array(4*T);case"uvec2":return new Uint32Array(2*T);case"uvec3":return new Uint32Array(3*T);case"uvec4":return new Uint32Array(4*T);case"bool":return!1;case"bvec2":return booleanArray(2*T);case"bvec3":return booleanArray(3*T);case"bvec4":return booleanArray(4*T);case"mat2":return new Float32Array([1,0,0,1]);case"mat3":return new Float32Array([1,0,0,0,1,0,0,0,1]);case"mat4":return new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1])}return null}const uniformParsers=[{test:A=>A.type==="float"&&A.size===1&&!A.isArray,code:A=>`
            if(uv["${A}"] !== ud["${A}"].value)
            {
                ud["${A}"].value = uv["${A}"]
                gl.uniform1f(ud["${A}"].location, uv["${A}"])
            }
            `},{test:(A,T)=>(A.type==="sampler2D"||A.type==="samplerCube"||A.type==="sampler2DArray")&&A.size===1&&!A.isArray&&(T==null||T.castToBaseTexture!==void 0),code:A=>`t = syncData.textureCount++;

            renderer.texture.bind(uv["${A}"], t);

            if(ud["${A}"].value !== t)
            {
                ud["${A}"].value = t;
                gl.uniform1i(ud["${A}"].location, t);
; // eslint-disable-line max-len
            }`},{test:(A,T)=>A.type==="mat3"&&A.size===1&&!A.isArray&&T.a!==void 0,code:A=>`
            gl.uniformMatrix3fv(ud["${A}"].location, false, uv["${A}"].toArray(true));
            `,codeUbo:A=>`
                var ${A}_matrix = uv.${A}.toArray(true);

                data[offset] = ${A}_matrix[0];
                data[offset+1] = ${A}_matrix[1];
                data[offset+2] = ${A}_matrix[2];
        
                data[offset + 4] = ${A}_matrix[3];
                data[offset + 5] = ${A}_matrix[4];
                data[offset + 6] = ${A}_matrix[5];
        
                data[offset + 8] = ${A}_matrix[6];
                data[offset + 9] = ${A}_matrix[7];
                data[offset + 10] = ${A}_matrix[8];
            `},{test:(A,T)=>A.type==="vec2"&&A.size===1&&!A.isArray&&T.x!==void 0,code:A=>`
                cv = ud["${A}"].value;
                v = uv["${A}"];

                if(cv[0] !== v.x || cv[1] !== v.y)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    gl.uniform2f(ud["${A}"].location, v.x, v.y);
                }`,codeUbo:A=>`
                v = uv.${A};

                data[offset] = v.x;
                data[offset+1] = v.y;
            `},{test:A=>A.type==="vec2"&&A.size===1&&!A.isArray,code:A=>`
                cv = ud["${A}"].value;
                v = uv["${A}"];

                if(cv[0] !== v[0] || cv[1] !== v[1])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    gl.uniform2f(ud["${A}"].location, v[0], v[1]);
                }
            `},{test:(A,T)=>A.type==="vec4"&&A.size===1&&!A.isArray&&T.width!==void 0,code:A=>`
                cv = ud["${A}"].value;
                v = uv["${A}"];

                if(cv[0] !== v.x || cv[1] !== v.y || cv[2] !== v.width || cv[3] !== v.height)
                {
                    cv[0] = v.x;
                    cv[1] = v.y;
                    cv[2] = v.width;
                    cv[3] = v.height;
                    gl.uniform4f(ud["${A}"].location, v.x, v.y, v.width, v.height)
                }`,codeUbo:A=>`
                    v = uv.${A};

                    data[offset] = v.x;
                    data[offset+1] = v.y;
                    data[offset+2] = v.width;
                    data[offset+3] = v.height;
                `},{test:(A,T)=>A.type==="vec4"&&A.size===1&&!A.isArray&&T.red!==void 0,code:A=>`
                cv = ud["${A}"].value;
                v = uv["${A}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.alpha)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
                    cv[3] = v.alpha;
                    gl.uniform4f(ud["${A}"].location, v.red, v.green, v.blue, v.alpha)
                }`,codeUbo:A=>`
                    v = uv.${A};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                    data[offset+3] = v.alpha;
                `},{test:(A,T)=>A.type==="vec3"&&A.size===1&&!A.isArray&&T.red!==void 0,code:A=>`
                cv = ud["${A}"].value;
                v = uv["${A}"];

                if(cv[0] !== v.red || cv[1] !== v.green || cv[2] !== v.blue || cv[3] !== v.a)
                {
                    cv[0] = v.red;
                    cv[1] = v.green;
                    cv[2] = v.blue;
    
                    gl.uniform3f(ud["${A}"].location, v.red, v.green, v.blue)
                }`,codeUbo:A=>`
                    v = uv.${A};

                    data[offset] = v.red;
                    data[offset+1] = v.green;
                    data[offset+2] = v.blue;
                `},{test:A=>A.type==="vec4"&&A.size===1&&!A.isArray,code:A=>`
                cv = ud["${A}"].value;
                v = uv["${A}"];

                if(cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
                {
                    cv[0] = v[0];
                    cv[1] = v[1];
                    cv[2] = v[2];
                    cv[3] = v[3];

                    gl.uniform4f(ud["${A}"].location, v[0], v[1], v[2], v[3])
                }`}],GLSL_TO_SINGLE_SETTERS_CACHED={float:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1f(location, v);
    }`,vec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2f(location, v[0], v[1])
    }`,vec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3f(location, v[0], v[1], v[2])
    }`,vec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4f(location, v[0], v[1], v[2], v[3]);
    }`,int:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,ivec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,ivec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,ivec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,uint:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1ui(location, v);
    }`,uvec2:`
    if (cv[0] !== v[0] || cv[1] !== v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2ui(location, v[0], v[1]);
    }`,uvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3ui(location, v[0], v[1], v[2]);
    }`,uvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4ui(location, v[0], v[1], v[2], v[3]);
    }`,bool:`
    if (cv !== v)
    {
        cu.value = v;
        gl.uniform1i(location, v);
    }`,bvec2:`
    if (cv[0] != v[0] || cv[1] != v[1])
    {
        cv[0] = v[0];
        cv[1] = v[1];

        gl.uniform2i(location, v[0], v[1]);
    }`,bvec3:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];

        gl.uniform3i(location, v[0], v[1], v[2]);
    }`,bvec4:`
    if (cv[0] !== v[0] || cv[1] !== v[1] || cv[2] !== v[2] || cv[3] !== v[3])
    {
        cv[0] = v[0];
        cv[1] = v[1];
        cv[2] = v[2];
        cv[3] = v[3];

        gl.uniform4i(location, v[0], v[1], v[2], v[3]);
    }`,mat2:"gl.uniformMatrix2fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",sampler2D:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,samplerCube:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`,sampler2DArray:`
    if (cv !== v)
    {
        cu.value = v;

        gl.uniform1i(location, v);
    }`},GLSL_TO_ARRAY_SETTERS={float:"gl.uniform1fv(location, v)",vec2:"gl.uniform2fv(location, v)",vec3:"gl.uniform3fv(location, v)",vec4:"gl.uniform4fv(location, v)",mat4:"gl.uniformMatrix4fv(location, false, v)",mat3:"gl.uniformMatrix3fv(location, false, v)",mat2:"gl.uniformMatrix2fv(location, false, v)",int:"gl.uniform1iv(location, v)",ivec2:"gl.uniform2iv(location, v)",ivec3:"gl.uniform3iv(location, v)",ivec4:"gl.uniform4iv(location, v)",uint:"gl.uniform1uiv(location, v)",uvec2:"gl.uniform2uiv(location, v)",uvec3:"gl.uniform3uiv(location, v)",uvec4:"gl.uniform4uiv(location, v)",bool:"gl.uniform1iv(location, v)",bvec2:"gl.uniform2iv(location, v)",bvec3:"gl.uniform3iv(location, v)",bvec4:"gl.uniform4iv(location, v)",sampler2D:"gl.uniform1iv(location, v)",samplerCube:"gl.uniform1iv(location, v)",sampler2DArray:"gl.uniform1iv(location, v)"};function generateUniformsSync(A,T){var C;const E=[`
        var v = null;
        var cv = null;
        var cu = null;
        var t = 0;
        var gl = renderer.gl;
    `];for(const P in A.uniforms){const I=T[P];if(!I){((C=A.uniforms[P])==null?void 0:C.group)===!0&&(A.uniforms[P].ubo?E.push(`
                        renderer.shader.syncUniformBufferGroup(uv.${P}, '${P}');
                    `):E.push(`
                        renderer.shader.syncUniformGroup(uv.${P}, syncData);
                    `));continue}const R=A.uniforms[P];let F=!1;for(let O=0;O<uniformParsers.length;O++)if(uniformParsers[O].test(I,R)){E.push(uniformParsers[O].code(P,R)),F=!0;break}if(!F){const O=(I.size===1&&!I.isArray?GLSL_TO_SINGLE_SETTERS_CACHED:GLSL_TO_ARRAY_SETTERS)[I.type].replace("location",`ud["${P}"].location`);E.push(`
            cu = ud["${P}"];
            cv = cu.value;
            v = uv["${P}"];
            ${O};`)}}return new Function("ud","uv","renderer","syncData",E.join(`
`))}const unknownContext={};let context=unknownContext;function getTestContext(){if(context===unknownContext||context!=null&&context.isContextLost()){const A=settings.ADAPTER.createCanvas();let T;settings.PREFER_ENV>=ENV.WEBGL2&&(T=A.getContext("webgl2",{})),T||(T=A.getContext("webgl",{})||A.getContext("experimental-webgl",{}),T?T.getExtension("WEBGL_draw_buffers"):T=null),context=T}return context}let maxFragmentPrecision;function getMaxFragmentPrecision(){if(!maxFragmentPrecision){maxFragmentPrecision=PRECISION.MEDIUM;const A=getTestContext();if(A&&A.getShaderPrecisionFormat){const T=A.getShaderPrecisionFormat(A.FRAGMENT_SHADER,A.HIGH_FLOAT);T&&(maxFragmentPrecision=T.precision?PRECISION.HIGH:PRECISION.MEDIUM)}}return maxFragmentPrecision}function logPrettyShaderError(A,T){const E=A.getShaderSource(T).split(`
`).map((D,L)=>`${L}: ${D}`),C=A.getShaderInfoLog(T),P=C.split(`
`),I={},R=P.map(D=>parseFloat(D.replace(/^ERROR\: 0\:([\d]+)\:.*$/,"$1"))).filter(D=>D&&!I[D]?(I[D]=!0,!0):!1),F=[""];R.forEach(D=>{E[D-1]=`%c${E[D-1]}%c`,F.push("background: #FF0000; color:#FFFFFF; font-size: 10px","font-size: 10px")});const O=E.join(`
`);F[0]=O,console.error(C),console.groupCollapsed("click to view full shader code"),console.warn(...F),console.groupEnd()}function logProgramError(A,T,E,C){A.getProgramParameter(T,A.LINK_STATUS)||(A.getShaderParameter(E,A.COMPILE_STATUS)||logPrettyShaderError(A,E),A.getShaderParameter(C,A.COMPILE_STATUS)||logPrettyShaderError(A,C),console.error("PixiJS Error: Could not initialize shader."),A.getProgramInfoLog(T)!==""&&console.warn("PixiJS Warning: gl.getProgramInfoLog()",A.getProgramInfoLog(T)))}const GLSL_TO_SIZE={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,uint:1,uvec2:2,uvec3:3,uvec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};function mapSize(A){return GLSL_TO_SIZE[A]}let GL_TABLE=null;const GL_TO_GLSL_TYPES={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",UNSIGNED_INT:"uint",UNSIGNED_INT_VEC2:"uvec2",UNSIGNED_INT_VEC3:"uvec3",UNSIGNED_INT_VEC4:"uvec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D",INT_SAMPLER_2D:"sampler2D",UNSIGNED_INT_SAMPLER_2D:"sampler2D",SAMPLER_CUBE:"samplerCube",INT_SAMPLER_CUBE:"samplerCube",UNSIGNED_INT_SAMPLER_CUBE:"samplerCube",SAMPLER_2D_ARRAY:"sampler2DArray",INT_SAMPLER_2D_ARRAY:"sampler2DArray",UNSIGNED_INT_SAMPLER_2D_ARRAY:"sampler2DArray"};function mapType(A,T){if(!GL_TABLE){const E=Object.keys(GL_TO_GLSL_TYPES);GL_TABLE={};for(let C=0;C<E.length;++C){const P=E[C];GL_TABLE[A[P]]=GL_TO_GLSL_TYPES[P]}}return GL_TABLE[T]}function setPrecision(A,T,E){if(A.substring(0,9)!=="precision"){let C=T;return T===PRECISION.HIGH&&E!==PRECISION.HIGH&&(C=PRECISION.MEDIUM),`precision ${C} float;
${A}`}else if(E!==PRECISION.HIGH&&A.substring(0,15)==="precision highp")return A.replace("precision highp","precision mediump");return A}let unsafeEval;function unsafeEvalSupported(){if(typeof unsafeEval=="boolean")return unsafeEval;try{unsafeEval=new Function("param1","param2","param3","return param1[param2] === param3;")({a:"b"},"a","b")===!0}catch{unsafeEval=!1}return unsafeEval}let UID$2=0;const nameCache={},_Program=class Un{constructor(T,E,C="pixi-shader",P={}){this.extra={},this.id=UID$2++,this.vertexSrc=T||Un.defaultVertexSrc,this.fragmentSrc=E||Un.defaultFragmentSrc,this.vertexSrc=this.vertexSrc.trim(),this.fragmentSrc=this.fragmentSrc.trim(),this.extra=P,this.vertexSrc.substring(0,8)!=="#version"&&(C=C.replace(/\s+/g,"-"),nameCache[C]?(nameCache[C]++,C+=`-${nameCache[C]}`):nameCache[C]=1,this.vertexSrc=`#define SHADER_NAME ${C}
${this.vertexSrc}`,this.fragmentSrc=`#define SHADER_NAME ${C}
${this.fragmentSrc}`,this.vertexSrc=setPrecision(this.vertexSrc,Un.defaultVertexPrecision,PRECISION.HIGH),this.fragmentSrc=setPrecision(this.fragmentSrc,Un.defaultFragmentPrecision,getMaxFragmentPrecision())),this.glPrograms={},this.syncUniforms=null}static get defaultVertexSrc(){return defaultVertex$3}static get defaultFragmentSrc(){return defaultFragment$2}static from(T,E,C){const P=T+E;let I=ProgramCache[P];return I||(ProgramCache[P]=I=new Un(T,E,C)),I}};_Program.defaultVertexPrecision=PRECISION.HIGH,_Program.defaultFragmentPrecision=isMobile.apple.device?PRECISION.HIGH:PRECISION.MEDIUM;let Program=_Program,UID$1=0;class UniformGroup{constructor(T,E,C){this.group=!0,this.syncUniforms={},this.dirtyId=0,this.id=UID$1++,this.static=!!E,this.ubo=!!C,T instanceof Buffer?(this.buffer=T,this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!1,this.ubo=!0):(this.uniforms=T,this.ubo&&(this.buffer=new Buffer(new Float32Array(1)),this.buffer.type=BUFFER_TYPE.UNIFORM_BUFFER,this.autoManage=!0))}update(){this.dirtyId++,!this.autoManage&&this.buffer&&this.buffer.update()}add(T,E,C){if(!this.ubo)this.uniforms[T]=new UniformGroup(E,C);else throw new Error("[UniformGroup] uniform groups in ubo mode cannot be modified, or have uniform groups nested in them")}static from(T,E,C){return new UniformGroup(T,E,C)}static uboFrom(T,E){return new UniformGroup(T,E??!0,!0)}}class Shader{constructor(T,E){this.uniformBindCount=0,this.program=T,E?E instanceof UniformGroup?this.uniformGroup=E:this.uniformGroup=new UniformGroup(E):this.uniformGroup=new UniformGroup({}),this.disposeRunner=new Runner("disposeShader")}checkUniformExists(T,E){if(E.uniforms[T])return!0;for(const C in E.uniforms){const P=E.uniforms[C];if(P.group===!0&&this.checkUniformExists(T,P))return!0}return!1}destroy(){this.uniformGroup=null,this.disposeRunner.emit(this),this.disposeRunner.destroy()}get uniforms(){return this.uniformGroup.uniforms}static from(T,E,C){const P=Program.from(T,E);return new Shader(P,C)}}class BatchShaderGenerator{constructor(T,E){if(this.vertexSrc=T,this.fragTemplate=E,this.programCache={},this.defaultGroupCache={},!E.includes("%count%"))throw new Error('Fragment template must contain "%count%".');if(!E.includes("%forloop%"))throw new Error('Fragment template must contain "%forloop%".')}generateShader(T){if(!this.programCache[T]){const C=new Int32Array(T);for(let I=0;I<T;I++)C[I]=I;this.defaultGroupCache[T]=UniformGroup.from({uSamplers:C},!0);let P=this.fragTemplate;P=P.replace(/%count%/gi,`${T}`),P=P.replace(/%forloop%/gi,this.generateSampleSrc(T)),this.programCache[T]=new Program(this.vertexSrc,P)}const E={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:this.defaultGroupCache[T]};return new Shader(this.programCache[T],E)}generateSampleSrc(T){let E="";E+=`
`,E+=`
`;for(let C=0;C<T;C++)C>0&&(E+=`
else `),C<T-1&&(E+=`if(vTextureId < ${C}.5)`),E+=`
{`,E+=`
	color = texture2D(uSamplers[${C}], vTextureCoord);`,E+=`
}`;return E+=`
`,E+=`
`,E}}class BatchTextureArray{constructor(){this.elements=[],this.ids=[],this.count=0}clear(){for(let T=0;T<this.count;T++)this.elements[T]=null;this.count=0}}function canUploadSameBuffer(){return!isMobile.apple.device}function maxRecommendedTextures(A){let T=!0;const E=settings.ADAPTER.getNavigator();if(isMobile.tablet||isMobile.phone){if(isMobile.apple.device){const C=E.userAgent.match(/OS (\d+)_(\d+)?/);C&&parseInt(C[1],10)<11&&(T=!1)}if(isMobile.android.device){const C=E.userAgent.match(/Android\s([0-9.]*)/);C&&parseInt(C[1],10)<7&&(T=!1)}}return T?A:4}class ObjectRenderer{constructor(T){this.renderer=T}flush(){}destroy(){this.renderer=null}start(){}stop(){this.flush()}render(T){}}var defaultFragment$1=`varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;
uniform sampler2D uSamplers[%count%];

void main(void){
    vec4 color;
    %forloop%
    gl_FragColor = color * vColor;
}
`,defaultVertex$2=`precision highp float;
attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;
attribute float aTextureId;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform vec4 tint;

varying vec2 vTextureCoord;
varying vec4 vColor;
varying float vTextureId;

void main(void){
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vTextureId = aTextureId;
    vColor = aColor * tint;
}
`;const _BatchRenderer=class Fr extends ObjectRenderer{constructor(T){super(T),this.setShaderGenerator(),this.geometryClass=BatchGeometry,this.vertexSize=6,this.state=State.for2d(),this.size=Fr.defaultBatchSize*4,this._vertexCount=0,this._indexCount=0,this._bufferedElements=[],this._bufferedTextures=[],this._bufferSize=0,this._shader=null,this._packedGeometries=[],this._packedGeometryPoolSize=2,this._flushId=0,this._aBuffers={},this._iBuffers={},this.maxTextures=1,this.renderer.on("prerender",this.onPrerender,this),T.runners.contextChange.add(this),this._dcIndex=0,this._aIndex=0,this._iIndex=0,this._attributeBuffer=null,this._indexBuffer=null,this._tempBoundTextures=[]}static get defaultMaxTextures(){return this._defaultMaxTextures=this._defaultMaxTextures??maxRecommendedTextures(32),this._defaultMaxTextures}static set defaultMaxTextures(T){this._defaultMaxTextures=T}static get canUploadSameBuffer(){return this._canUploadSameBuffer=this._canUploadSameBuffer??canUploadSameBuffer(),this._canUploadSameBuffer}static set canUploadSameBuffer(T){this._canUploadSameBuffer=T}get MAX_TEXTURES(){return deprecation("7.1.0","BatchRenderer#MAX_TEXTURES renamed to BatchRenderer#maxTextures"),this.maxTextures}static get defaultVertexSrc(){return defaultVertex$2}static get defaultFragmentTemplate(){return defaultFragment$1}setShaderGenerator({vertex:T=Fr.defaultVertexSrc,fragment:E=Fr.defaultFragmentTemplate}={}){this.shaderGenerator=new BatchShaderGenerator(T,E)}contextChange(){const T=this.renderer.gl;settings.PREFER_ENV===ENV.WEBGL_LEGACY?this.maxTextures=1:(this.maxTextures=Math.min(T.getParameter(T.MAX_TEXTURE_IMAGE_UNITS),Fr.defaultMaxTextures),this.maxTextures=checkMaxIfStatementsInShader(this.maxTextures,T)),this._shader=this.shaderGenerator.generateShader(this.maxTextures);for(let E=0;E<this._packedGeometryPoolSize;E++)this._packedGeometries[E]=new this.geometryClass;this.initFlushBuffers()}initFlushBuffers(){const{_drawCallPool:T,_textureArrayPool:E}=Fr,C=this.size/4,P=Math.floor(C/this.maxTextures)+1;for(;T.length<C;)T.push(new BatchDrawCall);for(;E.length<P;)E.push(new BatchTextureArray);for(let I=0;I<this.maxTextures;I++)this._tempBoundTextures[I]=null}onPrerender(){this._flushId=0}render(T){T._texture.valid&&(this._vertexCount+T.vertexData.length/2>this.size&&this.flush(),this._vertexCount+=T.vertexData.length/2,this._indexCount+=T.indices.length,this._bufferedTextures[this._bufferSize]=T._texture.baseTexture,this._bufferedElements[this._bufferSize++]=T)}buildTexturesAndDrawCalls(){const{_bufferedTextures:T,maxTextures:E}=this,C=Fr._textureArrayPool,P=this.renderer.batch,I=this._tempBoundTextures,R=this.renderer.textureGC.count;let F=++BaseTexture._globalBatch,O=0,D=C[0],L=0;P.copyBoundTextures(I,E);for(let B=0;B<this._bufferSize;++B){const V=T[B];T[B]=null,V._batchEnabled!==F&&(D.count>=E&&(P.boundArray(D,I,F,E),this.buildDrawCalls(D,L,B),L=B,D=C[++O],++F),V._batchEnabled=F,V.touched=R,D.elements[D.count++]=V)}D.count>0&&(P.boundArray(D,I,F,E),this.buildDrawCalls(D,L,this._bufferSize),++O,++F);for(let B=0;B<I.length;B++)I[B]=null;BaseTexture._globalBatch=F}buildDrawCalls(T,E,C){const{_bufferedElements:P,_attributeBuffer:I,_indexBuffer:R,vertexSize:F}=this,O=Fr._drawCallPool;let D=this._dcIndex,L=this._aIndex,B=this._iIndex,V=O[D];V.start=this._iIndex,V.texArray=T;for(let U=E;U<C;++U){const z=P[U],W=z._texture.baseTexture,Z=premultiplyBlendMode[W.alphaMode?1:0][z.blendMode];P[U]=null,E<U&&V.blend!==Z&&(V.size=B-V.start,E=U,V=O[++D],V.texArray=T,V.start=B),this.packInterleavedGeometry(z,I,R,L,B),L+=z.vertexData.length/2*F,B+=z.indices.length,V.blend=Z}E<C&&(V.size=B-V.start,++D),this._dcIndex=D,this._aIndex=L,this._iIndex=B}bindAndClearTexArray(T){const E=this.renderer.texture;for(let C=0;C<T.count;C++)E.bind(T.elements[C],T.ids[C]),T.elements[C]=null;T.count=0}updateGeometry(){const{_packedGeometries:T,_attributeBuffer:E,_indexBuffer:C}=this;Fr.canUploadSameBuffer?(T[this._flushId]._buffer.update(E.rawBinaryData),T[this._flushId]._indexBuffer.update(C),this.renderer.geometry.updateBuffers()):(this._packedGeometryPoolSize<=this._flushId&&(this._packedGeometryPoolSize++,T[this._flushId]=new this.geometryClass),T[this._flushId]._buffer.update(E.rawBinaryData),T[this._flushId]._indexBuffer.update(C),this.renderer.geometry.bind(T[this._flushId]),this.renderer.geometry.updateBuffers(),this._flushId++)}drawBatches(){const T=this._dcIndex,{gl:E,state:C}=this.renderer,P=Fr._drawCallPool;let I=null;for(let R=0;R<T;R++){const{texArray:F,type:O,size:D,start:L,blend:B}=P[R];I!==F&&(I=F,this.bindAndClearTexArray(F)),this.state.blendMode=B,C.set(this.state),E.drawElements(O,D,E.UNSIGNED_SHORT,L*2)}}flush(){this._vertexCount!==0&&(this._attributeBuffer=this.getAttributeBuffer(this._vertexCount),this._indexBuffer=this.getIndexBuffer(this._indexCount),this._aIndex=0,this._iIndex=0,this._dcIndex=0,this.buildTexturesAndDrawCalls(),this.updateGeometry(),this.drawBatches(),this._bufferSize=0,this._vertexCount=0,this._indexCount=0)}start(){this.renderer.state.set(this.state),this.renderer.texture.ensureSamplerType(this.maxTextures),this.renderer.shader.bind(this._shader),Fr.canUploadSameBuffer&&this.renderer.geometry.bind(this._packedGeometries[this._flushId])}stop(){this.flush()}destroy(){for(let T=0;T<this._packedGeometryPoolSize;T++)this._packedGeometries[T]&&this._packedGeometries[T].destroy();this.renderer.off("prerender",this.onPrerender,this),this._aBuffers=null,this._iBuffers=null,this._packedGeometries=null,this._attributeBuffer=null,this._indexBuffer=null,this._shader&&(this._shader.destroy(),this._shader=null),super.destroy()}getAttributeBuffer(T){const E=nextPow2(Math.ceil(T/8)),C=log2(E),P=E*8;this._aBuffers.length<=C&&(this._iBuffers.length=C+1);let I=this._aBuffers[P];return I||(this._aBuffers[P]=I=new ViewableBuffer(P*this.vertexSize*4)),I}getIndexBuffer(T){const E=nextPow2(Math.ceil(T/12)),C=log2(E),P=E*12;this._iBuffers.length<=C&&(this._iBuffers.length=C+1);let I=this._iBuffers[C];return I||(this._iBuffers[C]=I=new Uint16Array(P)),I}packInterleavedGeometry(T,E,C,P,I){const{uint32View:R,float32View:F}=E,O=P/this.vertexSize,D=T.uvs,L=T.indices,B=T.vertexData,V=T._texture.baseTexture._batchLocation,U=Math.min(T.worldAlpha,1),z=Color.shared.setValue(T._tintRGB).toPremultiplied(U,T._texture.baseTexture.alphaMode>0);for(let W=0;W<B.length;W+=2)F[P++]=B[W],F[P++]=B[W+1],F[P++]=D[W],F[P++]=D[W+1],R[P++]=z,F[P++]=V;for(let W=0;W<L.length;W++)C[I++]=O+L[W]}};_BatchRenderer.defaultBatchSize=4096,_BatchRenderer.extension={name:"batch",type:ExtensionType.RendererPlugin},_BatchRenderer._drawCallPool=[],_BatchRenderer._textureArrayPool=[];let BatchRenderer=_BatchRenderer;extensions$1.add(BatchRenderer);var defaultFragment=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;

void main(void){
   gl_FragColor = texture2D(uSampler, vTextureCoord);
}
`,defaultVertex$1=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const _Filter=class li extends Shader{constructor(T,E,C){const P=Program.from(T||li.defaultVertexSrc,E||li.defaultFragmentSrc);super(P,C),this.padding=0,this.resolution=li.defaultResolution,this.multisample=li.defaultMultisample,this.enabled=!0,this.autoFit=!0,this.state=new State}apply(T,E,C,P,I){T.applyFilter(this,E,C,P)}get blendMode(){return this.state.blendMode}set blendMode(T){this.state.blendMode=T}get resolution(){return this._resolution}set resolution(T){this._resolution=T}static get defaultVertexSrc(){return defaultVertex$1}static get defaultFragmentSrc(){return defaultFragment}};_Filter.defaultResolution=1,_Filter.defaultMultisample=MSAA_QUALITY.NONE;let Filter$1=_Filter;class BackgroundSystem{constructor(){this.clearBeforeRender=!0,this._backgroundColor=new Color(0),this.alpha=1}init(T){this.clearBeforeRender=T.clearBeforeRender;const{backgroundColor:E,background:C,backgroundAlpha:P}=T,I=C??E;I!==void 0&&(this.color=I),this.alpha=P}get color(){return this._backgroundColor.value}set color(T){this._backgroundColor.setValue(T)}get alpha(){return this._backgroundColor.alpha}set alpha(T){this._backgroundColor.setAlpha(T)}get backgroundColor(){return this._backgroundColor}destroy(){}}BackgroundSystem.defaultOptions={backgroundAlpha:1,backgroundColor:0,clearBeforeRender:!0},BackgroundSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"background"};extensions$1.add(BackgroundSystem);class BatchSystem{constructor(T){this.renderer=T,this.emptyRenderer=new ObjectRenderer(T),this.currentRenderer=this.emptyRenderer}setObjectRenderer(T){this.currentRenderer!==T&&(this.currentRenderer.stop(),this.currentRenderer=T,this.currentRenderer.start())}flush(){this.setObjectRenderer(this.emptyRenderer)}reset(){this.setObjectRenderer(this.emptyRenderer)}copyBoundTextures(T,E){const{boundTextures:C}=this.renderer.texture;for(let P=E-1;P>=0;--P)T[P]=C[P]||null,T[P]&&(T[P]._batchLocation=P)}boundArray(T,E,C,P){const{elements:I,ids:R,count:F}=T;let O=0;for(let D=0;D<F;D++){const L=I[D],B=L._batchLocation;if(B>=0&&B<P&&E[B]===L){R[D]=B;continue}for(;O<P;){const V=E[O];if(V&&V._batchEnabled===C&&V._batchLocation===O){O++;continue}R[D]=O,L._batchLocation=O,E[O]=L;break}}}destroy(){this.renderer=null}}BatchSystem.extension={type:ExtensionType.RendererSystem,name:"batch"};extensions$1.add(BatchSystem);let CONTEXT_UID_COUNTER=0;class ContextSystem{constructor(T){this.renderer=T,this.webGLVersion=1,this.extensions={},this.supports={uint32Indices:!1},this.handleContextLost=this.handleContextLost.bind(this),this.handleContextRestored=this.handleContextRestored.bind(this)}get isLost(){return!this.gl||this.gl.isContextLost()}contextChange(T){this.gl=T,this.renderer.gl=T,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++}init(T){if(T.context)this.initFromContext(T.context);else{const E=this.renderer.background.alpha<1,C=T.premultipliedAlpha;this.preserveDrawingBuffer=T.preserveDrawingBuffer,this.useContextAlpha=T.useContextAlpha,this.powerPreference=T.powerPreference,this.initFromOptions({alpha:E,premultipliedAlpha:C,antialias:T.antialias,stencil:!0,preserveDrawingBuffer:T.preserveDrawingBuffer,powerPreference:T.powerPreference})}}initFromContext(T){this.gl=T,this.validateContext(T),this.renderer.gl=T,this.renderer.CONTEXT_UID=CONTEXT_UID_COUNTER++,this.renderer.runners.contextChange.emit(T);const E=this.renderer.view;E.addEventListener!==void 0&&(E.addEventListener("webglcontextlost",this.handleContextLost,!1),E.addEventListener("webglcontextrestored",this.handleContextRestored,!1))}initFromOptions(T){const E=this.createContext(this.renderer.view,T);this.initFromContext(E)}createContext(T,E){let C;if(settings.PREFER_ENV>=ENV.WEBGL2&&(C=T.getContext("webgl2",E)),C)this.webGLVersion=2;else if(this.webGLVersion=1,C=T.getContext("webgl",E)||T.getContext("experimental-webgl",E),!C)throw new Error("This browser does not support WebGL. Try using the canvas renderer");return this.gl=C,this.getExtensions(),this.gl}getExtensions(){const{gl:T}=this,E={loseContext:T.getExtension("WEBGL_lose_context"),anisotropicFiltering:T.getExtension("EXT_texture_filter_anisotropic"),floatTextureLinear:T.getExtension("OES_texture_float_linear"),s3tc:T.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:T.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:T.getExtension("WEBGL_compressed_texture_etc"),etc1:T.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:T.getExtension("WEBGL_compressed_texture_pvrtc")||T.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:T.getExtension("WEBGL_compressed_texture_atc"),astc:T.getExtension("WEBGL_compressed_texture_astc")};this.webGLVersion===1?Object.assign(this.extensions,E,{drawBuffers:T.getExtension("WEBGL_draw_buffers"),depthTexture:T.getExtension("WEBGL_depth_texture"),vertexArrayObject:T.getExtension("OES_vertex_array_object")||T.getExtension("MOZ_OES_vertex_array_object")||T.getExtension("WEBKIT_OES_vertex_array_object"),uint32ElementIndex:T.getExtension("OES_element_index_uint"),floatTexture:T.getExtension("OES_texture_float"),floatTextureLinear:T.getExtension("OES_texture_float_linear"),textureHalfFloat:T.getExtension("OES_texture_half_float"),textureHalfFloatLinear:T.getExtension("OES_texture_half_float_linear")}):this.webGLVersion===2&&Object.assign(this.extensions,E,{colorBufferFloat:T.getExtension("EXT_color_buffer_float")})}handleContextLost(T){T.preventDefault(),setTimeout(()=>{this.gl.isContextLost()&&this.extensions.loseContext&&this.extensions.loseContext.restoreContext()},0)}handleContextRestored(){this.renderer.runners.contextChange.emit(this.gl)}destroy(){const T=this.renderer.view;this.renderer=null,T.removeEventListener!==void 0&&(T.removeEventListener("webglcontextlost",this.handleContextLost),T.removeEventListener("webglcontextrestored",this.handleContextRestored)),this.gl.useProgram(null),this.extensions.loseContext&&this.extensions.loseContext.loseContext()}postrender(){this.renderer.objectRenderer.renderingToScreen&&this.gl.flush()}validateContext(T){const E=T.getContextAttributes(),C="WebGL2RenderingContext"in globalThis&&T instanceof globalThis.WebGL2RenderingContext;C&&(this.webGLVersion=2),E&&!E.stencil&&console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly");const P=C||!!T.getExtension("OES_element_index_uint");this.supports.uint32Indices=P,P||console.warn("Provided WebGL context does not support 32 index buffer, complex graphics may not render correctly")}}ContextSystem.defaultOptions={context:null,antialias:!1,premultipliedAlpha:!0,preserveDrawingBuffer:!1,powerPreference:"default"},ContextSystem.extension={type:ExtensionType.RendererSystem,name:"context"};extensions$1.add(ContextSystem);class Framebuffer{constructor(T,E){if(this.width=Math.round(T),this.height=Math.round(E),!this.width||!this.height)throw new Error("Framebuffer width or height is zero");this.stencil=!1,this.depth=!1,this.dirtyId=0,this.dirtyFormat=0,this.dirtySize=0,this.depthTexture=null,this.colorTextures=[],this.glFramebuffers={},this.disposeRunner=new Runner("disposeFramebuffer"),this.multisample=MSAA_QUALITY.NONE}get colorTexture(){return this.colorTextures[0]}addColorTexture(T=0,E){return this.colorTextures[T]=E||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,mipmap:MIPMAP_MODES.OFF,width:this.width,height:this.height}),this.dirtyId++,this.dirtyFormat++,this}addDepthTexture(T){return this.depthTexture=T||new BaseTexture(null,{scaleMode:SCALE_MODES.NEAREST,resolution:1,width:this.width,height:this.height,mipmap:MIPMAP_MODES.OFF,format:FORMATS.DEPTH_COMPONENT,type:TYPES.UNSIGNED_SHORT}),this.dirtyId++,this.dirtyFormat++,this}enableDepth(){return this.depth=!0,this.dirtyId++,this.dirtyFormat++,this}enableStencil(){return this.stencil=!0,this.dirtyId++,this.dirtyFormat++,this}resize(T,E){if(T=Math.round(T),E=Math.round(E),!T||!E)throw new Error("Framebuffer width and height must not be zero");if(!(T===this.width&&E===this.height)){this.width=T,this.height=E,this.dirtyId++,this.dirtySize++;for(let C=0;C<this.colorTextures.length;C++){const P=this.colorTextures[C],I=P.resolution;P.setSize(T/I,E/I)}if(this.depthTexture){const C=this.depthTexture.resolution;this.depthTexture.setSize(T/C,E/C)}}}dispose(){this.disposeRunner.emit(this,!1)}destroyDepthTexture(){this.depthTexture&&(this.depthTexture.destroy(),this.depthTexture=null,++this.dirtyId,++this.dirtyFormat)}}class BaseRenderTexture extends BaseTexture{constructor(T={}){if(typeof T=="number"){const E=arguments[0],C=arguments[1],P=arguments[2],I=arguments[3];T={width:E,height:C,scaleMode:P,resolution:I}}T.width=T.width??100,T.height=T.height??100,T.multisample??(T.multisample=MSAA_QUALITY.NONE),super(null,T),this.mipmap=MIPMAP_MODES.OFF,this.valid=!0,this._clear=new Color([0,0,0,0]),this.framebuffer=new Framebuffer(this.realWidth,this.realHeight).addColorTexture(0,this),this.framebuffer.multisample=T.multisample,this.maskStack=[],this.filterStack=[{}]}set clearColor(T){this._clear.setValue(T)}get clearColor(){return this._clear.value}get clear(){return this._clear}get multisample(){return this.framebuffer.multisample}set multisample(T){this.framebuffer.multisample=T}resize(T,E){this.framebuffer.resize(T*this.resolution,E*this.resolution),this.setRealSize(this.framebuffer.width,this.framebuffer.height)}dispose(){this.framebuffer.dispose(),super.dispose()}destroy(){super.destroy(),this.framebuffer.destroyDepthTexture(),this.framebuffer=null}}class BaseImageResource extends Resource{constructor(T){const E=T,C=E.naturalWidth||E.videoWidth||E.width,P=E.naturalHeight||E.videoHeight||E.height;super(C,P),this.source=T,this.noSubImage=!1}static crossOrigin(T,E,C){C===void 0&&!E.startsWith("data:")?T.crossOrigin=determineCrossOrigin(E):C!==!1&&(T.crossOrigin=typeof C=="string"?C:"anonymous")}upload(T,E,C,P){const I=T.gl,R=E.realWidth,F=E.realHeight;if(P=P||this.source,typeof HTMLImageElement<"u"&&P instanceof HTMLImageElement){if(!P.complete||P.naturalWidth===0)return!1}else if(typeof HTMLVideoElement<"u"&&P instanceof HTMLVideoElement&&P.readyState<=1)return!1;return I.pixelStorei(I.UNPACK_PREMULTIPLY_ALPHA_WEBGL,E.alphaMode===ALPHA_MODES.UNPACK),!this.noSubImage&&E.target===I.TEXTURE_2D&&C.width===R&&C.height===F?I.texSubImage2D(I.TEXTURE_2D,0,0,0,E.format,C.type,P):(C.width=R,C.height=F,I.texImage2D(E.target,0,C.internalFormat,E.format,C.type,P)),!0}update(){if(this.destroyed)return;const T=this.source,E=T.naturalWidth||T.videoWidth||T.width,C=T.naturalHeight||T.videoHeight||T.height;this.resize(E,C),super.update()}dispose(){this.source=null}}class ImageResource extends BaseImageResource{constructor(T,E){if(E=E||{},typeof T=="string"){const C=new Image;BaseImageResource.crossOrigin(C,T,E.crossorigin),C.src=T,T=C}super(T),!T.complete&&this._width&&this._height&&(this._width=0,this._height=0),this.url=T.src,this._process=null,this.preserveBitmap=!1,this.createBitmap=(E.createBitmap??settings.CREATE_IMAGE_BITMAP)&&!!globalThis.createImageBitmap,this.alphaMode=typeof E.alphaMode=="number"?E.alphaMode:null,this.bitmap=null,this._load=null,E.autoLoad!==!1&&this.load()}load(T){return this._load?this._load:(T!==void 0&&(this.createBitmap=T),this._load=new Promise((E,C)=>{const P=this.source;this.url=P.src;const I=()=>{this.destroyed||(P.onload=null,P.onerror=null,this.update(),this._load=null,this.createBitmap?E(this.process()):E(this))};P.complete&&P.src?I():(P.onload=I,P.onerror=R=>{C(R),this.onError.emit(R)})}),this._load)}process(){const T=this.source;if(this._process!==null)return this._process;if(this.bitmap!==null||!globalThis.createImageBitmap)return Promise.resolve(this);const E=globalThis.createImageBitmap,C=!T.crossOrigin||T.crossOrigin==="anonymous";return this._process=fetch(T.src,{mode:C?"cors":"no-cors"}).then(P=>P.blob()).then(P=>E(P,0,0,T.width,T.height,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"})).then(P=>this.destroyed?Promise.reject():(this.bitmap=P,this.update(),this._process=null,Promise.resolve(this))),this._process}upload(T,E,C){if(typeof this.alphaMode=="number"&&(E.alphaMode=this.alphaMode),!this.createBitmap)return super.upload(T,E,C);if(!this.bitmap&&(this.process(),!this.bitmap))return!1;if(super.upload(T,E,C,this.bitmap),!this.preserveBitmap){let P=!0;const I=E._glTextures;for(const R in I){const F=I[R];if(F!==C&&F.dirtyId!==E.dirtyId){P=!1;break}}P&&(this.bitmap.close&&this.bitmap.close(),this.bitmap=null)}return!0}dispose(){this.source.onload=null,this.source.onerror=null,super.dispose(),this.bitmap&&(this.bitmap.close(),this.bitmap=null),this._process=null,this._load=null}static test(T){return typeof HTMLImageElement<"u"&&(typeof T=="string"||T instanceof HTMLImageElement)}}class TextureUvs{constructor(){this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsFloat32=new Float32Array(8)}set(T,E,C){const P=E.width,I=E.height;if(C){const R=T.width/2/P,F=T.height/2/I,O=T.x/P+R,D=T.y/I+F;C=groupD8.add(C,groupD8.NW),this.x0=O+R*groupD8.uX(C),this.y0=D+F*groupD8.uY(C),C=groupD8.add(C,2),this.x1=O+R*groupD8.uX(C),this.y1=D+F*groupD8.uY(C),C=groupD8.add(C,2),this.x2=O+R*groupD8.uX(C),this.y2=D+F*groupD8.uY(C),C=groupD8.add(C,2),this.x3=O+R*groupD8.uX(C),this.y3=D+F*groupD8.uY(C)}else this.x0=T.x/P,this.y0=T.y/I,this.x1=(T.x+T.width)/P,this.y1=T.y/I,this.x2=(T.x+T.width)/P,this.y2=(T.y+T.height)/I,this.x3=T.x/P,this.y3=(T.y+T.height)/I;this.uvsFloat32[0]=this.x0,this.uvsFloat32[1]=this.y0,this.uvsFloat32[2]=this.x1,this.uvsFloat32[3]=this.y1,this.uvsFloat32[4]=this.x2,this.uvsFloat32[5]=this.y2,this.uvsFloat32[6]=this.x3,this.uvsFloat32[7]=this.y3}}TextureUvs.prototype.toString=function(){return`[@pixi/core:TextureUvs x0=${this.x0} y0=${this.y0} x1=${this.x1} y1=${this.y1} x2=${this.x2} y2=${this.y2} x3=${this.x3} y3=${this.y3}]`};const DEFAULT_UVS=new TextureUvs;function removeAllHandlers(A){A.destroy=function(){},A.on=function(){},A.once=function(){},A.emit=function(){}}class Texture extends EventEmitter{constructor(T,E,C,P,I,R,F){if(super(),this.noFrame=!1,E||(this.noFrame=!0,E=new Rectangle(0,0,1,1)),T instanceof Texture&&(T=T.baseTexture),this.baseTexture=T,this._frame=E,this.trim=P,this.valid=!1,this.destroyed=!1,this._uvs=DEFAULT_UVS,this.uvMatrix=null,this.orig=C||E,this._rotate=Number(I||0),I===!0)this._rotate=2;else if(this._rotate%2!==0)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");this.defaultAnchor=R?new Point(R.x,R.y):new Point(0,0),this.defaultBorders=F,this._updateID=0,this.textureCacheIds=[],T.valid?this.noFrame?T.valid&&this.onBaseTextureUpdated(T):this.frame=E:T.once("loaded",this.onBaseTextureUpdated,this),this.noFrame&&T.on("update",this.onBaseTextureUpdated,this)}update(){this.baseTexture.resource&&this.baseTexture.resource.update()}onBaseTextureUpdated(T){if(this.noFrame){if(!this.baseTexture.valid)return;this._frame.width=T.width,this._frame.height=T.height,this.valid=!0,this.updateUvs()}else this.frame=this._frame;this.emit("update",this)}destroy(T){if(this.baseTexture){if(T){const{resource:E}=this.baseTexture;E!=null&&E.url&&TextureCache[E.url]&&Texture.removeFromCache(E.url),this.baseTexture.destroy()}this.baseTexture.off("loaded",this.onBaseTextureUpdated,this),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture=null}this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,Texture.removeFromCache(this),this.textureCacheIds=null,this.destroyed=!0,this.emit("destroyed",this),this.removeAllListeners()}clone(){var P;const T=this._frame.clone(),E=this._frame===this.orig?T:this.orig.clone(),C=new Texture(this.baseTexture,!this.noFrame&&T,E,(P=this.trim)==null?void 0:P.clone(),this.rotate,this.defaultAnchor,this.defaultBorders);return this.noFrame&&(C._frame=T),C}updateUvs(){this._uvs===DEFAULT_UVS&&(this._uvs=new TextureUvs),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++}static from(T,E={},C=settings.STRICT_TEXTURE_CACHE){const P=typeof T=="string";let I=null;if(P)I=T;else if(T instanceof BaseTexture){if(!T.cacheId){const F=(E==null?void 0:E.pixiIdPrefix)||"pixiid";T.cacheId=`${F}-${uid()}`,BaseTexture.addToCache(T,T.cacheId)}I=T.cacheId}else{if(!T._pixiId){const F=(E==null?void 0:E.pixiIdPrefix)||"pixiid";T._pixiId=`${F}_${uid()}`}I=T._pixiId}let R=TextureCache[I];if(P&&C&&!R)throw new Error(`The cacheId "${I}" does not exist in TextureCache.`);return!R&&!(T instanceof BaseTexture)?(E.resolution||(E.resolution=getResolutionOfUrl(T)),R=new Texture(new BaseTexture(T,E)),R.baseTexture.cacheId=I,BaseTexture.addToCache(R.baseTexture,I),Texture.addToCache(R,I)):!R&&T instanceof BaseTexture&&(R=new Texture(T),Texture.addToCache(R,I)),R}static fromURL(T,E){const C=Object.assign({autoLoad:!1},E==null?void 0:E.resourceOptions),P=Texture.from(T,Object.assign({resourceOptions:C},E),!1),I=P.baseTexture.resource;return P.baseTexture.valid?Promise.resolve(P):I.load().then(()=>Promise.resolve(P))}static fromBuffer(T,E,C,P){return new Texture(BaseTexture.fromBuffer(T,E,C,P))}static fromLoader(T,E,C,P){const I=new BaseTexture(T,Object.assign({scaleMode:BaseTexture.defaultOptions.scaleMode,resolution:getResolutionOfUrl(E)},P)),{resource:R}=I;R instanceof ImageResource&&(R.url=E);const F=new Texture(I);return C||(C=E),BaseTexture.addToCache(F.baseTexture,C),Texture.addToCache(F,C),C!==E&&(BaseTexture.addToCache(F.baseTexture,E),Texture.addToCache(F,E)),F.baseTexture.valid?Promise.resolve(F):new Promise(O=>{F.baseTexture.once("loaded",()=>O(F))})}static addToCache(T,E){E&&(T.textureCacheIds.includes(E)||T.textureCacheIds.push(E),TextureCache[E]&&TextureCache[E]!==T&&console.warn(`Texture added to the cache with an id [${E}] that already had an entry`),TextureCache[E]=T)}static removeFromCache(T){if(typeof T=="string"){const E=TextureCache[T];if(E){const C=E.textureCacheIds.indexOf(T);return C>-1&&E.textureCacheIds.splice(C,1),delete TextureCache[T],E}}else if(T!=null&&T.textureCacheIds){for(let E=0;E<T.textureCacheIds.length;++E)TextureCache[T.textureCacheIds[E]]===T&&delete TextureCache[T.textureCacheIds[E]];return T.textureCacheIds.length=0,T}return null}get resolution(){return this.baseTexture.resolution}get frame(){return this._frame}set frame(T){this._frame=T,this.noFrame=!1;const{x:E,y:C,width:P,height:I}=T,R=E+P>this.baseTexture.width,F=C+I>this.baseTexture.height;if(R||F){const O=R&&F?"and":"or",D=`X: ${E} + ${P} = ${E+P} > ${this.baseTexture.width}`,L=`Y: ${C} + ${I} = ${C+I} > ${this.baseTexture.height}`;throw new Error(`Texture Error: frame does not fit inside the base Texture dimensions: ${D} ${O} ${L}`)}this.valid=P&&I&&this.baseTexture.valid,!this.trim&&!this.rotate&&(this.orig=T),this.valid&&this.updateUvs()}get rotate(){return this._rotate}set rotate(T){this._rotate=T,this.valid&&this.updateUvs()}get width(){return this.orig.width}get height(){return this.orig.height}castToBaseTexture(){return this.baseTexture}static get EMPTY(){return Texture._EMPTY||(Texture._EMPTY=new Texture(new BaseTexture),removeAllHandlers(Texture._EMPTY),removeAllHandlers(Texture._EMPTY.baseTexture)),Texture._EMPTY}static get WHITE(){if(!Texture._WHITE){const T=settings.ADAPTER.createCanvas(16,16),E=T.getContext("2d");T.width=16,T.height=16,E.fillStyle="white",E.fillRect(0,0,16,16),Texture._WHITE=new Texture(BaseTexture.from(T)),removeAllHandlers(Texture._WHITE),removeAllHandlers(Texture._WHITE.baseTexture)}return Texture._WHITE}}class RenderTexture extends Texture{constructor(T,E){super(T,E),this.valid=!0,this.filterFrame=null,this.filterPoolKey=null,this.updateUvs()}get framebuffer(){return this.baseTexture.framebuffer}get multisample(){return this.framebuffer.multisample}set multisample(T){this.framebuffer.multisample=T}resize(T,E,C=!0){const P=this.baseTexture.resolution,I=Math.round(T*P)/P,R=Math.round(E*P)/P;this.valid=I>0&&R>0,this._frame.width=this.orig.width=I,this._frame.height=this.orig.height=R,C&&this.baseTexture.resize(I,R),this.updateUvs()}setResolution(T){const{baseTexture:E}=this;E.resolution!==T&&(E.setResolution(T),this.resize(E.width,E.height,!1))}static create(T){return new RenderTexture(new BaseRenderTexture(T))}}class RenderTexturePool{constructor(T){this.texturePool={},this.textureOptions=T||{},this.enableFullScreen=!1,this._pixelsWidth=0,this._pixelsHeight=0}createTexture(T,E,C=MSAA_QUALITY.NONE){const P=new BaseRenderTexture(Object.assign({width:T,height:E,resolution:1,multisample:C},this.textureOptions));return new RenderTexture(P)}getOptimalTexture(T,E,C=1,P=MSAA_QUALITY.NONE){let I;T=Math.max(Math.ceil(T*C-1e-6),1),E=Math.max(Math.ceil(E*C-1e-6),1),!this.enableFullScreen||T!==this._pixelsWidth||E!==this._pixelsHeight?(T=nextPow2(T),E=nextPow2(E),I=((T&65535)<<16|E&65535)>>>0,P>1&&(I+=P*4294967296)):I=P>1?-P:-1,this.texturePool[I]||(this.texturePool[I]=[]);let R=this.texturePool[I].pop();return R||(R=this.createTexture(T,E,P)),R.filterPoolKey=I,R.setResolution(C),R}getFilterTexture(T,E,C){const P=this.getOptimalTexture(T.width,T.height,E||T.resolution,C||MSAA_QUALITY.NONE);return P.filterFrame=T.filterFrame,P}returnTexture(T){const E=T.filterPoolKey;T.filterFrame=null,this.texturePool[E].push(T)}returnFilterTexture(T){this.returnTexture(T)}clear(T){if(T=T!==!1,T)for(const E in this.texturePool){const C=this.texturePool[E];if(C)for(let P=0;P<C.length;P++)C[P].destroy(!0)}this.texturePool={}}setScreenSize(T){if(!(T.width===this._pixelsWidth&&T.height===this._pixelsHeight)){this.enableFullScreen=T.width>0&&T.height>0;for(const E in this.texturePool){if(!(Number(E)<0))continue;const C=this.texturePool[E];if(C)for(let P=0;P<C.length;P++)C[P].destroy(!0);this.texturePool[E]=[]}this._pixelsWidth=T.width,this._pixelsHeight=T.height}}}RenderTexturePool.SCREEN_KEY=-1;class Quad extends Geometry{constructor(){super(),this.addAttribute("aVertexPosition",new Float32Array([0,0,1,0,1,1,0,1])).addIndex([0,1,3,2])}}class QuadUv extends Geometry{constructor(){super(),this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.vertexBuffer=new Buffer(this.vertices),this.uvBuffer=new Buffer(this.uvs),this.addAttribute("aVertexPosition",this.vertexBuffer).addAttribute("aTextureCoord",this.uvBuffer).addIndex([0,1,2,0,2,3])}map(T,E){let C=0,P=0;return this.uvs[0]=C,this.uvs[1]=P,this.uvs[2]=C+E.width/T.width,this.uvs[3]=P,this.uvs[4]=C+E.width/T.width,this.uvs[5]=P+E.height/T.height,this.uvs[6]=C,this.uvs[7]=P+E.height/T.height,C=E.x,P=E.y,this.vertices[0]=C,this.vertices[1]=P,this.vertices[2]=C+E.width,this.vertices[3]=P,this.vertices[4]=C+E.width,this.vertices[5]=P+E.height,this.vertices[6]=C,this.vertices[7]=P+E.height,this.invalidate(),this}invalidate(){return this.vertexBuffer._updateID++,this.uvBuffer._updateID++,this}}class FilterState{constructor(){this.renderTexture=null,this.target=null,this.legacy=!1,this.resolution=1,this.multisample=MSAA_QUALITY.NONE,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.bindingSourceFrame=new Rectangle,this.bindingDestinationFrame=new Rectangle,this.filters=[],this.transform=null}clear(){this.target=null,this.filters=null,this.renderTexture=null}}const tempPoints=[new Point,new Point,new Point,new Point],tempMatrix$2=new Matrix;class FilterSystem{constructor(T){this.renderer=T,this.defaultFilterStack=[{}],this.texturePool=new RenderTexturePool,this.statePool=[],this.quad=new Quad,this.quadUv=new QuadUv,this.tempRect=new Rectangle,this.activeState={},this.globalUniforms=new UniformGroup({outputFrame:new Rectangle,inputSize:new Float32Array(4),inputPixel:new Float32Array(4),inputClamp:new Float32Array(4),resolution:1,filterArea:new Float32Array(4),filterClamp:new Float32Array(4)},!0),this.forceClear=!1,this.useMaxPadding=!1}init(){this.texturePool.setScreenSize(this.renderer.view)}push(T,E){const C=this.renderer,P=this.defaultFilterStack,I=this.statePool.pop()||new FilterState,R=C.renderTexture;let F,O;if(R.current){const Z=R.current;F=Z.resolution,O=Z.multisample}else F=C.resolution,O=C.multisample;let D=E[0].resolution||F,L=E[0].multisample??O,B=E[0].padding,V=E[0].autoFit,U=E[0].legacy??!0;for(let Z=1;Z<E.length;Z++){const X=E[Z];D=Math.min(D,X.resolution||F),L=Math.min(L,X.multisample??O),B=this.useMaxPadding?Math.max(B,X.padding):B+X.padding,V=V&&X.autoFit,U=U||(X.legacy??!0)}P.length===1&&(this.defaultFilterStack[0].renderTexture=R.current),P.push(I),I.resolution=D,I.multisample=L,I.legacy=U,I.target=T,I.sourceFrame.copyFrom(T.filterArea||T.getBounds(!0)),I.sourceFrame.pad(B);const z=this.tempRect.copyFrom(R.sourceFrame);C.projection.transform&&this.transformAABB(tempMatrix$2.copyFrom(C.projection.transform).invert(),z),V?(I.sourceFrame.fit(z),(I.sourceFrame.width<=0||I.sourceFrame.height<=0)&&(I.sourceFrame.width=0,I.sourceFrame.height=0)):I.sourceFrame.intersects(z)||(I.sourceFrame.width=0,I.sourceFrame.height=0),this.roundFrame(I.sourceFrame,R.current?R.current.resolution:C.resolution,R.sourceFrame,R.destinationFrame,C.projection.transform),I.renderTexture=this.getOptimalFilterTexture(I.sourceFrame.width,I.sourceFrame.height,D,L),I.filters=E,I.destinationFrame.width=I.renderTexture.width,I.destinationFrame.height=I.renderTexture.height;const W=this.tempRect;W.x=0,W.y=0,W.width=I.sourceFrame.width,W.height=I.sourceFrame.height,I.renderTexture.filterFrame=I.sourceFrame,I.bindingSourceFrame.copyFrom(R.sourceFrame),I.bindingDestinationFrame.copyFrom(R.destinationFrame),I.transform=C.projection.transform,C.projection.transform=null,R.bind(I.renderTexture,I.sourceFrame,W),C.framebuffer.clear(0,0,0,0)}pop(){const T=this.defaultFilterStack,E=T.pop(),C=E.filters;this.activeState=E;const P=this.globalUniforms.uniforms;P.outputFrame=E.sourceFrame,P.resolution=E.resolution;const I=P.inputSize,R=P.inputPixel,F=P.inputClamp;if(I[0]=E.destinationFrame.width,I[1]=E.destinationFrame.height,I[2]=1/I[0],I[3]=1/I[1],R[0]=Math.round(I[0]*E.resolution),R[1]=Math.round(I[1]*E.resolution),R[2]=1/R[0],R[3]=1/R[1],F[0]=.5*R[2],F[1]=.5*R[3],F[2]=E.sourceFrame.width*I[2]-.5*R[2],F[3]=E.sourceFrame.height*I[3]-.5*R[3],E.legacy){const D=P.filterArea;D[0]=E.destinationFrame.width,D[1]=E.destinationFrame.height,D[2]=E.sourceFrame.x,D[3]=E.sourceFrame.y,P.filterClamp=P.inputClamp}this.globalUniforms.update();const O=T[T.length-1];if(this.renderer.framebuffer.blit(),C.length===1)C[0].apply(this,E.renderTexture,O.renderTexture,CLEAR_MODES.BLEND,E),this.returnFilterTexture(E.renderTexture);else{let D=E.renderTexture,L=this.getOptimalFilterTexture(D.width,D.height,E.resolution);L.filterFrame=D.filterFrame;let B=0;for(B=0;B<C.length-1;++B){B===1&&E.multisample>1&&(L=this.getOptimalFilterTexture(D.width,D.height,E.resolution),L.filterFrame=D.filterFrame),C[B].apply(this,D,L,CLEAR_MODES.CLEAR,E);const V=D;D=L,L=V}C[B].apply(this,D,O.renderTexture,CLEAR_MODES.BLEND,E),B>1&&E.multisample>1&&this.returnFilterTexture(E.renderTexture),this.returnFilterTexture(D),this.returnFilterTexture(L)}E.clear(),this.statePool.push(E)}bindAndClear(T,E=CLEAR_MODES.CLEAR){const{renderTexture:C,state:P}=this.renderer;if(T===this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?this.renderer.projection.transform=this.activeState.transform:this.renderer.projection.transform=null,T==null?void 0:T.filterFrame){const R=this.tempRect;R.x=0,R.y=0,R.width=T.filterFrame.width,R.height=T.filterFrame.height,C.bind(T,T.filterFrame,R)}else T!==this.defaultFilterStack[this.defaultFilterStack.length-1].renderTexture?C.bind(T):this.renderer.renderTexture.bind(T,this.activeState.bindingSourceFrame,this.activeState.bindingDestinationFrame);const I=P.stateId&1||this.forceClear;(E===CLEAR_MODES.CLEAR||E===CLEAR_MODES.BLIT&&I)&&this.renderer.framebuffer.clear(0,0,0,0)}applyFilter(T,E,C,P){const I=this.renderer;I.state.set(T.state),this.bindAndClear(C,P),T.uniforms.uSampler=E,T.uniforms.filterGlobals=this.globalUniforms,I.shader.bind(T),T.legacy=!!T.program.attributeData.aTextureCoord,T.legacy?(this.quadUv.map(E._frame,E.filterFrame),I.geometry.bind(this.quadUv),I.geometry.draw(DRAW_MODES.TRIANGLES)):(I.geometry.bind(this.quad),I.geometry.draw(DRAW_MODES.TRIANGLE_STRIP))}calculateSpriteMatrix(T,E){const{sourceFrame:C,destinationFrame:P}=this.activeState,{orig:I}=E._texture,R=T.set(P.width,0,0,P.height,C.x,C.y),F=E.worldTransform.copyTo(Matrix.TEMP_MATRIX);return F.invert(),R.prepend(F),R.scale(1/I.width,1/I.height),R.translate(E.anchor.x,E.anchor.y),R}destroy(){this.renderer=null,this.texturePool.clear(!1)}getOptimalFilterTexture(T,E,C=1,P=MSAA_QUALITY.NONE){return this.texturePool.getOptimalTexture(T,E,C,P)}getFilterTexture(T,E,C){if(typeof T=="number"){const I=T;T=E,E=I}T=T||this.activeState.renderTexture;const P=this.texturePool.getOptimalTexture(T.width,T.height,E||T.resolution,C||MSAA_QUALITY.NONE);return P.filterFrame=T.filterFrame,P}returnFilterTexture(T){this.texturePool.returnTexture(T)}emptyPool(){this.texturePool.clear(!0)}resize(){this.texturePool.setScreenSize(this.renderer.view)}transformAABB(T,E){const C=tempPoints[0],P=tempPoints[1],I=tempPoints[2],R=tempPoints[3];C.set(E.left,E.top),P.set(E.left,E.bottom),I.set(E.right,E.top),R.set(E.right,E.bottom),T.apply(C,C),T.apply(P,P),T.apply(I,I),T.apply(R,R);const F=Math.min(C.x,P.x,I.x,R.x),O=Math.min(C.y,P.y,I.y,R.y),D=Math.max(C.x,P.x,I.x,R.x),L=Math.max(C.y,P.y,I.y,R.y);E.x=F,E.y=O,E.width=D-F,E.height=L-O}roundFrame(T,E,C,P,I){if(!(T.width<=0||T.height<=0||C.width<=0||C.height<=0)){if(I){const{a:R,b:F,c:O,d:D}=I;if((Math.abs(F)>1e-4||Math.abs(O)>1e-4)&&(Math.abs(R)>1e-4||Math.abs(D)>1e-4))return}I=I?tempMatrix$2.copyFrom(I):tempMatrix$2.identity(),I.translate(-C.x,-C.y).scale(P.width/C.width,P.height/C.height).translate(P.x,P.y),this.transformAABB(I,T),T.ceil(E),this.transformAABB(I.invert(),T)}}}FilterSystem.extension={type:ExtensionType.RendererSystem,name:"filter"};extensions$1.add(FilterSystem);class GLFramebuffer{constructor(T){this.framebuffer=T,this.stencil=null,this.dirtyId=-1,this.dirtyFormat=-1,this.dirtySize=-1,this.multisample=MSAA_QUALITY.NONE,this.msaaBuffer=null,this.blitFramebuffer=null,this.mipLevel=0}}const tempRectangle=new Rectangle;class FramebufferSystem{constructor(T){this.renderer=T,this.managedFramebuffers=[],this.unknownFramebuffer=new Framebuffer(10,10),this.msaaSamples=null}contextChange(){this.disposeAll(!0);const T=this.gl=this.renderer.gl;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.current=this.unknownFramebuffer,this.viewport=new Rectangle,this.hasMRT=!0,this.writeDepthTexture=!0,this.renderer.context.webGLVersion===1){let E=this.renderer.context.extensions.drawBuffers,C=this.renderer.context.extensions.depthTexture;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(E=null,C=null),E?T.drawBuffers=P=>E.drawBuffersWEBGL(P):(this.hasMRT=!1,T.drawBuffers=()=>{}),C||(this.writeDepthTexture=!1)}else this.msaaSamples=T.getInternalformatParameter(T.RENDERBUFFER,T.RGBA8,T.SAMPLES)}bind(T,E,C=0){const{gl:P}=this;if(T){const I=T.glFramebuffers[this.CONTEXT_UID]||this.initFramebuffer(T);this.current!==T&&(this.current=T,P.bindFramebuffer(P.FRAMEBUFFER,I.framebuffer)),I.mipLevel!==C&&(T.dirtyId++,T.dirtyFormat++,I.mipLevel=C),I.dirtyId!==T.dirtyId&&(I.dirtyId=T.dirtyId,I.dirtyFormat!==T.dirtyFormat?(I.dirtyFormat=T.dirtyFormat,I.dirtySize=T.dirtySize,this.updateFramebuffer(T,C)):I.dirtySize!==T.dirtySize&&(I.dirtySize=T.dirtySize,this.resizeFramebuffer(T)));for(let R=0;R<T.colorTextures.length;R++){const F=T.colorTextures[R];this.renderer.texture.unbind(F.parentTextureArray||F)}if(T.depthTexture&&this.renderer.texture.unbind(T.depthTexture),E){const R=E.width>>C,F=E.height>>C,O=R/E.width;this.setViewport(E.x*O,E.y*O,R,F)}else{const R=T.width>>C,F=T.height>>C;this.setViewport(0,0,R,F)}}else this.current&&(this.current=null,P.bindFramebuffer(P.FRAMEBUFFER,null)),E?this.setViewport(E.x,E.y,E.width,E.height):this.setViewport(0,0,this.renderer.width,this.renderer.height)}setViewport(T,E,C,P){const I=this.viewport;T=Math.round(T),E=Math.round(E),C=Math.round(C),P=Math.round(P),(I.width!==C||I.height!==P||I.x!==T||I.y!==E)&&(I.x=T,I.y=E,I.width=C,I.height=P,this.gl.viewport(T,E,C,P))}get size(){return this.current?{x:0,y:0,width:this.current.width,height:this.current.height}:{x:0,y:0,width:this.renderer.width,height:this.renderer.height}}clear(T,E,C,P,I=BUFFER_BITS.COLOR|BUFFER_BITS.DEPTH){const{gl:R}=this;R.clearColor(T,E,C,P),R.clear(I)}initFramebuffer(T){const{gl:E}=this,C=new GLFramebuffer(E.createFramebuffer());return C.multisample=this.detectSamples(T.multisample),T.glFramebuffers[this.CONTEXT_UID]=C,this.managedFramebuffers.push(T),T.disposeRunner.add(this),C}resizeFramebuffer(T){const{gl:E}=this,C=T.glFramebuffers[this.CONTEXT_UID];if(C.stencil){E.bindRenderbuffer(E.RENDERBUFFER,C.stencil);let R;this.renderer.context.webGLVersion===1?R=E.DEPTH_STENCIL:T.depth&&T.stencil?R=E.DEPTH24_STENCIL8:T.depth?R=E.DEPTH_COMPONENT24:R=E.STENCIL_INDEX8,C.msaaBuffer?E.renderbufferStorageMultisample(E.RENDERBUFFER,C.multisample,R,T.width,T.height):E.renderbufferStorage(E.RENDERBUFFER,R,T.width,T.height)}const P=T.colorTextures;let I=P.length;E.drawBuffers||(I=Math.min(I,1));for(let R=0;R<I;R++){const F=P[R],O=F.parentTextureArray||F;this.renderer.texture.bind(O,0),R===0&&C.msaaBuffer&&(E.bindRenderbuffer(E.RENDERBUFFER,C.msaaBuffer),E.renderbufferStorageMultisample(E.RENDERBUFFER,C.multisample,O._glTextures[this.CONTEXT_UID].internalFormat,T.width,T.height))}T.depthTexture&&this.writeDepthTexture&&this.renderer.texture.bind(T.depthTexture,0)}updateFramebuffer(T,E){const{gl:C}=this,P=T.glFramebuffers[this.CONTEXT_UID],I=T.colorTextures;let R=I.length;C.drawBuffers||(R=Math.min(R,1)),P.multisample>1&&this.canMultisampleFramebuffer(T)?P.msaaBuffer=P.msaaBuffer||C.createRenderbuffer():P.msaaBuffer&&(C.deleteRenderbuffer(P.msaaBuffer),P.msaaBuffer=null,P.blitFramebuffer&&(P.blitFramebuffer.dispose(),P.blitFramebuffer=null));const F=[];for(let O=0;O<R;O++){const D=I[O],L=D.parentTextureArray||D;this.renderer.texture.bind(L,0),O===0&&P.msaaBuffer?(C.bindRenderbuffer(C.RENDERBUFFER,P.msaaBuffer),C.renderbufferStorageMultisample(C.RENDERBUFFER,P.multisample,L._glTextures[this.CONTEXT_UID].internalFormat,T.width,T.height),C.framebufferRenderbuffer(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0,C.RENDERBUFFER,P.msaaBuffer)):(C.framebufferTexture2D(C.FRAMEBUFFER,C.COLOR_ATTACHMENT0+O,D.target,L._glTextures[this.CONTEXT_UID].texture,E),F.push(C.COLOR_ATTACHMENT0+O))}if(F.length>1&&C.drawBuffers(F),T.depthTexture&&this.writeDepthTexture){const O=T.depthTexture;this.renderer.texture.bind(O,0),C.framebufferTexture2D(C.FRAMEBUFFER,C.DEPTH_ATTACHMENT,C.TEXTURE_2D,O._glTextures[this.CONTEXT_UID].texture,E)}if((T.stencil||T.depth)&&!(T.depthTexture&&this.writeDepthTexture)){P.stencil=P.stencil||C.createRenderbuffer();let O,D;this.renderer.context.webGLVersion===1?(O=C.DEPTH_STENCIL_ATTACHMENT,D=C.DEPTH_STENCIL):T.depth&&T.stencil?(O=C.DEPTH_STENCIL_ATTACHMENT,D=C.DEPTH24_STENCIL8):T.depth?(O=C.DEPTH_ATTACHMENT,D=C.DEPTH_COMPONENT24):(O=C.STENCIL_ATTACHMENT,D=C.STENCIL_INDEX8),C.bindRenderbuffer(C.RENDERBUFFER,P.stencil),P.msaaBuffer?C.renderbufferStorageMultisample(C.RENDERBUFFER,P.multisample,D,T.width,T.height):C.renderbufferStorage(C.RENDERBUFFER,D,T.width,T.height),C.framebufferRenderbuffer(C.FRAMEBUFFER,O,C.RENDERBUFFER,P.stencil)}else P.stencil&&(C.deleteRenderbuffer(P.stencil),P.stencil=null)}canMultisampleFramebuffer(T){return this.renderer.context.webGLVersion!==1&&T.colorTextures.length<=1&&!T.depthTexture}detectSamples(T){const{msaaSamples:E}=this;let C=MSAA_QUALITY.NONE;if(T<=1||E===null)return C;for(let P=0;P<E.length;P++)if(E[P]<=T){C=E[P];break}return C===1&&(C=MSAA_QUALITY.NONE),C}blit(T,E,C){const{current:P,renderer:I,gl:R,CONTEXT_UID:F}=this;if(I.context.webGLVersion!==2||!P)return;const O=P.glFramebuffers[F];if(!O)return;if(!T){if(!O.msaaBuffer)return;const L=P.colorTextures[0];if(!L)return;O.blitFramebuffer||(O.blitFramebuffer=new Framebuffer(P.width,P.height),O.blitFramebuffer.addColorTexture(0,L)),T=O.blitFramebuffer,T.colorTextures[0]!==L&&(T.colorTextures[0]=L,T.dirtyId++,T.dirtyFormat++),(T.width!==P.width||T.height!==P.height)&&(T.width=P.width,T.height=P.height,T.dirtyId++,T.dirtySize++)}E||(E=tempRectangle,E.width=P.width,E.height=P.height),C||(C=E);const D=E.width===C.width&&E.height===C.height;this.bind(T),R.bindFramebuffer(R.READ_FRAMEBUFFER,O.framebuffer),R.blitFramebuffer(E.left,E.top,E.right,E.bottom,C.left,C.top,C.right,C.bottom,R.COLOR_BUFFER_BIT,D?R.NEAREST:R.LINEAR),R.bindFramebuffer(R.READ_FRAMEBUFFER,T.glFramebuffers[this.CONTEXT_UID].framebuffer)}disposeFramebuffer(T,E){const C=T.glFramebuffers[this.CONTEXT_UID],P=this.gl;if(!C)return;delete T.glFramebuffers[this.CONTEXT_UID];const I=this.managedFramebuffers.indexOf(T);I>=0&&this.managedFramebuffers.splice(I,1),T.disposeRunner.remove(this),E||(P.deleteFramebuffer(C.framebuffer),C.msaaBuffer&&P.deleteRenderbuffer(C.msaaBuffer),C.stencil&&P.deleteRenderbuffer(C.stencil)),C.blitFramebuffer&&this.disposeFramebuffer(C.blitFramebuffer,E)}disposeAll(T){const E=this.managedFramebuffers;this.managedFramebuffers=[];for(let C=0;C<E.length;C++)this.disposeFramebuffer(E[C],T)}forceStencil(){const T=this.current;if(!T)return;const E=T.glFramebuffers[this.CONTEXT_UID];if(!E||E.stencil&&T.stencil)return;T.stencil=!0;const C=T.width,P=T.height,I=this.gl,R=E.stencil=I.createRenderbuffer();I.bindRenderbuffer(I.RENDERBUFFER,R);let F,O;this.renderer.context.webGLVersion===1?(F=I.DEPTH_STENCIL_ATTACHMENT,O=I.DEPTH_STENCIL):T.depth?(F=I.DEPTH_STENCIL_ATTACHMENT,O=I.DEPTH24_STENCIL8):(F=I.STENCIL_ATTACHMENT,O=I.STENCIL_INDEX8),E.msaaBuffer?I.renderbufferStorageMultisample(I.RENDERBUFFER,E.multisample,O,C,P):I.renderbufferStorage(I.RENDERBUFFER,O,C,P),I.framebufferRenderbuffer(I.FRAMEBUFFER,F,I.RENDERBUFFER,R)}reset(){this.current=this.unknownFramebuffer,this.viewport=new Rectangle}destroy(){this.renderer=null}}FramebufferSystem.extension={type:ExtensionType.RendererSystem,name:"framebuffer"};extensions$1.add(FramebufferSystem);const byteSizeMap={5126:4,5123:2,5121:1};class GeometrySystem{constructor(T){this.renderer=T,this._activeGeometry=null,this._activeVao=null,this.hasVao=!0,this.hasInstance=!0,this.canUseUInt32ElementIndex=!1,this.managedGeometries={}}contextChange(){this.disposeAll(!0);const T=this.gl=this.renderer.gl,E=this.renderer.context;if(this.CONTEXT_UID=this.renderer.CONTEXT_UID,E.webGLVersion!==2){let C=this.renderer.context.extensions.vertexArrayObject;settings.PREFER_ENV===ENV.WEBGL_LEGACY&&(C=null),C?(T.createVertexArray=()=>C.createVertexArrayOES(),T.bindVertexArray=P=>C.bindVertexArrayOES(P),T.deleteVertexArray=P=>C.deleteVertexArrayOES(P)):(this.hasVao=!1,T.createVertexArray=()=>null,T.bindVertexArray=()=>null,T.deleteVertexArray=()=>null)}if(E.webGLVersion!==2){const C=T.getExtension("ANGLE_instanced_arrays");C?(T.vertexAttribDivisor=(P,I)=>C.vertexAttribDivisorANGLE(P,I),T.drawElementsInstanced=(P,I,R,F,O)=>C.drawElementsInstancedANGLE(P,I,R,F,O),T.drawArraysInstanced=(P,I,R,F)=>C.drawArraysInstancedANGLE(P,I,R,F)):this.hasInstance=!1}this.canUseUInt32ElementIndex=E.webGLVersion===2||!!E.extensions.uint32ElementIndex}bind(T,E){E=E||this.renderer.shader.shader;const{gl:C}=this;let P=T.glVertexArrayObjects[this.CONTEXT_UID],I=!1;P||(this.managedGeometries[T.id]=T,T.disposeRunner.add(this),T.glVertexArrayObjects[this.CONTEXT_UID]=P={},I=!0);const R=P[E.program.id]||this.initGeometryVao(T,E,I);this._activeGeometry=T,this._activeVao!==R&&(this._activeVao=R,this.hasVao?C.bindVertexArray(R):this.activateVao(T,E.program)),this.updateBuffers()}reset(){this.unbind()}updateBuffers(){const T=this._activeGeometry,E=this.renderer.buffer;for(let C=0;C<T.buffers.length;C++){const P=T.buffers[C];E.update(P)}}checkCompatibility(T,E){const C=T.attributes,P=E.attributeData;for(const I in P)if(!C[I])throw new Error(`shader and geometry incompatible, geometry missing the "${I}" attribute`)}getSignature(T,E){const C=T.attributes,P=E.attributeData,I=["g",T.id];for(const R in C)P[R]&&I.push(R,P[R].location);return I.join("-")}initGeometryVao(T,E,C=!0){const P=this.gl,I=this.CONTEXT_UID,R=this.renderer.buffer,F=E.program;F.glPrograms[I]||this.renderer.shader.generateProgram(E),this.checkCompatibility(T,F);const O=this.getSignature(T,F),D=T.glVertexArrayObjects[this.CONTEXT_UID];let L=D[O];if(L)return D[F.id]=L,L;const B=T.buffers,V=T.attributes,U={},z={};for(const W in B)U[W]=0,z[W]=0;for(const W in V)!V[W].size&&F.attributeData[W]?V[W].size=F.attributeData[W].size:V[W].size||console.warn(`PIXI Geometry attribute '${W}' size cannot be determined (likely the bound shader does not have the attribute)`),U[V[W].buffer]+=V[W].size*byteSizeMap[V[W].type];for(const W in V){const Z=V[W],X=Z.size;Z.stride===void 0&&(U[Z.buffer]===X*byteSizeMap[Z.type]?Z.stride=0:Z.stride=U[Z.buffer]),Z.start===void 0&&(Z.start=z[Z.buffer],z[Z.buffer]+=X*byteSizeMap[Z.type])}L=P.createVertexArray(),P.bindVertexArray(L);for(let W=0;W<B.length;W++){const Z=B[W];R.bind(Z),C&&Z._glBuffers[I].refCount++}return this.activateVao(T,F),D[F.id]=L,D[O]=L,P.bindVertexArray(null),R.unbind(BUFFER_TYPE.ARRAY_BUFFER),L}disposeGeometry(T,E){var F;if(!this.managedGeometries[T.id])return;delete this.managedGeometries[T.id];const C=T.glVertexArrayObjects[this.CONTEXT_UID],P=this.gl,I=T.buffers,R=(F=this.renderer)==null?void 0:F.buffer;if(T.disposeRunner.remove(this),!!C){if(R)for(let O=0;O<I.length;O++){const D=I[O]._glBuffers[this.CONTEXT_UID];D&&(D.refCount--,D.refCount===0&&!E&&R.dispose(I[O],E))}if(!E){for(const O in C)if(O[0]==="g"){const D=C[O];this._activeVao===D&&this.unbind(),P.deleteVertexArray(D)}}delete T.glVertexArrayObjects[this.CONTEXT_UID]}}disposeAll(T){const E=Object.keys(this.managedGeometries);for(let C=0;C<E.length;C++)this.disposeGeometry(this.managedGeometries[E[C]],T)}activateVao(T,E){const C=this.gl,P=this.CONTEXT_UID,I=this.renderer.buffer,R=T.buffers,F=T.attributes;T.indexBuffer&&I.bind(T.indexBuffer);let O=null;for(const D in F){const L=F[D],B=R[L.buffer],V=B._glBuffers[P];if(E.attributeData[D]){O!==V&&(I.bind(B),O=V);const U=E.attributeData[D].location;if(C.enableVertexAttribArray(U),C.vertexAttribPointer(U,L.size,L.type||C.FLOAT,L.normalized,L.stride,L.start),L.instance)if(this.hasInstance)C.vertexAttribDivisor(U,L.divisor);else throw new Error("geometry error, GPU Instancing is not supported on this device")}}}draw(T,E,C,P){const{gl:I}=this,R=this._activeGeometry;if(R.indexBuffer){const F=R.indexBuffer.data.BYTES_PER_ELEMENT,O=F===2?I.UNSIGNED_SHORT:I.UNSIGNED_INT;F===2||F===4&&this.canUseUInt32ElementIndex?R.instanced?I.drawElementsInstanced(T,E||R.indexBuffer.data.length,O,(C||0)*F,P||1):I.drawElements(T,E||R.indexBuffer.data.length,O,(C||0)*F):console.warn("unsupported index buffer type: uint32")}else R.instanced?I.drawArraysInstanced(T,C,E||R.getSize(),P||1):I.drawArrays(T,C,E||R.getSize());return this}unbind(){this.gl.bindVertexArray(null),this._activeVao=null,this._activeGeometry=null}destroy(){this.renderer=null}}GeometrySystem.extension={type:ExtensionType.RendererSystem,name:"geometry"};extensions$1.add(GeometrySystem);const tempMat$1=new Matrix;class TextureMatrix{constructor(T,E){this._texture=T,this.mapCoord=new Matrix,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._textureID=-1,this._updateID=0,this.clampOffset=0,this.clampMargin=typeof E>"u"?.5:E,this.isSimple=!1}get texture(){return this._texture}set texture(T){this._texture=T,this._textureID=-1}multiplyUvs(T,E){E===void 0&&(E=T);const C=this.mapCoord;for(let P=0;P<T.length;P+=2){const I=T[P],R=T[P+1];E[P]=I*C.a+R*C.c+C.tx,E[P+1]=I*C.b+R*C.d+C.ty}return E}update(T){const E=this._texture;if(!E||!E.valid||!T&&this._textureID===E._updateID)return!1;this._textureID=E._updateID,this._updateID++;const C=E._uvs;this.mapCoord.set(C.x1-C.x0,C.y1-C.y0,C.x3-C.x0,C.y3-C.y0,C.x0,C.y0);const P=E.orig,I=E.trim;I&&(tempMat$1.set(P.width/I.width,0,0,P.height/I.height,-I.x/I.width,-I.y/I.height),this.mapCoord.append(tempMat$1));const R=E.baseTexture,F=this.uClampFrame,O=this.clampMargin/R.resolution,D=this.clampOffset;return F[0]=(E._frame.x+O+D)/R.width,F[1]=(E._frame.y+O+D)/R.height,F[2]=(E._frame.x+E._frame.width-O+D)/R.width,F[3]=(E._frame.y+E._frame.height-O+D)/R.height,this.uClampOffset[0]=D/R.realWidth,this.uClampOffset[1]=D/R.realHeight,this.isSimple=E._frame.width===R.width&&E._frame.height===R.height&&E.rotate===0,!0}}var fragment$7=`varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform sampler2D mask;
uniform float alpha;
uniform float npmAlpha;
uniform vec4 maskClamp;

void main(void)
{
    float clip = step(3.5,
        step(maskClamp.x, vMaskCoord.x) +
        step(maskClamp.y, vMaskCoord.y) +
        step(vMaskCoord.x, maskClamp.z) +
        step(vMaskCoord.y, maskClamp.w));

    vec4 original = texture2D(uSampler, vTextureCoord);
    vec4 masky = texture2D(mask, vMaskCoord);
    float alphaMul = 1.0 - npmAlpha * (1.0 - masky.a);

    original *= (alphaMul * masky.r * alpha * clip);

    gl_FragColor = original;
}
`,vertex$4=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 otherMatrix;

varying vec2 vMaskCoord;
varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;
}
`;class SpriteMaskFilter extends Filter$1{constructor(T,E,C){let P=null;typeof T!="string"&&E===void 0&&C===void 0&&(P=T,T=void 0,E=void 0,C=void 0),super(T||vertex$4,E||fragment$7,C),this.maskSprite=P,this.maskMatrix=new Matrix}get maskSprite(){return this._maskSprite}set maskSprite(T){this._maskSprite=T,this._maskSprite&&(this._maskSprite.renderable=!1)}apply(T,E,C,P){const I=this._maskSprite,R=I._texture;R.valid&&(R.uvMatrix||(R.uvMatrix=new TextureMatrix(R,0)),R.uvMatrix.update(),this.uniforms.npmAlpha=R.baseTexture.alphaMode?0:1,this.uniforms.mask=R,this.uniforms.otherMatrix=T.calculateSpriteMatrix(this.maskMatrix,I).prepend(R.uvMatrix.mapCoord),this.uniforms.alpha=I.worldAlpha,this.uniforms.maskClamp=R.uvMatrix.uClampFrame,T.applyFilter(this,E,C,P))}}class MaskData{constructor(T=null){this.type=MASK_TYPES.NONE,this.autoDetect=!0,this.maskObject=T||null,this.pooled=!1,this.isMaskData=!0,this.resolution=null,this.multisample=Filter$1.defaultMultisample,this.enabled=!0,this.colorMask=15,this._filters=null,this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null,this._scissorRectLocal=null,this._colorMask=15,this._target=null}get filter(){return this._filters?this._filters[0]:null}set filter(T){T?this._filters?this._filters[0]=T:this._filters=[T]:this._filters=null}reset(){this.pooled&&(this.maskObject=null,this.type=MASK_TYPES.NONE,this.autoDetect=!0),this._target=null,this._scissorRectLocal=null}copyCountersOrReset(T){T?(this._stencilCounter=T._stencilCounter,this._scissorCounter=T._scissorCounter,this._scissorRect=T._scissorRect):(this._stencilCounter=0,this._scissorCounter=0,this._scissorRect=null)}}class MaskSystem{constructor(T){this.renderer=T,this.enableScissor=!0,this.alphaMaskPool=[],this.maskDataPool=[],this.maskStack=[],this.alphaMaskIndex=0}setMaskStack(T){this.maskStack=T,this.renderer.scissor.setMaskStack(T),this.renderer.stencil.setMaskStack(T)}push(T,E){let C=E;if(!C.isMaskData){const I=this.maskDataPool.pop()||new MaskData;I.pooled=!0,I.maskObject=E,C=I}const P=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null;if(C.copyCountersOrReset(P),C._colorMask=P?P._colorMask:15,C.autoDetect&&this.detect(C),C._target=T,C.type!==MASK_TYPES.SPRITE&&this.maskStack.push(C),C.enabled)switch(C.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.push(C);break;case MASK_TYPES.STENCIL:this.renderer.stencil.push(C);break;case MASK_TYPES.SPRITE:C.copyCountersOrReset(null),this.pushSpriteMask(C);break;case MASK_TYPES.COLOR:this.pushColorMask(C);break}C.type===MASK_TYPES.SPRITE&&this.maskStack.push(C)}pop(T){const E=this.maskStack.pop();if(!(!E||E._target!==T)){if(E.enabled)switch(E.type){case MASK_TYPES.SCISSOR:this.renderer.scissor.pop(E);break;case MASK_TYPES.STENCIL:this.renderer.stencil.pop(E.maskObject);break;case MASK_TYPES.SPRITE:this.popSpriteMask(E);break;case MASK_TYPES.COLOR:this.popColorMask(E);break}if(E.reset(),E.pooled&&this.maskDataPool.push(E),this.maskStack.length!==0){const C=this.maskStack[this.maskStack.length-1];C.type===MASK_TYPES.SPRITE&&C._filters&&(C._filters[0].maskSprite=C.maskObject)}}}detect(T){const E=T.maskObject;E?E.isSprite?T.type=MASK_TYPES.SPRITE:this.enableScissor&&this.renderer.scissor.testScissor(T)?T.type=MASK_TYPES.SCISSOR:T.type=MASK_TYPES.STENCIL:T.type=MASK_TYPES.COLOR}pushSpriteMask(T){const{maskObject:E}=T,C=T._target;let P=T._filters;P||(P=this.alphaMaskPool[this.alphaMaskIndex],P||(P=this.alphaMaskPool[this.alphaMaskIndex]=[new SpriteMaskFilter])),P[0].resolution=T.resolution,P[0].multisample=T.multisample,P[0].maskSprite=E;const I=C.filterArea;C.filterArea=E.getBounds(!0),this.renderer.filter.push(C,P),C.filterArea=I,T._filters||this.alphaMaskIndex++}popSpriteMask(T){this.renderer.filter.pop(),T._filters?T._filters[0].maskSprite=null:(this.alphaMaskIndex--,this.alphaMaskPool[this.alphaMaskIndex][0].maskSprite=null)}pushColorMask(T){const E=T._colorMask,C=T._colorMask=E&T.colorMask;C!==E&&this.renderer.gl.colorMask((C&1)!==0,(C&2)!==0,(C&4)!==0,(C&8)!==0)}popColorMask(T){const E=T._colorMask,C=this.maskStack.length>0?this.maskStack[this.maskStack.length-1]._colorMask:15;C!==E&&this.renderer.gl.colorMask((C&1)!==0,(C&2)!==0,(C&4)!==0,(C&8)!==0)}destroy(){this.renderer=null}}MaskSystem.extension={type:ExtensionType.RendererSystem,name:"mask"};extensions$1.add(MaskSystem);class AbstractMaskSystem{constructor(T){this.renderer=T,this.maskStack=[],this.glConst=0}getStackLength(){return this.maskStack.length}setMaskStack(T){const{gl:E}=this.renderer,C=this.getStackLength();this.maskStack=T;const P=this.getStackLength();P!==C&&(P===0?E.disable(this.glConst):(E.enable(this.glConst),this._useCurrent()))}_useCurrent(){}destroy(){this.renderer=null,this.maskStack=null}}const tempMatrix$1=new Matrix,rectPool=[],_ScissorSystem=class ns extends AbstractMaskSystem{constructor(T){super(T),this.glConst=settings.ADAPTER.getWebGLRenderingContext().SCISSOR_TEST}getStackLength(){const T=this.maskStack[this.maskStack.length-1];return T?T._scissorCounter:0}calcScissorRect(T){if(T._scissorRectLocal)return;const E=T._scissorRect,{maskObject:C}=T,{renderer:P}=this,I=P.renderTexture,R=C.getBounds(!0,rectPool.pop()??new Rectangle);this.roundFrameToPixels(R,I.current?I.current.resolution:P.resolution,I.sourceFrame,I.destinationFrame,P.projection.transform),E&&R.fit(E),T._scissorRectLocal=R}static isMatrixRotated(T){if(!T)return!1;const{a:E,b:C,c:P,d:I}=T;return(Math.abs(C)>1e-4||Math.abs(P)>1e-4)&&(Math.abs(E)>1e-4||Math.abs(I)>1e-4)}testScissor(T){const{maskObject:E}=T;if(!E.isFastRect||!E.isFastRect()||ns.isMatrixRotated(E.worldTransform)||ns.isMatrixRotated(this.renderer.projection.transform))return!1;this.calcScissorRect(T);const C=T._scissorRectLocal;return C.width>0&&C.height>0}roundFrameToPixels(T,E,C,P,I){ns.isMatrixRotated(I)||(I=I?tempMatrix$1.copyFrom(I):tempMatrix$1.identity(),I.translate(-C.x,-C.y).scale(P.width/C.width,P.height/C.height).translate(P.x,P.y),this.renderer.filter.transformAABB(I,T),T.fit(P),T.x=Math.round(T.x*E),T.y=Math.round(T.y*E),T.width=Math.round(T.width*E),T.height=Math.round(T.height*E))}push(T){T._scissorRectLocal||this.calcScissorRect(T);const{gl:E}=this.renderer;T._scissorRect||E.enable(E.SCISSOR_TEST),T._scissorCounter++,T._scissorRect=T._scissorRectLocal,this._useCurrent()}pop(T){const{gl:E}=this.renderer;T&&rectPool.push(T._scissorRectLocal),this.getStackLength()>0?this._useCurrent():E.disable(E.SCISSOR_TEST)}_useCurrent(){const T=this.maskStack[this.maskStack.length-1]._scissorRect;let E;this.renderer.renderTexture.current?E=T.y:E=this.renderer.height-T.height-T.y,this.renderer.gl.scissor(T.x,E,T.width,T.height)}};_ScissorSystem.extension={type:ExtensionType.RendererSystem,name:"scissor"};let ScissorSystem=_ScissorSystem;extensions$1.add(ScissorSystem);class StencilSystem extends AbstractMaskSystem{constructor(T){super(T),this.glConst=settings.ADAPTER.getWebGLRenderingContext().STENCIL_TEST}getStackLength(){const T=this.maskStack[this.maskStack.length-1];return T?T._stencilCounter:0}push(T){const E=T.maskObject,{gl:C}=this.renderer,P=T._stencilCounter;P===0&&(this.renderer.framebuffer.forceStencil(),C.clearStencil(0),C.clear(C.STENCIL_BUFFER_BIT),C.enable(C.STENCIL_TEST)),T._stencilCounter++;const I=T._colorMask;I!==0&&(T._colorMask=0,C.colorMask(!1,!1,!1,!1)),C.stencilFunc(C.EQUAL,P,4294967295),C.stencilOp(C.KEEP,C.KEEP,C.INCR),E.renderable=!0,E.render(this.renderer),this.renderer.batch.flush(),E.renderable=!1,I!==0&&(T._colorMask=I,C.colorMask((I&1)!==0,(I&2)!==0,(I&4)!==0,(I&8)!==0)),this._useCurrent()}pop(T){const E=this.renderer.gl;if(this.getStackLength()===0)E.disable(E.STENCIL_TEST);else{const C=this.maskStack.length!==0?this.maskStack[this.maskStack.length-1]:null,P=C?C._colorMask:15;P!==0&&(C._colorMask=0,E.colorMask(!1,!1,!1,!1)),E.stencilOp(E.KEEP,E.KEEP,E.DECR),T.renderable=!0,T.render(this.renderer),this.renderer.batch.flush(),T.renderable=!1,P!==0&&(C._colorMask=P,E.colorMask((P&1)!==0,(P&2)!==0,(P&4)!==0,(P&8)!==0)),this._useCurrent()}}_useCurrent(){const T=this.renderer.gl;T.stencilFunc(T.EQUAL,this.getStackLength(),4294967295),T.stencilOp(T.KEEP,T.KEEP,T.KEEP)}}StencilSystem.extension={type:ExtensionType.RendererSystem,name:"stencil"};extensions$1.add(StencilSystem);class PluginSystem{constructor(T){this.renderer=T,this.plugins={},Object.defineProperties(this.plugins,{extract:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.extract has moved to renderer.extract"),T.extract}},prepare:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.prepare has moved to renderer.prepare"),T.prepare}},interaction:{enumerable:!1,get(){return deprecation("7.0.0","renderer.plugins.interaction has been deprecated, use renderer.events"),T.events}}})}init(){const T=this.rendererPlugins;for(const E in T)this.plugins[E]=new T[E](this.renderer)}destroy(){for(const T in this.plugins)this.plugins[T].destroy(),this.plugins[T]=null}}PluginSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_plugin"};extensions$1.add(PluginSystem);class ProjectionSystem{constructor(T){this.renderer=T,this.destinationFrame=null,this.sourceFrame=null,this.defaultFrame=null,this.projectionMatrix=new Matrix,this.transform=null}update(T,E,C,P){this.destinationFrame=T||this.destinationFrame||this.defaultFrame,this.sourceFrame=E||this.sourceFrame||T,this.calculateProjection(this.destinationFrame,this.sourceFrame,C,P),this.transform&&this.projectionMatrix.append(this.transform);const I=this.renderer;I.globalUniforms.uniforms.projectionMatrix=this.projectionMatrix,I.globalUniforms.update(),I.shader.shader&&I.shader.syncUniformGroup(I.shader.shader.uniforms.globals)}calculateProjection(T,E,C,P){const I=this.projectionMatrix,R=P?-1:1;I.identity(),I.a=1/E.width*2,I.d=R*(1/E.height*2),I.tx=-1-E.x*I.a,I.ty=-R-E.y*I.d}setTransform(T){}destroy(){this.renderer=null}}ProjectionSystem.extension={type:ExtensionType.RendererSystem,name:"projection"};extensions$1.add(ProjectionSystem);const tempTransform=new Transform,tempRect$1=new Rectangle;class GenerateTextureSystem{constructor(T){this.renderer=T,this._tempMatrix=new Matrix}generateTexture(T,E){const{region:C,...P}=E||{},I=(C==null?void 0:C.copyTo(tempRect$1))||T.getLocalBounds(tempRect$1,!0),R=P.resolution||this.renderer.resolution;I.width=Math.max(I.width,1/R),I.height=Math.max(I.height,1/R),P.width=I.width,P.height=I.height,P.resolution=R,P.multisample??(P.multisample=this.renderer.multisample);const F=RenderTexture.create(P);this._tempMatrix.tx=-I.x,this._tempMatrix.ty=-I.y;const O=T.transform;return T.transform=tempTransform,this.renderer.render(T,{renderTexture:F,transform:this._tempMatrix,skipUpdateTransform:!!T.parent,blit:!0}),T.transform=O,F}destroy(){}}GenerateTextureSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"textureGenerator"};extensions$1.add(GenerateTextureSystem);const tempRect=new Rectangle,tempRect2=new Rectangle;class RenderTextureSystem{constructor(T){this.renderer=T,this.defaultMaskStack=[],this.current=null,this.sourceFrame=new Rectangle,this.destinationFrame=new Rectangle,this.viewportFrame=new Rectangle}contextChange(){var E;const T=(E=this.renderer)==null?void 0:E.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(T&&T.alpha&&T.premultipliedAlpha)}bind(T=null,E,C){const P=this.renderer;this.current=T;let I,R,F;T?(I=T.baseTexture,F=I.resolution,E||(tempRect.width=T.frame.width,tempRect.height=T.frame.height,E=tempRect),C||(tempRect2.x=T.frame.x,tempRect2.y=T.frame.y,tempRect2.width=E.width,tempRect2.height=E.height,C=tempRect2),R=I.framebuffer):(F=P.resolution,E||(tempRect.width=P._view.screen.width,tempRect.height=P._view.screen.height,E=tempRect),C||(C=tempRect,C.width=E.width,C.height=E.height));const O=this.viewportFrame;O.x=C.x*F,O.y=C.y*F,O.width=C.width*F,O.height=C.height*F,T||(O.y=P.view.height-(O.y+O.height)),O.ceil(),this.renderer.framebuffer.bind(R,O),this.renderer.projection.update(C,E,F,!R),T?this.renderer.mask.setMaskStack(I.maskStack):this.renderer.mask.setMaskStack(this.defaultMaskStack),this.sourceFrame.copyFrom(E),this.destinationFrame.copyFrom(C)}clear(T,E){const C=this.current?this.current.baseTexture.clear:this.renderer.background.backgroundColor,P=Color.shared.setValue(T||C);(this.current&&this.current.baseTexture.alphaMode>0||!this.current&&this._rendererPremultipliedAlpha)&&P.premultiply(P.alpha);const I=this.destinationFrame,R=this.current?this.current.baseTexture:this.renderer._view.screen,F=I.width!==R.width||I.height!==R.height;if(F){let{x:O,y:D,width:L,height:B}=this.viewportFrame;O=Math.round(O),D=Math.round(D),L=Math.round(L),B=Math.round(B),this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST),this.renderer.gl.scissor(O,D,L,B)}this.renderer.framebuffer.clear(P.red,P.green,P.blue,P.alpha,E),F&&this.renderer.scissor.pop()}resize(){this.bind(null)}reset(){this.bind(null)}destroy(){this.renderer=null}}RenderTextureSystem.extension={type:ExtensionType.RendererSystem,name:"renderTexture"};extensions$1.add(RenderTextureSystem);class GLProgram{constructor(T,E){this.program=T,this.uniformData=E,this.uniformGroups={},this.uniformDirtyGroups={},this.uniformBufferBindings={}}destroy(){this.uniformData=null,this.uniformGroups=null,this.uniformDirtyGroups=null,this.uniformBufferBindings=null,this.program=null}}function getAttributeData(A,T){const E={},C=T.getProgramParameter(A,T.ACTIVE_ATTRIBUTES);for(let P=0;P<C;P++){const I=T.getActiveAttrib(A,P);if(I.name.startsWith("gl_"))continue;const R=mapType(T,I.type),F={type:R,name:I.name,size:mapSize(R),location:T.getAttribLocation(A,I.name)};E[I.name]=F}return E}function getUniformData(A,T){const E={},C=T.getProgramParameter(A,T.ACTIVE_UNIFORMS);for(let P=0;P<C;P++){const I=T.getActiveUniform(A,P),R=I.name.replace(/\[.*?\]$/,""),F=!!I.name.match(/\[.*?\]$/),O=mapType(T,I.type);E[R]={name:R,index:P,type:O,size:I.size,isArray:F,value:defaultValue(O,I.size)}}return E}function generateProgram(A,T){var F;const E=compileShader(A,A.VERTEX_SHADER,T.vertexSrc),C=compileShader(A,A.FRAGMENT_SHADER,T.fragmentSrc),P=A.createProgram();A.attachShader(P,E),A.attachShader(P,C);const I=(F=T.extra)==null?void 0:F.transformFeedbackVaryings;if(I&&(typeof A.transformFeedbackVaryings!="function"?console.warn("TransformFeedback is not supported but TransformFeedbackVaryings are given."):A.transformFeedbackVaryings(P,I.names,I.bufferMode==="separate"?A.SEPARATE_ATTRIBS:A.INTERLEAVED_ATTRIBS)),A.linkProgram(P),A.getProgramParameter(P,A.LINK_STATUS)||logProgramError(A,P,E,C),T.attributeData=getAttributeData(P,A),T.uniformData=getUniformData(P,A),!/^[ \t]*#[ \t]*version[ \t]+300[ \t]+es[ \t]*$/m.test(T.vertexSrc)){const O=Object.keys(T.attributeData);O.sort((D,L)=>D>L?1:-1);for(let D=0;D<O.length;D++)T.attributeData[O[D]].location=D,A.bindAttribLocation(P,D,O[D]);A.linkProgram(P)}A.deleteShader(E),A.deleteShader(C);const R={};for(const O in T.uniformData){const D=T.uniformData[O];R[O]={location:A.getUniformLocation(P,O),value:defaultValue(D.type,D.size)}}return new GLProgram(P,R)}function uboUpdate(A,T,E,C,P){E.buffer.update(P)}const UBO_TO_SINGLE_SETTERS={float:`
        data[offset] = v;
    `,vec2:`
        data[offset] = v[0];
        data[offset+1] = v[1];
    `,vec3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

    `,vec4:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];
        data[offset+3] = v[3];
    `,mat2:`
        data[offset] = v[0];
        data[offset+1] = v[1];

        data[offset+4] = v[2];
        data[offset+5] = v[3];
    `,mat3:`
        data[offset] = v[0];
        data[offset+1] = v[1];
        data[offset+2] = v[2];

        data[offset + 4] = v[3];
        data[offset + 5] = v[4];
        data[offset + 6] = v[5];

        data[offset + 8] = v[6];
        data[offset + 9] = v[7];
        data[offset + 10] = v[8];
    `,mat4:`
        for(var i = 0; i < 16; i++)
        {
            data[offset + i] = v[i];
        }
    `},GLSL_TO_STD40_SIZE={float:4,vec2:8,vec3:12,vec4:16,int:4,ivec2:8,ivec3:12,ivec4:16,uint:4,uvec2:8,uvec3:12,uvec4:16,bool:4,bvec2:8,bvec3:12,bvec4:16,mat2:16*2,mat3:16*3,mat4:16*4};function createUBOElements(A){const T=A.map(I=>({data:I,offset:0,dataLen:0,dirty:0}));let E=0,C=0,P=0;for(let I=0;I<T.length;I++){const R=T[I];if(E=GLSL_TO_STD40_SIZE[R.data.type],R.data.size>1&&(E=Math.max(E,16)*R.data.size),R.dataLen=E,C%E!==0&&C<16){const F=C%E%16;C+=F,P+=F}C+E>16?(P=Math.ceil(P/16)*16,R.offset=P,P+=E,C=E):(R.offset=P,C+=E,P+=E)}return P=Math.ceil(P/16)*16,{uboElements:T,size:P}}function getUBOData(A,T){const E=[];for(const C in A)T[C]&&E.push(T[C]);return E.sort((C,P)=>C.index-P.index),E}function generateUniformBufferSync(A,T){if(!A.autoManage)return{size:0,syncFunc:uboUpdate};const E=getUBOData(A.uniforms,T),{uboElements:C,size:P}=createUBOElements(E),I=[`
    var v = null;
    var v2 = null;
    var cv = null;
    var t = 0;
    var gl = renderer.gl
    var index = 0;
    var data = buffer.data;
    `];for(let R=0;R<C.length;R++){const F=C[R],O=A.uniforms[F.data.name],D=F.data.name;let L=!1;for(let B=0;B<uniformParsers.length;B++){const V=uniformParsers[B];if(V.codeUbo&&V.test(F.data,O)){I.push(`offset = ${F.offset/4};`,uniformParsers[B].codeUbo(F.data.name,O)),L=!0;break}}if(!L)if(F.data.size>1){const B=mapSize(F.data.type),V=Math.max(GLSL_TO_STD40_SIZE[F.data.type]/16,1),U=B/V,z=(4-U%4)%4;I.push(`
                cv = ud.${D}.value;
                v = uv.${D};
                offset = ${F.offset/4};

                t = 0;

                for(var i=0; i < ${F.data.size*V}; i++)
                {
                    for(var j = 0; j < ${U}; j++)
                    {
                        data[offset++] = v[t++];
                    }
                    offset += ${z};
                }

                `)}else{const B=UBO_TO_SINGLE_SETTERS[F.data.type];I.push(`
                cv = ud.${D}.value;
                v = uv.${D};
                offset = ${F.offset/4};
                ${B};
                `)}}return I.push(`
       renderer.buffer.update(buffer);
    `),{size:P,syncFunc:new Function("ud","uv","renderer","syncData","buffer",I.join(`
`))}}let UID=0;const defaultSyncData={textureCount:0,uboCount:0};class ShaderSystem{constructor(T){this.destroyed=!1,this.renderer=T,this.systemCheck(),this.gl=null,this.shader=null,this.program=null,this.cache={},this._uboCache={},this.id=UID++}systemCheck(){if(!unsafeEvalSupported())throw new Error("Current environment does not allow unsafe-eval, please use @pixi/unsafe-eval module to enable support.")}contextChange(T){this.gl=T,this.reset()}bind(T,E){T.disposeRunner.add(this),T.uniforms.globals=this.renderer.globalUniforms;const C=T.program,P=C.glPrograms[this.renderer.CONTEXT_UID]||this.generateProgram(T);return this.shader=T,this.program!==C&&(this.program=C,this.gl.useProgram(P.program)),E||(defaultSyncData.textureCount=0,defaultSyncData.uboCount=0,this.syncUniformGroup(T.uniformGroup,defaultSyncData)),P}setUniforms(T){const E=this.shader.program,C=E.glPrograms[this.renderer.CONTEXT_UID];E.syncUniforms(C.uniformData,T,this.renderer)}syncUniformGroup(T,E){const C=this.getGlProgram();(!T.static||T.dirtyId!==C.uniformDirtyGroups[T.id])&&(C.uniformDirtyGroups[T.id]=T.dirtyId,this.syncUniforms(T,C,E))}syncUniforms(T,E,C){(T.syncUniforms[this.shader.program.id]||this.createSyncGroups(T))(E.uniformData,T.uniforms,this.renderer,C)}createSyncGroups(T){const E=this.getSignature(T,this.shader.program.uniformData,"u");return this.cache[E]||(this.cache[E]=generateUniformsSync(T,this.shader.program.uniformData)),T.syncUniforms[this.shader.program.id]=this.cache[E],T.syncUniforms[this.shader.program.id]}syncUniformBufferGroup(T,E){const C=this.getGlProgram();if(!T.static||T.dirtyId!==0||!C.uniformGroups[T.id]){T.dirtyId=0;const P=C.uniformGroups[T.id]||this.createSyncBufferGroup(T,C,E);T.buffer.update(),P(C.uniformData,T.uniforms,this.renderer,defaultSyncData,T.buffer)}this.renderer.buffer.bindBufferBase(T.buffer,C.uniformBufferBindings[E])}createSyncBufferGroup(T,E,C){const{gl:P}=this.renderer;this.renderer.buffer.bind(T.buffer);const I=this.gl.getUniformBlockIndex(E.program,C);E.uniformBufferBindings[C]=this.shader.uniformBindCount,P.uniformBlockBinding(E.program,I,this.shader.uniformBindCount),this.shader.uniformBindCount++;const R=this.getSignature(T,this.shader.program.uniformData,"ubo");let F=this._uboCache[R];if(F||(F=this._uboCache[R]=generateUniformBufferSync(T,this.shader.program.uniformData)),T.autoManage){const O=new Float32Array(F.size/4);T.buffer.update(O)}return E.uniformGroups[T.id]=F.syncFunc,E.uniformGroups[T.id]}getSignature(T,E,C){const P=T.uniforms,I=[`${C}-`];for(const R in P)I.push(R),E[R]&&I.push(E[R].type);return I.join("-")}getGlProgram(){return this.shader?this.shader.program.glPrograms[this.renderer.CONTEXT_UID]:null}generateProgram(T){const E=this.gl,C=T.program,P=generateProgram(E,C);return C.glPrograms[this.renderer.CONTEXT_UID]=P,P}reset(){this.program=null,this.shader=null}disposeShader(T){this.shader===T&&(this.shader=null)}destroy(){this.renderer=null,this.destroyed=!0}}ShaderSystem.extension={type:ExtensionType.RendererSystem,name:"shader"};extensions$1.add(ShaderSystem);class StartupSystem{constructor(T){this.renderer=T}run(T){const{renderer:E}=this;E.runners.init.emit(E.options),T.hello&&console.log(`PixiJS 7.3.3 - ${E.rendererLogId} - https://pixijs.com`),E.resize(E.screen.width,E.screen.height)}destroy(){}}StartupSystem.defaultOptions={hello:!1},StartupSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"startup"};extensions$1.add(StartupSystem);function mapWebGLBlendModesToPixi(A,T=[]){return T[BLEND_MODES.NORMAL]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.ADD]=[A.ONE,A.ONE],T[BLEND_MODES.MULTIPLY]=[A.DST_COLOR,A.ONE_MINUS_SRC_ALPHA,A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.SCREEN]=[A.ONE,A.ONE_MINUS_SRC_COLOR,A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.OVERLAY]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.DARKEN]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.LIGHTEN]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.COLOR_DODGE]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.COLOR_BURN]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.HARD_LIGHT]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.SOFT_LIGHT]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.DIFFERENCE]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.EXCLUSION]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.HUE]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.SATURATION]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.COLOR]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.LUMINOSITY]=[A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.NONE]=[0,0],T[BLEND_MODES.NORMAL_NPM]=[A.SRC_ALPHA,A.ONE_MINUS_SRC_ALPHA,A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.ADD_NPM]=[A.SRC_ALPHA,A.ONE,A.ONE,A.ONE],T[BLEND_MODES.SCREEN_NPM]=[A.SRC_ALPHA,A.ONE_MINUS_SRC_COLOR,A.ONE,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.SRC_IN]=[A.DST_ALPHA,A.ZERO],T[BLEND_MODES.SRC_OUT]=[A.ONE_MINUS_DST_ALPHA,A.ZERO],T[BLEND_MODES.SRC_ATOP]=[A.DST_ALPHA,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.DST_OVER]=[A.ONE_MINUS_DST_ALPHA,A.ONE],T[BLEND_MODES.DST_IN]=[A.ZERO,A.SRC_ALPHA],T[BLEND_MODES.DST_OUT]=[A.ZERO,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.DST_ATOP]=[A.ONE_MINUS_DST_ALPHA,A.SRC_ALPHA],T[BLEND_MODES.XOR]=[A.ONE_MINUS_DST_ALPHA,A.ONE_MINUS_SRC_ALPHA],T[BLEND_MODES.SUBTRACT]=[A.ONE,A.ONE,A.ONE,A.ONE,A.FUNC_REVERSE_SUBTRACT,A.FUNC_ADD],T}const BLEND=0,OFFSET=1,CULLING=2,DEPTH_TEST=3,WINDING=4,DEPTH_MASK=5,_StateSystem=class ga{constructor(){this.gl=null,this.stateId=0,this.polygonOffset=0,this.blendMode=BLEND_MODES.NONE,this._blendEq=!1,this.map=[],this.map[BLEND]=this.setBlend,this.map[OFFSET]=this.setOffset,this.map[CULLING]=this.setCullFace,this.map[DEPTH_TEST]=this.setDepthTest,this.map[WINDING]=this.setFrontFace,this.map[DEPTH_MASK]=this.setDepthMask,this.checks=[],this.defaultState=new State,this.defaultState.blend=!0}contextChange(T){this.gl=T,this.blendModes=mapWebGLBlendModesToPixi(T),this.set(this.defaultState),this.reset()}set(T){if(T=T||this.defaultState,this.stateId!==T.data){let E=this.stateId^T.data,C=0;for(;E;)E&1&&this.map[C].call(this,!!(T.data&1<<C)),E=E>>1,C++;this.stateId=T.data}for(let E=0;E<this.checks.length;E++)this.checks[E](this,T)}forceState(T){T=T||this.defaultState;for(let E=0;E<this.map.length;E++)this.map[E].call(this,!!(T.data&1<<E));for(let E=0;E<this.checks.length;E++)this.checks[E](this,T);this.stateId=T.data}setBlend(T){this.updateCheck(ga.checkBlendMode,T),this.gl[T?"enable":"disable"](this.gl.BLEND)}setOffset(T){this.updateCheck(ga.checkPolygonOffset,T),this.gl[T?"enable":"disable"](this.gl.POLYGON_OFFSET_FILL)}setDepthTest(T){this.gl[T?"enable":"disable"](this.gl.DEPTH_TEST)}setDepthMask(T){this.gl.depthMask(T)}setCullFace(T){this.gl[T?"enable":"disable"](this.gl.CULL_FACE)}setFrontFace(T){this.gl.frontFace(this.gl[T?"CW":"CCW"])}setBlendMode(T){if(T===this.blendMode)return;this.blendMode=T;const E=this.blendModes[T],C=this.gl;E.length===2?C.blendFunc(E[0],E[1]):C.blendFuncSeparate(E[0],E[1],E[2],E[3]),E.length===6?(this._blendEq=!0,C.blendEquationSeparate(E[4],E[5])):this._blendEq&&(this._blendEq=!1,C.blendEquationSeparate(C.FUNC_ADD,C.FUNC_ADD))}setPolygonOffset(T,E){this.gl.polygonOffset(T,E)}reset(){this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.forceState(this.defaultState),this._blendEq=!0,this.blendMode=-1,this.setBlendMode(0)}updateCheck(T,E){const C=this.checks.indexOf(T);E&&C===-1?this.checks.push(T):!E&&C!==-1&&this.checks.splice(C,1)}static checkBlendMode(T,E){T.setBlendMode(E.blendMode)}static checkPolygonOffset(T,E){T.setPolygonOffset(1,E.polygonOffset)}destroy(){this.gl=null}};_StateSystem.extension={type:ExtensionType.RendererSystem,name:"state"};let StateSystem=_StateSystem;extensions$1.add(StateSystem);class SystemManager extends EventEmitter{constructor(){super(...arguments),this.runners={},this._systemsHash={}}setup(T){this.addRunners(...T.runners);const E=(T.priority??[]).filter(P=>T.systems[P]),C=[...E,...Object.keys(T.systems).filter(P=>!E.includes(P))];for(const P of C)this.addSystem(T.systems[P],P)}addRunners(...T){T.forEach(E=>{this.runners[E]=new Runner(E)})}addSystem(T,E){const C=new T(this);if(this[E])throw new Error(`Whoops! The name "${E}" is already in use`);this[E]=C,this._systemsHash[E]=C;for(const P in this.runners)this.runners[P].add(C);return this}emitWithCustomOptions(T,E){const C=Object.keys(this._systemsHash);T.items.forEach(P=>{const I=C.find(R=>this._systemsHash[R]===P);P[T.name](E[I])})}destroy(){Object.values(this.runners).forEach(T=>{T.destroy()}),this._systemsHash={}}}const _TextureGCSystem=class is{constructor(T){this.renderer=T,this.count=0,this.checkCount=0,this.maxIdle=is.defaultMaxIdle,this.checkCountMax=is.defaultCheckCountMax,this.mode=is.defaultMode}postrender(){this.renderer.objectRenderer.renderingToScreen&&(this.count++,this.mode!==GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run())))}run(){const T=this.renderer.texture,E=T.managedTextures;let C=!1;for(let P=0;P<E.length;P++){const I=E[P];I.resource&&this.count-I.touched>this.maxIdle&&(T.destroyTexture(I,!0),E[P]=null,C=!0)}if(C){let P=0;for(let I=0;I<E.length;I++)E[I]!==null&&(E[P++]=E[I]);E.length=P}}unload(T){const E=this.renderer.texture,C=T._texture;C&&!C.framebuffer&&E.destroyTexture(C);for(let P=T.children.length-1;P>=0;P--)this.unload(T.children[P])}destroy(){this.renderer=null}};_TextureGCSystem.defaultMode=GC_MODES.AUTO,_TextureGCSystem.defaultMaxIdle=60*60,_TextureGCSystem.defaultCheckCountMax=60*10,_TextureGCSystem.extension={type:ExtensionType.RendererSystem,name:"textureGC"};let TextureGCSystem=_TextureGCSystem;extensions$1.add(TextureGCSystem);class GLTexture{constructor(T){this.texture=T,this.width=-1,this.height=-1,this.dirtyId=-1,this.dirtyStyleId=-1,this.mipmap=!1,this.wrapMode=33071,this.type=TYPES.UNSIGNED_BYTE,this.internalFormat=FORMATS.RGBA,this.samplerType=0}}function mapInternalFormatToSamplerType(A){let T;return"WebGL2RenderingContext"in globalThis&&A instanceof globalThis.WebGL2RenderingContext?T={[A.RGB]:SAMPLER_TYPES.FLOAT,[A.RGBA]:SAMPLER_TYPES.FLOAT,[A.ALPHA]:SAMPLER_TYPES.FLOAT,[A.LUMINANCE]:SAMPLER_TYPES.FLOAT,[A.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[A.R8]:SAMPLER_TYPES.FLOAT,[A.R8_SNORM]:SAMPLER_TYPES.FLOAT,[A.RG8]:SAMPLER_TYPES.FLOAT,[A.RG8_SNORM]:SAMPLER_TYPES.FLOAT,[A.RGB8]:SAMPLER_TYPES.FLOAT,[A.RGB8_SNORM]:SAMPLER_TYPES.FLOAT,[A.RGB565]:SAMPLER_TYPES.FLOAT,[A.RGBA4]:SAMPLER_TYPES.FLOAT,[A.RGB5_A1]:SAMPLER_TYPES.FLOAT,[A.RGBA8]:SAMPLER_TYPES.FLOAT,[A.RGBA8_SNORM]:SAMPLER_TYPES.FLOAT,[A.RGB10_A2]:SAMPLER_TYPES.FLOAT,[A.RGB10_A2UI]:SAMPLER_TYPES.FLOAT,[A.SRGB8]:SAMPLER_TYPES.FLOAT,[A.SRGB8_ALPHA8]:SAMPLER_TYPES.FLOAT,[A.R16F]:SAMPLER_TYPES.FLOAT,[A.RG16F]:SAMPLER_TYPES.FLOAT,[A.RGB16F]:SAMPLER_TYPES.FLOAT,[A.RGBA16F]:SAMPLER_TYPES.FLOAT,[A.R32F]:SAMPLER_TYPES.FLOAT,[A.RG32F]:SAMPLER_TYPES.FLOAT,[A.RGB32F]:SAMPLER_TYPES.FLOAT,[A.RGBA32F]:SAMPLER_TYPES.FLOAT,[A.R11F_G11F_B10F]:SAMPLER_TYPES.FLOAT,[A.RGB9_E5]:SAMPLER_TYPES.FLOAT,[A.R8I]:SAMPLER_TYPES.INT,[A.R8UI]:SAMPLER_TYPES.UINT,[A.R16I]:SAMPLER_TYPES.INT,[A.R16UI]:SAMPLER_TYPES.UINT,[A.R32I]:SAMPLER_TYPES.INT,[A.R32UI]:SAMPLER_TYPES.UINT,[A.RG8I]:SAMPLER_TYPES.INT,[A.RG8UI]:SAMPLER_TYPES.UINT,[A.RG16I]:SAMPLER_TYPES.INT,[A.RG16UI]:SAMPLER_TYPES.UINT,[A.RG32I]:SAMPLER_TYPES.INT,[A.RG32UI]:SAMPLER_TYPES.UINT,[A.RGB8I]:SAMPLER_TYPES.INT,[A.RGB8UI]:SAMPLER_TYPES.UINT,[A.RGB16I]:SAMPLER_TYPES.INT,[A.RGB16UI]:SAMPLER_TYPES.UINT,[A.RGB32I]:SAMPLER_TYPES.INT,[A.RGB32UI]:SAMPLER_TYPES.UINT,[A.RGBA8I]:SAMPLER_TYPES.INT,[A.RGBA8UI]:SAMPLER_TYPES.UINT,[A.RGBA16I]:SAMPLER_TYPES.INT,[A.RGBA16UI]:SAMPLER_TYPES.UINT,[A.RGBA32I]:SAMPLER_TYPES.INT,[A.RGBA32UI]:SAMPLER_TYPES.UINT,[A.DEPTH_COMPONENT16]:SAMPLER_TYPES.FLOAT,[A.DEPTH_COMPONENT24]:SAMPLER_TYPES.FLOAT,[A.DEPTH_COMPONENT32F]:SAMPLER_TYPES.FLOAT,[A.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT,[A.DEPTH24_STENCIL8]:SAMPLER_TYPES.FLOAT,[A.DEPTH32F_STENCIL8]:SAMPLER_TYPES.FLOAT}:T={[A.RGB]:SAMPLER_TYPES.FLOAT,[A.RGBA]:SAMPLER_TYPES.FLOAT,[A.ALPHA]:SAMPLER_TYPES.FLOAT,[A.LUMINANCE]:SAMPLER_TYPES.FLOAT,[A.LUMINANCE_ALPHA]:SAMPLER_TYPES.FLOAT,[A.DEPTH_STENCIL]:SAMPLER_TYPES.FLOAT},T}function mapTypeAndFormatToInternalFormat(A){let T;return"WebGL2RenderingContext"in globalThis&&A instanceof globalThis.WebGL2RenderingContext?T={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:A.RGBA8,[FORMATS.RGB]:A.RGB8,[FORMATS.RG]:A.RG8,[FORMATS.RED]:A.R8,[FORMATS.RGBA_INTEGER]:A.RGBA8UI,[FORMATS.RGB_INTEGER]:A.RGB8UI,[FORMATS.RG_INTEGER]:A.RG8UI,[FORMATS.RED_INTEGER]:A.R8UI,[FORMATS.ALPHA]:A.ALPHA,[FORMATS.LUMINANCE]:A.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:A.LUMINANCE_ALPHA},[TYPES.BYTE]:{[FORMATS.RGBA]:A.RGBA8_SNORM,[FORMATS.RGB]:A.RGB8_SNORM,[FORMATS.RG]:A.RG8_SNORM,[FORMATS.RED]:A.R8_SNORM,[FORMATS.RGBA_INTEGER]:A.RGBA8I,[FORMATS.RGB_INTEGER]:A.RGB8I,[FORMATS.RG_INTEGER]:A.RG8I,[FORMATS.RED_INTEGER]:A.R8I},[TYPES.UNSIGNED_SHORT]:{[FORMATS.RGBA_INTEGER]:A.RGBA16UI,[FORMATS.RGB_INTEGER]:A.RGB16UI,[FORMATS.RG_INTEGER]:A.RG16UI,[FORMATS.RED_INTEGER]:A.R16UI,[FORMATS.DEPTH_COMPONENT]:A.DEPTH_COMPONENT16},[TYPES.SHORT]:{[FORMATS.RGBA_INTEGER]:A.RGBA16I,[FORMATS.RGB_INTEGER]:A.RGB16I,[FORMATS.RG_INTEGER]:A.RG16I,[FORMATS.RED_INTEGER]:A.R16I},[TYPES.UNSIGNED_INT]:{[FORMATS.RGBA_INTEGER]:A.RGBA32UI,[FORMATS.RGB_INTEGER]:A.RGB32UI,[FORMATS.RG_INTEGER]:A.RG32UI,[FORMATS.RED_INTEGER]:A.R32UI,[FORMATS.DEPTH_COMPONENT]:A.DEPTH_COMPONENT24},[TYPES.INT]:{[FORMATS.RGBA_INTEGER]:A.RGBA32I,[FORMATS.RGB_INTEGER]:A.RGB32I,[FORMATS.RG_INTEGER]:A.RG32I,[FORMATS.RED_INTEGER]:A.R32I},[TYPES.FLOAT]:{[FORMATS.RGBA]:A.RGBA32F,[FORMATS.RGB]:A.RGB32F,[FORMATS.RG]:A.RG32F,[FORMATS.RED]:A.R32F,[FORMATS.DEPTH_COMPONENT]:A.DEPTH_COMPONENT32F},[TYPES.HALF_FLOAT]:{[FORMATS.RGBA]:A.RGBA16F,[FORMATS.RGB]:A.RGB16F,[FORMATS.RG]:A.RG16F,[FORMATS.RED]:A.R16F},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:A.RGB565},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:A.RGBA4},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:A.RGB5_A1},[TYPES.UNSIGNED_INT_2_10_10_10_REV]:{[FORMATS.RGBA]:A.RGB10_A2,[FORMATS.RGBA_INTEGER]:A.RGB10_A2UI},[TYPES.UNSIGNED_INT_10F_11F_11F_REV]:{[FORMATS.RGB]:A.R11F_G11F_B10F},[TYPES.UNSIGNED_INT_5_9_9_9_REV]:{[FORMATS.RGB]:A.RGB9_E5},[TYPES.UNSIGNED_INT_24_8]:{[FORMATS.DEPTH_STENCIL]:A.DEPTH24_STENCIL8},[TYPES.FLOAT_32_UNSIGNED_INT_24_8_REV]:{[FORMATS.DEPTH_STENCIL]:A.DEPTH32F_STENCIL8}}:T={[TYPES.UNSIGNED_BYTE]:{[FORMATS.RGBA]:A.RGBA,[FORMATS.RGB]:A.RGB,[FORMATS.ALPHA]:A.ALPHA,[FORMATS.LUMINANCE]:A.LUMINANCE,[FORMATS.LUMINANCE_ALPHA]:A.LUMINANCE_ALPHA},[TYPES.UNSIGNED_SHORT_5_6_5]:{[FORMATS.RGB]:A.RGB},[TYPES.UNSIGNED_SHORT_4_4_4_4]:{[FORMATS.RGBA]:A.RGBA},[TYPES.UNSIGNED_SHORT_5_5_5_1]:{[FORMATS.RGBA]:A.RGBA}},T}class TextureSystem{constructor(T){this.renderer=T,this.boundTextures=[],this.currentLocation=-1,this.managedTextures=[],this._unknownBoundTextures=!1,this.unknownTexture=new BaseTexture,this.hasIntegerTextures=!1}contextChange(){const T=this.gl=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.webGLVersion=this.renderer.context.webGLVersion,this.internalFormats=mapTypeAndFormatToInternalFormat(T),this.samplerTypes=mapInternalFormatToSamplerType(T);const E=T.getParameter(T.MAX_TEXTURE_IMAGE_UNITS);this.boundTextures.length=E;for(let P=0;P<E;P++)this.boundTextures[P]=null;this.emptyTextures={};const C=new GLTexture(T.createTexture());T.bindTexture(T.TEXTURE_2D,C.texture),T.texImage2D(T.TEXTURE_2D,0,T.RGBA,1,1,0,T.RGBA,T.UNSIGNED_BYTE,new Uint8Array(4)),this.emptyTextures[T.TEXTURE_2D]=C,this.emptyTextures[T.TEXTURE_CUBE_MAP]=new GLTexture(T.createTexture()),T.bindTexture(T.TEXTURE_CUBE_MAP,this.emptyTextures[T.TEXTURE_CUBE_MAP].texture);for(let P=0;P<6;P++)T.texImage2D(T.TEXTURE_CUBE_MAP_POSITIVE_X+P,0,T.RGBA,1,1,0,T.RGBA,T.UNSIGNED_BYTE,null);T.texParameteri(T.TEXTURE_CUBE_MAP,T.TEXTURE_MAG_FILTER,T.LINEAR),T.texParameteri(T.TEXTURE_CUBE_MAP,T.TEXTURE_MIN_FILTER,T.LINEAR);for(let P=0;P<this.boundTextures.length;P++)this.bind(null,P)}bind(T,E=0){const{gl:C}=this;if(T=T==null?void 0:T.castToBaseTexture(),(T==null?void 0:T.valid)&&!T.parentTextureArray){T.touched=this.renderer.textureGC.count;const P=T._glTextures[this.CONTEXT_UID]||this.initTexture(T);this.boundTextures[E]!==T&&(this.currentLocation!==E&&(this.currentLocation=E,C.activeTexture(C.TEXTURE0+E)),C.bindTexture(T.target,P.texture)),P.dirtyId!==T.dirtyId?(this.currentLocation!==E&&(this.currentLocation=E,C.activeTexture(C.TEXTURE0+E)),this.updateTexture(T)):P.dirtyStyleId!==T.dirtyStyleId&&this.updateTextureStyle(T),this.boundTextures[E]=T}else this.currentLocation!==E&&(this.currentLocation=E,C.activeTexture(C.TEXTURE0+E)),C.bindTexture(C.TEXTURE_2D,this.emptyTextures[C.TEXTURE_2D].texture),this.boundTextures[E]=null}reset(){this._unknownBoundTextures=!0,this.hasIntegerTextures=!1,this.currentLocation=-1;for(let T=0;T<this.boundTextures.length;T++)this.boundTextures[T]=this.unknownTexture}unbind(T){const{gl:E,boundTextures:C}=this;if(this._unknownBoundTextures){this._unknownBoundTextures=!1;for(let P=0;P<C.length;P++)C[P]===this.unknownTexture&&this.bind(null,P)}for(let P=0;P<C.length;P++)C[P]===T&&(this.currentLocation!==P&&(E.activeTexture(E.TEXTURE0+P),this.currentLocation=P),E.bindTexture(T.target,this.emptyTextures[T.target].texture),C[P]=null)}ensureSamplerType(T){const{boundTextures:E,hasIntegerTextures:C,CONTEXT_UID:P}=this;if(C)for(let I=T-1;I>=0;--I){const R=E[I];R&&R._glTextures[P].samplerType!==SAMPLER_TYPES.FLOAT&&this.renderer.texture.unbind(R)}}initTexture(T){const E=new GLTexture(this.gl.createTexture());return E.dirtyId=-1,T._glTextures[this.CONTEXT_UID]=E,this.managedTextures.push(T),T.on("dispose",this.destroyTexture,this),E}initTextureType(T,E){var C;E.internalFormat=((C=this.internalFormats[T.type])==null?void 0:C[T.format])??T.format,E.samplerType=this.samplerTypes[E.internalFormat]??SAMPLER_TYPES.FLOAT,this.webGLVersion===2&&T.type===TYPES.HALF_FLOAT?E.type=this.gl.HALF_FLOAT:E.type=T.type}updateTexture(T){var P;const E=T._glTextures[this.CONTEXT_UID];if(!E)return;const C=this.renderer;if(this.initTextureType(T,E),(P=T.resource)==null?void 0:P.upload(C,T,E))E.samplerType!==SAMPLER_TYPES.FLOAT&&(this.hasIntegerTextures=!0);else{const I=T.realWidth,R=T.realHeight,F=C.gl;(E.width!==I||E.height!==R||E.dirtyId<0)&&(E.width=I,E.height=R,F.texImage2D(T.target,0,E.internalFormat,I,R,0,T.format,E.type,null))}T.dirtyStyleId!==E.dirtyStyleId&&this.updateTextureStyle(T),E.dirtyId=T.dirtyId}destroyTexture(T,E){const{gl:C}=this;if(T=T.castToBaseTexture(),T._glTextures[this.CONTEXT_UID]&&(this.unbind(T),C.deleteTexture(T._glTextures[this.CONTEXT_UID].texture),T.off("dispose",this.destroyTexture,this),delete T._glTextures[this.CONTEXT_UID],!E)){const P=this.managedTextures.indexOf(T);P!==-1&&removeItems(this.managedTextures,P,1)}}updateTextureStyle(T){var C;const E=T._glTextures[this.CONTEXT_UID];E&&((T.mipmap===MIPMAP_MODES.POW2||this.webGLVersion!==2)&&!T.isPowerOfTwo?E.mipmap=!1:E.mipmap=T.mipmap>=1,this.webGLVersion!==2&&!T.isPowerOfTwo?E.wrapMode=WRAP_MODES.CLAMP:E.wrapMode=T.wrapMode,(C=T.resource)!=null&&C.style(this.renderer,T,E)||this.setStyle(T,E),E.dirtyStyleId=T.dirtyStyleId)}setStyle(T,E){const C=this.gl;if(E.mipmap&&T.mipmap!==MIPMAP_MODES.ON_MANUAL&&C.generateMipmap(T.target),C.texParameteri(T.target,C.TEXTURE_WRAP_S,E.wrapMode),C.texParameteri(T.target,C.TEXTURE_WRAP_T,E.wrapMode),E.mipmap){C.texParameteri(T.target,C.TEXTURE_MIN_FILTER,T.scaleMode===SCALE_MODES.LINEAR?C.LINEAR_MIPMAP_LINEAR:C.NEAREST_MIPMAP_NEAREST);const P=this.renderer.context.extensions.anisotropicFiltering;if(P&&T.anisotropicLevel>0&&T.scaleMode===SCALE_MODES.LINEAR){const I=Math.min(T.anisotropicLevel,C.getParameter(P.MAX_TEXTURE_MAX_ANISOTROPY_EXT));C.texParameterf(T.target,P.TEXTURE_MAX_ANISOTROPY_EXT,I)}}else C.texParameteri(T.target,C.TEXTURE_MIN_FILTER,T.scaleMode===SCALE_MODES.LINEAR?C.LINEAR:C.NEAREST);C.texParameteri(T.target,C.TEXTURE_MAG_FILTER,T.scaleMode===SCALE_MODES.LINEAR?C.LINEAR:C.NEAREST)}destroy(){this.renderer=null}}TextureSystem.extension={type:ExtensionType.RendererSystem,name:"texture"};extensions$1.add(TextureSystem);class TransformFeedbackSystem{constructor(T){this.renderer=T}contextChange(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(T){const{gl:E,CONTEXT_UID:C}=this,P=T._glTransformFeedbacks[C]||this.createGLTransformFeedback(T);E.bindTransformFeedback(E.TRANSFORM_FEEDBACK,P)}unbind(){const{gl:T}=this;T.bindTransformFeedback(T.TRANSFORM_FEEDBACK,null)}beginTransformFeedback(T,E){const{gl:C,renderer:P}=this;E&&P.shader.bind(E),C.beginTransformFeedback(T)}endTransformFeedback(){const{gl:T}=this;T.endTransformFeedback()}createGLTransformFeedback(T){const{gl:E,renderer:C,CONTEXT_UID:P}=this,I=E.createTransformFeedback();T._glTransformFeedbacks[P]=I,E.bindTransformFeedback(E.TRANSFORM_FEEDBACK,I);for(let R=0;R<T.buffers.length;R++){const F=T.buffers[R];F&&(C.buffer.update(F),F._glBuffers[P].refCount++,E.bindBufferBase(E.TRANSFORM_FEEDBACK_BUFFER,R,F._glBuffers[P].buffer||null))}return E.bindTransformFeedback(E.TRANSFORM_FEEDBACK,null),T.disposeRunner.add(this),I}disposeTransformFeedback(T,E){const C=T._glTransformFeedbacks[this.CONTEXT_UID],P=this.gl;T.disposeRunner.remove(this);const I=this.renderer.buffer;if(I)for(let R=0;R<T.buffers.length;R++){const F=T.buffers[R];if(!F)continue;const O=F._glBuffers[this.CONTEXT_UID];O&&(O.refCount--,O.refCount===0&&!E&&I.dispose(F,E))}C&&(E||P.deleteTransformFeedback(C),delete T._glTransformFeedbacks[this.CONTEXT_UID])}destroy(){this.renderer=null}}TransformFeedbackSystem.extension={type:ExtensionType.RendererSystem,name:"transformFeedback"};extensions$1.add(TransformFeedbackSystem);class ViewSystem{constructor(T){this.renderer=T}init(T){this.screen=new Rectangle(0,0,T.width,T.height),this.element=T.view||settings.ADAPTER.createCanvas(),this.resolution=T.resolution||settings.RESOLUTION,this.autoDensity=!!T.autoDensity}resizeView(T,E){this.element.width=Math.round(T*this.resolution),this.element.height=Math.round(E*this.resolution);const C=this.element.width/this.resolution,P=this.element.height/this.resolution;this.screen.width=C,this.screen.height=P,this.autoDensity&&(this.element.style.width=`${C}px`,this.element.style.height=`${P}px`),this.renderer.emit("resize",C,P),this.renderer.runners.resize.emit(this.screen.width,this.screen.height)}destroy(T){var E;T&&((E=this.element.parentNode)==null||E.removeChild(this.element)),this.renderer=null,this.element=null,this.screen=null}}ViewSystem.defaultOptions={width:800,height:600,resolution:void 0,autoDensity:!1},ViewSystem.extension={type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem],name:"_view"};extensions$1.add(ViewSystem);settings.PREFER_ENV=ENV.WEBGL2;settings.STRICT_TEXTURE_CACHE=!1;settings.RENDER_OPTIONS={...ContextSystem.defaultOptions,...BackgroundSystem.defaultOptions,...ViewSystem.defaultOptions,...StartupSystem.defaultOptions};Object.defineProperties(settings,{WRAP_MODE:{get(){return BaseTexture.defaultOptions.wrapMode},set(A){deprecation("7.1.0","settings.WRAP_MODE is deprecated, use BaseTexture.defaultOptions.wrapMode"),BaseTexture.defaultOptions.wrapMode=A}},SCALE_MODE:{get(){return BaseTexture.defaultOptions.scaleMode},set(A){deprecation("7.1.0","settings.SCALE_MODE is deprecated, use BaseTexture.defaultOptions.scaleMode"),BaseTexture.defaultOptions.scaleMode=A}},MIPMAP_TEXTURES:{get(){return BaseTexture.defaultOptions.mipmap},set(A){deprecation("7.1.0","settings.MIPMAP_TEXTURES is deprecated, use BaseTexture.defaultOptions.mipmap"),BaseTexture.defaultOptions.mipmap=A}},ANISOTROPIC_LEVEL:{get(){return BaseTexture.defaultOptions.anisotropicLevel},set(A){deprecation("7.1.0","settings.ANISOTROPIC_LEVEL is deprecated, use BaseTexture.defaultOptions.anisotropicLevel"),BaseTexture.defaultOptions.anisotropicLevel=A}},FILTER_RESOLUTION:{get(){return deprecation("7.1.0","settings.FILTER_RESOLUTION is deprecated, use Filter.defaultResolution"),Filter$1.defaultResolution},set(A){Filter$1.defaultResolution=A}},FILTER_MULTISAMPLE:{get(){return deprecation("7.1.0","settings.FILTER_MULTISAMPLE is deprecated, use Filter.defaultMultisample"),Filter$1.defaultMultisample},set(A){Filter$1.defaultMultisample=A}},SPRITE_MAX_TEXTURES:{get(){return BatchRenderer.defaultMaxTextures},set(A){deprecation("7.1.0","settings.SPRITE_MAX_TEXTURES is deprecated, use BatchRenderer.defaultMaxTextures"),BatchRenderer.defaultMaxTextures=A}},SPRITE_BATCH_SIZE:{get(){return BatchRenderer.defaultBatchSize},set(A){deprecation("7.1.0","settings.SPRITE_BATCH_SIZE is deprecated, use BatchRenderer.defaultBatchSize"),BatchRenderer.defaultBatchSize=A}},CAN_UPLOAD_SAME_BUFFER:{get(){return BatchRenderer.canUploadSameBuffer},set(A){deprecation("7.1.0","settings.CAN_UPLOAD_SAME_BUFFER is deprecated, use BatchRenderer.canUploadSameBuffer"),BatchRenderer.canUploadSameBuffer=A}},GC_MODE:{get(){return TextureGCSystem.defaultMode},set(A){deprecation("7.1.0","settings.GC_MODE is deprecated, use TextureGCSystem.defaultMode"),TextureGCSystem.defaultMode=A}},GC_MAX_IDLE:{get(){return TextureGCSystem.defaultMaxIdle},set(A){deprecation("7.1.0","settings.GC_MAX_IDLE is deprecated, use TextureGCSystem.defaultMaxIdle"),TextureGCSystem.defaultMaxIdle=A}},GC_MAX_CHECK_COUNT:{get(){return TextureGCSystem.defaultCheckCountMax},set(A){deprecation("7.1.0","settings.GC_MAX_CHECK_COUNT is deprecated, use TextureGCSystem.defaultCheckCountMax"),TextureGCSystem.defaultCheckCountMax=A}},PRECISION_VERTEX:{get(){return Program.defaultVertexPrecision},set(A){deprecation("7.1.0","settings.PRECISION_VERTEX is deprecated, use Program.defaultVertexPrecision"),Program.defaultVertexPrecision=A}},PRECISION_FRAGMENT:{get(){return Program.defaultFragmentPrecision},set(A){deprecation("7.1.0","settings.PRECISION_FRAGMENT is deprecated, use Program.defaultFragmentPrecision"),Program.defaultFragmentPrecision=A}}});var UPDATE_PRIORITY=(A=>(A[A.INTERACTION=50]="INTERACTION",A[A.HIGH=25]="HIGH",A[A.NORMAL=0]="NORMAL",A[A.LOW=-25]="LOW",A[A.UTILITY=-50]="UTILITY",A))(UPDATE_PRIORITY||{});class TickerListener{constructor(T,E=null,C=0,P=!1){this.next=null,this.previous=null,this._destroyed=!1,this.fn=T,this.context=E,this.priority=C,this.once=P}match(T,E=null){return this.fn===T&&this.context===E}emit(T){this.fn&&(this.context?this.fn.call(this.context,T):this.fn(T));const E=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),E}connect(T){this.previous=T,T.next&&(T.next.previous=this),this.next=T.next,T.next=this}destroy(T=!1){this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);const E=this.next;return this.next=T?null:E,this.previous=null,E}}const _Ticker=class gr{constructor(){this.autoStart=!1,this.deltaTime=1,this.lastTime=-1,this.speed=1,this.started=!1,this._requestId=null,this._maxElapsedMS=100,this._minElapsedMS=0,this._protected=!1,this._lastFrame=-1,this._head=new TickerListener(null,null,1/0),this.deltaMS=1/gr.targetFPMS,this.elapsedMS=1/gr.targetFPMS,this._tick=T=>{this._requestId=null,this.started&&(this.update(T),this.started&&this._requestId===null&&this._head.next&&(this._requestId=requestAnimationFrame(this._tick)))}}_requestIfNeeded(){this._requestId===null&&this._head.next&&(this.lastTime=performance.now(),this._lastFrame=this.lastTime,this._requestId=requestAnimationFrame(this._tick))}_cancelIfNeeded(){this._requestId!==null&&(cancelAnimationFrame(this._requestId),this._requestId=null)}_startIfPossible(){this.started?this._requestIfNeeded():this.autoStart&&this.start()}add(T,E,C=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(T,E,C))}addOnce(T,E,C=UPDATE_PRIORITY.NORMAL){return this._addListener(new TickerListener(T,E,C,!0))}_addListener(T){let E=this._head.next,C=this._head;if(!E)T.connect(C);else{for(;E;){if(T.priority>E.priority){T.connect(C);break}C=E,E=E.next}T.previous||T.connect(C)}return this._startIfPossible(),this}remove(T,E){let C=this._head.next;for(;C;)C.match(T,E)?C=C.destroy():C=C.next;return this._head.next||this._cancelIfNeeded(),this}get count(){if(!this._head)return 0;let T=0,E=this._head;for(;E=E.next;)T++;return T}start(){this.started||(this.started=!0,this._requestIfNeeded())}stop(){this.started&&(this.started=!1,this._cancelIfNeeded())}destroy(){if(!this._protected){this.stop();let T=this._head.next;for(;T;)T=T.destroy(!0);this._head.destroy(),this._head=null}}update(T=performance.now()){let E;if(T>this.lastTime){if(E=this.elapsedMS=T-this.lastTime,E>this._maxElapsedMS&&(E=this._maxElapsedMS),E*=this.speed,this._minElapsedMS){const I=T-this._lastFrame|0;if(I<this._minElapsedMS)return;this._lastFrame=T-I%this._minElapsedMS}this.deltaMS=E,this.deltaTime=this.deltaMS*gr.targetFPMS;const C=this._head;let P=C.next;for(;P;)P=P.emit(this.deltaTime);C.next||this._cancelIfNeeded()}else this.deltaTime=this.deltaMS=this.elapsedMS=0;this.lastTime=T}get FPS(){return 1e3/this.elapsedMS}get minFPS(){return 1e3/this._maxElapsedMS}set minFPS(T){const E=Math.min(this.maxFPS,T),C=Math.min(Math.max(0,E)/1e3,gr.targetFPMS);this._maxElapsedMS=1/C}get maxFPS(){return this._minElapsedMS?Math.round(1e3/this._minElapsedMS):0}set maxFPS(T){if(T===0)this._minElapsedMS=0;else{const E=Math.max(this.minFPS,T);this._minElapsedMS=1/(E/1e3)}}static get shared(){if(!gr._shared){const T=gr._shared=new gr;T.autoStart=!0,T._protected=!0}return gr._shared}static get system(){if(!gr._system){const T=gr._system=new gr;T.autoStart=!0,T._protected=!0}return gr._system}};_Ticker.targetFPMS=.06;let Ticker$1=_Ticker;Object.defineProperties(settings,{TARGET_FPMS:{get(){return Ticker$1.targetFPMS},set(A){deprecation("7.1.0","settings.TARGET_FPMS is deprecated, use Ticker.targetFPMS"),Ticker$1.targetFPMS=A}}});class TickerPlugin{static init(T){T=Object.assign({autoStart:!0,sharedTicker:!1},T),Object.defineProperty(this,"ticker",{set(E){this._ticker&&this._ticker.remove(this.render,this),this._ticker=E,E&&E.add(this.render,this,UPDATE_PRIORITY.LOW)},get(){return this._ticker}}),this.stop=()=>{this._ticker.stop()},this.start=()=>{this._ticker.start()},this._ticker=null,this.ticker=T.sharedTicker?Ticker$1.shared:new Ticker$1,T.autoStart&&this.start()}static destroy(){if(this._ticker){const T=this._ticker;this.ticker=null,T.destroy()}}}TickerPlugin.extension=ExtensionType.Application;extensions$1.add(TickerPlugin);const renderers=[];extensions$1.handleByList(ExtensionType.Renderer,renderers);function autoDetectRenderer(A){for(const T of renderers)if(T.test(A))return new T(A);throw new Error("Unable to auto-detect a suitable renderer.")}var $defaultVertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);
    vTextureCoord = aTextureCoord;
}`,$defaultFilterVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
    gl_Position = filterVertexPosition();
    vTextureCoord = filterTextureCoord();
}
`;const defaultVertex=$defaultVertex,defaultFilterVertex=$defaultFilterVertex;class MultisampleSystem{constructor(T){this.renderer=T}contextChange(T){let E;if(this.renderer.context.webGLVersion===1){const C=T.getParameter(T.FRAMEBUFFER_BINDING);T.bindFramebuffer(T.FRAMEBUFFER,null),E=T.getParameter(T.SAMPLES),T.bindFramebuffer(T.FRAMEBUFFER,C)}else{const C=T.getParameter(T.DRAW_FRAMEBUFFER_BINDING);T.bindFramebuffer(T.DRAW_FRAMEBUFFER,null),E=T.getParameter(T.SAMPLES),T.bindFramebuffer(T.DRAW_FRAMEBUFFER,C)}E>=MSAA_QUALITY.HIGH?this.multisample=MSAA_QUALITY.HIGH:E>=MSAA_QUALITY.MEDIUM?this.multisample=MSAA_QUALITY.MEDIUM:E>=MSAA_QUALITY.LOW?this.multisample=MSAA_QUALITY.LOW:this.multisample=MSAA_QUALITY.NONE}destroy(){}}MultisampleSystem.extension={type:ExtensionType.RendererSystem,name:"_multisample"};extensions$1.add(MultisampleSystem);class GLBuffer{constructor(T){this.buffer=T||null,this.updateID=-1,this.byteLength=-1,this.refCount=0}}class BufferSystem{constructor(T){this.renderer=T,this.managedBuffers={},this.boundBufferBases={}}destroy(){this.renderer=null}contextChange(){this.disposeAll(!0),this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID}bind(T){const{gl:E,CONTEXT_UID:C}=this,P=T._glBuffers[C]||this.createGLBuffer(T);E.bindBuffer(T.type,P.buffer)}unbind(T){const{gl:E}=this;E.bindBuffer(T,null)}bindBufferBase(T,E){const{gl:C,CONTEXT_UID:P}=this;if(this.boundBufferBases[E]!==T){const I=T._glBuffers[P]||this.createGLBuffer(T);this.boundBufferBases[E]=T,C.bindBufferBase(C.UNIFORM_BUFFER,E,I.buffer)}}bindBufferRange(T,E,C){const{gl:P,CONTEXT_UID:I}=this;C=C||0;const R=T._glBuffers[I]||this.createGLBuffer(T);P.bindBufferRange(P.UNIFORM_BUFFER,E||0,R.buffer,C*256,256)}update(T){const{gl:E,CONTEXT_UID:C}=this,P=T._glBuffers[C]||this.createGLBuffer(T);if(T._updateID!==P.updateID)if(P.updateID=T._updateID,E.bindBuffer(T.type,P.buffer),P.byteLength>=T.data.byteLength)E.bufferSubData(T.type,0,T.data);else{const I=T.static?E.STATIC_DRAW:E.DYNAMIC_DRAW;P.byteLength=T.data.byteLength,E.bufferData(T.type,T.data,I)}}dispose(T,E){if(!this.managedBuffers[T.id])return;delete this.managedBuffers[T.id];const C=T._glBuffers[this.CONTEXT_UID],P=this.gl;T.disposeRunner.remove(this),C&&(E||P.deleteBuffer(C.buffer),delete T._glBuffers[this.CONTEXT_UID])}disposeAll(T){const E=Object.keys(this.managedBuffers);for(let C=0;C<E.length;C++)this.dispose(this.managedBuffers[E[C]],T)}createGLBuffer(T){const{CONTEXT_UID:E,gl:C}=this;return T._glBuffers[E]=new GLBuffer(C.createBuffer()),this.managedBuffers[T.id]=T,T.disposeRunner.add(this),T._glBuffers[E]}}BufferSystem.extension={type:ExtensionType.RendererSystem,name:"buffer"};extensions$1.add(BufferSystem);class ObjectRendererSystem{constructor(T){this.renderer=T}render(T,E){const C=this.renderer;let P,I,R,F;if(E&&(P=E.renderTexture,I=E.clear,R=E.transform,F=E.skipUpdateTransform),this.renderingToScreen=!P,C.runners.prerender.emit(),C.emit("prerender"),C.projection.transform=R,!C.context.isLost){if(P||(this.lastObjectRendered=T),!F){const O=T.enableTempParent();T.updateTransform(),T.disableTempParent(O)}C.renderTexture.bind(P),C.batch.currentRenderer.start(),(I??C.background.clearBeforeRender)&&C.renderTexture.clear(),T.render(C),C.batch.currentRenderer.flush(),P&&(E.blit&&C.framebuffer.blit(),P.baseTexture.update()),C.runners.postrender.emit(),C.projection.transform=null,C.emit("postrender")}}destroy(){this.renderer=null,this.lastObjectRendered=null}}ObjectRendererSystem.extension={type:ExtensionType.RendererSystem,name:"objectRenderer"};extensions$1.add(ObjectRendererSystem);const _Renderer=class va extends SystemManager{constructor(T){super(),this.type=RENDERER_TYPE.WEBGL,T=Object.assign({},settings.RENDER_OPTIONS,T),this.gl=null,this.CONTEXT_UID=0,this.globalUniforms=new UniformGroup({projectionMatrix:new Matrix},!0);const E={runners:["init","destroy","contextChange","resolutionChange","reset","update","postrender","prerender","resize"],systems:va.__systems,priority:["_view","textureGenerator","background","_plugin","startup","context","state","texture","buffer","geometry","framebuffer","transformFeedback","mask","scissor","stencil","projection","textureGC","filter","renderTexture","batch","objectRenderer","_multisample"]};this.setup(E),"useContextAlpha"in T&&(deprecation("7.0.0","options.useContextAlpha is deprecated, use options.premultipliedAlpha and options.backgroundAlpha instead"),T.premultipliedAlpha=T.useContextAlpha&&T.useContextAlpha!=="notMultiplied",T.backgroundAlpha=T.useContextAlpha===!1?1:T.backgroundAlpha),this._plugin.rendererPlugins=va.__plugins,this.options=T,this.startup.run(this.options)}static test(T){return T!=null&&T.forceCanvas?!1:isWebGLSupported()}render(T,E){this.objectRenderer.render(T,E)}resize(T,E){this._view.resizeView(T,E)}reset(){return this.runners.reset.emit(),this}clear(){this.renderTexture.bind(),this.renderTexture.clear()}destroy(T=!1){this.runners.destroy.items.reverse(),this.emitWithCustomOptions(this.runners.destroy,{_view:T}),super.destroy()}get plugins(){return this._plugin.plugins}get multisample(){return this._multisample.multisample}get width(){return this._view.element.width}get height(){return this._view.element.height}get resolution(){return this._view.resolution}set resolution(T){this._view.resolution=T,this.runners.resolutionChange.emit(T)}get autoDensity(){return this._view.autoDensity}get view(){return this._view.element}get screen(){return this._view.screen}get lastObjectRendered(){return this.objectRenderer.lastObjectRendered}get renderingToScreen(){return this.objectRenderer.renderingToScreen}get rendererLogId(){return`WebGL ${this.context.webGLVersion}`}get clearBeforeRender(){return deprecation("7.0.0","renderer.clearBeforeRender has been deprecated, please use renderer.background.clearBeforeRender instead."),this.background.clearBeforeRender}get useContextAlpha(){return deprecation("7.0.0","renderer.useContextAlpha has been deprecated, please use renderer.context.premultipliedAlpha instead."),this.context.useContextAlpha}get preserveDrawingBuffer(){return deprecation("7.0.0","renderer.preserveDrawingBuffer has been deprecated, we cannot truly know this unless pixi created the context"),this.context.preserveDrawingBuffer}get backgroundColor(){return deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color}set backgroundColor(T){deprecation("7.0.0","renderer.backgroundColor has been deprecated, use renderer.background.color instead."),this.background.color=T}get backgroundAlpha(){return deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha}set backgroundAlpha(T){deprecation("7.0.0","renderer.backgroundAlpha has been deprecated, use renderer.background.alpha instead."),this.background.alpha=T}get powerPreference(){return deprecation("7.0.0","renderer.powerPreference has been deprecated, we can only know this if pixi creates the context"),this.context.powerPreference}generateTexture(T,E){return this.textureGenerator.generateTexture(T,E)}};_Renderer.extension={type:ExtensionType.Renderer,priority:1},_Renderer.__plugins={},_Renderer.__systems={};let Renderer$1=_Renderer;extensions$1.handleByMap(ExtensionType.RendererPlugin,Renderer$1.__plugins);extensions$1.handleByMap(ExtensionType.RendererSystem,Renderer$1.__systems);extensions$1.add(Renderer$1);class AbstractMultiResource extends Resource{constructor(T,E){const{width:C,height:P}=E||{};super(C,P),this.items=[],this.itemDirtyIds=[];for(let I=0;I<T;I++){const R=new BaseTexture;this.items.push(R),this.itemDirtyIds.push(-2)}this.length=T,this._load=null,this.baseTexture=null}initFromArray(T,E){for(let C=0;C<this.length;C++)T[C]&&(T[C].castToBaseTexture?this.addBaseTextureAt(T[C].castToBaseTexture(),C):T[C]instanceof Resource?this.addResourceAt(T[C],C):this.addResourceAt(autoDetectResource(T[C],E),C))}dispose(){for(let T=0,E=this.length;T<E;T++)this.items[T].destroy();this.items=null,this.itemDirtyIds=null,this._load=null}addResourceAt(T,E){if(!this.items[E])throw new Error(`Index ${E} is out of bounds`);return T.valid&&!this.valid&&this.resize(T.width,T.height),this.items[E].setResource(T),this}bind(T){if(this.baseTexture!==null)throw new Error("Only one base texture per TextureArray is allowed");super.bind(T);for(let E=0;E<this.length;E++)this.items[E].parentTextureArray=T,this.items[E].on("update",T.update,T)}unbind(T){super.unbind(T);for(let E=0;E<this.length;E++)this.items[E].parentTextureArray=null,this.items[E].off("update",T.update,T)}load(){if(this._load)return this._load;const T=this.items.map(E=>E.resource).filter(E=>E).map(E=>E.load());return this._load=Promise.all(T).then(()=>{const{realWidth:E,realHeight:C}=this.items[0];return this.resize(E,C),this.update(),Promise.resolve(this)}),this._load}}class ArrayResource extends AbstractMultiResource{constructor(T,E){const{width:C,height:P}=E||{};let I,R;Array.isArray(T)?(I=T,R=T.length):R=T,super(R,{width:C,height:P}),I&&this.initFromArray(I,E)}addBaseTextureAt(T,E){if(T.resource)this.addResourceAt(T.resource,E);else throw new Error("ArrayResource does not support RenderTexture");return this}bind(T){super.bind(T),T.target=TARGETS.TEXTURE_2D_ARRAY}upload(T,E,C){const{length:P,itemDirtyIds:I,items:R}=this,{gl:F}=T;C.dirtyId<0&&F.texImage3D(F.TEXTURE_2D_ARRAY,0,C.internalFormat,this._width,this._height,P,0,E.format,C.type,null);for(let O=0;O<P;O++){const D=R[O];I[O]<D.dirtyId&&(I[O]=D.dirtyId,D.valid&&F.texSubImage3D(F.TEXTURE_2D_ARRAY,0,0,0,O,D.resource.width,D.resource.height,1,E.format,C.type,D.resource.source))}return!0}}class CanvasResource extends BaseImageResource{constructor(T){super(T)}static test(T){const{OffscreenCanvas:E}=globalThis;return E&&T instanceof E?!0:globalThis.HTMLCanvasElement&&T instanceof HTMLCanvasElement}}const _CubeResource=class hi extends AbstractMultiResource{constructor(T,E){const{width:C,height:P,autoLoad:I,linkBaseTexture:R}=E||{};if(T&&T.length!==hi.SIDES)throw new Error(`Invalid length. Got ${T.length}, expected 6`);super(6,{width:C,height:P});for(let F=0;F<hi.SIDES;F++)this.items[F].target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+F;this.linkBaseTexture=R!==!1,T&&this.initFromArray(T,E),I!==!1&&this.load()}bind(T){super.bind(T),T.target=TARGETS.TEXTURE_CUBE_MAP}addBaseTextureAt(T,E,C){if(C===void 0&&(C=this.linkBaseTexture),!this.items[E])throw new Error(`Index ${E} is out of bounds`);if(!this.linkBaseTexture||T.parentTextureArray||Object.keys(T._glTextures).length>0)if(T.resource)this.addResourceAt(T.resource,E);else throw new Error("CubeResource does not support copying of renderTexture.");else T.target=TARGETS.TEXTURE_CUBE_MAP_POSITIVE_X+E,T.parentTextureArray=this.baseTexture,this.items[E]=T;return T.valid&&!this.valid&&this.resize(T.realWidth,T.realHeight),this.items[E]=T,this}upload(T,E,C){const P=this.itemDirtyIds;for(let I=0;I<hi.SIDES;I++){const R=this.items[I];(P[I]<R.dirtyId||C.dirtyId<E.dirtyId)&&(R.valid&&R.resource?(R.resource.upload(T,R,C),P[I]=R.dirtyId):P[I]<-1&&(T.gl.texImage2D(R.target,0,C.internalFormat,E.realWidth,E.realHeight,0,E.format,C.type,null),P[I]=-1))}return!0}static test(T){return Array.isArray(T)&&T.length===hi.SIDES}};_CubeResource.SIDES=6;let CubeResource=_CubeResource;class ImageBitmapResource extends BaseImageResource{constructor(T,E){E=E||{};let C,P,I;typeof T=="string"?(C=ImageBitmapResource.EMPTY,P=T,I=!0):(C=T,P=null,I=!1),super(C),this.url=P,this.crossOrigin=E.crossOrigin??!0,this.alphaMode=typeof E.alphaMode=="number"?E.alphaMode:null,this.ownsImageBitmap=E.ownsImageBitmap??I,this._load=null,E.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(async(T,E)=>{if(this.url===null){T(this);return}try{const C=await settings.ADAPTER.fetch(this.url,{mode:this.crossOrigin?"cors":"no-cors"});if(this.destroyed)return;const P=await C.blob();if(this.destroyed)return;const I=await createImageBitmap(P,{premultiplyAlpha:this.alphaMode===null||this.alphaMode===ALPHA_MODES.UNPACK?"premultiply":"none"});if(this.destroyed){I.close();return}this.source=I,this.update(),T(this)}catch(C){if(this.destroyed)return;E(C),this.onError.emit(C)}}),this._load)}upload(T,E,C){return this.source instanceof ImageBitmap?(typeof this.alphaMode=="number"&&(E.alphaMode=this.alphaMode),super.upload(T,E,C)):(this.load(),!1)}dispose(){this.ownsImageBitmap&&this.source instanceof ImageBitmap&&this.source.close(),super.dispose(),this._load=null}static test(T){return!!globalThis.createImageBitmap&&typeof ImageBitmap<"u"&&(typeof T=="string"||T instanceof ImageBitmap)}static get EMPTY(){return ImageBitmapResource._EMPTY=ImageBitmapResource._EMPTY??settings.ADAPTER.createCanvas(0,0),ImageBitmapResource._EMPTY}}const _SVGResource=class ss extends BaseImageResource{constructor(T,E){E=E||{},super(settings.ADAPTER.createCanvas()),this._width=0,this._height=0,this.svg=T,this.scale=E.scale||1,this._overrideWidth=E.width,this._overrideHeight=E.height,this._resolve=null,this._crossorigin=E.crossorigin,this._load=null,E.autoLoad!==!1&&this.load()}load(){return this._load?this._load:(this._load=new Promise(T=>{if(this._resolve=()=>{this.update(),T(this)},ss.SVG_XML.test(this.svg.trim())){if(!btoa)throw new Error("Your browser doesn't support base64 conversions.");this.svg=`data:image/svg+xml;base64,${btoa(unescape(encodeURIComponent(this.svg)))}`}this._loadSvg()}),this._load)}_loadSvg(){const T=new Image;BaseImageResource.crossOrigin(T,this.svg,this._crossorigin),T.src=this.svg,T.onerror=E=>{this._resolve&&(T.onerror=null,this.onError.emit(E))},T.onload=()=>{if(!this._resolve)return;const E=T.width,C=T.height;if(!E||!C)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");let P=E*this.scale,I=C*this.scale;(this._overrideWidth||this._overrideHeight)&&(P=this._overrideWidth||this._overrideHeight/C*E,I=this._overrideHeight||this._overrideWidth/E*C),P=Math.round(P),I=Math.round(I);const R=this.source;R.width=P,R.height=I,R._pixiId=`canvas_${uid()}`,R.getContext("2d").drawImage(T,0,0,E,C,0,0,P,I),this._resolve(),this._resolve=null}}static getSize(T){const E=ss.SVG_SIZE.exec(T),C={};return E&&(C[E[1]]=Math.round(parseFloat(E[3])),C[E[5]]=Math.round(parseFloat(E[7]))),C}dispose(){super.dispose(),this._resolve=null,this._crossorigin=null}static test(T,E){return E==="svg"||typeof T=="string"&&T.startsWith("data:image/svg+xml")||typeof T=="string"&&ss.SVG_XML.test(T)}};_SVGResource.SVG_XML=/^(<\?xml[^?]+\?>)?\s*(<!--[^(-->)]*-->)?\s*\<svg/m,_SVGResource.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i;let SVGResource=_SVGResource;const _VideoResource=class ya extends BaseImageResource{constructor(T,E){if(E=E||{},!(T instanceof HTMLVideoElement)){const C=document.createElement("video");E.autoLoad!==!1&&C.setAttribute("preload","auto"),E.playsinline!==!1&&(C.setAttribute("webkit-playsinline",""),C.setAttribute("playsinline","")),E.muted===!0&&(C.setAttribute("muted",""),C.muted=!0),E.loop===!0&&C.setAttribute("loop",""),E.autoPlay!==!1&&C.setAttribute("autoplay",""),typeof T=="string"&&(T=[T]);const P=T[0].src||T[0];BaseImageResource.crossOrigin(C,P,E.crossorigin);for(let I=0;I<T.length;++I){const R=document.createElement("source");let{src:F,mime:O}=T[I];if(F=F||T[I],F.startsWith("data:"))O=F.slice(5,F.indexOf(";"));else if(!F.startsWith("blob:")){const D=F.split("?").shift().toLowerCase(),L=D.slice(D.lastIndexOf(".")+1);O=O||ya.MIME_TYPES[L]||`video/${L}`}R.src=F,O&&(R.type=O),C.appendChild(R)}T=C}super(T),this.noSubImage=!0,this._autoUpdate=!0,this._isConnectedToTicker=!1,this._updateFPS=E.updateFPS||0,this._msToNextUpdate=0,this.autoPlay=E.autoPlay!==!1,this._videoFrameRequestCallback=this._videoFrameRequestCallback.bind(this),this._videoFrameRequestCallbackHandle=null,this._load=null,this._resolve=null,this._reject=null,this._onCanPlay=this._onCanPlay.bind(this),this._onError=this._onError.bind(this),this._onPlayStart=this._onPlayStart.bind(this),this._onPlayStop=this._onPlayStop.bind(this),this._onSeeked=this._onSeeked.bind(this),E.autoLoad!==!1&&this.load()}update(T=0){if(!this.destroyed){if(this._updateFPS){const E=Ticker$1.shared.elapsedMS*this.source.playbackRate;this._msToNextUpdate=Math.floor(this._msToNextUpdate-E)}(!this._updateFPS||this._msToNextUpdate<=0)&&(super.update(),this._msToNextUpdate=this._updateFPS?Math.floor(1e3/this._updateFPS):0)}}_videoFrameRequestCallback(){this.update(),this.destroyed?this._videoFrameRequestCallbackHandle=null:this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback)}load(){if(this._load)return this._load;const T=this.source;return(T.readyState===T.HAVE_ENOUGH_DATA||T.readyState===T.HAVE_FUTURE_DATA)&&T.width&&T.height&&(T.complete=!0),T.addEventListener("play",this._onPlayStart),T.addEventListener("pause",this._onPlayStop),T.addEventListener("seeked",this._onSeeked),this._isSourceReady()?this._onCanPlay():(T.addEventListener("canplay",this._onCanPlay),T.addEventListener("canplaythrough",this._onCanPlay),T.addEventListener("error",this._onError,!0)),this._load=new Promise((E,C)=>{this.valid?E(this):(this._resolve=E,this._reject=C,T.load())}),this._load}_onError(T){this.source.removeEventListener("error",this._onError,!0),this.onError.emit(T),this._reject&&(this._reject(T),this._reject=null,this._resolve=null)}_isSourcePlaying(){const T=this.source;return!T.paused&&!T.ended}_isSourceReady(){return this.source.readyState>2}_onPlayStart(){this.valid||this._onCanPlay(),this._configureAutoUpdate()}_onPlayStop(){this._configureAutoUpdate()}_onSeeked(){this._autoUpdate&&!this._isSourcePlaying()&&(this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0)}_onCanPlay(){const T=this.source;T.removeEventListener("canplay",this._onCanPlay),T.removeEventListener("canplaythrough",this._onCanPlay);const E=this.valid;this._msToNextUpdate=0,this.update(),this._msToNextUpdate=0,!E&&this._resolve&&(this._resolve(this),this._resolve=null,this._reject=null),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&T.play()}dispose(){this._configureAutoUpdate();const T=this.source;T&&(T.removeEventListener("play",this._onPlayStart),T.removeEventListener("pause",this._onPlayStop),T.removeEventListener("seeked",this._onSeeked),T.removeEventListener("canplay",this._onCanPlay),T.removeEventListener("canplaythrough",this._onCanPlay),T.removeEventListener("error",this._onError,!0),T.pause(),T.src="",T.load()),super.dispose()}get autoUpdate(){return this._autoUpdate}set autoUpdate(T){T!==this._autoUpdate&&(this._autoUpdate=T,this._configureAutoUpdate())}get updateFPS(){return this._updateFPS}set updateFPS(T){T!==this._updateFPS&&(this._updateFPS=T,this._configureAutoUpdate())}_configureAutoUpdate(){this._autoUpdate&&this._isSourcePlaying()?!this._updateFPS&&this.source.requestVideoFrameCallback?(this._isConnectedToTicker&&(Ticker$1.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0),this._videoFrameRequestCallbackHandle===null&&(this._videoFrameRequestCallbackHandle=this.source.requestVideoFrameCallback(this._videoFrameRequestCallback))):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker||(Ticker$1.shared.add(this.update,this),this._isConnectedToTicker=!0,this._msToNextUpdate=0)):(this._videoFrameRequestCallbackHandle!==null&&(this.source.cancelVideoFrameCallback(this._videoFrameRequestCallbackHandle),this._videoFrameRequestCallbackHandle=null),this._isConnectedToTicker&&(Ticker$1.shared.remove(this.update,this),this._isConnectedToTicker=!1,this._msToNextUpdate=0))}static test(T,E){return globalThis.HTMLVideoElement&&T instanceof HTMLVideoElement||ya.TYPES.includes(E)}};_VideoResource.TYPES=["mp4","m4v","webm","ogg","ogv","h264","avi","mov"],_VideoResource.MIME_TYPES={ogv:"video/ogg",mov:"video/quicktime",m4v:"video/mp4"};let VideoResource=_VideoResource;INSTALLED.push(ImageBitmapResource,ImageResource,CanvasResource,VideoResource,SVGResource,BufferResource,CubeResource,ArrayResource);class Bounds{constructor(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null,this.updateID=-1}isEmpty(){return this.minX>this.maxX||this.minY>this.maxY}clear(){this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0}getRectangle(T){return this.minX>this.maxX||this.minY>this.maxY?Rectangle.EMPTY:(T=T||new Rectangle(0,0,1,1),T.x=this.minX,T.y=this.minY,T.width=this.maxX-this.minX,T.height=this.maxY-this.minY,T)}addPoint(T){this.minX=Math.min(this.minX,T.x),this.maxX=Math.max(this.maxX,T.x),this.minY=Math.min(this.minY,T.y),this.maxY=Math.max(this.maxY,T.y)}addPointMatrix(T,E){const{a:C,b:P,c:I,d:R,tx:F,ty:O}=T,D=C*E.x+I*E.y+F,L=P*E.x+R*E.y+O;this.minX=Math.min(this.minX,D),this.maxX=Math.max(this.maxX,D),this.minY=Math.min(this.minY,L),this.maxY=Math.max(this.maxY,L)}addQuad(T){let E=this.minX,C=this.minY,P=this.maxX,I=this.maxY,R=T[0],F=T[1];E=R<E?R:E,C=F<C?F:C,P=R>P?R:P,I=F>I?F:I,R=T[2],F=T[3],E=R<E?R:E,C=F<C?F:C,P=R>P?R:P,I=F>I?F:I,R=T[4],F=T[5],E=R<E?R:E,C=F<C?F:C,P=R>P?R:P,I=F>I?F:I,R=T[6],F=T[7],E=R<E?R:E,C=F<C?F:C,P=R>P?R:P,I=F>I?F:I,this.minX=E,this.minY=C,this.maxX=P,this.maxY=I}addFrame(T,E,C,P,I){this.addFrameMatrix(T.worldTransform,E,C,P,I)}addFrameMatrix(T,E,C,P,I){const R=T.a,F=T.b,O=T.c,D=T.d,L=T.tx,B=T.ty;let V=this.minX,U=this.minY,z=this.maxX,W=this.maxY,Z=R*E+O*C+L,X=F*E+D*C+B;V=Z<V?Z:V,U=X<U?X:U,z=Z>z?Z:z,W=X>W?X:W,Z=R*P+O*C+L,X=F*P+D*C+B,V=Z<V?Z:V,U=X<U?X:U,z=Z>z?Z:z,W=X>W?X:W,Z=R*E+O*I+L,X=F*E+D*I+B,V=Z<V?Z:V,U=X<U?X:U,z=Z>z?Z:z,W=X>W?X:W,Z=R*P+O*I+L,X=F*P+D*I+B,V=Z<V?Z:V,U=X<U?X:U,z=Z>z?Z:z,W=X>W?X:W,this.minX=V,this.minY=U,this.maxX=z,this.maxY=W}addVertexData(T,E,C){let P=this.minX,I=this.minY,R=this.maxX,F=this.maxY;for(let O=E;O<C;O+=2){const D=T[O],L=T[O+1];P=D<P?D:P,I=L<I?L:I,R=D>R?D:R,F=L>F?L:F}this.minX=P,this.minY=I,this.maxX=R,this.maxY=F}addVertices(T,E,C,P){this.addVerticesMatrix(T.worldTransform,E,C,P)}addVerticesMatrix(T,E,C,P,I=0,R=I){const F=T.a,O=T.b,D=T.c,L=T.d,B=T.tx,V=T.ty;let U=this.minX,z=this.minY,W=this.maxX,Z=this.maxY;for(let X=C;X<P;X+=2){const K=E[X],Y=E[X+1],Q=F*K+D*Y+B,J=L*Y+O*K+V;U=Math.min(U,Q-I),W=Math.max(W,Q+I),z=Math.min(z,J-R),Z=Math.max(Z,J+R)}this.minX=U,this.minY=z,this.maxX=W,this.maxY=Z}addBounds(T){const E=this.minX,C=this.minY,P=this.maxX,I=this.maxY;this.minX=T.minX<E?T.minX:E,this.minY=T.minY<C?T.minY:C,this.maxX=T.maxX>P?T.maxX:P,this.maxY=T.maxY>I?T.maxY:I}addBoundsMask(T,E){const C=T.minX>E.minX?T.minX:E.minX,P=T.minY>E.minY?T.minY:E.minY,I=T.maxX<E.maxX?T.maxX:E.maxX,R=T.maxY<E.maxY?T.maxY:E.maxY;if(C<=I&&P<=R){const F=this.minX,O=this.minY,D=this.maxX,L=this.maxY;this.minX=C<F?C:F,this.minY=P<O?P:O,this.maxX=I>D?I:D,this.maxY=R>L?R:L}}addBoundsMatrix(T,E){this.addFrameMatrix(E,T.minX,T.minY,T.maxX,T.maxY)}addBoundsArea(T,E){const C=T.minX>E.x?T.minX:E.x,P=T.minY>E.y?T.minY:E.y,I=T.maxX<E.x+E.width?T.maxX:E.x+E.width,R=T.maxY<E.y+E.height?T.maxY:E.y+E.height;if(C<=I&&P<=R){const F=this.minX,O=this.minY,D=this.maxX,L=this.maxY;this.minX=C<F?C:F,this.minY=P<O?P:O,this.maxX=I>D?I:D,this.maxY=R>L?R:L}}pad(T=0,E=T){this.isEmpty()||(this.minX-=T,this.maxX+=T,this.minY-=E,this.maxY+=E)}addFramePad(T,E,C,P,I,R){T-=I,E-=R,C+=I,P+=R,this.minX=this.minX<T?this.minX:T,this.maxX=this.maxX>C?this.maxX:C,this.minY=this.minY<E?this.minY:E,this.maxY=this.maxY>P?this.maxY:P}}class DisplayObject extends EventEmitter{constructor(){super(),this.tempDisplayObjectParent=null,this.transform=new Transform,this.alpha=1,this.visible=!0,this.renderable=!0,this.cullable=!1,this.cullArea=null,this.parent=null,this.worldAlpha=1,this._lastSortedIndex=0,this._zIndex=0,this.filterArea=null,this.filters=null,this._enabledFilters=null,this._bounds=new Bounds,this._localBounds=null,this._boundsID=0,this._boundsRect=null,this._localBoundsRect=null,this._mask=null,this._maskRefCount=0,this._destroyed=!1,this.isSprite=!1,this.isMask=!1}static mixin(T){const E=Object.keys(T);for(let C=0;C<E.length;++C){const P=E[C];Object.defineProperty(DisplayObject.prototype,P,Object.getOwnPropertyDescriptor(T,P))}}get destroyed(){return this._destroyed}_recursivePostUpdateTransform(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)}updateTransform(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha}getBounds(T,E){return T||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._bounds.updateID!==this._boundsID&&(this.calculateBounds(),this._bounds.updateID=this._boundsID),E||(this._boundsRect||(this._boundsRect=new Rectangle),E=this._boundsRect),this._bounds.getRectangle(E)}getLocalBounds(T){T||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),T=this._localBoundsRect),this._localBounds||(this._localBounds=new Bounds);const E=this.transform,C=this.parent;this.parent=null,this._tempDisplayObjectParent.worldAlpha=(C==null?void 0:C.worldAlpha)??1,this.transform=this._tempDisplayObjectParent.transform;const P=this._bounds,I=this._boundsID;this._bounds=this._localBounds;const R=this.getBounds(!1,T);return this.parent=C,this.transform=E,this._bounds=P,this._bounds.updateID+=this._boundsID-I,R}toGlobal(T,E,C=!1){return C||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(T,E)}toLocal(T,E,C,P){return E&&(T=E.toGlobal(T,C,P)),P||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(T,C)}setParent(T){if(!T||!T.addChild)throw new Error("setParent: Argument must be a Container");return T.addChild(this),T}removeFromParent(){var T;(T=this.parent)==null||T.removeChild(this)}setTransform(T=0,E=0,C=1,P=1,I=0,R=0,F=0,O=0,D=0){return this.position.x=T,this.position.y=E,this.scale.x=C||1,this.scale.y=P||1,this.rotation=I,this.skew.x=R,this.skew.y=F,this.pivot.x=O,this.pivot.y=D,this}destroy(T){this.removeFromParent(),this._destroyed=!0,this.transform=null,this.parent=null,this._bounds=null,this.mask=null,this.cullArea=null,this.filters=null,this.filterArea=null,this.hitArea=null,this.eventMode="auto",this.interactiveChildren=!1,this.emit("destroyed"),this.removeAllListeners()}get _tempDisplayObjectParent(){return this.tempDisplayObjectParent===null&&(this.tempDisplayObjectParent=new TemporaryDisplayObject),this.tempDisplayObjectParent}enableTempParent(){const T=this.parent;return this.parent=this._tempDisplayObjectParent,T}disableTempParent(T){this.parent=T}get x(){return this.position.x}set x(T){this.transform.position.x=T}get y(){return this.position.y}set y(T){this.transform.position.y=T}get worldTransform(){return this.transform.worldTransform}get localTransform(){return this.transform.localTransform}get position(){return this.transform.position}set position(T){this.transform.position.copyFrom(T)}get scale(){return this.transform.scale}set scale(T){this.transform.scale.copyFrom(T)}get pivot(){return this.transform.pivot}set pivot(T){this.transform.pivot.copyFrom(T)}get skew(){return this.transform.skew}set skew(T){this.transform.skew.copyFrom(T)}get rotation(){return this.transform.rotation}set rotation(T){this.transform.rotation=T}get angle(){return this.transform.rotation*RAD_TO_DEG}set angle(T){this.transform.rotation=T*DEG_TO_RAD}get zIndex(){return this._zIndex}set zIndex(T){this._zIndex!==T&&(this._zIndex=T,this.parent&&(this.parent.sortDirty=!0))}get worldVisible(){let T=this;do{if(!T.visible)return!1;T=T.parent}while(T);return!0}get mask(){return this._mask}set mask(T){if(this._mask!==T){if(this._mask){const E=this._mask.isMaskData?this._mask.maskObject:this._mask;E&&(E._maskRefCount--,E._maskRefCount===0&&(E.renderable=!0,E.isMask=!1))}if(this._mask=T,this._mask){const E=this._mask.isMaskData?this._mask.maskObject:this._mask;E&&(E._maskRefCount===0&&(E.renderable=!1,E.isMask=!0),E._maskRefCount++)}}}}class TemporaryDisplayObject extends DisplayObject{constructor(){super(...arguments),this.sortDirty=null}}DisplayObject.prototype.displayObjectUpdateTransform=DisplayObject.prototype.updateTransform;const tempMatrix=new Matrix;function sortChildren(A,T){return A.zIndex===T.zIndex?A._lastSortedIndex-T._lastSortedIndex:A.zIndex-T.zIndex}const _Container=class xa extends DisplayObject{constructor(){super(),this.children=[],this.sortableChildren=xa.defaultSortableChildren,this.sortDirty=!1}onChildrenChange(T){}addChild(...T){if(T.length>1)for(let E=0;E<T.length;E++)this.addChild(T[E]);else{const E=T[0];E.parent&&E.parent.removeChild(E),E.parent=this,this.sortDirty=!0,E.transform._parentID=-1,this.children.push(E),this._boundsID++,this.onChildrenChange(this.children.length-1),this.emit("childAdded",E,this,this.children.length-1),E.emit("added",this)}return T[0]}addChildAt(T,E){if(E<0||E>this.children.length)throw new Error(`${T}addChildAt: The index ${E} supplied is out of bounds ${this.children.length}`);return T.parent&&T.parent.removeChild(T),T.parent=this,this.sortDirty=!0,T.transform._parentID=-1,this.children.splice(E,0,T),this._boundsID++,this.onChildrenChange(E),T.emit("added",this),this.emit("childAdded",T,this,E),T}swapChildren(T,E){if(T===E)return;const C=this.getChildIndex(T),P=this.getChildIndex(E);this.children[C]=E,this.children[P]=T,this.onChildrenChange(C<P?C:P)}getChildIndex(T){const E=this.children.indexOf(T);if(E===-1)throw new Error("The supplied DisplayObject must be a child of the caller");return E}setChildIndex(T,E){if(E<0||E>=this.children.length)throw new Error(`The index ${E} supplied is out of bounds ${this.children.length}`);const C=this.getChildIndex(T);removeItems(this.children,C,1),this.children.splice(E,0,T),this.onChildrenChange(E)}getChildAt(T){if(T<0||T>=this.children.length)throw new Error(`getChildAt: Index (${T}) does not exist.`);return this.children[T]}removeChild(...T){if(T.length>1)for(let E=0;E<T.length;E++)this.removeChild(T[E]);else{const E=T[0],C=this.children.indexOf(E);if(C===-1)return null;E.parent=null,E.transform._parentID=-1,removeItems(this.children,C,1),this._boundsID++,this.onChildrenChange(C),E.emit("removed",this),this.emit("childRemoved",E,this,C)}return T[0]}removeChildAt(T){const E=this.getChildAt(T);return E.parent=null,E.transform._parentID=-1,removeItems(this.children,T,1),this._boundsID++,this.onChildrenChange(T),E.emit("removed",this),this.emit("childRemoved",E,this,T),E}removeChildren(T=0,E=this.children.length){const C=T,P=E,I=P-C;let R;if(I>0&&I<=P){R=this.children.splice(C,I);for(let F=0;F<R.length;++F)R[F].parent=null,R[F].transform&&(R[F].transform._parentID=-1);this._boundsID++,this.onChildrenChange(T);for(let F=0;F<R.length;++F)R[F].emit("removed",this),this.emit("childRemoved",R[F],this,F);return R}else if(I===0&&this.children.length===0)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")}sortChildren(){let T=!1;for(let E=0,C=this.children.length;E<C;++E){const P=this.children[E];P._lastSortedIndex=E,!T&&P.zIndex!==0&&(T=!0)}T&&this.children.length>1&&this.children.sort(sortChildren),this.sortDirty=!1}updateTransform(){this.sortableChildren&&this.sortDirty&&this.sortChildren(),this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(let T=0,E=this.children.length;T<E;++T){const C=this.children[T];C.visible&&C.updateTransform()}}calculateBounds(){this._bounds.clear(),this._calculateBounds();for(let T=0;T<this.children.length;T++){const E=this.children[T];if(!(!E.visible||!E.renderable))if(E.calculateBounds(),E._mask){const C=E._mask.isMaskData?E._mask.maskObject:E._mask;C?(C.calculateBounds(),this._bounds.addBoundsMask(E._bounds,C._bounds)):this._bounds.addBounds(E._bounds)}else E.filterArea?this._bounds.addBoundsArea(E._bounds,E.filterArea):this._bounds.addBounds(E._bounds)}this._bounds.updateID=this._boundsID}getLocalBounds(T,E=!1){const C=super.getLocalBounds(T);if(!E)for(let P=0,I=this.children.length;P<I;++P){const R=this.children[P];R.visible&&R.updateTransform()}return C}_calculateBounds(){}_renderWithCulling(T){const E=T.renderTexture.sourceFrame;if(!(E.width>0&&E.height>0))return;let C,P;this.cullArea?(C=this.cullArea,P=this.worldTransform):this._render!==xa.prototype._render&&(C=this.getBounds(!0));const I=T.projection.transform;if(I&&(P?(P=tempMatrix.copyFrom(P),P.prepend(I)):P=I),C&&E.intersects(C,P))this._render(T);else if(this.cullArea)return;for(let R=0,F=this.children.length;R<F;++R){const O=this.children[R],D=O.cullable;O.cullable=D||!this.cullArea,O.render(T),O.cullable=D}}render(T){var E;if(!(!this.visible||this.worldAlpha<=0||!this.renderable))if(this._mask||(E=this.filters)!=null&&E.length)this.renderAdvanced(T);else if(this.cullable)this._renderWithCulling(T);else{this._render(T);for(let C=0,P=this.children.length;C<P;++C)this.children[C].render(T)}}renderAdvanced(T){var I,R,F;const E=this.filters,C=this._mask;if(E){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(let O=0;O<E.length;O++)E[O].enabled&&this._enabledFilters.push(E[O])}const P=E&&((I=this._enabledFilters)==null?void 0:I.length)||C&&(!C.isMaskData||C.enabled&&(C.autoDetect||C.type!==MASK_TYPES.NONE));if(P&&T.batch.flush(),E&&((R=this._enabledFilters)!=null&&R.length)&&T.filter.push(this,this._enabledFilters),C&&T.mask.push(this,this._mask),this.cullable)this._renderWithCulling(T);else{this._render(T);for(let O=0,D=this.children.length;O<D;++O)this.children[O].render(T)}P&&T.batch.flush(),C&&T.mask.pop(this),E&&((F=this._enabledFilters)!=null&&F.length)&&T.filter.pop()}_render(T){}destroy(T){super.destroy(),this.sortDirty=!1;const E=typeof T=="boolean"?T:T==null?void 0:T.children,C=this.removeChildren(0,this.children.length);if(E)for(let P=0;P<C.length;++P)C[P].destroy(T)}get width(){return this.scale.x*this.getLocalBounds().width}set width(T){const E=this.getLocalBounds().width;E!==0?this.scale.x=T/E:this.scale.x=1,this._width=T}get height(){return this.scale.y*this.getLocalBounds().height}set height(T){const E=this.getLocalBounds().height;E!==0?this.scale.y=T/E:this.scale.y=1,this._height=T}};_Container.defaultSortableChildren=!1;let Container=_Container;Container.prototype.containerUpdateTransform=Container.prototype.updateTransform;Object.defineProperties(settings,{SORTABLE_CHILDREN:{get(){return Container.defaultSortableChildren},set(A){deprecation("7.1.0","settings.SORTABLE_CHILDREN is deprecated, use Container.defaultSortableChildren"),Container.defaultSortableChildren=A}}});const tempPoint$1=new Point,indices=new Uint16Array([0,1,2,0,2,3]);class Sprite extends Container{constructor(T){super(),this._anchor=new ObservablePoint(this._onAnchorUpdate,this,T?T.defaultAnchor.x:0,T?T.defaultAnchor.y:0),this._texture=null,this._width=0,this._height=0,this._tintColor=new Color(16777215),this._tintRGB=null,this.tint=16777215,this.blendMode=BLEND_MODES.NORMAL,this._cachedTint=16777215,this.uvs=null,this.texture=T||Texture.EMPTY,this.vertexData=new Float32Array(8),this.vertexTrimmedData=null,this._transformID=-1,this._textureID=-1,this._transformTrimmedID=-1,this._textureTrimmedID=-1,this.indices=indices,this.pluginName="batch",this.isSprite=!0,this._roundPixels=settings.ROUND_PIXELS}_onTextureUpdate(){this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this._width&&(this.scale.x=sign(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=sign(this.scale.y)*this._height/this._texture.orig.height)}_onAnchorUpdate(){this._transformID=-1,this._transformTrimmedID=-1}calculateVertices(){const T=this._texture;if(this._transformID===this.transform._worldID&&this._textureID===T._updateID)return;this._textureID!==T._updateID&&(this.uvs=this._texture._uvs.uvsFloat32),this._transformID=this.transform._worldID,this._textureID=T._updateID;const E=this.transform.worldTransform,C=E.a,P=E.b,I=E.c,R=E.d,F=E.tx,O=E.ty,D=this.vertexData,L=T.trim,B=T.orig,V=this._anchor;let U=0,z=0,W=0,Z=0;if(L?(z=L.x-V._x*B.width,U=z+L.width,Z=L.y-V._y*B.height,W=Z+L.height):(z=-V._x*B.width,U=z+B.width,Z=-V._y*B.height,W=Z+B.height),D[0]=C*z+I*Z+F,D[1]=R*Z+P*z+O,D[2]=C*U+I*Z+F,D[3]=R*Z+P*U+O,D[4]=C*U+I*W+F,D[5]=R*W+P*U+O,D[6]=C*z+I*W+F,D[7]=R*W+P*z+O,this._roundPixels){const X=settings.RESOLUTION;for(let K=0;K<D.length;++K)D[K]=Math.round(D[K]*X)/X}}calculateTrimmedVertices(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;const T=this._texture,E=this.vertexTrimmedData,C=T.orig,P=this._anchor,I=this.transform.worldTransform,R=I.a,F=I.b,O=I.c,D=I.d,L=I.tx,B=I.ty,V=-P._x*C.width,U=V+C.width,z=-P._y*C.height,W=z+C.height;if(E[0]=R*V+O*z+L,E[1]=D*z+F*V+B,E[2]=R*U+O*z+L,E[3]=D*z+F*U+B,E[4]=R*U+O*W+L,E[5]=D*W+F*U+B,E[6]=R*V+O*W+L,E[7]=D*W+F*V+B,this._roundPixels){const Z=settings.RESOLUTION;for(let X=0;X<E.length;++X)E[X]=Math.round(E[X]*Z)/Z}}_render(T){this.calculateVertices(),T.batch.setObjectRenderer(T.plugins[this.pluginName]),T.plugins[this.pluginName].render(this)}_calculateBounds(){const T=this._texture.trim,E=this._texture.orig;!T||T.width===E.width&&T.height===E.height?(this.calculateVertices(),this._bounds.addQuad(this.vertexData)):(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData))}getLocalBounds(T){return this.children.length===0?(this._localBounds||(this._localBounds=new Bounds),this._localBounds.minX=this._texture.orig.width*-this._anchor._x,this._localBounds.minY=this._texture.orig.height*-this._anchor._y,this._localBounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._localBounds.maxY=this._texture.orig.height*(1-this._anchor._y),T||(this._localBoundsRect||(this._localBoundsRect=new Rectangle),T=this._localBoundsRect),this._localBounds.getRectangle(T)):super.getLocalBounds.call(this,T)}containsPoint(T){this.worldTransform.applyInverse(T,tempPoint$1);const E=this._texture.orig.width,C=this._texture.orig.height,P=-E*this.anchor.x;let I=0;return tempPoint$1.x>=P&&tempPoint$1.x<P+E&&(I=-C*this.anchor.y,tempPoint$1.y>=I&&tempPoint$1.y<I+C)}destroy(T){if(super.destroy(T),this._texture.off("update",this._onTextureUpdate,this),this._anchor=null,typeof T=="boolean"?T:T==null?void 0:T.texture){const E=typeof T=="boolean"?T:T==null?void 0:T.baseTexture;this._texture.destroy(!!E)}this._texture=null}static from(T,E){const C=T instanceof Texture?T:Texture.from(T,E);return new Sprite(C)}set roundPixels(T){this._roundPixels!==T&&(this._transformID=-1,this._transformTrimmedID=-1),this._roundPixels=T}get roundPixels(){return this._roundPixels}get width(){return Math.abs(this.scale.x)*this._texture.orig.width}set width(T){const E=sign(this.scale.x)||1;this.scale.x=E*T/this._texture.orig.width,this._width=T}get height(){return Math.abs(this.scale.y)*this._texture.orig.height}set height(T){const E=sign(this.scale.y)||1;this.scale.y=E*T/this._texture.orig.height,this._height=T}get anchor(){return this._anchor}set anchor(T){this._anchor.copyFrom(T)}get tint(){return this._tintColor.value}set tint(T){this._tintColor.setValue(T),this._tintRGB=this._tintColor.toLittleEndianNumber()}get tintValue(){return this._tintColor.toNumber()}get texture(){return this._texture}set texture(T){this._texture!==T&&(this._texture&&this._texture.off("update",this._onTextureUpdate,this),this._texture=T||Texture.EMPTY,this._cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,T&&(T.baseTexture.valid?this._onTextureUpdate():T.once("update",this._onTextureUpdate,this)))}}const _tempMatrix=new Matrix;DisplayObject.prototype._cacheAsBitmap=!1;DisplayObject.prototype._cacheData=null;DisplayObject.prototype._cacheAsBitmapResolution=null;DisplayObject.prototype._cacheAsBitmapMultisample=null;class CacheData{constructor(){this.textureCacheId=null,this.originalRender=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.originalContainsPoint=null,this.sprite=null}}Object.defineProperties(DisplayObject.prototype,{cacheAsBitmapResolution:{get(){return this._cacheAsBitmapResolution},set(A){A!==this._cacheAsBitmapResolution&&(this._cacheAsBitmapResolution=A,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmapMultisample:{get(){return this._cacheAsBitmapMultisample},set(A){A!==this._cacheAsBitmapMultisample&&(this._cacheAsBitmapMultisample=A,this.cacheAsBitmap&&(this.cacheAsBitmap=!1,this.cacheAsBitmap=!0))}},cacheAsBitmap:{get(){return this._cacheAsBitmap},set(A){if(this._cacheAsBitmap===A)return;this._cacheAsBitmap=A;let T;A?(this._cacheData||(this._cacheData=new CacheData),T=this._cacheData,T.originalRender=this.render,T.originalRenderCanvas=this.renderCanvas,T.originalUpdateTransform=this.updateTransform,T.originalCalculateBounds=this.calculateBounds,T.originalGetLocalBounds=this.getLocalBounds,T.originalDestroy=this.destroy,T.originalContainsPoint=this.containsPoint,T.originalMask=this._mask,T.originalFilterArea=this.filterArea,this.render=this._renderCached,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):(T=this._cacheData,T.sprite&&this._destroyCachedDisplayObject(),this.render=T.originalRender,this.renderCanvas=T.originalRenderCanvas,this.calculateBounds=T.originalCalculateBounds,this.getLocalBounds=T.originalGetLocalBounds,this.destroy=T.originalDestroy,this.updateTransform=T.originalUpdateTransform,this.containsPoint=T.originalContainsPoint,this._mask=T.originalMask,this.filterArea=T.originalFilterArea)}}});DisplayObject.prototype._renderCached=function(A){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObject(A),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._render(A))};DisplayObject.prototype._initCachedDisplayObject=function(A){var V,U;if((V=this._cacheData)!=null&&V.sprite)return;const T=this.alpha;this.alpha=1,A.batch.flush();const E=this.getLocalBounds(new Rectangle,!0);if((U=this.filters)!=null&&U.length){const z=this.filters[0].padding;E.pad(z)}const C=this.cacheAsBitmapResolution||A.resolution;E.ceil(C),E.width=Math.max(E.width,1/C),E.height=Math.max(E.height,1/C);const P=A.renderTexture.current,I=A.renderTexture.sourceFrame.clone(),R=A.renderTexture.destinationFrame.clone(),F=A.projection.transform,O=RenderTexture.create({width:E.width,height:E.height,resolution:C,multisample:this.cacheAsBitmapMultisample??A.multisample}),D=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=D,BaseTexture.addToCache(O.baseTexture,D),Texture.addToCache(O,D);const L=this.transform.localTransform.copyTo(_tempMatrix).invert().translate(-E.x,-E.y);this.render=this._cacheData.originalRender,A.render(this,{renderTexture:O,clear:!0,transform:L,skipUpdateTransform:!1}),A.framebuffer.blit(),A.projection.transform=F,A.renderTexture.bind(P,I,R),this.render=this._renderCached,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=T;const B=new Sprite(O);B.transform.worldTransform=this.transform.worldTransform,B.anchor.x=-(E.x/E.width),B.anchor.y=-(E.y/E.height),B.alpha=T,B._bounds=this._bounds,this._cacheData.sprite=B,this.transform._parentID=-1,this.parent?this.updateTransform():(this.enableTempParent(),this.updateTransform(),this.disableTempParent(null)),this.containsPoint=B.containsPoint.bind(B)};DisplayObject.prototype._renderCachedCanvas=function(A){!this.visible||this.worldAlpha<=0||!this.renderable||(this._initCachedDisplayObjectCanvas(A),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderCanvas(A))};DisplayObject.prototype._initCachedDisplayObjectCanvas=function(A){var L;if((L=this._cacheData)!=null&&L.sprite)return;const T=this.getLocalBounds(new Rectangle,!0),E=this.alpha;this.alpha=1;const C=A.canvasContext.activeContext,P=A._projTransform,I=this.cacheAsBitmapResolution||A.resolution;T.ceil(I),T.width=Math.max(T.width,1/I),T.height=Math.max(T.height,1/I);const R=RenderTexture.create({width:T.width,height:T.height,resolution:I}),F=`cacheAsBitmap_${uid()}`;this._cacheData.textureCacheId=F,BaseTexture.addToCache(R.baseTexture,F),Texture.addToCache(R,F);const O=_tempMatrix;this.transform.localTransform.copyTo(O),O.invert(),O.tx-=T.x,O.ty-=T.y,this.renderCanvas=this._cacheData.originalRenderCanvas,A.render(this,{renderTexture:R,clear:!0,transform:O,skipUpdateTransform:!1}),A.canvasContext.activeContext=C,A._projTransform=P,this.renderCanvas=this._renderCachedCanvas,this.updateTransform=this.displayObjectUpdateTransform,this.calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._mask=null,this.filterArea=null,this.alpha=E;const D=new Sprite(R);D.transform.worldTransform=this.transform.worldTransform,D.anchor.x=-(T.x/T.width),D.anchor.y=-(T.y/T.height),D.alpha=E,D._bounds=this._bounds,this._cacheData.sprite=D,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=A._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=D.containsPoint.bind(D)};DisplayObject.prototype._calculateCachedBounds=function(){this._bounds.clear(),this._cacheData.sprite.transform._worldID=this.transform._worldID,this._cacheData.sprite._calculateBounds(),this._bounds.updateID=this._boundsID};DisplayObject.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds(null)};DisplayObject.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,BaseTexture.removeFromCache(this._cacheData.textureCacheId),Texture.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null};DisplayObject.prototype._cacheAsBitmapDestroy=function(A){this.cacheAsBitmap=!1,this.destroy(A)};DisplayObject.prototype.name=null;Container.prototype.getChildByName=function(A,T){for(let E=0,C=this.children.length;E<C;E++)if(this.children[E].name===A)return this.children[E];if(T)for(let E=0,C=this.children.length;E<C;E++){const P=this.children[E];if(!P.getChildByName)continue;const I=P.getChildByName(A,!0);if(I)return I}return null};DisplayObject.prototype.getGlobalPosition=function(A=new Point,T=!1){return this.parent?this.parent.toGlobal(this.position,A,T):(A.x=this.position.x,A.y=this.position.y),A};var fragment$6=`varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform float uAlpha;

void main(void)
{
   gl_FragColor = texture2D(uSampler, vTextureCoord) * uAlpha;
}
`;class AlphaFilter extends Filter$1{constructor(T=1){super(defaultVertex,fragment$6,{uAlpha:1}),this.alpha=T}get alpha(){return this.uniforms.uAlpha}set alpha(T){this.uniforms.uAlpha=T}}const GAUSSIAN_VALUES={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},fragTemplate=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join(`
`);function generateBlurFragSource(A){const T=GAUSSIAN_VALUES[A],E=T.length;let C=fragTemplate,P="";const I="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;";let R;for(let F=0;F<A;F++){let O=I.replace("%index%",F.toString());R=F,F>=E&&(R=A-F-1),O=O.replace("%value%",T[R].toString()),P+=O,P+=`
`}return C=C.replace("%blur%",P),C=C.replace("%size%",A.toString()),C}const vertTemplate=`
    attribute vec2 aVertexPosition;

    uniform mat3 projectionMatrix;

    uniform float strength;

    varying vec2 vBlurTexCoords[%size%];

    uniform vec4 inputSize;
    uniform vec4 outputFrame;

    vec4 filterVertexPosition( void )
    {
        vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

        return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
    }

    vec2 filterTextureCoord( void )
    {
        return aVertexPosition * (outputFrame.zw * inputSize.zw);
    }

    void main(void)
    {
        gl_Position = filterVertexPosition();

        vec2 textureCoord = filterTextureCoord();
        %blur%
    }`;function generateBlurVertSource(A,T){const E=Math.ceil(A/2);let C=vertTemplate,P="",I;T?I="vBlurTexCoords[%index%] =  textureCoord + vec2(%sampleIndex% * strength, 0.0);":I="vBlurTexCoords[%index%] =  textureCoord + vec2(0.0, %sampleIndex% * strength);";for(let R=0;R<A;R++){let F=I.replace("%index%",R.toString());F=F.replace("%sampleIndex%",`${R-(E-1)}.0`),P+=F,P+=`
`}return C=C.replace("%blur%",P),C=C.replace("%size%",A.toString()),C}class BlurFilterPass extends Filter$1{constructor(T,E=8,C=4,P=Filter$1.defaultResolution,I=5){const R=generateBlurVertSource(I,T),F=generateBlurFragSource(I);super(R,F),this.horizontal=T,this.resolution=P,this._quality=0,this.quality=C,this.blur=E}apply(T,E,C,P){if(C?this.horizontal?this.uniforms.strength=1/C.width*(C.width/E.width):this.uniforms.strength=1/C.height*(C.height/E.height):this.horizontal?this.uniforms.strength=1/T.renderer.width*(T.renderer.width/E.width):this.uniforms.strength=1/T.renderer.height*(T.renderer.height/E.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,this.passes===1)T.applyFilter(this,E,C,P);else{const I=T.getFilterTexture(),R=T.renderer;let F=E,O=I;this.state.blend=!1,T.applyFilter(this,F,O,CLEAR_MODES.CLEAR);for(let D=1;D<this.passes-1;D++){T.bindAndClear(F,CLEAR_MODES.BLIT),this.uniforms.uSampler=O;const L=O;O=F,F=L,R.shader.bind(this),R.geometry.draw(5)}this.state.blend=!0,T.applyFilter(this,O,C,P),T.returnFilterTexture(I)}}get blur(){return this.strength}set blur(T){this.padding=1+Math.abs(T)*2,this.strength=T}get quality(){return this._quality}set quality(T){this._quality=T,this.passes=T}}class BlurFilter extends Filter$1{constructor(T=8,E=4,C=Filter$1.defaultResolution,P=5){super(),this._repeatEdgePixels=!1,this.blurXFilter=new BlurFilterPass(!0,T,E,C,P),this.blurYFilter=new BlurFilterPass(!1,T,E,C,P),this.resolution=C,this.quality=E,this.blur=T,this.repeatEdgePixels=!1}apply(T,E,C,P){const I=Math.abs(this.blurXFilter.strength),R=Math.abs(this.blurYFilter.strength);if(I&&R){const F=T.getFilterTexture();this.blurXFilter.apply(T,E,F,CLEAR_MODES.CLEAR),this.blurYFilter.apply(T,F,C,P),T.returnFilterTexture(F)}else R?this.blurYFilter.apply(T,E,C,P):this.blurXFilter.apply(T,E,C,P)}updatePadding(){this._repeatEdgePixels?this.padding=0:this.padding=Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))*2}get blur(){return this.blurXFilter.blur}set blur(T){this.blurXFilter.blur=this.blurYFilter.blur=T,this.updatePadding()}get quality(){return this.blurXFilter.quality}set quality(T){this.blurXFilter.quality=this.blurYFilter.quality=T}get blurX(){return this.blurXFilter.blur}set blurX(T){this.blurXFilter.blur=T,this.updatePadding()}get blurY(){return this.blurYFilter.blur}set blurY(T){this.blurYFilter.blur=T,this.updatePadding()}get blendMode(){return this.blurYFilter.blendMode}set blendMode(T){this.blurYFilter.blendMode=T}get repeatEdgePixels(){return this._repeatEdgePixels}set repeatEdgePixels(T){this._repeatEdgePixels=T,this.updatePadding()}}var fragment$5=`varying vec2 vTextureCoord;
uniform sampler2D uSampler;
uniform float m[20];
uniform float uAlpha;

void main(void)
{
    vec4 c = texture2D(uSampler, vTextureCoord);

    if (uAlpha == 0.0) {
        gl_FragColor = c;
        return;
    }

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (c.a > 0.0) {
      c.rgb /= c.a;
    }

    vec4 result;

    result.r = (m[0] * c.r);
        result.r += (m[1] * c.g);
        result.r += (m[2] * c.b);
        result.r += (m[3] * c.a);
        result.r += m[4];

    result.g = (m[5] * c.r);
        result.g += (m[6] * c.g);
        result.g += (m[7] * c.b);
        result.g += (m[8] * c.a);
        result.g += m[9];

    result.b = (m[10] * c.r);
       result.b += (m[11] * c.g);
       result.b += (m[12] * c.b);
       result.b += (m[13] * c.a);
       result.b += m[14];

    result.a = (m[15] * c.r);
       result.a += (m[16] * c.g);
       result.a += (m[17] * c.b);
       result.a += (m[18] * c.a);
       result.a += m[19];

    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);

    // Premultiply alpha again.
    rgb *= result.a;

    gl_FragColor = vec4(rgb, result.a);
}
`;class ColorMatrixFilter extends Filter$1{constructor(){const T={m:new Float32Array([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0]),uAlpha:1};super(defaultFilterVertex,fragment$5,T),this.alpha=1}_loadMatrix(T,E=!1){let C=T;E&&(this._multiply(C,this.uniforms.m,T),C=this._colorMatrix(C)),this.uniforms.m=C}_multiply(T,E,C){return T[0]=E[0]*C[0]+E[1]*C[5]+E[2]*C[10]+E[3]*C[15],T[1]=E[0]*C[1]+E[1]*C[6]+E[2]*C[11]+E[3]*C[16],T[2]=E[0]*C[2]+E[1]*C[7]+E[2]*C[12]+E[3]*C[17],T[3]=E[0]*C[3]+E[1]*C[8]+E[2]*C[13]+E[3]*C[18],T[4]=E[0]*C[4]+E[1]*C[9]+E[2]*C[14]+E[3]*C[19]+E[4],T[5]=E[5]*C[0]+E[6]*C[5]+E[7]*C[10]+E[8]*C[15],T[6]=E[5]*C[1]+E[6]*C[6]+E[7]*C[11]+E[8]*C[16],T[7]=E[5]*C[2]+E[6]*C[7]+E[7]*C[12]+E[8]*C[17],T[8]=E[5]*C[3]+E[6]*C[8]+E[7]*C[13]+E[8]*C[18],T[9]=E[5]*C[4]+E[6]*C[9]+E[7]*C[14]+E[8]*C[19]+E[9],T[10]=E[10]*C[0]+E[11]*C[5]+E[12]*C[10]+E[13]*C[15],T[11]=E[10]*C[1]+E[11]*C[6]+E[12]*C[11]+E[13]*C[16],T[12]=E[10]*C[2]+E[11]*C[7]+E[12]*C[12]+E[13]*C[17],T[13]=E[10]*C[3]+E[11]*C[8]+E[12]*C[13]+E[13]*C[18],T[14]=E[10]*C[4]+E[11]*C[9]+E[12]*C[14]+E[13]*C[19]+E[14],T[15]=E[15]*C[0]+E[16]*C[5]+E[17]*C[10]+E[18]*C[15],T[16]=E[15]*C[1]+E[16]*C[6]+E[17]*C[11]+E[18]*C[16],T[17]=E[15]*C[2]+E[16]*C[7]+E[17]*C[12]+E[18]*C[17],T[18]=E[15]*C[3]+E[16]*C[8]+E[17]*C[13]+E[18]*C[18],T[19]=E[15]*C[4]+E[16]*C[9]+E[17]*C[14]+E[18]*C[19]+E[19],T}_colorMatrix(T){const E=new Float32Array(T);return E[4]/=255,E[9]/=255,E[14]/=255,E[19]/=255,E}brightness(T,E){const C=[T,0,0,0,0,0,T,0,0,0,0,0,T,0,0,0,0,0,1,0];this._loadMatrix(C,E)}tint(T,E){const[C,P,I]=Color.shared.setValue(T).toArray(),R=[C,0,0,0,0,0,P,0,0,0,0,0,I,0,0,0,0,0,1,0];this._loadMatrix(R,E)}greyscale(T,E){const C=[T,T,T,0,0,T,T,T,0,0,T,T,T,0,0,0,0,0,1,0];this._loadMatrix(C,E)}blackAndWhite(T){const E=[.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0];this._loadMatrix(E,T)}hue(T,E){T=(T||0)/180*Math.PI;const C=Math.cos(T),P=Math.sin(T),I=Math.sqrt,R=1/3,F=I(R),O=C+(1-C)*R,D=R*(1-C)-F*P,L=R*(1-C)+F*P,B=R*(1-C)+F*P,V=C+R*(1-C),U=R*(1-C)-F*P,z=R*(1-C)-F*P,W=R*(1-C)+F*P,Z=C+R*(1-C),X=[O,D,L,0,0,B,V,U,0,0,z,W,Z,0,0,0,0,0,1,0];this._loadMatrix(X,E)}contrast(T,E){const C=(T||0)+1,P=-.5*(C-1),I=[C,0,0,0,P,0,C,0,0,P,0,0,C,0,P,0,0,0,1,0];this._loadMatrix(I,E)}saturate(T=0,E){const C=T*2/3+1,P=(C-1)*-.5,I=[C,P,P,0,0,P,C,P,0,0,P,P,C,0,0,0,0,0,1,0];this._loadMatrix(I,E)}desaturate(){this.saturate(-1)}negative(T){const E=[-1,0,0,1,0,0,-1,0,1,0,0,0,-1,1,0,0,0,0,1,0];this._loadMatrix(E,T)}sepia(T){const E=[.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0];this._loadMatrix(E,T)}technicolor(T){const E=[1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0];this._loadMatrix(E,T)}polaroid(T){const E=[1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0];this._loadMatrix(E,T)}toBGR(T){const E=[0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0];this._loadMatrix(E,T)}kodachrome(T){const E=[1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0];this._loadMatrix(E,T)}browni(T){const E=[.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0];this._loadMatrix(E,T)}vintage(T){const E=[.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0];this._loadMatrix(E,T)}colorTone(T,E,C,P,I){T=T||.2,E=E||.15,C=C||16770432,P=P||3375104;const R=Color.shared,[F,O,D]=R.setValue(C).toArray(),[L,B,V]=R.setValue(P).toArray(),U=[.3,.59,.11,0,0,F,O,D,T,0,L,B,V,E,0,F-L,O-B,D-V,0,0];this._loadMatrix(U,I)}night(T,E){T=T||.1;const C=[T*-2,-T,0,0,0,-T,0,T,0,0,0,T,T*2,0,0,0,0,0,1,0];this._loadMatrix(C,E)}predator(T,E){const C=[11.224130630493164*T,-4.794486999511719*T,-2.8746118545532227*T,0*T,.40342438220977783*T,-3.6330697536468506*T,9.193157196044922*T,-2.951810836791992*T,0*T,-1.316135048866272*T,-3.2184197902679443*T,-4.2375030517578125*T,7.476448059082031*T,0*T,.8044459223747253*T,0,0,0,1,0];this._loadMatrix(C,E)}lsd(T){const E=[2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0];this._loadMatrix(E,T)}reset(){const T=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0];this._loadMatrix(T,!1)}get matrix(){return this.uniforms.m}set matrix(T){this.uniforms.m=T}get alpha(){return this.uniforms.uAlpha}set alpha(T){this.uniforms.uAlpha=T}}ColorMatrixFilter.prototype.grayscale=ColorMatrixFilter.prototype.greyscale;var fragment$4=`varying vec2 vFilterCoord;
varying vec2 vTextureCoord;

uniform vec2 scale;
uniform mat2 rotation;
uniform sampler2D uSampler;
uniform sampler2D mapSampler;

uniform highp vec4 inputSize;
uniform vec4 inputClamp;

void main(void)
{
  vec4 map =  texture2D(mapSampler, vFilterCoord);

  map -= 0.5;
  map.xy = scale * inputSize.zw * (rotation * map.xy);

  gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), inputClamp.xy, inputClamp.zw));
}
`,vertex$3=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;
uniform mat3 filterMatrix;

varying vec2 vTextureCoord;
varying vec2 vFilterCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void )
{
    return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void)
{
	gl_Position = filterVertexPosition();
	vTextureCoord = filterTextureCoord();
	vFilterCoord = ( filterMatrix * vec3( vTextureCoord, 1.0)  ).xy;
}
`;class DisplacementFilter extends Filter$1{constructor(T,E){const C=new Matrix;T.renderable=!1,super(vertex$3,fragment$4,{mapSampler:T._texture,filterMatrix:C,scale:{x:1,y:1},rotation:new Float32Array([1,0,0,1])}),this.maskSprite=T,this.maskMatrix=C,E==null&&(E=20),this.scale=new Point(E,E)}apply(T,E,C,P){this.uniforms.filterMatrix=T.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x,this.uniforms.scale.y=this.scale.y;const I=this.maskSprite.worldTransform,R=Math.sqrt(I.a*I.a+I.b*I.b),F=Math.sqrt(I.c*I.c+I.d*I.d);R!==0&&F!==0&&(this.uniforms.rotation[0]=I.a/R,this.uniforms.rotation[1]=I.b/R,this.uniforms.rotation[2]=I.c/F,this.uniforms.rotation[3]=I.d/F),T.applyFilter(this,E,C,P)}get map(){return this.uniforms.mapSampler}set map(T){this.uniforms.mapSampler=T}}var fragment$3=`varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;
uniform sampler2D uSampler;
uniform highp vec4 inputSize;


/**
 Basic FXAA implementation based on the code on geeks3d.com with the
 modification that the texture2DLod stuff was removed since it's
 unsupported by WebGL.

 --

 From:
 https://github.com/mitsuhiko/webgl-meincraft

 Copyright (c) 2011 by Armin Ronacher.

 Some rights reserved.

 Redistribution and use in source and binary forms, with or without
 modification, are permitted provided that the following conditions are
 met:

 * Redistributions of source code must retain the above copyright
 notice, this list of conditions and the following disclaimer.

 * Redistributions in binary form must reproduce the above
 copyright notice, this list of conditions and the following
 disclaimer in the documentation and/or other materials provided
 with the distribution.

 * The names of the contributors may not be used to endorse or
 promote products derived from this software without specific
 prior written permission.

 THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS
 "AS IS" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT
 LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR
 A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT
 OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,
 SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT
 LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,
 DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY
 THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE
 OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 */

#ifndef FXAA_REDUCE_MIN
#define FXAA_REDUCE_MIN   (1.0/ 128.0)
#endif
#ifndef FXAA_REDUCE_MUL
#define FXAA_REDUCE_MUL   (1.0 / 8.0)
#endif
#ifndef FXAA_SPAN_MAX
#define FXAA_SPAN_MAX     8.0
#endif

//optimized version for mobile, where dependent
//texture reads can be a bottleneck
vec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 inverseVP,
          vec2 v_rgbNW, vec2 v_rgbNE,
          vec2 v_rgbSW, vec2 v_rgbSE,
          vec2 v_rgbM) {
    vec4 color;
    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;
    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;
    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;
    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;
    vec4 texColor = texture2D(tex, v_rgbM);
    vec3 rgbM  = texColor.xyz;
    vec3 luma = vec3(0.299, 0.587, 0.114);
    float lumaNW = dot(rgbNW, luma);
    float lumaNE = dot(rgbNE, luma);
    float lumaSW = dot(rgbSW, luma);
    float lumaSE = dot(rgbSE, luma);
    float lumaM  = dot(rgbM,  luma);
    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));
    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));

    mediump vec2 dir;
    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));
    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));

    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *
                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);

    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);
    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),
              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),
                  dir * rcpDirMin)) * inverseVP;

    vec3 rgbA = 0.5 * (
                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +
                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);
    vec3 rgbB = rgbA * 0.5 + 0.25 * (
                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +
                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);

    float lumaB = dot(rgbB, luma);
    if ((lumaB < lumaMin) || (lumaB > lumaMax))
        color = vec4(rgbA, texColor.a);
    else
        color = vec4(rgbB, texColor.a);
    return color;
}

void main() {

      vec4 color;

      color = fxaa(uSampler, vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);

      gl_FragColor = color;
}
`,vertex$2=`
attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 v_rgbNW;
varying vec2 v_rgbNE;
varying vec2 v_rgbSW;
varying vec2 v_rgbSE;
varying vec2 v_rgbM;

varying vec2 vFragCoord;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void )
{
    vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;

    return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

void texcoords(vec2 fragCoord, vec2 inverseVP,
               out vec2 v_rgbNW, out vec2 v_rgbNE,
               out vec2 v_rgbSW, out vec2 v_rgbSE,
               out vec2 v_rgbM) {
    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;
    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;
    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;
    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;
    v_rgbM = vec2(fragCoord * inverseVP);
}

void main(void) {

   gl_Position = filterVertexPosition();

   vFragCoord = aVertexPosition * outputFrame.zw;

   texcoords(vFragCoord, inputSize.zw, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);
}
`;class FXAAFilter extends Filter$1{constructor(){super(vertex$2,fragment$3)}}var fragment$2=`precision highp float;

varying vec2 vTextureCoord;
varying vec4 vColor;

uniform float uNoise;
uniform float uSeed;
uniform sampler2D uSampler;

float rand(vec2 co)
{
    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);
}

void main()
{
    vec4 color = texture2D(uSampler, vTextureCoord);
    float randomValue = rand(gl_FragCoord.xy * uSeed);
    float diff = (randomValue - 0.5) * uNoise;

    // Un-premultiply alpha before applying the color matrix. See issue #3539.
    if (color.a > 0.0) {
        color.rgb /= color.a;
    }

    color.r += diff;
    color.g += diff;
    color.b += diff;

    // Premultiply alpha again.
    color.rgb *= color.a;

    gl_FragColor = color;
}
`;class NoiseFilter extends Filter$1{constructor(T=.5,E=Math.random()){super(defaultFilterVertex,fragment$2,{uNoise:0,uSeed:0}),this.noise=T,this.seed=E}get noise(){return this.uniforms.uNoise}set noise(T){this.uniforms.uNoise=T}get seed(){return this.uniforms.uSeed}set seed(T){this.uniforms.uSeed=T}}const filters={AlphaFilter,BlurFilter,BlurFilterPass,ColorMatrixFilter,DisplacementFilter,FXAAFilter,NoiseFilter};Object.entries(filters).forEach(([A,T])=>{Object.defineProperty(filters,A,{get(){return deprecation("7.1.0",`filters.${A} has moved to ${A}`),T}})});class EventsTickerClass{constructor(){this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}init(T){this.removeTickerListener(),this.events=T,this.interactionFrequency=10,this._deltaTime=0,this._didMove=!1,this.tickerAdded=!1,this._pauseUpdate=!0}get pauseUpdate(){return this._pauseUpdate}set pauseUpdate(T){this._pauseUpdate=T}addTickerListener(){this.tickerAdded||!this.domElement||(Ticker$1.system.add(this.tickerUpdate,this,UPDATE_PRIORITY.INTERACTION),this.tickerAdded=!0)}removeTickerListener(){this.tickerAdded&&(Ticker$1.system.remove(this.tickerUpdate,this),this.tickerAdded=!1)}pointerMoved(){this._didMove=!0}update(){if(!this.domElement||this._pauseUpdate)return;if(this._didMove){this._didMove=!1;return}const T=this.events.rootPointerEvent;this.events.supportsTouchEvents&&T.pointerType==="touch"||globalThis.document.dispatchEvent(new PointerEvent("pointermove",{clientX:T.clientX,clientY:T.clientY}))}tickerUpdate(T){this._deltaTime+=T,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.update())}}const EventsTicker=new EventsTickerClass;class FederatedEvent{constructor(T){this.bubbles=!0,this.cancelBubble=!0,this.cancelable=!1,this.composed=!1,this.defaultPrevented=!1,this.eventPhase=FederatedEvent.prototype.NONE,this.propagationStopped=!1,this.propagationImmediatelyStopped=!1,this.layer=new Point,this.page=new Point,this.NONE=0,this.CAPTURING_PHASE=1,this.AT_TARGET=2,this.BUBBLING_PHASE=3,this.manager=T}get layerX(){return this.layer.x}get layerY(){return this.layer.y}get pageX(){return this.page.x}get pageY(){return this.page.y}get data(){return this}composedPath(){return this.manager&&(!this.path||this.path[this.path.length-1]!==this.target)&&(this.path=this.target?this.manager.propagationPath(this.target):[]),this.path}initEvent(T,E,C){throw new Error("initEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}initUIEvent(T,E,C,P,I){throw new Error("initUIEvent() is a legacy DOM API. It is not implemented in the Federated Events API.")}preventDefault(){this.nativeEvent instanceof Event&&this.nativeEvent.cancelable&&this.nativeEvent.preventDefault(),this.defaultPrevented=!0}stopImmediatePropagation(){this.propagationImmediatelyStopped=!0}stopPropagation(){this.propagationStopped=!0}}class FederatedMouseEvent extends FederatedEvent{constructor(){super(...arguments),this.client=new Point,this.movement=new Point,this.offset=new Point,this.global=new Point,this.screen=new Point}get clientX(){return this.client.x}get clientY(){return this.client.y}get x(){return this.clientX}get y(){return this.clientY}get movementX(){return this.movement.x}get movementY(){return this.movement.y}get offsetX(){return this.offset.x}get offsetY(){return this.offset.y}get globalX(){return this.global.x}get globalY(){return this.global.y}get screenX(){return this.screen.x}get screenY(){return this.screen.y}getLocalPosition(T,E,C){return T.worldTransform.applyInverse(C||this.global,E)}getModifierState(T){return"getModifierState"in this.nativeEvent&&this.nativeEvent.getModifierState(T)}initMouseEvent(T,E,C,P,I,R,F,O,D,L,B,V,U,z,W){throw new Error("Method not implemented.")}}class FederatedPointerEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.width=0,this.height=0,this.isPrimary=!1}getCoalescedEvents(){return this.type==="pointermove"||this.type==="mousemove"||this.type==="touchmove"?[this]:[]}getPredictedEvents(){throw new Error("getPredictedEvents is not supported!")}}class FederatedWheelEvent extends FederatedMouseEvent{constructor(){super(...arguments),this.DOM_DELTA_PIXEL=0,this.DOM_DELTA_LINE=1,this.DOM_DELTA_PAGE=2}}FederatedWheelEvent.DOM_DELTA_PIXEL=0,FederatedWheelEvent.DOM_DELTA_LINE=1,FederatedWheelEvent.DOM_DELTA_PAGE=2;const PROPAGATION_LIMIT=2048,tempHitLocation=new Point,tempLocalMapping=new Point;class EventBoundary{constructor(T){this.dispatch=new EventEmitter,this.moveOnAll=!1,this.enableGlobalMoveEvents=!0,this.mappingState={trackingData:{}},this.eventPool=new Map,this._allInteractiveElements=[],this._hitElements=[],this._isPointerMoveEvent=!1,this.rootTarget=T,this.hitPruneFn=this.hitPruneFn.bind(this),this.hitTestFn=this.hitTestFn.bind(this),this.mapPointerDown=this.mapPointerDown.bind(this),this.mapPointerMove=this.mapPointerMove.bind(this),this.mapPointerOut=this.mapPointerOut.bind(this),this.mapPointerOver=this.mapPointerOver.bind(this),this.mapPointerUp=this.mapPointerUp.bind(this),this.mapPointerUpOutside=this.mapPointerUpOutside.bind(this),this.mapWheel=this.mapWheel.bind(this),this.mappingTable={},this.addEventMapping("pointerdown",this.mapPointerDown),this.addEventMapping("pointermove",this.mapPointerMove),this.addEventMapping("pointerout",this.mapPointerOut),this.addEventMapping("pointerleave",this.mapPointerOut),this.addEventMapping("pointerover",this.mapPointerOver),this.addEventMapping("pointerup",this.mapPointerUp),this.addEventMapping("pointerupoutside",this.mapPointerUpOutside),this.addEventMapping("wheel",this.mapWheel)}addEventMapping(T,E){this.mappingTable[T]||(this.mappingTable[T]=[]),this.mappingTable[T].push({fn:E,priority:0}),this.mappingTable[T].sort((C,P)=>C.priority-P.priority)}dispatchEvent(T,E){T.propagationStopped=!1,T.propagationImmediatelyStopped=!1,this.propagate(T,E),this.dispatch.emit(E||T.type,T)}mapEvent(T){if(!this.rootTarget)return;const E=this.mappingTable[T.type];if(E)for(let C=0,P=E.length;C<P;C++)E[C].fn(T);else console.warn(`[EventBoundary]: Event mapping not defined for ${T.type}`)}hitTest(T,E){EventsTicker.pauseUpdate=!0;const C=this._isPointerMoveEvent&&this.enableGlobalMoveEvents?"hitTestMoveRecursive":"hitTestRecursive",P=this[C](this.rootTarget,this.rootTarget.eventMode,tempHitLocation.set(T,E),this.hitTestFn,this.hitPruneFn);return P&&P[0]}propagate(T,E){if(!T.target)return;const C=T.composedPath();T.eventPhase=T.CAPTURING_PHASE;for(let P=0,I=C.length-1;P<I;P++)if(T.currentTarget=C[P],this.notifyTarget(T,E),T.propagationStopped||T.propagationImmediatelyStopped)return;if(T.eventPhase=T.AT_TARGET,T.currentTarget=T.target,this.notifyTarget(T,E),!(T.propagationStopped||T.propagationImmediatelyStopped)){T.eventPhase=T.BUBBLING_PHASE;for(let P=C.length-2;P>=0;P--)if(T.currentTarget=C[P],this.notifyTarget(T,E),T.propagationStopped||T.propagationImmediatelyStopped)return}}all(T,E,C=this._allInteractiveElements){if(C.length===0)return;T.eventPhase=T.BUBBLING_PHASE;const P=Array.isArray(E)?E:[E];for(let I=C.length-1;I>=0;I--)P.forEach(R=>{T.currentTarget=C[I],this.notifyTarget(T,R)})}propagationPath(T){const E=[T];for(let C=0;C<PROPAGATION_LIMIT&&T!==this.rootTarget;C++){if(!T.parent)throw new Error("Cannot find propagation path to disconnected target");E.push(T.parent),T=T.parent}return E.reverse(),E}hitTestMoveRecursive(T,E,C,P,I,R=!1){let F=!1;if(this._interactivePrune(T))return null;if((T.eventMode==="dynamic"||E==="dynamic")&&(EventsTicker.pauseUpdate=!1),T.interactiveChildren&&T.children){const L=T.children;for(let B=L.length-1;B>=0;B--){const V=L[B],U=this.hitTestMoveRecursive(V,this._isInteractive(E)?E:V.eventMode,C,P,I,R||I(T,C));if(U){if(U.length>0&&!U[U.length-1].parent)continue;const z=T.isInteractive();(U.length>0||z)&&(z&&this._allInteractiveElements.push(T),U.push(T)),this._hitElements.length===0&&(this._hitElements=U),F=!0}}}const O=this._isInteractive(E),D=T.isInteractive();return O&&D&&this._allInteractiveElements.push(T),R||this._hitElements.length>0?null:F?this._hitElements:O&&!I(T,C)&&P(T,C)?D?[T]:[]:null}hitTestRecursive(T,E,C,P,I){if(this._interactivePrune(T)||I(T,C))return null;if((T.eventMode==="dynamic"||E==="dynamic")&&(EventsTicker.pauseUpdate=!1),T.interactiveChildren&&T.children){const O=T.children;for(let D=O.length-1;D>=0;D--){const L=O[D],B=this.hitTestRecursive(L,this._isInteractive(E)?E:L.eventMode,C,P,I);if(B){if(B.length>0&&!B[B.length-1].parent)continue;const V=T.isInteractive();return(B.length>0||V)&&B.push(T),B}}}const R=this._isInteractive(E),F=T.isInteractive();return R&&P(T,C)?F?[T]:[]:null}_isInteractive(T){return T==="static"||T==="dynamic"}_interactivePrune(T){return!!(!T||T.isMask||!T.visible||!T.renderable||T.eventMode==="none"||T.eventMode==="passive"&&!T.interactiveChildren||T.isMask)}hitPruneFn(T,E){var C;if(T.hitArea&&(T.worldTransform.applyInverse(E,tempLocalMapping),!T.hitArea.contains(tempLocalMapping.x,tempLocalMapping.y)))return!0;if(T._mask){const P=T._mask.isMaskData?T._mask.maskObject:T._mask;if(P&&!((C=P.containsPoint)!=null&&C.call(P,E)))return!0}return!1}hitTestFn(T,E){return T.eventMode==="passive"?!1:T.hitArea?!0:T.containsPoint?T.containsPoint(E):!1}notifyTarget(T,E){var I,R;E=E??T.type;const C=`on${E}`;(R=(I=T.currentTarget)[C])==null||R.call(I,T);const P=T.eventPhase===T.CAPTURING_PHASE||T.eventPhase===T.AT_TARGET?`${E}capture`:E;this.notifyListeners(T,P),T.eventPhase===T.AT_TARGET&&this.notifyListeners(T,E)}mapPointerDown(T){if(!(T instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const E=this.createPointerEvent(T);if(this.dispatchEvent(E,"pointerdown"),E.pointerType==="touch")this.dispatchEvent(E,"touchstart");else if(E.pointerType==="mouse"||E.pointerType==="pen"){const P=E.button===2;this.dispatchEvent(E,P?"rightdown":"mousedown")}const C=this.trackingData(T.pointerId);C.pressTargetsByButton[T.button]=E.composedPath(),this.freeEvent(E)}mapPointerMove(T){var O,D;if(!(T instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}this._allInteractiveElements.length=0,this._hitElements.length=0,this._isPointerMoveEvent=!0;const E=this.createPointerEvent(T);this._isPointerMoveEvent=!1;const C=E.pointerType==="mouse"||E.pointerType==="pen",P=this.trackingData(T.pointerId),I=this.findMountedTarget(P.overTargets);if(((O=P.overTargets)==null?void 0:O.length)>0&&I!==E.target){const L=T.type==="mousemove"?"mouseout":"pointerout",B=this.createPointerEvent(T,L,I);if(this.dispatchEvent(B,"pointerout"),C&&this.dispatchEvent(B,"mouseout"),!E.composedPath().includes(I)){const V=this.createPointerEvent(T,"pointerleave",I);for(V.eventPhase=V.AT_TARGET;V.target&&!E.composedPath().includes(V.target);)V.currentTarget=V.target,this.notifyTarget(V),C&&this.notifyTarget(V,"mouseleave"),V.target=V.target.parent;this.freeEvent(V)}this.freeEvent(B)}if(I!==E.target){const L=T.type==="mousemove"?"mouseover":"pointerover",B=this.clonePointerEvent(E,L);this.dispatchEvent(B,"pointerover"),C&&this.dispatchEvent(B,"mouseover");let V=I==null?void 0:I.parent;for(;V&&V!==this.rootTarget.parent&&V!==E.target;)V=V.parent;if(!V||V===this.rootTarget.parent){const U=this.clonePointerEvent(E,"pointerenter");for(U.eventPhase=U.AT_TARGET;U.target&&U.target!==I&&U.target!==this.rootTarget.parent;)U.currentTarget=U.target,this.notifyTarget(U),C&&this.notifyTarget(U,"mouseenter"),U.target=U.target.parent;this.freeEvent(U)}this.freeEvent(B)}const R=[],F=this.enableGlobalMoveEvents??!0;this.moveOnAll?R.push("pointermove"):this.dispatchEvent(E,"pointermove"),F&&R.push("globalpointermove"),E.pointerType==="touch"&&(this.moveOnAll?R.splice(1,0,"touchmove"):this.dispatchEvent(E,"touchmove"),F&&R.push("globaltouchmove")),C&&(this.moveOnAll?R.splice(1,0,"mousemove"):this.dispatchEvent(E,"mousemove"),F&&R.push("globalmousemove"),this.cursor=(D=E.target)==null?void 0:D.cursor),R.length>0&&this.all(E,R),this._allInteractiveElements.length=0,this._hitElements.length=0,P.overTargets=E.composedPath(),this.freeEvent(E)}mapPointerOver(T){var R;if(!(T instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const E=this.trackingData(T.pointerId),C=this.createPointerEvent(T),P=C.pointerType==="mouse"||C.pointerType==="pen";this.dispatchEvent(C,"pointerover"),P&&this.dispatchEvent(C,"mouseover"),C.pointerType==="mouse"&&(this.cursor=(R=C.target)==null?void 0:R.cursor);const I=this.clonePointerEvent(C,"pointerenter");for(I.eventPhase=I.AT_TARGET;I.target&&I.target!==this.rootTarget.parent;)I.currentTarget=I.target,this.notifyTarget(I),P&&this.notifyTarget(I,"mouseenter"),I.target=I.target.parent;E.overTargets=C.composedPath(),this.freeEvent(C),this.freeEvent(I)}mapPointerOut(T){if(!(T instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const E=this.trackingData(T.pointerId);if(E.overTargets){const C=T.pointerType==="mouse"||T.pointerType==="pen",P=this.findMountedTarget(E.overTargets),I=this.createPointerEvent(T,"pointerout",P);this.dispatchEvent(I),C&&this.dispatchEvent(I,"mouseout");const R=this.createPointerEvent(T,"pointerleave",P);for(R.eventPhase=R.AT_TARGET;R.target&&R.target!==this.rootTarget.parent;)R.currentTarget=R.target,this.notifyTarget(R),C&&this.notifyTarget(R,"mouseleave"),R.target=R.target.parent;E.overTargets=null,this.freeEvent(I),this.freeEvent(R)}this.cursor=null}mapPointerUp(T){if(!(T instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const E=performance.now(),C=this.createPointerEvent(T);if(this.dispatchEvent(C,"pointerup"),C.pointerType==="touch")this.dispatchEvent(C,"touchend");else if(C.pointerType==="mouse"||C.pointerType==="pen"){const F=C.button===2;this.dispatchEvent(C,F?"rightup":"mouseup")}const P=this.trackingData(T.pointerId),I=this.findMountedTarget(P.pressTargetsByButton[T.button]);let R=I;if(I&&!C.composedPath().includes(I)){let F=I;for(;F&&!C.composedPath().includes(F);){if(C.currentTarget=F,this.notifyTarget(C,"pointerupoutside"),C.pointerType==="touch")this.notifyTarget(C,"touchendoutside");else if(C.pointerType==="mouse"||C.pointerType==="pen"){const O=C.button===2;this.notifyTarget(C,O?"rightupoutside":"mouseupoutside")}F=F.parent}delete P.pressTargetsByButton[T.button],R=F}if(R){const F=this.clonePointerEvent(C,"click");F.target=R,F.path=null,P.clicksByButton[T.button]||(P.clicksByButton[T.button]={clickCount:0,target:F.target,timeStamp:E});const O=P.clicksByButton[T.button];if(O.target===F.target&&E-O.timeStamp<200?++O.clickCount:O.clickCount=1,O.target=F.target,O.timeStamp=E,F.detail=O.clickCount,F.pointerType==="mouse"){const D=F.button===2;this.dispatchEvent(F,D?"rightclick":"click")}else F.pointerType==="touch"&&this.dispatchEvent(F,"tap");this.dispatchEvent(F,"pointertap"),this.freeEvent(F)}this.freeEvent(C)}mapPointerUpOutside(T){if(!(T instanceof FederatedPointerEvent)){console.warn("EventBoundary cannot map a non-pointer event as a pointer event");return}const E=this.trackingData(T.pointerId),C=this.findMountedTarget(E.pressTargetsByButton[T.button]),P=this.createPointerEvent(T);if(C){let I=C;for(;I;)P.currentTarget=I,this.notifyTarget(P,"pointerupoutside"),P.pointerType==="touch"?this.notifyTarget(P,"touchendoutside"):(P.pointerType==="mouse"||P.pointerType==="pen")&&this.notifyTarget(P,P.button===2?"rightupoutside":"mouseupoutside"),I=I.parent;delete E.pressTargetsByButton[T.button]}this.freeEvent(P)}mapWheel(T){if(!(T instanceof FederatedWheelEvent)){console.warn("EventBoundary cannot map a non-wheel event as a wheel event");return}const E=this.createWheelEvent(T);this.dispatchEvent(E),this.freeEvent(E)}findMountedTarget(T){if(!T)return null;let E=T[0];for(let C=1;C<T.length&&T[C].parent===E;C++)E=T[C];return E}createPointerEvent(T,E,C){const P=this.allocateEvent(FederatedPointerEvent);return this.copyPointerData(T,P),this.copyMouseData(T,P),this.copyData(T,P),P.nativeEvent=T.nativeEvent,P.originalEvent=T,P.target=C??this.hitTest(P.global.x,P.global.y)??this._hitElements[0],typeof E=="string"&&(P.type=E),P}createWheelEvent(T){const E=this.allocateEvent(FederatedWheelEvent);return this.copyWheelData(T,E),this.copyMouseData(T,E),this.copyData(T,E),E.nativeEvent=T.nativeEvent,E.originalEvent=T,E.target=this.hitTest(E.global.x,E.global.y),E}clonePointerEvent(T,E){const C=this.allocateEvent(FederatedPointerEvent);return C.nativeEvent=T.nativeEvent,C.originalEvent=T.originalEvent,this.copyPointerData(T,C),this.copyMouseData(T,C),this.copyData(T,C),C.target=T.target,C.path=T.composedPath().slice(),C.type=E??C.type,C}copyWheelData(T,E){E.deltaMode=T.deltaMode,E.deltaX=T.deltaX,E.deltaY=T.deltaY,E.deltaZ=T.deltaZ}copyPointerData(T,E){T instanceof FederatedPointerEvent&&E instanceof FederatedPointerEvent&&(E.pointerId=T.pointerId,E.width=T.width,E.height=T.height,E.isPrimary=T.isPrimary,E.pointerType=T.pointerType,E.pressure=T.pressure,E.tangentialPressure=T.tangentialPressure,E.tiltX=T.tiltX,E.tiltY=T.tiltY,E.twist=T.twist)}copyMouseData(T,E){T instanceof FederatedMouseEvent&&E instanceof FederatedMouseEvent&&(E.altKey=T.altKey,E.button=T.button,E.buttons=T.buttons,E.client.copyFrom(T.client),E.ctrlKey=T.ctrlKey,E.metaKey=T.metaKey,E.movement.copyFrom(T.movement),E.screen.copyFrom(T.screen),E.shiftKey=T.shiftKey,E.global.copyFrom(T.global))}copyData(T,E){E.isTrusted=T.isTrusted,E.srcElement=T.srcElement,E.timeStamp=performance.now(),E.type=T.type,E.detail=T.detail,E.view=T.view,E.which=T.which,E.layer.copyFrom(T.layer),E.page.copyFrom(T.page)}trackingData(T){return this.mappingState.trackingData[T]||(this.mappingState.trackingData[T]={pressTargetsByButton:{},clicksByButton:{},overTarget:null}),this.mappingState.trackingData[T]}allocateEvent(T){this.eventPool.has(T)||this.eventPool.set(T,[]);const E=this.eventPool.get(T).pop()||new T(this);return E.eventPhase=E.NONE,E.currentTarget=null,E.path=null,E.target=null,E}freeEvent(T){if(T.manager!==this)throw new Error("It is illegal to free an event not managed by this EventBoundary!");const E=T.constructor;this.eventPool.has(E)||this.eventPool.set(E,[]),this.eventPool.get(E).push(T)}notifyListeners(T,E){const C=T.currentTarget._events[E];if(C&&T.currentTarget.isInteractive())if("fn"in C)C.once&&T.currentTarget.removeListener(E,C.fn,void 0,!0),C.fn.call(C.context,T);else for(let P=0,I=C.length;P<I&&!T.propagationImmediatelyStopped;P++)C[P].once&&T.currentTarget.removeListener(E,C[P].fn,void 0,!0),C[P].fn.call(C[P].context,T)}}const MOUSE_POINTER_ID=1,TOUCH_TO_POINTER={touchstart:"pointerdown",touchend:"pointerup",touchendoutside:"pointerupoutside",touchmove:"pointermove",touchcancel:"pointercancel"},_EventSystem=class ba{constructor(T){this.supportsTouchEvents="ontouchstart"in globalThis,this.supportsPointerEvents=!!globalThis.PointerEvent,this.domElement=null,this.resolution=1,this.renderer=T,this.rootBoundary=new EventBoundary(null),EventsTicker.init(this),this.autoPreventDefault=!0,this.eventsAdded=!1,this.rootPointerEvent=new FederatedPointerEvent(null),this.rootWheelEvent=new FederatedWheelEvent(null),this.cursorStyles={default:"inherit",pointer:"pointer"},this.features=new Proxy({...ba.defaultEventFeatures},{set:(E,C,P)=>(C==="globalMove"&&(this.rootBoundary.enableGlobalMoveEvents=P),E[C]=P,!0)}),this.onPointerDown=this.onPointerDown.bind(this),this.onPointerMove=this.onPointerMove.bind(this),this.onPointerUp=this.onPointerUp.bind(this),this.onPointerOverOut=this.onPointerOverOut.bind(this),this.onWheel=this.onWheel.bind(this)}static get defaultEventMode(){return this._defaultEventMode}init(T){const{view:E,resolution:C}=this.renderer;this.setTargetElement(E),this.resolution=C,ba._defaultEventMode=T.eventMode??"auto",Object.assign(this.features,T.eventFeatures??{}),this.rootBoundary.enableGlobalMoveEvents=this.features.globalMove}resolutionChange(T){this.resolution=T}destroy(){this.setTargetElement(null),this.renderer=null}setCursor(T){T=T||"default";let E=!0;if(globalThis.OffscreenCanvas&&this.domElement instanceof OffscreenCanvas&&(E=!1),this.currentCursor===T)return;this.currentCursor=T;const C=this.cursorStyles[T];if(C)switch(typeof C){case"string":E&&(this.domElement.style.cursor=C);break;case"function":C(T);break;case"object":E&&Object.assign(this.domElement.style,C);break}else E&&typeof T=="string"&&!Object.prototype.hasOwnProperty.call(this.cursorStyles,T)&&(this.domElement.style.cursor=T)}get pointer(){return this.rootPointerEvent}onPointerDown(T){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const E=this.normalizeToPointerData(T);this.autoPreventDefault&&E[0].isNormalized&&(T.cancelable||!("cancelable"in T))&&T.preventDefault();for(let C=0,P=E.length;C<P;C++){const I=E[C],R=this.bootstrapEvent(this.rootPointerEvent,I);this.rootBoundary.mapEvent(R)}this.setCursor(this.rootBoundary.cursor)}onPointerMove(T){if(!this.features.move)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,EventsTicker.pointerMoved();const E=this.normalizeToPointerData(T);for(let C=0,P=E.length;C<P;C++){const I=this.bootstrapEvent(this.rootPointerEvent,E[C]);this.rootBoundary.mapEvent(I)}this.setCursor(this.rootBoundary.cursor)}onPointerUp(T){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;let E=T.target;T.composedPath&&T.composedPath().length>0&&(E=T.composedPath()[0]);const C=E!==this.domElement?"outside":"",P=this.normalizeToPointerData(T);for(let I=0,R=P.length;I<R;I++){const F=this.bootstrapEvent(this.rootPointerEvent,P[I]);F.type+=C,this.rootBoundary.mapEvent(F)}this.setCursor(this.rootBoundary.cursor)}onPointerOverOut(T){if(!this.features.click)return;this.rootBoundary.rootTarget=this.renderer.lastObjectRendered;const E=this.normalizeToPointerData(T);for(let C=0,P=E.length;C<P;C++){const I=this.bootstrapEvent(this.rootPointerEvent,E[C]);this.rootBoundary.mapEvent(I)}this.setCursor(this.rootBoundary.cursor)}onWheel(T){if(!this.features.wheel)return;const E=this.normalizeWheelEvent(T);this.rootBoundary.rootTarget=this.renderer.lastObjectRendered,this.rootBoundary.mapEvent(E)}setTargetElement(T){this.removeEvents(),this.domElement=T,EventsTicker.domElement=T,this.addEvents()}addEvents(){if(this.eventsAdded||!this.domElement)return;EventsTicker.addTickerListener();const T=this.domElement.style;T&&(globalThis.navigator.msPointerEnabled?(T.msContentZooming="none",T.msTouchAction="none"):this.supportsPointerEvents&&(T.touchAction="none")),this.supportsPointerEvents?(globalThis.document.addEventListener("pointermove",this.onPointerMove,!0),this.domElement.addEventListener("pointerdown",this.onPointerDown,!0),this.domElement.addEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.addEventListener("pointerover",this.onPointerOverOut,!0),globalThis.addEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.addEventListener("mousemove",this.onPointerMove,!0),this.domElement.addEventListener("mousedown",this.onPointerDown,!0),this.domElement.addEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.addEventListener("mouseover",this.onPointerOverOut,!0),globalThis.addEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.addEventListener("touchstart",this.onPointerDown,!0),this.domElement.addEventListener("touchend",this.onPointerUp,!0),this.domElement.addEventListener("touchmove",this.onPointerMove,!0))),this.domElement.addEventListener("wheel",this.onWheel,{passive:!0,capture:!0}),this.eventsAdded=!0}removeEvents(){if(!this.eventsAdded||!this.domElement)return;EventsTicker.removeTickerListener();const T=this.domElement.style;globalThis.navigator.msPointerEnabled?(T.msContentZooming="",T.msTouchAction=""):this.supportsPointerEvents&&(T.touchAction=""),this.supportsPointerEvents?(globalThis.document.removeEventListener("pointermove",this.onPointerMove,!0),this.domElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.domElement.removeEventListener("pointerleave",this.onPointerOverOut,!0),this.domElement.removeEventListener("pointerover",this.onPointerOverOut,!0),globalThis.removeEventListener("pointerup",this.onPointerUp,!0)):(globalThis.document.removeEventListener("mousemove",this.onPointerMove,!0),this.domElement.removeEventListener("mousedown",this.onPointerDown,!0),this.domElement.removeEventListener("mouseout",this.onPointerOverOut,!0),this.domElement.removeEventListener("mouseover",this.onPointerOverOut,!0),globalThis.removeEventListener("mouseup",this.onPointerUp,!0),this.supportsTouchEvents&&(this.domElement.removeEventListener("touchstart",this.onPointerDown,!0),this.domElement.removeEventListener("touchend",this.onPointerUp,!0),this.domElement.removeEventListener("touchmove",this.onPointerMove,!0))),this.domElement.removeEventListener("wheel",this.onWheel,!0),this.domElement=null,this.eventsAdded=!1}mapPositionToPoint(T,E,C){const P=this.domElement.isConnected?this.domElement.getBoundingClientRect():{x:0,y:0,width:this.domElement.width,height:this.domElement.height,left:0,top:0},I=1/this.resolution;T.x=(E-P.left)*(this.domElement.width/P.width)*I,T.y=(C-P.top)*(this.domElement.height/P.height)*I}normalizeToPointerData(T){const E=[];if(this.supportsTouchEvents&&T instanceof TouchEvent)for(let C=0,P=T.changedTouches.length;C<P;C++){const I=T.changedTouches[C];typeof I.button>"u"&&(I.button=0),typeof I.buttons>"u"&&(I.buttons=1),typeof I.isPrimary>"u"&&(I.isPrimary=T.touches.length===1&&T.type==="touchstart"),typeof I.width>"u"&&(I.width=I.radiusX||1),typeof I.height>"u"&&(I.height=I.radiusY||1),typeof I.tiltX>"u"&&(I.tiltX=0),typeof I.tiltY>"u"&&(I.tiltY=0),typeof I.pointerType>"u"&&(I.pointerType="touch"),typeof I.pointerId>"u"&&(I.pointerId=I.identifier||0),typeof I.pressure>"u"&&(I.pressure=I.force||.5),typeof I.twist>"u"&&(I.twist=0),typeof I.tangentialPressure>"u"&&(I.tangentialPressure=0),typeof I.layerX>"u"&&(I.layerX=I.offsetX=I.clientX),typeof I.layerY>"u"&&(I.layerY=I.offsetY=I.clientY),I.isNormalized=!0,I.type=T.type,E.push(I)}else if(!globalThis.MouseEvent||T instanceof MouseEvent&&(!this.supportsPointerEvents||!(T instanceof globalThis.PointerEvent))){const C=T;typeof C.isPrimary>"u"&&(C.isPrimary=!0),typeof C.width>"u"&&(C.width=1),typeof C.height>"u"&&(C.height=1),typeof C.tiltX>"u"&&(C.tiltX=0),typeof C.tiltY>"u"&&(C.tiltY=0),typeof C.pointerType>"u"&&(C.pointerType="mouse"),typeof C.pointerId>"u"&&(C.pointerId=MOUSE_POINTER_ID),typeof C.pressure>"u"&&(C.pressure=.5),typeof C.twist>"u"&&(C.twist=0),typeof C.tangentialPressure>"u"&&(C.tangentialPressure=0),C.isNormalized=!0,E.push(C)}else E.push(T);return E}normalizeWheelEvent(T){const E=this.rootWheelEvent;return this.transferMouseData(E,T),E.deltaX=T.deltaX,E.deltaY=T.deltaY,E.deltaZ=T.deltaZ,E.deltaMode=T.deltaMode,this.mapPositionToPoint(E.screen,T.clientX,T.clientY),E.global.copyFrom(E.screen),E.offset.copyFrom(E.screen),E.nativeEvent=T,E.type=T.type,E}bootstrapEvent(T,E){return T.originalEvent=null,T.nativeEvent=E,T.pointerId=E.pointerId,T.width=E.width,T.height=E.height,T.isPrimary=E.isPrimary,T.pointerType=E.pointerType,T.pressure=E.pressure,T.tangentialPressure=E.tangentialPressure,T.tiltX=E.tiltX,T.tiltY=E.tiltY,T.twist=E.twist,this.transferMouseData(T,E),this.mapPositionToPoint(T.screen,E.clientX,E.clientY),T.global.copyFrom(T.screen),T.offset.copyFrom(T.screen),T.isTrusted=E.isTrusted,T.type==="pointerleave"&&(T.type="pointerout"),T.type.startsWith("mouse")&&(T.type=T.type.replace("mouse","pointer")),T.type.startsWith("touch")&&(T.type=TOUCH_TO_POINTER[T.type]||T.type),T}transferMouseData(T,E){T.isTrusted=E.isTrusted,T.srcElement=E.srcElement,T.timeStamp=performance.now(),T.type=E.type,T.altKey=E.altKey,T.button=E.button,T.buttons=E.buttons,T.client.x=E.clientX,T.client.y=E.clientY,T.ctrlKey=E.ctrlKey,T.metaKey=E.metaKey,T.movement.x=E.movementX,T.movement.y=E.movementY,T.page.x=E.pageX,T.page.y=E.pageY,T.relatedTarget=null,T.shiftKey=E.shiftKey}};_EventSystem.extension={name:"events",type:[ExtensionType.RendererSystem,ExtensionType.CanvasRendererSystem]},_EventSystem.defaultEventFeatures={move:!0,globalMove:!0,click:!0,wheel:!0};let EventSystem=_EventSystem;extensions$1.add(EventSystem);function convertEventModeToInteractiveMode(A){return A==="dynamic"||A==="static"}const FederatedDisplayObject={onclick:null,onmousedown:null,onmouseenter:null,onmouseleave:null,onmousemove:null,onglobalmousemove:null,onmouseout:null,onmouseover:null,onmouseup:null,onmouseupoutside:null,onpointercancel:null,onpointerdown:null,onpointerenter:null,onpointerleave:null,onpointermove:null,onglobalpointermove:null,onpointerout:null,onpointerover:null,onpointertap:null,onpointerup:null,onpointerupoutside:null,onrightclick:null,onrightdown:null,onrightup:null,onrightupoutside:null,ontap:null,ontouchcancel:null,ontouchend:null,ontouchendoutside:null,ontouchmove:null,onglobaltouchmove:null,ontouchstart:null,onwheel:null,_internalInteractive:void 0,get interactive(){return this._internalInteractive??convertEventModeToInteractiveMode(EventSystem.defaultEventMode)},set interactive(A){deprecation("7.2.0","Setting interactive is deprecated, use eventMode = 'none'/'passive'/'auto'/'static'/'dynamic' instead."),this._internalInteractive=A,this.eventMode=A?"static":"auto"},_internalEventMode:void 0,get eventMode(){return this._internalEventMode??EventSystem.defaultEventMode},set eventMode(A){this._internalInteractive=convertEventModeToInteractiveMode(A),this._internalEventMode=A},isInteractive(){return this.eventMode==="static"||this.eventMode==="dynamic"},interactiveChildren:!0,hitArea:null,addEventListener(A,T,E){const C=typeof E=="boolean"&&E||typeof E=="object"&&E.capture,P=typeof T=="function"?void 0:T;A=C?`${A}capture`:A,T=typeof T=="function"?T:T.handleEvent,this.on(A,T,P)},removeEventListener(A,T,E){const C=typeof E=="boolean"&&E||typeof E=="object"&&E.capture,P=typeof T=="function"?void 0:T;A=C?`${A}capture`:A,T=typeof T=="function"?T:T.handleEvent,this.off(A,T,P)},dispatchEvent(A){if(!(A instanceof FederatedEvent))throw new Error("DisplayObject cannot propagate events outside of the Federated Events API");return A.defaultPrevented=!1,A.path=null,A.target=this,A.manager.dispatchEvent(A),!A.defaultPrevented}};DisplayObject.mixin(FederatedDisplayObject);const accessibleTarget={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:null,accessibleType:"button",accessiblePointerEvents:"auto",accessibleChildren:!0,renderId:-1};DisplayObject.mixin(accessibleTarget);const KEY_CODE_TAB=9,DIV_TOUCH_SIZE=100,DIV_TOUCH_POS_X=0,DIV_TOUCH_POS_Y=0,DIV_TOUCH_ZINDEX=2,DIV_HOOK_SIZE=1,DIV_HOOK_POS_X=-1e3,DIV_HOOK_POS_Y=-1e3,DIV_HOOK_ZINDEX=2;class AccessibilityManager{constructor(T){this.debug=!1,this._isActive=!1,this._isMobileAccessibility=!1,this.pool=[],this.renderId=0,this.children=[],this.androidUpdateCount=0,this.androidUpdateFrequency=500,this._hookDiv=null,(isMobile.tablet||isMobile.phone)&&this.createTouchHook();const E=document.createElement("div");E.style.width=`${DIV_TOUCH_SIZE}px`,E.style.height=`${DIV_TOUCH_SIZE}px`,E.style.position="absolute",E.style.top=`${DIV_TOUCH_POS_X}px`,E.style.left=`${DIV_TOUCH_POS_Y}px`,E.style.zIndex=DIV_TOUCH_ZINDEX.toString(),this.div=E,this.renderer=T,this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),globalThis.addEventListener("keydown",this._onKeyDown,!1)}get isActive(){return this._isActive}get isMobileAccessibility(){return this._isMobileAccessibility}createTouchHook(){const T=document.createElement("button");T.style.width=`${DIV_HOOK_SIZE}px`,T.style.height=`${DIV_HOOK_SIZE}px`,T.style.position="absolute",T.style.top=`${DIV_HOOK_POS_X}px`,T.style.left=`${DIV_HOOK_POS_Y}px`,T.style.zIndex=DIV_HOOK_ZINDEX.toString(),T.style.backgroundColor="#FF0000",T.title="select to enable accessibility for this content",T.addEventListener("focus",()=>{this._isMobileAccessibility=!0,this.activate(),this.destroyTouchHook()}),document.body.appendChild(T),this._hookDiv=T}destroyTouchHook(){this._hookDiv&&(document.body.removeChild(this._hookDiv),this._hookDiv=null)}activate(){var T;this._isActive||(this._isActive=!0,globalThis.document.addEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),(T=this.renderer.view.parentNode)==null||T.appendChild(this.div))}deactivate(){var T;!this._isActive||this._isMobileAccessibility||(this._isActive=!1,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),(T=this.div.parentNode)==null||T.removeChild(this.div))}updateAccessibleObjects(T){if(!T.visible||!T.accessibleChildren)return;T.accessible&&T.isInteractive()&&(T._accessibleActive||this.addChild(T),T.renderId=this.renderId);const E=T.children;if(E)for(let C=0;C<E.length;C++)this.updateAccessibleObjects(E[C])}update(){const T=performance.now();if(isMobile.android.device&&T<this.androidUpdateCount||(this.androidUpdateCount=T+this.androidUpdateFrequency,!this.renderer.renderingToScreen))return;this.renderer.lastObjectRendered&&this.updateAccessibleObjects(this.renderer.lastObjectRendered);const{x:E,y:C,width:P,height:I}=this.renderer.view.getBoundingClientRect(),{width:R,height:F,resolution:O}=this.renderer,D=P/R*O,L=I/F*O;let B=this.div;B.style.left=`${E}px`,B.style.top=`${C}px`,B.style.width=`${R}px`,B.style.height=`${F}px`;for(let V=0;V<this.children.length;V++){const U=this.children[V];if(U.renderId!==this.renderId)U._accessibleActive=!1,removeItems(this.children,V,1),this.div.removeChild(U._accessibleDiv),this.pool.push(U._accessibleDiv),U._accessibleDiv=null,V--;else{B=U._accessibleDiv;let z=U.hitArea;const W=U.worldTransform;U.hitArea?(B.style.left=`${(W.tx+z.x*W.a)*D}px`,B.style.top=`${(W.ty+z.y*W.d)*L}px`,B.style.width=`${z.width*W.a*D}px`,B.style.height=`${z.height*W.d*L}px`):(z=U.getBounds(),this.capHitArea(z),B.style.left=`${z.x*D}px`,B.style.top=`${z.y*L}px`,B.style.width=`${z.width*D}px`,B.style.height=`${z.height*L}px`,B.title!==U.accessibleTitle&&U.accessibleTitle!==null&&(B.title=U.accessibleTitle),B.getAttribute("aria-label")!==U.accessibleHint&&U.accessibleHint!==null&&B.setAttribute("aria-label",U.accessibleHint)),(U.accessibleTitle!==B.title||U.tabIndex!==B.tabIndex)&&(B.title=U.accessibleTitle,B.tabIndex=U.tabIndex,this.debug&&this.updateDebugHTML(B))}}this.renderId++}updateDebugHTML(T){T.innerHTML=`type: ${T.type}</br> title : ${T.title}</br> tabIndex: ${T.tabIndex}`}capHitArea(T){T.x<0&&(T.width+=T.x,T.x=0),T.y<0&&(T.height+=T.y,T.y=0);const{width:E,height:C}=this.renderer;T.x+T.width>E&&(T.width=E-T.x),T.y+T.height>C&&(T.height=C-T.y)}addChild(T){let E=this.pool.pop();E||(E=document.createElement("button"),E.style.width=`${DIV_TOUCH_SIZE}px`,E.style.height=`${DIV_TOUCH_SIZE}px`,E.style.backgroundColor=this.debug?"rgba(255,255,255,0.5)":"transparent",E.style.position="absolute",E.style.zIndex=DIV_TOUCH_ZINDEX.toString(),E.style.borderStyle="none",navigator.userAgent.toLowerCase().includes("chrome")?E.setAttribute("aria-live","off"):E.setAttribute("aria-live","polite"),navigator.userAgent.match(/rv:.*Gecko\//)?E.setAttribute("aria-relevant","additions"):E.setAttribute("aria-relevant","text"),E.addEventListener("click",this._onClick.bind(this)),E.addEventListener("focus",this._onFocus.bind(this)),E.addEventListener("focusout",this._onFocusOut.bind(this))),E.style.pointerEvents=T.accessiblePointerEvents,E.type=T.accessibleType,T.accessibleTitle&&T.accessibleTitle!==null?E.title=T.accessibleTitle:(!T.accessibleHint||T.accessibleHint===null)&&(E.title=`displayObject ${T.tabIndex}`),T.accessibleHint&&T.accessibleHint!==null&&E.setAttribute("aria-label",T.accessibleHint),this.debug&&this.updateDebugHTML(E),T._accessibleActive=!0,T._accessibleDiv=E,E.displayObject=T,this.children.push(T),this.div.appendChild(T._accessibleDiv),T._accessibleDiv.tabIndex=T.tabIndex}_dispatchEvent(T,E){const{displayObject:C}=T.target,P=this.renderer.events.rootBoundary,I=Object.assign(new FederatedEvent(P),{target:C});P.rootTarget=this.renderer.lastObjectRendered,E.forEach(R=>P.dispatchEvent(I,R))}_onClick(T){this._dispatchEvent(T,["click","pointertap","tap"])}_onFocus(T){T.target.getAttribute("aria-live")||T.target.setAttribute("aria-live","assertive"),this._dispatchEvent(T,["mouseover"])}_onFocusOut(T){T.target.getAttribute("aria-live")||T.target.setAttribute("aria-live","polite"),this._dispatchEvent(T,["mouseout"])}_onKeyDown(T){T.keyCode===KEY_CODE_TAB&&this.activate()}_onMouseMove(T){T.movementX===0&&T.movementY===0||this.deactivate()}destroy(){this.destroyTouchHook(),this.div=null,globalThis.document.removeEventListener("mousemove",this._onMouseMove,!0),globalThis.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null}}AccessibilityManager.extension={name:"accessibility",type:[ExtensionType.RendererPlugin,ExtensionType.CanvasRendererPlugin]};extensions$1.add(AccessibilityManager);const _Application=class Ta{constructor(T){this.stage=new Container,T=Object.assign({forceCanvas:!1},T),this.renderer=autoDetectRenderer(T),Ta._plugins.forEach(E=>{E.init.call(this,T)})}render(){this.renderer.render(this.stage)}get view(){var T;return(T=this.renderer)==null?void 0:T.view}get screen(){var T;return(T=this.renderer)==null?void 0:T.screen}destroy(T,E){const C=Ta._plugins.slice(0);C.reverse(),C.forEach(P=>{P.destroy.call(this)}),this.stage.destroy(E),this.stage=null,this.renderer.destroy(T),this.renderer=null}};_Application._plugins=[];let Application=_Application;extensions$1.handleByList(ExtensionType.Application,Application._plugins);class ResizePlugin{static init(T){Object.defineProperty(this,"resizeTo",{set(E){globalThis.removeEventListener("resize",this.queueResize),this._resizeTo=E,E&&(globalThis.addEventListener("resize",this.queueResize),this.resize())},get(){return this._resizeTo}}),this.queueResize=()=>{this._resizeTo&&(this.cancelResize(),this._resizeId=requestAnimationFrame(()=>this.resize()))},this.cancelResize=()=>{this._resizeId&&(cancelAnimationFrame(this._resizeId),this._resizeId=null)},this.resize=()=>{if(!this._resizeTo)return;this.cancelResize();let E,C;if(this._resizeTo===globalThis.window)E=globalThis.innerWidth,C=globalThis.innerHeight;else{const{clientWidth:P,clientHeight:I}=this._resizeTo;E=P,C=I}this.renderer.resize(E,C),this.render()},this._resizeId=null,this._resizeTo=null,this.resizeTo=T.resizeTo||null}static destroy(){globalThis.removeEventListener("resize",this.queueResize),this.cancelResize(),this.cancelResize=null,this.queueResize=null,this.resizeTo=null,this.resize=null}}ResizePlugin.extension=ExtensionType.Application;extensions$1.add(ResizePlugin);const assetKeyMap={loader:ExtensionType.LoadParser,resolver:ExtensionType.ResolveParser,cache:ExtensionType.CacheParser,detection:ExtensionType.DetectionParser};extensions$1.handle(ExtensionType.Asset,A=>{const T=A.ref;Object.entries(assetKeyMap).filter(([E])=>!!T[E]).forEach(([E,C])=>extensions$1.add(Object.assign(T[E],{extension:T[E].extension??C})))},A=>{const T=A.ref;Object.keys(assetKeyMap).filter(E=>!!T[E]).forEach(E=>extensions$1.remove(T[E]))});class BackgroundLoader{constructor(T,E=!1){this._loader=T,this._assetList=[],this._isLoading=!1,this._maxConcurrent=1,this.verbose=E}add(T){T.forEach(E=>{this._assetList.push(E)}),this.verbose&&console.log("[BackgroundLoader] assets: ",this._assetList),this._isActive&&!this._isLoading&&this._next()}async _next(){if(this._assetList.length&&this._isActive){this._isLoading=!0;const T=[],E=Math.min(this._assetList.length,this._maxConcurrent);for(let C=0;C<E;C++)T.push(this._assetList.pop());await this._loader.load(T),this._isLoading=!1,this._next()}}get active(){return this._isActive}set active(T){this._isActive!==T&&(this._isActive=T,T&&!this._isLoading&&this._next())}}function checkDataUrl(A,T){if(Array.isArray(T)){for(const E of T)if(A.startsWith(`data:${E}`))return!0;return!1}return A.startsWith(`data:${T}`)}function checkExtension(A,T){const E=A.split("?")[0],C=path.extname(E).toLowerCase();return Array.isArray(T)?T.includes(C):C===T}const convertToList=(A,T,E=!1)=>(Array.isArray(A)||(A=[A]),T?A.map(C=>typeof C=="string"||E?T(C):C):A),copySearchParams=(A,T)=>{const E=T.split("?")[1];return E&&(A+=`?${E}`),A};function processX(A,T,E,C,P){const I=T[E];for(let R=0;R<I.length;R++){const F=I[R];E<T.length-1?processX(A.replace(C[E],F),T,E+1,C,P):P.push(A.replace(C[E],F))}}function createStringVariations(A){const T=/\{(.*?)\}/g,E=A.match(T),C=[];if(E){const P=[];E.forEach(I=>{const R=I.substring(1,I.length-1).split(",");P.push(R)}),processX(A,P,0,E,C)}else C.push(A);return C}const isSingleItem=A=>!Array.isArray(A);class CacheClass{constructor(){this._parsers=[],this._cache=new Map,this._cacheMap=new Map}reset(){this._cacheMap.clear(),this._cache.clear()}has(T){return this._cache.has(T)}get(T){const E=this._cache.get(T);return E||console.warn(`[Assets] Asset id ${T} was not found in the Cache`),E}set(T,E){const C=convertToList(T);let P;for(let F=0;F<this.parsers.length;F++){const O=this.parsers[F];if(O.test(E)){P=O.getCacheableAssets(C,E);break}}P||(P={},C.forEach(F=>{P[F]=E}));const I=Object.keys(P),R={cacheKeys:I,keys:C};if(C.forEach(F=>{this._cacheMap.set(F,R)}),I.forEach(F=>{this._cache.has(F)&&this._cache.get(F)!==E&&console.warn("[Cache] already has key:",F),this._cache.set(F,P[F])}),E instanceof Texture){const F=E;C.forEach(O=>{F.baseTexture!==Texture.EMPTY.baseTexture&&BaseTexture.addToCache(F.baseTexture,O),Texture.addToCache(F,O)})}}remove(T){if(!this._cacheMap.has(T)){console.warn(`[Assets] Asset id ${T} was not found in the Cache`);return}const E=this._cacheMap.get(T);E.cacheKeys.forEach(C=>{this._cache.delete(C)}),E.keys.forEach(C=>{this._cacheMap.delete(C)})}get parsers(){return this._parsers}}const Cache=new CacheClass;class Loader{constructor(){this._parsers=[],this._parsersValidated=!1,this.parsers=new Proxy(this._parsers,{set:(T,E,C)=>(this._parsersValidated=!1,T[E]=C,!0)}),this.promiseCache={}}reset(){this._parsersValidated=!1,this.promiseCache={}}_getLoadPromiseAndParser(T,E){const C={promise:null,parser:null};return C.promise=(async()=>{var R,F;let P=null,I=null;if(E.loadParser&&(I=this._parserHash[E.loadParser],I||console.warn(`[Assets] specified load parser "${E.loadParser}" not found while loading ${T}`)),!I){for(let O=0;O<this.parsers.length;O++){const D=this.parsers[O];if(D.load&&((R=D.test)!=null&&R.call(D,T,E,this))){I=D;break}}if(!I)return console.warn(`[Assets] ${T} could not be loaded as we don't know how to parse it, ensure the correct parser has been added`),null}P=await I.load(T,E,this),C.parser=I;for(let O=0;O<this.parsers.length;O++){const D=this.parsers[O];D.parse&&D.parse&&await((F=D.testParse)==null?void 0:F.call(D,P,E,this))&&(P=await D.parse(P,E,this)||P,C.parser=D)}return P})(),C}async load(T,E){this._parsersValidated||this._validateParsers();let C=0;const P={},I=isSingleItem(T),R=convertToList(T,D=>({alias:[D],src:D})),F=R.length,O=R.map(async D=>{const L=path.toAbsolute(D.src);if(!P[D.src])try{this.promiseCache[L]||(this.promiseCache[L]=this._getLoadPromiseAndParser(L,D)),P[D.src]=await this.promiseCache[L].promise,E&&E(++C/F)}catch(B){throw delete this.promiseCache[L],delete P[D.src],new Error(`[Loader.load] Failed to load ${L}.
${B}`)}});return await Promise.all(O),I?P[R[0].src]:P}async unload(T){const E=convertToList(T,C=>({alias:[C],src:C})).map(async C=>{var R,F;const P=path.toAbsolute(C.src),I=this.promiseCache[P];if(I){const O=await I.promise;delete this.promiseCache[P],(F=(R=I.parser)==null?void 0:R.unload)==null||F.call(R,O,C,this)}});await Promise.all(E)}_validateParsers(){this._parsersValidated=!0,this._parserHash=this._parsers.filter(T=>T.name).reduce((T,E)=>(T[E.name]&&console.warn(`[Assets] loadParser name conflict "${E.name}"`),{...T,[E.name]:E}),{})}}var LoaderParserPriority=(A=>(A[A.Low=0]="Low",A[A.Normal=1]="Normal",A[A.High=2]="High",A))(LoaderParserPriority||{});const validJSONExtension=".json",validJSONMIME="application/json",loadJson={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadJson",test(A){return checkDataUrl(A,validJSONMIME)||checkExtension(A,validJSONExtension)},async load(A){return await(await settings.ADAPTER.fetch(A)).json()}};extensions$1.add(loadJson);const validTXTExtension=".txt",validTXTMIME="text/plain",loadTxt={name:"loadTxt",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},test(A){return checkDataUrl(A,validTXTMIME)||checkExtension(A,validTXTExtension)},async load(A){return await(await settings.ADAPTER.fetch(A)).text()}};extensions$1.add(loadTxt);const validWeights=["normal","bold","100","200","300","400","500","600","700","800","900"],validFontExtensions=[".ttf",".otf",".woff",".woff2"],validFontMIMEs=["font/ttf","font/otf","font/woff","font/woff2"],CSS_IDENT_TOKEN_REGEX=/^(--|-?[A-Z_])[0-9A-Z_-]*$/i;function getFontFamilyName(A){const T=path.extname(A),E=path.basename(A,T).replace(/(-|_)/g," ").toLowerCase().split(" ").map(I=>I.charAt(0).toUpperCase()+I.slice(1));let C=E.length>0;for(const I of E)if(!I.match(CSS_IDENT_TOKEN_REGEX)){C=!1;break}let P=E.join(" ");return C||(P=`"${P.replace(/[\\"]/g,"\\$&")}"`),P}const validURICharactersRegex=/^[0-9A-Za-z%:/?#\[\]@!\$&'()\*\+,;=\-._~]*$/;function encodeURIWhenNeeded(A){return validURICharactersRegex.test(A)?A:encodeURI(A)}const loadWebFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Low},name:"loadWebFont",test(A){return checkDataUrl(A,validFontMIMEs)||checkExtension(A,validFontExtensions)},async load(A,T){var C,P,I;const E=settings.ADAPTER.getFontFaceSet();if(E){const R=[],F=((C=T.data)==null?void 0:C.family)??getFontFamilyName(A),O=((I=(P=T.data)==null?void 0:P.weights)==null?void 0:I.filter(L=>validWeights.includes(L)))??["normal"],D=T.data??{};for(let L=0;L<O.length;L++){const B=O[L],V=new FontFace(F,`url(${encodeURIWhenNeeded(A)})`,{...D,weight:B});await V.load(),E.add(V),R.push(V)}return R.length===1?R[0]:R}return console.warn("[loadWebFont] FontFace API is not supported. Skipping loading font"),null},unload(A){(Array.isArray(A)?A:[A]).forEach(T=>settings.ADAPTER.getFontFaceSet().delete(T))}};extensions$1.add(loadWebFont);let UUID=0,MAX_WORKERS;const WHITE_PNG="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAABCAQAAAC1HAwCAAAAC0lEQVR42mP8/x8AAwMCAO+ip1sAAAAASUVORK5CYII=",checkImageBitmapCode={id:"checkImageBitmap",code:`
    async function checkImageBitmap()
    {
        try
        {
            if (typeof createImageBitmap !== 'function') return false;

            const response = await fetch('${WHITE_PNG}');
            const imageBlob =  await response.blob();
            const imageBitmap = await createImageBitmap(imageBlob);

            return imageBitmap.width === 1 && imageBitmap.height === 1;
        }
        catch (e)
        {
            return false;
        }
    }
    checkImageBitmap().then((result) => { self.postMessage(result); });
    `},workerCode={id:"loadImageBitmap",code:`
    async function loadImageBitmap(url)
    {
        const response = await fetch(url);

        if (!response.ok)
        {
            throw new Error(\`[WorkerManager.loadImageBitmap] Failed to fetch \${url}: \`
                + \`\${response.status} \${response.statusText}\`);
        }

        const imageBlob =  await response.blob();
        const imageBitmap = await createImageBitmap(imageBlob);

        return imageBitmap;
    }
    self.onmessage = async (event) =>
    {
        try
        {
            const imageBitmap = await loadImageBitmap(event.data.data[0]);

            self.postMessage({
                data: imageBitmap,
                uuid: event.data.uuid,
                id: event.data.id,
            }, [imageBitmap]);
        }
        catch(e)
        {
            self.postMessage({
                error: e,
                uuid: event.data.uuid,
                id: event.data.id,
            });
        }
    };`};let workerURL;class WorkerManagerClass{constructor(){this._initialized=!1,this._createdWorkers=0,this.workerPool=[],this.queue=[],this.resolveHash={}}isImageBitmapSupported(){return this._isImageBitmapSupported!==void 0?this._isImageBitmapSupported:(this._isImageBitmapSupported=new Promise(T=>{const E=URL.createObjectURL(new Blob([checkImageBitmapCode.code],{type:"application/javascript"})),C=new Worker(E);C.addEventListener("message",P=>{C.terminate(),URL.revokeObjectURL(E),T(P.data)})}),this._isImageBitmapSupported)}loadImageBitmap(T){return this._run("loadImageBitmap",[T])}async _initWorkers(){this._initialized||(this._initialized=!0)}getWorker(){MAX_WORKERS===void 0&&(MAX_WORKERS=navigator.hardwareConcurrency||4);let T=this.workerPool.pop();return!T&&this._createdWorkers<MAX_WORKERS&&(workerURL||(workerURL=URL.createObjectURL(new Blob([workerCode.code],{type:"application/javascript"}))),this._createdWorkers++,T=new Worker(workerURL),T.addEventListener("message",E=>{this.complete(E.data),this.returnWorker(E.target),this.next()})),T}returnWorker(T){this.workerPool.push(T)}complete(T){T.error!==void 0?this.resolveHash[T.uuid].reject(T.error):this.resolveHash[T.uuid].resolve(T.data),this.resolveHash[T.uuid]=null}async _run(T,E){await this._initWorkers();const C=new Promise((P,I)=>{this.queue.push({id:T,arguments:E,resolve:P,reject:I})});return this.next(),C}next(){if(!this.queue.length)return;const T=this.getWorker();if(!T)return;const E=this.queue.pop(),C=E.id;this.resolveHash[UUID]={resolve:E.resolve,reject:E.reject},T.postMessage({data:E.arguments,uuid:UUID++,id:C})}}const WorkerManager=new WorkerManagerClass;function createTexture(A,T,E){A.resource.internal=!0;const C=new Texture(A),P=()=>{delete T.promiseCache[E],Cache.has(E)&&Cache.remove(E)};return C.baseTexture.once("destroyed",()=>{E in T.promiseCache&&(console.warn("[Assets] A BaseTexture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the BaseTexture."),P())}),C.once("destroyed",()=>{A.destroyed||(console.warn("[Assets] A Texture managed by Assets was destroyed instead of unloaded! Use Assets.unload() instead of destroying the Texture."),P())}),C}const validImageExtensions=[".jpeg",".jpg",".png",".webp",".avif"],validImageMIMEs=["image/jpeg","image/png","image/webp","image/avif"];async function loadImageBitmap(A){const T=await settings.ADAPTER.fetch(A);if(!T.ok)throw new Error(`[loadImageBitmap] Failed to fetch ${A}: ${T.status} ${T.statusText}`);const E=await T.blob();return await createImageBitmap(E)}const loadTextures={name:"loadTextures",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{preferWorkers:!0,preferCreateImageBitmap:!0,crossOrigin:"anonymous"},test(A){return checkDataUrl(A,validImageMIMEs)||checkExtension(A,validImageExtensions)},async load(A,T,E){var F;const C=globalThis.createImageBitmap&&this.config.preferCreateImageBitmap;let P;C?this.config.preferWorkers&&await WorkerManager.isImageBitmapSupported()?P=await WorkerManager.loadImageBitmap(A):P=await loadImageBitmap(A):P=await new Promise((O,D)=>{const L=new Image;L.crossOrigin=this.config.crossOrigin,L.src=A,L.complete?O(L):(L.onload=()=>O(L),L.onerror=B=>D(B))});const I={...T.data};I.resolution??(I.resolution=getResolutionOfUrl(A)),C&&((F=I.resourceOptions)==null?void 0:F.ownsImageBitmap)===void 0&&(I.resourceOptions={...I.resourceOptions},I.resourceOptions.ownsImageBitmap=!0);const R=new BaseTexture(P,I);return R.resource.src=A,createTexture(R,E,A)},unload(A){A.destroy(!0)}};extensions$1.add(loadTextures);const validSVGExtension=".svg",validSVGMIME="image/svg+xml",loadSVG={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadSVG",test(A){return checkDataUrl(A,validSVGMIME)||checkExtension(A,validSVGExtension)},async testParse(A){return SVGResource.test(A)},async parse(A,T,E){var I;const C=new SVGResource(A,(I=T==null?void 0:T.data)==null?void 0:I.resourceOptions);await C.load();const P=new BaseTexture(C,{resolution:getResolutionOfUrl(A),...T==null?void 0:T.data});return P.resource.src=T.src,createTexture(P,E,T.src)},async load(A,T){return(await settings.ADAPTER.fetch(A)).text()},unload:loadTextures.unload};extensions$1.add(loadSVG);const validVideoExtensions=[".mp4",".m4v",".webm",".ogv"],validVideoMIMEs=["video/mp4","video/webm","video/ogg"],loadVideo={name:"loadVideo",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},config:{defaultAutoPlay:!0},test(A){return checkDataUrl(A,validVideoMIMEs)||checkExtension(A,validVideoExtensions)},async load(A,T,E){var R;let C;const P=await(await settings.ADAPTER.fetch(A)).blob(),I=URL.createObjectURL(P);try{const F={autoPlay:this.config.defaultAutoPlay,...(R=T==null?void 0:T.data)==null?void 0:R.resourceOptions},O=new VideoResource(I,F);await O.load();const D=new BaseTexture(O,{alphaMode:await detectVideoAlphaMode(),resolution:getResolutionOfUrl(A),...T==null?void 0:T.data});D.resource.src=A,C=createTexture(D,E,A),C.baseTexture.once("destroyed",()=>{URL.revokeObjectURL(I)})}catch(F){throw URL.revokeObjectURL(I),F}return C},unload(A){A.destroy(!0)}};extensions$1.add(loadVideo);class Resolver{constructor(){this._defaultBundleIdentifierOptions={connector:"-",createBundleAssetId:(T,E)=>`${T}${this._bundleIdConnector}${E}`,extractAssetIdFromBundle:(T,E)=>E.replace(`${T}${this._bundleIdConnector}`,"")},this._bundleIdConnector=this._defaultBundleIdentifierOptions.connector,this._createBundleAssetId=this._defaultBundleIdentifierOptions.createBundleAssetId,this._extractAssetIdFromBundle=this._defaultBundleIdentifierOptions.extractAssetIdFromBundle,this._assetMap={},this._preferredOrder=[],this._parsers=[],this._resolverHash={},this._bundles={}}setBundleIdentifier(T){if(this._bundleIdConnector=T.connector??this._bundleIdConnector,this._createBundleAssetId=T.createBundleAssetId??this._createBundleAssetId,this._extractAssetIdFromBundle=T.extractAssetIdFromBundle??this._extractAssetIdFromBundle,this._extractAssetIdFromBundle("foo",this._createBundleAssetId("foo","bar"))!=="bar")throw new Error("[Resolver] GenerateBundleAssetId are not working correctly")}prefer(...T){T.forEach(E=>{this._preferredOrder.push(E),E.priority||(E.priority=Object.keys(E.params))}),this._resolverHash={}}set basePath(T){this._basePath=T}get basePath(){return this._basePath}set rootPath(T){this._rootPath=T}get rootPath(){return this._rootPath}get parsers(){return this._parsers}reset(){this.setBundleIdentifier(this._defaultBundleIdentifierOptions),this._assetMap={},this._preferredOrder=[],this._resolverHash={},this._rootPath=null,this._basePath=null,this._manifest=null,this._bundles={},this._defaultSearchParams=null}setDefaultSearchParams(T){if(typeof T=="string")this._defaultSearchParams=T;else{const E=T;this._defaultSearchParams=Object.keys(E).map(C=>`${encodeURIComponent(C)}=${encodeURIComponent(E[C])}`).join("&")}}getAlias(T){const{alias:E,name:C,src:P,srcs:I}=T;return convertToList(E||C||P||I,R=>typeof R=="string"?R:Array.isArray(R)?R.map(F=>(F==null?void 0:F.src)??(F==null?void 0:F.srcs)??F):R!=null&&R.src||R!=null&&R.srcs?R.src??R.srcs:R,!0)}addManifest(T){this._manifest&&console.warn("[Resolver] Manifest already exists, this will be overwritten"),this._manifest=T,T.bundles.forEach(E=>{this.addBundle(E.name,E.assets)})}addBundle(T,E){const C=[];Array.isArray(E)?E.forEach(P=>{const I=P.src??P.srcs,R=P.alias??P.name;let F;if(typeof R=="string"){const O=this._createBundleAssetId(T,R);C.push(O),F=[R,O]}else{const O=R.map(D=>this._createBundleAssetId(T,D));C.push(...O),F=[...R,...O]}this.add({...P,alias:F,src:I})}):Object.keys(E).forEach(P=>{const I=[P,this._createBundleAssetId(T,P)];if(typeof E[P]=="string")this.add({alias:I,src:E[P]});else if(Array.isArray(E[P]))this.add({alias:I,src:E[P]});else{const R=E[P],F=R.src??R.srcs;this.add({...R,alias:I,src:Array.isArray(F)?F:[F]})}C.push(...I)}),this._bundles[T]=C}add(T,E,C,P,I){const R=[];typeof T=="string"||Array.isArray(T)&&typeof T[0]=="string"?(deprecation("7.2.0",`Assets.add now uses an object instead of individual parameters.
Please use Assets.add({ alias, src, data, format, loadParser }) instead.`),R.push({alias:T,src:E,data:C,format:P,loadParser:I})):Array.isArray(T)?R.push(...T):R.push(T);let F;F=O=>{this.hasKey(O)&&console.warn(`[Resolver] already has key: ${O} overwriting`)},convertToList(R).forEach(O=>{const{src:D,srcs:L}=O;let{data:B,format:V,loadParser:U}=O;const z=convertToList(D||L).map(X=>typeof X=="string"?createStringVariations(X):Array.isArray(X)?X:[X]),W=this.getAlias(O);Array.isArray(W)?W.forEach(F):F(W);const Z=[];z.forEach(X=>{X.forEach(K=>{let Y={};if(typeof K!="object"){Y.src=K;for(let Q=0;Q<this._parsers.length;Q++){const J=this._parsers[Q];if(J.test(K)){Y=J.parse(K);break}}}else B=K.data??B,V=K.format??V,U=K.loadParser??U,Y={...Y,...K};if(!W)throw new Error(`[Resolver] alias is undefined for this asset: ${Y.src}`);Y=this.buildResolvedAsset(Y,{aliases:W,data:B,format:V,loadParser:U}),Z.push(Y)})}),W.forEach(X=>{this._assetMap[X]=Z})})}resolveBundle(T){const E=isSingleItem(T);T=convertToList(T);const C={};return T.forEach(P=>{const I=this._bundles[P];if(I){const R=this.resolve(I),F={};for(const O in R){const D=R[O];F[this._extractAssetIdFromBundle(P,O)]=D}C[P]=F}}),E?C[T[0]]:C}resolveUrl(T){const E=this.resolve(T);if(typeof T!="string"){const C={};for(const P in E)C[P]=E[P].src;return C}return E.src}resolve(T){const E=isSingleItem(T);T=convertToList(T);const C={};return T.forEach(P=>{if(!this._resolverHash[P])if(this._assetMap[P]){let I=this._assetMap[P];const R=I[0],F=this._getPreferredOrder(I);F==null||F.priority.forEach(O=>{F.params[O].forEach(D=>{const L=I.filter(B=>B[O]?B[O]===D:!1);L.length&&(I=L)})}),this._resolverHash[P]=I[0]??R}else this._resolverHash[P]=this.buildResolvedAsset({alias:[P],src:P},{});C[P]=this._resolverHash[P]}),E?C[T[0]]:C}hasKey(T){return!!this._assetMap[T]}hasBundle(T){return!!this._bundles[T]}_getPreferredOrder(T){for(let E=0;E<T.length;E++){const C=T[0],P=this._preferredOrder.find(I=>I.params.format.includes(C.format));if(P)return P}return this._preferredOrder[0]}_appendDefaultSearchParams(T){if(!this._defaultSearchParams)return T;const E=/\?/.test(T)?"&":"?";return`${T}${E}${this._defaultSearchParams}`}buildResolvedAsset(T,E){const{aliases:C,data:P,loadParser:I,format:R}=E;return(this._basePath||this._rootPath)&&(T.src=path.toAbsolute(T.src,this._basePath,this._rootPath)),T.alias=C??T.alias??[T.src],T.src=this._appendDefaultSearchParams(T.src),T.data={...P||{},...T.data},T.loadParser=I??T.loadParser,T.format=R??path.extname(T.src).slice(1),T.srcs=T.src,T.name=T.alias,T}}class AssetsClass{constructor(){this._detections=[],this._initialized=!1,this.resolver=new Resolver,this.loader=new Loader,this.cache=Cache,this._backgroundLoader=new BackgroundLoader(this.loader),this._backgroundLoader.active=!0,this.reset()}async init(T={}){var I,R;if(this._initialized){console.warn("[Assets]AssetManager already initialized, did you load before calling this Assets.init()?");return}if(this._initialized=!0,T.defaultSearchParams&&this.resolver.setDefaultSearchParams(T.defaultSearchParams),T.basePath&&(this.resolver.basePath=T.basePath),T.bundleIdentifier&&this.resolver.setBundleIdentifier(T.bundleIdentifier),T.manifest){let F=T.manifest;typeof F=="string"&&(F=await this.load(F)),this.resolver.addManifest(F)}const E=((I=T.texturePreference)==null?void 0:I.resolution)??1,C=typeof E=="number"?[E]:E,P=await this._detectFormats({preferredFormats:(R=T.texturePreference)==null?void 0:R.format,skipDetections:T.skipDetections,detections:this._detections});this.resolver.prefer({params:{format:P,resolution:C}}),T.preferences&&this.setPreferences(T.preferences)}add(T,E,C,P,I){this.resolver.add(T,E,C,P,I)}async load(T,E){this._initialized||await this.init();const C=isSingleItem(T),P=convertToList(T).map(F=>{if(typeof F!="string"){const O=this.resolver.getAlias(F);return O.some(D=>!this.resolver.hasKey(D))&&this.add(F),Array.isArray(O)?O[0]:O}return this.resolver.hasKey(F)||this.add({alias:F,src:F}),F}),I=this.resolver.resolve(P),R=await this._mapLoadToResolve(I,E);return C?R[P[0]]:R}addBundle(T,E){this.resolver.addBundle(T,E)}async loadBundle(T,E){this._initialized||await this.init();let C=!1;typeof T=="string"&&(C=!0,T=[T]);const P=this.resolver.resolveBundle(T),I={},R=Object.keys(P);let F=0,O=0;const D=()=>{E==null||E(++F/O)},L=R.map(B=>{const V=P[B];return O+=Object.keys(V).length,this._mapLoadToResolve(V,D).then(U=>{I[B]=U})});return await Promise.all(L),C?I[T[0]]:I}async backgroundLoad(T){this._initialized||await this.init(),typeof T=="string"&&(T=[T]);const E=this.resolver.resolve(T);this._backgroundLoader.add(Object.values(E))}async backgroundLoadBundle(T){this._initialized||await this.init(),typeof T=="string"&&(T=[T]);const E=this.resolver.resolveBundle(T);Object.values(E).forEach(C=>{this._backgroundLoader.add(Object.values(C))})}reset(){this.resolver.reset(),this.loader.reset(),this.cache.reset(),this._initialized=!1}get(T){if(typeof T=="string")return Cache.get(T);const E={};for(let C=0;C<T.length;C++)E[C]=Cache.get(T[C]);return E}async _mapLoadToResolve(T,E){const C=Object.values(T),P=Object.keys(T);this._backgroundLoader.active=!1;const I=await this.loader.load(C,E);this._backgroundLoader.active=!0;const R={};return C.forEach((F,O)=>{const D=I[F.src],L=[F.src];F.alias&&L.push(...F.alias),R[P[O]]=D,Cache.set(L,D)}),R}async unload(T){this._initialized||await this.init();const E=convertToList(T).map(P=>typeof P!="string"?P.src:P),C=this.resolver.resolve(E);await this._unloadFromResolved(C)}async unloadBundle(T){this._initialized||await this.init(),T=convertToList(T);const E=this.resolver.resolveBundle(T),C=Object.keys(E).map(P=>this._unloadFromResolved(E[P]));await Promise.all(C)}async _unloadFromResolved(T){const E=Object.values(T);E.forEach(C=>{Cache.remove(C.src)}),await this.loader.unload(E)}async _detectFormats(T){let E=[];T.preferredFormats&&(E=Array.isArray(T.preferredFormats)?T.preferredFormats:[T.preferredFormats]);for(const C of T.detections)T.skipDetections||await C.test()?E=await C.add(E):T.skipDetections||(E=await C.remove(E));return E=E.filter((C,P)=>E.indexOf(C)===P),E}get detections(){return this._detections}get preferWorkers(){return loadTextures.config.preferWorkers}set preferWorkers(T){deprecation("7.2.0","Assets.prefersWorkers is deprecated, use Assets.setPreferences({ preferWorkers: true }) instead."),this.setPreferences({preferWorkers:T})}setPreferences(T){this.loader.parsers.forEach(E=>{E.config&&Object.keys(E.config).filter(C=>C in T).forEach(C=>{E.config[C]=T[C]})})}}const Assets=new AssetsClass;extensions$1.handleByList(ExtensionType.LoadParser,Assets.loader.parsers).handleByList(ExtensionType.ResolveParser,Assets.resolver.parsers).handleByList(ExtensionType.CacheParser,Assets.cache.parsers).handleByList(ExtensionType.DetectionParser,Assets.detections);const cacheTextureArray={extension:ExtensionType.CacheParser,test:A=>Array.isArray(A)&&A.every(T=>T instanceof Texture),getCacheableAssets:(A,T)=>{const E={};return A.forEach(C=>{T.forEach((P,I)=>{E[C+(I===0?"":I+1)]=P})}),E}};extensions$1.add(cacheTextureArray);async function testImageFormat(A){if("Image"in globalThis)return new Promise(T=>{const E=new Image;E.onload=()=>{T(!0)},E.onerror=()=>{T(!1)},E.src=A});if("createImageBitmap"in globalThis&&"fetch"in globalThis){try{const T=await(await fetch(A)).blob();await createImageBitmap(T)}catch{return!1}return!0}return!1}const detectAvif={extension:{type:ExtensionType.DetectionParser,priority:1},test:async()=>testImageFormat("data:image/avif;base64,AAAAIGZ0eXBhdmlmAAAAAGF2aWZtaWYxbWlhZk1BMUIAAADybWV0YQAAAAAAAAAoaGRscgAAAAAAAAAAcGljdAAAAAAAAAAAAAAAAGxpYmF2aWYAAAAADnBpdG0AAAAAAAEAAAAeaWxvYwAAAABEAAABAAEAAAABAAABGgAAAB0AAAAoaWluZgAAAAAAAQAAABppbmZlAgAAAAABAABhdjAxQ29sb3IAAAAAamlwcnAAAABLaXBjbwAAABRpc3BlAAAAAAAAAAIAAAACAAAAEHBpeGkAAAAAAwgICAAAAAxhdjFDgQ0MAAAAABNjb2xybmNseAACAAIAAYAAAAAXaXBtYQAAAAAAAAABAAEEAQKDBAAAACVtZGF0EgAKCBgANogQEAwgMg8f8D///8WfhwB8+ErK42A="),add:async A=>[...A,"avif"],remove:async A=>A.filter(T=>T!=="avif")};extensions$1.add(detectAvif);const detectWebp={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testImageFormat("data:image/webp;base64,UklGRh4AAABXRUJQVlA4TBEAAAAvAAAAAAfQ//73v/+BiOh/AAA="),add:async A=>[...A,"webp"],remove:async A=>A.filter(T=>T!=="webp")};extensions$1.add(detectWebp);const imageFormats=["png","jpg","jpeg"],detectDefaults={extension:{type:ExtensionType.DetectionParser,priority:-1},test:()=>Promise.resolve(!0),add:async A=>[...A,...imageFormats],remove:async A=>A.filter(T=>!imageFormats.includes(T))};extensions$1.add(detectDefaults);const inWorker="WorkerGlobalScope"in globalThis&&globalThis instanceof globalThis.WorkerGlobalScope;function testVideoFormat(A){return inWorker?!1:document.createElement("video").canPlayType(A)!==""}const detectWebm={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/webm"),add:async A=>[...A,"webm"],remove:async A=>A.filter(T=>T!=="webm")};extensions$1.add(detectWebm);const detectMp4={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/mp4"),add:async A=>[...A,"mp4","m4v"],remove:async A=>A.filter(T=>T!=="mp4"&&T!=="m4v")};extensions$1.add(detectMp4);const detectOgv={extension:{type:ExtensionType.DetectionParser,priority:0},test:async()=>testVideoFormat("video/ogg"),add:async A=>[...A,"ogv"],remove:async A=>A.filter(T=>T!=="ogv")};extensions$1.add(detectOgv);const resolveTextureUrl={extension:ExtensionType.ResolveParser,test:loadTextures.test,parse:A=>{var T;return{resolution:parseFloat(((T=settings.RETINA_PREFIX.exec(A))==null?void 0:T[1])??"1"),format:path.extname(A).slice(1),src:A}}};extensions$1.add(resolveTextureUrl);var INTERNAL_FORMATS=(A=>(A[A.COMPRESSED_RGB_S3TC_DXT1_EXT=33776]="COMPRESSED_RGB_S3TC_DXT1_EXT",A[A.COMPRESSED_RGBA_S3TC_DXT1_EXT=33777]="COMPRESSED_RGBA_S3TC_DXT1_EXT",A[A.COMPRESSED_RGBA_S3TC_DXT3_EXT=33778]="COMPRESSED_RGBA_S3TC_DXT3_EXT",A[A.COMPRESSED_RGBA_S3TC_DXT5_EXT=33779]="COMPRESSED_RGBA_S3TC_DXT5_EXT",A[A.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT=35917]="COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT",A[A.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT=35918]="COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT",A[A.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT=35919]="COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT",A[A.COMPRESSED_SRGB_S3TC_DXT1_EXT=35916]="COMPRESSED_SRGB_S3TC_DXT1_EXT",A[A.COMPRESSED_R11_EAC=37488]="COMPRESSED_R11_EAC",A[A.COMPRESSED_SIGNED_R11_EAC=37489]="COMPRESSED_SIGNED_R11_EAC",A[A.COMPRESSED_RG11_EAC=37490]="COMPRESSED_RG11_EAC",A[A.COMPRESSED_SIGNED_RG11_EAC=37491]="COMPRESSED_SIGNED_RG11_EAC",A[A.COMPRESSED_RGB8_ETC2=37492]="COMPRESSED_RGB8_ETC2",A[A.COMPRESSED_RGBA8_ETC2_EAC=37496]="COMPRESSED_RGBA8_ETC2_EAC",A[A.COMPRESSED_SRGB8_ETC2=37493]="COMPRESSED_SRGB8_ETC2",A[A.COMPRESSED_SRGB8_ALPHA8_ETC2_EAC=37497]="COMPRESSED_SRGB8_ALPHA8_ETC2_EAC",A[A.COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2=37494]="COMPRESSED_RGB8_PUNCHTHROUGH_ALPHA1_ETC2",A[A.COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2=37495]="COMPRESSED_SRGB8_PUNCHTHROUGH_ALPHA1_ETC2",A[A.COMPRESSED_RGB_PVRTC_4BPPV1_IMG=35840]="COMPRESSED_RGB_PVRTC_4BPPV1_IMG",A[A.COMPRESSED_RGBA_PVRTC_4BPPV1_IMG=35842]="COMPRESSED_RGBA_PVRTC_4BPPV1_IMG",A[A.COMPRESSED_RGB_PVRTC_2BPPV1_IMG=35841]="COMPRESSED_RGB_PVRTC_2BPPV1_IMG",A[A.COMPRESSED_RGBA_PVRTC_2BPPV1_IMG=35843]="COMPRESSED_RGBA_PVRTC_2BPPV1_IMG",A[A.COMPRESSED_RGB_ETC1_WEBGL=36196]="COMPRESSED_RGB_ETC1_WEBGL",A[A.COMPRESSED_RGB_ATC_WEBGL=35986]="COMPRESSED_RGB_ATC_WEBGL",A[A.COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL=35987]="COMPRESSED_RGBA_ATC_EXPLICIT_ALPHA_WEBGL",A[A.COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL=34798]="COMPRESSED_RGBA_ATC_INTERPOLATED_ALPHA_WEBGL",A[A.COMPRESSED_RGBA_ASTC_4x4_KHR=37808]="COMPRESSED_RGBA_ASTC_4x4_KHR",A))(INTERNAL_FORMATS||{});const INTERNAL_FORMAT_TO_BYTES_PER_PIXEL={33776:.5,33777:.5,33778:1,33779:1,35916:.5,35917:.5,35918:1,35919:1,37488:.5,37489:.5,37490:1,37491:1,37492:.5,37496:1,37493:.5,37497:1,37494:.5,37495:.5,35840:.5,35842:.5,35841:.25,35843:.25,36196:.5,35986:.5,35987:1,34798:1,37808:1};let storedGl,extensions;function getCompressedTextureExtensions(){extensions={s3tc:storedGl.getExtension("WEBGL_compressed_texture_s3tc"),s3tc_sRGB:storedGl.getExtension("WEBGL_compressed_texture_s3tc_srgb"),etc:storedGl.getExtension("WEBGL_compressed_texture_etc"),etc1:storedGl.getExtension("WEBGL_compressed_texture_etc1"),pvrtc:storedGl.getExtension("WEBGL_compressed_texture_pvrtc")||storedGl.getExtension("WEBKIT_WEBGL_compressed_texture_pvrtc"),atc:storedGl.getExtension("WEBGL_compressed_texture_atc"),astc:storedGl.getExtension("WEBGL_compressed_texture_astc")}}const detectCompressedTextures={extension:{type:ExtensionType.DetectionParser,priority:2},test:async()=>{const A=settings.ADAPTER.createCanvas().getContext("webgl");return A?(storedGl=A,!0):(console.warn("WebGL not available for compressed textures."),!1)},add:async A=>{extensions||getCompressedTextureExtensions();const T=[];for(const E in extensions)extensions[E]&&T.push(E);return[...T,...A]},remove:async A=>(extensions||getCompressedTextureExtensions(),A.filter(T=>!(T in extensions)))};extensions$1.add(detectCompressedTextures);class BlobResource extends BufferResource{constructor(T,E={width:1,height:1,autoLoad:!0}){let C,P;typeof T=="string"?(C=T,P=new Uint8Array):(C=null,P=T),super(P,E),this.origin=C,this.buffer=P?new ViewableBuffer(P):null,this._load=null,this.loaded=!1,this.origin!==null&&E.autoLoad!==!1&&this.load(),this.origin===null&&this.buffer&&(this._load=Promise.resolve(this),this.loaded=!0,this.onBlobLoaded(this.buffer.rawBinaryData))}onBlobLoaded(T){}load(){return this._load?this._load:(this._load=fetch(this.origin).then(T=>T.blob()).then(T=>T.arrayBuffer()).then(T=>(this.data=new Uint32Array(T),this.buffer=new ViewableBuffer(T),this.loaded=!0,this.onBlobLoaded(T),this.update(),this)),this._load)}}class CompressedTextureResource extends BlobResource{constructor(T,E){super(T,E),this.format=E.format,this.levels=E.levels||1,this._width=E.width,this._height=E.height,this._extension=CompressedTextureResource._formatToExtension(this.format),(E.levelBuffers||this.buffer)&&(this._levelBuffers=E.levelBuffers||CompressedTextureResource._createLevelBuffers(T instanceof Uint8Array?T:this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height))}upload(T,E,C){const P=T.gl;if(!T.context.extensions[this._extension])throw new Error(`${this._extension} textures are not supported on the current machine`);if(!this._levelBuffers)return!1;P.pixelStorei(P.UNPACK_ALIGNMENT,4);for(let I=0,R=this.levels;I<R;I++){const{levelID:F,levelWidth:O,levelHeight:D,levelBuffer:L}=this._levelBuffers[I];P.compressedTexImage2D(P.TEXTURE_2D,F,this.format,O,D,0,L)}return!0}onBlobLoaded(){this._levelBuffers=CompressedTextureResource._createLevelBuffers(this.buffer.uint8View,this.format,this.levels,4,4,this.width,this.height)}static _formatToExtension(T){if(T>=33776&&T<=33779)return"s3tc";if(T>=37488&&T<=37497)return"etc";if(T>=35840&&T<=35843)return"pvrtc";if(T>=36196)return"etc1";if(T>=35986&&T<=34798)return"atc";throw new Error("Invalid (compressed) texture format given!")}static _createLevelBuffers(T,E,C,P,I,R,F){const O=new Array(C);let D=T.byteOffset,L=R,B=F,V=L+P-1&~(P-1),U=B+I-1&~(I-1),z=V*U*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[E];for(let W=0;W<C;W++)O[W]={levelID:W,levelWidth:C>1?L:V,levelHeight:C>1?B:U,levelBuffer:new Uint8Array(T.buffer,D,z)},D+=z,L=L>>1||1,B=B>>1||1,V=L+P-1&~(P-1),U=B+I-1&~(I-1),z=V*U*INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[E];return O}}const DDS_MAGIC_SIZE=4,DDS_HEADER_SIZE=124,DDS_HEADER_PF_SIZE=32,DDS_HEADER_DX10_SIZE=20,DDS_MAGIC=542327876,DDS_FIELDS={SIZE:1,FLAGS:2,HEIGHT:3,WIDTH:4,MIPMAP_COUNT:7,PIXEL_FORMAT:19},DDS_PF_FIELDS={SIZE:0,FLAGS:1,FOURCC:2,RGB_BITCOUNT:3,R_BIT_MASK:4,G_BIT_MASK:5,B_BIT_MASK:6,A_BIT_MASK:7},DDS_DX10_FIELDS={DXGI_FORMAT:0,RESOURCE_DIMENSION:1,MISC_FLAG:2,ARRAY_SIZE:3,MISC_FLAGS2:4},PF_FLAGS=1,DDPF_ALPHA=2,DDPF_FOURCC=4,DDPF_RGB=64,DDPF_YUV=512,DDPF_LUMINANCE=131072,FOURCC_DXT1=827611204,FOURCC_DXT3=861165636,FOURCC_DXT5=894720068,FOURCC_DX10=808540228,DDS_RESOURCE_MISC_TEXTURECUBE=4,FOURCC_TO_FORMAT={[FOURCC_DXT1]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,[FOURCC_DXT3]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,[FOURCC_DXT5]:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT},DXGI_TO_FORMAT={70:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,71:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT1_EXT,73:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,74:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT3_EXT,76:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,77:INTERNAL_FORMATS.COMPRESSED_RGBA_S3TC_DXT5_EXT,72:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT1_EXT,75:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT3_EXT,78:INTERNAL_FORMATS.COMPRESSED_SRGB_ALPHA_S3TC_DXT5_EXT};function parseDDS(A){const T=new Uint32Array(A);if(T[0]!==DDS_MAGIC)throw new Error("Invalid DDS file magic word");const E=new Uint32Array(A,0,DDS_HEADER_SIZE/Uint32Array.BYTES_PER_ELEMENT),C=E[DDS_FIELDS.HEIGHT],P=E[DDS_FIELDS.WIDTH],I=E[DDS_FIELDS.MIPMAP_COUNT],R=new Uint32Array(A,DDS_FIELDS.PIXEL_FORMAT*Uint32Array.BYTES_PER_ELEMENT,DDS_HEADER_PF_SIZE/Uint32Array.BYTES_PER_ELEMENT),F=R[PF_FLAGS];if(F&DDPF_FOURCC){const O=R[DDS_PF_FIELDS.FOURCC];if(O!==FOURCC_DX10){const K=FOURCC_TO_FORMAT[O],Y=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,Q=new Uint8Array(A,Y);return[new CompressedTextureResource(Q,{format:K,width:P,height:C,levels:I})]}const D=DDS_MAGIC_SIZE+DDS_HEADER_SIZE,L=new Uint32Array(T.buffer,D,DDS_HEADER_DX10_SIZE/Uint32Array.BYTES_PER_ELEMENT),B=L[DDS_DX10_FIELDS.DXGI_FORMAT],V=L[DDS_DX10_FIELDS.RESOURCE_DIMENSION],U=L[DDS_DX10_FIELDS.MISC_FLAG],z=L[DDS_DX10_FIELDS.ARRAY_SIZE],W=DXGI_TO_FORMAT[B];if(W===void 0)throw new Error(`DDSParser cannot parse texture data with DXGI format ${B}`);if(U===DDS_RESOURCE_MISC_TEXTURECUBE)throw new Error("DDSParser does not support cubemap textures");if(V===6)throw new Error("DDSParser does not supported 3D texture data");const Z=new Array,X=DDS_MAGIC_SIZE+DDS_HEADER_SIZE+DDS_HEADER_DX10_SIZE;if(z===1)Z.push(new Uint8Array(A,X));else{const K=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[W];let Y=0,Q=P,J=C;for(let ie=0;ie<I;ie++){const ne=Math.max(1,Q+3&-4),he=Math.max(1,J+3&-4),ve=ne*he*K;Y+=ve,Q=Q>>>1,J=J>>>1}let te=X;for(let ie=0;ie<z;ie++)Z.push(new Uint8Array(A,te,Y)),te+=Y}return Z.map(K=>new CompressedTextureResource(K,{format:W,width:P,height:C,levels:I}))}throw F&DDPF_RGB?new Error("DDSParser does not support uncompressed texture data."):F&DDPF_YUV?new Error("DDSParser does not supported YUV uncompressed texture data."):F&DDPF_LUMINANCE?new Error("DDSParser does not support single-channel (lumninance) texture data!"):F&DDPF_ALPHA?new Error("DDSParser does not support single-channel (alpha) texture data!"):new Error("DDSParser failed to load a texture file due to an unknown reason!")}const FILE_IDENTIFIER=[171,75,84,88,32,49,49,187,13,10,26,10],ENDIANNESS=67305985,KTX_FIELDS={FILE_IDENTIFIER:0,ENDIANNESS:12,GL_TYPE:16,GL_TYPE_SIZE:20,GL_FORMAT:24,GL_INTERNAL_FORMAT:28,GL_BASE_INTERNAL_FORMAT:32,PIXEL_WIDTH:36,PIXEL_HEIGHT:40,PIXEL_DEPTH:44,NUMBER_OF_ARRAY_ELEMENTS:48,NUMBER_OF_FACES:52,NUMBER_OF_MIPMAP_LEVELS:56,BYTES_OF_KEY_VALUE_DATA:60},FILE_HEADER_SIZE=64,TYPES_TO_BYTES_PER_COMPONENT={[TYPES.UNSIGNED_BYTE]:1,[TYPES.UNSIGNED_SHORT]:2,[TYPES.INT]:4,[TYPES.UNSIGNED_INT]:4,[TYPES.FLOAT]:4,[TYPES.HALF_FLOAT]:8},FORMATS_TO_COMPONENTS={[FORMATS.RGBA]:4,[FORMATS.RGB]:3,[FORMATS.RG]:2,[FORMATS.RED]:1,[FORMATS.LUMINANCE]:1,[FORMATS.LUMINANCE_ALPHA]:2,[FORMATS.ALPHA]:1},TYPES_TO_BYTES_PER_PIXEL={[TYPES.UNSIGNED_SHORT_4_4_4_4]:2,[TYPES.UNSIGNED_SHORT_5_5_5_1]:2,[TYPES.UNSIGNED_SHORT_5_6_5]:2};function parseKTX(A,T,E=!1){const C=new DataView(T);if(!validate(A,C))return null;const P=C.getUint32(KTX_FIELDS.ENDIANNESS,!0)===ENDIANNESS,I=C.getUint32(KTX_FIELDS.GL_TYPE,P),R=C.getUint32(KTX_FIELDS.GL_FORMAT,P),F=C.getUint32(KTX_FIELDS.GL_INTERNAL_FORMAT,P),O=C.getUint32(KTX_FIELDS.PIXEL_WIDTH,P),D=C.getUint32(KTX_FIELDS.PIXEL_HEIGHT,P)||1,L=C.getUint32(KTX_FIELDS.PIXEL_DEPTH,P)||1,B=C.getUint32(KTX_FIELDS.NUMBER_OF_ARRAY_ELEMENTS,P)||1,V=C.getUint32(KTX_FIELDS.NUMBER_OF_FACES,P),U=C.getUint32(KTX_FIELDS.NUMBER_OF_MIPMAP_LEVELS,P),z=C.getUint32(KTX_FIELDS.BYTES_OF_KEY_VALUE_DATA,P);if(D===0||L!==1)throw new Error("Only 2D textures are supported");if(V!==1)throw new Error("CubeTextures are not supported by KTXLoader yet!");if(B!==1)throw new Error("WebGL does not support array textures");const W=4,Z=4,X=O+3&-4,K=D+3&-4,Y=new Array(B);let Q=O*D;I===0&&(Q=X*K);let J;if(I!==0?TYPES_TO_BYTES_PER_COMPONENT[I]?J=TYPES_TO_BYTES_PER_COMPONENT[I]*FORMATS_TO_COMPONENTS[R]:J=TYPES_TO_BYTES_PER_PIXEL[I]:J=INTERNAL_FORMAT_TO_BYTES_PER_PIXEL[F],J===void 0)throw new Error("Unable to resolve the pixel format stored in the *.ktx file!");const te=E?parseKvData(C,z,P):null;let ie=Q*J,ne=O,he=D,ve=X,ye=K,de=FILE_HEADER_SIZE+z;for(let fe=0;fe<U;fe++){const ue=C.getUint32(de,P);let ge=de+4;for(let ae=0;ae<B;ae++){let ce=Y[ae];ce||(ce=Y[ae]=new Array(U)),ce[fe]={levelID:fe,levelWidth:U>1||I!==0?ne:ve,levelHeight:U>1||I!==0?he:ye,levelBuffer:new Uint8Array(T,ge,ie)},ge+=ie}de+=ue+4,de=de%4!==0?de+4-de%4:de,ne=ne>>1||1,he=he>>1||1,ve=ne+W-1&~(W-1),ye=he+Z-1&~(Z-1),ie=ve*ye*J}return I!==0?{uncompressed:Y.map(fe=>{let ue=fe[0].levelBuffer,ge=!1;return I===TYPES.FLOAT?ue=new Float32Array(fe[0].levelBuffer.buffer,fe[0].levelBuffer.byteOffset,fe[0].levelBuffer.byteLength/4):I===TYPES.UNSIGNED_INT?(ge=!0,ue=new Uint32Array(fe[0].levelBuffer.buffer,fe[0].levelBuffer.byteOffset,fe[0].levelBuffer.byteLength/4)):I===TYPES.INT&&(ge=!0,ue=new Int32Array(fe[0].levelBuffer.buffer,fe[0].levelBuffer.byteOffset,fe[0].levelBuffer.byteLength/4)),{resource:new BufferResource(ue,{width:fe[0].levelWidth,height:fe[0].levelHeight}),type:I,format:ge?convertFormatToInteger(R):R}}),kvData:te}:{compressed:Y.map(fe=>new CompressedTextureResource(null,{format:F,width:O,height:D,levels:U,levelBuffers:fe})),kvData:te}}function validate(A,T){for(let E=0;E<FILE_IDENTIFIER.length;E++)if(T.getUint8(E)!==FILE_IDENTIFIER[E])return console.error(`${A} is not a valid *.ktx file!`),!1;return!0}function convertFormatToInteger(A){switch(A){case FORMATS.RGBA:return FORMATS.RGBA_INTEGER;case FORMATS.RGB:return FORMATS.RGB_INTEGER;case FORMATS.RG:return FORMATS.RG_INTEGER;case FORMATS.RED:return FORMATS.RED_INTEGER;default:return A}}function parseKvData(A,T,E){const C=new Map;let P=0;for(;P<T;){const I=A.getUint32(FILE_HEADER_SIZE+P,E),R=FILE_HEADER_SIZE+P+4,F=3-(I+3)%4;if(I===0||I>T-P){console.error("KTXLoader: keyAndValueByteSize out of bounds");break}let O=0;for(;O<I&&A.getUint8(R+O)!==0;O++);if(O===-1){console.error("KTXLoader: Failed to find null byte terminating kvData key");break}const D=new TextDecoder().decode(new Uint8Array(A.buffer,R,O)),L=new DataView(A.buffer,R+O+1,I-O-1);C.set(D,L),P+=4+I+F}return C}const loadDDS={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadDDS",test(A){return checkExtension(A,".dds")},async load(A,T,E){const C=await(await settings.ADAPTER.fetch(A)).arrayBuffer(),P=parseDDS(C).map(I=>{const R=new BaseTexture(I,{mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(A),...T.data});return createTexture(R,E,A)});return P.length===1?P[0]:P},unload(A){Array.isArray(A)?A.forEach(T=>T.destroy(!0)):A.destroy(!0)}};extensions$1.add(loadDDS);const loadKTX={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.High},name:"loadKTX",test(A){return checkExtension(A,".ktx")},async load(A,T,E){const C=await(await settings.ADAPTER.fetch(A)).arrayBuffer(),{compressed:P,uncompressed:I,kvData:R}=parseKTX(A,C),F=P??I,O={mipmap:MIPMAP_MODES.OFF,alphaMode:ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,resolution:getResolutionOfUrl(A),...T.data},D=F.map(L=>{F===I&&Object.assign(O,{type:L.type,format:L.format});const B=L.resource??L,V=new BaseTexture(B,O);return V.ktxKeyValueData=R,createTexture(V,E,A)});return D.length===1?D[0]:D},unload(A){Array.isArray(A)?A.forEach(T=>T.destroy(!0)):A.destroy(!0)}};extensions$1.add(loadKTX);const resolveCompressedTextureUrl={extension:ExtensionType.ResolveParser,test:A=>{const T=path.extname(A).slice(1);return["basis","ktx","dds"].includes(T)},parse:A=>{var E,C;const T=path.extname(A).slice(1);if(T==="ktx"){const P=[".s3tc.ktx",".s3tc_sRGB.ktx",".etc.ktx",".etc1.ktx",".pvrt.ktx",".atc.ktx",".astc.ktx"];if(P.some(I=>A.endsWith(I)))return{resolution:parseFloat(((E=settings.RETINA_PREFIX.exec(A))==null?void 0:E[1])??"1"),format:P.find(I=>A.endsWith(I)),src:A}}return{resolution:parseFloat(((C=settings.RETINA_PREFIX.exec(A))==null?void 0:C[1])??"1"),format:T,src:A}}};extensions$1.add(resolveCompressedTextureUrl);const TEMP_RECT=new Rectangle,BYTES_PER_PIXEL=4,_Extract=class ci{constructor(T){this.renderer=T,this._rendererPremultipliedAlpha=!1}contextChange(){var E;const T=(E=this.renderer)==null?void 0:E.gl.getContextAttributes();this._rendererPremultipliedAlpha=!!(T&&T.alpha&&T.premultipliedAlpha)}async image(T,E,C,P){const I=new Image;return I.src=await this.base64(T,E,C,P),I}async base64(T,E,C,P){const I=this.canvas(T,P);if(I.toBlob!==void 0)return new Promise((R,F)=>{I.toBlob(O=>{if(!O){F(new Error("ICanvas.toBlob failed!"));return}const D=new FileReader;D.onload=()=>R(D.result),D.onerror=F,D.readAsDataURL(O)},E,C)});if(I.toDataURL!==void 0)return I.toDataURL(E,C);if(I.convertToBlob!==void 0){const R=await I.convertToBlob({type:E,quality:C});return new Promise((F,O)=>{const D=new FileReader;D.onload=()=>F(D.result),D.onerror=O,D.readAsDataURL(R)})}throw new Error("Extract.base64() requires ICanvas.toDataURL, ICanvas.toBlob, or ICanvas.convertToBlob to be implemented")}canvas(T,E){const{pixels:C,width:P,height:I,flipY:R,premultipliedAlpha:F}=this._rawPixels(T,E);R&&ci._flipY(C,P,I),F&&ci._unpremultiplyAlpha(C);const O=new CanvasRenderTarget(P,I,1),D=new ImageData(new Uint8ClampedArray(C.buffer),P,I);return O.context.putImageData(D,0,0),O.canvas}pixels(T,E){const{pixels:C,width:P,height:I,flipY:R,premultipliedAlpha:F}=this._rawPixels(T,E);return R&&ci._flipY(C,P,I),F&&ci._unpremultiplyAlpha(C),C}_rawPixels(T,E){const C=this.renderer;if(!C)throw new Error("The Extract has already been destroyed");let P,I=!1,R=!1,F,O=!1;T&&(T instanceof RenderTexture?F=T:(F=C.generateTexture(T,{region:E,resolution:C.resolution,multisample:C.multisample}),O=!0,E&&(TEMP_RECT.width=E.width,TEMP_RECT.height=E.height,E=TEMP_RECT)));const D=C.gl;if(F){if(P=F.baseTexture.resolution,E=E??F.frame,I=!1,R=F.baseTexture.alphaMode>0&&F.baseTexture.format===FORMATS.RGBA,!O){C.renderTexture.bind(F);const U=F.framebuffer.glFramebuffers[C.CONTEXT_UID];U.blitFramebuffer&&C.framebuffer.bind(U.blitFramebuffer)}}else P=C.resolution,E||(E=TEMP_RECT,E.width=C.width/P,E.height=C.height/P),I=!0,R=this._rendererPremultipliedAlpha,C.renderTexture.bind();const L=Math.max(Math.round(E.width*P),1),B=Math.max(Math.round(E.height*P),1),V=new Uint8Array(BYTES_PER_PIXEL*L*B);return D.readPixels(Math.round(E.x*P),Math.round(E.y*P),L,B,D.RGBA,D.UNSIGNED_BYTE,V),O&&(F==null||F.destroy(!0)),{pixels:V,width:L,height:B,flipY:I,premultipliedAlpha:R}}destroy(){this.renderer=null}static _flipY(T,E,C){const P=E<<2,I=C>>1,R=new Uint8Array(P);for(let F=0;F<I;F++){const O=F*P,D=(C-F-1)*P;R.set(T.subarray(O,O+P)),T.copyWithin(O,D,D+P),T.set(R,D)}}static _unpremultiplyAlpha(T){T instanceof Uint8ClampedArray&&(T=new Uint8Array(T.buffer));const E=T.length;for(let C=0;C<E;C+=4){const P=T[C+3];if(P!==0){const I=255.001/P;T[C]=T[C]*I+.5,T[C+1]=T[C+1]*I+.5,T[C+2]=T[C+2]*I+.5}}}};_Extract.extension={name:"extract",type:ExtensionType.RendererSystem};let Extract=_Extract;extensions$1.add(Extract);const buildCircle={build(A){const T=A.points;let E,C,P,I,R,F;if(A.type===SHAPES.CIRC){const z=A.shape;E=z.x,C=z.y,R=F=z.radius,P=I=0}else if(A.type===SHAPES.ELIP){const z=A.shape;E=z.x,C=z.y,R=z.width,F=z.height,P=I=0}else{const z=A.shape,W=z.width/2,Z=z.height/2;E=z.x+W,C=z.y+Z,R=F=Math.max(0,Math.min(z.radius,Math.min(W,Z))),P=W-R,I=Z-F}if(!(R>=0&&F>=0&&P>=0&&I>=0)){T.length=0;return}const O=Math.ceil(2.3*Math.sqrt(R+F)),D=O*8+(P?4:0)+(I?4:0);if(T.length=D,D===0)return;if(O===0){T.length=8,T[0]=T[6]=E+P,T[1]=T[3]=C+I,T[2]=T[4]=E-P,T[5]=T[7]=C-I;return}let L=0,B=O*4+(P?2:0)+2,V=B,U=D;{const z=P+R,W=I,Z=E+z,X=E-z,K=C+W;if(T[L++]=Z,T[L++]=K,T[--B]=K,T[--B]=X,I){const Y=C-W;T[V++]=X,T[V++]=Y,T[--U]=Y,T[--U]=Z}}for(let z=1;z<O;z++){const W=Math.PI/2*(z/O),Z=P+Math.cos(W)*R,X=I+Math.sin(W)*F,K=E+Z,Y=E-Z,Q=C+X,J=C-X;T[L++]=K,T[L++]=Q,T[--B]=Q,T[--B]=Y,T[V++]=Y,T[V++]=J,T[--U]=J,T[--U]=K}{const z=P,W=I+F,Z=E+z,X=E-z,K=C+W,Y=C-W;T[L++]=Z,T[L++]=K,T[--U]=Y,T[--U]=Z,P&&(T[L++]=X,T[L++]=K,T[--U]=Y,T[--U]=X)}},triangulate(A,T){const E=A.points,C=T.points,P=T.indices;if(E.length===0)return;let I=C.length/2;const R=I;let F,O;if(A.type!==SHAPES.RREC){const L=A.shape;F=L.x,O=L.y}else{const L=A.shape;F=L.x+L.width/2,O=L.y+L.height/2}const D=A.matrix;C.push(A.matrix?D.a*F+D.c*O+D.tx:F,A.matrix?D.b*F+D.d*O+D.ty:O),I++,C.push(E[0],E[1]);for(let L=2;L<E.length;L+=2)C.push(E[L],E[L+1]),P.push(I++,R,I);P.push(R+1,R,I)}};function fixOrientation(A,T=!1){const E=A.length;if(E<6)return;let C=0;for(let P=0,I=A[E-2],R=A[E-1];P<E;P+=2){const F=A[P],O=A[P+1];C+=(F-I)*(O+R),I=F,R=O}if(!T&&C>0||T&&C<=0){const P=E/2;for(let I=P+P%2;I<E;I+=2){const R=E-I-2,F=E-I-1,O=I,D=I+1;[A[R],A[O]]=[A[O],A[R]],[A[F],A[D]]=[A[D],A[F]]}}}const buildPoly={build(A){A.points=A.shape.points.slice()},triangulate(A,T){let E=A.points;const C=A.holes,P=T.points,I=T.indices;if(E.length>=6){fixOrientation(E,!1);const R=[];for(let D=0;D<C.length;D++){const L=C[D];fixOrientation(L.points,!0),R.push(E.length/2),E=E.concat(L.points)}const F=earcut$1(E,R,2);if(!F)return;const O=P.length/2;for(let D=0;D<F.length;D+=3)I.push(F[D]+O),I.push(F[D+1]+O),I.push(F[D+2]+O);for(let D=0;D<E.length;D++)P.push(E[D])}}},buildRectangle={build(A){const T=A.shape,E=T.x,C=T.y,P=T.width,I=T.height,R=A.points;R.length=0,P>=0&&I>=0&&R.push(E,C,E+P,C,E+P,C+I,E,C+I)},triangulate(A,T){const E=A.points,C=T.points;if(E.length===0)return;const P=C.length/2;C.push(E[0],E[1],E[2],E[3],E[6],E[7],E[4],E[5]),T.indices.push(P,P+1,P+2,P+1,P+2,P+3)}},buildRoundedRectangle={build(A){buildCircle.build(A)},triangulate(A,T){buildCircle.triangulate(A,T)}};var LINE_JOIN=(A=>(A.MITER="miter",A.BEVEL="bevel",A.ROUND="round",A))(LINE_JOIN||{}),LINE_CAP=(A=>(A.BUTT="butt",A.ROUND="round",A.SQUARE="square",A))(LINE_CAP||{});const curves={adaptive:!0,maxLength:10,minSegments:8,maxSegments:2048,epsilon:1e-4,_segmentsCount(A,T=20){if(!this.adaptive||!A||isNaN(A))return T;let E=Math.ceil(A/this.maxLength);return E<this.minSegments?E=this.minSegments:E>this.maxSegments&&(E=this.maxSegments),E}};class ArcUtils{static curveTo(T,E,C,P,I,R){const F=R[R.length-2],O=R[R.length-1]-E,D=F-T,L=P-E,B=C-T,V=Math.abs(O*B-D*L);if(V<1e-8||I===0)return(R[R.length-2]!==T||R[R.length-1]!==E)&&R.push(T,E),null;const U=O*O+D*D,z=L*L+B*B,W=O*L+D*B,Z=I*Math.sqrt(U)/V,X=I*Math.sqrt(z)/V,K=Z*W/U,Y=X*W/z,Q=Z*B+X*D,J=Z*L+X*O,te=D*(X+K),ie=O*(X+K),ne=B*(Z+Y),he=L*(Z+Y),ve=Math.atan2(ie-J,te-Q),ye=Math.atan2(he-J,ne-Q);return{cx:Q+T,cy:J+E,radius:I,startAngle:ve,endAngle:ye,anticlockwise:D*L>B*O}}static arc(T,E,C,P,I,R,F,O,D){const L=F-R,B=curves._segmentsCount(Math.abs(L)*I,Math.ceil(Math.abs(L)/PI_2)*40),V=L/(B*2),U=V*2,z=Math.cos(V),W=Math.sin(V),Z=B-1,X=Z%1/Z;for(let K=0;K<=Z;++K){const Y=K+X*K,Q=V+R+U*Y,J=Math.cos(Q),te=-Math.sin(Q);D.push((z*J+W*te)*I+C,(z*-te+W*J)*I+P)}}}class BatchPart{constructor(){this.reset()}begin(T,E,C){this.reset(),this.style=T,this.start=E,this.attribStart=C}end(T,E){this.attribSize=E-this.attribStart,this.size=T-this.start}reset(){this.style=null,this.size=0,this.start=0,this.attribStart=0,this.attribSize=0}}class BezierUtils{static curveLength(T,E,C,P,I,R,F,O){let D=0,L=0,B=0,V=0,U=0,z=0,W=0,Z=0,X=0,K=0,Y=0,Q=T,J=E;for(let te=1;te<=10;++te)L=te/10,B=L*L,V=B*L,U=1-L,z=U*U,W=z*U,Z=W*T+3*z*L*C+3*U*B*I+V*F,X=W*E+3*z*L*P+3*U*B*R+V*O,K=Q-Z,Y=J-X,Q=Z,J=X,D+=Math.sqrt(K*K+Y*Y);return D}static curveTo(T,E,C,P,I,R,F){const O=F[F.length-2],D=F[F.length-1];F.length-=2;const L=curves._segmentsCount(BezierUtils.curveLength(O,D,T,E,C,P,I,R));let B=0,V=0,U=0,z=0,W=0;F.push(O,D);for(let Z=1,X=0;Z<=L;++Z)X=Z/L,B=1-X,V=B*B,U=V*B,z=X*X,W=z*X,F.push(U*O+3*V*X*T+3*B*z*C+W*I,U*D+3*V*X*E+3*B*z*P+W*R)}}function square(A,T,E,C,P,I,R,F){const O=A-E*P,D=T-C*P,L=A+E*I,B=T+C*I;let V,U;R?(V=C,U=-E):(V=-C,U=E);const z=O+V,W=D+U,Z=L+V,X=B+U;return F.push(z,W,Z,X),2}function round(A,T,E,C,P,I,R,F){const O=E-A,D=C-T;let L=Math.atan2(O,D),B=Math.atan2(P-A,I-T);F&&L<B?L+=Math.PI*2:!F&&L>B&&(B+=Math.PI*2);let V=L;const U=B-L,z=Math.abs(U),W=Math.sqrt(O*O+D*D),Z=(15*z*Math.sqrt(W)/Math.PI>>0)+1,X=U/Z;if(V+=X,F){R.push(A,T,E,C);for(let K=1,Y=V;K<Z;K++,Y+=X)R.push(A,T,A+Math.sin(Y)*W,T+Math.cos(Y)*W);R.push(A,T,P,I)}else{R.push(E,C,A,T);for(let K=1,Y=V;K<Z;K++,Y+=X)R.push(A+Math.sin(Y)*W,T+Math.cos(Y)*W,A,T);R.push(P,I,A,T)}return Z*2}function buildNonNativeLine(A,T){const E=A.shape;let C=A.points||E.points.slice();const P=T.closePointEps;if(C.length===0)return;const I=A.lineStyle,R=new Point(C[0],C[1]),F=new Point(C[C.length-2],C[C.length-1]),O=E.type!==SHAPES.POLY||E.closeStroke,D=Math.abs(R.x-F.x)<P&&Math.abs(R.y-F.y)<P;if(O){C=C.slice(),D&&(C.pop(),C.pop(),F.set(C[C.length-2],C[C.length-1]));const ce=(R.x+F.x)*.5,se=(F.y+R.y)*.5;C.unshift(ce,se),C.push(ce,se)}const L=T.points,B=C.length/2;let V=C.length;const U=L.length/2,z=I.width/2,W=z*z,Z=I.miterLimit*I.miterLimit;let X=C[0],K=C[1],Y=C[2],Q=C[3],J=0,te=0,ie=-(K-Q),ne=X-Y,he=0,ve=0,ye=Math.sqrt(ie*ie+ne*ne);ie/=ye,ne/=ye,ie*=z,ne*=z;const de=I.alignment,fe=(1-de)*2,ue=de*2;O||(I.cap===LINE_CAP.ROUND?V+=round(X-ie*(fe-ue)*.5,K-ne*(fe-ue)*.5,X-ie*fe,K-ne*fe,X+ie*ue,K+ne*ue,L,!0)+2:I.cap===LINE_CAP.SQUARE&&(V+=square(X,K,ie,ne,fe,ue,!0,L))),L.push(X-ie*fe,K-ne*fe,X+ie*ue,K+ne*ue);for(let ce=1;ce<B-1;++ce){X=C[(ce-1)*2],K=C[(ce-1)*2+1],Y=C[ce*2],Q=C[ce*2+1],J=C[(ce+1)*2],te=C[(ce+1)*2+1],ie=-(K-Q),ne=X-Y,ye=Math.sqrt(ie*ie+ne*ne),ie/=ye,ne/=ye,ie*=z,ne*=z,he=-(Q-te),ve=Y-J,ye=Math.sqrt(he*he+ve*ve),he/=ye,ve/=ye,he*=z,ve*=z;const se=Y-X,le=K-Q,_e=Y-J,me=te-Q,Ee=se*_e+le*me,Pe=le*_e-me*se,Ce=Pe<0;if(Math.abs(Pe)<.001*Math.abs(Ee)){L.push(Y-ie*fe,Q-ne*fe,Y+ie*ue,Q+ne*ue),Ee>=0&&(I.join===LINE_JOIN.ROUND?V+=round(Y,Q,Y-ie*fe,Q-ne*fe,Y-he*fe,Q-ve*fe,L,!1)+4:V+=2,L.push(Y-he*ue,Q-ve*ue,Y+he*fe,Q+ve*fe));continue}const ke=(-ie+X)*(-ne+Q)-(-ie+Y)*(-ne+K),Be=(-he+J)*(-ve+Q)-(-he+Y)*(-ve+te),Me=(se*Be-_e*ke)/Pe,Oe=(me*ke-le*Be)/Pe,Je=(Me-Y)*(Me-Y)+(Oe-Q)*(Oe-Q),et=Y+(Me-Y)*fe,qe=Q+(Oe-Q)*fe,De=Y-(Me-Y)*ue,Ue=Q-(Oe-Q)*ue,Re=Math.min(se*se+le*le,_e*_e+me*me),Ne=Ce?fe:ue,Ge=Re+Ne*Ne*W,We=Je<=Ge;let je=I.join;if(je===LINE_JOIN.MITER&&Je/W>Z&&(je=LINE_JOIN.BEVEL),We)switch(je){case LINE_JOIN.MITER:{L.push(et,qe,De,Ue);break}case LINE_JOIN.BEVEL:{Ce?L.push(et,qe,Y+ie*ue,Q+ne*ue,et,qe,Y+he*ue,Q+ve*ue):L.push(Y-ie*fe,Q-ne*fe,De,Ue,Y-he*fe,Q-ve*fe,De,Ue),V+=2;break}case LINE_JOIN.ROUND:{Ce?(L.push(et,qe,Y+ie*ue,Q+ne*ue),V+=round(Y,Q,Y+ie*ue,Q+ne*ue,Y+he*ue,Q+ve*ue,L,!0)+4,L.push(et,qe,Y+he*ue,Q+ve*ue)):(L.push(Y-ie*fe,Q-ne*fe,De,Ue),V+=round(Y,Q,Y-ie*fe,Q-ne*fe,Y-he*fe,Q-ve*fe,L,!1)+4,L.push(Y-he*fe,Q-ve*fe,De,Ue));break}}else{switch(L.push(Y-ie*fe,Q-ne*fe,Y+ie*ue,Q+ne*ue),je){case LINE_JOIN.MITER:{Ce?L.push(De,Ue,De,Ue):L.push(et,qe,et,qe),V+=2;break}case LINE_JOIN.ROUND:{Ce?V+=round(Y,Q,Y+ie*ue,Q+ne*ue,Y+he*ue,Q+ve*ue,L,!0)+2:V+=round(Y,Q,Y-ie*fe,Q-ne*fe,Y-he*fe,Q-ve*fe,L,!1)+2;break}}L.push(Y-he*fe,Q-ve*fe,Y+he*ue,Q+ve*ue),V+=2}}X=C[(B-2)*2],K=C[(B-2)*2+1],Y=C[(B-1)*2],Q=C[(B-1)*2+1],ie=-(K-Q),ne=X-Y,ye=Math.sqrt(ie*ie+ne*ne),ie/=ye,ne/=ye,ie*=z,ne*=z,L.push(Y-ie*fe,Q-ne*fe,Y+ie*ue,Q+ne*ue),O||(I.cap===LINE_CAP.ROUND?V+=round(Y-ie*(fe-ue)*.5,Q-ne*(fe-ue)*.5,Y-ie*fe,Q-ne*fe,Y+ie*ue,Q+ne*ue,L,!1)+2:I.cap===LINE_CAP.SQUARE&&(V+=square(Y,Q,ie,ne,fe,ue,!1,L)));const ge=T.indices,ae=curves.epsilon*curves.epsilon;for(let ce=U;ce<V+U-2;++ce)X=L[ce*2],K=L[ce*2+1],Y=L[(ce+1)*2],Q=L[(ce+1)*2+1],J=L[(ce+2)*2],te=L[(ce+2)*2+1],!(Math.abs(X*(Q-te)+Y*(te-K)+J*(K-Q))<ae)&&ge.push(ce,ce+1,ce+2)}function buildNativeLine(A,T){let E=0;const C=A.shape,P=A.points||C.points,I=C.type!==SHAPES.POLY||C.closeStroke;if(P.length===0)return;const R=T.points,F=T.indices,O=P.length/2,D=R.length/2;let L=D;for(R.push(P[0],P[1]),E=1;E<O;E++)R.push(P[E*2],P[E*2+1]),F.push(L,L+1),L++;I&&F.push(L,D)}function buildLine(A,T){A.lineStyle.native?buildNativeLine(A,T):buildNonNativeLine(A,T)}class QuadraticUtils{static curveLength(T,E,C,P,I,R){const F=T-2*C+I,O=E-2*P+R,D=2*C-2*T,L=2*P-2*E,B=4*(F*F+O*O),V=4*(F*D+O*L),U=D*D+L*L,z=2*Math.sqrt(B+V+U),W=Math.sqrt(B),Z=2*B*W,X=2*Math.sqrt(U),K=V/W;return(Z*z+W*V*(z-X)+(4*U*B-V*V)*Math.log((2*W+K+z)/(K+X)))/(4*Z)}static curveTo(T,E,C,P,I){const R=I[I.length-2],F=I[I.length-1],O=curves._segmentsCount(QuadraticUtils.curveLength(R,F,T,E,C,P));let D=0,L=0;for(let B=1;B<=O;++B){const V=B/O;D=R+(T-R)*V,L=F+(E-F)*V,I.push(D+(T+(C-T)*V-D)*V,L+(E+(P-E)*V-L)*V)}}}const FILL_COMMANDS={[SHAPES.POLY]:buildPoly,[SHAPES.CIRC]:buildCircle,[SHAPES.ELIP]:buildCircle,[SHAPES.RECT]:buildRectangle,[SHAPES.RREC]:buildRoundedRectangle},BATCH_POOL=[],DRAW_CALL_POOL=[];class GraphicsData{constructor(T,E=null,C=null,P=null){this.points=[],this.holes=[],this.shape=T,this.lineStyle=C,this.fillStyle=E,this.matrix=P,this.type=T.type}clone(){return new GraphicsData(this.shape,this.fillStyle,this.lineStyle,this.matrix)}destroy(){this.shape=null,this.holes.length=0,this.holes=null,this.points.length=0,this.points=null,this.lineStyle=null,this.fillStyle=null}}const tmpPoint=new Point,_GraphicsGeometry=class Zl extends BatchGeometry{constructor(){super(),this.closePointEps=1e-4,this.boundsPadding=0,this.uvsFloat32=null,this.indicesUint16=null,this.batchable=!1,this.points=[],this.colors=[],this.uvs=[],this.indices=[],this.textureIds=[],this.graphicsData=[],this.drawCalls=[],this.batchDirty=-1,this.batches=[],this.dirty=0,this.cacheDirty=-1,this.clearDirty=0,this.shapeIndex=0,this._bounds=new Bounds,this.boundsDirty=-1}get bounds(){return this.updateBatches(),this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.calculateBounds()),this._bounds}invalidate(){this.boundsDirty=-1,this.dirty++,this.batchDirty++,this.shapeIndex=0,this.points.length=0,this.colors.length=0,this.uvs.length=0,this.indices.length=0,this.textureIds.length=0;for(let T=0;T<this.drawCalls.length;T++)this.drawCalls[T].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[T]);this.drawCalls.length=0;for(let T=0;T<this.batches.length;T++){const E=this.batches[T];E.reset(),BATCH_POOL.push(E)}this.batches.length=0}clear(){return this.graphicsData.length>0&&(this.invalidate(),this.clearDirty++,this.graphicsData.length=0),this}drawShape(T,E=null,C=null,P=null){const I=new GraphicsData(T,E,C,P);return this.graphicsData.push(I),this.dirty++,this}drawHole(T,E=null){if(!this.graphicsData.length)return null;const C=new GraphicsData(T,null,null,E),P=this.graphicsData[this.graphicsData.length-1];return C.lineStyle=P.lineStyle,P.holes.push(C),this.dirty++,this}destroy(){super.destroy();for(let T=0;T<this.graphicsData.length;++T)this.graphicsData[T].destroy();this.points.length=0,this.points=null,this.colors.length=0,this.colors=null,this.uvs.length=0,this.uvs=null,this.indices.length=0,this.indices=null,this.indexBuffer.destroy(),this.indexBuffer=null,this.graphicsData.length=0,this.graphicsData=null,this.drawCalls.length=0,this.drawCalls=null,this.batches.length=0,this.batches=null,this._bounds=null}containsPoint(T){const E=this.graphicsData;for(let C=0;C<E.length;++C){const P=E[C];if(P.fillStyle.visible&&P.shape&&(P.matrix?P.matrix.applyInverse(T,tmpPoint):tmpPoint.copyFrom(T),P.shape.contains(tmpPoint.x,tmpPoint.y))){let I=!1;if(P.holes){for(let R=0;R<P.holes.length;R++)if(P.holes[R].shape.contains(tmpPoint.x,tmpPoint.y)){I=!0;break}}if(!I)return!0}}return!1}updateBatches(){if(!this.graphicsData.length){this.batchable=!0;return}if(!this.validateBatching())return;this.cacheDirty=this.dirty;const T=this.uvs,E=this.graphicsData;let C=null,P=null;this.batches.length>0&&(C=this.batches[this.batches.length-1],P=C.style);for(let O=this.shapeIndex;O<E.length;O++){this.shapeIndex++;const D=E[O],L=D.fillStyle,B=D.lineStyle;FILL_COMMANDS[D.type].build(D),D.matrix&&this.transformPoints(D.points,D.matrix),(L.visible||B.visible)&&this.processHoles(D.holes);for(let V=0;V<2;V++){const U=V===0?L:B;if(!U.visible)continue;const z=U.texture.baseTexture,W=this.indices.length,Z=this.points.length/2;z.wrapMode=WRAP_MODES.REPEAT,V===0?this.processFill(D):this.processLine(D);const X=this.points.length/2-Z;X!==0&&(C&&!this._compareStyles(P,U)&&(C.end(W,Z),C=null),C||(C=BATCH_POOL.pop()||new BatchPart,C.begin(U,W,Z),this.batches.push(C),P=U),this.addUvs(this.points,T,U.texture,Z,X,U.matrix))}}const I=this.indices.length,R=this.points.length/2;if(C&&C.end(I,R),this.batches.length===0){this.batchable=!0;return}const F=R>65535;this.indicesUint16&&this.indices.length===this.indicesUint16.length&&F===this.indicesUint16.BYTES_PER_ELEMENT>2?this.indicesUint16.set(this.indices):this.indicesUint16=F?new Uint32Array(this.indices):new Uint16Array(this.indices),this.batchable=this.isBatchable(),this.batchable?this.packBatches():this.buildDrawCalls()}_compareStyles(T,E){return!(!T||!E||T.texture.baseTexture!==E.texture.baseTexture||T.color+T.alpha!==E.color+E.alpha||!!T.native!=!!E.native)}validateBatching(){if(this.dirty===this.cacheDirty||!this.graphicsData.length)return!1;for(let T=0,E=this.graphicsData.length;T<E;T++){const C=this.graphicsData[T],P=C.fillStyle,I=C.lineStyle;if(P&&!P.texture.baseTexture.valid||I&&!I.texture.baseTexture.valid)return!1}return!0}packBatches(){this.batchDirty++,this.uvsFloat32=new Float32Array(this.uvs);const T=this.batches;for(let E=0,C=T.length;E<C;E++){const P=T[E];for(let I=0;I<P.size;I++){const R=P.start+I;this.indicesUint16[R]=this.indicesUint16[R]-P.attribStart}}}isBatchable(){if(this.points.length>65535*2)return!1;const T=this.batches;for(let E=0;E<T.length;E++)if(T[E].style.native)return!1;return this.points.length<Zl.BATCHABLE_SIZE*2}buildDrawCalls(){let T=++BaseTexture._globalBatch;for(let B=0;B<this.drawCalls.length;B++)this.drawCalls[B].texArray.clear(),DRAW_CALL_POOL.push(this.drawCalls[B]);this.drawCalls.length=0;const E=this.colors,C=this.textureIds;let P=DRAW_CALL_POOL.pop();P||(P=new BatchDrawCall,P.texArray=new BatchTextureArray),P.texArray.count=0,P.start=0,P.size=0,P.type=DRAW_MODES.TRIANGLES;let I=0,R=null,F=0,O=!1,D=DRAW_MODES.TRIANGLES,L=0;this.drawCalls.push(P);for(let B=0;B<this.batches.length;B++){const V=this.batches[B],U=8,z=V.style,W=z.texture.baseTexture;O!==!!z.native&&(O=!!z.native,D=O?DRAW_MODES.LINES:DRAW_MODES.TRIANGLES,R=null,I=U,T++),R!==W&&(R=W,W._batchEnabled!==T&&(I===U&&(T++,I=0,P.size>0&&(P=DRAW_CALL_POOL.pop(),P||(P=new BatchDrawCall,P.texArray=new BatchTextureArray),this.drawCalls.push(P)),P.start=L,P.size=0,P.texArray.count=0,P.type=D),W.touched=1,W._batchEnabled=T,W._batchLocation=I,W.wrapMode=WRAP_MODES.REPEAT,P.texArray.elements[P.texArray.count++]=W,I++)),P.size+=V.size,L+=V.size,F=W._batchLocation,this.addColors(E,z.color,z.alpha,V.attribSize,V.attribStart),this.addTextureIds(C,F,V.attribSize,V.attribStart)}BaseTexture._globalBatch=T,this.packAttributes()}packAttributes(){const T=this.points,E=this.uvs,C=this.colors,P=this.textureIds,I=new ArrayBuffer(T.length*3*4),R=new Float32Array(I),F=new Uint32Array(I);let O=0;for(let D=0;D<T.length/2;D++)R[O++]=T[D*2],R[O++]=T[D*2+1],R[O++]=E[D*2],R[O++]=E[D*2+1],F[O++]=C[D],R[O++]=P[D];this._buffer.update(I),this._indexBuffer.update(this.indicesUint16)}processFill(T){T.holes.length?buildPoly.triangulate(T,this):FILL_COMMANDS[T.type].triangulate(T,this)}processLine(T){buildLine(T,this);for(let E=0;E<T.holes.length;E++)buildLine(T.holes[E],this)}processHoles(T){for(let E=0;E<T.length;E++){const C=T[E];FILL_COMMANDS[C.type].build(C),C.matrix&&this.transformPoints(C.points,C.matrix)}}calculateBounds(){const T=this._bounds;T.clear(),T.addVertexData(this.points,0,this.points.length),T.pad(this.boundsPadding,this.boundsPadding)}transformPoints(T,E){for(let C=0;C<T.length/2;C++){const P=T[C*2],I=T[C*2+1];T[C*2]=E.a*P+E.c*I+E.tx,T[C*2+1]=E.b*P+E.d*I+E.ty}}addColors(T,E,C,P,I=0){const R=Color.shared.setValue(E).toLittleEndianNumber(),F=Color.shared.setValue(R).toPremultiplied(C);T.length=Math.max(T.length,I+P);for(let O=0;O<P;O++)T[I+O]=F}addTextureIds(T,E,C,P=0){T.length=Math.max(T.length,P+C);for(let I=0;I<C;I++)T[P+I]=E}addUvs(T,E,C,P,I,R=null){let F=0;const O=E.length,D=C.frame;for(;F<I;){let B=T[(P+F)*2],V=T[(P+F)*2+1];if(R){const U=R.a*B+R.c*V+R.tx;V=R.b*B+R.d*V+R.ty,B=U}F++,E.push(B/D.width,V/D.height)}const L=C.baseTexture;(D.width<L.width||D.height<L.height)&&this.adjustUvs(E,C,O,I)}adjustUvs(T,E,C,P){const I=E.baseTexture,R=1e-6,F=C+P*2,O=E.frame,D=O.width/I.width,L=O.height/I.height;let B=O.x/O.width,V=O.y/O.height,U=Math.floor(T[C]+R),z=Math.floor(T[C+1]+R);for(let W=C+2;W<F;W+=2)U=Math.min(U,Math.floor(T[W]+R)),z=Math.min(z,Math.floor(T[W+1]+R));B-=U,V-=z;for(let W=C;W<F;W+=2)T[W]=(T[W]+B)*D,T[W+1]=(T[W+1]+V)*L}};_GraphicsGeometry.BATCHABLE_SIZE=100;let GraphicsGeometry=_GraphicsGeometry;class FillStyle{constructor(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1,this.reset()}clone(){const T=new FillStyle;return T.color=this.color,T.alpha=this.alpha,T.texture=this.texture,T.matrix=this.matrix,T.visible=this.visible,T}reset(){this.color=16777215,this.alpha=1,this.texture=Texture.WHITE,this.matrix=null,this.visible=!1}destroy(){this.texture=null,this.matrix=null}}class LineStyle extends FillStyle{constructor(){super(...arguments),this.width=0,this.alignment=.5,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}clone(){const T=new LineStyle;return T.color=this.color,T.alpha=this.alpha,T.texture=this.texture,T.matrix=this.matrix,T.visible=this.visible,T.width=this.width,T.alignment=this.alignment,T.native=this.native,T.cap=this.cap,T.join=this.join,T.miterLimit=this.miterLimit,T}reset(){super.reset(),this.color=0,this.alignment=.5,this.width=0,this.native=!1,this.cap=LINE_CAP.BUTT,this.join=LINE_JOIN.MITER,this.miterLimit=10}}const DEFAULT_SHADERS={},_Graphics=class as extends Container{constructor(T=null){super(),this.shader=null,this.pluginName="batch",this.currentPath=null,this.batches=[],this.batchTint=-1,this.batchDirty=-1,this.vertexData=null,this._fillStyle=new FillStyle,this._lineStyle=new LineStyle,this._matrix=null,this._holeMode=!1,this.state=State.for2d(),this._geometry=T||new GraphicsGeometry,this._geometry.refCount++,this._transformID=-1,this._tintColor=new Color(16777215),this.blendMode=BLEND_MODES.NORMAL}get geometry(){return this._geometry}clone(){return this.finishPoly(),new as(this._geometry)}set blendMode(T){this.state.blendMode=T}get blendMode(){return this.state.blendMode}get tint(){return this._tintColor.value}set tint(T){this._tintColor.setValue(T)}get fill(){return this._fillStyle}get line(){return this._lineStyle}lineStyle(T=null,E=0,C,P=.5,I=!1){return typeof T=="number"&&(T={width:T,color:E,alpha:C,alignment:P,native:I}),this.lineTextureStyle(T)}lineTextureStyle(T){const E={width:0,texture:Texture.WHITE,color:T!=null&&T.texture?16777215:0,matrix:null,alignment:.5,native:!1,cap:LINE_CAP.BUTT,join:LINE_JOIN.MITER,miterLimit:10};T=Object.assign(E,T),this.normalizeColor(T),this.currentPath&&this.startPoly();const C=T.width>0&&T.alpha>0;return C?(T.matrix&&(T.matrix=T.matrix.clone(),T.matrix.invert()),Object.assign(this._lineStyle,{visible:C},T)):this._lineStyle.reset(),this}startPoly(){if(this.currentPath){const T=this.currentPath.points,E=this.currentPath.points.length;E>2&&(this.drawShape(this.currentPath),this.currentPath=new Polygon,this.currentPath.closeStroke=!1,this.currentPath.points.push(T[E-2],T[E-1]))}else this.currentPath=new Polygon,this.currentPath.closeStroke=!1}finishPoly(){this.currentPath&&(this.currentPath.points.length>2?(this.drawShape(this.currentPath),this.currentPath=null):this.currentPath.points.length=0)}moveTo(T,E){return this.startPoly(),this.currentPath.points[0]=T,this.currentPath.points[1]=E,this}lineTo(T,E){this.currentPath||this.moveTo(0,0);const C=this.currentPath.points,P=C[C.length-2],I=C[C.length-1];return(P!==T||I!==E)&&C.push(T,E),this}_initCurve(T=0,E=0){this.currentPath?this.currentPath.points.length===0&&(this.currentPath.points=[T,E]):this.moveTo(T,E)}quadraticCurveTo(T,E,C,P){this._initCurve();const I=this.currentPath.points;return I.length===0&&this.moveTo(0,0),QuadraticUtils.curveTo(T,E,C,P,I),this}bezierCurveTo(T,E,C,P,I,R){return this._initCurve(),BezierUtils.curveTo(T,E,C,P,I,R,this.currentPath.points),this}arcTo(T,E,C,P,I){this._initCurve(T,E);const R=this.currentPath.points,F=ArcUtils.curveTo(T,E,C,P,I,R);if(F){const{cx:O,cy:D,radius:L,startAngle:B,endAngle:V,anticlockwise:U}=F;this.arc(O,D,L,B,V,U)}return this}arc(T,E,C,P,I,R=!1){if(P===I)return this;if(!R&&I<=P?I+=PI_2:R&&P<=I&&(P+=PI_2),I-P===0)return this;const F=T+Math.cos(P)*C,O=E+Math.sin(P)*C,D=this._geometry.closePointEps;let L=this.currentPath?this.currentPath.points:null;if(L){const B=Math.abs(L[L.length-2]-F),V=Math.abs(L[L.length-1]-O);B<D&&V<D||L.push(F,O)}else this.moveTo(F,O),L=this.currentPath.points;return ArcUtils.arc(F,O,T,E,C,P,I,R,L),this}beginFill(T=0,E){return this.beginTextureFill({texture:Texture.WHITE,color:T,alpha:E})}normalizeColor(T){const E=Color.shared.setValue(T.color??0);T.color=E.toNumber(),T.alpha??(T.alpha=E.alpha)}beginTextureFill(T){const E={texture:Texture.WHITE,color:16777215,matrix:null};T=Object.assign(E,T),this.normalizeColor(T),this.currentPath&&this.startPoly();const C=T.alpha>0;return C?(T.matrix&&(T.matrix=T.matrix.clone(),T.matrix.invert()),Object.assign(this._fillStyle,{visible:C},T)):this._fillStyle.reset(),this}endFill(){return this.finishPoly(),this._fillStyle.reset(),this}drawRect(T,E,C,P){return this.drawShape(new Rectangle(T,E,C,P))}drawRoundedRect(T,E,C,P,I){return this.drawShape(new RoundedRectangle(T,E,C,P,I))}drawCircle(T,E,C){return this.drawShape(new Circle(T,E,C))}drawEllipse(T,E,C,P){return this.drawShape(new Ellipse(T,E,C,P))}drawPolygon(...T){let E,C=!0;const P=T[0];P.points?(C=P.closeStroke,E=P.points):Array.isArray(T[0])?E=T[0]:E=T;const I=new Polygon(E);return I.closeStroke=C,this.drawShape(I),this}drawShape(T){return this._holeMode?this._geometry.drawHole(T,this._matrix):this._geometry.drawShape(T,this._fillStyle.clone(),this._lineStyle.clone(),this._matrix),this}clear(){return this._geometry.clear(),this._lineStyle.reset(),this._fillStyle.reset(),this._boundsID++,this._matrix=null,this._holeMode=!1,this.currentPath=null,this}isFastRect(){const T=this._geometry.graphicsData;return T.length===1&&T[0].shape.type===SHAPES.RECT&&!T[0].matrix&&!T[0].holes.length&&!(T[0].lineStyle.visible&&T[0].lineStyle.width)}_render(T){this.finishPoly();const E=this._geometry;E.updateBatches(),E.batchable?(this.batchDirty!==E.batchDirty&&this._populateBatches(),this._renderBatched(T)):(T.batch.flush(),this._renderDirect(T))}_populateBatches(){const T=this._geometry,E=this.blendMode,C=T.batches.length;this.batchTint=-1,this._transformID=-1,this.batchDirty=T.batchDirty,this.batches.length=C,this.vertexData=new Float32Array(T.points);for(let P=0;P<C;P++){const I=T.batches[P],R=I.style.color,F=new Float32Array(this.vertexData.buffer,I.attribStart*4*2,I.attribSize*2),O=new Float32Array(T.uvsFloat32.buffer,I.attribStart*4*2,I.attribSize*2),D=new Uint16Array(T.indicesUint16.buffer,I.start*2,I.size),L={vertexData:F,blendMode:E,indices:D,uvs:O,_batchRGB:Color.shared.setValue(R).toRgbArray(),_tintRGB:R,_texture:I.style.texture,alpha:I.style.alpha,worldAlpha:1};this.batches[P]=L}}_renderBatched(T){if(this.batches.length){T.batch.setObjectRenderer(T.plugins[this.pluginName]),this.calculateVertices(),this.calculateTints();for(let E=0,C=this.batches.length;E<C;E++){const P=this.batches[E];P.worldAlpha=this.worldAlpha*P.alpha,T.plugins[this.pluginName].render(P)}}}_renderDirect(T){const E=this._resolveDirectShader(T),C=this._geometry,P=this.worldAlpha,I=E.uniforms,R=C.drawCalls;I.translationMatrix=this.transform.worldTransform,Color.shared.setValue(this._tintColor).premultiply(P).toArray(I.tint),T.shader.bind(E),T.geometry.bind(C,E),T.state.set(this.state);for(let F=0,O=R.length;F<O;F++)this._renderDrawCallDirect(T,C.drawCalls[F])}_renderDrawCallDirect(T,E){const{texArray:C,type:P,size:I,start:R}=E,F=C.count;for(let O=0;O<F;O++)T.texture.bind(C.elements[O],O);T.geometry.draw(P,I,R)}_resolveDirectShader(T){let E=this.shader;const C=this.pluginName;if(!E){if(!DEFAULT_SHADERS[C]){const{maxTextures:P}=T.plugins[C],I=new Int32Array(P);for(let O=0;O<P;O++)I[O]=O;const R={tint:new Float32Array([1,1,1,1]),translationMatrix:new Matrix,default:UniformGroup.from({uSamplers:I},!0)},F=T.plugins[C]._shader.program;DEFAULT_SHADERS[C]=new Shader(F,R)}E=DEFAULT_SHADERS[C]}return E}_calculateBounds(){this.finishPoly();const T=this._geometry;if(!T.graphicsData.length)return;const{minX:E,minY:C,maxX:P,maxY:I}=T.bounds;this._bounds.addFrame(this.transform,E,C,P,I)}containsPoint(T){return this.worldTransform.applyInverse(T,as._TEMP_POINT),this._geometry.containsPoint(as._TEMP_POINT)}calculateTints(){if(this.batchTint!==this.tint){this.batchTint=this._tintColor.toNumber();for(let T=0;T<this.batches.length;T++){const E=this.batches[T];E._tintRGB=Color.shared.setValue(this._tintColor).multiply(E._batchRGB).toLittleEndianNumber()}}}calculateVertices(){const T=this.transform._worldID;if(this._transformID===T)return;this._transformID=T;const E=this.transform.worldTransform,C=E.a,P=E.b,I=E.c,R=E.d,F=E.tx,O=E.ty,D=this._geometry.points,L=this.vertexData;let B=0;for(let V=0;V<D.length;V+=2){const U=D[V],z=D[V+1];L[B++]=C*U+I*z+F,L[B++]=R*z+P*U+O}}closePath(){const T=this.currentPath;return T&&(T.closeStroke=!0,this.finishPoly()),this}setMatrix(T){return this._matrix=T,this}beginHole(){return this.finishPoly(),this._holeMode=!0,this}endHole(){return this.finishPoly(),this._holeMode=!1,this}destroy(T){this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose(),this._matrix=null,this.currentPath=null,this._lineStyle.destroy(),this._lineStyle=null,this._fillStyle.destroy(),this._fillStyle=null,this._geometry=null,this.shader=null,this.vertexData=null,this.batches.length=0,this.batches=null,super.destroy(T)}};_Graphics.curves=curves,_Graphics._TEMP_POINT=new Point;let Graphics$1=_Graphics;class MeshBatchUvs{constructor(T,E){this.uvBuffer=T,this.uvMatrix=E,this.data=null,this._bufferUpdateId=-1,this._textureUpdateId=-1,this._updateID=0}update(T){if(!T&&this._bufferUpdateId===this.uvBuffer._updateID&&this._textureUpdateId===this.uvMatrix._updateID)return;this._bufferUpdateId=this.uvBuffer._updateID,this._textureUpdateId=this.uvMatrix._updateID;const E=this.uvBuffer.data;(!this.data||this.data.length!==E.length)&&(this.data=new Float32Array(E.length)),this.uvMatrix.multiplyUvs(E,this.data),this._updateID++}}const tempPoint=new Point,tempPolygon=new Polygon,_Mesh=class Kl extends Container{constructor(T,E,C,P=DRAW_MODES.TRIANGLES){super(),this.geometry=T,this.shader=E,this.state=C||State.for2d(),this.drawMode=P,this.start=0,this.size=0,this.uvs=null,this.indices=null,this.vertexData=new Float32Array(1),this.vertexDirty=-1,this._transformID=-1,this._roundPixels=settings.ROUND_PIXELS,this.batchUvs=null}get geometry(){return this._geometry}set geometry(T){this._geometry!==T&&(this._geometry&&(this._geometry.refCount--,this._geometry.refCount===0&&this._geometry.dispose()),this._geometry=T,this._geometry&&this._geometry.refCount++,this.vertexDirty=-1)}get uvBuffer(){return this.geometry.buffers[1]}get verticesBuffer(){return this.geometry.buffers[0]}set material(T){this.shader=T}get material(){return this.shader}set blendMode(T){this.state.blendMode=T}get blendMode(){return this.state.blendMode}set roundPixels(T){this._roundPixels!==T&&(this._transformID=-1),this._roundPixels=T}get roundPixels(){return this._roundPixels}get tint(){return"tint"in this.shader?this.shader.tint:null}set tint(T){this.shader.tint=T}get tintValue(){return this.shader.tintValue}get texture(){return"texture"in this.shader?this.shader.texture:null}set texture(T){this.shader.texture=T}_render(T){const E=this.geometry.buffers[0].data;this.shader.batchable&&this.drawMode===DRAW_MODES.TRIANGLES&&E.length<Kl.BATCHABLE_SIZE*2?this._renderToBatch(T):this._renderDefault(T)}_renderDefault(T){const E=this.shader;E.alpha=this.worldAlpha,E.update&&E.update(),T.batch.flush(),E.uniforms.translationMatrix=this.transform.worldTransform.toArray(!0),T.shader.bind(E),T.state.set(this.state),T.geometry.bind(this.geometry,E),T.geometry.draw(this.drawMode,this.size,this.start,this.geometry.instanceCount)}_renderToBatch(T){const E=this.geometry,C=this.shader;C.uvMatrix&&(C.uvMatrix.update(),this.calculateUvs()),this.calculateVertices(),this.indices=E.indexBuffer.data,this._tintRGB=C._tintRGB,this._texture=C.texture;const P=this.material.pluginName;T.batch.setObjectRenderer(T.plugins[P]),T.plugins[P].render(this)}calculateVertices(){const T=this.geometry.buffers[0],E=T.data,C=T._updateID;if(C===this.vertexDirty&&this._transformID===this.transform._worldID)return;this._transformID=this.transform._worldID,this.vertexData.length!==E.length&&(this.vertexData=new Float32Array(E.length));const P=this.transform.worldTransform,I=P.a,R=P.b,F=P.c,O=P.d,D=P.tx,L=P.ty,B=this.vertexData;for(let V=0;V<B.length/2;V++){const U=E[V*2],z=E[V*2+1];B[V*2]=I*U+F*z+D,B[V*2+1]=R*U+O*z+L}if(this._roundPixels){const V=settings.RESOLUTION;for(let U=0;U<B.length;++U)B[U]=Math.round(B[U]*V)/V}this.vertexDirty=C}calculateUvs(){const T=this.geometry.buffers[1],E=this.shader;E.uvMatrix.isSimple?this.uvs=T.data:(this.batchUvs||(this.batchUvs=new MeshBatchUvs(T,E.uvMatrix)),this.batchUvs.update(),this.uvs=this.batchUvs.data)}_calculateBounds(){this.calculateVertices(),this._bounds.addVertexData(this.vertexData,0,this.vertexData.length)}containsPoint(T){if(!this.getBounds().contains(T.x,T.y))return!1;this.worldTransform.applyInverse(T,tempPoint);const E=this.geometry.getBuffer("aVertexPosition").data,C=tempPolygon.points,P=this.geometry.getIndex().data,I=P.length,R=this.drawMode===4?3:1;for(let F=0;F+2<I;F+=R){const O=P[F]*2,D=P[F+1]*2,L=P[F+2]*2;if(C[0]=E[O],C[1]=E[O+1],C[2]=E[D],C[3]=E[D+1],C[4]=E[L],C[5]=E[L+1],tempPolygon.contains(tempPoint.x,tempPoint.y))return!0}return!1}destroy(T){super.destroy(T),this._cachedTexture&&(this._cachedTexture.destroy(),this._cachedTexture=null),this.geometry=null,this.shader=null,this.state=null,this.uvs=null,this.indices=null,this.vertexData=null}};_Mesh.BATCHABLE_SIZE=100;let Mesh=_Mesh;class MeshGeometry extends Geometry{constructor(T,E,C){super();const P=new Buffer(T),I=new Buffer(E,!0),R=new Buffer(C,!0,!0);this.addAttribute("aVertexPosition",P,2,!1,TYPES.FLOAT).addAttribute("aTextureCoord",I,2,!1,TYPES.FLOAT).addIndex(R),this._updateId=-1}get vertexDirtyId(){return this.buffers[0]._updateID}}var fragment$1=`varying vec2 vTextureCoord;
uniform vec4 uColor;

uniform sampler2D uSampler;

void main(void)
{
    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;
}
`,vertex$1=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTextureMatrix;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;
}
`;class MeshMaterial extends Shader{constructor(T,E){const C={uSampler:T,alpha:1,uTextureMatrix:Matrix.IDENTITY,uColor:new Float32Array([1,1,1,1])};E=Object.assign({tint:16777215,alpha:1,pluginName:"batch"},E),E.uniforms&&Object.assign(C,E.uniforms),super(E.program||Program.from(vertex$1,fragment$1),C),this._colorDirty=!1,this.uvMatrix=new TextureMatrix(T),this.batchable=E.program===void 0,this.pluginName=E.pluginName,this._tintColor=new Color(E.tint),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0,this.alpha=E.alpha}get texture(){return this.uniforms.uSampler}set texture(T){this.uniforms.uSampler!==T&&(!this.uniforms.uSampler.baseTexture.alphaMode!=!T.baseTexture.alphaMode&&(this._colorDirty=!0),this.uniforms.uSampler=T,this.uvMatrix.texture=T)}set alpha(T){T!==this._alpha&&(this._alpha=T,this._colorDirty=!0)}get alpha(){return this._alpha}set tint(T){T!==this.tint&&(this._tintColor.setValue(T),this._tintRGB=this._tintColor.toLittleEndianNumber(),this._colorDirty=!0)}get tint(){return this._tintColor.value}get tintValue(){return this._tintColor.toNumber()}update(){if(this._colorDirty){this._colorDirty=!1;const T=this.texture.baseTexture.alphaMode;Color.shared.setValue(this._tintColor).premultiply(this._alpha,T).toArray(this.uniforms.uColor)}this.uvMatrix.update()&&(this.uniforms.uTextureMatrix=this.uvMatrix.mapCoord)}}class ParticleBuffer{constructor(T,E,C){this.geometry=new Geometry,this.indexBuffer=null,this.size=C,this.dynamicProperties=[],this.staticProperties=[];for(let P=0;P<T.length;++P){let I=T[P];I={attributeName:I.attributeName,size:I.size,uploadFunction:I.uploadFunction,type:I.type||TYPES.FLOAT,offset:I.offset},E[P]?this.dynamicProperties.push(I):this.staticProperties.push(I)}this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this._updateID=0,this.initBuffers()}initBuffers(){const T=this.geometry;let E=0;this.indexBuffer=new Buffer(createIndicesForQuads(this.size),!0,!0),T.addIndex(this.indexBuffer),this.dynamicStride=0;for(let R=0;R<this.dynamicProperties.length;++R){const F=this.dynamicProperties[R];F.offset=E,E+=F.size,this.dynamicStride+=F.size}const C=new ArrayBuffer(this.size*this.dynamicStride*4*4);this.dynamicData=new Float32Array(C),this.dynamicDataUint32=new Uint32Array(C),this.dynamicBuffer=new Buffer(this.dynamicData,!1,!1);let P=0;this.staticStride=0;for(let R=0;R<this.staticProperties.length;++R){const F=this.staticProperties[R];F.offset=P,P+=F.size,this.staticStride+=F.size}const I=new ArrayBuffer(this.size*this.staticStride*4*4);this.staticData=new Float32Array(I),this.staticDataUint32=new Uint32Array(I),this.staticBuffer=new Buffer(this.staticData,!0,!1);for(let R=0;R<this.dynamicProperties.length;++R){const F=this.dynamicProperties[R];T.addAttribute(F.attributeName,this.dynamicBuffer,0,F.type===TYPES.UNSIGNED_BYTE,F.type,this.dynamicStride*4,F.offset*4)}for(let R=0;R<this.staticProperties.length;++R){const F=this.staticProperties[R];T.addAttribute(F.attributeName,this.staticBuffer,0,F.type===TYPES.UNSIGNED_BYTE,F.type,this.staticStride*4,F.offset*4)}}uploadDynamic(T,E,C){for(let P=0;P<this.dynamicProperties.length;P++){const I=this.dynamicProperties[P];I.uploadFunction(T,E,C,I.type===TYPES.UNSIGNED_BYTE?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,I.offset)}this.dynamicBuffer._updateID++}uploadStatic(T,E,C){for(let P=0;P<this.staticProperties.length;P++){const I=this.staticProperties[P];I.uploadFunction(T,E,C,I.type===TYPES.UNSIGNED_BYTE?this.staticDataUint32:this.staticData,this.staticStride,I.offset)}this.staticBuffer._updateID++}destroy(){this.indexBuffer=null,this.dynamicProperties=null,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.staticProperties=null,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.geometry.destroy()}}var fragment=`varying vec2 vTextureCoord;
varying vec4 vColor;

uniform sampler2D uSampler;

void main(void){
    vec4 color = texture2D(uSampler, vTextureCoord) * vColor;
    gl_FragColor = color;
}`,vertex=`attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;
attribute vec4 aColor;

attribute vec2 aPositionCoord;
attribute float aRotation;

uniform mat3 translationMatrix;
uniform vec4 uColor;

varying vec2 vTextureCoord;
varying vec4 vColor;

void main(void){
    float x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);
    float y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);

    vec2 v = vec2(x, y);
    v = v + aPositionCoord;

    gl_Position = vec4((translationMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = aTextureCoord;
    vColor = aColor * uColor;
}
`;class ParticleRenderer extends ObjectRenderer{constructor(T){super(T),this.shader=null,this.properties=null,this.tempMatrix=new Matrix,this.properties=[{attributeName:"aVertexPosition",size:2,uploadFunction:this.uploadVertices,offset:0},{attributeName:"aPositionCoord",size:2,uploadFunction:this.uploadPosition,offset:0},{attributeName:"aRotation",size:1,uploadFunction:this.uploadRotation,offset:0},{attributeName:"aTextureCoord",size:2,uploadFunction:this.uploadUvs,offset:0},{attributeName:"aColor",size:1,type:TYPES.UNSIGNED_BYTE,uploadFunction:this.uploadTint,offset:0}],this.shader=Shader.from(vertex,fragment,{}),this.state=State.for2d()}render(T){const E=T.children,C=T._maxSize,P=T._batchSize,I=this.renderer;let R=E.length;if(R===0)return;R>C&&!T.autoResize&&(R=C);let F=T._buffers;F||(F=T._buffers=this.generateBuffers(T));const O=E[0]._texture.baseTexture,D=O.alphaMode>0;this.state.blendMode=correctBlendMode(T.blendMode,D),I.state.set(this.state);const L=I.gl,B=T.worldTransform.copyTo(this.tempMatrix);B.prepend(I.globalUniforms.uniforms.projectionMatrix),this.shader.uniforms.translationMatrix=B.toArray(!0),this.shader.uniforms.uColor=Color.shared.setValue(T.tintRgb).premultiply(T.worldAlpha,D).toArray(this.shader.uniforms.uColor),this.shader.uniforms.uSampler=O,this.renderer.shader.bind(this.shader);let V=!1;for(let U=0,z=0;U<R;U+=P,z+=1){let W=R-U;W>P&&(W=P),z>=F.length&&F.push(this._generateOneMoreBuffer(T));const Z=F[z];Z.uploadDynamic(E,U,W);const X=T._bufferUpdateIDs[z]||0;V=V||Z._updateID<X,V&&(Z._updateID=T._updateID,Z.uploadStatic(E,U,W)),I.geometry.bind(Z.geometry),L.drawElements(L.TRIANGLES,W*6,L.UNSIGNED_SHORT,0)}}generateBuffers(T){const E=[],C=T._maxSize,P=T._batchSize,I=T._properties;for(let R=0;R<C;R+=P)E.push(new ParticleBuffer(this.properties,I,P));return E}_generateOneMoreBuffer(T){const E=T._batchSize,C=T._properties;return new ParticleBuffer(this.properties,C,E)}uploadVertices(T,E,C,P,I,R){let F=0,O=0,D=0,L=0;for(let B=0;B<C;++B){const V=T[E+B],U=V._texture,z=V.scale.x,W=V.scale.y,Z=U.trim,X=U.orig;Z?(O=Z.x-V.anchor.x*X.width,F=O+Z.width,L=Z.y-V.anchor.y*X.height,D=L+Z.height):(F=X.width*(1-V.anchor.x),O=X.width*-V.anchor.x,D=X.height*(1-V.anchor.y),L=X.height*-V.anchor.y),P[R]=O*z,P[R+1]=L*W,P[R+I]=F*z,P[R+I+1]=L*W,P[R+I*2]=F*z,P[R+I*2+1]=D*W,P[R+I*3]=O*z,P[R+I*3+1]=D*W,R+=I*4}}uploadPosition(T,E,C,P,I,R){for(let F=0;F<C;F++){const O=T[E+F].position;P[R]=O.x,P[R+1]=O.y,P[R+I]=O.x,P[R+I+1]=O.y,P[R+I*2]=O.x,P[R+I*2+1]=O.y,P[R+I*3]=O.x,P[R+I*3+1]=O.y,R+=I*4}}uploadRotation(T,E,C,P,I,R){for(let F=0;F<C;F++){const O=T[E+F].rotation;P[R]=O,P[R+I]=O,P[R+I*2]=O,P[R+I*3]=O,R+=I*4}}uploadUvs(T,E,C,P,I,R){for(let F=0;F<C;++F){const O=T[E+F]._texture._uvs;O?(P[R]=O.x0,P[R+1]=O.y0,P[R+I]=O.x1,P[R+I+1]=O.y1,P[R+I*2]=O.x2,P[R+I*2+1]=O.y2,P[R+I*3]=O.x3,P[R+I*3+1]=O.y3,R+=I*4):(P[R]=0,P[R+1]=0,P[R+I]=0,P[R+I+1]=0,P[R+I*2]=0,P[R+I*2+1]=0,P[R+I*3]=0,P[R+I*3+1]=0,R+=I*4)}}uploadTint(T,E,C,P,I,R){for(let F=0;F<C;++F){const O=T[E+F],D=Color.shared.setValue(O._tintRGB).toPremultiplied(O.alpha,O.texture.baseTexture.alphaMode>0);P[R]=D,P[R+I]=D,P[R+I*2]=D,P[R+I*3]=D,R+=I*4}}destroy(){super.destroy(),this.shader&&(this.shader.destroy(),this.shader=null),this.tempMatrix=null}}ParticleRenderer.extension={name:"particle",type:ExtensionType.RendererPlugin};extensions$1.add(ParticleRenderer);var TEXT_GRADIENT=(A=>(A[A.LINEAR_VERTICAL=0]="LINEAR_VERTICAL",A[A.LINEAR_HORIZONTAL=1]="LINEAR_HORIZONTAL",A))(TEXT_GRADIENT||{});const contextSettings={willReadFrequently:!0},_TextMetrics=class rt{static get experimentalLetterSpacingSupported(){let T=rt._experimentalLetterSpacingSupported;if(T!==void 0){const E=settings.ADAPTER.getCanvasRenderingContext2D().prototype;T=rt._experimentalLetterSpacingSupported="letterSpacing"in E||"textLetterSpacing"in E}return T}constructor(T,E,C,P,I,R,F,O,D){this.text=T,this.style=E,this.width=C,this.height=P,this.lines=I,this.lineWidths=R,this.lineHeight=F,this.maxLineWidth=O,this.fontProperties=D}static measureText(T,E,C,P=rt._canvas){C=C??E.wordWrap;const I=E.toFontString(),R=rt.measureFont(I);R.fontSize===0&&(R.fontSize=E.fontSize,R.ascent=E.fontSize);const F=P.getContext("2d",contextSettings);F.font=I;const O=(C?rt.wordWrap(T,E,P):T).split(/(?:\r\n|\r|\n)/),D=new Array(O.length);let L=0;for(let z=0;z<O.length;z++){const W=rt._measureText(O[z],E.letterSpacing,F);D[z]=W,L=Math.max(L,W)}let B=L+E.strokeThickness;E.dropShadow&&(B+=E.dropShadowDistance);const V=E.lineHeight||R.fontSize+E.strokeThickness;let U=Math.max(V,R.fontSize+E.strokeThickness*2)+E.leading+(O.length-1)*(V+E.leading);return E.dropShadow&&(U+=E.dropShadowDistance),new rt(T,E,B,U,O,D,V+E.leading,L,R)}static _measureText(T,E,C){let P=!1;rt.experimentalLetterSpacingSupported&&(rt.experimentalLetterSpacing?(C.letterSpacing=`${E}px`,C.textLetterSpacing=`${E}px`,P=!0):(C.letterSpacing="0px",C.textLetterSpacing="0px"));let I=C.measureText(T).width;return I>0&&(P?I-=E:I+=(rt.graphemeSegmenter(T).length-1)*E),I}static wordWrap(T,E,C=rt._canvas){const P=C.getContext("2d",contextSettings);let I=0,R="",F="";const O=Object.create(null),{letterSpacing:D,whiteSpace:L}=E,B=rt.collapseSpaces(L),V=rt.collapseNewlines(L);let U=!B;const z=E.wordWrapWidth+D,W=rt.tokenize(T);for(let Z=0;Z<W.length;Z++){let X=W[Z];if(rt.isNewline(X)){if(!V){F+=rt.addLine(R),U=!B,R="",I=0;continue}X=" "}if(B){const Y=rt.isBreakingSpace(X),Q=rt.isBreakingSpace(R[R.length-1]);if(Y&&Q)continue}const K=rt.getFromCache(X,D,O,P);if(K>z)if(R!==""&&(F+=rt.addLine(R),R="",I=0),rt.canBreakWords(X,E.breakWords)){const Y=rt.wordWrapSplit(X);for(let Q=0;Q<Y.length;Q++){let J=Y[Q],te=J,ie=1;for(;Y[Q+ie];){const he=Y[Q+ie];if(!rt.canBreakChars(te,he,X,Q,E.breakWords))J+=he;else break;te=he,ie++}Q+=ie-1;const ne=rt.getFromCache(J,D,O,P);ne+I>z&&(F+=rt.addLine(R),U=!1,R="",I=0),R+=J,I+=ne}}else{R.length>0&&(F+=rt.addLine(R),R="",I=0);const Y=Z===W.length-1;F+=rt.addLine(X,!Y),U=!1,R="",I=0}else K+I>z&&(U=!1,F+=rt.addLine(R),R="",I=0),(R.length>0||!rt.isBreakingSpace(X)||U)&&(R+=X,I+=K)}return F+=rt.addLine(R,!1),F}static addLine(T,E=!0){return T=rt.trimRight(T),T=E?`${T}
`:T,T}static getFromCache(T,E,C,P){let I=C[T];return typeof I!="number"&&(I=rt._measureText(T,E,P)+E,C[T]=I),I}static collapseSpaces(T){return T==="normal"||T==="pre-line"}static collapseNewlines(T){return T==="normal"}static trimRight(T){if(typeof T!="string")return"";for(let E=T.length-1;E>=0;E--){const C=T[E];if(!rt.isBreakingSpace(C))break;T=T.slice(0,-1)}return T}static isNewline(T){return typeof T!="string"?!1:rt._newlines.includes(T.charCodeAt(0))}static isBreakingSpace(T,E){return typeof T!="string"?!1:rt._breakingSpaces.includes(T.charCodeAt(0))}static tokenize(T){const E=[];let C="";if(typeof T!="string")return E;for(let P=0;P<T.length;P++){const I=T[P],R=T[P+1];if(rt.isBreakingSpace(I,R)||rt.isNewline(I)){C!==""&&(E.push(C),C=""),E.push(I);continue}C+=I}return C!==""&&E.push(C),E}static canBreakWords(T,E){return E}static canBreakChars(T,E,C,P,I){return!0}static wordWrapSplit(T){return rt.graphemeSegmenter(T)}static measureFont(T){if(rt._fonts[T])return rt._fonts[T];const E={ascent:0,descent:0,fontSize:0},C=rt._canvas,P=rt._context;P.font=T;const I=rt.METRICS_STRING+rt.BASELINE_SYMBOL,R=Math.ceil(P.measureText(I).width);let F=Math.ceil(P.measureText(rt.BASELINE_SYMBOL).width);const O=Math.ceil(rt.HEIGHT_MULTIPLIER*F);if(F=F*rt.BASELINE_MULTIPLIER|0,R===0||O===0)return rt._fonts[T]=E,E;C.width=R,C.height=O,P.fillStyle="#f00",P.fillRect(0,0,R,O),P.font=T,P.textBaseline="alphabetic",P.fillStyle="#000",P.fillText(I,0,F);const D=P.getImageData(0,0,R,O).data,L=D.length,B=R*4;let V=0,U=0,z=!1;for(V=0;V<F;++V){for(let W=0;W<B;W+=4)if(D[U+W]!==255){z=!0;break}if(!z)U+=B;else break}for(E.ascent=F-V,U=L-B,z=!1,V=O;V>F;--V){for(let W=0;W<B;W+=4)if(D[U+W]!==255){z=!0;break}if(!z)U-=B;else break}return E.descent=V-F,E.fontSize=E.ascent+E.descent,rt._fonts[T]=E,E}static clearMetrics(T=""){T?delete rt._fonts[T]:rt._fonts={}}static get _canvas(){var T;if(!rt.__canvas){let E;try{const C=new OffscreenCanvas(0,0);if((T=C.getContext("2d",contextSettings))!=null&&T.measureText)return rt.__canvas=C,C;E=settings.ADAPTER.createCanvas()}catch{E=settings.ADAPTER.createCanvas()}E.width=E.height=10,rt.__canvas=E}return rt.__canvas}static get _context(){return rt.__context||(rt.__context=rt._canvas.getContext("2d",contextSettings)),rt.__context}};_TextMetrics.METRICS_STRING="|ÉqÅ",_TextMetrics.BASELINE_SYMBOL="M",_TextMetrics.BASELINE_MULTIPLIER=1.4,_TextMetrics.HEIGHT_MULTIPLIER=2,_TextMetrics.graphemeSegmenter=(()=>{if(typeof(Intl==null?void 0:Intl.Segmenter)=="function"){const A=new Intl.Segmenter;return T=>[...A.segment(T)].map(E=>E.segment)}return A=>[...A]})(),_TextMetrics.experimentalLetterSpacing=!1,_TextMetrics._fonts={},_TextMetrics._newlines=[10,13],_TextMetrics._breakingSpaces=[9,32,8192,8193,8194,8195,8196,8197,8198,8200,8201,8202,8287,12288];let TextMetrics=_TextMetrics;const genericFontFamilies=["serif","sans-serif","monospace","cursive","fantasy","system-ui"],_TextStyle=class ui{constructor(T){this.styleID=0,this.reset(),deepCopyProperties(this,T,T)}clone(){const T={};return deepCopyProperties(T,this,ui.defaultStyle),new ui(T)}reset(){deepCopyProperties(this,ui.defaultStyle,ui.defaultStyle)}get align(){return this._align}set align(T){this._align!==T&&(this._align=T,this.styleID++)}get breakWords(){return this._breakWords}set breakWords(T){this._breakWords!==T&&(this._breakWords=T,this.styleID++)}get dropShadow(){return this._dropShadow}set dropShadow(T){this._dropShadow!==T&&(this._dropShadow=T,this.styleID++)}get dropShadowAlpha(){return this._dropShadowAlpha}set dropShadowAlpha(T){this._dropShadowAlpha!==T&&(this._dropShadowAlpha=T,this.styleID++)}get dropShadowAngle(){return this._dropShadowAngle}set dropShadowAngle(T){this._dropShadowAngle!==T&&(this._dropShadowAngle=T,this.styleID++)}get dropShadowBlur(){return this._dropShadowBlur}set dropShadowBlur(T){this._dropShadowBlur!==T&&(this._dropShadowBlur=T,this.styleID++)}get dropShadowColor(){return this._dropShadowColor}set dropShadowColor(T){const E=getColor(T);this._dropShadowColor!==E&&(this._dropShadowColor=E,this.styleID++)}get dropShadowDistance(){return this._dropShadowDistance}set dropShadowDistance(T){this._dropShadowDistance!==T&&(this._dropShadowDistance=T,this.styleID++)}get fill(){return this._fill}set fill(T){const E=getColor(T);this._fill!==E&&(this._fill=E,this.styleID++)}get fillGradientType(){return this._fillGradientType}set fillGradientType(T){this._fillGradientType!==T&&(this._fillGradientType=T,this.styleID++)}get fillGradientStops(){return this._fillGradientStops}set fillGradientStops(T){areArraysEqual(this._fillGradientStops,T)||(this._fillGradientStops=T,this.styleID++)}get fontFamily(){return this._fontFamily}set fontFamily(T){this.fontFamily!==T&&(this._fontFamily=T,this.styleID++)}get fontSize(){return this._fontSize}set fontSize(T){this._fontSize!==T&&(this._fontSize=T,this.styleID++)}get fontStyle(){return this._fontStyle}set fontStyle(T){this._fontStyle!==T&&(this._fontStyle=T,this.styleID++)}get fontVariant(){return this._fontVariant}set fontVariant(T){this._fontVariant!==T&&(this._fontVariant=T,this.styleID++)}get fontWeight(){return this._fontWeight}set fontWeight(T){this._fontWeight!==T&&(this._fontWeight=T,this.styleID++)}get letterSpacing(){return this._letterSpacing}set letterSpacing(T){this._letterSpacing!==T&&(this._letterSpacing=T,this.styleID++)}get lineHeight(){return this._lineHeight}set lineHeight(T){this._lineHeight!==T&&(this._lineHeight=T,this.styleID++)}get leading(){return this._leading}set leading(T){this._leading!==T&&(this._leading=T,this.styleID++)}get lineJoin(){return this._lineJoin}set lineJoin(T){this._lineJoin!==T&&(this._lineJoin=T,this.styleID++)}get miterLimit(){return this._miterLimit}set miterLimit(T){this._miterLimit!==T&&(this._miterLimit=T,this.styleID++)}get padding(){return this._padding}set padding(T){this._padding!==T&&(this._padding=T,this.styleID++)}get stroke(){return this._stroke}set stroke(T){const E=getColor(T);this._stroke!==E&&(this._stroke=E,this.styleID++)}get strokeThickness(){return this._strokeThickness}set strokeThickness(T){this._strokeThickness!==T&&(this._strokeThickness=T,this.styleID++)}get textBaseline(){return this._textBaseline}set textBaseline(T){this._textBaseline!==T&&(this._textBaseline=T,this.styleID++)}get trim(){return this._trim}set trim(T){this._trim!==T&&(this._trim=T,this.styleID++)}get whiteSpace(){return this._whiteSpace}set whiteSpace(T){this._whiteSpace!==T&&(this._whiteSpace=T,this.styleID++)}get wordWrap(){return this._wordWrap}set wordWrap(T){this._wordWrap!==T&&(this._wordWrap=T,this.styleID++)}get wordWrapWidth(){return this._wordWrapWidth}set wordWrapWidth(T){this._wordWrapWidth!==T&&(this._wordWrapWidth=T,this.styleID++)}toFontString(){const T=typeof this.fontSize=="number"?`${this.fontSize}px`:this.fontSize;let E=this.fontFamily;Array.isArray(this.fontFamily)||(E=this.fontFamily.split(","));for(let C=E.length-1;C>=0;C--){let P=E[C].trim();!/([\"\'])[^\'\"]+\1/.test(P)&&!genericFontFamilies.includes(P)&&(P=`"${P}"`),E[C]=P}return`${this.fontStyle} ${this.fontVariant} ${this.fontWeight} ${T} ${E.join(",")}`}};_TextStyle.defaultStyle={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",leading:0,letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,whiteSpace:"pre",wordWrap:!1,wordWrapWidth:100};let TextStyle=_TextStyle;function getColor(A){const T=Color.shared,E=C=>{const P=T.setValue(C);return P.alpha===1?P.toHex():P.toRgbaString()};return Array.isArray(A)?A.map(E):E(A)}function areArraysEqual(A,T){if(!Array.isArray(A)||!Array.isArray(T)||A.length!==T.length)return!1;for(let E=0;E<A.length;++E)if(A[E]!==T[E])return!1;return!0}function deepCopyProperties(A,T,E){for(const C in E)Array.isArray(T[C])?A[C]=T[C].slice():A[C]=T[C]}const defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_Text=class Sa extends Sprite{constructor(T,E,C){let P=!1;C||(C=settings.ADAPTER.createCanvas(),P=!0),C.width=3,C.height=3;const I=Texture.from(C);I.orig=new Rectangle,I.trim=new Rectangle,super(I),this._ownCanvas=P,this.canvas=C,this.context=C.getContext("2d",{willReadFrequently:!0}),this._resolution=Sa.defaultResolution??settings.RESOLUTION,this._autoResolution=Sa.defaultAutoResolution,this._text=null,this._style=null,this._styleListener=null,this._font="",this.text=T,this.style=E,this.localStyleID=-1}static get experimentalLetterSpacing(){return TextMetrics.experimentalLetterSpacing}static set experimentalLetterSpacing(T){deprecation("7.1.0","Text.experimentalLetterSpacing is deprecated, use TextMetrics.experimentalLetterSpacing"),TextMetrics.experimentalLetterSpacing=T}updateText(T){const E=this._style;if(this.localStyleID!==E.styleID&&(this.dirty=!0,this.localStyleID=E.styleID),!this.dirty&&T)return;this._font=this._style.toFontString();const C=this.context,P=TextMetrics.measureText(this._text||" ",this._style,this._style.wordWrap,this.canvas),I=P.width,R=P.height,F=P.lines,O=P.lineHeight,D=P.lineWidths,L=P.maxLineWidth,B=P.fontProperties;this.canvas.width=Math.ceil(Math.ceil(Math.max(1,I)+E.padding*2)*this._resolution),this.canvas.height=Math.ceil(Math.ceil(Math.max(1,R)+E.padding*2)*this._resolution),C.scale(this._resolution,this._resolution),C.clearRect(0,0,this.canvas.width,this.canvas.height),C.font=this._font,C.lineWidth=E.strokeThickness,C.textBaseline=E.textBaseline,C.lineJoin=E.lineJoin,C.miterLimit=E.miterLimit;let V,U;const z=E.dropShadow?2:1;for(let W=0;W<z;++W){const Z=E.dropShadow&&W===0,X=Z?Math.ceil(Math.max(1,R)+E.padding*2):0,K=X*this._resolution;if(Z){C.fillStyle="black",C.strokeStyle="black";const Q=E.dropShadowColor,J=E.dropShadowBlur*this._resolution,te=E.dropShadowDistance*this._resolution;C.shadowColor=Color.shared.setValue(Q).setAlpha(E.dropShadowAlpha).toRgbaString(),C.shadowBlur=J,C.shadowOffsetX=Math.cos(E.dropShadowAngle)*te,C.shadowOffsetY=Math.sin(E.dropShadowAngle)*te+K}else C.fillStyle=this._generateFillStyle(E,F,P),C.strokeStyle=E.stroke,C.shadowColor="black",C.shadowBlur=0,C.shadowOffsetX=0,C.shadowOffsetY=0;let Y=(O-B.fontSize)/2;O-B.fontSize<0&&(Y=0);for(let Q=0;Q<F.length;Q++)V=E.strokeThickness/2,U=E.strokeThickness/2+Q*O+B.ascent+Y,E.align==="right"?V+=L-D[Q]:E.align==="center"&&(V+=(L-D[Q])/2),E.stroke&&E.strokeThickness&&this.drawLetterSpacing(F[Q],V+E.padding,U+E.padding-X,!0),E.fill&&this.drawLetterSpacing(F[Q],V+E.padding,U+E.padding-X)}this.updateTexture()}drawLetterSpacing(T,E,C,P=!1){const I=this._style.letterSpacing;let R=!1;if(TextMetrics.experimentalLetterSpacingSupported&&(TextMetrics.experimentalLetterSpacing?(this.context.letterSpacing=`${I}px`,this.context.textLetterSpacing=`${I}px`,R=!0):(this.context.letterSpacing="0px",this.context.textLetterSpacing="0px")),I===0||R){P?this.context.strokeText(T,E,C):this.context.fillText(T,E,C);return}let F=E;const O=TextMetrics.graphemeSegmenter(T);let D=this.context.measureText(T).width,L=0;for(let B=0;B<O.length;++B){const V=O[B];P?this.context.strokeText(V,F,C):this.context.fillText(V,F,C);let U="";for(let z=B+1;z<O.length;++z)U+=O[z];L=this.context.measureText(U).width,F+=D-L+I,D=L}}updateTexture(){const T=this.canvas;if(this._style.trim){const R=trimCanvas(T);R.data&&(T.width=R.width,T.height=R.height,this.context.putImageData(R.data,0,0))}const E=this._texture,C=this._style,P=C.trim?0:C.padding,I=E.baseTexture;E.trim.width=E._frame.width=T.width/this._resolution,E.trim.height=E._frame.height=T.height/this._resolution,E.trim.x=-P,E.trim.y=-P,E.orig.width=E._frame.width-P*2,E.orig.height=E._frame.height-P*2,this._onTextureUpdate(),I.setRealSize(T.width,T.height,this._resolution),E.updateUvs(),this.dirty=!1}_render(T){this._autoResolution&&this._resolution!==T.resolution&&(this._resolution=T.resolution,this.dirty=!0),this.updateText(!0),super._render(T)}updateTransform(){this.updateText(!0),super.updateTransform()}getBounds(T,E){return this.updateText(!0),this._textureID===-1&&(T=!1),super.getBounds(T,E)}getLocalBounds(T){return this.updateText(!0),super.getLocalBounds.call(this,T)}_calculateBounds(){this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_generateFillStyle(T,E,C){const P=T.fill;if(Array.isArray(P)){if(P.length===1)return P[0]}else return P;let I;const R=T.dropShadow?T.dropShadowDistance:0,F=T.padding||0,O=this.canvas.width/this._resolution-R-F*2,D=this.canvas.height/this._resolution-R-F*2,L=P.slice(),B=T.fillGradientStops.slice();if(!B.length){const V=L.length+1;for(let U=1;U<V;++U)B.push(U/V)}if(L.unshift(P[0]),B.unshift(0),L.push(P[P.length-1]),B.push(1),T.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){I=this.context.createLinearGradient(O/2,F,O/2,D+F);const V=C.fontProperties.fontSize+T.strokeThickness;for(let U=0;U<E.length;U++){const z=C.lineHeight*(U-1)+V,W=C.lineHeight*U;let Z=W;U>0&&z>W&&(Z=(W+z)/2);const X=W+V,K=C.lineHeight*(U+1);let Y=X;U+1<E.length&&K<X&&(Y=(X+K)/2);const Q=(Y-Z)/D;for(let J=0;J<L.length;J++){let te=0;typeof B[J]=="number"?te=B[J]:te=J/L.length;let ie=Math.min(1,Math.max(0,Z/D+te*Q));ie=Number(ie.toFixed(5)),I.addColorStop(ie,L[J])}}}else{I=this.context.createLinearGradient(F,D/2,O+F,D/2);const V=L.length+1;let U=1;for(let z=0;z<L.length;z++){let W;typeof B[z]=="number"?W=B[z]:W=U/V,I.addColorStop(W,L[z]),U++}}return I}destroy(T){typeof T=="boolean"&&(T={children:T}),T=Object.assign({},defaultDestroyOptions,T),super.destroy(T),this._ownCanvas&&(this.canvas.height=this.canvas.width=0),this.context=null,this.canvas=null,this._style=null}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width}set width(T){this.updateText(!0);const E=sign(this.scale.x)||1;this.scale.x=E*T/this._texture.orig.width,this._width=T}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height}set height(T){this.updateText(!0);const E=sign(this.scale.y)||1;this.scale.y=E*T/this._texture.orig.height,this._height=T}get style(){return this._style}set style(T){T=T||{},T instanceof TextStyle?this._style=T:this._style=new TextStyle(T),this.localStyleID=-1,this.dirty=!0}get text(){return this._text}set text(T){T=String(T??""),this._text!==T&&(this._text=T,this.dirty=!0)}get resolution(){return this._resolution}set resolution(T){this._autoResolution=!1,this._resolution!==T&&(this._resolution=T,this.dirty=!0)}};_Text.defaultAutoResolution=!0;let Text=_Text;class CountLimiter{constructor(T){this.maxItemsPerFrame=T,this.itemsLeft=0}beginFrame(){this.itemsLeft=this.maxItemsPerFrame}allowedToUpload(){return this.itemsLeft-- >0}}function findMultipleBaseTextures(A,T){var C;let E=!1;if((C=A==null?void 0:A._textures)!=null&&C.length){for(let P=0;P<A._textures.length;P++)if(A._textures[P]instanceof Texture){const I=A._textures[P].baseTexture;T.includes(I)||(T.push(I),E=!0)}}return E}function findBaseTexture(A,T){if(A.baseTexture instanceof BaseTexture){const E=A.baseTexture;return T.includes(E)||T.push(E),!0}return!1}function findTexture(A,T){if(A._texture&&A._texture instanceof Texture){const E=A._texture.baseTexture;return T.includes(E)||T.push(E),!0}return!1}function drawText(A,T){return T instanceof Text?(T.updateText(!0),!0):!1}function calculateTextStyle(A,T){if(T instanceof TextStyle){const E=T.toFontString();return TextMetrics.measureFont(E),!0}return!1}function findText(A,T){if(A instanceof Text){T.includes(A.style)||T.push(A.style),T.includes(A)||T.push(A);const E=A._texture.baseTexture;return T.includes(E)||T.push(E),!0}return!1}function findTextStyle(A,T){return A instanceof TextStyle?(T.includes(A)||T.push(A),!0):!1}const _BasePrepare=class Ql{constructor(T){this.limiter=new CountLimiter(Ql.uploadsPerFrame),this.renderer=T,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=()=>{this.queue&&this.prepareItems()},this.registerFindHook(findText),this.registerFindHook(findTextStyle),this.registerFindHook(findMultipleBaseTextures),this.registerFindHook(findBaseTexture),this.registerFindHook(findTexture),this.registerUploadHook(drawText),this.registerUploadHook(calculateTextStyle)}upload(T){return new Promise(E=>{T&&this.add(T),this.queue.length?(this.completes.push(E),this.ticking||(this.ticking=!0,Ticker$1.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY))):E()})}tick(){setTimeout(this.delayedTick,0)}prepareItems(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){const T=this.queue[0];let E=!1;if(T&&!T._destroyed){for(let C=0,P=this.uploadHooks.length;C<P;C++)if(this.uploadHooks[C](this.uploadHookHelper,T)){this.queue.shift(),E=!0;break}}E||this.queue.shift()}if(this.queue.length)Ticker$1.system.addOnce(this.tick,this,UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;const T=this.completes.slice(0);this.completes.length=0;for(let E=0,C=T.length;E<C;E++)T[E]()}}registerFindHook(T){return T&&this.addHooks.push(T),this}registerUploadHook(T){return T&&this.uploadHooks.push(T),this}add(T){for(let E=0,C=this.addHooks.length;E<C&&!this.addHooks[E](T,this.queue);E++);if(T instanceof Container)for(let E=T.children.length-1;E>=0;E--)this.add(T.children[E]);return this}destroy(){this.ticking&&Ticker$1.system.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null}};_BasePrepare.uploadsPerFrame=4;let BasePrepare=_BasePrepare;Object.defineProperties(settings,{UPLOADS_PER_FRAME:{get(){return BasePrepare.uploadsPerFrame},set(A){deprecation("7.1.0","settings.UPLOADS_PER_FRAME is deprecated, use prepare.BasePrepare.uploadsPerFrame"),BasePrepare.uploadsPerFrame=A}}});function uploadBaseTextures(A,T){return T instanceof BaseTexture?(T._glTextures[A.CONTEXT_UID]||A.texture.bind(T),!0):!1}function uploadGraphics(A,T){if(!(T instanceof Graphics$1))return!1;const{geometry:E}=T;T.finishPoly(),E.updateBatches();const{batches:C}=E;for(let P=0;P<C.length;P++){const{texture:I}=C[P].style;I&&uploadBaseTextures(A,I.baseTexture)}return E.batchable||A.geometry.bind(E,T._resolveDirectShader(A)),!0}function findGraphics(A,T){return A instanceof Graphics$1?(T.push(A),!0):!1}class Prepare extends BasePrepare{constructor(T){super(T),this.uploadHookHelper=this.renderer,this.registerFindHook(findGraphics),this.registerUploadHook(uploadBaseTextures),this.registerUploadHook(uploadGraphics)}}Prepare.extension={name:"prepare",type:ExtensionType.RendererSystem};extensions$1.add(Prepare);class AnimatedSprite extends Sprite{constructor(T,E=!0){super(T[0]instanceof Texture?T[0]:T[0].texture),this._textures=null,this._durations=null,this._autoUpdate=E,this._isConnectedToTicker=!1,this.animationSpeed=1,this.loop=!0,this.updateAnchor=!1,this.onComplete=null,this.onFrameChange=null,this.onLoop=null,this._currentTime=0,this._playing=!1,this._previousFrame=null,this.textures=T}stop(){this._playing&&(this._playing=!1,this._autoUpdate&&this._isConnectedToTicker&&(Ticker$1.shared.remove(this.update,this),this._isConnectedToTicker=!1))}play(){this._playing||(this._playing=!0,this._autoUpdate&&!this._isConnectedToTicker&&(Ticker$1.shared.add(this.update,this,UPDATE_PRIORITY.HIGH),this._isConnectedToTicker=!0))}gotoAndStop(T){this.stop(),this.currentFrame=T}gotoAndPlay(T){this.currentFrame=T,this.play()}update(T){if(!this._playing)return;const E=this.animationSpeed*T,C=this.currentFrame;if(this._durations!==null){let P=this._currentTime%1*this._durations[this.currentFrame];for(P+=E/60*1e3;P<0;)this._currentTime--,P+=this._durations[this.currentFrame];const I=Math.sign(this.animationSpeed*T);for(this._currentTime=Math.floor(this._currentTime);P>=this._durations[this.currentFrame];)P-=this._durations[this.currentFrame]*I,this._currentTime+=I;this._currentTime+=P/this._durations[this.currentFrame]}else this._currentTime+=E;this._currentTime<0&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):C!==this.currentFrame&&(this.loop&&this.onLoop&&(this.animationSpeed>0&&this.currentFrame<C||this.animationSpeed<0&&this.currentFrame>C)&&this.onLoop(),this.updateTexture())}updateTexture(){const T=this.currentFrame;this._previousFrame!==T&&(this._previousFrame=T,this._texture=this._textures[T],this._textureID=-1,this._textureTrimmedID=-1,this._cachedTint=16777215,this.uvs=this._texture._uvs.uvsFloat32,this.updateAnchor&&this._anchor.copyFrom(this._texture.defaultAnchor),this.onFrameChange&&this.onFrameChange(this.currentFrame))}destroy(T){this.stop(),super.destroy(T),this.onComplete=null,this.onFrameChange=null,this.onLoop=null}static fromFrames(T){const E=[];for(let C=0;C<T.length;++C)E.push(Texture.from(T[C]));return new AnimatedSprite(E)}static fromImages(T){const E=[];for(let C=0;C<T.length;++C)E.push(Texture.from(T[C]));return new AnimatedSprite(E)}get totalFrames(){return this._textures.length}get textures(){return this._textures}set textures(T){if(T[0]instanceof Texture)this._textures=T,this._durations=null;else{this._textures=[],this._durations=[];for(let E=0;E<T.length;E++)this._textures.push(T[E].texture),this._durations.push(T[E].time)}this._previousFrame=null,this.gotoAndStop(0),this.updateTexture()}get currentFrame(){let T=Math.floor(this._currentTime)%this._textures.length;return T<0&&(T+=this._textures.length),T}set currentFrame(T){if(T<0||T>this.totalFrames-1)throw new Error(`[AnimatedSprite]: Invalid frame index value ${T}, expected to be between 0 and totalFrames ${this.totalFrames}.`);const E=this.currentFrame;this._currentTime=T,E!==this.currentFrame&&this.updateTexture()}get playing(){return this._playing}get autoUpdate(){return this._autoUpdate}set autoUpdate(T){T!==this._autoUpdate&&(this._autoUpdate=T,!this._autoUpdate&&this._isConnectedToTicker?(Ticker$1.shared.remove(this.update,this),this._isConnectedToTicker=!1):this._autoUpdate&&!this._isConnectedToTicker&&this._playing&&(Ticker$1.shared.add(this.update,this),this._isConnectedToTicker=!0))}}var gl2FragmentSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

in vec2 vTextureCoord;

out vec4 fragmentColor;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    vec4 texSample = texture(uSampler, coord, unclamped == coord ? 0.0f : -32.0f);// lod-bias very negative to force lod 0

    fragmentColor = texSample * uColor;
}
`,gl2VertexSrc=`#version 300 es
#define SHADER_NAME Tiling-Sprite-300

precision lowp float;

in vec2 aVertexPosition;
in vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

out vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,gl1FragmentSrc=`#version 100
#ifdef GL_EXT_shader_texture_lod
    #extension GL_EXT_shader_texture_lod : enable
#endif
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;
uniform mat3 uMapCoord;
uniform vec4 uClampFrame;
uniform vec2 uClampOffset;

void main(void)
{
    vec2 coord = vTextureCoord + ceil(uClampOffset - vTextureCoord);
    coord = (uMapCoord * vec3(coord, 1.0)).xy;
    vec2 unclamped = coord;
    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);

    #ifdef GL_EXT_shader_texture_lod
        vec4 texSample = unclamped == coord
            ? texture2D(uSampler, coord) 
            : texture2DLodEXT(uSampler, coord, 0);
    #else
        vec4 texSample = texture2D(uSampler, coord);
    #endif

    gl_FragColor = texSample * uColor;
}
`,gl1VertexSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-100

precision lowp float;

attribute vec2 aVertexPosition;
attribute vec2 aTextureCoord;

uniform mat3 projectionMatrix;
uniform mat3 translationMatrix;
uniform mat3 uTransform;

varying vec2 vTextureCoord;

void main(void)
{
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);

    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;
}
`,fragmentSimpleSrc=`#version 100
#define SHADER_NAME Tiling-Sprite-Simple-100

precision lowp float;

varying vec2 vTextureCoord;

uniform sampler2D uSampler;
uniform vec4 uColor;

void main(void)
{
    vec4 texSample = texture2D(uSampler, vTextureCoord);
    gl_FragColor = texSample * uColor;
}
`;const tempMat=new Matrix;class TilingSpriteRenderer extends ObjectRenderer{constructor(T){super(T),T.runners.contextChange.add(this),this.quad=new QuadUv,this.state=State.for2d()}contextChange(){const T=this.renderer,E={globals:T.globalUniforms};this.simpleShader=Shader.from(gl1VertexSrc,fragmentSimpleSrc,E),this.shader=T.context.webGLVersion>1?Shader.from(gl2VertexSrc,gl2FragmentSrc,E):Shader.from(gl1VertexSrc,gl1FragmentSrc,E)}render(T){const E=this.renderer,C=this.quad;let P=C.vertices;P[0]=P[6]=T._width*-T.anchor.x,P[1]=P[3]=T._height*-T.anchor.y,P[2]=P[4]=T._width*(1-T.anchor.x),P[5]=P[7]=T._height*(1-T.anchor.y);const I=T.uvRespectAnchor?T.anchor.x:0,R=T.uvRespectAnchor?T.anchor.y:0;P=C.uvs,P[0]=P[6]=-I,P[1]=P[3]=-R,P[2]=P[4]=1-I,P[5]=P[7]=1-R,C.invalidate();const F=T._texture,O=F.baseTexture,D=O.alphaMode>0,L=T.tileTransform.localTransform,B=T.uvMatrix;let V=O.isPowerOfTwo&&F.frame.width===O.width&&F.frame.height===O.height;V&&(O._glTextures[E.CONTEXT_UID]?V=O.wrapMode!==WRAP_MODES.CLAMP:O.wrapMode===WRAP_MODES.CLAMP&&(O.wrapMode=WRAP_MODES.REPEAT));const U=V?this.simpleShader:this.shader,z=F.width,W=F.height,Z=T._width,X=T._height;tempMat.set(L.a*z/Z,L.b*z/X,L.c*W/Z,L.d*W/X,L.tx/Z,L.ty/X),tempMat.invert(),V?tempMat.prepend(B.mapCoord):(U.uniforms.uMapCoord=B.mapCoord.toArray(!0),U.uniforms.uClampFrame=B.uClampFrame,U.uniforms.uClampOffset=B.uClampOffset),U.uniforms.uTransform=tempMat.toArray(!0),U.uniforms.uColor=Color.shared.setValue(T.tint).premultiply(T.worldAlpha,D).toArray(U.uniforms.uColor),U.uniforms.translationMatrix=T.transform.worldTransform.toArray(!0),U.uniforms.uSampler=F,E.shader.bind(U),E.geometry.bind(C),this.state.blendMode=correctBlendMode(T.blendMode,D),E.state.set(this.state),E.geometry.draw(this.renderer.gl.TRIANGLES,6,0)}}TilingSpriteRenderer.extension={name:"tilingSprite",type:ExtensionType.RendererPlugin};extensions$1.add(TilingSpriteRenderer);const _Spritesheet=class di{constructor(T,E,C=null){this.linkedSheets=[],this._texture=T instanceof Texture?T:null,this.baseTexture=T instanceof BaseTexture?T:this._texture.baseTexture,this.textures={},this.animations={},this.data=E;const P=this.baseTexture.resource;this.resolution=this._updateResolution(C||(P?P.url:null)),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}_updateResolution(T=null){const{scale:E}=this.data.meta;let C=getResolutionOfUrl(T,null);return C===null&&(C=typeof E=="number"?E:parseFloat(E??"1")),C!==1&&this.baseTexture.setResolution(C),C}parse(){return new Promise(T=>{this._callback=T,this._batchIndex=0,this._frameKeys.length<=di.BATCH_SIZE?(this._processFrames(0),this._processAnimations(),this._parseComplete()):this._nextBatch()})}_processFrames(T){let E=T;const C=di.BATCH_SIZE;for(;E-T<C&&E<this._frameKeys.length;){const P=this._frameKeys[E],I=this._frames[P],R=I.frame;if(R){let F=null,O=null;const D=I.trimmed!==!1&&I.sourceSize?I.sourceSize:I.frame,L=new Rectangle(0,0,Math.floor(D.w)/this.resolution,Math.floor(D.h)/this.resolution);I.rotated?F=new Rectangle(Math.floor(R.x)/this.resolution,Math.floor(R.y)/this.resolution,Math.floor(R.h)/this.resolution,Math.floor(R.w)/this.resolution):F=new Rectangle(Math.floor(R.x)/this.resolution,Math.floor(R.y)/this.resolution,Math.floor(R.w)/this.resolution,Math.floor(R.h)/this.resolution),I.trimmed!==!1&&I.spriteSourceSize&&(O=new Rectangle(Math.floor(I.spriteSourceSize.x)/this.resolution,Math.floor(I.spriteSourceSize.y)/this.resolution,Math.floor(R.w)/this.resolution,Math.floor(R.h)/this.resolution)),this.textures[P]=new Texture(this.baseTexture,F,L,O,I.rotated?2:0,I.anchor,I.borders),Texture.addToCache(this.textures[P],P.toString())}E++}}_processAnimations(){const T=this.data.animations||{};for(const E in T){this.animations[E]=[];for(let C=0;C<T[E].length;C++){const P=T[E][C];this.animations[E].push(this.textures[P])}}}_parseComplete(){const T=this._callback;this._callback=null,this._batchIndex=0,T.call(this,this.textures)}_nextBatch(){this._processFrames(this._batchIndex*di.BATCH_SIZE),this._batchIndex++,setTimeout(()=>{this._batchIndex*di.BATCH_SIZE<this._frameKeys.length?this._nextBatch():(this._processAnimations(),this._parseComplete())},0)}destroy(T=!1){var E;for(const C in this.textures)this.textures[C].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,T&&((E=this._texture)==null||E.destroy(),this.baseTexture.destroy()),this._texture=null,this.baseTexture=null,this.linkedSheets=[]}};_Spritesheet.BATCH_SIZE=1e3;let Spritesheet=_Spritesheet;const validImages=["jpg","png","jpeg","avif","webp"];function getCacheableAssets(A,T,E){const C={};if(A.forEach(P=>{C[P]=T}),Object.keys(T.textures).forEach(P=>{C[P]=T.textures[P]}),!E){const P=path.dirname(A[0]);T.linkedSheets.forEach((I,R)=>{const F=getCacheableAssets([`${P}/${T.data.meta.related_multi_packs[R]}`],I,!0);Object.assign(C,F)})}return C}const spritesheetAsset={extension:ExtensionType.Asset,cache:{test:A=>A instanceof Spritesheet,getCacheableAssets:(A,T)=>getCacheableAssets(A,T,!1)},resolver:{test:A=>{const T=A.split("?")[0].split("."),E=T.pop(),C=T.pop();return E==="json"&&validImages.includes(C)},parse:A=>{var E;const T=A.split(".");return{resolution:parseFloat(((E=settings.RETINA_PREFIX.exec(A))==null?void 0:E[1])??"1"),format:T[T.length-2],src:A}}},loader:{name:"spritesheetLoader",extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},async testParse(A,T){return path.extname(T.src).toLowerCase()===".json"&&!!A.frames},async parse(A,T,E){var O,D;let C=path.dirname(T.src);C&&C.lastIndexOf("/")!==C.length-1&&(C+="/");let P=C+A.meta.image;P=copySearchParams(P,T.src);const I=(await E.load([P]))[P],R=new Spritesheet(I.baseTexture,A,T.src);await R.parse();const F=(O=A==null?void 0:A.meta)==null?void 0:O.related_multi_packs;if(Array.isArray(F)){const L=[];for(const V of F){if(typeof V!="string")continue;let U=C+V;(D=T.data)!=null&&D.ignoreMultiPack||(U=copySearchParams(U,T.src),L.push(E.load({src:U,data:{ignoreMultiPack:!0}})))}const B=await Promise.all(L);R.linkedSheets=B,B.forEach(V=>{V.linkedSheets=[R].concat(R.linkedSheets.filter(U=>U!==V))})}return R},unload(A){A.destroy(!0)}}};extensions$1.add(spritesheetAsset);class BitmapFontData{constructor(){this.info=[],this.common=[],this.page=[],this.char=[],this.kerning=[],this.distanceField=[]}}class TextFormat{static test(T){return typeof T=="string"&&T.startsWith("info face=")}static parse(T){const E=T.match(/^[a-z]+\s+.+$/gm),C={info:[],common:[],page:[],char:[],chars:[],kerning:[],kernings:[],distanceField:[]};for(const I in E){const R=E[I].match(/^[a-z]+/gm)[0],F=E[I].match(/[a-zA-Z]+=([^\s"']+|"([^"]*)")/gm),O={};for(const D in F){const L=F[D].split("="),B=L[0],V=L[1].replace(/"/gm,""),U=parseFloat(V),z=isNaN(U)?V:U;O[B]=z}C[R].push(O)}const P=new BitmapFontData;return C.info.forEach(I=>P.info.push({face:I.face,size:parseInt(I.size,10)})),C.common.forEach(I=>P.common.push({lineHeight:parseInt(I.lineHeight,10)})),C.page.forEach(I=>P.page.push({id:parseInt(I.id,10),file:I.file})),C.char.forEach(I=>P.char.push({id:parseInt(I.id,10),page:parseInt(I.page,10),x:parseInt(I.x,10),y:parseInt(I.y,10),width:parseInt(I.width,10),height:parseInt(I.height,10),xoffset:parseInt(I.xoffset,10),yoffset:parseInt(I.yoffset,10),xadvance:parseInt(I.xadvance,10)})),C.kerning.forEach(I=>P.kerning.push({first:parseInt(I.first,10),second:parseInt(I.second,10),amount:parseInt(I.amount,10)})),C.distanceField.forEach(I=>P.distanceField.push({distanceRange:parseInt(I.distanceRange,10),fieldType:I.fieldType})),P}}class XMLFormat{static test(T){const E=T;return typeof T!="string"&&"getElementsByTagName"in T&&E.getElementsByTagName("page").length&&E.getElementsByTagName("info")[0].getAttribute("face")!==null}static parse(T){const E=new BitmapFontData,C=T.getElementsByTagName("info"),P=T.getElementsByTagName("common"),I=T.getElementsByTagName("page"),R=T.getElementsByTagName("char"),F=T.getElementsByTagName("kerning"),O=T.getElementsByTagName("distanceField");for(let D=0;D<C.length;D++)E.info.push({face:C[D].getAttribute("face"),size:parseInt(C[D].getAttribute("size"),10)});for(let D=0;D<P.length;D++)E.common.push({lineHeight:parseInt(P[D].getAttribute("lineHeight"),10)});for(let D=0;D<I.length;D++)E.page.push({id:parseInt(I[D].getAttribute("id"),10)||0,file:I[D].getAttribute("file")});for(let D=0;D<R.length;D++){const L=R[D];E.char.push({id:parseInt(L.getAttribute("id"),10),page:parseInt(L.getAttribute("page"),10)||0,x:parseInt(L.getAttribute("x"),10),y:parseInt(L.getAttribute("y"),10),width:parseInt(L.getAttribute("width"),10),height:parseInt(L.getAttribute("height"),10),xoffset:parseInt(L.getAttribute("xoffset"),10),yoffset:parseInt(L.getAttribute("yoffset"),10),xadvance:parseInt(L.getAttribute("xadvance"),10)})}for(let D=0;D<F.length;D++)E.kerning.push({first:parseInt(F[D].getAttribute("first"),10),second:parseInt(F[D].getAttribute("second"),10),amount:parseInt(F[D].getAttribute("amount"),10)});for(let D=0;D<O.length;D++)E.distanceField.push({fieldType:O[D].getAttribute("fieldType"),distanceRange:parseInt(O[D].getAttribute("distanceRange"),10)});return E}}class XMLStringFormat{static test(T){return typeof T=="string"&&T.includes("<font>")?XMLFormat.test(settings.ADAPTER.parseXML(T)):!1}static parse(T){return XMLFormat.parse(settings.ADAPTER.parseXML(T))}}const formats=[TextFormat,XMLFormat,XMLStringFormat];function autoDetectFormat(A){for(let T=0;T<formats.length;T++)if(formats[T].test(A))return formats[T];return null}function generateFillStyle(A,T,E,C,P,I){const R=E.fill;if(Array.isArray(R)){if(R.length===1)return R[0]}else return R;let F;const O=E.dropShadow?E.dropShadowDistance:0,D=E.padding||0,L=A.width/C-O-D*2,B=A.height/C-O-D*2,V=R.slice(),U=E.fillGradientStops.slice();if(!U.length){const z=V.length+1;for(let W=1;W<z;++W)U.push(W/z)}if(V.unshift(R[0]),U.unshift(0),V.push(R[R.length-1]),U.push(1),E.fillGradientType===TEXT_GRADIENT.LINEAR_VERTICAL){F=T.createLinearGradient(L/2,D,L/2,B+D);let z=0;const W=(I.fontProperties.fontSize+E.strokeThickness)/B;for(let Z=0;Z<P.length;Z++){const X=I.lineHeight*Z;for(let K=0;K<V.length;K++){let Y=0;typeof U[K]=="number"?Y=U[K]:Y=K/V.length;const Q=X/B+Y*W;let J=Math.max(z,Q);J=Math.min(J,1),F.addColorStop(J,V[K]),z=J}}}else{F=T.createLinearGradient(D,B/2,L+D,B/2);const z=V.length+1;let W=1;for(let Z=0;Z<V.length;Z++){let X;typeof U[Z]=="number"?X=U[Z]:X=W/z,F.addColorStop(X,V[Z]),W++}}return F}function drawGlyph(A,T,E,C,P,I,R){const F=E.text,O=E.fontProperties;T.translate(C,P),T.scale(I,I);const D=R.strokeThickness/2,L=-(R.strokeThickness/2);if(T.font=R.toFontString(),T.lineWidth=R.strokeThickness,T.textBaseline=R.textBaseline,T.lineJoin=R.lineJoin,T.miterLimit=R.miterLimit,T.fillStyle=generateFillStyle(A,T,R,I,[F],E),T.strokeStyle=R.stroke,R.dropShadow){const B=R.dropShadowColor,V=R.dropShadowBlur*I,U=R.dropShadowDistance*I;T.shadowColor=Color.shared.setValue(B).setAlpha(R.dropShadowAlpha).toRgbaString(),T.shadowBlur=V,T.shadowOffsetX=Math.cos(R.dropShadowAngle)*U,T.shadowOffsetY=Math.sin(R.dropShadowAngle)*U}else T.shadowColor="black",T.shadowBlur=0,T.shadowOffsetX=0,T.shadowOffsetY=0;R.stroke&&R.strokeThickness&&T.strokeText(F,D,L+E.lineHeight-O.descent),R.fill&&T.fillText(F,D,L+E.lineHeight-O.descent),T.setTransform(1,0,0,1,0,0),T.fillStyle="rgba(0, 0, 0, 0)"}function extractCharCode(A){return A.codePointAt?A.codePointAt(0):A.charCodeAt(0)}function splitTextToCharacters(A){return Array.from?Array.from(A):A.split("")}function resolveCharacters(A){typeof A=="string"&&(A=[A]);const T=[];for(let E=0,C=A.length;E<C;E++){const P=A[E];if(Array.isArray(P)){if(P.length!==2)throw new Error(`[BitmapFont]: Invalid character range length, expecting 2 got ${P.length}.`);const I=P[0].charCodeAt(0),R=P[1].charCodeAt(0);if(R<I)throw new Error("[BitmapFont]: Invalid character range.");for(let F=I,O=R;F<=O;F++)T.push(String.fromCharCode(F))}else T.push(...splitTextToCharacters(P))}if(T.length===0)throw new Error("[BitmapFont]: Empty set when resolving characters.");return T}const _BitmapFont=class zr{constructor(T,E,C){var L;const[P]=T.info,[I]=T.common,[R]=T.page,[F]=T.distanceField,O=getResolutionOfUrl(R.file),D={};this._ownsTextures=C,this.font=P.face,this.size=P.size,this.lineHeight=I.lineHeight/O,this.chars={},this.pageTextures=D;for(let B=0;B<T.page.length;B++){const{id:V,file:U}=T.page[B];D[V]=E instanceof Array?E[B]:E[U],F!=null&&F.fieldType&&F.fieldType!=="none"&&(D[V].baseTexture.alphaMode=ALPHA_MODES.NO_PREMULTIPLIED_ALPHA,D[V].baseTexture.mipmap=MIPMAP_MODES.OFF)}for(let B=0;B<T.char.length;B++){const{id:V,page:U}=T.char[B];let{x:z,y:W,width:Z,height:X,xoffset:K,yoffset:Y,xadvance:Q}=T.char[B];z/=O,W/=O,Z/=O,X/=O,K/=O,Y/=O,Q/=O;const J=new Rectangle(z+D[U].frame.x/O,W+D[U].frame.y/O,Z,X);this.chars[V]={xOffset:K,yOffset:Y,xAdvance:Q,kerning:{},texture:new Texture(D[U].baseTexture,J),page:U}}for(let B=0;B<T.kerning.length;B++){let{first:V,second:U,amount:z}=T.kerning[B];V/=O,U/=O,z/=O,this.chars[U]&&(this.chars[U].kerning[V]=z)}this.distanceFieldRange=F==null?void 0:F.distanceRange,this.distanceFieldType=((L=F==null?void 0:F.fieldType)==null?void 0:L.toLowerCase())??"none"}destroy(){for(const T in this.chars)this.chars[T].texture.destroy(),this.chars[T].texture=null;for(const T in this.pageTextures)this._ownsTextures&&this.pageTextures[T].destroy(!0),this.pageTextures[T]=null;this.chars=null,this.pageTextures=null}static install(T,E,C){let P;if(T instanceof BitmapFontData)P=T;else{const R=autoDetectFormat(T);if(!R)throw new Error("Unrecognized data format for font.");P=R.parse(T)}E instanceof Texture&&(E=[E]);const I=new zr(P,E,C);return zr.available[I.font]=I,I}static uninstall(T){const E=zr.available[T];if(!E)throw new Error(`No font found named '${T}'`);E.destroy(),delete zr.available[T]}static from(T,E,C){if(!T)throw new Error("[BitmapFont] Property `name` is required.");const{chars:P,padding:I,resolution:R,textureWidth:F,textureHeight:O,...D}=Object.assign({},zr.defaultOptions,C),L=resolveCharacters(P),B=E instanceof TextStyle?E:new TextStyle(E),V=F,U=new BitmapFontData;U.info[0]={face:B.fontFamily,size:B.fontSize},U.common[0]={lineHeight:B.fontSize};let z=0,W=0,Z,X,K,Y=0;const Q=[];for(let te=0;te<L.length;te++){Z||(Z=settings.ADAPTER.createCanvas(),Z.width=F,Z.height=O,X=Z.getContext("2d"),K=new BaseTexture(Z,{resolution:R,...D}),Q.push(new Texture(K)),U.page.push({id:Q.length-1,file:""}));const ie=L[te],ne=TextMetrics.measureText(ie,B,!1,Z),he=ne.width,ve=Math.ceil(ne.height),ye=Math.ceil((B.fontStyle==="italic"?2:1)*he);if(W>=O-ve*R){if(W===0)throw new Error(`[BitmapFont] textureHeight ${O}px is too small (fontFamily: '${B.fontFamily}', fontSize: ${B.fontSize}px, char: '${ie}')`);--te,Z=null,X=null,K=null,W=0,z=0,Y=0;continue}if(Y=Math.max(ve+ne.fontProperties.descent,Y),ye*R+z>=V){if(z===0)throw new Error(`[BitmapFont] textureWidth ${F}px is too small (fontFamily: '${B.fontFamily}', fontSize: ${B.fontSize}px, char: '${ie}')`);--te,W+=Y*R,W=Math.ceil(W),z=0,Y=0;continue}drawGlyph(Z,X,ne,z,W,R,B);const de=extractCharCode(ne.text);U.char.push({id:de,page:Q.length-1,x:z/R,y:W/R,width:ye,height:ve,xoffset:0,yoffset:0,xadvance:he-(B.dropShadow?B.dropShadowDistance:0)-(B.stroke?B.strokeThickness:0)}),z+=(ye+2*I)*R,z=Math.ceil(z)}if(!(C!=null&&C.skipKerning))for(let te=0,ie=L.length;te<ie;te++){const ne=L[te];for(let he=0;he<ie;he++){const ve=L[he],ye=X.measureText(ne).width,de=X.measureText(ve).width,fe=X.measureText(ne+ve).width-(ye+de);fe&&U.kerning.push({first:extractCharCode(ne),second:extractCharCode(ve),amount:fe})}}const J=new zr(U,Q,!0);return zr.available[T]!==void 0&&zr.uninstall(T),zr.available[T]=J,J}};_BitmapFont.ALPHA=[["a","z"],["A","Z"]," "],_BitmapFont.NUMERIC=[["0","9"]],_BitmapFont.ALPHANUMERIC=[["a","z"],["A","Z"],["0","9"]," "],_BitmapFont.ASCII=[[" ","~"]],_BitmapFont.defaultOptions={resolution:1,textureWidth:512,textureHeight:512,padding:4,chars:_BitmapFont.ALPHANUMERIC},_BitmapFont.available={};let BitmapFont=_BitmapFont;var msdfFrag=`// Pixi texture info\r
varying vec2 vTextureCoord;\r
uniform sampler2D uSampler;\r
\r
// Tint\r
uniform vec4 uColor;\r
\r
// on 2D applications fwidth is screenScale / glyphAtlasScale * distanceFieldRange\r
uniform float uFWidth;\r
\r
void main(void) {\r
\r
  // To stack MSDF and SDF we need a non-pre-multiplied-alpha texture.\r
  vec4 texColor = texture2D(uSampler, vTextureCoord);\r
\r
  // MSDF\r
  float median = texColor.r + texColor.g + texColor.b -\r
                  min(texColor.r, min(texColor.g, texColor.b)) -\r
                  max(texColor.r, max(texColor.g, texColor.b));\r
  // SDF\r
  median = min(median, texColor.a);\r
\r
  float screenPxDistance = uFWidth * (median - 0.5);\r
  float alpha = clamp(screenPxDistance + 0.5, 0.0, 1.0);\r
  if (median < 0.01) {\r
    alpha = 0.0;\r
  } else if (median > 0.99) {\r
    alpha = 1.0;\r
  }\r
\r
  // Gamma correction for coverage-like alpha\r
  float luma = dot(uColor.rgb, vec3(0.299, 0.587, 0.114));\r
  float gamma = mix(1.0, 1.0 / 2.2, luma);\r
  float coverage = pow(uColor.a * alpha, gamma);  \r
\r
  // NPM Textures, NPM outputs\r
  gl_FragColor = vec4(uColor.rgb, coverage);\r
}\r
`,msdfVert=`// Mesh material default fragment\r
attribute vec2 aVertexPosition;\r
attribute vec2 aTextureCoord;\r
\r
uniform mat3 projectionMatrix;\r
uniform mat3 translationMatrix;\r
uniform mat3 uTextureMatrix;\r
\r
varying vec2 vTextureCoord;\r
\r
void main(void)\r
{\r
    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\r
\r
    vTextureCoord = (uTextureMatrix * vec3(aTextureCoord, 1.0)).xy;\r
}\r
`;const pageMeshDataDefaultPageMeshData=[],pageMeshDataMSDFPageMeshData=[],charRenderDataPool=[],_BitmapText=class Jl extends Container{constructor(T,E={}){super();const{align:C,tint:P,maxWidth:I,letterSpacing:R,fontName:F,fontSize:O}=Object.assign({},Jl.styleDefaults,E);if(!BitmapFont.available[F])throw new Error(`Missing BitmapFont "${F}"`);this._activePagesMeshData=[],this._textWidth=0,this._textHeight=0,this._align=C,this._tintColor=new Color(P),this._font=void 0,this._fontName=F,this._fontSize=O,this.text=T,this._maxWidth=I,this._maxLineHeight=0,this._letterSpacing=R,this._anchor=new ObservablePoint(()=>{this.dirty=!0},this,0,0),this._roundPixels=settings.ROUND_PIXELS,this.dirty=!0,this._resolution=settings.RESOLUTION,this._autoResolution=!0,this._textureCache={}}updateText(){var ye;const T=BitmapFont.available[this._fontName],E=this.fontSize,C=E/T.size,P=new Point,I=[],R=[],F=[],O=this._text.replace(/(?:\r\n|\r)/g,`
`)||" ",D=splitTextToCharacters(O),L=this._maxWidth*T.size/E,B=T.distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;let V=null,U=0,z=0,W=0,Z=-1,X=0,K=0,Y=0,Q=0;for(let de=0;de<D.length;de++){const fe=D[de],ue=extractCharCode(fe);if(/(?:\s)/.test(fe)&&(Z=de,X=U,Q++),fe==="\r"||fe===`
`){R.push(U),F.push(-1),z=Math.max(z,U),++W,++K,P.x=0,P.y+=T.lineHeight,V=null,Q=0;continue}const ge=T.chars[ue];if(!ge)continue;V&&ge.kerning[V]&&(P.x+=ge.kerning[V]);const ae=charRenderDataPool.pop()||{texture:Texture.EMPTY,line:0,charCode:0,prevSpaces:0,position:new Point};ae.texture=ge.texture,ae.line=W,ae.charCode=ue,ae.position.x=Math.round(P.x+ge.xOffset+this._letterSpacing/2),ae.position.y=Math.round(P.y+ge.yOffset),ae.prevSpaces=Q,I.push(ae),U=ae.position.x+Math.max(ge.xAdvance-ge.xOffset,ge.texture.orig.width),P.x+=ge.xAdvance+this._letterSpacing,Y=Math.max(Y,ge.yOffset+ge.texture.height),V=ue,Z!==-1&&L>0&&P.x>L&&(++K,removeItems(I,1+Z-K,1+de-Z),de=Z,Z=-1,R.push(X),F.push(I.length>0?I[I.length-1].prevSpaces:0),z=Math.max(z,X),W++,P.x=0,P.y+=T.lineHeight,V=null,Q=0)}const J=D[D.length-1];J!=="\r"&&J!==`
`&&(/(?:\s)/.test(J)&&(U=X),R.push(U),z=Math.max(z,U),F.push(-1));const te=[];for(let de=0;de<=W;de++){let fe=0;this._align==="right"?fe=z-R[de]:this._align==="center"?fe=(z-R[de])/2:this._align==="justify"&&(fe=F[de]<0?0:(z-R[de])/F[de]),te.push(fe)}const ie=I.length,ne={},he=[],ve=this._activePagesMeshData;B.push(...ve);for(let de=0;de<ie;de++){const fe=I[de].texture,ue=fe.baseTexture.uid;if(!ne[ue]){let ge=B.pop();if(!ge){const ce=new MeshGeometry;let se,le;T.distanceFieldType==="none"?(se=new MeshMaterial(Texture.EMPTY),le=BLEND_MODES.NORMAL):(se=new MeshMaterial(Texture.EMPTY,{program:Program.from(msdfVert,msdfFrag),uniforms:{uFWidth:0}}),le=BLEND_MODES.NORMAL_NPM);const _e=new Mesh(ce,se);_e.blendMode=le,ge={index:0,indexCount:0,vertexCount:0,uvsCount:0,total:0,mesh:_e,vertices:null,uvs:null,indices:null}}ge.index=0,ge.indexCount=0,ge.vertexCount=0,ge.uvsCount=0,ge.total=0;const{_textureCache:ae}=this;ae[ue]=ae[ue]||new Texture(fe.baseTexture),ge.mesh.texture=ae[ue],ge.mesh.tint=this._tintColor.value,he.push(ge),ne[ue]=ge}ne[ue].total++}for(let de=0;de<ve.length;de++)he.includes(ve[de])||this.removeChild(ve[de].mesh);for(let de=0;de<he.length;de++)he[de].mesh.parent!==this&&this.addChild(he[de].mesh);this._activePagesMeshData=he;for(const de in ne){const fe=ne[de],ue=fe.total;if(!(((ye=fe.indices)==null?void 0:ye.length)>6*ue)||fe.vertices.length<Mesh.BATCHABLE_SIZE*2)fe.vertices=new Float32Array(4*2*ue),fe.uvs=new Float32Array(4*2*ue),fe.indices=new Uint16Array(6*ue);else{const ge=fe.total,ae=fe.vertices;for(let ce=ge*4*2;ce<ae.length;ce++)ae[ce]=0}fe.mesh.size=6*ue}for(let de=0;de<ie;de++){const fe=I[de];let ue=fe.position.x+te[fe.line]*(this._align==="justify"?fe.prevSpaces:1);this._roundPixels&&(ue=Math.round(ue));const ge=ue*C,ae=fe.position.y*C,ce=fe.texture,se=ne[ce.baseTexture.uid],le=ce.frame,_e=ce._uvs,me=se.index++;se.indices[me*6+0]=0+me*4,se.indices[me*6+1]=1+me*4,se.indices[me*6+2]=2+me*4,se.indices[me*6+3]=0+me*4,se.indices[me*6+4]=2+me*4,se.indices[me*6+5]=3+me*4,se.vertices[me*8+0]=ge,se.vertices[me*8+1]=ae,se.vertices[me*8+2]=ge+le.width*C,se.vertices[me*8+3]=ae,se.vertices[me*8+4]=ge+le.width*C,se.vertices[me*8+5]=ae+le.height*C,se.vertices[me*8+6]=ge,se.vertices[me*8+7]=ae+le.height*C,se.uvs[me*8+0]=_e.x0,se.uvs[me*8+1]=_e.y0,se.uvs[me*8+2]=_e.x1,se.uvs[me*8+3]=_e.y1,se.uvs[me*8+4]=_e.x2,se.uvs[me*8+5]=_e.y2,se.uvs[me*8+6]=_e.x3,se.uvs[me*8+7]=_e.y3}this._textWidth=z*C,this._textHeight=(P.y+T.lineHeight)*C;for(const de in ne){const fe=ne[de];if(this.anchor.x!==0||this.anchor.y!==0){let ce=0;const se=this._textWidth*this.anchor.x,le=this._textHeight*this.anchor.y;for(let _e=0;_e<fe.total;_e++)fe.vertices[ce++]-=se,fe.vertices[ce++]-=le,fe.vertices[ce++]-=se,fe.vertices[ce++]-=le,fe.vertices[ce++]-=se,fe.vertices[ce++]-=le,fe.vertices[ce++]-=se,fe.vertices[ce++]-=le}this._maxLineHeight=Y*C;const ue=fe.mesh.geometry.getBuffer("aVertexPosition"),ge=fe.mesh.geometry.getBuffer("aTextureCoord"),ae=fe.mesh.geometry.getIndex();ue.data=fe.vertices,ge.data=fe.uvs,ae.data=fe.indices,ue.update(),ge.update(),ae.update()}for(let de=0;de<I.length;de++)charRenderDataPool.push(I[de]);this._font=T,this.dirty=!1}updateTransform(){this.validate(),this.containerUpdateTransform()}_render(T){this._autoResolution&&this._resolution!==T.resolution&&(this._resolution=T.resolution,this.dirty=!0);const{distanceFieldRange:E,distanceFieldType:C,size:P}=BitmapFont.available[this._fontName];if(C!=="none"){const{a:I,b:R,c:F,d:O}=this.worldTransform,D=Math.sqrt(I*I+R*R),L=Math.sqrt(F*F+O*O),B=(Math.abs(D)+Math.abs(L))/2,V=this.fontSize/P,U=T._view.resolution;for(const z of this._activePagesMeshData)z.mesh.shader.uniforms.uFWidth=B*E*V*U}super._render(T)}getLocalBounds(){return this.validate(),super.getLocalBounds()}validate(){const T=BitmapFont.available[this._fontName];if(!T)throw new Error(`Missing BitmapFont "${this._fontName}"`);this._font!==T&&(this.dirty=!0),this.dirty&&this.updateText()}get tint(){return this._tintColor.value}set tint(T){if(this.tint!==T){this._tintColor.setValue(T);for(let E=0;E<this._activePagesMeshData.length;E++)this._activePagesMeshData[E].mesh.tint=T}}get align(){return this._align}set align(T){this._align!==T&&(this._align=T,this.dirty=!0)}get fontName(){return this._fontName}set fontName(T){if(!BitmapFont.available[T])throw new Error(`Missing BitmapFont "${T}"`);this._fontName!==T&&(this._fontName=T,this.dirty=!0)}get fontSize(){return this._fontSize??BitmapFont.available[this._fontName].size}set fontSize(T){this._fontSize!==T&&(this._fontSize=T,this.dirty=!0)}get anchor(){return this._anchor}set anchor(T){typeof T=="number"?this._anchor.set(T):this._anchor.copyFrom(T)}get text(){return this._text}set text(T){T=String(T??""),this._text!==T&&(this._text=T,this.dirty=!0)}get maxWidth(){return this._maxWidth}set maxWidth(T){this._maxWidth!==T&&(this._maxWidth=T,this.dirty=!0)}get maxLineHeight(){return this.validate(),this._maxLineHeight}get textWidth(){return this.validate(),this._textWidth}get letterSpacing(){return this._letterSpacing}set letterSpacing(T){this._letterSpacing!==T&&(this._letterSpacing=T,this.dirty=!0)}get roundPixels(){return this._roundPixels}set roundPixels(T){T!==this._roundPixels&&(this._roundPixels=T,this.dirty=!0)}get textHeight(){return this.validate(),this._textHeight}get resolution(){return this._resolution}set resolution(T){this._autoResolution=!1,this._resolution!==T&&(this._resolution=T,this.dirty=!0)}destroy(T){const{_textureCache:E}=this,C=BitmapFont.available[this._fontName].distanceFieldType==="none"?pageMeshDataDefaultPageMeshData:pageMeshDataMSDFPageMeshData;C.push(...this._activePagesMeshData);for(const P of this._activePagesMeshData)this.removeChild(P.mesh);this._activePagesMeshData=[],C.filter(P=>E[P.mesh.texture.baseTexture.uid]).forEach(P=>{P.mesh.texture=Texture.EMPTY});for(const P in E)E[P].destroy(),delete E[P];this._font=null,this._tintColor=null,this._textureCache=null,super.destroy(T)}};_BitmapText.styleDefaults={align:"left",tint:16777215,maxWidth:0,letterSpacing:0};const validExtensions=[".xml",".fnt"],loadBitmapFont={extension:{type:ExtensionType.LoadParser,priority:LoaderParserPriority.Normal},name:"loadBitmapFont",test(A){return validExtensions.includes(path.extname(A).toLowerCase())},async testParse(A){return TextFormat.test(A)||XMLStringFormat.test(A)},async parse(A,T,E){const C=TextFormat.test(A)?TextFormat.parse(A):XMLStringFormat.parse(A),{src:P}=T,{page:I}=C,R=[];for(let D=0;D<I.length;++D){const L=I[D].file;let B=path.join(path.dirname(P),L);B=copySearchParams(B,P),R.push(B)}const F=await E.load(R),O=R.map(D=>F[D]);return BitmapFont.install(C,O,!0)},async load(A,T){return(await settings.ADAPTER.fetch(A)).text()},unload(A){A.destroy()}};extensions$1.add(loadBitmapFont);const _HTMLTextStyle=class zn extends TextStyle{constructor(){super(...arguments),this._fonts=[],this._overrides=[],this._stylesheet="",this.fontsDirty=!1}static from(T){return new zn(Object.keys(zn.defaultOptions).reduce((E,C)=>({...E,[C]:T[C]}),{}))}cleanFonts(){this._fonts.length>0&&(this._fonts.forEach(T=>{URL.revokeObjectURL(T.src),T.refs--,T.refs===0&&(T.fontFace&&document.fonts.delete(T.fontFace),delete zn.availableFonts[T.originalUrl])}),this.fontFamily="Arial",this._fonts.length=0,this.styleID++,this.fontsDirty=!0)}loadFont(T,E={}){const{availableFonts:C}=zn;if(C[T]){const P=C[T];return this._fonts.push(P),P.refs++,this.styleID++,this.fontsDirty=!0,Promise.resolve()}return settings.ADAPTER.fetch(T).then(P=>P.blob()).then(async P=>new Promise((I,R)=>{const F=URL.createObjectURL(P),O=new FileReader;O.onload=()=>I([F,O.result]),O.onerror=R,O.readAsDataURL(P)})).then(async([P,I])=>{const R=Object.assign({family:path.basename(T,path.extname(T)),weight:"normal",style:"normal",display:"auto",src:P,dataSrc:I,refs:1,originalUrl:T,fontFace:null},E);C[T]=R,this._fonts.push(R),this.styleID++;const F=new FontFace(R.family,`url(${R.src})`,{weight:R.weight,style:R.style,display:R.display});R.fontFace=F,await F.load(),document.fonts.add(F),await document.fonts.ready,this.styleID++,this.fontsDirty=!0})}addOverride(...T){const E=T.filter(C=>!this._overrides.includes(C));E.length>0&&(this._overrides.push(...E),this.styleID++)}removeOverride(...T){const E=T.filter(C=>this._overrides.includes(C));E.length>0&&(this._overrides=this._overrides.filter(C=>!E.includes(C)),this.styleID++)}toCSS(T){return[`transform: scale(${T})`,"transform-origin: top left","display: inline-block",`color: ${this.normalizeColor(this.fill)}`,`font-size: ${this.fontSize}px`,`font-family: ${this.fontFamily}`,`font-weight: ${this.fontWeight}`,`font-style: ${this.fontStyle}`,`font-variant: ${this.fontVariant}`,`letter-spacing: ${this.letterSpacing}px`,`text-align: ${this.align}`,`padding: ${this.padding}px`,`white-space: ${this.whiteSpace}`,...this.lineHeight?[`line-height: ${this.lineHeight}px`]:[],...this.wordWrap?[`word-wrap: ${this.breakWords?"break-all":"break-word"}`,`max-width: ${this.wordWrapWidth}px`]:[],...this.strokeThickness?[`-webkit-text-stroke-width: ${this.strokeThickness}px`,`-webkit-text-stroke-color: ${this.normalizeColor(this.stroke)}`,`text-stroke-width: ${this.strokeThickness}px`,`text-stroke-color: ${this.normalizeColor(this.stroke)}`,"paint-order: stroke"]:[],...this.dropShadow?[this.dropShadowToCSS()]:[],...this._overrides].join(";")}toGlobalCSS(){return this._fonts.reduce((T,E)=>`${T}
            @font-face {
                font-family: "${E.family}";
                src: url('${E.dataSrc}');
                font-weight: ${E.weight};
                font-style: ${E.style};
                font-display: ${E.display};
            }`,this._stylesheet)}get stylesheet(){return this._stylesheet}set stylesheet(T){this._stylesheet!==T&&(this._stylesheet=T,this.styleID++)}normalizeColor(T){return Array.isArray(T)&&(T=rgb2hex(T)),typeof T=="number"?hex2string(T):T}dropShadowToCSS(){let T=this.normalizeColor(this.dropShadowColor);const E=this.dropShadowAlpha,C=Math.round(Math.cos(this.dropShadowAngle)*this.dropShadowDistance),P=Math.round(Math.sin(this.dropShadowAngle)*this.dropShadowDistance);T.startsWith("#")&&E<1&&(T+=(E*255|0).toString(16).padStart(2,"0"));const I=`${C}px ${P}px`;return this.dropShadowBlur>0?`text-shadow: ${I} ${this.dropShadowBlur}px ${T}`:`text-shadow: ${I} ${T}`}reset(){Object.assign(this,zn.defaultOptions)}onBeforeDraw(){const{fontsDirty:T}=this;return this.fontsDirty=!1,this.isSafari&&this._fonts.length>0&&T?new Promise(E=>setTimeout(E,100)):Promise.resolve()}get isSafari(){const{userAgent:T}=settings.ADAPTER.getNavigator();return/^((?!chrome|android).)*safari/i.test(T)}set fillGradientStops(T){console.warn("[HTMLTextStyle] fillGradientStops is not supported by HTMLText")}get fillGradientStops(){return super.fillGradientStops}set fillGradientType(T){console.warn("[HTMLTextStyle] fillGradientType is not supported by HTMLText")}get fillGradientType(){return super.fillGradientType}set miterLimit(T){console.warn("[HTMLTextStyle] miterLimit is not supported by HTMLText")}get miterLimit(){return super.miterLimit}set trim(T){console.warn("[HTMLTextStyle] trim is not supported by HTMLText")}get trim(){return super.trim}set textBaseline(T){console.warn("[HTMLTextStyle] textBaseline is not supported by HTMLText")}get textBaseline(){return super.textBaseline}set leading(T){console.warn("[HTMLTextStyle] leading is not supported by HTMLText")}get leading(){return super.leading}set lineJoin(T){console.warn("[HTMLTextStyle] lineJoin is not supported by HTMLText")}get lineJoin(){return super.lineJoin}};_HTMLTextStyle.availableFonts={},_HTMLTextStyle.defaultOptions={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,padding:0,stroke:"black",strokeThickness:0,whiteSpace:"normal",wordWrap:!1,wordWrapWidth:100};let HTMLTextStyle=_HTMLTextStyle;const _HTMLText=class Hn extends Sprite{constructor(T="",E={}){super(Texture.EMPTY),this._text=null,this._style=null,this._autoResolution=!0,this.localStyleID=-1,this.dirty=!1,this._updateID=0,this.ownsStyle=!1;const C=new Image,P=Texture.from(C,{scaleMode:settings.SCALE_MODE,resourceOptions:{autoLoad:!1}});P.orig=new Rectangle,P.trim=new Rectangle,this.texture=P;const I="http://www.w3.org/2000/svg",R="http://www.w3.org/1999/xhtml",F=document.createElementNS(I,"svg"),O=document.createElementNS(I,"foreignObject"),D=document.createElementNS(R,"div"),L=document.createElementNS(R,"style");O.setAttribute("width","10000"),O.setAttribute("height","10000"),O.style.overflow="hidden",F.appendChild(O),this.maxWidth=Hn.defaultMaxWidth,this.maxHeight=Hn.defaultMaxHeight,this._domElement=D,this._styleElement=L,this._svgRoot=F,this._foreignObject=O,this._foreignObject.appendChild(L),this._foreignObject.appendChild(D),this._image=C,this._loadImage=new Image,this._autoResolution=Hn.defaultAutoResolution,this._resolution=Hn.defaultResolution??settings.RESOLUTION,this.text=T,this.style=E}measureText(T){var L,B;const{text:E,style:C,resolution:P}=Object.assign({text:this._text,style:this._style,resolution:this._resolution},T);Object.assign(this._domElement,{innerHTML:E,style:C.toCSS(P)}),this._styleElement.textContent=C.toGlobalCSS(),document.body.appendChild(this._svgRoot);const I=this._domElement.getBoundingClientRect();this._svgRoot.remove();const{width:R,height:F}=I;(R>this.maxWidth||F>this.maxHeight)&&console.warn("[HTMLText] Large expanse of text, increase HTMLText.maxWidth or HTMLText.maxHeight property.");const O=Math.min(this.maxWidth,Math.ceil(R)),D=Math.min(this.maxHeight,Math.ceil(F));return this._svgRoot.setAttribute("width",O.toString()),this._svgRoot.setAttribute("height",D.toString()),E!==this._text&&(this._domElement.innerHTML=this._text),C!==this._style&&(Object.assign(this._domElement,{style:(L=this._style)==null?void 0:L.toCSS(P)}),this._styleElement.textContent=(B=this._style)==null?void 0:B.toGlobalCSS()),{width:O+C.padding*2,height:D+C.padding*2}}async updateText(T=!0){const{style:E,_image:C,_loadImage:P}=this;if(this.localStyleID!==E.styleID&&(this.dirty=!0,this.localStyleID=E.styleID),!this.dirty&&T)return;const{width:I,height:R}=this.measureText();C.width=P.width=Math.ceil(Math.max(1,I)),C.height=P.height=Math.ceil(Math.max(1,R)),this._updateID++;const F=this._updateID;await new Promise(O=>{P.onload=async()=>{if(F<this._updateID){O();return}await E.onBeforeDraw(),C.src=P.src,P.onload=null,P.src="",this.updateTexture(),O()};const D=new XMLSerializer().serializeToString(this._svgRoot);P.src=`data:image/svg+xml;charset=utf8,${encodeURIComponent(D)}`})}get source(){return this._image}updateTexture(){const{style:T,texture:E,_image:C,resolution:P}=this,{padding:I}=T,{baseTexture:R}=E;E.trim.width=E._frame.width=C.width/P,E.trim.height=E._frame.height=C.height/P,E.trim.x=-I,E.trim.y=-I,E.orig.width=E._frame.width-I*2,E.orig.height=E._frame.height-I*2,this._onTextureUpdate(),R.setRealSize(C.width,C.height,P),this.dirty=!1}_render(T){this._autoResolution&&this._resolution!==T.resolution&&(this._resolution=T.resolution,this.dirty=!0),this.updateText(!0),super._render(T)}_renderCanvas(T){this._autoResolution&&this._resolution!==T.resolution&&(this._resolution=T.resolution,this.dirty=!0),this.updateText(!0),super._renderCanvas(T)}getLocalBounds(T){return this.updateText(!0),super.getLocalBounds(T)}_calculateBounds(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)}_onStyleChange(){this.dirty=!0}destroy(T){var C,P,I,R,F;typeof T=="boolean"&&(T={children:T}),T=Object.assign({},Hn.defaultDestroyOptions,T),super.destroy(T);const E=null;this.ownsStyle&&((C=this._style)==null||C.cleanFonts()),this._style=E,(P=this._svgRoot)==null||P.remove(),this._svgRoot=E,(I=this._domElement)==null||I.remove(),this._domElement=E,(R=this._foreignObject)==null||R.remove(),this._foreignObject=E,(F=this._styleElement)==null||F.remove(),this._styleElement=E,this._loadImage.src="",this._loadImage.onload=null,this._loadImage=E,this._image.src="",this._image=E}get width(){return this.updateText(!0),Math.abs(this.scale.x)*this._image.width/this.resolution}set width(T){this.updateText(!0);const E=sign(this.scale.x)||1;this.scale.x=E*T/this._image.width/this.resolution,this._width=T}get height(){return this.updateText(!0),Math.abs(this.scale.y)*this._image.height/this.resolution}set height(T){this.updateText(!0);const E=sign(this.scale.y)||1;this.scale.y=E*T/this._image.height/this.resolution,this._height=T}get style(){return this._style}set style(T){this._style!==T&&(T=T||{},T instanceof HTMLTextStyle?(this.ownsStyle=!1,this._style=T):T instanceof TextStyle?(console.warn("[HTMLText] Cloning TextStyle, if this is not what you want, use HTMLTextStyle"),this.ownsStyle=!0,this._style=HTMLTextStyle.from(T)):(this.ownsStyle=!0,this._style=new HTMLTextStyle(T)),this.localStyleID=-1,this.dirty=!0)}get text(){return this._text}set text(T){T=String(T===""||T===null||T===void 0?" ":T),T=this.sanitiseText(T),this._text!==T&&(this._text=T,this.dirty=!0)}get resolution(){return this._resolution}set resolution(T){this._autoResolution=!1,this._resolution!==T&&(this._resolution=T,this.dirty=!0)}sanitiseText(T){return T.replace(/<br>/gi,"<br/>").replace(/<hr>/gi,"<hr/>").replace(/&nbsp;/gi,"&#160;")}};_HTMLText.defaultDestroyOptions={texture:!0,children:!1,baseTexture:!0},_HTMLText.defaultMaxWidth=2024,_HTMLText.defaultMaxHeight=2024,_HTMLText.defaultAutoResolution=!0;function illustrationTemplate(A=new Graphics$1,T,E){return T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth)),[[0,-T*.98],[T*.84,T*.84],[0,T],[-T*.84,T*.84]].forEach(P=>{A.lineStyle(E,0),A.moveTo(0,0),A.lineTo(...P),A.endFill()}),A}function editorialTemplate(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=[0,0,-T*.33,-T*.83,T*.33,-T*.83],P=[-T*.33,T*.5,T*.33,T*.5,T*.33,T*.66,-T*.33,T*.66];return[C,P].forEach(R=>{A.lineStyle(E,0),A.drawPolygon(R),A.endFill()}),A}function serviceTemplate(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=[-T*.8,T*.33,T*.86,T*.33],P=[-T*.48,T*.85,T*.87,-T*.5],I=[C,P];return A.lineStyle(E,0),I.forEach(R=>{for(let F=0;F<R.length;F+=2){const O=R.slice(F,F+2);F===0?A.moveTo(...O):A.lineTo(...O)}A.endFill()}),A.drawCircle(T*.15,0,T*.5),A.endFill(),A}function uiTemplate(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=[-T*.83,-T*.5,T*.5,T*.83],P=[-T*.83,-T*.17,T*.17,T*.83];return[C,P].forEach(R=>{A.lineStyle(E,0);for(let F=0;F<R.length;F+=2){const O=R.slice(F,F+2);F===0?A.moveTo(...O):A.lineTo(...O)}A.endFill()}),A}function motionTemplate(A=new Graphics$1,T,E){return T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth)),A.lineStyle(E,0),A.moveTo(-T*.17,T*.83),A.lineTo(T*.83,-T*.17),A.endFill(),A.beginFill(16777215),A.lineStyle(E,0),A.drawCircle(T*.33,T*.33,T*.33/2),A.endFill(),A}function datavis(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=[0,0,T*.65,-T*.65],P=[T*.65,-T*.65,T*.65-T*.33,-T*.65],I=[T*.65,-T*.65,T*.65,-T*.65+T*.33],R=[C,P,I];return A.lineStyle(E,0),R.forEach(F=>{for(let O=0;O<F.length;O+=2){const D=F.slice(O,O+2);O===0?A.moveTo(...D):A.lineTo(...D)}A.endFill()}),A.beginFill(16777215),A.lineStyle(E,0),A.drawCircle(T*.65,-T*.65,T*.15),A.endFill(),A}function infograph(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=[0,0,-T*.75,-T*.75],P=[-T*.75,-T*.75+T*.15,-T*.75,-T*.75,-T*.75+T*.15,-T*.75],I=[-T*.65,-T*.65+T*.3,-T*.65,-T*.65,-T*.65+T*.3,-T*.65],R=[C,P,I];return A.lineStyle(E,0),R.forEach(F=>{for(let O=0;O<F.length;O+=2){const D=F.slice(O,O+2);O===0?A.moveTo(...D):A.lineTo(...D)}A.endFill()}),A}function otherInterfaces(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=T*.15/2,P=[-T*.33/2,0-C,T*.33/2,0-C,0,-T*.15-C],I=[-T*.33/2,0+C,T*.33/2,0+C,0,-T*.15+C];return A.lineStyle(E,0),A.drawPolygon(P),A.endFill(),A.beginFill(0),A.drawPolygon(I),A.endFill(),A}function infographicTemplate(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=[0,0,T*.5,T*.5,-T*.5,T*.5];A.lineStyle(E,0),A.drawPolygon(C),A.endFill();const P=[0,T*.33,T*.16,T*.5,-T*.16,T*.5];return A.beginFill(0),A.drawPolygon(P),A.endFill(),A}function presentationTemplate(A=new Graphics$1,T,E){return T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth)),A.lineStyle(E,0),A.drawCircle(0,0,T*.33/2),A.endFill(),A}function getRegPolyPoints(A,T,E,C,P=0){const I=[],R=E*.5/Math.cos(Math.PI/C),F=Math.PI/C+P,O=2*Math.PI/C;for(let D=0;D<C;D++){const L=A+R*Math.cos(F+O*D),B=T+R*Math.sin(F+O*D);I.push([L,B])}return I}function publicationTemplate(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=getRegPolyPoints(0,0,T*.33,4).flat(),P=[T*.33/2,-T*.15,T*.33/2,-T*.32,-T*.33/2,-T*.32,-T*.33/2,-T*.15];return A.beginFill(0),A.lineStyle(E,0),A.drawPolygon(C),A.endFill(),A.lineStyle(E,0),A.drawPolygon(P),A.endFill(),A}function reportTemplate(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=getRegPolyPoints(0,0,T*.33,4,Math.PI/4).flat();return A.beginFill(0),A.drawPolygon(C),A.endFill(),A}function siteEditorialTemplate(A=new Graphics$1,T,E){return T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth)),A.beginFill(0),A.lineStyle(0),A.arc(0,0,T*.33/2,-Math.PI/4,Math.PI/2+Math.PI/4),A.endFill(),A.lineStyle(E,0),A.drawCircle(0,0,T*.33/2),A.endFill(),A}function siteInstitutionalTemplate(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=getRegPolyPoints(0,0,T*.33,4),P=[...C];return P.splice(3,1),A.lineStyle(E,0),A.drawPolygon(C.flat()),A.endFill(),A.lineStyle(0),A.beginFill(0),A.drawPolygon(P.flat()),A.endFill(),A}function videoTemplate(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=[0,0,T*.12,T*.2252,-T*.12,T*.2252];return A.lineStyle(E,0),A.drawCircle(0,0,T*.33/2),A.endFill(),A.beginFill(0),A.drawPolygon(C),A.endFill(),A}function consultingTemplate(A=new Graphics$1,T,E){return T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth)),A.beginFill(16777215),A.lineStyle(E,0),A.drawCircle(0,0,T/2),A.endFill(),A}function digitalTemplate(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=getRegPolyPoints(0,0,T,4).flat();return A.beginFill(16777215),A.lineStyle(E,0),A.drawPolygon(C),A.endFill(),A}function printTemplate(A=new Graphics$1,T,E){T===void 0&&(T=get_store_value(nodeSize)),E===void 0&&(E=get_store_value(lineWidth));const C=getRegPolyPoints(0,0,T,6).flat();return A.beginFill(16777215),A.lineStyle(E,0,1),A.drawPolygon(C),A.endFill(),A}function goalTemplateFactory(A){return async function(T,{anchor:E=[.5,.9],rotateSprite:C=!0}={}){const P=get_store_value(categories).filter(F=>F.type==="goal"),I=P.map(F=>F.id).indexOf(A),R=P[I];return Assets.load("petal").then(F=>new Sprite(F)).then(F=>{F.anchor.set(...E),F.scale.set(get_store_value(nodeSize)/25),F.tint=new Color(R.data.color).toNumber(),F.blendMode=BLEND_MODES.MULTIPLY,C&&(F.rotation=I*2*Math.PI/P.length),T.addChild(F)})}}const templates={"channel.digital":digitalTemplate,"channel.impressa":printTemplate,"channel.consultoria":consultingTemplate,"product.site-editorial":siteEditorialTemplate,"product.outras-interfaces":otherInterfaces,"product.relatorios":reportTemplate,"product.apresentacao":presentationTemplate,"product.infografico":infographicTemplate,"product.publicacao":publicationTemplate,"product.site-institucional":siteInstitutionalTemplate,"product.video":videoTemplate,"design.user-interface":uiTemplate,"design.datavis":datavis,"design.ilustracao":illustrationTemplate,"design.design-de-servicos":serviceTemplate,"design.editorial":editorialTemplate,"design.infografia":infograph,"design.motion-graphics":motionTemplate,"goal.educacional":goalTemplateFactory("goal.educacional"),"goal.informacional":goalTemplateFactory("goal.informacional"),"goal.impacto-positivo":goalTemplateFactory("goal.impacto-positivo"),"goal.jornalistico-editorial":goalTemplateFactory("goal.jornalistico-editorial"),"goal.institucional":goalTemplateFactory("goal.institucional")},primaryTints=[8555258,13565292],secondaryTints=[7183868,16548461,16447874],angles=Array.from({length:3}).map((A,T)=>T/3*360);function getRandomSoundSprite(){const A=Assets.get("soundFX"),T=new AnimatedSprite(A.animations.tile);return T.anchor.x=.5,T.anchor.y=.5,T.loop=!1,T.zIndex=10,T.blendMode=BLEND_MODES.MULTIPLY,T.angle=angles[Math.floor(Math.random()*angles.length)],T.tint=Math.random()<.66?primaryTints[Math.floor(Math.random()*primaryTints.length)]:secondaryTints[Math.floor(Math.random()*secondaryTints.length)],T}class DeliverableContext{constructor(T,E){this.context=new Container,this.graphics=new Graphics$1,this.ids={background:["design.ilustracao","design.infografia","design.motion-graphics","design.editorial","design.user-interface","design.datavis","design.design-de-servicos"],base:["channel.digital","channel.impressa","channel.consultoria"],front:["product.video","product.publicacao","product.apresentacao","product.site-editorial","product.site-institucional","product.relatorios","product.outras-interfaces"],mask:["product.infografico"],sprite:["goal.educacional","goal.informacional","goal.impacto-positivo","goal.jornalistico-editorial","goal.institucional"]},this.toScene=(O,D)=>{D.add(this.tick),O.addChild(this.context)},this.addGraphics=O=>{let D;try{this.ids.sprite.includes(O)?D=templates[O](this.context):this.ids.mask.includes(O)?(D=templates[O](),D.mask=new Graphics$1(this.baseGraphics.geometry),D.addChild(D.mask),this.graphics.addChild(D)):D=templates[O](this.graphics)}catch(L){console.log(O,L,this.deliverable.categories)}return D},this.onpointerenter=()=>{hovered.set(this.deliverable)},this.onpointerleave=()=>{hovered.set(null)},this.select=()=>{selected.set(this.deliverable)},this.toggleEventMode=()=>{const O=!!this.deliverable.simulation.onSelectedState,D=this.deliverable.simulation.transition.running;this.context.eventMode=O||D?"none":"dynamic"},this.tick=()=>{const{fx:O,fy:D,rotation:L,renderable:B,alpha:V,scale:U}=this.deliverable.attr.render;this.context.alpha=V,this.context.renderable=B,this.context.x=O,this.context.y=D,this.context.rotation=L,this.context.scale.set(U)},this.deliverable=T,this.context.alpha=0,this.context.renderable=!1,this.context.cursor="pointer",this.context.eventMode="none",this.context.onpointerenter=this.onpointerenter,this.context.onpointerleave=this.onpointerleave,this.context.onpointerup=this.select,this.context.addChild(this.graphics),this.graphics.cacheAsBitmap=!0;const C=lodashExports.intersection(this.ids.base,E)[0],P=lodashExports.intersection(this.ids.background,E),I=lodashExports.intersection(this.ids.front,E),R=lodashExports.intersection(this.ids.mask,E),F=lodashExports.intersection(this.ids.sprite,E);return P.forEach(this.addGraphics),this.baseGraphics=this.addGraphics(C),R.forEach(this.addGraphics),I.forEach(this.addGraphics),this.loading=Promise.all(F.map(this.addGraphics)),this}animateSound(){const T=getRandomSoundSprite();T.x=this.context.x,T.y=this.context.y,this.context.parent.addChild(T),T.gotoAndPlay(0),T.onComplete=()=>{this.context.parent.removeChild(T),T.destroy()}}}class Deliverable{constructor(T,E){this.active=!0,this.selected=!1,this.radius=()=>this.active?get_store_value(nodeSize):0,this.tick=()=>{if(!(this.simulation.onSelectedState&&this.selected))if(this.simulation.onSelectedState===!0&&!this.selected)this.fx=void 0,this.fy=void 0,this.attr.render.fx=this.x,this.attr.render.fy=this.y;else if(this.simulation.onSelectedState==="leaving"&&!this.selected)this.attr.render.fy=this.y+this.attr.render.py;else{const{theta:C,radius:P,px:I,py:R}=this.attr.render;this.fx=this.attr.render.fx=Math.cos(C)*P+I,this.fy=this.attr.render.fy=Math.sin(C)*P+R}},this.setActive=(C,P,I,R,F)=>{this.active=!(C&&(this.year<C[0]||this.year>C[1])||I&&I.length>0&&!this.designs.some(O=>I.includes(O))||R&&R.length>0&&!this.goals.some(O=>R.includes(O))||F&&F.length>0&&!this.products.some(O=>F.includes(O))||P&&P.length>0&&!P.includes(this.industry))},this.handleSelected=C=>{this.selected=C&&this.id===C.id,this.context.toggleEventMode(),this.attr.selected(this.selected)},this.simulation=T,this.id=E.id,this.client=E.client,this.project=E.project,this.description=E.description,this.complexity=E.complexity,this.dt=E.dt,this.date=E.date,this.year=E.year,this.channel=E.channel,this.industry=E.industry,this.designs=E.design,this.goals=E.goal,this.products=E.product,this.categories=[E.channel,E.industry,...E.design,...E.goal,...E.product].flat(),this.attr=new AttributeController(this),this.context=new DeliverableContext(this,this.categories)}}class NodeAttributes{constructor(T,E){this.id=T,this.active=E.active,this.x=E.x,this.y=E.y,this.radius=E.radius,this.theta=E.theta,this.time=E.time}}const ongoing=writable$1(!1),finished=writable$1(!1),contentKeyIdx=writable$1();class TransitionController{constructor(T){this.queue=[],this.firstTransition=!1,this.running=!1,this.updateState=E=>{const C=this.cur;this.cur=E,this.running=!!E,!(!this.running&&C&&C.type==="exit")&&(this.simulation.handleTransition(this.running),this.simulation.getDeliverableNodes().forEach(P=>P.context.toggleEventMode()))},this.add=(E,C=!0)=>{if(this.simulation.onSelectedState){this.cleanQueue(),this.addSelectedLeaving(E);return}this.queue.push(E),C&&this.playNext()},this.addSelectedLeaving=E=>{const{attrId:C,layout:P,layoutSize:I}=E,R=()=>{this.simulation.onSelectedState="leaving"},F=()=>{this.simulation.onSelectedState=!1};this.queue.push({type:"exit",onStart:R,onComplete:F}),this.queue.push({type:"entrance",attrId:C,layout:P,layoutSize:I})},this.playNext=(E=!1)=>{if(!E&&(this.running||this.queue.length===0))return;const C=this.queue.shift();if(C.onStart&&C.onStart(),this.updateState(C),C.layout){const{layout:I,layoutSize:R,layoutData:F}=C,O={duration:C.type==="entrance"?0:750};this.simulation.zoom.updateTranslateExtent(I,R).updateScaleExtent(I).reposition(I,O)}const P=this.simulation.getDeliverableNodes().map(I=>I.attr.play(C).then());this.simulation.interface.setInterfaceLabels(C),Promise.all(P).catch(I=>console.error("Transition failed:",I)).finally(()=>{this.updateState(),C.onComplete&&C.onComplete(),this.firstTransition||(this.firstTransition=!0,ongoing.set(!0)),this.playNext()})},this.cleanQueue=()=>{for(;this.queue.length;){const{attrId:E}=this.queue.pop();E&&this.simulation.getDeliverableNodes().forEach(C=>C.attr.pop(E))}},this.simulation=T}}const cameraOffsetX=writable$1(0),cameraOffsetY=writable$1(0),zoom=writable$1(1);class DummyDeliverable{constructor(T){this.id=-1,this.fx=0,this.fy=0,this.r=0,this.radius=()=>this.r,this.tick=()=>{},this.handleSelected=E=>{const C=gsapWithCSS.timeline({overwrite:"auto",onUpdate:this.simulation.updateForceCollideRadius});if(E){const{fx:P,fy:I}=E.attr.render;let R;if(C.set(this,{fx:P,fy:I,r:0}),get_store_value(width)<768)R=Math.max(get_store_value(figureWidth),get_store_value(figureHeight))*.95*(1/get_store_value(zoom));else{const F=-get_store_value(cameraOffsetX),O=-get_store_value(cameraOffsetY);R=Math.max(get_store_value(figureWidth),get_store_value(figureHeight))*.4,C.to(this,{fx:F,fy:O,duration:.3,ease:quadInOut})}C.to(this,{r:R,duration:.15,ease:cubicInOut},"<")}else C.set(this,{r:0})},this.simulation=T}}function polarAngle(A,T){return Math.atan2(T[1]-A[1],T[0]-A[0])}function orientation(A,T,E){const C=(T[1]-A[1])*(E[0]-T[0])-(T[0]-A[0])*(E[1]-T[1]);return C===0?0:C>0?1:2}function grahamScan(A){const T=A.length;if(T<3)return A;const E=A.reduce((I,R)=>R[1]<I[1]||R[1]===I[1]&&R[0]<I[0]?R:I,A[0]),C=A.slice().sort((I,R)=>polarAngle(E,I)-polarAngle(E,R)),P=[E,C[0],C[1]];for(let I=2;I<T;I++){for(;P.length>1&&orientation(P[P.length-2],P[P.length-1],C[I])!==1;)P.pop();P.push(C[I])}return P}const LINK_STYLES={alpha:1,alphaHover:1,lineWidth:2,lineWidthHover:4,radius:0,join:LINE_JOIN.ROUND,cap:LINE_CAP.ROUND};class DeliverableGroup{constructor(T,E,C,P){this.context=new Graphics$1,this.active=!1,this.hovered=!1,this.render={lineWidth:LINK_STYLES.lineWidth,radius:LINK_STYLES.radius,alpha:LINK_STYLES.alpha,renderable:!1},this.toScene=(I,R)=>{I.addChild(this.context),R.add(this.tick)},this.tick=()=>{this.context.clear(),this.context.renderable=this.render.renderable;const I=this.deliverables.filter(D=>D.active).map(D=>grahamScan([D.attr.render.fx,D.attr.render.fy]));if(I.length<2)return;const R={width:this.render.lineWidth,color:this.color,alpha:this.render.alpha,join:LINK_STYLES.join,cap:LINK_STYLES.cap};this.context.lineStyle(R);const[F,O]=I[0];this.context.moveTo(F,O),I.slice(1).forEach(([D,L])=>{this.context.lineTo(D,L)}),this.context.lineStyle(0),this.context.beginFill(this.color,this.render.alpha),I.forEach(([D,L])=>{this.context.drawCircle(D,L,this.render.radius)}),this.context.endFill()},this.setHovered=I=>{const R=this.hovered;if(this.hovered=I,R!==this.hovered){const F=I?LINK_STYLES.lineWidthHover:LINK_STYLES.lineWidth,O=I?LINK_STYLES.alphaHover:LINK_STYLES.alpha,D=I?get_store_value(nodeSize):LINK_STYLES.radius;gsapWithCSS.to(this.render,{lineWidth:F,alpha:O,radius:D,duration:.3,ease:cubicInOut,overwrite:"auto"})}},this.setActive=I=>{const R=this.active,F=I;if(this.active=F,R===F)return;const O=gsapWithCSS.timeline({overwrite:!0});!R&&F?O.set(this.render,{lineWidth:0,alpha:0,renderable:!0}).to(this.render,{lineWidth:LINK_STYLES.lineWidth,duration:.5,ease:"elastic.out(2,1)",delay:Math.random()}).to(this.render,{alpha:LINK_STYLES.alphaHover*.5,duration:.5,ease:"power2.out"},"<").to(this.render,{alpha:LINK_STYLES.alpha,duration:.5,ease:"power2.in"}):R&&!F&&O.set(this.render,{alpha:LINK_STYLES.alpha,renderable:!1})},this.simulation=T,this.id=E,this.deliverables=C,this.color=P,this.context.blendMode=BLEND_MODES.MULTIPLY}}function center(A){return A[0]+(A[1]-A[0])/2}class SignalController{constructor(T){this.rejected=!1,this.setVisibility=E=>{const C=document.getElementById(this.id);if(!C)return;const P=gsapWithCSS.timeline({overwrite:!0});E?P.set(C,{display:"block"}).fromTo(C,{opacity:0},{opacity:1,duration:.5}):P.fromTo(C,{opacity:1},{opacity:0,duration:.5}).set(C,{display:"none"})},this.id=T}prepare(){this.rejected||this.timeoutId||(this.timeoutId=setTimeout(()=>{this.setVisibility(!0)},5e3))}stop(){this.timeoutId&&(clearTimeout(this.timeoutId),this.timeoutId=void 0),this.setVisibility(!1)}kill(){this.stop(),this.rejected=!0}}class ZoomController{constructor(T){return this.initialized=!1,this.userActions=!0,this.curTranslateExtentExceedsViewport=!1,this.initZoom=E=>{this.zoomBase=E,select(this.zoomBase).call(this.zoom).on("pointerup",this.handlePointerUp)},this.onZoomStart=E=>{this.dragging=!1,this.dragT0=Date.now(),this.startEvent=E},this.onZoomEnd=E=>{this.dragging=!1,this.dragT0=void 0},this.zoomed=E=>{if(get_store_value(selected))return;const{x:C,y:P,k:I}=E.transform;if(this.startEvent.sourceEvent){const R=this.startEvent.transform.x,F=this.startEvent.transform.y,O=this.startEvent.transform.k;(R!==C||F!==P)&&this.panSignal.kill(),O!==I&&this.pinchSignal.kill()}this.dragging=Date.now()-this.dragT0>=150,zoom.set(I),cameraOffsetX.set(C),cameraOffsetY.set(P)},this.handleWheel=E=>{E.preventDefault()},this.handlePointerUp=E=>{if(this.dragging)return;const{clientX:C,clientY:P}=E;select("#canvas").node().dispatchEvent(new PointerEvent("pointerup",{clientX:C,clientY:P}))},this.getLayoutTranslateExtent=(E,C)=>{const P=get_store_value(nodeSize),I=get_store_value(figureWidth),R=get_store_value(figureHeight);let F=[0,I],O=[0,R];if(E==="block"){const L=P,B=C.height+P-R;B>0&&(O=[-(B/2+L),+(B/2+L)+R])}else{const L=P*3,B=C.width-I,V=C.height-R;B>0&&(F=[-(B/2+L),+(B/2+L)+I]),V>0&&(O=[-(V/2+L),+(V/2+L)+R])}return range$2(2).map(L=>[F[L],O[L]])},this.updateTranslateExtent=(E,C)=>this.initialized?(C&&(this.curTranslateExtent=this.getLayoutTranslateExtent(E,C),this.curTranslateExtentExceedsViewport=this.curTranslateExtent[0][0]<0||this.curTranslateExtent[0][1]<0,this.curTranslateExtentCenter=[center(this.curTranslateExtent.map(P=>P[0])),center(this.curTranslateExtent.map(P=>P[1]))],this.zoom.translateExtent(this.curTranslateExtent),this.curTranslateExtentExceedsViewport?this.panSignal.prepare():this.panSignal.stop()),this):this,this.updateScaleExtent=(E,C)=>{if(console.log("UPDATESCALEEXTENT"),!this.initialized)return this;C===void 0&&(C=get_store_value(width));let P=[1,1],I=1,R=!1;return E==="radial"&&C<768?(P=[.3,1],I=.5,R=this.curTranslateExtentExceedsViewport):E==="radial"&&C>=768&&(P=[.8,1],I=1),R?this.pinchSignal.prepare():this.pinchSignal.stop(),this.curScaleIdeal=I,this.curScaleExtent=P,this.zoom.scaleExtent(this.curScaleExtent),this},this.simulation=T,this.pinchSignal=new SignalController("pinch-signal"),this.panSignal=new SignalController("pan-signal"),this.zoom=zoom$1().on("zoom",this.zoomed).on("start",this.onZoomStart).on("end",this.onZoomEnd),this.initialized=!0,this}reposition(T,E){const C=this.curScaleIdeal;let P,I;T==="block"?(P=0,I=-this.curTranslateExtent[0][1]):(P=C===1?0:this.curTranslateExtentCenter[0],I=C===1?0:this.curTranslateExtentCenter[1]);const R=new Transform$1(C,C*P,C*I);let F=select(this.zoomBase);return E&&(F=F.transition().duration(E.duration).ease(cubicInOut)),F.call(this.zoom.transform,R),this}}const version="15.0.4",createExtendedExponentialRampToValueAutomationEvent=(A,T,E)=>({endTime:T,insertTime:E,type:"exponentialRampToValue",value:A}),createExtendedLinearRampToValueAutomationEvent=(A,T,E)=>({endTime:T,insertTime:E,type:"linearRampToValue",value:A}),createSetValueAutomationEvent=(A,T)=>({startTime:T,type:"setValue",value:A}),createSetValueCurveAutomationEvent=(A,T,E)=>({duration:E,startTime:T,type:"setValueCurve",values:A}),getTargetValueAtTime=(A,T,{startTime:E,target:C,timeConstant:P})=>C+(T-C)*Math.exp((E-A)/P),isExponentialRampToValueAutomationEvent=A=>A.type==="exponentialRampToValue",isLinearRampToValueAutomationEvent=A=>A.type==="linearRampToValue",isAnyRampToValueAutomationEvent=A=>isExponentialRampToValueAutomationEvent(A)||isLinearRampToValueAutomationEvent(A),isSetValueAutomationEvent=A=>A.type==="setValue",isSetValueCurveAutomationEvent=A=>A.type==="setValueCurve",getValueOfAutomationEventAtIndexAtTime=(A,T,E,C)=>{const P=A[T];return P===void 0?C:isAnyRampToValueAutomationEvent(P)||isSetValueAutomationEvent(P)?P.value:isSetValueCurveAutomationEvent(P)?P.values[P.values.length-1]:getTargetValueAtTime(E,getValueOfAutomationEventAtIndexAtTime(A,T-1,P.startTime,C),P)},getEndTimeAndValueOfPreviousAutomationEvent=(A,T,E,C,P)=>E===void 0?[C.insertTime,P]:isAnyRampToValueAutomationEvent(E)?[E.endTime,E.value]:isSetValueAutomationEvent(E)?[E.startTime,E.value]:isSetValueCurveAutomationEvent(E)?[E.startTime+E.duration,E.values[E.values.length-1]]:[E.startTime,getValueOfAutomationEventAtIndexAtTime(A,T-1,E.startTime,P)],isCancelAndHoldAutomationEvent=A=>A.type==="cancelAndHold",isCancelScheduledValuesAutomationEvent=A=>A.type==="cancelScheduledValues",getEventTime=A=>isCancelAndHoldAutomationEvent(A)||isCancelScheduledValuesAutomationEvent(A)?A.cancelTime:isExponentialRampToValueAutomationEvent(A)||isLinearRampToValueAutomationEvent(A)?A.endTime:A.startTime,getExponentialRampValueAtTime=(A,T,E,{endTime:C,value:P})=>E===P?P:0<E&&0<P||E<0&&P<0?E*(P/E)**((A-T)/(C-T)):0,getLinearRampValueAtTime=(A,T,E,{endTime:C,value:P})=>E+(A-T)/(C-T)*(P-E),interpolateValue=(A,T)=>{const E=Math.floor(T),C=Math.ceil(T);return E===C?A[E]:(1-(T-E))*A[E]+(1-(C-T))*A[C]},getValueCurveValueAtTime=(A,{duration:T,startTime:E,values:C})=>{const P=(A-E)/T*(C.length-1);return interpolateValue(C,P)},isSetTargetAutomationEvent=A=>A.type==="setTarget";class AutomationEventList{constructor(T){this._automationEvents=[],this._currenTime=0,this._defaultValue=T}[Symbol.iterator](){return this._automationEvents[Symbol.iterator]()}add(T){const E=getEventTime(T);if(isCancelAndHoldAutomationEvent(T)||isCancelScheduledValuesAutomationEvent(T)){const C=this._automationEvents.findIndex(I=>isCancelScheduledValuesAutomationEvent(T)&&isSetValueCurveAutomationEvent(I)?I.startTime+I.duration>=E:getEventTime(I)>=E),P=this._automationEvents[C];if(C!==-1&&(this._automationEvents=this._automationEvents.slice(0,C)),isCancelAndHoldAutomationEvent(T)){const I=this._automationEvents[this._automationEvents.length-1];if(P!==void 0&&isAnyRampToValueAutomationEvent(P)){if(I!==void 0&&isSetTargetAutomationEvent(I))throw new Error("The internal list is malformed.");const R=I===void 0?P.insertTime:isSetValueCurveAutomationEvent(I)?I.startTime+I.duration:getEventTime(I),F=I===void 0?this._defaultValue:isSetValueCurveAutomationEvent(I)?I.values[I.values.length-1]:I.value,O=isExponentialRampToValueAutomationEvent(P)?getExponentialRampValueAtTime(E,R,F,P):getLinearRampValueAtTime(E,R,F,P),D=isExponentialRampToValueAutomationEvent(P)?createExtendedExponentialRampToValueAutomationEvent(O,E,this._currenTime):createExtendedLinearRampToValueAutomationEvent(O,E,this._currenTime);this._automationEvents.push(D)}if(I!==void 0&&isSetTargetAutomationEvent(I)&&this._automationEvents.push(createSetValueAutomationEvent(this.getValue(E),E)),I!==void 0&&isSetValueCurveAutomationEvent(I)&&I.startTime+I.duration>E){const R=E-I.startTime,F=(I.values.length-1)/I.duration,O=Math.max(2,1+Math.ceil(R*F)),D=R/(O-1)*F,L=I.values.slice(0,O);if(D<1)for(let B=1;B<O;B+=1){const V=D*B%1;L[B]=I.values[B-1]*(1-V)+I.values[B]*V}this._automationEvents[this._automationEvents.length-1]=createSetValueCurveAutomationEvent(L,I.startTime,R)}}}else{const C=this._automationEvents.findIndex(R=>getEventTime(R)>E),P=C===-1?this._automationEvents[this._automationEvents.length-1]:this._automationEvents[C-1];if(P!==void 0&&isSetValueCurveAutomationEvent(P)&&getEventTime(P)+P.duration>E)return!1;const I=isExponentialRampToValueAutomationEvent(T)?createExtendedExponentialRampToValueAutomationEvent(T.value,T.endTime,this._currenTime):isLinearRampToValueAutomationEvent(T)?createExtendedLinearRampToValueAutomationEvent(T.value,E,this._currenTime):T;if(C===-1)this._automationEvents.push(I);else{if(isSetValueCurveAutomationEvent(T)&&E+T.duration>getEventTime(this._automationEvents[C]))return!1;this._automationEvents.splice(C,0,I)}}return!0}flush(T){const E=this._automationEvents.findIndex(C=>getEventTime(C)>T);if(E>1){const C=this._automationEvents.slice(E-1),P=C[0];isSetTargetAutomationEvent(P)&&C.unshift(createSetValueAutomationEvent(getValueOfAutomationEventAtIndexAtTime(this._automationEvents,E-2,P.startTime,this._defaultValue),P.startTime)),this._automationEvents=C}}getValue(T){if(this._automationEvents.length===0)return this._defaultValue;const E=this._automationEvents.findIndex(R=>getEventTime(R)>T),C=this._automationEvents[E],P=(E===-1?this._automationEvents.length:E)-1,I=this._automationEvents[P];if(I!==void 0&&isSetTargetAutomationEvent(I)&&(C===void 0||!isAnyRampToValueAutomationEvent(C)||C.insertTime>T))return getTargetValueAtTime(T,getValueOfAutomationEventAtIndexAtTime(this._automationEvents,P-1,I.startTime,this._defaultValue),I);if(I!==void 0&&isSetValueAutomationEvent(I)&&(C===void 0||!isAnyRampToValueAutomationEvent(C)))return I.value;if(I!==void 0&&isSetValueCurveAutomationEvent(I)&&(C===void 0||!isAnyRampToValueAutomationEvent(C)||I.startTime+I.duration>T))return T<I.startTime+I.duration?getValueCurveValueAtTime(T,I):I.values[I.values.length-1];if(I!==void 0&&isAnyRampToValueAutomationEvent(I)&&(C===void 0||!isAnyRampToValueAutomationEvent(C)))return I.value;if(C!==void 0&&isExponentialRampToValueAutomationEvent(C)){const[R,F]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,P,I,C,this._defaultValue);return getExponentialRampValueAtTime(T,R,F,C)}if(C!==void 0&&isLinearRampToValueAutomationEvent(C)){const[R,F]=getEndTimeAndValueOfPreviousAutomationEvent(this._automationEvents,P,I,C,this._defaultValue);return getLinearRampValueAtTime(T,R,F,C)}return this._defaultValue}}const createCancelAndHoldAutomationEvent=A=>({cancelTime:A,type:"cancelAndHold"}),createCancelScheduledValuesAutomationEvent=A=>({cancelTime:A,type:"cancelScheduledValues"}),createExponentialRampToValueAutomationEvent=(A,T)=>({endTime:T,type:"exponentialRampToValue",value:A}),createLinearRampToValueAutomationEvent=(A,T)=>({endTime:T,type:"linearRampToValue",value:A}),createSetTargetAutomationEvent=(A,T,E)=>({startTime:T,target:A,timeConstant:E,type:"setTarget"}),createAbortError=()=>new DOMException("","AbortError"),createAddActiveInputConnectionToAudioNode=A=>(T,E,[C,P,I],R)=>{A(T[P],[E,C,I],F=>F[0]===E&&F[1]===C,R)},createAddAudioNodeConnections=A=>(T,E,C)=>{const P=[];for(let I=0;I<C.numberOfInputs;I+=1)P.push(new Set);A.set(T,{activeInputs:P,outputs:new Set,passiveInputs:new WeakMap,renderer:E})},createAddAudioParamConnections=A=>(T,E)=>{A.set(T,{activeInputs:new Set,passiveInputs:new WeakMap,renderer:E})},ACTIVE_AUDIO_NODE_STORE=new WeakSet,AUDIO_NODE_CONNECTIONS_STORE=new WeakMap,AUDIO_NODE_STORE=new WeakMap,AUDIO_PARAM_CONNECTIONS_STORE=new WeakMap,AUDIO_PARAM_STORE=new WeakMap,CONTEXT_STORE=new WeakMap,EVENT_LISTENERS=new WeakMap,CYCLE_COUNTERS=new WeakMap,NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS=new WeakMap,NODE_TO_PROCESSOR_MAPS=new WeakMap,handler={construct(){return handler}},isConstructible=A=>{try{const T=new Proxy(A,handler);new T}catch{return!1}return!0},IMPORT_STATEMENT_REGEX=/^import(?:(?:[\s]+[\w]+|(?:[\s]+[\w]+[\s]*,)?[\s]*\{[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?(?:[\s]*,[\s]*[\w]+(?:[\s]+as[\s]+[\w]+)?)*[\s]*}|(?:[\s]+[\w]+[\s]*,)?[\s]*\*[\s]+as[\s]+[\w]+)[\s]+from)?(?:[\s]*)("([^"\\]|\\.)+"|'([^'\\]|\\.)+')(?:[\s]*);?/,splitImportStatements=(A,T)=>{const E=[];let C=A.replace(/^[\s]+/,""),P=C.match(IMPORT_STATEMENT_REGEX);for(;P!==null;){const I=P[1].slice(1,-1),R=P[0].replace(/([\s]+)?;?$/,"").replace(I,new URL(I,T).toString());E.push(R),C=C.slice(P[0].length).replace(/^[\s]+/,""),P=C.match(IMPORT_STATEMENT_REGEX)}return[E.join(";"),C]},verifyParameterDescriptors=A=>{if(A!==void 0&&!Array.isArray(A))throw new TypeError("The parameterDescriptors property of given value for processorCtor is not an array.")},verifyProcessorCtor=A=>{if(!isConstructible(A))throw new TypeError("The given value for processorCtor should be a constructor.");if(A.prototype===null||typeof A.prototype!="object")throw new TypeError("The given value for processorCtor should have a prototype.")},createAddAudioWorkletModule=(A,T,E,C,P,I,R,F,O,D,L,B,V)=>{let U=0;return(z,W,Z={credentials:"omit"})=>{const X=L.get(z);if(X!==void 0&&X.has(W))return Promise.resolve();const K=D.get(z);if(K!==void 0){const J=K.get(W);if(J!==void 0)return J}const Y=I(z),Q=Y.audioWorklet===void 0?P(W).then(([J,te])=>{const[ie,ne]=splitImportStatements(J,te),he=`${ie};((a,b)=>{(a[b]=a[b]||[]).push((AudioWorkletProcessor,global,registerProcessor,sampleRate,self,window)=>{${ne}
})})(window,'_AWGS')`;return E(he)}).then(()=>{const J=V._AWGS.pop();if(J===void 0)throw new SyntaxError;C(Y.currentTime,Y.sampleRate,()=>J(class{},void 0,(te,ie)=>{if(te.trim()==="")throw T();const ne=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(Y);if(ne!==void 0){if(ne.has(te))throw T();verifyProcessorCtor(ie),verifyParameterDescriptors(ie.parameterDescriptors),ne.set(te,ie)}else verifyProcessorCtor(ie),verifyParameterDescriptors(ie.parameterDescriptors),NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.set(Y,new Map([[te,ie]]))},Y.sampleRate,void 0,void 0))}):Promise.all([P(W),Promise.resolve(A(B,B))]).then(([[J,te],ie])=>{const ne=U+1;U=ne;const[he,ve]=splitImportStatements(J,te),ue=`${he};((AudioWorkletProcessor,registerProcessor)=>{${ve}
})(${ie?"AudioWorkletProcessor":"class extends AudioWorkletProcessor {__b=new WeakSet();constructor(){super();(p=>p.postMessage=(q=>(m,t)=>q.call(p,m,t?t.filter(u=>!this.__b.has(u)):t))(p.postMessage))(this.port)}}"},(n,p)=>registerProcessor(n,class extends p{${ie?"":"__c = (a) => a.forEach(e=>this.__b.add(e.buffer));"}process(i,o,p){${ie?"":"i.forEach(this.__c);o.forEach(this.__c);this.__c(Object.values(p));"}return super.process(i.map(j=>j.some(k=>k.length===0)?[]:j),o,p)}}));registerProcessor('__sac${ne}',class extends AudioWorkletProcessor{process(){return !1}})`,ge=new Blob([ue],{type:"application/javascript; charset=utf-8"}),ae=URL.createObjectURL(ge);return Y.audioWorklet.addModule(ae,Z).then(()=>{if(F(Y))return Y;const ce=R(Y);return ce.audioWorklet.addModule(ae,Z).then(()=>ce)}).then(ce=>{if(O===null)throw new SyntaxError;try{new O(ce,`__sac${ne}`)}catch{throw new SyntaxError}}).finally(()=>URL.revokeObjectURL(ae))});return K===void 0?D.set(z,new Map([[W,Q]])):K.set(W,Q),Q.then(()=>{const J=L.get(z);J===void 0?L.set(z,new Set([W])):J.add(W)}).finally(()=>{const J=D.get(z);J!==void 0&&J.delete(W)}),Q}},getValueForKey=(A,T)=>{const E=A.get(T);if(E===void 0)throw new Error("A value with the given key could not be found.");return E},pickElementFromSet=(A,T)=>{const E=Array.from(A).filter(T);if(E.length>1)throw Error("More than one element was found.");if(E.length===0)throw Error("No element was found.");const[C]=E;return A.delete(C),C},deletePassiveInputConnectionToAudioNode=(A,T,E,C)=>{const P=getValueForKey(A,T),I=pickElementFromSet(P,R=>R[0]===E&&R[1]===C);return P.size===0&&A.delete(T),I},getEventListenersOfAudioNode=A=>getValueForKey(EVENT_LISTENERS,A),setInternalStateToActive=A=>{if(ACTIVE_AUDIO_NODE_STORE.has(A))throw new Error("The AudioNode is already stored.");ACTIVE_AUDIO_NODE_STORE.add(A),getEventListenersOfAudioNode(A).forEach(T=>T(!0))},isAudioWorkletNode=A=>"port"in A,setInternalStateToPassive=A=>{if(!ACTIVE_AUDIO_NODE_STORE.has(A))throw new Error("The AudioNode is not stored.");ACTIVE_AUDIO_NODE_STORE.delete(A),getEventListenersOfAudioNode(A).forEach(T=>T(!1))},setInternalStateToPassiveWhenNecessary=(A,T)=>{!isAudioWorkletNode(A)&&T.every(E=>E.size===0)&&setInternalStateToPassive(A)},createAddConnectionToAudioNode=(A,T,E,C,P,I,R,F,O,D,L,B,V)=>{const U=new WeakMap;return(z,W,Z,X,K)=>{const{activeInputs:Y,passiveInputs:Q}=I(W),{outputs:J}=I(z),te=F(z),ie=ne=>{const he=O(W),ve=O(z);if(ne){const ye=deletePassiveInputConnectionToAudioNode(Q,z,Z,X);A(Y,z,ye,!1),!K&&!B(z)&&E(ve,he,Z,X),V(W)&&setInternalStateToActive(W)}else{const ye=C(Y,z,Z,X);T(Q,X,ye,!1),!K&&!B(z)&&P(ve,he,Z,X);const de=R(W);if(de===0)L(W)&&setInternalStateToPassiveWhenNecessary(W,Y);else{const fe=U.get(W);fe!==void 0&&clearTimeout(fe),U.set(W,setTimeout(()=>{L(W)&&setInternalStateToPassiveWhenNecessary(W,Y)},de*1e3))}}};return D(J,[W,Z,X],ne=>ne[0]===W&&ne[1]===Z&&ne[2]===X,!0)?(te.add(ie),L(z)?A(Y,z,[Z,X,ie],!0):T(Q,X,[z,Z,ie],!0),!0):!1}},createAddPassiveInputConnectionToAudioNode=A=>(T,E,[C,P,I],R)=>{const F=T.get(C);F===void 0?T.set(C,new Set([[P,E,I]])):A(F,[P,E,I],O=>O[0]===P&&O[1]===E,R)},createAddSilentConnection=A=>(T,E)=>{const C=A(T,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});E.connect(C).connect(T.destination);const P=()=>{E.removeEventListener("ended",P),E.disconnect(C),C.disconnect()};E.addEventListener("ended",P)},createAddUnrenderedAudioWorkletNode=A=>(T,E)=>{A(T).add(E)},DEFAULT_OPTIONS$j={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",fftSize:2048,maxDecibels:-30,minDecibels:-100,smoothingTimeConstant:.8},createAnalyserNodeConstructor=(A,T,E,C,P,I)=>class extends A{constructor(F,O){const D=P(F),L={...DEFAULT_OPTIONS$j,...O},B=C(D,L),V=I(D)?T():null;super(F,!1,B,V),this._nativeAnalyserNode=B}get fftSize(){return this._nativeAnalyserNode.fftSize}set fftSize(F){this._nativeAnalyserNode.fftSize=F}get frequencyBinCount(){return this._nativeAnalyserNode.frequencyBinCount}get maxDecibels(){return this._nativeAnalyserNode.maxDecibels}set maxDecibels(F){const O=this._nativeAnalyserNode.maxDecibels;if(this._nativeAnalyserNode.maxDecibels=F,!(F>this._nativeAnalyserNode.minDecibels))throw this._nativeAnalyserNode.maxDecibels=O,E()}get minDecibels(){return this._nativeAnalyserNode.minDecibels}set minDecibels(F){const O=this._nativeAnalyserNode.minDecibels;if(this._nativeAnalyserNode.minDecibels=F,!(this._nativeAnalyserNode.maxDecibels>F))throw this._nativeAnalyserNode.minDecibels=O,E()}get smoothingTimeConstant(){return this._nativeAnalyserNode.smoothingTimeConstant}set smoothingTimeConstant(F){this._nativeAnalyserNode.smoothingTimeConstant=F}getByteFrequencyData(F){this._nativeAnalyserNode.getByteFrequencyData(F)}getByteTimeDomainData(F){this._nativeAnalyserNode.getByteTimeDomainData(F)}getFloatFrequencyData(F){this._nativeAnalyserNode.getFloatFrequencyData(F)}getFloatTimeDomainData(F){this._nativeAnalyserNode.getFloatTimeDomainData(F)}},isOwnedByContext=(A,T)=>A.context===T,createAnalyserNodeRendererFactory=(A,T,E)=>()=>{const C=new WeakMap,P=async(I,R)=>{let F=T(I);if(!isOwnedByContext(F,R)){const D={channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,fftSize:F.fftSize,maxDecibels:F.maxDecibels,minDecibels:F.minDecibels,smoothingTimeConstant:F.smoothingTimeConstant};F=A(R,D)}return C.set(R,F),await E(I,R,F),F};return{render(I,R){const F=C.get(R);return F!==void 0?Promise.resolve(F):P(I,R)}}},testAudioBufferCopyChannelMethodsOutOfBoundsSupport=A=>{try{A.copyToChannel(new Float32Array(1),0,-1)}catch{return!1}return!0},createIndexSizeError=()=>new DOMException("","IndexSizeError"),wrapAudioBufferGetChannelDataMethod=A=>{A.getChannelData=(T=>E=>{try{return T.call(A,E)}catch(C){throw C.code===12?createIndexSizeError():C}})(A.getChannelData)},DEFAULT_OPTIONS$i={numberOfChannels:1},createAudioBufferConstructor=(A,T,E,C,P,I,R,F)=>{let O=null;return class eh{constructor(L){if(P===null)throw new Error("Missing the native OfflineAudioContext constructor.");const{length:B,numberOfChannels:V,sampleRate:U}={...DEFAULT_OPTIONS$i,...L};O===null&&(O=new P(1,1,44100));const z=C!==null&&T(I,I)?new C({length:B,numberOfChannels:V,sampleRate:U}):O.createBuffer(V,B,U);if(z.numberOfChannels===0)throw E();return typeof z.copyFromChannel!="function"?(R(z),wrapAudioBufferGetChannelDataMethod(z)):T(testAudioBufferCopyChannelMethodsOutOfBoundsSupport,()=>testAudioBufferCopyChannelMethodsOutOfBoundsSupport(z))||F(z),A.add(z),z}static[Symbol.hasInstance](L){return L!==null&&typeof L=="object"&&Object.getPrototypeOf(L)===eh.prototype||A.has(L)}}},MOST_NEGATIVE_SINGLE_FLOAT=-34028234663852886e22,MOST_POSITIVE_SINGLE_FLOAT=-MOST_NEGATIVE_SINGLE_FLOAT,isActiveAudioNode=A=>ACTIVE_AUDIO_NODE_STORE.has(A),DEFAULT_OPTIONS$h={buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1},createAudioBufferSourceNodeConstructor=(A,T,E,C,P,I,R,F)=>class extends A{constructor(D,L){const B=I(D),V={...DEFAULT_OPTIONS$h,...L},U=P(B,V),z=R(B),W=z?T():null;super(D,!1,U,W),this._audioBufferSourceNodeRenderer=W,this._isBufferNullified=!1,this._isBufferSet=V.buffer!==null,this._nativeAudioBufferSourceNode=U,this._onended=null,this._playbackRate=E(this,z,U.playbackRate,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get buffer(){return this._isBufferNullified?null:this._nativeAudioBufferSourceNode.buffer}set buffer(D){if(this._nativeAudioBufferSourceNode.buffer=D,D!==null){if(this._isBufferSet)throw C();this._isBufferSet=!0}}get loop(){return this._nativeAudioBufferSourceNode.loop}set loop(D){this._nativeAudioBufferSourceNode.loop=D}get loopEnd(){return this._nativeAudioBufferSourceNode.loopEnd}set loopEnd(D){this._nativeAudioBufferSourceNode.loopEnd=D}get loopStart(){return this._nativeAudioBufferSourceNode.loopStart}set loopStart(D){this._nativeAudioBufferSourceNode.loopStart=D}get onended(){return this._onended}set onended(D){const L=typeof D=="function"?F(this,D):null;this._nativeAudioBufferSourceNode.onended=L;const B=this._nativeAudioBufferSourceNode.onended;this._onended=B!==null&&B===L?D:B}get playbackRate(){return this._playbackRate}start(D=0,L=0,B){if(this._nativeAudioBufferSourceNode.start(D,L,B),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.start=B===void 0?[D,L]:[D,L,B]),this.context.state!=="closed"){setInternalStateToActive(this);const V=()=>{this._nativeAudioBufferSourceNode.removeEventListener("ended",V),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeAudioBufferSourceNode.addEventListener("ended",V)}}stop(D=0){this._nativeAudioBufferSourceNode.stop(D),this._audioBufferSourceNodeRenderer!==null&&(this._audioBufferSourceNodeRenderer.stop=D)}},createAudioBufferSourceNodeRendererFactory=(A,T,E,C,P)=>()=>{const I=new WeakMap;let R=null,F=null;const O=async(D,L)=>{let B=E(D);const V=isOwnedByContext(B,L);if(!V){const U={buffer:B.buffer,channelCount:B.channelCount,channelCountMode:B.channelCountMode,channelInterpretation:B.channelInterpretation,loop:B.loop,loopEnd:B.loopEnd,loopStart:B.loopStart,playbackRate:B.playbackRate.value};B=T(L,U),R!==null&&B.start(...R),F!==null&&B.stop(F)}return I.set(L,B),V?await A(L,D.playbackRate,B.playbackRate):await C(L,D.playbackRate,B.playbackRate),await P(D,L,B),B};return{set start(D){R=D},set stop(D){F=D},render(D,L){const B=I.get(L);return B!==void 0?Promise.resolve(B):O(D,L)}}},isAudioBufferSourceNode=A=>"playbackRate"in A,isBiquadFilterNode=A=>"frequency"in A&&"gain"in A,isConstantSourceNode=A=>"offset"in A,isGainNode=A=>!("frequency"in A)&&"gain"in A,isOscillatorNode=A=>"detune"in A&&"frequency"in A,isStereoPannerNode=A=>"pan"in A,getAudioNodeConnections=A=>getValueForKey(AUDIO_NODE_CONNECTIONS_STORE,A),getAudioParamConnections=A=>getValueForKey(AUDIO_PARAM_CONNECTIONS_STORE,A),deactivateActiveAudioNodeInputConnections=(A,T)=>{const{activeInputs:E}=getAudioNodeConnections(A);E.forEach(P=>P.forEach(([I])=>{T.includes(A)||deactivateActiveAudioNodeInputConnections(I,[...T,A])}));const C=isAudioBufferSourceNode(A)?[A.playbackRate]:isAudioWorkletNode(A)?Array.from(A.parameters.values()):isBiquadFilterNode(A)?[A.Q,A.detune,A.frequency,A.gain]:isConstantSourceNode(A)?[A.offset]:isGainNode(A)?[A.gain]:isOscillatorNode(A)?[A.detune,A.frequency]:isStereoPannerNode(A)?[A.pan]:[];for(const P of C){const I=getAudioParamConnections(P);I!==void 0&&I.activeInputs.forEach(([R])=>deactivateActiveAudioNodeInputConnections(R,T))}isActiveAudioNode(A)&&setInternalStateToPassive(A)},deactivateAudioGraph=A=>{deactivateActiveAudioNodeInputConnections(A.destination,[])},isValidLatencyHint=A=>A===void 0||typeof A=="number"||typeof A=="string"&&(A==="balanced"||A==="interactive"||A==="playback"),createAudioContextConstructor=(A,T,E,C,P,I,R,F,O)=>class extends A{constructor(L={}){if(O===null)throw new Error("Missing the native AudioContext constructor.");let B;try{B=new O(L)}catch(z){throw z.code===12&&z.message==="sampleRate is not in range"?E():z}if(B===null)throw C();if(!isValidLatencyHint(L.latencyHint))throw new TypeError(`The provided value '${L.latencyHint}' is not a valid enum value of type AudioContextLatencyCategory.`);if(L.sampleRate!==void 0&&B.sampleRate!==L.sampleRate)throw E();super(B,2);const{latencyHint:V}=L,{sampleRate:U}=B;if(this._baseLatency=typeof B.baseLatency=="number"?B.baseLatency:V==="balanced"?512/U:V==="interactive"||V===void 0?256/U:V==="playback"?1024/U:Math.max(2,Math.min(128,Math.round(V*U/128)))*128/U,this._nativeAudioContext=B,O.name==="webkitAudioContext"?(this._nativeGainNode=B.createGain(),this._nativeOscillatorNode=B.createOscillator(),this._nativeGainNode.gain.value=1e-37,this._nativeOscillatorNode.connect(this._nativeGainNode).connect(B.destination),this._nativeOscillatorNode.start()):(this._nativeGainNode=null,this._nativeOscillatorNode=null),this._state=null,B.state==="running"){this._state="suspended";const z=()=>{this._state==="suspended"&&(this._state=null),B.removeEventListener("statechange",z)};B.addEventListener("statechange",z)}}get baseLatency(){return this._baseLatency}get state(){return this._state!==null?this._state:this._nativeAudioContext.state}close(){return this.state==="closed"?this._nativeAudioContext.close().then(()=>{throw T()}):(this._state==="suspended"&&(this._state=null),this._nativeAudioContext.close().then(()=>{this._nativeGainNode!==null&&this._nativeOscillatorNode!==null&&(this._nativeOscillatorNode.stop(),this._nativeGainNode.disconnect(),this._nativeOscillatorNode.disconnect()),deactivateAudioGraph(this)}))}createMediaElementSource(L){return new P(this,{mediaElement:L})}createMediaStreamDestination(){return new I(this)}createMediaStreamSource(L){return new R(this,{mediaStream:L})}createMediaStreamTrackSource(L){return new F(this,{mediaStreamTrack:L})}resume(){return this._state==="suspended"?new Promise((L,B)=>{const V=()=>{this._nativeAudioContext.removeEventListener("statechange",V),this._nativeAudioContext.state==="running"?L():this.resume().then(L,B)};this._nativeAudioContext.addEventListener("statechange",V)}):this._nativeAudioContext.resume().catch(L=>{throw L===void 0||L.code===15?T():L})}suspend(){return this._nativeAudioContext.suspend().catch(L=>{throw L===void 0?T():L})}},createAudioDestinationNodeConstructor=(A,T,E,C,P,I,R,F)=>class extends A{constructor(D,L){const B=I(D),V=R(B),U=P(B,L,V),z=V?T(F):null;super(D,!1,U,z),this._isNodeOfNativeOfflineAudioContext=V,this._nativeAudioDestinationNode=U}get channelCount(){return this._nativeAudioDestinationNode.channelCount}set channelCount(D){if(this._isNodeOfNativeOfflineAudioContext)throw C();if(D>this._nativeAudioDestinationNode.maxChannelCount)throw E();this._nativeAudioDestinationNode.channelCount=D}get channelCountMode(){return this._nativeAudioDestinationNode.channelCountMode}set channelCountMode(D){if(this._isNodeOfNativeOfflineAudioContext)throw C();this._nativeAudioDestinationNode.channelCountMode=D}get maxChannelCount(){return this._nativeAudioDestinationNode.maxChannelCount}},createAudioDestinationNodeRenderer=A=>{const T=new WeakMap,E=async(C,P)=>{const I=P.destination;return T.set(P,I),await A(C,P,I),I};return{render(C,P){const I=T.get(P);return I!==void 0?Promise.resolve(I):E(C,P)}}},createAudioListenerFactory=(A,T,E,C,P,I,R,F)=>(O,D)=>{const L=D.listener,B=()=>{const J=new Float32Array(1),te=T(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:9}),ie=R(D);let ne=!1,he=[0,0,-1,0,1,0],ve=[0,0,0];const ye=()=>{if(ne)return;ne=!0;const ge=C(D,256,9,0);ge.onaudioprocess=({inputBuffer:ae})=>{const ce=[I(ae,J,0),I(ae,J,1),I(ae,J,2),I(ae,J,3),I(ae,J,4),I(ae,J,5)];ce.some((le,_e)=>le!==he[_e])&&(L.setOrientation(...ce),he=ce);const se=[I(ae,J,6),I(ae,J,7),I(ae,J,8)];se.some((le,_e)=>le!==ve[_e])&&(L.setPosition(...se),ve=se)},te.connect(ge)},de=ge=>ae=>{ae!==he[ge]&&(he[ge]=ae,L.setOrientation(...he))},fe=ge=>ae=>{ae!==ve[ge]&&(ve[ge]=ae,L.setPosition(...ve))},ue=(ge,ae,ce)=>{const se=E(D,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ae});se.connect(te,0,ge),se.start(),Object.defineProperty(se.offset,"defaultValue",{get(){return ae}});const le=A({context:O},ie,se.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT);return F(le,"value",_e=>()=>_e.call(le),_e=>me=>{try{_e.call(le,me)}catch(Ee){if(Ee.code!==9)throw Ee}ye(),ie&&ce(me)}),le.cancelAndHoldAtTime=(_e=>ie?()=>{throw P()}:(...me)=>{const Ee=_e.apply(le,me);return ye(),Ee})(le.cancelAndHoldAtTime),le.cancelScheduledValues=(_e=>ie?()=>{throw P()}:(...me)=>{const Ee=_e.apply(le,me);return ye(),Ee})(le.cancelScheduledValues),le.exponentialRampToValueAtTime=(_e=>ie?()=>{throw P()}:(...me)=>{const Ee=_e.apply(le,me);return ye(),Ee})(le.exponentialRampToValueAtTime),le.linearRampToValueAtTime=(_e=>ie?()=>{throw P()}:(...me)=>{const Ee=_e.apply(le,me);return ye(),Ee})(le.linearRampToValueAtTime),le.setTargetAtTime=(_e=>ie?()=>{throw P()}:(...me)=>{const Ee=_e.apply(le,me);return ye(),Ee})(le.setTargetAtTime),le.setValueAtTime=(_e=>ie?()=>{throw P()}:(...me)=>{const Ee=_e.apply(le,me);return ye(),Ee})(le.setValueAtTime),le.setValueCurveAtTime=(_e=>ie?()=>{throw P()}:(...me)=>{const Ee=_e.apply(le,me);return ye(),Ee})(le.setValueCurveAtTime),le};return{forwardX:ue(0,0,de(0)),forwardY:ue(1,0,de(1)),forwardZ:ue(2,-1,de(2)),positionX:ue(6,0,fe(0)),positionY:ue(7,0,fe(1)),positionZ:ue(8,0,fe(2)),upX:ue(3,0,de(3)),upY:ue(4,1,de(4)),upZ:ue(5,0,de(5))}},{forwardX:V,forwardY:U,forwardZ:z,positionX:W,positionY:Z,positionZ:X,upX:K,upY:Y,upZ:Q}=L.forwardX===void 0?B():L;return{get forwardX(){return V},get forwardY(){return U},get forwardZ(){return z},get positionX(){return W},get positionY(){return Z},get positionZ(){return X},get upX(){return K},get upY(){return Y},get upZ(){return Q}}},isAudioNode$1=A=>"context"in A,isAudioNodeOutputConnection=A=>isAudioNode$1(A[0]),insertElementInSet=(A,T,E,C)=>{for(const P of A)if(E(P)){if(C)return!1;throw Error("The set contains at least one similar element.")}return A.add(T),!0},addActiveInputConnectionToAudioParam=(A,T,[E,C],P)=>{insertElementInSet(A,[T,E,C],I=>I[0]===T&&I[1]===E,P)},addPassiveInputConnectionToAudioParam=(A,[T,E,C],P)=>{const I=A.get(T);I===void 0?A.set(T,new Set([[E,C]])):insertElementInSet(I,[E,C],R=>R[0]===E,P)},isNativeAudioNodeFaker=A=>"inputs"in A,connectNativeAudioNodeToNativeAudioNode=(A,T,E,C)=>{if(isNativeAudioNodeFaker(T)){const P=T.inputs[C];return A.connect(P,E,0),[P,E,0]}return A.connect(T,E,C),[T,E,C]},deleteActiveInputConnection=(A,T,E)=>{for(const C of A)if(C[0]===T&&C[1]===E)return A.delete(C),C;return null},deleteActiveInputConnectionToAudioParam=(A,T,E)=>pickElementFromSet(A,C=>C[0]===T&&C[1]===E),deleteEventListenerOfAudioNode=(A,T)=>{if(!getEventListenersOfAudioNode(A).delete(T))throw new Error("Missing the expected event listener.")},deletePassiveInputConnectionToAudioParam=(A,T,E)=>{const C=getValueForKey(A,T),P=pickElementFromSet(C,I=>I[0]===E);return C.size===0&&A.delete(T),P},disconnectNativeAudioNodeFromNativeAudioNode=(A,T,E,C)=>{isNativeAudioNodeFaker(T)?A.disconnect(T.inputs[C],E,0):A.disconnect(T,E,C)},getNativeAudioNode=A=>getValueForKey(AUDIO_NODE_STORE,A),getNativeAudioParam=A=>getValueForKey(AUDIO_PARAM_STORE,A),isPartOfACycle=A=>CYCLE_COUNTERS.has(A),isPassiveAudioNode=A=>!ACTIVE_AUDIO_NODE_STORE.has(A),testAudioNodeDisconnectMethodSupport=(A,T)=>new Promise(E=>{if(T!==null)E(!0);else{const C=A.createScriptProcessor(256,1,1),P=A.createGain(),I=A.createBuffer(1,2,44100),R=I.getChannelData(0);R[0]=1,R[1]=1;const F=A.createBufferSource();F.buffer=I,F.loop=!0,F.connect(C).connect(A.destination),F.connect(P),F.disconnect(P),C.onaudioprocess=O=>{const D=O.inputBuffer.getChannelData(0);Array.prototype.some.call(D,L=>L===1)?E(!0):E(!1),F.stop(),C.onaudioprocess=null,F.disconnect(C),C.disconnect(A.destination)},F.start()}}),visitEachAudioNodeOnce=(A,T)=>{const E=new Map;for(const C of A)for(const P of C){const I=E.get(P);E.set(P,I===void 0?1:I+1)}E.forEach((C,P)=>T(P,C))},isNativeAudioNode$1=A=>"context"in A,wrapAudioNodeDisconnectMethod=A=>{const T=new Map;A.connect=(E=>(C,P=0,I=0)=>{const R=isNativeAudioNode$1(C)?E(C,P,I):E(C,P),F=T.get(C);return F===void 0?T.set(C,[{input:I,output:P}]):F.every(O=>O.input!==I||O.output!==P)&&F.push({input:I,output:P}),R})(A.connect.bind(A)),A.disconnect=(E=>(C,P,I)=>{if(E.apply(A),C===void 0)T.clear();else if(typeof C=="number")for(const[R,F]of T){const O=F.filter(D=>D.output!==C);O.length===0?T.delete(R):T.set(R,O)}else if(T.has(C))if(P===void 0)T.delete(C);else{const R=T.get(C);if(R!==void 0){const F=R.filter(O=>O.output!==P&&(O.input!==I||I===void 0));F.length===0?T.delete(C):T.set(C,F)}}for(const[R,F]of T)F.forEach(O=>{isNativeAudioNode$1(R)?A.connect(R,O.output,O.input):A.connect(R,O.output)})})(A.disconnect)},addConnectionToAudioParamOfAudioContext=(A,T,E,C)=>{const{activeInputs:P,passiveInputs:I}=getAudioParamConnections(T),{outputs:R}=getAudioNodeConnections(A),F=getEventListenersOfAudioNode(A),O=D=>{const L=getNativeAudioNode(A),B=getNativeAudioParam(T);if(D){const V=deletePassiveInputConnectionToAudioParam(I,A,E);addActiveInputConnectionToAudioParam(P,A,V,!1),!C&&!isPartOfACycle(A)&&L.connect(B,E)}else{const V=deleteActiveInputConnectionToAudioParam(P,A,E);addPassiveInputConnectionToAudioParam(I,V,!1),!C&&!isPartOfACycle(A)&&L.disconnect(B,E)}};return insertElementInSet(R,[T,E],D=>D[0]===T&&D[1]===E,!0)?(F.add(O),isActiveAudioNode(A)?addActiveInputConnectionToAudioParam(P,A,[E,O],!0):addPassiveInputConnectionToAudioParam(I,[A,E,O],!0),!0):!1},deleteInputConnectionOfAudioNode=(A,T,E,C)=>{const{activeInputs:P,passiveInputs:I}=getAudioNodeConnections(T),R=deleteActiveInputConnection(P[C],A,E);return R===null?[deletePassiveInputConnectionToAudioNode(I,A,E,C)[2],!1]:[R[2],!0]},deleteInputConnectionOfAudioParam=(A,T,E)=>{const{activeInputs:C,passiveInputs:P}=getAudioParamConnections(T),I=deleteActiveInputConnection(C,A,E);return I===null?[deletePassiveInputConnectionToAudioParam(P,A,E)[1],!1]:[I[2],!0]},deleteInputsOfAudioNode=(A,T,E,C,P)=>{const[I,R]=deleteInputConnectionOfAudioNode(A,E,C,P);if(I!==null&&(deleteEventListenerOfAudioNode(A,I),R&&!T&&!isPartOfACycle(A)&&disconnectNativeAudioNodeFromNativeAudioNode(getNativeAudioNode(A),getNativeAudioNode(E),C,P)),isActiveAudioNode(E)){const{activeInputs:F}=getAudioNodeConnections(E);setInternalStateToPassiveWhenNecessary(E,F)}},deleteInputsOfAudioParam=(A,T,E,C)=>{const[P,I]=deleteInputConnectionOfAudioParam(A,E,C);P!==null&&(deleteEventListenerOfAudioNode(A,P),I&&!T&&!isPartOfACycle(A)&&getNativeAudioNode(A).disconnect(getNativeAudioParam(E),C))},deleteAnyConnection=(A,T)=>{const E=getAudioNodeConnections(A),C=[];for(const P of E.outputs)isAudioNodeOutputConnection(P)?deleteInputsOfAudioNode(A,T,...P):deleteInputsOfAudioParam(A,T,...P),C.push(P[0]);return E.outputs.clear(),C},deleteConnectionAtOutput=(A,T,E)=>{const C=getAudioNodeConnections(A),P=[];for(const I of C.outputs)I[1]===E&&(isAudioNodeOutputConnection(I)?deleteInputsOfAudioNode(A,T,...I):deleteInputsOfAudioParam(A,T,...I),P.push(I[0]),C.outputs.delete(I));return P},deleteConnectionToDestination=(A,T,E,C,P)=>{const I=getAudioNodeConnections(A);return Array.from(I.outputs).filter(R=>R[0]===E&&(C===void 0||R[1]===C)&&(P===void 0||R[2]===P)).map(R=>(isAudioNodeOutputConnection(R)?deleteInputsOfAudioNode(A,T,...R):deleteInputsOfAudioParam(A,T,...R),I.outputs.delete(R),R[0]))},createAudioNodeConstructor=(A,T,E,C,P,I,R,F,O,D,L,B,V,U,z,W)=>class extends D{constructor(X,K,Y,Q){super(Y),this._context=X,this._nativeAudioNode=Y;const J=L(X);B(J)&&E(testAudioNodeDisconnectMethodSupport,()=>testAudioNodeDisconnectMethodSupport(J,W))!==!0&&wrapAudioNodeDisconnectMethod(Y),AUDIO_NODE_STORE.set(this,Y),EVENT_LISTENERS.set(this,new Set),X.state!=="closed"&&K&&setInternalStateToActive(this),A(this,Q,Y)}get channelCount(){return this._nativeAudioNode.channelCount}set channelCount(X){this._nativeAudioNode.channelCount=X}get channelCountMode(){return this._nativeAudioNode.channelCountMode}set channelCountMode(X){this._nativeAudioNode.channelCountMode=X}get channelInterpretation(){return this._nativeAudioNode.channelInterpretation}set channelInterpretation(X){this._nativeAudioNode.channelInterpretation=X}get context(){return this._context}get numberOfInputs(){return this._nativeAudioNode.numberOfInputs}get numberOfOutputs(){return this._nativeAudioNode.numberOfOutputs}connect(X,K=0,Y=0){if(K<0||K>=this._nativeAudioNode.numberOfOutputs)throw P();const Q=L(this._context),J=z(Q);if(V(X)||U(X))throw I();if(isAudioNode$1(X)){const ne=getNativeAudioNode(X);try{const ve=connectNativeAudioNodeToNativeAudioNode(this._nativeAudioNode,ne,K,Y),ye=isPassiveAudioNode(this);(J||ye)&&this._nativeAudioNode.disconnect(...ve),this.context.state!=="closed"&&!ye&&isPassiveAudioNode(X)&&setInternalStateToActive(X)}catch(ve){throw ve.code===12?I():ve}if(T(this,X,K,Y,J)){const ve=O([this],X);visitEachAudioNodeOnce(ve,C(J))}return X}const te=getNativeAudioParam(X);if(te.name==="playbackRate"&&te.maxValue===1024)throw R();try{this._nativeAudioNode.connect(te,K),(J||isPassiveAudioNode(this))&&this._nativeAudioNode.disconnect(te,K)}catch(ne){throw ne.code===12?I():ne}if(addConnectionToAudioParamOfAudioContext(this,X,K,J)){const ne=O([this],X);visitEachAudioNodeOnce(ne,C(J))}}disconnect(X,K,Y){let Q;const J=L(this._context),te=z(J);if(X===void 0)Q=deleteAnyConnection(this,te);else if(typeof X=="number"){if(X<0||X>=this.numberOfOutputs)throw P();Q=deleteConnectionAtOutput(this,te,X)}else{if(K!==void 0&&(K<0||K>=this.numberOfOutputs)||isAudioNode$1(X)&&Y!==void 0&&(Y<0||Y>=X.numberOfInputs))throw P();if(Q=deleteConnectionToDestination(this,te,X,K,Y),Q.length===0)throw I()}for(const ie of Q){const ne=O([this],ie);visitEachAudioNodeOnce(ne,F)}}},createAudioParamFactory=(A,T,E,C,P,I,R,F,O,D,L,B,V)=>(U,z,W,Z=null,X=null)=>{const K=W.value,Y=new AutomationEventList(K),Q=z?C(Y):null,J={get defaultValue(){return K},get maxValue(){return Z===null?W.maxValue:Z},get minValue(){return X===null?W.minValue:X},get value(){return W.value},set value(te){W.value=te,J.setValueAtTime(te,U.context.currentTime)},cancelAndHoldAtTime(te){if(typeof W.cancelAndHoldAtTime=="function")Q===null&&Y.flush(U.context.currentTime),Y.add(P(te)),W.cancelAndHoldAtTime(te);else{const ie=Array.from(Y).pop();Q===null&&Y.flush(U.context.currentTime),Y.add(P(te));const ne=Array.from(Y).pop();W.cancelScheduledValues(te),ie!==ne&&ne!==void 0&&(ne.type==="exponentialRampToValue"?W.exponentialRampToValueAtTime(ne.value,ne.endTime):ne.type==="linearRampToValue"?W.linearRampToValueAtTime(ne.value,ne.endTime):ne.type==="setValue"?W.setValueAtTime(ne.value,ne.startTime):ne.type==="setValueCurve"&&W.setValueCurveAtTime(ne.values,ne.startTime,ne.duration))}return J},cancelScheduledValues(te){return Q===null&&Y.flush(U.context.currentTime),Y.add(I(te)),W.cancelScheduledValues(te),J},exponentialRampToValueAtTime(te,ie){if(te===0)throw new RangeError;if(!Number.isFinite(ie)||ie<0)throw new RangeError;const ne=U.context.currentTime;return Q===null&&Y.flush(ne),Array.from(Y).length===0&&(Y.add(D(K,ne)),W.setValueAtTime(K,ne)),Y.add(R(te,ie)),W.exponentialRampToValueAtTime(te,ie),J},linearRampToValueAtTime(te,ie){const ne=U.context.currentTime;return Q===null&&Y.flush(ne),Array.from(Y).length===0&&(Y.add(D(K,ne)),W.setValueAtTime(K,ne)),Y.add(F(te,ie)),W.linearRampToValueAtTime(te,ie),J},setTargetAtTime(te,ie,ne){return Q===null&&Y.flush(U.context.currentTime),Y.add(O(te,ie,ne)),W.setTargetAtTime(te,ie,ne),J},setValueAtTime(te,ie){return Q===null&&Y.flush(U.context.currentTime),Y.add(D(te,ie)),W.setValueAtTime(te,ie),J},setValueCurveAtTime(te,ie,ne){const he=te instanceof Float32Array?te:new Float32Array(te);if(B!==null&&B.name==="webkitAudioContext"){const ve=ie+ne,ye=U.context.sampleRate,de=Math.ceil(ie*ye),fe=Math.floor(ve*ye),ue=fe-de,ge=new Float32Array(ue);for(let ce=0;ce<ue;ce+=1){const se=(he.length-1)/ne*((de+ce)/ye-ie),le=Math.floor(se),_e=Math.ceil(se);ge[ce]=le===_e?he[le]:(1-(se-le))*he[le]+(1-(_e-se))*he[_e]}Q===null&&Y.flush(U.context.currentTime),Y.add(L(ge,ie,ne)),W.setValueCurveAtTime(ge,ie,ne);const ae=fe/ye;ae<ve&&V(J,ge[ge.length-1],ae),V(J,he[he.length-1],ve)}else Q===null&&Y.flush(U.context.currentTime),Y.add(L(he,ie,ne)),W.setValueCurveAtTime(he,ie,ne);return J}};return E.set(J,W),T.set(J,U),A(J,Q),J},createAudioParamRenderer=A=>({replay(T){for(const E of A)if(E.type==="exponentialRampToValue"){const{endTime:C,value:P}=E;T.exponentialRampToValueAtTime(P,C)}else if(E.type==="linearRampToValue"){const{endTime:C,value:P}=E;T.linearRampToValueAtTime(P,C)}else if(E.type==="setTarget"){const{startTime:C,target:P,timeConstant:I}=E;T.setTargetAtTime(P,C,I)}else if(E.type==="setValue"){const{startTime:C,value:P}=E;T.setValueAtTime(P,C)}else if(E.type==="setValueCurve"){const{duration:C,startTime:P,values:I}=E;T.setValueCurveAtTime(I,P,C)}else throw new Error("Can't apply an unknown automation.")}});class ReadOnlyMap{constructor(T){this._map=new Map(T)}get size(){return this._map.size}entries(){return this._map.entries()}forEach(T,E=null){return this._map.forEach((C,P)=>T.call(E,C,P,this))}get(T){return this._map.get(T)}has(T){return this._map.has(T)}keys(){return this._map.keys()}values(){return this._map.values()}}const DEFAULT_OPTIONS$g={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:1,numberOfOutputs:1,parameterData:{},processorOptions:{}},createAudioWorkletNodeConstructor=(A,T,E,C,P,I,R,F,O,D,L,B,V,U)=>class extends T{constructor(W,Z,X){var K;const Y=F(W),Q=O(Y),J=L({...DEFAULT_OPTIONS$g,...X});V(J);const te=NODE_NAME_TO_PROCESSOR_CONSTRUCTOR_MAPS.get(Y),ie=te==null?void 0:te.get(Z),ne=Q||Y.state!=="closed"?Y:(K=R(Y))!==null&&K!==void 0?K:Y,he=P(ne,Q?null:W.baseLatency,D,Z,ie,J),ve=Q?C(Z,J,ie):null;super(W,!0,he,ve);const ye=[];he.parameters.forEach((fe,ue)=>{const ge=E(this,Q,fe);ye.push([ue,ge])}),this._nativeAudioWorkletNode=he,this._onprocessorerror=null,this._parameters=new ReadOnlyMap(ye),Q&&A(Y,this);const{activeInputs:de}=I(this);B(he,de)}get onprocessorerror(){return this._onprocessorerror}set onprocessorerror(W){const Z=typeof W=="function"?U(this,W):null;this._nativeAudioWorkletNode.onprocessorerror=Z;const X=this._nativeAudioWorkletNode.onprocessorerror;this._onprocessorerror=X!==null&&X===Z?W:X}get parameters(){return this._parameters===null?this._nativeAudioWorkletNode.parameters:this._parameters}get port(){return this._nativeAudioWorkletNode.port}};function copyFromChannel(A,T,E,C,P){if(typeof A.copyFromChannel=="function")T[E].byteLength===0&&(T[E]=new Float32Array(128)),A.copyFromChannel(T[E],C,P);else{const I=A.getChannelData(C);if(T[E].byteLength===0)T[E]=I.slice(P,P+128);else{const R=new Float32Array(I.buffer,P*Float32Array.BYTES_PER_ELEMENT,128);T[E].set(R)}}}const copyToChannel=(A,T,E,C,P)=>{typeof A.copyToChannel=="function"?T[E].byteLength!==0&&A.copyToChannel(T[E],C,P):T[E].byteLength!==0&&A.getChannelData(C).set(T[E],P)},createNestedArrays=(A,T)=>{const E=[];for(let C=0;C<A;C+=1){const P=[],I=typeof T=="number"?T:T[C];for(let R=0;R<I;R+=1)P.push(new Float32Array(128));E.push(P)}return E},getAudioWorkletProcessor=(A,T)=>{const E=getValueForKey(NODE_TO_PROCESSOR_MAPS,A),C=getNativeAudioNode(T);return getValueForKey(E,C)},processBuffer=async(A,T,E,C,P,I,R)=>{const F=T===null?Math.ceil(A.context.length/128)*128:T.length,O=C.channelCount*C.numberOfInputs,D=P.reduce((Z,X)=>Z+X,0),L=D===0?null:E.createBuffer(D,F,E.sampleRate);if(I===void 0)throw new Error("Missing the processor constructor.");const B=getAudioNodeConnections(A),V=await getAudioWorkletProcessor(E,A),U=createNestedArrays(C.numberOfInputs,C.channelCount),z=createNestedArrays(C.numberOfOutputs,P),W=Array.from(A.parameters.keys()).reduce((Z,X)=>({...Z,[X]:new Float32Array(128)}),{});for(let Z=0;Z<F;Z+=128){if(C.numberOfInputs>0&&T!==null)for(let X=0;X<C.numberOfInputs;X+=1)for(let K=0;K<C.channelCount;K+=1)copyFromChannel(T,U[X],K,K,Z);I.parameterDescriptors!==void 0&&T!==null&&I.parameterDescriptors.forEach(({name:X},K)=>{copyFromChannel(T,W,X,O+K,Z)});for(let X=0;X<C.numberOfInputs;X+=1)for(let K=0;K<P[X];K+=1)z[X][K].byteLength===0&&(z[X][K]=new Float32Array(128));try{const X=U.map((Y,Q)=>B.activeInputs[Q].size===0?[]:Y),K=R(Z/E.sampleRate,E.sampleRate,()=>V.process(X,z,W));if(L!==null)for(let Y=0,Q=0;Y<C.numberOfOutputs;Y+=1){for(let J=0;J<P[Y];J+=1)copyToChannel(L,z[Y],J,Q+J,Z);Q+=P[Y]}if(!K)break}catch(X){A.dispatchEvent(new ErrorEvent("processorerror",{colno:X.colno,filename:X.filename,lineno:X.lineno,message:X.message}));break}}return L},createAudioWorkletNodeRendererFactory=(A,T,E,C,P,I,R,F,O,D,L,B,V,U,z,W)=>(Z,X,K)=>{const Y=new WeakMap;let Q=null;const J=async(te,ie)=>{let ne=L(te),he=null;const ve=isOwnedByContext(ne,ie),ye=Array.isArray(X.outputChannelCount)?X.outputChannelCount:Array.from(X.outputChannelCount);if(B===null){const de=ye.reduce((ae,ce)=>ae+ce,0),fe=P(ie,{channelCount:Math.max(1,de),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,de)}),ue=[];for(let ae=0;ae<te.numberOfOutputs;ae+=1)ue.push(C(ie,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:ye[ae]}));const ge=R(ie,{channelCount:X.channelCount,channelCountMode:X.channelCountMode,channelInterpretation:X.channelInterpretation,gain:1});ge.connect=T.bind(null,ue),ge.disconnect=O.bind(null,ue),he=[fe,ue,ge]}else ve||(ne=new B(ie,Z));if(Y.set(ie,he===null?ne:he[2]),he!==null){if(Q===null){if(K===void 0)throw new Error("Missing the processor constructor.");if(V===null)throw new Error("Missing the native OfflineAudioContext constructor.");const ce=te.channelCount*te.numberOfInputs,se=K.parameterDescriptors===void 0?0:K.parameterDescriptors.length,le=ce+se;Q=processBuffer(te,le===0?null:await(async()=>{const me=new V(le,Math.ceil(te.context.length/128)*128,ie.sampleRate),Ee=[],Pe=[];for(let Be=0;Be<X.numberOfInputs;Be+=1)Ee.push(R(me,{channelCount:X.channelCount,channelCountMode:X.channelCountMode,channelInterpretation:X.channelInterpretation,gain:1})),Pe.push(P(me,{channelCount:X.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:X.channelCount}));const Ce=await Promise.all(Array.from(te.parameters.values()).map(async Be=>{const Me=I(me,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Be.value});return await U(me,Be,Me.offset),Me})),ke=C(me,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,ce+se)});for(let Be=0;Be<X.numberOfInputs;Be+=1){Ee[Be].connect(Pe[Be]);for(let Me=0;Me<X.channelCount;Me+=1)Pe[Be].connect(ke,Me,Be*X.channelCount+Me)}for(const[Be,Me]of Ce.entries())Me.connect(ke,0,ce+Be),Me.start(0);return ke.connect(me.destination),await Promise.all(Ee.map(Be=>z(te,me,Be))),W(me)})(),ie,X,ye,K,D)}const de=await Q,fe=E(ie,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),[ue,ge,ae]=he;de!==null&&(fe.buffer=de,fe.start(0)),fe.connect(ue);for(let ce=0,se=0;ce<te.numberOfOutputs;ce+=1){const le=ge[ce];for(let _e=0;_e<ye[ce];_e+=1)ue.connect(le,se+_e,_e);se+=ye[ce]}return ae}if(ve)for(const[de,fe]of te.parameters.entries())await A(ie,fe,ne.parameters.get(de));else for(const[de,fe]of te.parameters.entries())await U(ie,fe,ne.parameters.get(de));return await z(te,ie,ne),ne};return{render(te,ie){F(ie,te);const ne=Y.get(ie);return ne!==void 0?Promise.resolve(ne):J(te,ie)}}},createBaseAudioContextConstructor=(A,T,E,C,P,I,R,F,O,D,L,B,V,U,z,W,Z,X,K,Y)=>class extends z{constructor(J,te){super(J,te),this._nativeContext=J,this._audioWorklet=A===void 0?void 0:{addModule:(ie,ne)=>A(this,ie,ne)}}get audioWorklet(){return this._audioWorklet}createAnalyser(){return new T(this)}createBiquadFilter(){return new P(this)}createBuffer(J,te,ie){return new E({length:te,numberOfChannels:J,sampleRate:ie})}createBufferSource(){return new C(this)}createChannelMerger(J=6){return new I(this,{numberOfInputs:J})}createChannelSplitter(J=6){return new R(this,{numberOfOutputs:J})}createConstantSource(){return new F(this)}createConvolver(){return new O(this)}createDelay(J=1){return new L(this,{maxDelayTime:J})}createDynamicsCompressor(){return new B(this)}createGain(){return new V(this)}createIIRFilter(J,te){return new U(this,{feedback:te,feedforward:J})}createOscillator(){return new W(this)}createPanner(){return new Z(this)}createPeriodicWave(J,te,ie={disableNormalization:!1}){return new X(this,{...ie,imag:te,real:J})}createStereoPanner(){return new K(this)}createWaveShaper(){return new Y(this)}decodeAudioData(J,te,ie){return D(this._nativeContext,J).then(ne=>(typeof te=="function"&&te(ne),ne),ne=>{throw typeof ie=="function"&&ie(ne),ne})}},DEFAULT_OPTIONS$f={Q:1,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:350,gain:0,type:"lowpass"},createBiquadFilterNodeConstructor=(A,T,E,C,P,I,R,F)=>class extends A{constructor(D,L){const B=I(D),V={...DEFAULT_OPTIONS$f,...L},U=P(B,V),z=R(B),W=z?E():null;super(D,!1,U,W),this._Q=T(this,z,U.Q,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._detune=T(this,z,U.detune,1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT),-1200*Math.log2(MOST_POSITIVE_SINGLE_FLOAT)),this._frequency=T(this,z,U.frequency,D.sampleRate/2,0),this._gain=T(this,z,U.gain,40*Math.log10(MOST_POSITIVE_SINGLE_FLOAT),MOST_NEGATIVE_SINGLE_FLOAT),this._nativeBiquadFilterNode=U,F(this,1)}get detune(){return this._detune}get frequency(){return this._frequency}get gain(){return this._gain}get Q(){return this._Q}get type(){return this._nativeBiquadFilterNode.type}set type(D){this._nativeBiquadFilterNode.type=D}getFrequencyResponse(D,L,B){try{this._nativeBiquadFilterNode.getFrequencyResponse(D,L,B)}catch(V){throw V.code===11?C():V}if(D.length!==L.length||L.length!==B.length)throw C()}},createBiquadFilterNodeRendererFactory=(A,T,E,C,P)=>()=>{const I=new WeakMap,R=async(F,O)=>{let D=E(F);const L=isOwnedByContext(D,O);if(!L){const B={Q:D.Q.value,channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,detune:D.detune.value,frequency:D.frequency.value,gain:D.gain.value,type:D.type};D=T(O,B)}return I.set(O,D),L?(await A(O,F.Q,D.Q),await A(O,F.detune,D.detune),await A(O,F.frequency,D.frequency),await A(O,F.gain,D.gain)):(await C(O,F.Q,D.Q),await C(O,F.detune,D.detune),await C(O,F.frequency,D.frequency),await C(O,F.gain,D.gain)),await P(F,O,D),D};return{render(F,O){const D=I.get(O);return D!==void 0?Promise.resolve(D):R(F,O)}}},createCacheTestResult=(A,T)=>(E,C)=>{const P=T.get(E);if(P!==void 0)return P;const I=A.get(E);if(I!==void 0)return I;try{const R=C();return R instanceof Promise?(A.set(E,R),R.catch(()=>!1).then(F=>(A.delete(E),T.set(E,F),F))):(T.set(E,R),R)}catch{return T.set(E,!1),!1}},DEFAULT_OPTIONS$e={channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6},createChannelMergerNodeConstructor=(A,T,E,C,P)=>class extends A{constructor(R,F){const O=C(R),D={...DEFAULT_OPTIONS$e,...F},L=E(O,D),B=P(O)?T():null;super(R,!1,L,B)}},createChannelMergerNodeRendererFactory=(A,T,E)=>()=>{const C=new WeakMap,P=async(I,R)=>{let F=T(I);if(!isOwnedByContext(F,R)){const D={channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,numberOfInputs:F.numberOfInputs};F=A(R,D)}return C.set(R,F),await E(I,R,F),F};return{render(I,R){const F=C.get(R);return F!==void 0?Promise.resolve(F):P(I,R)}}},DEFAULT_OPTIONS$d={channelCount:6,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:6},createChannelSplitterNodeConstructor=(A,T,E,C,P,I)=>class extends A{constructor(F,O){const D=C(F),L=I({...DEFAULT_OPTIONS$d,...O}),B=E(D,L),V=P(D)?T():null;super(F,!1,B,V)}},createChannelSplitterNodeRendererFactory=(A,T,E)=>()=>{const C=new WeakMap,P=async(I,R)=>{let F=T(I);if(!isOwnedByContext(F,R)){const D={channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,numberOfOutputs:F.numberOfOutputs};F=A(R,D)}return C.set(R,F),await E(I,R,F),F};return{render(I,R){const F=C.get(R);return F!==void 0?Promise.resolve(F):P(I,R)}}},createConnectAudioParam=A=>(T,E,C)=>A(E,T,C),createConnectMultipleOutputs=A=>(T,E,C=0,P=0)=>{const I=T[C];if(I===void 0)throw A();return isNativeAudioNode$1(E)?I.connect(E,0,P):I.connect(E,0)},createConnectedNativeAudioBufferSourceNodeFactory=A=>(T,E)=>{const C=A(T,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),P=T.createBuffer(1,2,44100);return C.buffer=P,C.loop=!0,C.connect(E),C.start(),()=>{C.stop(),C.disconnect(E)}},DEFAULT_OPTIONS$c={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",offset:1},createConstantSourceNodeConstructor=(A,T,E,C,P,I,R)=>class extends A{constructor(O,D){const L=P(O),B={...DEFAULT_OPTIONS$c,...D},V=C(L,B),U=I(L),z=U?E():null;super(O,!1,V,z),this._constantSourceNodeRenderer=z,this._nativeConstantSourceNode=V,this._offset=T(this,U,V.offset,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._onended=null}get offset(){return this._offset}get onended(){return this._onended}set onended(O){const D=typeof O=="function"?R(this,O):null;this._nativeConstantSourceNode.onended=D;const L=this._nativeConstantSourceNode.onended;this._onended=L!==null&&L===D?O:L}start(O=0){if(this._nativeConstantSourceNode.start(O),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.start=O),this.context.state!=="closed"){setInternalStateToActive(this);const D=()=>{this._nativeConstantSourceNode.removeEventListener("ended",D),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeConstantSourceNode.addEventListener("ended",D)}}stop(O=0){this._nativeConstantSourceNode.stop(O),this._constantSourceNodeRenderer!==null&&(this._constantSourceNodeRenderer.stop=O)}},createConstantSourceNodeRendererFactory=(A,T,E,C,P)=>()=>{const I=new WeakMap;let R=null,F=null;const O=async(D,L)=>{let B=E(D);const V=isOwnedByContext(B,L);if(!V){const U={channelCount:B.channelCount,channelCountMode:B.channelCountMode,channelInterpretation:B.channelInterpretation,offset:B.offset.value};B=T(L,U),R!==null&&B.start(R),F!==null&&B.stop(F)}return I.set(L,B),V?await A(L,D.offset,B.offset):await C(L,D.offset,B.offset),await P(D,L,B),B};return{set start(D){R=D},set stop(D){F=D},render(D,L){const B=I.get(L);return B!==void 0?Promise.resolve(B):O(D,L)}}},createConvertNumberToUnsignedLong=A=>T=>(A[0]=T,A[0]),DEFAULT_OPTIONS$b={buffer:null,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",disableNormalization:!1},createConvolverNodeConstructor=(A,T,E,C,P,I)=>class extends A{constructor(F,O){const D=C(F),L={...DEFAULT_OPTIONS$b,...O},B=E(D,L),U=P(D)?T():null;super(F,!1,B,U),this._isBufferNullified=!1,this._nativeConvolverNode=B,L.buffer!==null&&I(this,L.buffer.duration)}get buffer(){return this._isBufferNullified?null:this._nativeConvolverNode.buffer}set buffer(F){if(this._nativeConvolverNode.buffer=F,F===null&&this._nativeConvolverNode.buffer!==null){const O=this._nativeConvolverNode.context;this._nativeConvolverNode.buffer=O.createBuffer(1,1,O.sampleRate),this._isBufferNullified=!0,I(this,0)}else this._isBufferNullified=!1,I(this,this._nativeConvolverNode.buffer===null?0:this._nativeConvolverNode.buffer.duration)}get normalize(){return this._nativeConvolverNode.normalize}set normalize(F){this._nativeConvolverNode.normalize=F}},createConvolverNodeRendererFactory=(A,T,E)=>()=>{const C=new WeakMap,P=async(I,R)=>{let F=T(I);if(!isOwnedByContext(F,R)){const D={buffer:F.buffer,channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,disableNormalization:!F.normalize};F=A(R,D)}return C.set(R,F),isNativeAudioNodeFaker(F)?await E(I,R,F.inputs[0]):await E(I,R,F),F};return{render(I,R){const F=C.get(R);return F!==void 0?Promise.resolve(F):P(I,R)}}},createCreateNativeOfflineAudioContext=(A,T)=>(E,C,P)=>{if(T===null)throw new Error("Missing the native OfflineAudioContext constructor.");try{return new T(E,C,P)}catch(I){throw I.name==="SyntaxError"?A():I}},createDataCloneError=()=>new DOMException("","DataCloneError"),detachArrayBuffer=A=>{const{port1:T,port2:E}=new MessageChannel;return new Promise(C=>{const P=()=>{E.onmessage=null,T.close(),E.close(),C()};E.onmessage=()=>P();try{T.postMessage(A,[A])}catch{}finally{P()}})},createDecodeAudioData=(A,T,E,C,P,I,R,F,O,D,L)=>(B,V)=>{const U=R(B)?B:I(B);if(P.has(V)){const z=E();return Promise.reject(z)}try{P.add(V)}catch{}return T(O,()=>O(U))?U.decodeAudioData(V).then(z=>(detachArrayBuffer(V).catch(()=>{}),T(F,()=>F(z))||L(z),A.add(z),z)):new Promise((z,W)=>{const Z=async()=>{try{await detachArrayBuffer(V)}catch{}},X=K=>{W(K),Z()};try{U.decodeAudioData(V,K=>{typeof K.copyFromChannel!="function"&&(D(K),wrapAudioBufferGetChannelDataMethod(K)),A.add(K),Z().then(()=>z(K))},K=>{X(K===null?C():K)})}catch(K){X(K)}})},createDecrementCycleCounter=(A,T,E,C,P,I,R,F)=>(O,D)=>{const L=T.get(O);if(L===void 0)throw new Error("Missing the expected cycle count.");const B=I(O.context),V=F(B);if(L===D){if(T.delete(O),!V&&R(O)){const U=C(O),{outputs:z}=E(O);for(const W of z)if(isAudioNodeOutputConnection(W)){const Z=C(W[0]);A(U,Z,W[1],W[2])}else{const Z=P(W[0]);U.connect(Z,W[1])}}}else T.set(O,L-D)},DEFAULT_OPTIONS$a={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",delayTime:0,maxDelayTime:1},createDelayNodeConstructor=(A,T,E,C,P,I,R)=>class extends A{constructor(O,D){const L=P(O),B={...DEFAULT_OPTIONS$a,...D},V=C(L,B),U=I(L),z=U?E(B.maxDelayTime):null;super(O,!1,V,z),this._delayTime=T(this,U,V.delayTime),R(this,B.maxDelayTime)}get delayTime(){return this._delayTime}},createDelayNodeRendererFactory=(A,T,E,C,P)=>I=>{const R=new WeakMap,F=async(O,D)=>{let L=E(O);const B=isOwnedByContext(L,D);if(!B){const V={channelCount:L.channelCount,channelCountMode:L.channelCountMode,channelInterpretation:L.channelInterpretation,delayTime:L.delayTime.value,maxDelayTime:I};L=T(D,V)}return R.set(D,L),B?await A(D,O.delayTime,L.delayTime):await C(D,O.delayTime,L.delayTime),await P(O,D,L),L};return{render(O,D){const L=R.get(D);return L!==void 0?Promise.resolve(L):F(O,D)}}},createDeleteActiveInputConnectionToAudioNode=A=>(T,E,C,P)=>A(T[P],I=>I[0]===E&&I[1]===C),createDeleteUnrenderedAudioWorkletNode=A=>(T,E)=>{A(T).delete(E)},isDelayNode=A=>"delayTime"in A,createDetectCycles=(A,T,E)=>function C(P,I){const R=isAudioNode$1(I)?I:E(A,I);if(isDelayNode(R))return[];if(P[0]===R)return[P];if(P.includes(R))return[];const{outputs:F}=T(R);return Array.from(F).map(O=>C([...P,R],O[0])).reduce((O,D)=>O.concat(D),[])},getOutputAudioNodeAtIndex=(A,T,E)=>{const C=T[E];if(C===void 0)throw A();return C},createDisconnectMultipleOutputs=A=>(T,E=void 0,C=void 0,P=0)=>E===void 0?T.forEach(I=>I.disconnect()):typeof E=="number"?getOutputAudioNodeAtIndex(A,T,E).disconnect():isNativeAudioNode$1(E)?C===void 0?T.forEach(I=>I.disconnect(E)):P===void 0?getOutputAudioNodeAtIndex(A,T,C).disconnect(E,0):getOutputAudioNodeAtIndex(A,T,C).disconnect(E,0,P):C===void 0?T.forEach(I=>I.disconnect(E)):getOutputAudioNodeAtIndex(A,T,C).disconnect(E,0),DEFAULT_OPTIONS$9={attack:.003,channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",knee:30,ratio:12,release:.25,threshold:-24},createDynamicsCompressorNodeConstructor=(A,T,E,C,P,I,R,F)=>class extends A{constructor(D,L){const B=I(D),V={...DEFAULT_OPTIONS$9,...L},U=C(B,V),z=R(B),W=z?E():null;super(D,!1,U,W),this._attack=T(this,z,U.attack),this._knee=T(this,z,U.knee),this._nativeDynamicsCompressorNode=U,this._ratio=T(this,z,U.ratio),this._release=T(this,z,U.release),this._threshold=T(this,z,U.threshold),F(this,.006)}get attack(){return this._attack}get channelCount(){return this._nativeDynamicsCompressorNode.channelCount}set channelCount(D){const L=this._nativeDynamicsCompressorNode.channelCount;if(this._nativeDynamicsCompressorNode.channelCount=D,D>2)throw this._nativeDynamicsCompressorNode.channelCount=L,P()}get channelCountMode(){return this._nativeDynamicsCompressorNode.channelCountMode}set channelCountMode(D){const L=this._nativeDynamicsCompressorNode.channelCountMode;if(this._nativeDynamicsCompressorNode.channelCountMode=D,D==="max")throw this._nativeDynamicsCompressorNode.channelCountMode=L,P()}get knee(){return this._knee}get ratio(){return this._ratio}get reduction(){return typeof this._nativeDynamicsCompressorNode.reduction.value=="number"?this._nativeDynamicsCompressorNode.reduction.value:this._nativeDynamicsCompressorNode.reduction}get release(){return this._release}get threshold(){return this._threshold}},createDynamicsCompressorNodeRendererFactory=(A,T,E,C,P)=>()=>{const I=new WeakMap,R=async(F,O)=>{let D=E(F);const L=isOwnedByContext(D,O);if(!L){const B={attack:D.attack.value,channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,knee:D.knee.value,ratio:D.ratio.value,release:D.release.value,threshold:D.threshold.value};D=T(O,B)}return I.set(O,D),L?(await A(O,F.attack,D.attack),await A(O,F.knee,D.knee),await A(O,F.ratio,D.ratio),await A(O,F.release,D.release),await A(O,F.threshold,D.threshold)):(await C(O,F.attack,D.attack),await C(O,F.knee,D.knee),await C(O,F.ratio,D.ratio),await C(O,F.release,D.release),await C(O,F.threshold,D.threshold)),await P(F,O,D),D};return{render(F,O){const D=I.get(O);return D!==void 0?Promise.resolve(D):R(F,O)}}},createEncodingError=()=>new DOMException("","EncodingError"),createEvaluateSource=A=>T=>new Promise((E,C)=>{if(A===null){C(new SyntaxError);return}const P=A.document.head;if(P===null)C(new SyntaxError);else{const I=A.document.createElement("script"),R=new Blob([T],{type:"application/javascript"}),F=URL.createObjectURL(R),O=A.onerror,D=()=>{A.onerror=O,URL.revokeObjectURL(F)};A.onerror=(L,B,V,U,z)=>{if(B===F||B===A.location.href&&V===1&&U===1)return D(),C(z),!1;if(O!==null)return O(L,B,V,U,z)},I.onerror=()=>{D(),C(new SyntaxError)},I.onload=()=>{D(),E()},I.src=F,I.type="module",P.appendChild(I)}}),createEventTargetConstructor=A=>class{constructor(E){this._nativeEventTarget=E,this._listeners=new WeakMap}addEventListener(E,C,P){if(C!==null){let I=this._listeners.get(C);I===void 0&&(I=A(this,C),typeof C=="function"&&this._listeners.set(C,I)),this._nativeEventTarget.addEventListener(E,I,P)}}dispatchEvent(E){return this._nativeEventTarget.dispatchEvent(E)}removeEventListener(E,C,P){const I=C===null?void 0:this._listeners.get(C);this._nativeEventTarget.removeEventListener(E,I===void 0?null:I,P)}},createExposeCurrentFrameAndCurrentTime=A=>(T,E,C)=>{Object.defineProperties(A,{currentFrame:{configurable:!0,get(){return Math.round(T*E)}},currentTime:{configurable:!0,get(){return T}}});try{return C()}finally{A!==null&&(delete A.currentFrame,delete A.currentTime)}},createFetchSource=A=>async T=>{try{const E=await fetch(T);if(E.ok)return[await E.text(),E.url]}catch{}throw A()},DEFAULT_OPTIONS$8={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",gain:1},createGainNodeConstructor=(A,T,E,C,P,I)=>class extends A{constructor(F,O){const D=P(F),L={...DEFAULT_OPTIONS$8,...O},B=C(D,L),V=I(D),U=V?E():null;super(F,!1,B,U),this._gain=T(this,V,B.gain,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT)}get gain(){return this._gain}},createGainNodeRendererFactory=(A,T,E,C,P)=>()=>{const I=new WeakMap,R=async(F,O)=>{let D=E(F);const L=isOwnedByContext(D,O);if(!L){const B={channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,gain:D.gain.value};D=T(O,B)}return I.set(O,D),L?await A(O,F.gain,D.gain):await C(O,F.gain,D.gain),await P(F,O,D),D};return{render(F,O){const D=I.get(O);return D!==void 0?Promise.resolve(D):R(F,O)}}},createGetActiveAudioWorkletNodeInputs=(A,T)=>E=>T(A,E),createGetAudioNodeRenderer=A=>T=>{const E=A(T);if(E.renderer===null)throw new Error("Missing the renderer of the given AudioNode in the audio graph.");return E.renderer},createGetAudioNodeTailTime=A=>T=>{var E;return(E=A.get(T))!==null&&E!==void 0?E:0},createGetAudioParamRenderer=A=>T=>{const E=A(T);if(E.renderer===null)throw new Error("Missing the renderer of the given AudioParam in the audio graph.");return E.renderer},createGetBackupOfflineAudioContext=A=>T=>A.get(T),createInvalidStateError=()=>new DOMException("","InvalidStateError"),createGetNativeContext=A=>T=>{const E=A.get(T);if(E===void 0)throw createInvalidStateError();return E},createGetOrCreateBackupOfflineAudioContext=(A,T)=>E=>{let C=A.get(E);if(C!==void 0)return C;if(T===null)throw new Error("Missing the native OfflineAudioContext constructor.");return C=new T(1,1,44100),A.set(E,C),C},createGetUnrenderedAudioWorkletNodes=A=>T=>{const E=A.get(T);if(E===void 0)throw new Error("The context has no set of AudioWorkletNodes.");return E},createInvalidAccessError=()=>new DOMException("","InvalidAccessError"),wrapIIRFilterNodeGetFrequencyResponseMethod=A=>{A.getFrequencyResponse=(T=>(E,C,P)=>{if(E.length!==C.length||C.length!==P.length)throw createInvalidAccessError();return T.call(A,E,C,P)})(A.getFrequencyResponse)},DEFAULT_OPTIONS$7={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers"},createIIRFilterNodeConstructor=(A,T,E,C,P,I)=>class extends A{constructor(F,O){const D=C(F),L=P(D),B={...DEFAULT_OPTIONS$7,...O},V=T(D,L?null:F.baseLatency,B),U=L?E(B.feedback,B.feedforward):null;super(F,!1,V,U),wrapIIRFilterNodeGetFrequencyResponseMethod(V),this._nativeIIRFilterNode=V,I(this,1)}getFrequencyResponse(F,O,D){return this._nativeIIRFilterNode.getFrequencyResponse(F,O,D)}},filterBuffer=(A,T,E,C,P,I,R,F,O,D,L)=>{const B=D.length;let V=F;for(let U=0;U<B;U+=1){let z=E[0]*D[U];for(let W=1;W<P;W+=1){const Z=V-W&O-1;z+=E[W]*I[Z],z-=A[W]*R[Z]}for(let W=P;W<C;W+=1)z+=E[W]*I[V-W&O-1];for(let W=P;W<T;W+=1)z-=A[W]*R[V-W&O-1];I[V]=D[U],R[V]=z,V=V+1&O-1,L[U]=z}return V},filterFullBuffer=(A,T,E,C)=>{const P=E instanceof Float64Array?E:new Float64Array(E),I=C instanceof Float64Array?C:new Float64Array(C),R=P.length,F=I.length,O=Math.min(R,F);if(P[0]!==1){for(let z=0;z<R;z+=1)I[z]/=P[0];for(let z=1;z<F;z+=1)P[z]/=P[0]}const D=32,L=new Float32Array(D),B=new Float32Array(D),V=T.createBuffer(A.numberOfChannels,A.length,A.sampleRate),U=A.numberOfChannels;for(let z=0;z<U;z+=1){const W=A.getChannelData(z),Z=V.getChannelData(z);L.fill(0),B.fill(0),filterBuffer(P,R,I,F,O,L,B,0,D,W,Z)}return V},createIIRFilterNodeRendererFactory=(A,T,E,C,P)=>(I,R)=>{const F=new WeakMap;let O=null;const D=async(L,B)=>{let V=null,U=T(L);const z=isOwnedByContext(U,B);if(B.createIIRFilter===void 0?V=A(B,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}):z||(U=B.createIIRFilter(R,I)),F.set(B,V===null?U:V),V!==null){if(O===null){if(E===null)throw new Error("Missing the native OfflineAudioContext constructor.");const Z=new E(L.context.destination.channelCount,L.context.length,B.sampleRate);O=(async()=>{await C(L,Z,Z.destination);const X=await P(Z);return filterFullBuffer(X,B,I,R)})()}const W=await O;return V.buffer=W,V.start(0),V}return await C(L,B,U),U};return{render(L,B){const V=F.get(B);return V!==void 0?Promise.resolve(V):D(L,B)}}},createIncrementCycleCounterFactory=(A,T,E,C,P,I)=>R=>(F,O)=>{const D=A.get(F);if(D===void 0){if(!R&&I(F)){const L=C(F),{outputs:B}=E(F);for(const V of B)if(isAudioNodeOutputConnection(V)){const U=C(V[0]);T(L,U,V[1],V[2])}else{const U=P(V[0]);L.disconnect(U,V[1])}}A.set(F,O)}else A.set(F,D+O)},createIsAnyAudioContext=(A,T)=>E=>{const C=A.get(E);return T(C)||T(E)},createIsAnyAudioNode=(A,T)=>E=>A.has(E)||T(E),createIsAnyAudioParam=(A,T)=>E=>A.has(E)||T(E),createIsAnyOfflineAudioContext=(A,T)=>E=>{const C=A.get(E);return T(C)||T(E)},createIsNativeAudioContext=A=>T=>A!==null&&T instanceof A,createIsNativeAudioNode=A=>T=>A!==null&&typeof A.AudioNode=="function"&&T instanceof A.AudioNode,createIsNativeAudioParam=A=>T=>A!==null&&typeof A.AudioParam=="function"&&T instanceof A.AudioParam,createIsNativeContext=(A,T)=>E=>A(E)||T(E),createIsNativeOfflineAudioContext=A=>T=>A!==null&&T instanceof A,createIsSecureContext=A=>A!==null&&A.isSecureContext,createMediaElementAudioSourceNodeConstructor=(A,T,E,C)=>class extends A{constructor(I,R){const F=E(I),O=T(F,R);if(C(F))throw TypeError();super(I,!0,O,null),this._nativeMediaElementAudioSourceNode=O}get mediaElement(){return this._nativeMediaElementAudioSourceNode.mediaElement}},DEFAULT_OPTIONS$6={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers"},createMediaStreamAudioDestinationNodeConstructor=(A,T,E,C)=>class extends A{constructor(I,R){const F=E(I);if(C(F))throw new TypeError;const O={...DEFAULT_OPTIONS$6,...R},D=T(F,O);super(I,!1,D,null),this._nativeMediaStreamAudioDestinationNode=D}get stream(){return this._nativeMediaStreamAudioDestinationNode.stream}},createMediaStreamAudioSourceNodeConstructor=(A,T,E,C)=>class extends A{constructor(I,R){const F=E(I),O=T(F,R);if(C(F))throw new TypeError;super(I,!0,O,null),this._nativeMediaStreamAudioSourceNode=O}get mediaStream(){return this._nativeMediaStreamAudioSourceNode.mediaStream}},createMediaStreamTrackAudioSourceNodeConstructor=(A,T,E)=>class extends A{constructor(P,I){const R=E(P),F=T(R,I);super(P,!0,F,null)}},createMinimalBaseAudioContextConstructor=(A,T,E,C,P,I)=>class extends E{constructor(F,O){super(F),this._nativeContext=F,CONTEXT_STORE.set(this,F),C(F)&&P.set(F,new Set),this._destination=new A(this,O),this._listener=T(this,F),this._onstatechange=null}get currentTime(){return this._nativeContext.currentTime}get destination(){return this._destination}get listener(){return this._listener}get onstatechange(){return this._onstatechange}set onstatechange(F){const O=typeof F=="function"?I(this,F):null;this._nativeContext.onstatechange=O;const D=this._nativeContext.onstatechange;this._onstatechange=D!==null&&D===O?F:D}get sampleRate(){return this._nativeContext.sampleRate}get state(){return this._nativeContext.state}},testPromiseSupport=A=>{const T=new Uint32Array([1179011410,40,1163280727,544501094,16,131073,44100,176400,1048580,1635017060,4,0]);try{const E=A.decodeAudioData(T.buffer,()=>{});return E===void 0?!1:(E.catch(()=>{}),!0)}catch{}return!1},createMonitorConnections=(A,T)=>(E,C,P)=>{const I=new Set;return E.connect=(R=>(F,O=0,D=0)=>{const L=I.size===0;if(T(F))return R.call(E,F,O,D),A(I,[F,O,D],B=>B[0]===F&&B[1]===O&&B[2]===D,!0),L&&C(),F;R.call(E,F,O),A(I,[F,O],B=>B[0]===F&&B[1]===O,!0),L&&C()})(E.connect),E.disconnect=(R=>(F,O,D)=>{const L=I.size>0;if(F===void 0)R.apply(E),I.clear();else if(typeof F=="number"){R.call(E,F);for(const V of I)V[1]===F&&I.delete(V)}else{T(F)?R.call(E,F,O,D):R.call(E,F,O);for(const V of I)V[0]===F&&(O===void 0||V[1]===O)&&(D===void 0||V[2]===D)&&I.delete(V)}const B=I.size===0;L&&B&&P()})(E.disconnect),E},assignNativeAudioNodeOption=(A,T,E)=>{const C=T[E];C!==void 0&&C!==A[E]&&(A[E]=C)},assignNativeAudioNodeOptions=(A,T)=>{assignNativeAudioNodeOption(A,T,"channelCount"),assignNativeAudioNodeOption(A,T,"channelCountMode"),assignNativeAudioNodeOption(A,T,"channelInterpretation")},testAnalyserNodeGetFloatTimeDomainDataMethodSupport=A=>typeof A.getFloatTimeDomainData=="function",wrapAnalyserNodeGetFloatTimeDomainDataMethod=A=>{A.getFloatTimeDomainData=T=>{const E=new Uint8Array(T.length);A.getByteTimeDomainData(E);const C=Math.max(E.length,A.fftSize);for(let P=0;P<C;P+=1)T[P]=(E[P]-128)*.0078125;return T}},createNativeAnalyserNodeFactory=(A,T)=>(E,C)=>{const P=E.createAnalyser();if(assignNativeAudioNodeOptions(P,C),!(C.maxDecibels>C.minDecibels))throw T();return assignNativeAudioNodeOption(P,C,"fftSize"),assignNativeAudioNodeOption(P,C,"maxDecibels"),assignNativeAudioNodeOption(P,C,"minDecibels"),assignNativeAudioNodeOption(P,C,"smoothingTimeConstant"),A(testAnalyserNodeGetFloatTimeDomainDataMethodSupport,()=>testAnalyserNodeGetFloatTimeDomainDataMethodSupport(P))||wrapAnalyserNodeGetFloatTimeDomainDataMethod(P),P},createNativeAudioBufferConstructor=A=>A===null?null:A.hasOwnProperty("AudioBuffer")?A.AudioBuffer:null,assignNativeAudioNodeAudioParamValue=(A,T,E)=>{const C=T[E];C!==void 0&&C!==A[E].value&&(A[E].value=C)},wrapAudioBufferSourceNodeStartMethodConsecutiveCalls=A=>{A.start=(T=>{let E=!1;return(C=0,P=0,I)=>{if(E)throw createInvalidStateError();T.call(A,C,P,I),E=!0}})(A.start)},wrapAudioScheduledSourceNodeStartMethodNegativeParameters=A=>{A.start=(T=>(E=0,C=0,P)=>{if(typeof P=="number"&&P<0||C<0||E<0)throw new RangeError("The parameters can't be negative.");T.call(A,E,C,P)})(A.start)},wrapAudioScheduledSourceNodeStopMethodNegativeParameters=A=>{A.stop=(T=>(E=0)=>{if(E<0)throw new RangeError("The parameter can't be negative.");T.call(A,E)})(A.stop)},createNativeAudioBufferSourceNodeFactory=(A,T,E,C,P,I,R,F,O,D,L)=>(B,V)=>{const U=B.createBufferSource();return assignNativeAudioNodeOptions(U,V),assignNativeAudioNodeAudioParamValue(U,V,"playbackRate"),assignNativeAudioNodeOption(U,V,"buffer"),assignNativeAudioNodeOption(U,V,"loop"),assignNativeAudioNodeOption(U,V,"loopEnd"),assignNativeAudioNodeOption(U,V,"loopStart"),T(E,()=>E(B))||wrapAudioBufferSourceNodeStartMethodConsecutiveCalls(U),T(C,()=>C(B))||O(U),T(P,()=>P(B))||D(U,B),T(I,()=>I(B))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(U),T(R,()=>R(B))||L(U,B),T(F,()=>F(B))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(U),A(B,U),U},createNativeAudioContextConstructor=A=>A===null?null:A.hasOwnProperty("AudioContext")?A.AudioContext:A.hasOwnProperty("webkitAudioContext")?A.webkitAudioContext:null,createNativeAudioDestinationNodeFactory=(A,T)=>(E,C,P)=>{const I=E.destination;if(I.channelCount!==C)try{I.channelCount=C}catch{}P&&I.channelCountMode!=="explicit"&&(I.channelCountMode="explicit"),I.maxChannelCount===0&&Object.defineProperty(I,"maxChannelCount",{value:C});const R=A(E,{channelCount:C,channelCountMode:I.channelCountMode,channelInterpretation:I.channelInterpretation,gain:1});return T(R,"channelCount",F=>()=>F.call(R),F=>O=>{F.call(R,O);try{I.channelCount=O}catch(D){if(O>I.maxChannelCount)throw D}}),T(R,"channelCountMode",F=>()=>F.call(R),F=>O=>{F.call(R,O),I.channelCountMode=O}),T(R,"channelInterpretation",F=>()=>F.call(R),F=>O=>{F.call(R,O),I.channelInterpretation=O}),Object.defineProperty(R,"maxChannelCount",{get:()=>I.maxChannelCount}),R.connect(I),R},createNativeAudioWorkletNodeConstructor=A=>A===null?null:A.hasOwnProperty("AudioWorkletNode")?A.AudioWorkletNode:null,testClonabilityOfAudioWorkletNodeOptions=A=>{const{port1:T}=new MessageChannel;try{T.postMessage(A)}finally{T.close()}},createNativeAudioWorkletNodeFactory=(A,T,E,C,P)=>(I,R,F,O,D,L)=>{if(F!==null)try{const B=new F(I,O,L),V=new Map;let U=null;if(Object.defineProperties(B,{channelCount:{get:()=>L.channelCount,set:()=>{throw A()}},channelCountMode:{get:()=>"explicit",set:()=>{throw A()}},onprocessorerror:{get:()=>U,set:z=>{typeof U=="function"&&B.removeEventListener("processorerror",U),U=typeof z=="function"?z:null,typeof U=="function"&&B.addEventListener("processorerror",U)}}}),B.addEventListener=(z=>(...W)=>{if(W[0]==="processorerror"){const Z=typeof W[1]=="function"?W[1]:typeof W[1]=="object"&&W[1]!==null&&typeof W[1].handleEvent=="function"?W[1].handleEvent:null;if(Z!==null){const X=V.get(W[1]);X!==void 0?W[1]=X:(W[1]=K=>{K.type==="error"?(Object.defineProperties(K,{type:{value:"processorerror"}}),Z(K)):Z(new ErrorEvent(W[0],{...K}))},V.set(Z,W[1]))}}return z.call(B,"error",W[1],W[2]),z.call(B,...W)})(B.addEventListener),B.removeEventListener=(z=>(...W)=>{if(W[0]==="processorerror"){const Z=V.get(W[1]);Z!==void 0&&(V.delete(W[1]),W[1]=Z)}return z.call(B,"error",W[1],W[2]),z.call(B,W[0],W[1],W[2])})(B.removeEventListener),L.numberOfOutputs!==0){const z=E(I,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return B.connect(z).connect(I.destination),P(B,()=>z.disconnect(),()=>z.connect(I.destination))}return B}catch(B){throw B.code===11?C():B}if(D===void 0)throw C();return testClonabilityOfAudioWorkletNodeOptions(L),T(I,R,D,L)},computeBufferSize=(A,T)=>A===null?512:Math.max(512,Math.min(16384,Math.pow(2,Math.round(Math.log2(A*T))))),cloneAudioWorkletNodeOptions=A=>new Promise((T,E)=>{const{port1:C,port2:P}=new MessageChannel;C.onmessage=({data:I})=>{C.close(),P.close(),T(I)},C.onmessageerror=({data:I})=>{C.close(),P.close(),E(I)},P.postMessage(A)}),createAudioWorkletProcessorPromise=async(A,T)=>{const E=await cloneAudioWorkletNodeOptions(T);return new A(E)},createAudioWorkletProcessor=(A,T,E,C)=>{let P=NODE_TO_PROCESSOR_MAPS.get(A);P===void 0&&(P=new WeakMap,NODE_TO_PROCESSOR_MAPS.set(A,P));const I=createAudioWorkletProcessorPromise(E,C);return P.set(T,I),I},createNativeAudioWorkletNodeFakerFactory=(A,T,E,C,P,I,R,F,O,D,L,B,V)=>(U,z,W,Z)=>{if(Z.numberOfInputs===0&&Z.numberOfOutputs===0)throw O();const X=Array.isArray(Z.outputChannelCount)?Z.outputChannelCount:Array.from(Z.outputChannelCount);if(X.some(Ne=>Ne<1))throw O();if(X.length!==Z.numberOfOutputs)throw T();if(Z.channelCountMode!=="explicit")throw O();const K=Z.channelCount*Z.numberOfInputs,Y=X.reduce((Ne,Ge)=>Ne+Ge,0),Q=W.parameterDescriptors===void 0?0:W.parameterDescriptors.length;if(K+Q>6||Y>6)throw O();const J=new MessageChannel,te=[],ie=[];for(let Ne=0;Ne<Z.numberOfInputs;Ne+=1)te.push(R(U,{channelCount:Z.channelCount,channelCountMode:Z.channelCountMode,channelInterpretation:Z.channelInterpretation,gain:1})),ie.push(P(U,{channelCount:Z.channelCount,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Z.channelCount}));const ne=[];if(W.parameterDescriptors!==void 0)for(const{defaultValue:Ne,maxValue:Ge,minValue:We,name:je}of W.parameterDescriptors){const Ye=I(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:Z.parameterData[je]!==void 0?Z.parameterData[je]:Ne===void 0?0:Ne});Object.defineProperties(Ye.offset,{defaultValue:{get:()=>Ne===void 0?0:Ne},maxValue:{get:()=>Ge===void 0?MOST_POSITIVE_SINGLE_FLOAT:Ge},minValue:{get:()=>We===void 0?MOST_NEGATIVE_SINGLE_FLOAT:We}}),ne.push(Ye)}const he=C(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:Math.max(1,K+Q)}),ve=computeBufferSize(z,U.sampleRate),ye=F(U,ve,K+Q,Math.max(1,Y)),de=P(U,{channelCount:Math.max(1,Y),channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:Math.max(1,Y)}),fe=[];for(let Ne=0;Ne<Z.numberOfOutputs;Ne+=1)fe.push(C(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:X[Ne]}));for(let Ne=0;Ne<Z.numberOfInputs;Ne+=1){te[Ne].connect(ie[Ne]);for(let Ge=0;Ge<Z.channelCount;Ge+=1)ie[Ne].connect(he,Ge,Ne*Z.channelCount+Ge)}const ue=new ReadOnlyMap(W.parameterDescriptors===void 0?[]:W.parameterDescriptors.map(({name:Ne},Ge)=>{const We=ne[Ge];return We.connect(he,0,K+Ge),We.start(0),[Ne,We.offset]}));he.connect(ye);let ge=Z.channelInterpretation,ae=null;const ce=Z.numberOfOutputs===0?[ye]:fe,se={get bufferSize(){return ve},get channelCount(){return Z.channelCount},set channelCount(Ne){throw E()},get channelCountMode(){return Z.channelCountMode},set channelCountMode(Ne){throw E()},get channelInterpretation(){return ge},set channelInterpretation(Ne){for(const Ge of te)Ge.channelInterpretation=Ne;ge=Ne},get context(){return ye.context},get inputs(){return te},get numberOfInputs(){return Z.numberOfInputs},get numberOfOutputs(){return Z.numberOfOutputs},get onprocessorerror(){return ae},set onprocessorerror(Ne){typeof ae=="function"&&se.removeEventListener("processorerror",ae),ae=typeof Ne=="function"?Ne:null,typeof ae=="function"&&se.addEventListener("processorerror",ae)},get parameters(){return ue},get port(){return J.port2},addEventListener(...Ne){return ye.addEventListener(Ne[0],Ne[1],Ne[2])},connect:A.bind(null,ce),disconnect:D.bind(null,ce),dispatchEvent(...Ne){return ye.dispatchEvent(Ne[0])},removeEventListener(...Ne){return ye.removeEventListener(Ne[0],Ne[1],Ne[2])}},le=new Map;J.port1.addEventListener=(Ne=>(...Ge)=>{if(Ge[0]==="message"){const We=typeof Ge[1]=="function"?Ge[1]:typeof Ge[1]=="object"&&Ge[1]!==null&&typeof Ge[1].handleEvent=="function"?Ge[1].handleEvent:null;if(We!==null){const je=le.get(Ge[1]);je!==void 0?Ge[1]=je:(Ge[1]=Ye=>{L(U.currentTime,U.sampleRate,()=>We(Ye))},le.set(We,Ge[1]))}}return Ne.call(J.port1,Ge[0],Ge[1],Ge[2])})(J.port1.addEventListener),J.port1.removeEventListener=(Ne=>(...Ge)=>{if(Ge[0]==="message"){const We=le.get(Ge[1]);We!==void 0&&(le.delete(Ge[1]),Ge[1]=We)}return Ne.call(J.port1,Ge[0],Ge[1],Ge[2])})(J.port1.removeEventListener);let _e=null;Object.defineProperty(J.port1,"onmessage",{get:()=>_e,set:Ne=>{typeof _e=="function"&&J.port1.removeEventListener("message",_e),_e=typeof Ne=="function"?Ne:null,typeof _e=="function"&&(J.port1.addEventListener("message",_e),J.port1.start())}}),W.prototype.port=J.port1;let me=null;createAudioWorkletProcessor(U,se,W,Z).then(Ne=>me=Ne);const Pe=createNestedArrays(Z.numberOfInputs,Z.channelCount),Ce=createNestedArrays(Z.numberOfOutputs,X),ke=W.parameterDescriptors===void 0?[]:W.parameterDescriptors.reduce((Ne,{name:Ge})=>({...Ne,[Ge]:new Float32Array(128)}),{});let Be=!0;const Me=()=>{Z.numberOfOutputs>0&&ye.disconnect(de);for(let Ne=0,Ge=0;Ne<Z.numberOfOutputs;Ne+=1){const We=fe[Ne];for(let je=0;je<X[Ne];je+=1)de.disconnect(We,Ge+je,je);Ge+=X[Ne]}},Oe=new Map;ye.onaudioprocess=({inputBuffer:Ne,outputBuffer:Ge})=>{if(me!==null){const We=B(se);for(let je=0;je<ve;je+=128){for(let Ye=0;Ye<Z.numberOfInputs;Ye+=1)for(let Fe=0;Fe<Z.channelCount;Fe+=1)copyFromChannel(Ne,Pe[Ye],Fe,Fe,je);W.parameterDescriptors!==void 0&&W.parameterDescriptors.forEach(({name:Ye},Fe)=>{copyFromChannel(Ne,ke,Ye,K+Fe,je)});for(let Ye=0;Ye<Z.numberOfInputs;Ye+=1)for(let Fe=0;Fe<X[Ye];Fe+=1)Ce[Ye][Fe].byteLength===0&&(Ce[Ye][Fe]=new Float32Array(128));try{const Ye=Pe.map((He,nt)=>{if(We[nt].size>0)return Oe.set(nt,ve/128),He;const pt=Oe.get(nt);return pt===void 0?[]:(He.every(dt=>dt.every(yt=>yt===0))&&(pt===1?Oe.delete(nt):Oe.set(nt,pt-1)),He)});Be=L(U.currentTime+je/U.sampleRate,U.sampleRate,()=>me.process(Ye,Ce,ke));for(let He=0,nt=0;He<Z.numberOfOutputs;He+=1){for(let ot=0;ot<X[He];ot+=1)copyToChannel(Ge,Ce[He],ot,nt+ot,je);nt+=X[He]}}catch(Ye){Be=!1,se.dispatchEvent(new ErrorEvent("processorerror",{colno:Ye.colno,filename:Ye.filename,lineno:Ye.lineno,message:Ye.message}))}if(!Be){for(let Ye=0;Ye<Z.numberOfInputs;Ye+=1){te[Ye].disconnect(ie[Ye]);for(let Fe=0;Fe<Z.channelCount;Fe+=1)ie[je].disconnect(he,Fe,Ye*Z.channelCount+Fe)}if(W.parameterDescriptors!==void 0){const Ye=W.parameterDescriptors.length;for(let Fe=0;Fe<Ye;Fe+=1){const He=ne[Fe];He.disconnect(he,0,K+Fe),He.stop()}}he.disconnect(ye),ye.onaudioprocess=null,Je?Me():De();break}}}};let Je=!1;const et=R(U,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0}),qe=()=>ye.connect(et).connect(U.destination),De=()=>{ye.disconnect(et),et.disconnect()},Ue=()=>{if(Be){De(),Z.numberOfOutputs>0&&ye.connect(de);for(let Ne=0,Ge=0;Ne<Z.numberOfOutputs;Ne+=1){const We=fe[Ne];for(let je=0;je<X[Ne];je+=1)de.connect(We,Ge+je,je);Ge+=X[Ne]}}Je=!0},Re=()=>{Be&&(qe(),Me()),Je=!1};return qe(),V(se,Ue,Re)},createNativeBiquadFilterNode=(A,T)=>{const E=A.createBiquadFilter();return assignNativeAudioNodeOptions(E,T),assignNativeAudioNodeAudioParamValue(E,T,"Q"),assignNativeAudioNodeAudioParamValue(E,T,"detune"),assignNativeAudioNodeAudioParamValue(E,T,"frequency"),assignNativeAudioNodeAudioParamValue(E,T,"gain"),assignNativeAudioNodeOption(E,T,"type"),E},createNativeChannelMergerNodeFactory=(A,T)=>(E,C)=>{const P=E.createChannelMerger(C.numberOfInputs);return A!==null&&A.name==="webkitAudioContext"&&T(E,P),assignNativeAudioNodeOptions(P,C),P},wrapChannelSplitterNode=A=>{const T=A.numberOfOutputs;Object.defineProperty(A,"channelCount",{get:()=>T,set:E=>{if(E!==T)throw createInvalidStateError()}}),Object.defineProperty(A,"channelCountMode",{get:()=>"explicit",set:E=>{if(E!=="explicit")throw createInvalidStateError()}}),Object.defineProperty(A,"channelInterpretation",{get:()=>"discrete",set:E=>{if(E!=="discrete")throw createInvalidStateError()}})},createNativeChannelSplitterNode=(A,T)=>{const E=A.createChannelSplitter(T.numberOfOutputs);return assignNativeAudioNodeOptions(E,T),wrapChannelSplitterNode(E),E},createNativeConstantSourceNodeFactory=(A,T,E,C,P)=>(I,R)=>{if(I.createConstantSource===void 0)return E(I,R);const F=I.createConstantSource();return assignNativeAudioNodeOptions(F,R),assignNativeAudioNodeAudioParamValue(F,R,"offset"),T(C,()=>C(I))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(F),T(P,()=>P(I))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(F),A(I,F),F},interceptConnections=(A,T)=>(A.connect=T.connect.bind(T),A.disconnect=T.disconnect.bind(T),A),createNativeConstantSourceNodeFakerFactory=(A,T,E,C)=>(P,{offset:I,...R})=>{const F=P.createBuffer(1,2,44100),O=T(P,{buffer:null,channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",loop:!1,loopEnd:0,loopStart:0,playbackRate:1}),D=E(P,{...R,gain:I}),L=F.getChannelData(0);L[0]=1,L[1]=1,O.buffer=F,O.loop=!0;const B={get bufferSize(){},get channelCount(){return D.channelCount},set channelCount(z){D.channelCount=z},get channelCountMode(){return D.channelCountMode},set channelCountMode(z){D.channelCountMode=z},get channelInterpretation(){return D.channelInterpretation},set channelInterpretation(z){D.channelInterpretation=z},get context(){return D.context},get inputs(){return[]},get numberOfInputs(){return O.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},get offset(){return D.gain},get onended(){return O.onended},set onended(z){O.onended=z},addEventListener(...z){return O.addEventListener(z[0],z[1],z[2])},dispatchEvent(...z){return O.dispatchEvent(z[0])},removeEventListener(...z){return O.removeEventListener(z[0],z[1],z[2])},start(z=0){O.start.call(O,z)},stop(z=0){O.stop.call(O,z)}},V=()=>O.connect(D),U=()=>O.disconnect(D);return A(P,O),C(interceptConnections(B,D),V,U)},createNativeConvolverNodeFactory=(A,T)=>(E,C)=>{const P=E.createConvolver();if(assignNativeAudioNodeOptions(P,C),C.disableNormalization===P.normalize&&(P.normalize=!C.disableNormalization),assignNativeAudioNodeOption(P,C,"buffer"),C.channelCount>2||(T(P,"channelCount",I=>()=>I.call(P),I=>R=>{if(R>2)throw A();return I.call(P,R)}),C.channelCountMode==="max"))throw A();return T(P,"channelCountMode",I=>()=>I.call(P),I=>R=>{if(R==="max")throw A();return I.call(P,R)}),P},createNativeDelayNode=(A,T)=>{const E=A.createDelay(T.maxDelayTime);return assignNativeAudioNodeOptions(E,T),assignNativeAudioNodeAudioParamValue(E,T,"delayTime"),E},createNativeDynamicsCompressorNodeFactory=A=>(T,E)=>{const C=T.createDynamicsCompressor();if(assignNativeAudioNodeOptions(C,E),E.channelCount>2||E.channelCountMode==="max")throw A();return assignNativeAudioNodeAudioParamValue(C,E,"attack"),assignNativeAudioNodeAudioParamValue(C,E,"knee"),assignNativeAudioNodeAudioParamValue(C,E,"ratio"),assignNativeAudioNodeAudioParamValue(C,E,"release"),assignNativeAudioNodeAudioParamValue(C,E,"threshold"),C},createNativeGainNode=(A,T)=>{const E=A.createGain();return assignNativeAudioNodeOptions(E,T),assignNativeAudioNodeAudioParamValue(E,T,"gain"),E},createNativeIIRFilterNodeFactory=A=>(T,E,C)=>{if(T.createIIRFilter===void 0)return A(T,E,C);const P=T.createIIRFilter(C.feedforward,C.feedback);return assignNativeAudioNodeOptions(P,C),P};function divide(A,T){const E=T[0]*T[0]+T[1]*T[1];return[(A[0]*T[0]+A[1]*T[1])/E,(A[1]*T[0]-A[0]*T[1])/E]}function multiply(A,T){return[A[0]*T[0]-A[1]*T[1],A[0]*T[1]+A[1]*T[0]]}function evaluatePolynomial(A,T){let E=[0,0];for(let C=A.length-1;C>=0;C-=1)E=multiply(E,T),E[0]+=A[C];return E}const createNativeIIRFilterNodeFakerFactory=(A,T,E,C)=>(P,I,{channelCount:R,channelCountMode:F,channelInterpretation:O,feedback:D,feedforward:L})=>{const B=computeBufferSize(I,P.sampleRate),V=D instanceof Float64Array?D:new Float64Array(D),U=L instanceof Float64Array?L:new Float64Array(L),z=V.length,W=U.length,Z=Math.min(z,W);if(z===0||z>20)throw C();if(V[0]===0)throw T();if(W===0||W>20)throw C();if(U[0]===0)throw T();if(V[0]!==1){for(let ne=0;ne<W;ne+=1)U[ne]/=V[0];for(let ne=1;ne<z;ne+=1)V[ne]/=V[0]}const X=E(P,B,R,R);X.channelCount=R,X.channelCountMode=F,X.channelInterpretation=O;const K=32,Y=[],Q=[],J=[];for(let ne=0;ne<R;ne+=1){Y.push(0);const he=new Float32Array(K),ve=new Float32Array(K);he.fill(0),ve.fill(0),Q.push(he),J.push(ve)}X.onaudioprocess=ne=>{const he=ne.inputBuffer,ve=ne.outputBuffer,ye=he.numberOfChannels;for(let de=0;de<ye;de+=1){const fe=he.getChannelData(de),ue=ve.getChannelData(de);Y[de]=filterBuffer(V,z,U,W,Z,Q[de],J[de],Y[de],K,fe,ue)}};const te=P.sampleRate/2;return interceptConnections({get bufferSize(){return B},get channelCount(){return X.channelCount},set channelCount(ne){X.channelCount=ne},get channelCountMode(){return X.channelCountMode},set channelCountMode(ne){X.channelCountMode=ne},get channelInterpretation(){return X.channelInterpretation},set channelInterpretation(ne){X.channelInterpretation=ne},get context(){return X.context},get inputs(){return[X]},get numberOfInputs(){return X.numberOfInputs},get numberOfOutputs(){return X.numberOfOutputs},addEventListener(...ne){return X.addEventListener(ne[0],ne[1],ne[2])},dispatchEvent(...ne){return X.dispatchEvent(ne[0])},getFrequencyResponse(ne,he,ve){if(ne.length!==he.length||he.length!==ve.length)throw A();const ye=ne.length;for(let de=0;de<ye;de+=1){const fe=-Math.PI*(ne[de]/te),ue=[Math.cos(fe),Math.sin(fe)],ge=evaluatePolynomial(U,ue),ae=evaluatePolynomial(V,ue),ce=divide(ge,ae);he[de]=Math.sqrt(ce[0]*ce[0]+ce[1]*ce[1]),ve[de]=Math.atan2(ce[1],ce[0])}},removeEventListener(...ne){return X.removeEventListener(ne[0],ne[1],ne[2])}},X)},createNativeMediaElementAudioSourceNode=(A,T)=>A.createMediaElementSource(T.mediaElement),createNativeMediaStreamAudioDestinationNode=(A,T)=>{const E=A.createMediaStreamDestination();return assignNativeAudioNodeOptions(E,T),E.numberOfOutputs===1&&Object.defineProperty(E,"numberOfOutputs",{get:()=>0}),E},createNativeMediaStreamAudioSourceNode=(A,{mediaStream:T})=>{const E=T.getAudioTracks();E.sort((I,R)=>I.id<R.id?-1:I.id>R.id?1:0);const C=E.slice(0,1),P=A.createMediaStreamSource(new MediaStream(C));return Object.defineProperty(P,"mediaStream",{value:T}),P},createNativeMediaStreamTrackAudioSourceNodeFactory=(A,T)=>(E,{mediaStreamTrack:C})=>{if(typeof E.createMediaStreamTrackSource=="function")return E.createMediaStreamTrackSource(C);const P=new MediaStream([C]),I=E.createMediaStreamSource(P);if(C.kind!=="audio")throw A();if(T(E))throw new TypeError;return I},createNativeOfflineAudioContextConstructor=A=>A===null?null:A.hasOwnProperty("OfflineAudioContext")?A.OfflineAudioContext:A.hasOwnProperty("webkitOfflineAudioContext")?A.webkitOfflineAudioContext:null,createNativeOscillatorNodeFactory=(A,T,E,C,P,I)=>(R,F)=>{const O=R.createOscillator();return assignNativeAudioNodeOptions(O,F),assignNativeAudioNodeAudioParamValue(O,F,"detune"),assignNativeAudioNodeAudioParamValue(O,F,"frequency"),F.periodicWave!==void 0?O.setPeriodicWave(F.periodicWave):assignNativeAudioNodeOption(O,F,"type"),T(E,()=>E(R))||wrapAudioScheduledSourceNodeStartMethodNegativeParameters(O),T(C,()=>C(R))||I(O,R),T(P,()=>P(R))||wrapAudioScheduledSourceNodeStopMethodNegativeParameters(O),A(R,O),O},createNativePannerNodeFactory=A=>(T,E)=>{const C=T.createPanner();return C.orientationX===void 0?A(T,E):(assignNativeAudioNodeOptions(C,E),assignNativeAudioNodeAudioParamValue(C,E,"orientationX"),assignNativeAudioNodeAudioParamValue(C,E,"orientationY"),assignNativeAudioNodeAudioParamValue(C,E,"orientationZ"),assignNativeAudioNodeAudioParamValue(C,E,"positionX"),assignNativeAudioNodeAudioParamValue(C,E,"positionY"),assignNativeAudioNodeAudioParamValue(C,E,"positionZ"),assignNativeAudioNodeOption(C,E,"coneInnerAngle"),assignNativeAudioNodeOption(C,E,"coneOuterAngle"),assignNativeAudioNodeOption(C,E,"coneOuterGain"),assignNativeAudioNodeOption(C,E,"distanceModel"),assignNativeAudioNodeOption(C,E,"maxDistance"),assignNativeAudioNodeOption(C,E,"panningModel"),assignNativeAudioNodeOption(C,E,"refDistance"),assignNativeAudioNodeOption(C,E,"rolloffFactor"),C)},createNativePannerNodeFakerFactory=(A,T,E,C,P,I,R,F,O,D)=>(L,{coneInnerAngle:B,coneOuterAngle:V,coneOuterGain:U,distanceModel:z,maxDistance:W,orientationX:Z,orientationY:X,orientationZ:K,panningModel:Y,positionX:Q,positionY:J,positionZ:te,refDistance:ie,rolloffFactor:ne,...he})=>{const ve=L.createPanner();if(he.channelCount>2||he.channelCountMode==="max")throw R();assignNativeAudioNodeOptions(ve,he);const ye={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},de=E(L,{...ye,channelInterpretation:"speakers",numberOfInputs:6}),fe=C(L,{...he,gain:1}),ue=C(L,{...ye,gain:1}),ge=C(L,{...ye,gain:0}),ae=C(L,{...ye,gain:0}),ce=C(L,{...ye,gain:0}),se=C(L,{...ye,gain:0}),le=C(L,{...ye,gain:0}),_e=P(L,256,6,1),me=I(L,{...ye,curve:new Float32Array([1,1]),oversample:"none"});let Ee=[Z,X,K],Pe=[Q,J,te];const Ce=new Float32Array(1);_e.onaudioprocess=({inputBuffer:Oe})=>{const Je=[O(Oe,Ce,0),O(Oe,Ce,1),O(Oe,Ce,2)];Je.some((qe,De)=>qe!==Ee[De])&&(ve.setOrientation(...Je),Ee=Je);const et=[O(Oe,Ce,3),O(Oe,Ce,4),O(Oe,Ce,5)];et.some((qe,De)=>qe!==Pe[De])&&(ve.setPosition(...et),Pe=et)},Object.defineProperty(ge.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ae.gain,"defaultValue",{get:()=>0}),Object.defineProperty(ce.gain,"defaultValue",{get:()=>0}),Object.defineProperty(se.gain,"defaultValue",{get:()=>0}),Object.defineProperty(le.gain,"defaultValue",{get:()=>0});const ke={get bufferSize(){},get channelCount(){return ve.channelCount},set channelCount(Oe){if(Oe>2)throw R();fe.channelCount=Oe,ve.channelCount=Oe},get channelCountMode(){return ve.channelCountMode},set channelCountMode(Oe){if(Oe==="max")throw R();fe.channelCountMode=Oe,ve.channelCountMode=Oe},get channelInterpretation(){return ve.channelInterpretation},set channelInterpretation(Oe){fe.channelInterpretation=Oe,ve.channelInterpretation=Oe},get coneInnerAngle(){return ve.coneInnerAngle},set coneInnerAngle(Oe){ve.coneInnerAngle=Oe},get coneOuterAngle(){return ve.coneOuterAngle},set coneOuterAngle(Oe){ve.coneOuterAngle=Oe},get coneOuterGain(){return ve.coneOuterGain},set coneOuterGain(Oe){if(Oe<0||Oe>1)throw T();ve.coneOuterGain=Oe},get context(){return ve.context},get distanceModel(){return ve.distanceModel},set distanceModel(Oe){ve.distanceModel=Oe},get inputs(){return[fe]},get maxDistance(){return ve.maxDistance},set maxDistance(Oe){if(Oe<0)throw new RangeError;ve.maxDistance=Oe},get numberOfInputs(){return ve.numberOfInputs},get numberOfOutputs(){return ve.numberOfOutputs},get orientationX(){return ue.gain},get orientationY(){return ge.gain},get orientationZ(){return ae.gain},get panningModel(){return ve.panningModel},set panningModel(Oe){ve.panningModel=Oe},get positionX(){return ce.gain},get positionY(){return se.gain},get positionZ(){return le.gain},get refDistance(){return ve.refDistance},set refDistance(Oe){if(Oe<0)throw new RangeError;ve.refDistance=Oe},get rolloffFactor(){return ve.rolloffFactor},set rolloffFactor(Oe){if(Oe<0)throw new RangeError;ve.rolloffFactor=Oe},addEventListener(...Oe){return fe.addEventListener(Oe[0],Oe[1],Oe[2])},dispatchEvent(...Oe){return fe.dispatchEvent(Oe[0])},removeEventListener(...Oe){return fe.removeEventListener(Oe[0],Oe[1],Oe[2])}};B!==ke.coneInnerAngle&&(ke.coneInnerAngle=B),V!==ke.coneOuterAngle&&(ke.coneOuterAngle=V),U!==ke.coneOuterGain&&(ke.coneOuterGain=U),z!==ke.distanceModel&&(ke.distanceModel=z),W!==ke.maxDistance&&(ke.maxDistance=W),Z!==ke.orientationX.value&&(ke.orientationX.value=Z),X!==ke.orientationY.value&&(ke.orientationY.value=X),K!==ke.orientationZ.value&&(ke.orientationZ.value=K),Y!==ke.panningModel&&(ke.panningModel=Y),Q!==ke.positionX.value&&(ke.positionX.value=Q),J!==ke.positionY.value&&(ke.positionY.value=J),te!==ke.positionZ.value&&(ke.positionZ.value=te),ie!==ke.refDistance&&(ke.refDistance=ie),ne!==ke.rolloffFactor&&(ke.rolloffFactor=ne),(Ee[0]!==1||Ee[1]!==0||Ee[2]!==0)&&ve.setOrientation(...Ee),(Pe[0]!==0||Pe[1]!==0||Pe[2]!==0)&&ve.setPosition(...Pe);const Be=()=>{fe.connect(ve),A(fe,me,0,0),me.connect(ue).connect(de,0,0),me.connect(ge).connect(de,0,1),me.connect(ae).connect(de,0,2),me.connect(ce).connect(de,0,3),me.connect(se).connect(de,0,4),me.connect(le).connect(de,0,5),de.connect(_e).connect(L.destination)},Me=()=>{fe.disconnect(ve),F(fe,me,0,0),me.disconnect(ue),ue.disconnect(de),me.disconnect(ge),ge.disconnect(de),me.disconnect(ae),ae.disconnect(de),me.disconnect(ce),ce.disconnect(de),me.disconnect(se),se.disconnect(de),me.disconnect(le),le.disconnect(de),de.disconnect(_e),_e.disconnect(L.destination)};return D(interceptConnections(ke,ve),Be,Me)},createNativePeriodicWaveFactory=A=>(T,{disableNormalization:E,imag:C,real:P})=>{const I=C instanceof Float32Array?C:new Float32Array(C),R=P instanceof Float32Array?P:new Float32Array(P),F=T.createPeriodicWave(R,I,{disableNormalization:E});if(Array.from(C).length<2)throw A();return F},createNativeScriptProcessorNode=(A,T,E,C)=>A.createScriptProcessor(T,E,C),createNativeStereoPannerNodeFactory=(A,T)=>(E,C)=>{const P=C.channelCountMode;if(P==="clamped-max")throw T();if(E.createStereoPanner===void 0)return A(E,C);const I=E.createStereoPanner();return assignNativeAudioNodeOptions(I,C),assignNativeAudioNodeAudioParamValue(I,C,"pan"),Object.defineProperty(I,"channelCountMode",{get:()=>P,set:R=>{if(R!==P)throw T()}}),I},createNativeStereoPannerNodeFakerFactory=(A,T,E,C,P,I)=>{const F=new Float32Array([1,1]),O=Math.PI/2,D={channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete"},L={...D,oversample:"none"},B=(z,W,Z,X)=>{const K=new Float32Array(16385),Y=new Float32Array(16385);for(let he=0;he<16385;he+=1){const ve=he/16384*O;K[he]=Math.cos(ve),Y[he]=Math.sin(ve)}const Q=E(z,{...D,gain:0}),J=C(z,{...L,curve:K}),te=C(z,{...L,curve:F}),ie=E(z,{...D,gain:0}),ne=C(z,{...L,curve:Y});return{connectGraph(){W.connect(Q),W.connect(te.inputs===void 0?te:te.inputs[0]),W.connect(ie),te.connect(Z),Z.connect(J.inputs===void 0?J:J.inputs[0]),Z.connect(ne.inputs===void 0?ne:ne.inputs[0]),J.connect(Q.gain),ne.connect(ie.gain),Q.connect(X,0,0),ie.connect(X,0,1)},disconnectGraph(){W.disconnect(Q),W.disconnect(te.inputs===void 0?te:te.inputs[0]),W.disconnect(ie),te.disconnect(Z),Z.disconnect(J.inputs===void 0?J:J.inputs[0]),Z.disconnect(ne.inputs===void 0?ne:ne.inputs[0]),J.disconnect(Q.gain),ne.disconnect(ie.gain),Q.disconnect(X,0,0),ie.disconnect(X,0,1)}}},V=(z,W,Z,X)=>{const K=new Float32Array(16385),Y=new Float32Array(16385),Q=new Float32Array(16385),J=new Float32Array(16385),te=Math.floor(16385/2);for(let ce=0;ce<16385;ce+=1)if(ce>te){const se=(ce-te)/(16384-te)*O;K[ce]=Math.cos(se),Y[ce]=Math.sin(se),Q[ce]=0,J[ce]=1}else{const se=ce/(16384-te)*O;K[ce]=1,Y[ce]=0,Q[ce]=Math.cos(se),J[ce]=Math.sin(se)}const ie=T(z,{channelCount:2,channelCountMode:"explicit",channelInterpretation:"discrete",numberOfOutputs:2}),ne=E(z,{...D,gain:0}),he=C(z,{...L,curve:K}),ve=E(z,{...D,gain:0}),ye=C(z,{...L,curve:Y}),de=C(z,{...L,curve:F}),fe=E(z,{...D,gain:0}),ue=C(z,{...L,curve:Q}),ge=E(z,{...D,gain:0}),ae=C(z,{...L,curve:J});return{connectGraph(){W.connect(ie),W.connect(de.inputs===void 0?de:de.inputs[0]),ie.connect(ne,0),ie.connect(ve,0),ie.connect(fe,1),ie.connect(ge,1),de.connect(Z),Z.connect(he.inputs===void 0?he:he.inputs[0]),Z.connect(ye.inputs===void 0?ye:ye.inputs[0]),Z.connect(ue.inputs===void 0?ue:ue.inputs[0]),Z.connect(ae.inputs===void 0?ae:ae.inputs[0]),he.connect(ne.gain),ye.connect(ve.gain),ue.connect(fe.gain),ae.connect(ge.gain),ne.connect(X,0,0),fe.connect(X,0,0),ve.connect(X,0,1),ge.connect(X,0,1)},disconnectGraph(){W.disconnect(ie),W.disconnect(de.inputs===void 0?de:de.inputs[0]),ie.disconnect(ne,0),ie.disconnect(ve,0),ie.disconnect(fe,1),ie.disconnect(ge,1),de.disconnect(Z),Z.disconnect(he.inputs===void 0?he:he.inputs[0]),Z.disconnect(ye.inputs===void 0?ye:ye.inputs[0]),Z.disconnect(ue.inputs===void 0?ue:ue.inputs[0]),Z.disconnect(ae.inputs===void 0?ae:ae.inputs[0]),he.disconnect(ne.gain),ye.disconnect(ve.gain),ue.disconnect(fe.gain),ae.disconnect(ge.gain),ne.disconnect(X,0,0),fe.disconnect(X,0,0),ve.disconnect(X,0,1),ge.disconnect(X,0,1)}}},U=(z,W,Z,X,K)=>{if(W===1)return B(z,Z,X,K);if(W===2)return V(z,Z,X,K);throw P()};return(z,{channelCount:W,channelCountMode:Z,pan:X,...K})=>{if(Z==="max")throw P();const Y=A(z,{...K,channelCount:1,channelCountMode:Z,numberOfInputs:2}),Q=E(z,{...K,channelCount:W,channelCountMode:Z,gain:1}),J=E(z,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:X});let{connectGraph:te,disconnectGraph:ie}=U(z,W,Q,J,Y);Object.defineProperty(J.gain,"defaultValue",{get:()=>0}),Object.defineProperty(J.gain,"maxValue",{get:()=>1}),Object.defineProperty(J.gain,"minValue",{get:()=>-1});const ne={get bufferSize(){},get channelCount(){return Q.channelCount},set channelCount(de){Q.channelCount!==de&&(he&&ie(),{connectGraph:te,disconnectGraph:ie}=U(z,de,Q,J,Y),he&&te()),Q.channelCount=de},get channelCountMode(){return Q.channelCountMode},set channelCountMode(de){if(de==="clamped-max"||de==="max")throw P();Q.channelCountMode=de},get channelInterpretation(){return Q.channelInterpretation},set channelInterpretation(de){Q.channelInterpretation=de},get context(){return Q.context},get inputs(){return[Q]},get numberOfInputs(){return Q.numberOfInputs},get numberOfOutputs(){return Q.numberOfOutputs},get pan(){return J.gain},addEventListener(...de){return Q.addEventListener(de[0],de[1],de[2])},dispatchEvent(...de){return Q.dispatchEvent(de[0])},removeEventListener(...de){return Q.removeEventListener(de[0],de[1],de[2])}};let he=!1;const ve=()=>{te(),he=!0},ye=()=>{ie(),he=!1};return I(interceptConnections(ne,Y),ve,ye)}},createNativeWaveShaperNodeFactory=(A,T,E,C,P,I,R)=>(F,O)=>{const D=F.createWaveShaper();if(I!==null&&I.name==="webkitAudioContext"&&F.createGain().gain.automationRate===void 0)return E(F,O);assignNativeAudioNodeOptions(D,O);const L=O.curve===null||O.curve instanceof Float32Array?O.curve:new Float32Array(O.curve);if(L!==null&&L.length<2)throw T();assignNativeAudioNodeOption(D,{curve:L},"curve"),assignNativeAudioNodeOption(D,O,"oversample");let B=null,V=!1;return R(D,"curve",W=>()=>W.call(D),W=>Z=>(W.call(D,Z),V&&(C(Z)&&B===null?B=A(F,D):!C(Z)&&B!==null&&(B(),B=null)),Z)),P(D,()=>{V=!0,C(D.curve)&&(B=A(F,D))},()=>{V=!1,B!==null&&(B(),B=null)})},createNativeWaveShaperNodeFakerFactory=(A,T,E,C,P)=>(I,{curve:R,oversample:F,...O})=>{const D=I.createWaveShaper(),L=I.createWaveShaper();assignNativeAudioNodeOptions(D,O),assignNativeAudioNodeOptions(L,O);const B=E(I,{...O,gain:1}),V=E(I,{...O,gain:-1}),U=E(I,{...O,gain:1}),z=E(I,{...O,gain:-1});let W=null,Z=!1,X=null;const K={get bufferSize(){},get channelCount(){return D.channelCount},set channelCount(J){B.channelCount=J,V.channelCount=J,D.channelCount=J,U.channelCount=J,L.channelCount=J,z.channelCount=J},get channelCountMode(){return D.channelCountMode},set channelCountMode(J){B.channelCountMode=J,V.channelCountMode=J,D.channelCountMode=J,U.channelCountMode=J,L.channelCountMode=J,z.channelCountMode=J},get channelInterpretation(){return D.channelInterpretation},set channelInterpretation(J){B.channelInterpretation=J,V.channelInterpretation=J,D.channelInterpretation=J,U.channelInterpretation=J,L.channelInterpretation=J,z.channelInterpretation=J},get context(){return D.context},get curve(){return X},set curve(J){if(J!==null&&J.length<2)throw T();if(J===null)D.curve=J,L.curve=J;else{const te=J.length,ie=new Float32Array(te+2-te%2),ne=new Float32Array(te+2-te%2);ie[0]=J[0],ne[0]=-J[te-1];const he=Math.ceil((te+1)/2),ve=(te+1)/2-1;for(let ye=1;ye<he;ye+=1){const de=ye/he*ve,fe=Math.floor(de),ue=Math.ceil(de);ie[ye]=fe===ue?J[fe]:(1-(de-fe))*J[fe]+(1-(ue-de))*J[ue],ne[ye]=fe===ue?-J[te-1-fe]:-((1-(de-fe))*J[te-1-fe])-(1-(ue-de))*J[te-1-ue]}ie[he]=te%2===1?J[he-1]:(J[he-2]+J[he-1])/2,D.curve=ie,L.curve=ne}X=J,Z&&(C(X)&&W===null?W=A(I,B):W!==null&&(W(),W=null))},get inputs(){return[B]},get numberOfInputs(){return D.numberOfInputs},get numberOfOutputs(){return D.numberOfOutputs},get oversample(){return D.oversample},set oversample(J){D.oversample=J,L.oversample=J},addEventListener(...J){return B.addEventListener(J[0],J[1],J[2])},dispatchEvent(...J){return B.dispatchEvent(J[0])},removeEventListener(...J){return B.removeEventListener(J[0],J[1],J[2])}};R!==null&&(K.curve=R instanceof Float32Array?R:new Float32Array(R)),F!==K.oversample&&(K.oversample=F);const Y=()=>{B.connect(D).connect(U),B.connect(V).connect(L).connect(z).connect(U),Z=!0,C(X)&&(W=A(I,B))},Q=()=>{B.disconnect(D),D.disconnect(U),B.disconnect(V),V.disconnect(L),L.disconnect(z),z.disconnect(U),Z=!1,W!==null&&(W(),W=null)};return P(interceptConnections(K,U),Y,Q)},createNotSupportedError=()=>new DOMException("","NotSupportedError"),DEFAULT_OPTIONS$5={numberOfChannels:1},createOfflineAudioContextConstructor=(A,T,E,C,P)=>class extends A{constructor(R,F,O){let D;if(typeof R=="number"&&F!==void 0&&O!==void 0)D={length:F,numberOfChannels:R,sampleRate:O};else if(typeof R=="object")D=R;else throw new Error("The given parameters are not valid.");const{length:L,numberOfChannels:B,sampleRate:V}={...DEFAULT_OPTIONS$5,...D},U=C(B,L,V);T(testPromiseSupport,()=>testPromiseSupport(U))||U.addEventListener("statechange",(()=>{let z=0;const W=Z=>{this._state==="running"&&(z>0?(U.removeEventListener("statechange",W),Z.stopImmediatePropagation(),this._waitForThePromiseToSettle(Z)):z+=1)};return W})()),super(U,B),this._length=L,this._nativeOfflineAudioContext=U,this._state=null}get length(){return this._nativeOfflineAudioContext.length===void 0?this._length:this._nativeOfflineAudioContext.length}get state(){return this._state===null?this._nativeOfflineAudioContext.state:this._state}startRendering(){return this._state==="running"?Promise.reject(E()):(this._state="running",P(this.destination,this._nativeOfflineAudioContext).finally(()=>{this._state=null,deactivateAudioGraph(this)}))}_waitForThePromiseToSettle(R){this._state===null?this._nativeOfflineAudioContext.dispatchEvent(R):setTimeout(()=>this._waitForThePromiseToSettle(R))}},DEFAULT_OPTIONS$4={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",detune:0,frequency:440,periodicWave:void 0,type:"sine"},createOscillatorNodeConstructor=(A,T,E,C,P,I,R)=>class extends A{constructor(O,D){const L=P(O),B={...DEFAULT_OPTIONS$4,...D},V=E(L,B),U=I(L),z=U?C():null,W=O.sampleRate/2;super(O,!1,V,z),this._detune=T(this,U,V.detune,153600,-153600),this._frequency=T(this,U,V.frequency,W,-W),this._nativeOscillatorNode=V,this._onended=null,this._oscillatorNodeRenderer=z,this._oscillatorNodeRenderer!==null&&B.periodicWave!==void 0&&(this._oscillatorNodeRenderer.periodicWave=B.periodicWave)}get detune(){return this._detune}get frequency(){return this._frequency}get onended(){return this._onended}set onended(O){const D=typeof O=="function"?R(this,O):null;this._nativeOscillatorNode.onended=D;const L=this._nativeOscillatorNode.onended;this._onended=L!==null&&L===D?O:L}get type(){return this._nativeOscillatorNode.type}set type(O){this._nativeOscillatorNode.type=O,this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=null)}setPeriodicWave(O){this._nativeOscillatorNode.setPeriodicWave(O),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.periodicWave=O)}start(O=0){if(this._nativeOscillatorNode.start(O),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.start=O),this.context.state!=="closed"){setInternalStateToActive(this);const D=()=>{this._nativeOscillatorNode.removeEventListener("ended",D),isActiveAudioNode(this)&&setInternalStateToPassive(this)};this._nativeOscillatorNode.addEventListener("ended",D)}}stop(O=0){this._nativeOscillatorNode.stop(O),this._oscillatorNodeRenderer!==null&&(this._oscillatorNodeRenderer.stop=O)}},createOscillatorNodeRendererFactory=(A,T,E,C,P)=>()=>{const I=new WeakMap;let R=null,F=null,O=null;const D=async(L,B)=>{let V=E(L);const U=isOwnedByContext(V,B);if(!U){const z={channelCount:V.channelCount,channelCountMode:V.channelCountMode,channelInterpretation:V.channelInterpretation,detune:V.detune.value,frequency:V.frequency.value,periodicWave:R===null?void 0:R,type:V.type};V=T(B,z),F!==null&&V.start(F),O!==null&&V.stop(O)}return I.set(B,V),U?(await A(B,L.detune,V.detune),await A(B,L.frequency,V.frequency)):(await C(B,L.detune,V.detune),await C(B,L.frequency,V.frequency)),await P(L,B,V),V};return{set periodicWave(L){R=L},set start(L){F=L},set stop(L){O=L},render(L,B){const V=I.get(B);return V!==void 0?Promise.resolve(V):D(L,B)}}},DEFAULT_OPTIONS$3={channelCount:2,channelCountMode:"clamped-max",channelInterpretation:"speakers",coneInnerAngle:360,coneOuterAngle:360,coneOuterGain:0,distanceModel:"inverse",maxDistance:1e4,orientationX:1,orientationY:0,orientationZ:0,panningModel:"equalpower",positionX:0,positionY:0,positionZ:0,refDistance:1,rolloffFactor:1},createPannerNodeConstructor=(A,T,E,C,P,I,R)=>class extends A{constructor(O,D){const L=P(O),B={...DEFAULT_OPTIONS$3,...D},V=E(L,B),U=I(L),z=U?C():null;super(O,!1,V,z),this._nativePannerNode=V,this._orientationX=T(this,U,V.orientationX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationY=T(this,U,V.orientationY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._orientationZ=T(this,U,V.orientationZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionX=T(this,U,V.positionX,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionY=T(this,U,V.positionY,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),this._positionZ=T(this,U,V.positionZ,MOST_POSITIVE_SINGLE_FLOAT,MOST_NEGATIVE_SINGLE_FLOAT),R(this,1)}get coneInnerAngle(){return this._nativePannerNode.coneInnerAngle}set coneInnerAngle(O){this._nativePannerNode.coneInnerAngle=O}get coneOuterAngle(){return this._nativePannerNode.coneOuterAngle}set coneOuterAngle(O){this._nativePannerNode.coneOuterAngle=O}get coneOuterGain(){return this._nativePannerNode.coneOuterGain}set coneOuterGain(O){this._nativePannerNode.coneOuterGain=O}get distanceModel(){return this._nativePannerNode.distanceModel}set distanceModel(O){this._nativePannerNode.distanceModel=O}get maxDistance(){return this._nativePannerNode.maxDistance}set maxDistance(O){this._nativePannerNode.maxDistance=O}get orientationX(){return this._orientationX}get orientationY(){return this._orientationY}get orientationZ(){return this._orientationZ}get panningModel(){return this._nativePannerNode.panningModel}set panningModel(O){this._nativePannerNode.panningModel=O}get positionX(){return this._positionX}get positionY(){return this._positionY}get positionZ(){return this._positionZ}get refDistance(){return this._nativePannerNode.refDistance}set refDistance(O){this._nativePannerNode.refDistance=O}get rolloffFactor(){return this._nativePannerNode.rolloffFactor}set rolloffFactor(O){this._nativePannerNode.rolloffFactor=O}},createPannerNodeRendererFactory=(A,T,E,C,P,I,R,F,O,D)=>()=>{const L=new WeakMap;let B=null;const V=async(U,z)=>{let W=null,Z=I(U);const X={channelCount:Z.channelCount,channelCountMode:Z.channelCountMode,channelInterpretation:Z.channelInterpretation},K={...X,coneInnerAngle:Z.coneInnerAngle,coneOuterAngle:Z.coneOuterAngle,coneOuterGain:Z.coneOuterGain,distanceModel:Z.distanceModel,maxDistance:Z.maxDistance,panningModel:Z.panningModel,refDistance:Z.refDistance,rolloffFactor:Z.rolloffFactor},Y=isOwnedByContext(Z,z);if("bufferSize"in Z)W=C(z,{...X,gain:1});else if(!Y){const Q={...K,orientationX:Z.orientationX.value,orientationY:Z.orientationY.value,orientationZ:Z.orientationZ.value,positionX:Z.positionX.value,positionY:Z.positionY.value,positionZ:Z.positionZ.value};Z=P(z,Q)}if(L.set(z,W===null?Z:W),W!==null){if(B===null){if(R===null)throw new Error("Missing the native OfflineAudioContext constructor.");const ye=new R(6,U.context.length,z.sampleRate),de=T(ye,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"speakers",numberOfInputs:6});de.connect(ye.destination),B=(async()=>{const fe=await Promise.all([U.orientationX,U.orientationY,U.orientationZ,U.positionX,U.positionY,U.positionZ].map(async(ue,ge)=>{const ae=E(ye,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",offset:ge===0?1:0});return await F(ye,ue,ae.offset),ae}));for(let ue=0;ue<6;ue+=1)fe[ue].connect(de,0,ue),fe[ue].start(0);return D(ye)})()}const Q=await B,J=C(z,{...X,gain:1});await O(U,z,J);const te=[];for(let ye=0;ye<Q.numberOfChannels;ye+=1)te.push(Q.getChannelData(ye));let ie=[te[0][0],te[1][0],te[2][0]],ne=[te[3][0],te[4][0],te[5][0]],he=C(z,{...X,gain:1}),ve=P(z,{...K,orientationX:ie[0],orientationY:ie[1],orientationZ:ie[2],positionX:ne[0],positionY:ne[1],positionZ:ne[2]});J.connect(he).connect(ve.inputs[0]),ve.connect(W);for(let ye=128;ye<Q.length;ye+=128){const de=[te[0][ye],te[1][ye],te[2][ye]],fe=[te[3][ye],te[4][ye],te[5][ye]];if(de.some((ue,ge)=>ue!==ie[ge])||fe.some((ue,ge)=>ue!==ne[ge])){ie=de,ne=fe;const ue=ye/z.sampleRate;he.gain.setValueAtTime(0,ue),he=C(z,{...X,gain:0}),ve=P(z,{...K,orientationX:ie[0],orientationY:ie[1],orientationZ:ie[2],positionX:ne[0],positionY:ne[1],positionZ:ne[2]}),he.gain.setValueAtTime(1,ue),J.connect(he).connect(ve.inputs[0]),ve.connect(W)}}return W}return Y?(await A(z,U.orientationX,Z.orientationX),await A(z,U.orientationY,Z.orientationY),await A(z,U.orientationZ,Z.orientationZ),await A(z,U.positionX,Z.positionX),await A(z,U.positionY,Z.positionY),await A(z,U.positionZ,Z.positionZ)):(await F(z,U.orientationX,Z.orientationX),await F(z,U.orientationY,Z.orientationY),await F(z,U.orientationZ,Z.orientationZ),await F(z,U.positionX,Z.positionX),await F(z,U.positionY,Z.positionY),await F(z,U.positionZ,Z.positionZ)),isNativeAudioNodeFaker(Z)?await O(U,z,Z.inputs[0]):await O(U,z,Z),Z};return{render(U,z){const W=L.get(z);return W!==void 0?Promise.resolve(W):V(U,z)}}},DEFAULT_OPTIONS$2={disableNormalization:!1},createPeriodicWaveConstructor=(A,T,E,C)=>class th{constructor(I,R){const F=T(I),O=C({...DEFAULT_OPTIONS$2,...R}),D=A(F,O);return E.add(D),D}static[Symbol.hasInstance](I){return I!==null&&typeof I=="object"&&Object.getPrototypeOf(I)===th.prototype||E.has(I)}},createRenderAutomation=(A,T)=>(E,C,P)=>(A(C).replay(P),T(C,E,P)),createRenderInputsOfAudioNode=(A,T,E)=>async(C,P,I)=>{const R=A(C);await Promise.all(R.activeInputs.map((F,O)=>Array.from(F).map(async([D,L])=>{const V=await T(D).render(D,P),U=C.context.destination;!E(D)&&(C!==U||!E(C))&&V.connect(I,L,O)})).reduce((F,O)=>[...F,...O],[]))},createRenderInputsOfAudioParam=(A,T,E)=>async(C,P,I)=>{const R=T(C);await Promise.all(Array.from(R.activeInputs).map(async([F,O])=>{const L=await A(F).render(F,P);E(F)||L.connect(I,O)}))},createRenderNativeOfflineAudioContext=(A,T,E,C)=>P=>A(testPromiseSupport,()=>testPromiseSupport(P))?Promise.resolve(A(C,C)).then(I=>{if(!I){const R=E(P,512,0,1);P.oncomplete=()=>{R.onaudioprocess=null,R.disconnect()},R.onaudioprocess=()=>P.currentTime,R.connect(P.destination)}return P.startRendering()}):new Promise(I=>{const R=T(P,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});P.oncomplete=F=>{R.disconnect(),I(F.renderedBuffer)},R.connect(P.destination),P.startRendering()}),createSetActiveAudioWorkletNodeInputs=A=>(T,E)=>{A.set(T,E)},createSetAudioNodeTailTime=A=>(T,E)=>A.set(T,E),createStartRendering=(A,T,E,C,P,I,R,F)=>(O,D)=>E(O).render(O,D).then(()=>Promise.all(Array.from(C(D)).map(L=>E(L).render(L,D)))).then(()=>P(D)).then(L=>(typeof L.copyFromChannel!="function"?(R(L),wrapAudioBufferGetChannelDataMethod(L)):T(I,()=>I(L))||F(L),A.add(L),L)),DEFAULT_OPTIONS$1={channelCount:2,channelCountMode:"explicit",channelInterpretation:"speakers",pan:0},createStereoPannerNodeConstructor=(A,T,E,C,P,I)=>class extends A{constructor(F,O){const D=P(F),L={...DEFAULT_OPTIONS$1,...O},B=E(D,L),V=I(D),U=V?C():null;super(F,!1,B,U),this._pan=T(this,V,B.pan)}get pan(){return this._pan}},createStereoPannerNodeRendererFactory=(A,T,E,C,P)=>()=>{const I=new WeakMap,R=async(F,O)=>{let D=E(F);const L=isOwnedByContext(D,O);if(!L){const B={channelCount:D.channelCount,channelCountMode:D.channelCountMode,channelInterpretation:D.channelInterpretation,pan:D.pan.value};D=T(O,B)}return I.set(O,D),L?await A(O,F.pan,D.pan):await C(O,F.pan,D.pan),isNativeAudioNodeFaker(D)?await P(F,O,D.inputs[0]):await P(F,O,D),D};return{render(F,O){const D=I.get(O);return D!==void 0?Promise.resolve(D):R(F,O)}}},createTestAudioBufferConstructorSupport=A=>()=>{if(A===null)return!1;try{new A({length:1,sampleRate:44100})}catch{return!1}return!0},createTestAudioWorkletProcessorPostMessageSupport=(A,T)=>async()=>{if(A===null)return!0;if(T===null)return!1;const E=new Blob(['class A extends AudioWorkletProcessor{process(i){this.port.postMessage(i,[i[0][0].buffer])}}registerProcessor("a",A)'],{type:"application/javascript; charset=utf-8"}),C=new T(1,128,44100),P=URL.createObjectURL(E);let I=!1,R=!1;try{await C.audioWorklet.addModule(P);const F=new A(C,"a",{numberOfOutputs:0}),O=C.createOscillator();F.port.onmessage=()=>I=!0,F.onprocessorerror=()=>R=!0,O.connect(F),O.start(0),await C.startRendering(),await new Promise(D=>setTimeout(D))}catch{}finally{URL.revokeObjectURL(P)}return I&&!R},createTestOfflineAudioContextCurrentTimeSupport=(A,T)=>()=>{if(T===null)return Promise.resolve(!1);const E=new T(1,1,44100),C=A(E,{channelCount:1,channelCountMode:"explicit",channelInterpretation:"discrete",gain:0});return new Promise(P=>{E.oncomplete=()=>{C.disconnect(),P(E.currentTime!==0)},E.startRendering()})},createUnknownError=()=>new DOMException("","UnknownError"),DEFAULT_OPTIONS={channelCount:2,channelCountMode:"max",channelInterpretation:"speakers",curve:null,oversample:"none"},createWaveShaperNodeConstructor=(A,T,E,C,P,I,R)=>class extends A{constructor(O,D){const L=P(O),B={...DEFAULT_OPTIONS,...D},V=E(L,B),z=I(L)?C():null;super(O,!0,V,z),this._isCurveNullified=!1,this._nativeWaveShaperNode=V,R(this,1)}get curve(){return this._isCurveNullified?null:this._nativeWaveShaperNode.curve}set curve(O){if(O===null)this._isCurveNullified=!0,this._nativeWaveShaperNode.curve=new Float32Array([0,0]);else{if(O.length<2)throw T();this._isCurveNullified=!1,this._nativeWaveShaperNode.curve=O}}get oversample(){return this._nativeWaveShaperNode.oversample}set oversample(O){this._nativeWaveShaperNode.oversample=O}},createWaveShaperNodeRendererFactory=(A,T,E)=>()=>{const C=new WeakMap,P=async(I,R)=>{let F=T(I);if(!isOwnedByContext(F,R)){const D={channelCount:F.channelCount,channelCountMode:F.channelCountMode,channelInterpretation:F.channelInterpretation,curve:F.curve,oversample:F.oversample};F=A(R,D)}return C.set(R,F),isNativeAudioNodeFaker(F)?await E(I,R,F.inputs[0]):await E(I,R,F),F};return{render(I,R){const F=C.get(R);return F!==void 0?Promise.resolve(F):P(I,R)}}},createWindow=()=>typeof window>"u"?null:window,createWrapAudioBufferCopyChannelMethods=(A,T)=>E=>{E.copyFromChannel=(C,P,I=0)=>{const R=A(I),F=A(P);if(F>=E.numberOfChannels)throw T();const O=E.length,D=E.getChannelData(F),L=C.length;for(let B=R<0?-R:0;B+R<O&&B<L;B+=1)C[B]=D[B+R]},E.copyToChannel=(C,P,I=0)=>{const R=A(I),F=A(P);if(F>=E.numberOfChannels)throw T();const O=E.length,D=E.getChannelData(F),L=C.length;for(let B=R<0?-R:0;B+R<O&&B<L;B+=1)D[B+R]=C[B]}},createWrapAudioBufferCopyChannelMethodsOutOfBounds=A=>T=>{T.copyFromChannel=(E=>(C,P,I=0)=>{const R=A(I),F=A(P);if(R<T.length)return E.call(T,C,F,R)})(T.copyFromChannel),T.copyToChannel=(E=>(C,P,I=0)=>{const R=A(I),F=A(P);if(R<T.length)return E.call(T,C,F,R)})(T.copyToChannel)},createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer=A=>(T,E)=>{const C=E.createBuffer(1,1,44100);T.buffer===null&&(T.buffer=C),A(T,"buffer",P=>()=>{const I=P.call(T);return I===C?null:I},P=>I=>P.call(T,I===null?C:I))},createWrapChannelMergerNode=(A,T)=>(E,C)=>{C.channelCount=1,C.channelCountMode="explicit",Object.defineProperty(C,"channelCount",{get:()=>1,set:()=>{throw A()}}),Object.defineProperty(C,"channelCountMode",{get:()=>"explicit",set:()=>{throw A()}});const P=E.createBufferSource();T(C,()=>{const F=C.numberOfInputs;for(let O=0;O<F;O+=1)P.connect(C,0,O)},()=>P.disconnect(C))},getFirstSample=(A,T,E)=>A.copyFromChannel===void 0?A.getChannelData(E)[0]:(A.copyFromChannel(T,E),T[0]),isDCCurve=A=>{if(A===null)return!1;const T=A.length;return T%2!==0?A[Math.floor(T/2)]!==0:A[T/2-1]+A[T/2]!==0},overwriteAccessors=(A,T,E,C)=>{let P=A;for(;!P.hasOwnProperty(T);)P=Object.getPrototypeOf(P);const{get:I,set:R}=Object.getOwnPropertyDescriptor(P,T);Object.defineProperty(A,T,{get:E(I),set:C(R)})},sanitizeAudioWorkletNodeOptions=A=>({...A,outputChannelCount:A.outputChannelCount!==void 0?A.outputChannelCount:A.numberOfInputs===1&&A.numberOfOutputs===1?[A.channelCount]:Array.from({length:A.numberOfOutputs},()=>1)}),sanitizeChannelSplitterOptions=A=>({...A,channelCount:A.numberOfOutputs}),sanitizePeriodicWaveOptions=A=>{const{imag:T,real:E}=A;return T===void 0?E===void 0?{...A,imag:[0,0],real:[0,0]}:{...A,imag:Array.from(E,()=>0),real:E}:E===void 0?{...A,imag:T,real:Array.from(T,()=>0)}:{...A,imag:T,real:E}},setValueAtTimeUntilPossible=(A,T,E)=>{try{A.setValueAtTime(T,E)}catch(C){if(C.code!==9)throw C;setValueAtTimeUntilPossible(A,T,E+1e-7)}},testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport=A=>{const T=A.createBufferSource();T.start();try{T.start()}catch{return!0}return!1},testAudioBufferSourceNodeStartMethodOffsetClampingSupport=A=>{const T=A.createBufferSource(),E=A.createBuffer(1,1,44100);T.buffer=E;try{T.start(0,1)}catch{return!1}return!0},testAudioBufferSourceNodeStopMethodNullifiedBufferSupport=A=>{const T=A.createBufferSource();T.start();try{T.stop()}catch{return!1}return!0},testAudioScheduledSourceNodeStartMethodNegativeParametersSupport=A=>{const T=A.createOscillator();try{T.start(-1)}catch(E){return E instanceof RangeError}return!1},testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport=A=>{const T=A.createBuffer(1,1,44100),E=A.createBufferSource();E.buffer=T,E.start(),E.stop();try{return E.stop(),!0}catch{return!1}},testAudioScheduledSourceNodeStopMethodNegativeParametersSupport=A=>{const T=A.createOscillator();try{T.stop(-1)}catch(E){return E instanceof RangeError}return!1},testAudioWorkletNodeOptionsClonability=A=>{const{port1:T,port2:E}=new MessageChannel;try{T.postMessage(A)}finally{T.close(),E.close()}},wrapAudioBufferSourceNodeStartMethodOffsetClamping=A=>{A.start=(T=>(E=0,C=0,P)=>{const I=A.buffer,R=I===null?C:Math.min(I.duration,C);I!==null&&R>I.duration-.5/A.context.sampleRate?T.call(A,E,0,0):T.call(A,E,R,P)})(A.start)},wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls=(A,T)=>{const E=T.createGain();A.connect(E);const C=(P=>()=>{P.call(A,E),A.removeEventListener("ended",C)})(A.disconnect);A.addEventListener("ended",C),interceptConnections(A,E),A.stop=(P=>{let I=!1;return(R=0)=>{if(I)try{P.call(A,R)}catch{E.gain.setValueAtTime(0,R)}else P.call(A,R),I=!0}})(A.stop)},wrapEventListener=(A,T)=>E=>{const C={value:A};return Object.defineProperties(E,{currentTarget:C,target:C}),typeof T=="function"?T.call(A,E):T.handleEvent.call(A,E)},addActiveInputConnectionToAudioNode=createAddActiveInputConnectionToAudioNode(insertElementInSet),addPassiveInputConnectionToAudioNode=createAddPassiveInputConnectionToAudioNode(insertElementInSet),deleteActiveInputConnectionToAudioNode=createDeleteActiveInputConnectionToAudioNode(pickElementFromSet),audioNodeTailTimeStore=new WeakMap,getAudioNodeTailTime=createGetAudioNodeTailTime(audioNodeTailTimeStore),cacheTestResult=createCacheTestResult(new Map,new WeakMap),window$1=createWindow(),createNativeAnalyserNode=createNativeAnalyserNodeFactory(cacheTestResult,createIndexSizeError),getAudioNodeRenderer=createGetAudioNodeRenderer(getAudioNodeConnections),renderInputsOfAudioNode=createRenderInputsOfAudioNode(getAudioNodeConnections,getAudioNodeRenderer,isPartOfACycle),createAnalyserNodeRenderer=createAnalyserNodeRendererFactory(createNativeAnalyserNode,getNativeAudioNode,renderInputsOfAudioNode),getNativeContext=createGetNativeContext(CONTEXT_STORE),nativeOfflineAudioContextConstructor=createNativeOfflineAudioContextConstructor(window$1),isNativeOfflineAudioContext=createIsNativeOfflineAudioContext(nativeOfflineAudioContextConstructor),audioParamAudioNodeStore=new WeakMap,eventTargetConstructor=createEventTargetConstructor(wrapEventListener),nativeAudioContextConstructor=createNativeAudioContextConstructor(window$1),isNativeAudioContext=createIsNativeAudioContext(nativeAudioContextConstructor),isNativeAudioNode=createIsNativeAudioNode(window$1),isNativeAudioParam=createIsNativeAudioParam(window$1),nativeAudioWorkletNodeConstructor=createNativeAudioWorkletNodeConstructor(window$1),audioNodeConstructor=createAudioNodeConstructor(createAddAudioNodeConnections(AUDIO_NODE_CONNECTIONS_STORE),createAddConnectionToAudioNode(addActiveInputConnectionToAudioNode,addPassiveInputConnectionToAudioNode,connectNativeAudioNodeToNativeAudioNode,deleteActiveInputConnectionToAudioNode,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getAudioNodeTailTime,getEventListenersOfAudioNode,getNativeAudioNode,insertElementInSet,isActiveAudioNode,isPartOfACycle,isPassiveAudioNode),cacheTestResult,createIncrementCycleCounterFactory(CYCLE_COUNTERS,disconnectNativeAudioNodeFromNativeAudioNode,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,isActiveAudioNode),createIndexSizeError,createInvalidAccessError,createNotSupportedError,createDecrementCycleCounter(connectNativeAudioNodeToNativeAudioNode,CYCLE_COUNTERS,getAudioNodeConnections,getNativeAudioNode,getNativeAudioParam,getNativeContext,isActiveAudioNode,isNativeOfflineAudioContext),createDetectCycles(audioParamAudioNodeStore,getAudioNodeConnections,getValueForKey),eventTargetConstructor,getNativeContext,isNativeAudioContext,isNativeAudioNode,isNativeAudioParam,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor),analyserNodeConstructor=createAnalyserNodeConstructor(audioNodeConstructor,createAnalyserNodeRenderer,createIndexSizeError,createNativeAnalyserNode,getNativeContext,isNativeOfflineAudioContext),audioBufferStore=new WeakSet,nativeAudioBufferConstructor=createNativeAudioBufferConstructor(window$1),convertNumberToUnsignedLong=createConvertNumberToUnsignedLong(new Uint32Array(1)),wrapAudioBufferCopyChannelMethods=createWrapAudioBufferCopyChannelMethods(convertNumberToUnsignedLong,createIndexSizeError),wrapAudioBufferCopyChannelMethodsOutOfBounds=createWrapAudioBufferCopyChannelMethodsOutOfBounds(convertNumberToUnsignedLong),audioBufferConstructor=createAudioBufferConstructor(audioBufferStore,cacheTestResult,createNotSupportedError,nativeAudioBufferConstructor,nativeOfflineAudioContextConstructor,createTestAudioBufferConstructorSupport(nativeAudioBufferConstructor),wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),addSilentConnection=createAddSilentConnection(createNativeGainNode),renderInputsOfAudioParam=createRenderInputsOfAudioParam(getAudioNodeRenderer,getAudioParamConnections,isPartOfACycle),connectAudioParam=createConnectAudioParam(renderInputsOfAudioParam),createNativeAudioBufferSourceNode=createNativeAudioBufferSourceNodeFactory(addSilentConnection,cacheTestResult,testAudioBufferSourceNodeStartMethodConsecutiveCallsSupport,testAudioBufferSourceNodeStartMethodOffsetClampingSupport,testAudioBufferSourceNodeStopMethodNullifiedBufferSupport,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioBufferSourceNodeStartMethodOffsetClamping,createWrapAudioBufferSourceNodeStopMethodNullifiedBuffer(overwriteAccessors),wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),renderAutomation=createRenderAutomation(createGetAudioParamRenderer(getAudioParamConnections),renderInputsOfAudioParam),createAudioBufferSourceNodeRenderer=createAudioBufferSourceNodeRendererFactory(connectAudioParam,createNativeAudioBufferSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),createAudioParam=createAudioParamFactory(createAddAudioParamConnections(AUDIO_PARAM_CONNECTIONS_STORE),audioParamAudioNodeStore,AUDIO_PARAM_STORE,createAudioParamRenderer,createCancelAndHoldAutomationEvent,createCancelScheduledValuesAutomationEvent,createExponentialRampToValueAutomationEvent,createLinearRampToValueAutomationEvent,createSetTargetAutomationEvent,createSetValueAutomationEvent,createSetValueCurveAutomationEvent,nativeAudioContextConstructor,setValueAtTimeUntilPossible),audioBufferSourceNodeConstructor=createAudioBufferSourceNodeConstructor(audioNodeConstructor,createAudioBufferSourceNodeRenderer,createAudioParam,createInvalidStateError,createNativeAudioBufferSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),audioDestinationNodeConstructor=createAudioDestinationNodeConstructor(audioNodeConstructor,createAudioDestinationNodeRenderer,createIndexSizeError,createInvalidStateError,createNativeAudioDestinationNodeFactory(createNativeGainNode,overwriteAccessors),getNativeContext,isNativeOfflineAudioContext,renderInputsOfAudioNode),createBiquadFilterNodeRenderer=createBiquadFilterNodeRendererFactory(connectAudioParam,createNativeBiquadFilterNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),setAudioNodeTailTime=createSetAudioNodeTailTime(audioNodeTailTimeStore),biquadFilterNodeConstructor=createBiquadFilterNodeConstructor(audioNodeConstructor,createAudioParam,createBiquadFilterNodeRenderer,createInvalidAccessError,createNativeBiquadFilterNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),monitorConnections=createMonitorConnections(insertElementInSet,isNativeAudioNode),wrapChannelMergerNode=createWrapChannelMergerNode(createInvalidStateError,monitorConnections),createNativeChannelMergerNode=createNativeChannelMergerNodeFactory(nativeAudioContextConstructor,wrapChannelMergerNode),createChannelMergerNodeRenderer=createChannelMergerNodeRendererFactory(createNativeChannelMergerNode,getNativeAudioNode,renderInputsOfAudioNode),channelMergerNodeConstructor=createChannelMergerNodeConstructor(audioNodeConstructor,createChannelMergerNodeRenderer,createNativeChannelMergerNode,getNativeContext,isNativeOfflineAudioContext),createChannelSplitterNodeRenderer=createChannelSplitterNodeRendererFactory(createNativeChannelSplitterNode,getNativeAudioNode,renderInputsOfAudioNode),channelSplitterNodeConstructor=createChannelSplitterNodeConstructor(audioNodeConstructor,createChannelSplitterNodeRenderer,createNativeChannelSplitterNode,getNativeContext,isNativeOfflineAudioContext,sanitizeChannelSplitterOptions),createNativeConstantSourceNodeFaker=createNativeConstantSourceNodeFakerFactory(addSilentConnection,createNativeAudioBufferSourceNode,createNativeGainNode,monitorConnections),createNativeConstantSourceNode=createNativeConstantSourceNodeFactory(addSilentConnection,cacheTestResult,createNativeConstantSourceNodeFaker,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport),createConstantSourceNodeRenderer=createConstantSourceNodeRendererFactory(connectAudioParam,createNativeConstantSourceNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),constantSourceNodeConstructor=createConstantSourceNodeConstructor(audioNodeConstructor,createAudioParam,createConstantSourceNodeRenderer,createNativeConstantSourceNode,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createNativeConvolverNode=createNativeConvolverNodeFactory(createNotSupportedError,overwriteAccessors),createConvolverNodeRenderer=createConvolverNodeRendererFactory(createNativeConvolverNode,getNativeAudioNode,renderInputsOfAudioNode),convolverNodeConstructor=createConvolverNodeConstructor(audioNodeConstructor,createConvolverNodeRenderer,createNativeConvolverNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createDelayNodeRenderer=createDelayNodeRendererFactory(connectAudioParam,createNativeDelayNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),delayNodeConstructor=createDelayNodeConstructor(audioNodeConstructor,createAudioParam,createDelayNodeRenderer,createNativeDelayNode,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativeDynamicsCompressorNode=createNativeDynamicsCompressorNodeFactory(createNotSupportedError),createDynamicsCompressorNodeRenderer=createDynamicsCompressorNodeRendererFactory(connectAudioParam,createNativeDynamicsCompressorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),dynamicsCompressorNodeConstructor=createDynamicsCompressorNodeConstructor(audioNodeConstructor,createAudioParam,createDynamicsCompressorNodeRenderer,createNativeDynamicsCompressorNode,createNotSupportedError,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createGainNodeRenderer=createGainNodeRendererFactory(connectAudioParam,createNativeGainNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),gainNodeConstructor=createGainNodeConstructor(audioNodeConstructor,createAudioParam,createGainNodeRenderer,createNativeGainNode,getNativeContext,isNativeOfflineAudioContext),createNativeIIRFilterNodeFaker=createNativeIIRFilterNodeFakerFactory(createInvalidAccessError,createInvalidStateError,createNativeScriptProcessorNode,createNotSupportedError),renderNativeOfflineAudioContext=createRenderNativeOfflineAudioContext(cacheTestResult,createNativeGainNode,createNativeScriptProcessorNode,createTestOfflineAudioContextCurrentTimeSupport(createNativeGainNode,nativeOfflineAudioContextConstructor)),createIIRFilterNodeRenderer=createIIRFilterNodeRendererFactory(createNativeAudioBufferSourceNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderInputsOfAudioNode,renderNativeOfflineAudioContext),createNativeIIRFilterNode=createNativeIIRFilterNodeFactory(createNativeIIRFilterNodeFaker),iIRFilterNodeConstructor=createIIRFilterNodeConstructor(audioNodeConstructor,createNativeIIRFilterNode,createIIRFilterNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createAudioListener=createAudioListenerFactory(createAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeScriptProcessorNode,createNotSupportedError,getFirstSample,isNativeOfflineAudioContext,overwriteAccessors),unrenderedAudioWorkletNodeStore=new WeakMap,minimalBaseAudioContextConstructor=createMinimalBaseAudioContextConstructor(audioDestinationNodeConstructor,createAudioListener,eventTargetConstructor,isNativeOfflineAudioContext,unrenderedAudioWorkletNodeStore,wrapEventListener),createNativeOscillatorNode=createNativeOscillatorNodeFactory(addSilentConnection,cacheTestResult,testAudioScheduledSourceNodeStartMethodNegativeParametersSupport,testAudioScheduledSourceNodeStopMethodConsecutiveCallsSupport,testAudioScheduledSourceNodeStopMethodNegativeParametersSupport,wrapAudioScheduledSourceNodeStopMethodConsecutiveCalls),createOscillatorNodeRenderer=createOscillatorNodeRendererFactory(connectAudioParam,createNativeOscillatorNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),oscillatorNodeConstructor=createOscillatorNodeConstructor(audioNodeConstructor,createAudioParam,createNativeOscillatorNode,createOscillatorNodeRenderer,getNativeContext,isNativeOfflineAudioContext,wrapEventListener),createConnectedNativeAudioBufferSourceNode=createConnectedNativeAudioBufferSourceNodeFactory(createNativeAudioBufferSourceNode),createNativeWaveShaperNodeFaker=createNativeWaveShaperNodeFakerFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeGainNode,isDCCurve,monitorConnections),createNativeWaveShaperNode=createNativeWaveShaperNodeFactory(createConnectedNativeAudioBufferSourceNode,createInvalidStateError,createNativeWaveShaperNodeFaker,isDCCurve,monitorConnections,nativeAudioContextConstructor,overwriteAccessors),createNativePannerNodeFaker=createNativePannerNodeFakerFactory(connectNativeAudioNodeToNativeAudioNode,createInvalidStateError,createNativeChannelMergerNode,createNativeGainNode,createNativeScriptProcessorNode,createNativeWaveShaperNode,createNotSupportedError,disconnectNativeAudioNodeFromNativeAudioNode,getFirstSample,monitorConnections),createNativePannerNode=createNativePannerNodeFactory(createNativePannerNodeFaker),createPannerNodeRenderer=createPannerNodeRendererFactory(connectAudioParam,createNativeChannelMergerNode,createNativeConstantSourceNode,createNativeGainNode,createNativePannerNode,getNativeAudioNode,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),pannerNodeConstructor=createPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativePannerNode,createPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),createNativePeriodicWave=createNativePeriodicWaveFactory(createIndexSizeError),periodicWaveConstructor=createPeriodicWaveConstructor(createNativePeriodicWave,getNativeContext,new WeakSet,sanitizePeriodicWaveOptions),nativeStereoPannerNodeFakerFactory=createNativeStereoPannerNodeFakerFactory(createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeGainNode,createNativeWaveShaperNode,createNotSupportedError,monitorConnections),createNativeStereoPannerNode=createNativeStereoPannerNodeFactory(nativeStereoPannerNodeFakerFactory,createNotSupportedError),createStereoPannerNodeRenderer=createStereoPannerNodeRendererFactory(connectAudioParam,createNativeStereoPannerNode,getNativeAudioNode,renderAutomation,renderInputsOfAudioNode),stereoPannerNodeConstructor=createStereoPannerNodeConstructor(audioNodeConstructor,createAudioParam,createNativeStereoPannerNode,createStereoPannerNodeRenderer,getNativeContext,isNativeOfflineAudioContext),createWaveShaperNodeRenderer=createWaveShaperNodeRendererFactory(createNativeWaveShaperNode,getNativeAudioNode,renderInputsOfAudioNode),waveShaperNodeConstructor=createWaveShaperNodeConstructor(audioNodeConstructor,createInvalidStateError,createNativeWaveShaperNode,createWaveShaperNodeRenderer,getNativeContext,isNativeOfflineAudioContext,setAudioNodeTailTime),isSecureContext=createIsSecureContext(window$1),exposeCurrentFrameAndCurrentTime=createExposeCurrentFrameAndCurrentTime(window$1),backupOfflineAudioContextStore=new WeakMap,getOrCreateBackupOfflineAudioContext=createGetOrCreateBackupOfflineAudioContext(backupOfflineAudioContextStore,nativeOfflineAudioContextConstructor),addAudioWorkletModule=isSecureContext?createAddAudioWorkletModule(cacheTestResult,createNotSupportedError,createEvaluateSource(window$1),exposeCurrentFrameAndCurrentTime,createFetchSource(createAbortError),getNativeContext,getOrCreateBackupOfflineAudioContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,new WeakMap,new WeakMap,createTestAudioWorkletProcessorPostMessageSupport(nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor),window$1):void 0,isNativeContext=createIsNativeContext(isNativeAudioContext,isNativeOfflineAudioContext),decodeAudioData=createDecodeAudioData(audioBufferStore,cacheTestResult,createDataCloneError,createEncodingError,new WeakSet,getNativeContext,isNativeContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,testPromiseSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),baseAudioContextConstructor=createBaseAudioContextConstructor(addAudioWorkletModule,analyserNodeConstructor,audioBufferConstructor,audioBufferSourceNodeConstructor,biquadFilterNodeConstructor,channelMergerNodeConstructor,channelSplitterNodeConstructor,constantSourceNodeConstructor,convolverNodeConstructor,decodeAudioData,delayNodeConstructor,dynamicsCompressorNodeConstructor,gainNodeConstructor,iIRFilterNodeConstructor,minimalBaseAudioContextConstructor,oscillatorNodeConstructor,pannerNodeConstructor,periodicWaveConstructor,stereoPannerNodeConstructor,waveShaperNodeConstructor),mediaElementAudioSourceNodeConstructor=createMediaElementAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaElementAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioDestinationNodeConstructor=createMediaStreamAudioDestinationNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioDestinationNode,getNativeContext,isNativeOfflineAudioContext),mediaStreamAudioSourceNodeConstructor=createMediaStreamAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamAudioSourceNode,getNativeContext,isNativeOfflineAudioContext),createNativeMediaStreamTrackAudioSourceNode=createNativeMediaStreamTrackAudioSourceNodeFactory(createInvalidStateError,isNativeOfflineAudioContext),mediaStreamTrackAudioSourceNodeConstructor=createMediaStreamTrackAudioSourceNodeConstructor(audioNodeConstructor,createNativeMediaStreamTrackAudioSourceNode,getNativeContext),audioContextConstructor=createAudioContextConstructor(baseAudioContextConstructor,createInvalidStateError,createNotSupportedError,createUnknownError,mediaElementAudioSourceNodeConstructor,mediaStreamAudioDestinationNodeConstructor,mediaStreamAudioSourceNodeConstructor,mediaStreamTrackAudioSourceNodeConstructor,nativeAudioContextConstructor),getUnrenderedAudioWorkletNodes=createGetUnrenderedAudioWorkletNodes(unrenderedAudioWorkletNodeStore),addUnrenderedAudioWorkletNode=createAddUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),connectMultipleOutputs=createConnectMultipleOutputs(createIndexSizeError),deleteUnrenderedAudioWorkletNode=createDeleteUnrenderedAudioWorkletNode(getUnrenderedAudioWorkletNodes),disconnectMultipleOutputs=createDisconnectMultipleOutputs(createIndexSizeError),activeAudioWorkletNodeInputsStore=new WeakMap,getActiveAudioWorkletNodeInputs=createGetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore,getValueForKey),createNativeAudioWorkletNodeFaker=createNativeAudioWorkletNodeFakerFactory(connectMultipleOutputs,createIndexSizeError,createInvalidStateError,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,createNativeScriptProcessorNode,createNotSupportedError,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getActiveAudioWorkletNodeInputs,monitorConnections),createNativeAudioWorkletNode=createNativeAudioWorkletNodeFactory(createInvalidStateError,createNativeAudioWorkletNodeFaker,createNativeGainNode,createNotSupportedError,monitorConnections),createAudioWorkletNodeRenderer=createAudioWorkletNodeRendererFactory(connectAudioParam,connectMultipleOutputs,createNativeAudioBufferSourceNode,createNativeChannelMergerNode,createNativeChannelSplitterNode,createNativeConstantSourceNode,createNativeGainNode,deleteUnrenderedAudioWorkletNode,disconnectMultipleOutputs,exposeCurrentFrameAndCurrentTime,getNativeAudioNode,nativeAudioWorkletNodeConstructor,nativeOfflineAudioContextConstructor,renderAutomation,renderInputsOfAudioNode,renderNativeOfflineAudioContext),getBackupOfflineAudioContext=createGetBackupOfflineAudioContext(backupOfflineAudioContextStore),setActiveAudioWorkletNodeInputs=createSetActiveAudioWorkletNodeInputs(activeAudioWorkletNodeInputsStore),audioWorkletNodeConstructor=isSecureContext?createAudioWorkletNodeConstructor(addUnrenderedAudioWorkletNode,audioNodeConstructor,createAudioParam,createAudioWorkletNodeRenderer,createNativeAudioWorkletNode,getAudioNodeConnections,getBackupOfflineAudioContext,getNativeContext,isNativeOfflineAudioContext,nativeAudioWorkletNodeConstructor,sanitizeAudioWorkletNodeOptions,setActiveAudioWorkletNodeInputs,testAudioWorkletNodeOptionsClonability,wrapEventListener):void 0,createNativeOfflineAudioContext=createCreateNativeOfflineAudioContext(createNotSupportedError,nativeOfflineAudioContextConstructor),startRendering=createStartRendering(audioBufferStore,cacheTestResult,getAudioNodeRenderer,getUnrenderedAudioWorkletNodes,renderNativeOfflineAudioContext,testAudioBufferCopyChannelMethodsOutOfBoundsSupport,wrapAudioBufferCopyChannelMethods,wrapAudioBufferCopyChannelMethodsOutOfBounds),offlineAudioContextConstructor=createOfflineAudioContextConstructor(baseAudioContextConstructor,cacheTestResult,createInvalidStateError,createNativeOfflineAudioContext,startRendering),isAnyAudioContext=createIsAnyAudioContext(CONTEXT_STORE,isNativeAudioContext),isAnyAudioNode=createIsAnyAudioNode(AUDIO_NODE_STORE,isNativeAudioNode),isAnyAudioParam=createIsAnyAudioParam(AUDIO_PARAM_STORE,isNativeAudioParam),isAnyOfflineAudioContext=createIsAnyOfflineAudioContext(CONTEXT_STORE,isNativeOfflineAudioContext);function isUndef(A){return A===void 0}function isDefined(A){return A!==void 0}function isFunction(A){return typeof A=="function"}function isNumber(A){return typeof A=="number"}function isObject(A){return Object.prototype.toString.call(A)==="[object Object]"&&A.constructor===Object}function isBoolean(A){return typeof A=="boolean"}function isArray(A){return Array.isArray(A)}function isString(A){return typeof A=="string"}function isNote(A){return isString(A)&&/^([a-g]{1}(?:b|#|x|bb)?)(-?[0-9]+)/i.test(A)}function assert(A,T){if(!A)throw new Error(T)}function assertRange(A,T,E=1/0){if(!(T<=A&&A<=E))throw new RangeError(`Value must be within [${T}, ${E}], got: ${A}`)}function assertContextRunning(A){!A.isOffline&&A.state!=="running"&&warn('The AudioContext is "suspended". Invoke Tone.start() from a user action to start the audio.')}let isInsideScheduledCallback=!1,printedScheduledWarning=!1;function enterScheduledCallback(A){isInsideScheduledCallback=A}function assertUsedScheduleTime(A){isUndef(A)&&isInsideScheduledCallback&&!printedScheduledWarning&&(printedScheduledWarning=!0,warn("Events scheduled inside of scheduled callbacks should use the passed in scheduling time. See https://github.com/Tonejs/Tone.js/wiki/Accurate-Timing"))}let defaultLogger=console;function log(...A){defaultLogger.log(...A)}function warn(...A){defaultLogger.warn(...A)}function createAudioContext(A){return new audioContextConstructor(A)}function createOfflineAudioContext(A,T,E){return new offlineAudioContextConstructor(A,T,E)}const theWindow=typeof self=="object"?self:null,hasAudioContext=theWindow&&(theWindow.hasOwnProperty("AudioContext")||theWindow.hasOwnProperty("webkitAudioContext"));function createAudioWorkletNode(A,T,E){return assert(isDefined(audioWorkletNodeConstructor),"AudioWorkletNode only works in a secure context (https or localhost)"),new(A instanceof(theWindow==null?void 0:theWindow.BaseAudioContext)?theWindow==null?void 0:theWindow.AudioWorkletNode:audioWorkletNodeConstructor)(A,T,E)}class Ticker{constructor(T,E,C,P){this._callback=T,this._type=E,this._minimumUpdateInterval=Math.max(128/(P||44100),.001),this.updateInterval=C,this._createClock()}_createWorker(){const T=new Blob([`
			// the initial timeout time
			let timeoutTime =  ${(this._updateInterval*1e3).toFixed(1)};
			// onmessage callback
			self.onmessage = function(msg){
				timeoutTime = parseInt(msg.data);
			};
			// the tick function which posts a message
			// and schedules a new tick
			function tick(){
				setTimeout(tick, timeoutTime);
				self.postMessage('tick');
			}
			// call tick initially
			tick();
			`],{type:"text/javascript"}),E=URL.createObjectURL(T),C=new Worker(E);C.onmessage=this._callback.bind(this),this._worker=C}_createTimeout(){this._timeout=setTimeout(()=>{this._createTimeout(),this._callback()},this._updateInterval*1e3)}_createClock(){if(this._type==="worker")try{this._createWorker()}catch{this._type="timeout",this._createClock()}else this._type==="timeout"&&this._createTimeout()}_disposeClock(){this._timeout&&clearTimeout(this._timeout),this._worker&&(this._worker.terminate(),this._worker.onmessage=null)}get updateInterval(){return this._updateInterval}set updateInterval(T){var E;this._updateInterval=Math.max(T,this._minimumUpdateInterval),this._type==="worker"&&((E=this._worker)===null||E===void 0||E.postMessage(this._updateInterval*1e3))}get type(){return this._type}set type(T){this._disposeClock(),this._type=T,this._createClock()}dispose(){this._disposeClock()}}function isAudioParam(A){return isAnyAudioParam(A)}function isAudioNode(A){return isAnyAudioNode(A)}function isOfflineAudioContext(A){return isAnyOfflineAudioContext(A)}function isAudioContext(A){return isAnyAudioContext(A)}function isAudioBuffer(A){return A instanceof audioBufferConstructor}function noCopy(A,T){return A==="value"||isAudioParam(T)||isAudioNode(T)||isAudioBuffer(T)}function deepMerge(A,...T){if(!T.length)return A;const E=T.shift();if(isObject(A)&&isObject(E))for(const C in E)noCopy(C,E[C])?A[C]=E[C]:isObject(E[C])?(A[C]||Object.assign(A,{[C]:{}}),deepMerge(A[C],E[C])):Object.assign(A,{[C]:E[C]});return deepMerge(A,...T)}function deepEquals(A,T){return A.length===T.length&&A.every((E,C)=>T[C]===E)}function optionsFromArguments(A,T,E=[],C){const P={},I=Array.from(T);if(isObject(I[0])&&C&&!Reflect.has(I[0],C)&&(Object.keys(I[0]).some(F=>Reflect.has(A,F))||(deepMerge(P,{[C]:I[0]}),E.splice(E.indexOf(C),1),I.shift())),I.length===1&&isObject(I[0]))deepMerge(P,I[0]);else for(let R=0;R<E.length;R++)isDefined(I[R])&&(P[E[R]]=I[R]);return deepMerge(A,P)}function getDefaultsFromInstance(A){return A.constructor.getDefaults()}function defaultArg(A,T){return isUndef(A)?T:A}function omitFromObject(A,T){return T.forEach(E=>{Reflect.has(A,E)&&delete A[E]}),A}/**
 * Tone.js
 * @author Yotam Mann
 * @license http://opensource.org/licenses/MIT MIT License
 * @copyright 2014-2024 Yotam Mann
 */class Tone{constructor(){this.debug=!1,this._wasDisposed=!1}static getDefaults(){return{}}log(...T){(this.debug||theWindow&&this.toString()===theWindow.TONE_DEBUG_CLASS)&&log(this,...T)}dispose(){return this._wasDisposed=!0,this}get disposed(){return this._wasDisposed}toString(){return this.name}}Tone.version=version;const EPSILON=1e-6;function GT(A,T){return A>T+EPSILON}function GTE(A,T){return GT(A,T)||EQ(A,T)}function LT(A,T){return A+EPSILON<T}function EQ(A,T){return Math.abs(A-T)<EPSILON}function clamp(A,T,E){return Math.max(Math.min(A,E),T)}class Timeline extends Tone{constructor(){super(),this.name="Timeline",this._timeline=[];const T=optionsFromArguments(Timeline.getDefaults(),arguments,["memory"]);this.memory=T.memory,this.increasing=T.increasing}static getDefaults(){return{memory:1/0,increasing:!1}}get length(){return this._timeline.length}add(T){if(assert(Reflect.has(T,"time"),"Timeline: events must have a time attribute"),T.time=T.time.valueOf(),this.increasing&&this.length){const E=this._timeline[this.length-1];assert(GTE(T.time,E.time),"The time must be greater than or equal to the last scheduled time"),this._timeline.push(T)}else{const E=this._search(T.time);this._timeline.splice(E+1,0,T)}if(this.length>this.memory){const E=this.length-this.memory;this._timeline.splice(0,E)}return this}remove(T){const E=this._timeline.indexOf(T);return E!==-1&&this._timeline.splice(E,1),this}get(T,E="time"){const C=this._search(T,E);return C!==-1?this._timeline[C]:null}peek(){return this._timeline[0]}shift(){return this._timeline.shift()}getAfter(T,E="time"){const C=this._search(T,E);return C+1<this._timeline.length?this._timeline[C+1]:null}getBefore(T){const E=this._timeline.length;if(E>0&&this._timeline[E-1].time<T)return this._timeline[E-1];const C=this._search(T);return C-1>=0?this._timeline[C-1]:null}cancel(T){if(this._timeline.length>1){let E=this._search(T);if(E>=0)if(EQ(this._timeline[E].time,T)){for(let C=E;C>=0&&EQ(this._timeline[C].time,T);C--)E=C;this._timeline=this._timeline.slice(0,E)}else this._timeline=this._timeline.slice(0,E+1);else this._timeline=[]}else this._timeline.length===1&&GTE(this._timeline[0].time,T)&&(this._timeline=[]);return this}cancelBefore(T){const E=this._search(T);return E>=0&&(this._timeline=this._timeline.slice(E+1)),this}previousEvent(T){const E=this._timeline.indexOf(T);return E>0?this._timeline[E-1]:null}_search(T,E="time"){if(this._timeline.length===0)return-1;let C=0;const P=this._timeline.length;let I=P;if(P>0&&this._timeline[P-1][E]<=T)return P-1;for(;C<I;){let R=Math.floor(C+(I-C)/2);const F=this._timeline[R],O=this._timeline[R+1];if(EQ(F[E],T)){for(let D=R;D<this._timeline.length;D++){const L=this._timeline[D];if(EQ(L[E],T))R=D;else break}return R}else{if(LT(F[E],T)&&GT(O[E],T))return R;GT(F[E],T)?I=R:C=R+1}}return-1}_iterate(T,E=0,C=this._timeline.length-1){this._timeline.slice(E,C+1).forEach(T)}forEach(T){return this._iterate(T),this}forEachBefore(T,E){const C=this._search(T);return C!==-1&&this._iterate(E,0,C),this}forEachAfter(T,E){const C=this._search(T);return this._iterate(E,C+1),this}forEachBetween(T,E,C){let P=this._search(T),I=this._search(E);return P!==-1&&I!==-1?(this._timeline[P].time!==T&&(P+=1),this._timeline[I].time===E&&(I-=1),this._iterate(C,P,I)):P===-1&&this._iterate(C,0,I),this}forEachFrom(T,E){let C=this._search(T);for(;C>=0&&this._timeline[C].time>=T;)C--;return this._iterate(E,C+1),this}forEachAtTime(T,E){const C=this._search(T);if(C!==-1&&EQ(this._timeline[C].time,T)){let P=C;for(let I=C;I>=0&&EQ(this._timeline[I].time,T);I--)P=I;this._iterate(I=>{E(I)},P,C)}return this}dispose(){return super.dispose(),this._timeline=[],this}}const notifyNewContext=[];function onContextInit(A){notifyNewContext.push(A)}function initializeContext(A){notifyNewContext.forEach(T=>T(A))}const notifyCloseContext=[];function onContextClose(A){notifyCloseContext.push(A)}function closeContext(A){notifyCloseContext.forEach(T=>T(A))}class Emitter extends Tone{constructor(){super(...arguments),this.name="Emitter"}on(T,E){return T.split(/\W+/).forEach(P=>{isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(P)||(this._events[P]=[]),this._events[P].push(E)}),this}once(T,E){const C=(...P)=>{E(...P),this.off(T,C)};return this.on(T,C),this}off(T,E){return T.split(/\W+/).forEach(P=>{if(isUndef(this._events)&&(this._events={}),this._events.hasOwnProperty(P))if(isUndef(E))this._events[P]=[];else{const I=this._events[P];for(let R=I.length-1;R>=0;R--)I[R]===E&&I.splice(R,1)}}),this}emit(T,...E){if(this._events&&this._events.hasOwnProperty(T)){const C=this._events[T].slice(0);for(let P=0,I=C.length;P<I;P++)C[P].apply(this,E)}return this}static mixin(T){["on","once","off","emit"].forEach(E=>{const C=Object.getOwnPropertyDescriptor(Emitter.prototype,E);Object.defineProperty(T.prototype,E,C)})}dispose(){return super.dispose(),this._events=void 0,this}}class BaseContext extends Emitter{constructor(){super(...arguments),this.isOffline=!1}toJSON(){return{}}}class Context extends BaseContext{constructor(){var T,E;super(),this.name="Context",this._constants=new Map,this._timeouts=new Timeline,this._timeoutIds=0,this._initialized=!1,this._closeStarted=!1,this.isOffline=!1,this._workletPromise=null;const C=optionsFromArguments(Context.getDefaults(),arguments,["context"]);C.context?(this._context=C.context,this._latencyHint=((T=arguments[0])===null||T===void 0?void 0:T.latencyHint)||""):(this._context=createAudioContext({latencyHint:C.latencyHint}),this._latencyHint=C.latencyHint),this._ticker=new Ticker(this.emit.bind(this,"tick"),C.clockSource,C.updateInterval,this._context.sampleRate),this.on("tick",this._timeoutLoop.bind(this)),this._context.onstatechange=()=>{this.emit("statechange",this.state)},this[!((E=arguments[0])===null||E===void 0)&&E.hasOwnProperty("updateInterval")?"_lookAhead":"lookAhead"]=C.lookAhead}static getDefaults(){return{clockSource:"worker",latencyHint:"interactive",lookAhead:.1,updateInterval:.05}}initialize(){return this._initialized||(initializeContext(this),this._initialized=!0),this}createAnalyser(){return this._context.createAnalyser()}createOscillator(){return this._context.createOscillator()}createBufferSource(){return this._context.createBufferSource()}createBiquadFilter(){return this._context.createBiquadFilter()}createBuffer(T,E,C){return this._context.createBuffer(T,E,C)}createChannelMerger(T){return this._context.createChannelMerger(T)}createChannelSplitter(T){return this._context.createChannelSplitter(T)}createConstantSource(){return this._context.createConstantSource()}createConvolver(){return this._context.createConvolver()}createDelay(T){return this._context.createDelay(T)}createDynamicsCompressor(){return this._context.createDynamicsCompressor()}createGain(){return this._context.createGain()}createIIRFilter(T,E){return this._context.createIIRFilter(T,E)}createPanner(){return this._context.createPanner()}createPeriodicWave(T,E,C){return this._context.createPeriodicWave(T,E,C)}createStereoPanner(){return this._context.createStereoPanner()}createWaveShaper(){return this._context.createWaveShaper()}createMediaStreamSource(T){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamSource(T)}createMediaElementSource(T){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaElementSource(T)}createMediaStreamDestination(){return assert(isAudioContext(this._context),"Not available if OfflineAudioContext"),this._context.createMediaStreamDestination()}decodeAudioData(T){return this._context.decodeAudioData(T)}get currentTime(){return this._context.currentTime}get state(){return this._context.state}get sampleRate(){return this._context.sampleRate}get listener(){return this.initialize(),this._listener}set listener(T){assert(!this._initialized,"The listener cannot be set after initialization."),this._listener=T}get transport(){return this.initialize(),this._transport}set transport(T){assert(!this._initialized,"The transport cannot be set after initialization."),this._transport=T}get draw(){return this.initialize(),this._draw}set draw(T){assert(!this._initialized,"Draw cannot be set after initialization."),this._draw=T}get destination(){return this.initialize(),this._destination}set destination(T){assert(!this._initialized,"The destination cannot be set after initialization."),this._destination=T}createAudioWorkletNode(T,E){return createAudioWorkletNode(this.rawContext,T,E)}addAudioWorkletModule(T){return __awaiter(this,void 0,void 0,function*(){assert(isDefined(this.rawContext.audioWorklet),"AudioWorkletNode is only available in a secure context (https or localhost)"),this._workletPromise||(this._workletPromise=this.rawContext.audioWorklet.addModule(T)),yield this._workletPromise})}workletsAreReady(){return __awaiter(this,void 0,void 0,function*(){(yield this._workletPromise)?this._workletPromise:Promise.resolve()})}get updateInterval(){return this._ticker.updateInterval}set updateInterval(T){this._ticker.updateInterval=T}get clockSource(){return this._ticker.type}set clockSource(T){this._ticker.type=T}get lookAhead(){return this._lookAhead}set lookAhead(T){this._lookAhead=T,this.updateInterval=T?T/2:.01}get latencyHint(){return this._latencyHint}get rawContext(){return this._context}now(){return this._context.currentTime+this._lookAhead}immediate(){return this._context.currentTime}resume(){return isAudioContext(this._context)?this._context.resume():Promise.resolve()}close(){return __awaiter(this,void 0,void 0,function*(){isAudioContext(this._context)&&this.state!=="closed"&&!this._closeStarted&&(this._closeStarted=!0,yield this._context.close()),this._initialized&&closeContext(this)})}getConstant(T){if(this._constants.has(T))return this._constants.get(T);{const E=this._context.createBuffer(1,128,this._context.sampleRate),C=E.getChannelData(0);for(let I=0;I<C.length;I++)C[I]=T;const P=this._context.createBufferSource();return P.channelCount=1,P.channelCountMode="explicit",P.buffer=E,P.loop=!0,P.start(0),this._constants.set(T,P),P}}dispose(){return super.dispose(),this._ticker.dispose(),this._timeouts.dispose(),Object.keys(this._constants).map(T=>this._constants[T].disconnect()),this.close(),this}_timeoutLoop(){const T=this.now();let E=this._timeouts.peek();for(;this._timeouts.length&&E&&E.time<=T;)E.callback(),this._timeouts.shift(),E=this._timeouts.peek()}setTimeout(T,E){this._timeoutIds++;const C=this.now();return this._timeouts.add({callback:T,id:this._timeoutIds,time:C+E}),this._timeoutIds}clearTimeout(T){return this._timeouts.forEach(E=>{E.id===T&&this._timeouts.remove(E)}),this}clearInterval(T){return this.clearTimeout(T)}setInterval(T,E){const C=++this._timeoutIds,P=()=>{const I=this.now();this._timeouts.add({callback:()=>{T(),P()},id:C,time:I+E})};return P(),C}}class DummyContext extends BaseContext{constructor(){super(...arguments),this.lookAhead=0,this.latencyHint=0,this.isOffline=!1}createAnalyser(){return{}}createOscillator(){return{}}createBufferSource(){return{}}createBiquadFilter(){return{}}createBuffer(T,E,C){return{}}createChannelMerger(T){return{}}createChannelSplitter(T){return{}}createConstantSource(){return{}}createConvolver(){return{}}createDelay(T){return{}}createDynamicsCompressor(){return{}}createGain(){return{}}createIIRFilter(T,E){return{}}createPanner(){return{}}createPeriodicWave(T,E,C){return{}}createStereoPanner(){return{}}createWaveShaper(){return{}}createMediaStreamSource(T){return{}}createMediaElementSource(T){return{}}createMediaStreamDestination(){return{}}decodeAudioData(T){return Promise.resolve({})}createAudioWorkletNode(T,E){return{}}get rawContext(){return{}}addAudioWorkletModule(T){return __awaiter(this,void 0,void 0,function*(){return Promise.resolve()})}resume(){return Promise.resolve()}setTimeout(T,E){return 0}clearTimeout(T){return this}setInterval(T,E){return 0}clearInterval(T){return this}getConstant(T){return{}}get currentTime(){return 0}get state(){return{}}get sampleRate(){return 0}get listener(){return{}}get transport(){return{}}get draw(){return{}}set draw(T){}get destination(){return{}}set destination(T){}now(){return 0}immediate(){return 0}}function readOnly(A,T){isArray(T)?T.forEach(E=>readOnly(A,E)):Object.defineProperty(A,T,{enumerable:!0,writable:!1})}function writable(A,T){isArray(T)?T.forEach(E=>writable(A,E)):Object.defineProperty(A,T,{writable:!0})}const noOp=()=>{};class ToneAudioBuffer extends Tone{constructor(){super(),this.name="ToneAudioBuffer",this.onload=noOp;const T=optionsFromArguments(ToneAudioBuffer.getDefaults(),arguments,["url","onload","onerror"]);this.reverse=T.reverse,this.onload=T.onload,isString(T.url)?this.load(T.url).catch(T.onerror):T.url&&this.set(T.url)}static getDefaults(){return{onerror:noOp,onload:noOp,reverse:!1}}get sampleRate(){return this._buffer?this._buffer.sampleRate:getContext().sampleRate}set(T){return T instanceof ToneAudioBuffer?T.loaded?this._buffer=T.get():T.onload=()=>{this.set(T),this.onload(this)}:this._buffer=T,this._reversed&&this._reverse(),this}get(){return this._buffer}load(T){return __awaiter(this,void 0,void 0,function*(){const E=ToneAudioBuffer.load(T).then(C=>{this.set(C),this.onload(this)});ToneAudioBuffer.downloads.push(E);try{yield E}finally{const C=ToneAudioBuffer.downloads.indexOf(E);ToneAudioBuffer.downloads.splice(C,1)}return this})}dispose(){return super.dispose(),this._buffer=void 0,this}fromArray(T){const E=isArray(T)&&T[0].length>0,C=E?T.length:1,P=E?T[0].length:T.length,I=getContext(),R=I.createBuffer(C,P,I.sampleRate),F=!E&&C===1?[T]:T;for(let O=0;O<C;O++)R.copyToChannel(F[O],O);return this._buffer=R,this}toMono(T){if(isNumber(T))this.fromArray(this.toArray(T));else{let E=new Float32Array(this.length);const C=this.numberOfChannels;for(let P=0;P<C;P++){const I=this.toArray(P);for(let R=0;R<I.length;R++)E[R]+=I[R]}E=E.map(P=>P/C),this.fromArray(E)}return this}toArray(T){if(isNumber(T))return this.getChannelData(T);if(this.numberOfChannels===1)return this.toArray(0);{const E=[];for(let C=0;C<this.numberOfChannels;C++)E[C]=this.getChannelData(C);return E}}getChannelData(T){return this._buffer?this._buffer.getChannelData(T):new Float32Array(0)}slice(T,E=this.duration){assert(this.loaded,"Buffer is not loaded");const C=Math.floor(T*this.sampleRate),P=Math.floor(E*this.sampleRate);assert(C<P,"The start time must be less than the end time");const I=P-C,R=getContext().createBuffer(this.numberOfChannels,I,this.sampleRate);for(let F=0;F<this.numberOfChannels;F++)R.copyToChannel(this.getChannelData(F).subarray(C,P),F);return new ToneAudioBuffer(R)}_reverse(){if(this.loaded)for(let T=0;T<this.numberOfChannels;T++)this.getChannelData(T).reverse();return this}get loaded(){return this.length>0}get duration(){return this._buffer?this._buffer.duration:0}get length(){return this._buffer?this._buffer.length:0}get numberOfChannels(){return this._buffer?this._buffer.numberOfChannels:0}get reverse(){return this._reversed}set reverse(T){this._reversed!==T&&(this._reversed=T,this._reverse())}static fromArray(T){return new ToneAudioBuffer().fromArray(T)}static fromUrl(T){return __awaiter(this,void 0,void 0,function*(){return yield new ToneAudioBuffer().load(T)})}static load(T){return __awaiter(this,void 0,void 0,function*(){const E=T.match(/\[([^\]\[]+\|.+)\]$/);if(E){const O=E[1].split("|");let D=O[0];for(const L of O)if(ToneAudioBuffer.supportsType(L)){D=L;break}T=T.replace(E[0],D)}const C=ToneAudioBuffer.baseUrl===""||ToneAudioBuffer.baseUrl.endsWith("/")?ToneAudioBuffer.baseUrl:ToneAudioBuffer.baseUrl+"/",P=document.createElement("a");P.href=C+T,P.pathname=(P.pathname+P.hash).split("/").map(encodeURIComponent).join("/");const I=yield fetch(P.href);if(!I.ok)throw new Error(`could not load url: ${T}`);const R=yield I.arrayBuffer();return yield getContext().decodeAudioData(R)})}static supportsType(T){const E=T.split("."),C=E[E.length-1];return document.createElement("audio").canPlayType("audio/"+C)!==""}static loaded(){return __awaiter(this,void 0,void 0,function*(){for(yield Promise.resolve();ToneAudioBuffer.downloads.length;)yield ToneAudioBuffer.downloads[0]})}}ToneAudioBuffer.baseUrl="";ToneAudioBuffer.downloads=[];class OfflineContext extends Context{constructor(){super({clockSource:"offline",context:isOfflineAudioContext(arguments[0])?arguments[0]:createOfflineAudioContext(arguments[0],arguments[1]*arguments[2],arguments[2]),lookAhead:0,updateInterval:isOfflineAudioContext(arguments[0])?128/arguments[0].sampleRate:128/arguments[2]}),this.name="OfflineContext",this._currentTime=0,this.isOffline=!0,this._duration=isOfflineAudioContext(arguments[0])?arguments[0].length/arguments[0].sampleRate:arguments[1]}now(){return this._currentTime}get currentTime(){return this._currentTime}_renderClock(T){return __awaiter(this,void 0,void 0,function*(){let E=0;for(;this._duration-this._currentTime>=0;){this.emit("tick"),this._currentTime+=128/this.sampleRate,E++;const C=Math.floor(this.sampleRate/128);T&&E%C===0&&(yield new Promise(P=>setTimeout(P,1)))}})}render(){return __awaiter(this,arguments,void 0,function*(T=!0){yield this.workletsAreReady(),yield this._renderClock(T);const E=yield this._context.startRendering();return new ToneAudioBuffer(E)})}close(){return Promise.resolve()}}const dummyContext=new DummyContext;let globalContext=dummyContext;function getContext(){return globalContext===dummyContext&&hasAudioContext&&setContext(new Context),globalContext}function setContext(A,T=!1){T&&globalContext.dispose(),isAudioContext(A)?globalContext=new Context(A):isOfflineAudioContext(A)?globalContext=new OfflineContext(A):globalContext=A}function start(){return globalContext.resume()}if(theWindow&&!theWindow.TONE_SILENCE_LOGGING){const T=` * Tone.js v${version} * `;console.log(`%c${T}`,"background: #000; color: #fff")}function dbToGain(A){return Math.pow(10,A/20)}function gainToDb(A){return 20*(Math.log(A)/Math.LN10)}function intervalToFrequencyRatio(A){return Math.pow(2,A/12)}let A4=440;function getA4(){return A4}function setA4(A){A4=A}function ftom(A){return Math.round(ftomf(A))}function ftomf(A){return 69+12*Math.log2(A/A4)}function mtof(A){return A4*Math.pow(2,(A-69)/12)}class TimeBaseClass extends Tone{constructor(T,E,C){super(),this.defaultUnits="s",this._val=E,this._units=C,this.context=T,this._expressions=this._getExpressions()}_getExpressions(){return{hz:{method:T=>this._frequencyToUnits(parseFloat(T)),regexp:/^(\d+(?:\.\d+)?)hz$/i},i:{method:T=>this._ticksToUnits(parseInt(T,10)),regexp:/^(\d+)i$/i},m:{method:T=>this._beatsToUnits(parseInt(T,10)*this._getTimeSignature()),regexp:/^(\d+)m$/i},n:{method:(T,E)=>{const C=parseInt(T,10),P=E==="."?1.5:1;return C===1?this._beatsToUnits(this._getTimeSignature())*P:this._beatsToUnits(4/C)*P},regexp:/^(\d+)n(\.?)$/i},number:{method:T=>this._expressions[this.defaultUnits].method.call(this,T),regexp:/^(\d+(?:\.\d+)?)$/},s:{method:T=>this._secondsToUnits(parseFloat(T)),regexp:/^(\d+(?:\.\d+)?)s$/},samples:{method:T=>parseInt(T,10)/this.context.sampleRate,regexp:/^(\d+)samples$/},t:{method:T=>{const E=parseInt(T,10);return this._beatsToUnits(8/(Math.floor(E)*3))},regexp:/^(\d+)t$/i},tr:{method:(T,E,C)=>{let P=0;return T&&T!=="0"&&(P+=this._beatsToUnits(this._getTimeSignature()*parseFloat(T))),E&&E!=="0"&&(P+=this._beatsToUnits(parseFloat(E))),C&&C!=="0"&&(P+=this._beatsToUnits(parseFloat(C)/4)),P},regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?$/}}}valueOf(){if(this._val instanceof TimeBaseClass&&this.fromType(this._val),isUndef(this._val))return this._noArg();if(isString(this._val)&&isUndef(this._units)){for(const T in this._expressions)if(this._expressions[T].regexp.test(this._val.trim())){this._units=T;break}}else if(isObject(this._val)){let T=0;for(const E in this._val)if(isDefined(this._val[E])){const C=this._val[E],P=new this.constructor(this.context,E).valueOf()*C;T+=P}return T}if(isDefined(this._units)){const T=this._expressions[this._units],E=this._val.toString().trim().match(T.regexp);return E?T.method.apply(this,E.slice(1)):T.method.call(this,this._val)}else return isString(this._val)?parseFloat(this._val):this._val}_frequencyToUnits(T){return 1/T}_beatsToUnits(T){return 60/this._getBpm()*T}_secondsToUnits(T){return T}_ticksToUnits(T){return T*this._beatsToUnits(1)/this._getPPQ()}_noArg(){return this._now()}_getBpm(){return this.context.transport.bpm.value}_getTimeSignature(){return this.context.transport.timeSignature}_getPPQ(){return this.context.transport.PPQ}fromType(T){switch(this._units=void 0,this.defaultUnits){case"s":this._val=T.toSeconds();break;case"i":this._val=T.toTicks();break;case"hz":this._val=T.toFrequency();break;case"midi":this._val=T.toMidi();break}return this}toFrequency(){return 1/this.toSeconds()}toSamples(){return this.toSeconds()*this.context.sampleRate}toMilliseconds(){return this.toSeconds()*1e3}}class TimeClass extends TimeBaseClass{constructor(){super(...arguments),this.name="TimeClass"}_getExpressions(){return Object.assign(super._getExpressions(),{now:{method:T=>this._now()+new this.constructor(this.context,T).valueOf(),regexp:/^\+(.+)/},quantize:{method:T=>{const E=new TimeClass(this.context,T).valueOf();return this._secondsToUnits(this.context.transport.nextSubdivision(E))},regexp:/^@(.+)/}})}quantize(T,E=1){const C=new this.constructor(this.context,T).valueOf(),P=this.valueOf(),F=Math.round(P/C)*C-P;return P+F*E}toNotation(){const T=this.toSeconds(),E=["1m"];for(let I=1;I<9;I++){const R=Math.pow(2,I);E.push(R+"n."),E.push(R+"n"),E.push(R+"t")}E.push("0");let C=E[0],P=new TimeClass(this.context,E[0]).toSeconds();return E.forEach(I=>{const R=new TimeClass(this.context,I).toSeconds();Math.abs(R-T)<Math.abs(P-T)&&(C=I,P=R)}),C}toBarsBeatsSixteenths(){const T=this._beatsToUnits(1);let E=this.valueOf()/T;E=parseFloat(E.toFixed(4));const C=Math.floor(E/this._getTimeSignature());let P=E%1*4;E=Math.floor(E)%this._getTimeSignature();const I=P.toString();return I.length>3&&(P=parseFloat(parseFloat(I).toFixed(3))),[C,E,P].join(":")}toTicks(){const T=this._beatsToUnits(1);return this.valueOf()/T*this._getPPQ()}toSeconds(){return this.valueOf()}toMidi(){return ftom(this.toFrequency())}_now(){return this.context.now()}}function Time(A,T){return new TimeClass(getContext(),A,T)}class FrequencyClass extends TimeClass{constructor(){super(...arguments),this.name="Frequency",this.defaultUnits="hz"}static get A4(){return getA4()}static set A4(T){setA4(T)}_getExpressions(){return Object.assign({},super._getExpressions(),{midi:{regexp:/^(\d+(?:\.\d+)?midi)/,method(T){return this.defaultUnits==="midi"?T:FrequencyClass.mtof(T)}},note:{regexp:/^([a-g]{1}(?:b|#|##|x|bb|###|#x|x#|bbb)?)(-?[0-9]+)/i,method(T,E){const P=noteToScaleIndex[T.toLowerCase()]+(parseInt(E,10)+1)*12;return this.defaultUnits==="midi"?P:FrequencyClass.mtof(P)}},tr:{regexp:/^(\d+(?:\.\d+)?):(\d+(?:\.\d+)?):?(\d+(?:\.\d+)?)?/,method(T,E,C){let P=1;return T&&T!=="0"&&(P*=this._beatsToUnits(this._getTimeSignature()*parseFloat(T))),E&&E!=="0"&&(P*=this._beatsToUnits(parseFloat(E))),C&&C!=="0"&&(P*=this._beatsToUnits(parseFloat(C)/4)),P}}})}transpose(T){return new FrequencyClass(this.context,this.valueOf()*intervalToFrequencyRatio(T))}harmonize(T){return T.map(E=>this.transpose(E))}toMidi(){return ftom(this.valueOf())}toNote(){const T=this.toFrequency(),E=Math.log2(T/FrequencyClass.A4);let C=Math.round(12*E)+57;const P=Math.floor(C/12);return P<0&&(C+=-12*P),scaleIndexToNote[C%12]+P.toString()}toSeconds(){return 1/super.toSeconds()}toTicks(){const T=this._beatsToUnits(1),E=this.valueOf()/T;return Math.floor(E*this._getPPQ())}_noArg(){return 0}_frequencyToUnits(T){return T}_ticksToUnits(T){return 1/(T*60/(this._getBpm()*this._getPPQ()))}_beatsToUnits(T){return 1/super._beatsToUnits(T)}_secondsToUnits(T){return 1/T}static mtof(T){return mtof(T)}static ftom(T){return ftom(T)}}const noteToScaleIndex={cbbb:-3,cbb:-2,cb:-1,c:0,"c#":1,cx:2,"c##":2,"c###":3,"cx#":3,"c#x":3,dbbb:-1,dbb:0,db:1,d:2,"d#":3,dx:4,"d##":4,"d###":5,"dx#":5,"d#x":5,ebbb:1,ebb:2,eb:3,e:4,"e#":5,ex:6,"e##":6,"e###":7,"ex#":7,"e#x":7,fbbb:2,fbb:3,fb:4,f:5,"f#":6,fx:7,"f##":7,"f###":8,"fx#":8,"f#x":8,gbbb:4,gbb:5,gb:6,g:7,"g#":8,gx:9,"g##":9,"g###":10,"gx#":10,"g#x":10,abbb:6,abb:7,ab:8,a:9,"a#":10,ax:11,"a##":11,"a###":12,"ax#":12,"a#x":12,bbbb:8,bbb:9,bb:10,b:11,"b#":12,bx:13,"b##":13,"b###":14,"bx#":14,"b#x":14},scaleIndexToNote=["C","C#","D","D#","E","F","F#","G","G#","A","A#","B"];class TransportTimeClass extends TimeClass{constructor(){super(...arguments),this.name="TransportTime"}_now(){return this.context.transport.seconds}}class ToneWithContext extends Tone{constructor(){super();const T=optionsFromArguments(ToneWithContext.getDefaults(),arguments,["context"]);this.defaultContext?this.context=this.defaultContext:this.context=T.context}static getDefaults(){return{context:getContext()}}now(){return this.context.currentTime+this.context.lookAhead}immediate(){return this.context.currentTime}get sampleTime(){return 1/this.context.sampleRate}get blockTime(){return 128/this.context.sampleRate}toSeconds(T){return assertUsedScheduleTime(T),new TimeClass(this.context,T).toSeconds()}toFrequency(T){return new FrequencyClass(this.context,T).toFrequency()}toTicks(T){return new TransportTimeClass(this.context,T).toTicks()}_getPartialProperties(T){const E=this.get();return Object.keys(E).forEach(C=>{isUndef(T[C])&&delete E[C]}),E}get(){const T=getDefaultsFromInstance(this);return Object.keys(T).forEach(E=>{if(Reflect.has(this,E)){const C=this[E];isDefined(C)&&isDefined(C.value)&&isDefined(C.setValueAtTime)?T[E]=C.value:C instanceof ToneWithContext?T[E]=C._getPartialProperties(T[E]):isArray(C)||isNumber(C)||isString(C)||isBoolean(C)?T[E]=C:delete T[E]}}),T}set(T){return Object.keys(T).forEach(E=>{Reflect.has(this,E)&&isDefined(this[E])&&(this[E]&&isDefined(this[E].value)&&isDefined(this[E].setValueAtTime)?this[E].value!==T[E]&&(this[E].value=T[E]):this[E]instanceof ToneWithContext?this[E].set(T[E]):this[E]=T[E])}),this}}class StateTimeline extends Timeline{constructor(T="stopped"){super(),this.name="StateTimeline",this._initial=T,this.setStateAtTime(this._initial,0)}getValueAtTime(T){const E=this.get(T);return E!==null?E.state:this._initial}setStateAtTime(T,E,C){return assertRange(E,0),this.add(Object.assign({},C,{state:T,time:E})),this}getLastState(T,E){const C=this._search(E);for(let P=C;P>=0;P--){const I=this._timeline[P];if(I.state===T)return I}}getNextState(T,E){const C=this._search(E);if(C!==-1)for(let P=C;P<this._timeline.length;P++){const I=this._timeline[P];if(I.state===T)return I}}}class Param extends ToneWithContext{constructor(){const T=optionsFromArguments(Param.getDefaults(),arguments,["param","units","convert"]);for(super(T),this.name="Param",this.overridden=!1,this._minOutput=1e-7,assert(isDefined(T.param)&&(isAudioParam(T.param)||T.param instanceof Param),"param must be an AudioParam");!isAudioParam(T.param);)T.param=T.param._param;this._swappable=isDefined(T.swappable)?T.swappable:!1,this._swappable?(this.input=this.context.createGain(),this._param=T.param,this.input.connect(this._param)):this._param=this.input=T.param,this._events=new Timeline(1e3),this._initialValue=this._param.defaultValue,this.units=T.units,this.convert=T.convert,this._minValue=T.minValue,this._maxValue=T.maxValue,isDefined(T.value)&&T.value!==this._toType(this._initialValue)&&this.setValueAtTime(T.value,0)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{convert:!0,units:"number"})}get value(){const T=this.now();return this.getValueAtTime(T)}set value(T){this.cancelScheduledValues(this.now()),this.setValueAtTime(T,this.now())}get minValue(){return isDefined(this._minValue)?this._minValue:this.units==="time"||this.units==="frequency"||this.units==="normalRange"||this.units==="positive"||this.units==="transportTime"||this.units==="ticks"||this.units==="bpm"||this.units==="hertz"||this.units==="samples"?0:this.units==="audioRange"?-1:this.units==="decibels"?-1/0:this._param.minValue}get maxValue(){return isDefined(this._maxValue)?this._maxValue:this.units==="normalRange"||this.units==="audioRange"?1:this._param.maxValue}_is(T,E){return this.units===E}_assertRange(T){return isDefined(this.maxValue)&&isDefined(this.minValue)&&assertRange(T,this._fromType(this.minValue),this._fromType(this.maxValue)),T}_fromType(T){return this.convert&&!this.overridden?this._is(T,"time")?this.toSeconds(T):this._is(T,"decibels")?dbToGain(T):this._is(T,"frequency")?this.toFrequency(T):T:this.overridden?0:T}_toType(T){return this.convert&&this.units==="decibels"?gainToDb(T):T}setValueAtTime(T,E){const C=this.toSeconds(E),P=this._fromType(T);return assert(isFinite(P)&&isFinite(C),`Invalid argument(s) to setValueAtTime: ${JSON.stringify(T)}, ${JSON.stringify(E)}`),this._assertRange(P),this.log(this.units,"setValueAtTime",T,C),this._events.add({time:C,type:"setValueAtTime",value:P}),this._param.setValueAtTime(P,C),this}getValueAtTime(T){const E=Math.max(this.toSeconds(T),0),C=this._events.getAfter(E),P=this._events.get(E);let I=this._initialValue;if(P===null)I=this._initialValue;else if(P.type==="setTargetAtTime"&&(C===null||C.type==="setValueAtTime")){const R=this._events.getBefore(P.time);let F;R===null?F=this._initialValue:F=R.value,P.type==="setTargetAtTime"&&(I=this._exponentialApproach(P.time,F,P.value,P.constant,E))}else if(C===null)I=P.value;else if(C.type==="linearRampToValueAtTime"||C.type==="exponentialRampToValueAtTime"){let R=P.value;if(P.type==="setTargetAtTime"){const F=this._events.getBefore(P.time);F===null?R=this._initialValue:R=F.value}C.type==="linearRampToValueAtTime"?I=this._linearInterpolate(P.time,R,C.time,C.value,E):I=this._exponentialInterpolate(P.time,R,C.time,C.value,E)}else I=P.value;return this._toType(I)}setRampPoint(T){T=this.toSeconds(T);let E=this.getValueAtTime(T);return this.cancelAndHoldAtTime(T),this._fromType(E)===0&&(E=this._toType(this._minOutput)),this.setValueAtTime(E,T),this}linearRampToValueAtTime(T,E){const C=this._fromType(T),P=this.toSeconds(E);return assert(isFinite(C)&&isFinite(P),`Invalid argument(s) to linearRampToValueAtTime: ${JSON.stringify(T)}, ${JSON.stringify(E)}`),this._assertRange(C),this._events.add({time:P,type:"linearRampToValueAtTime",value:C}),this.log(this.units,"linearRampToValueAtTime",T,P),this._param.linearRampToValueAtTime(C,P),this}exponentialRampToValueAtTime(T,E){let C=this._fromType(T);C=EQ(C,0)?this._minOutput:C,this._assertRange(C);const P=this.toSeconds(E);return assert(isFinite(C)&&isFinite(P),`Invalid argument(s) to exponentialRampToValueAtTime: ${JSON.stringify(T)}, ${JSON.stringify(E)}`),this._events.add({time:P,type:"exponentialRampToValueAtTime",value:C}),this.log(this.units,"exponentialRampToValueAtTime",T,P),this._param.exponentialRampToValueAtTime(C,P),this}exponentialRampTo(T,E,C){return C=this.toSeconds(C),this.setRampPoint(C),this.exponentialRampToValueAtTime(T,C+this.toSeconds(E)),this}linearRampTo(T,E,C){return C=this.toSeconds(C),this.setRampPoint(C),this.linearRampToValueAtTime(T,C+this.toSeconds(E)),this}targetRampTo(T,E,C){return C=this.toSeconds(C),this.setRampPoint(C),this.exponentialApproachValueAtTime(T,C,E),this}exponentialApproachValueAtTime(T,E,C){E=this.toSeconds(E),C=this.toSeconds(C);const P=Math.log(C+1)/Math.log(200);return this.setTargetAtTime(T,E,P),this.cancelAndHoldAtTime(E+C*.9),this.linearRampToValueAtTime(T,E+C),this}setTargetAtTime(T,E,C){const P=this._fromType(T);assert(isFinite(C)&&C>0,"timeConstant must be a number greater than 0");const I=this.toSeconds(E);return this._assertRange(P),assert(isFinite(P)&&isFinite(I),`Invalid argument(s) to setTargetAtTime: ${JSON.stringify(T)}, ${JSON.stringify(E)}`),this._events.add({constant:C,time:I,type:"setTargetAtTime",value:P}),this.log(this.units,"setTargetAtTime",T,I,C),this._param.setTargetAtTime(P,I,C),this}setValueCurveAtTime(T,E,C,P=1){C=this.toSeconds(C),E=this.toSeconds(E);const I=this._fromType(T[0])*P;this.setValueAtTime(this._toType(I),E);const R=C/(T.length-1);for(let F=1;F<T.length;F++){const O=this._fromType(T[F])*P;this.linearRampToValueAtTime(this._toType(O),E+F*R)}return this}cancelScheduledValues(T){const E=this.toSeconds(T);return assert(isFinite(E),`Invalid argument to cancelScheduledValues: ${JSON.stringify(T)}`),this._events.cancel(E),this._param.cancelScheduledValues(E),this.log(this.units,"cancelScheduledValues",E),this}cancelAndHoldAtTime(T){const E=this.toSeconds(T),C=this._fromType(this.getValueAtTime(E));assert(isFinite(E),`Invalid argument to cancelAndHoldAtTime: ${JSON.stringify(T)}`),this.log(this.units,"cancelAndHoldAtTime",E,"value="+C);const P=this._events.get(E),I=this._events.getAfter(E);return P&&EQ(P.time,E)?I?(this._param.cancelScheduledValues(I.time),this._events.cancel(I.time)):(this._param.cancelAndHoldAtTime(E),this._events.cancel(E+this.sampleTime)):I&&(this._param.cancelScheduledValues(I.time),this._events.cancel(I.time),I.type==="linearRampToValueAtTime"?this.linearRampToValueAtTime(this._toType(C),E):I.type==="exponentialRampToValueAtTime"&&this.exponentialRampToValueAtTime(this._toType(C),E)),this._events.add({time:E,type:"setValueAtTime",value:C}),this._param.setValueAtTime(C,E),this}rampTo(T,E=.1,C){return this.units==="frequency"||this.units==="bpm"||this.units==="decibels"?this.exponentialRampTo(T,E,C):this.linearRampTo(T,E,C),this}apply(T){const E=this.context.currentTime;T.setValueAtTime(this.getValueAtTime(E),E);const C=this._events.get(E);if(C&&C.type==="setTargetAtTime"){const P=this._events.getAfter(C.time),I=P?P.time:E+2,R=(I-E)/10;for(let F=E;F<I;F+=R)T.linearRampToValueAtTime(this.getValueAtTime(F),F)}return this._events.forEachAfter(this.context.currentTime,P=>{P.type==="cancelScheduledValues"?T.cancelScheduledValues(P.time):P.type==="setTargetAtTime"?T.setTargetAtTime(P.value,P.time,P.constant):T[P.type](P.value,P.time)}),this}setParam(T){assert(this._swappable,"The Param must be assigned as 'swappable' in the constructor");const E=this.input;return E.disconnect(this._param),this.apply(T),this._param=T,E.connect(this._param),this}dispose(){return super.dispose(),this._events.dispose(),this}get defaultValue(){return this._toType(this._param.defaultValue)}_exponentialApproach(T,E,C,P,I){return C+(E-C)*Math.exp(-(I-T)/P)}_linearInterpolate(T,E,C,P,I){return E+(P-E)*((I-T)/(C-T))}_exponentialInterpolate(T,E,C,P,I){return E*Math.pow(P/E,(I-T)/(C-T))}}class ToneAudioNode extends ToneWithContext{constructor(){super(...arguments),this._internalChannels=[]}get numberOfInputs(){return isDefined(this.input)?isAudioParam(this.input)||this.input instanceof Param?1:this.input.numberOfInputs:0}get numberOfOutputs(){return isDefined(this.output)?this.output.numberOfOutputs:0}_isAudioNode(T){return isDefined(T)&&(T instanceof ToneAudioNode||isAudioNode(T))}_getInternalNodes(){const T=this._internalChannels.slice(0);return this._isAudioNode(this.input)&&T.push(this.input),this._isAudioNode(this.output)&&this.input!==this.output&&T.push(this.output),T}_setChannelProperties(T){this._getInternalNodes().forEach(C=>{C.channelCount=T.channelCount,C.channelCountMode=T.channelCountMode,C.channelInterpretation=T.channelInterpretation})}_getChannelProperties(){const T=this._getInternalNodes();assert(T.length>0,"ToneAudioNode does not have any internal nodes");const E=T[0];return{channelCount:E.channelCount,channelCountMode:E.channelCountMode,channelInterpretation:E.channelInterpretation}}get channelCount(){return this._getChannelProperties().channelCount}set channelCount(T){const E=this._getChannelProperties();this._setChannelProperties(Object.assign(E,{channelCount:T}))}get channelCountMode(){return this._getChannelProperties().channelCountMode}set channelCountMode(T){const E=this._getChannelProperties();this._setChannelProperties(Object.assign(E,{channelCountMode:T}))}get channelInterpretation(){return this._getChannelProperties().channelInterpretation}set channelInterpretation(T){const E=this._getChannelProperties();this._setChannelProperties(Object.assign(E,{channelInterpretation:T}))}connect(T,E=0,C=0){return connect(this,T,E,C),this}toDestination(){return this.connect(this.context.destination),this}toMaster(){return warn("toMaster() has been renamed toDestination()"),this.toDestination()}disconnect(T,E=0,C=0){return disconnect(this,T,E,C),this}chain(...T){return connectSeries(this,...T),this}fan(...T){return T.forEach(E=>this.connect(E)),this}dispose(){return super.dispose(),isDefined(this.input)&&(this.input instanceof ToneAudioNode?this.input.dispose():isAudioNode(this.input)&&this.input.disconnect()),isDefined(this.output)&&(this.output instanceof ToneAudioNode?this.output.dispose():isAudioNode(this.output)&&this.output.disconnect()),this._internalChannels=[],this}}function connectSeries(...A){const T=A.shift();A.reduce((E,C)=>(E instanceof ToneAudioNode?E.connect(C):isAudioNode(E)&&connect(E,C),C),T)}function connect(A,T,E=0,C=0){for(assert(isDefined(A),"Cannot connect from undefined node"),assert(isDefined(T),"Cannot connect to undefined node"),(T instanceof ToneAudioNode||isAudioNode(T))&&assert(T.numberOfInputs>0,"Cannot connect to node with no inputs"),assert(A.numberOfOutputs>0,"Cannot connect from node with no outputs");T instanceof ToneAudioNode||T instanceof Param;)isDefined(T.input)&&(T=T.input);for(;A instanceof ToneAudioNode;)isDefined(A.output)&&(A=A.output);isAudioParam(T)?A.connect(T,E):A.connect(T,E,C)}function disconnect(A,T,E=0,C=0){if(isDefined(T))for(;T instanceof ToneAudioNode;)T=T.input;for(;!isAudioNode(A);)isDefined(A.output)&&(A=A.output);isAudioParam(T)?A.disconnect(T,E):isAudioNode(T)?A.disconnect(T,E,C):A.disconnect()}class Gain extends ToneAudioNode{constructor(){const T=optionsFromArguments(Gain.getDefaults(),arguments,["gain","units"]);super(T),this.name="Gain",this._gainNode=this.context.createGain(),this.input=this._gainNode,this.output=this._gainNode,this.gain=new Param({context:this.context,convert:T.convert,param:this._gainNode.gain,units:T.units,value:T.gain,minValue:T.minValue,maxValue:T.maxValue}),readOnly(this,"gain")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,gain:1,units:"gain"})}dispose(){return super.dispose(),this._gainNode.disconnect(),this.gain.dispose(),this}}class OneShotSource extends ToneAudioNode{constructor(T){super(T),this.onended=noOp,this._startTime=-1,this._stopTime=-1,this._timeout=-1,this.output=new Gain({context:this.context,gain:0}),this._gainNode=this.output,this.getStateAtTime=function(E){const C=this.toSeconds(E);return this._startTime!==-1&&C>=this._startTime&&(this._stopTime===-1||C<=this._stopTime)?"started":"stopped"},this._fadeIn=T.fadeIn,this._fadeOut=T.fadeOut,this._curve=T.curve,this.onended=T.onended}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{curve:"linear",fadeIn:0,fadeOut:0,onended:noOp})}_startGain(T,E=1){assert(this._startTime===-1,"Source cannot be started more than once");const C=this.toSeconds(this._fadeIn);return this._startTime=T+C,this._startTime=Math.max(this._startTime,this.context.currentTime),C>0?(this._gainNode.gain.setValueAtTime(0,T),this._curve==="linear"?this._gainNode.gain.linearRampToValueAtTime(E,T+C):this._gainNode.gain.exponentialApproachValueAtTime(E,T,C)):this._gainNode.gain.setValueAtTime(E,T),this}stop(T){return this.log("stop",T),this._stopGain(this.toSeconds(T)),this}_stopGain(T){assert(this._startTime!==-1,"'start' must be called before 'stop'"),this.cancelStop();const E=this.toSeconds(this._fadeOut);return this._stopTime=this.toSeconds(T)+E,this._stopTime=Math.max(this._stopTime,this.now()),E>0?this._curve==="linear"?this._gainNode.gain.linearRampTo(0,E,T):this._gainNode.gain.targetRampTo(0,E,T):(this._gainNode.gain.cancelAndHoldAtTime(T),this._gainNode.gain.setValueAtTime(0,T)),this.context.clearTimeout(this._timeout),this._timeout=this.context.setTimeout(()=>{const C=this._curve==="exponential"?E*2:0;this._stopSource(this.now()+C),this._onended()},this._stopTime-this.context.currentTime),this}_onended(){if(this.onended!==noOp&&(this.onended(this),this.onended=noOp,!this.context.isOffline)){const T=()=>this.dispose();typeof window.requestIdleCallback<"u"?window.requestIdleCallback(T):setTimeout(T,1e3)}}get state(){return this.getStateAtTime(this.now())}cancelStop(){return this.log("cancelStop"),assert(this._startTime!==-1,"Source is not started"),this._gainNode.gain.cancelScheduledValues(this._startTime+this.sampleTime),this.context.clearTimeout(this._timeout),this._stopTime=-1,this}dispose(){return super.dispose(),this._gainNode.dispose(),this.onended=noOp,this}}class ToneConstantSource extends OneShotSource{constructor(){const T=optionsFromArguments(ToneConstantSource.getDefaults(),arguments,["offset"]);super(T),this.name="ToneConstantSource",this._source=this.context.createConstantSource(),connect(this._source,this._gainNode),this.offset=new Param({context:this.context,convert:T.convert,param:this._source.offset,units:T.units,value:T.offset,minValue:T.minValue,maxValue:T.maxValue})}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{convert:!0,offset:1,units:"number"})}start(T){const E=this.toSeconds(T);return this.log("start",E),this._startGain(E),this._source.start(E),this}_stopSource(T){this._source.stop(T)}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._source.disconnect(),this.offset.dispose(),this}}class Signal extends ToneAudioNode{constructor(){const T=optionsFromArguments(Signal.getDefaults(),arguments,["value","units"]);super(T),this.name="Signal",this.override=!0,this.output=this._constantSource=new ToneConstantSource({context:this.context,convert:T.convert,offset:T.value,units:T.units,minValue:T.minValue,maxValue:T.maxValue}),this._constantSource.start(0),this.input=this._param=this._constantSource.offset}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{convert:!0,units:"number",value:0})}connect(T,E=0,C=0){return connectSignal(this,T,E,C),this}dispose(){return super.dispose(),this._param.dispose(),this._constantSource.dispose(),this}setValueAtTime(T,E){return this._param.setValueAtTime(T,E),this}getValueAtTime(T){return this._param.getValueAtTime(T)}setRampPoint(T){return this._param.setRampPoint(T),this}linearRampToValueAtTime(T,E){return this._param.linearRampToValueAtTime(T,E),this}exponentialRampToValueAtTime(T,E){return this._param.exponentialRampToValueAtTime(T,E),this}exponentialRampTo(T,E,C){return this._param.exponentialRampTo(T,E,C),this}linearRampTo(T,E,C){return this._param.linearRampTo(T,E,C),this}targetRampTo(T,E,C){return this._param.targetRampTo(T,E,C),this}exponentialApproachValueAtTime(T,E,C){return this._param.exponentialApproachValueAtTime(T,E,C),this}setTargetAtTime(T,E,C){return this._param.setTargetAtTime(T,E,C),this}setValueCurveAtTime(T,E,C,P){return this._param.setValueCurveAtTime(T,E,C,P),this}cancelScheduledValues(T){return this._param.cancelScheduledValues(T),this}cancelAndHoldAtTime(T){return this._param.cancelAndHoldAtTime(T),this}rampTo(T,E,C){return this._param.rampTo(T,E,C),this}get value(){return this._param.value}set value(T){this._param.value=T}get convert(){return this._param.convert}set convert(T){this._param.convert=T}get units(){return this._param.units}get overridden(){return this._param.overridden}set overridden(T){this._param.overridden=T}get maxValue(){return this._param.maxValue}get minValue(){return this._param.minValue}apply(T){return this._param.apply(T),this}}function connectSignal(A,T,E,C){(T instanceof Param||isAudioParam(T)||T instanceof Signal&&T.override)&&(T.cancelScheduledValues(0),T.setValueAtTime(0,0),T instanceof Signal&&(T.overridden=!0)),connect(A,T,E,C)}class TickParam extends Param{constructor(){const T=optionsFromArguments(TickParam.getDefaults(),arguments,["value"]);super(T),this.name="TickParam",this._events=new Timeline(1/0),this._multiplier=1,this._multiplier=T.multiplier,this._events.cancel(0),this._events.add({ticks:0,time:0,type:"setValueAtTime",value:this._fromType(T.value)}),this.setValueAtTime(T.value,0)}static getDefaults(){return Object.assign(Param.getDefaults(),{multiplier:1,units:"hertz",value:1})}setTargetAtTime(T,E,C){E=this.toSeconds(E),this.setRampPoint(E);const P=this._fromType(T),I=this._events.get(E),R=Math.round(Math.max(1/C,1));for(let F=0;F<=R;F++){const O=C*F+E,D=this._exponentialApproach(I.time,I.value,P,C,O);this.linearRampToValueAtTime(this._toType(D),O)}return this}setValueAtTime(T,E){const C=this.toSeconds(E);super.setValueAtTime(T,E);const P=this._events.get(C),I=this._events.previousEvent(P),R=this._getTicksUntilEvent(I,C);return P.ticks=Math.max(R,0),this}linearRampToValueAtTime(T,E){const C=this.toSeconds(E);super.linearRampToValueAtTime(T,E);const P=this._events.get(C),I=this._events.previousEvent(P),R=this._getTicksUntilEvent(I,C);return P.ticks=Math.max(R,0),this}exponentialRampToValueAtTime(T,E){E=this.toSeconds(E);const C=this._fromType(T),P=this._events.get(E),I=Math.round(Math.max((E-P.time)*10,1)),R=(E-P.time)/I;for(let F=0;F<=I;F++){const O=R*F+P.time,D=this._exponentialInterpolate(P.time,P.value,E,C,O);this.linearRampToValueAtTime(this._toType(D),O)}return this}_getTicksUntilEvent(T,E){if(T===null)T={ticks:0,time:0,type:"setValueAtTime",value:0};else if(isUndef(T.ticks)){const R=this._events.previousEvent(T);T.ticks=this._getTicksUntilEvent(R,T.time)}const C=this._fromType(this.getValueAtTime(T.time));let P=this._fromType(this.getValueAtTime(E));const I=this._events.get(E);return I&&I.time===E&&I.type==="setValueAtTime"&&(P=this._fromType(this.getValueAtTime(E-this.sampleTime))),.5*(E-T.time)*(C+P)+T.ticks}getTicksAtTime(T){const E=this.toSeconds(T),C=this._events.get(E);return Math.max(this._getTicksUntilEvent(C,E),0)}getDurationOfTicks(T,E){const C=this.toSeconds(E),P=this.getTicksAtTime(E);return this.getTimeOfTick(P+T)-C}getTimeOfTick(T){const E=this._events.get(T,"ticks"),C=this._events.getAfter(T,"ticks");if(E&&E.ticks===T)return E.time;if(E&&C&&C.type==="linearRampToValueAtTime"&&E.value!==C.value){const P=this._fromType(this.getValueAtTime(E.time)),R=(this._fromType(this.getValueAtTime(C.time))-P)/(C.time-E.time),F=Math.sqrt(Math.pow(P,2)-2*R*(E.ticks-T)),O=(-P+F)/R,D=(-P-F)/R;return(O>0?O:D)+E.time}else return E?E.value===0?1/0:E.time+(T-E.ticks)/E.value:T/this._initialValue}ticksToTime(T,E){return this.getDurationOfTicks(T,E)}timeToTicks(T,E){const C=this.toSeconds(E),P=this.toSeconds(T),I=this.getTicksAtTime(C);return this.getTicksAtTime(C+P)-I}_fromType(T){return this.units==="bpm"&&this.multiplier?1/(60/T/this.multiplier):super._fromType(T)}_toType(T){return this.units==="bpm"&&this.multiplier?T/this.multiplier*60:super._toType(T)}get multiplier(){return this._multiplier}set multiplier(T){const E=this.value;this._multiplier=T,this.cancelScheduledValues(0),this.setValueAtTime(E,0)}}class TickSignal extends Signal{constructor(){const T=optionsFromArguments(TickSignal.getDefaults(),arguments,["value"]);super(T),this.name="TickSignal",this.input=this._param=new TickParam({context:this.context,convert:T.convert,multiplier:T.multiplier,param:this._constantSource.offset,units:T.units,value:T.value})}static getDefaults(){return Object.assign(Signal.getDefaults(),{multiplier:1,units:"hertz",value:1})}ticksToTime(T,E){return this._param.ticksToTime(T,E)}timeToTicks(T,E){return this._param.timeToTicks(T,E)}getTimeOfTick(T){return this._param.getTimeOfTick(T)}getDurationOfTicks(T,E){return this._param.getDurationOfTicks(T,E)}getTicksAtTime(T){return this._param.getTicksAtTime(T)}get multiplier(){return this._param.multiplier}set multiplier(T){this._param.multiplier=T}dispose(){return super.dispose(),this._param.dispose(),this}}class TickSource extends ToneWithContext{constructor(){const T=optionsFromArguments(TickSource.getDefaults(),arguments,["frequency"]);super(T),this.name="TickSource",this._state=new StateTimeline,this._tickOffset=new Timeline,this._ticksAtTime=new Timeline,this._secondsAtTime=new Timeline,this.frequency=new TickSignal({context:this.context,units:T.units,value:T.frequency}),readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.setTicksAtTime(0,0)}static getDefaults(){return Object.assign({frequency:1,units:"hertz"},ToneWithContext.getDefaults())}get state(){return this.getStateAtTime(this.now())}start(T,E){const C=this.toSeconds(T);return this._state.getValueAtTime(C)!=="started"&&(this._state.setStateAtTime("started",C),isDefined(E)&&this.setTicksAtTime(E,C),this._ticksAtTime.cancel(C),this._secondsAtTime.cancel(C)),this}stop(T){const E=this.toSeconds(T);if(this._state.getValueAtTime(E)==="stopped"){const C=this._state.get(E);C&&C.time>0&&(this._tickOffset.cancel(C.time),this._state.cancel(C.time))}return this._state.cancel(E),this._state.setStateAtTime("stopped",E),this.setTicksAtTime(0,E),this._ticksAtTime.cancel(E),this._secondsAtTime.cancel(E),this}pause(T){const E=this.toSeconds(T);return this._state.getValueAtTime(E)==="started"&&(this._state.setStateAtTime("paused",E),this._ticksAtTime.cancel(E),this._secondsAtTime.cancel(E)),this}cancel(T){return T=this.toSeconds(T),this._state.cancel(T),this._tickOffset.cancel(T),this._ticksAtTime.cancel(T),this._secondsAtTime.cancel(T),this}getTicksAtTime(T){const E=this.toSeconds(T),C=this._state.getLastState("stopped",E),P=this._ticksAtTime.get(E),I={state:"paused",time:E};this._state.add(I);let R=P||C,F=P?P.ticks:0,O=null;return this._state.forEachBetween(R.time,E+this.sampleTime,D=>{let L=R.time;const B=this._tickOffset.get(D.time);B&&B.time>=R.time&&(F=B.ticks,L=B.time),R.state==="started"&&D.state!=="started"&&(F+=this.frequency.getTicksAtTime(D.time)-this.frequency.getTicksAtTime(L),D.time!==I.time&&(O={state:D.state,time:D.time,ticks:F})),R=D}),this._state.remove(I),O&&this._ticksAtTime.add(O),F}get ticks(){return this.getTicksAtTime(this.now())}set ticks(T){this.setTicksAtTime(T,this.now())}get seconds(){return this.getSecondsAtTime(this.now())}set seconds(T){const E=this.now(),C=this.frequency.timeToTicks(T,E);this.setTicksAtTime(C,E)}getSecondsAtTime(T){T=this.toSeconds(T);const E=this._state.getLastState("stopped",T),C={state:"paused",time:T};this._state.add(C);const P=this._secondsAtTime.get(T);let I=P||E,R=P?P.seconds:0,F=null;return this._state.forEachBetween(I.time,T+this.sampleTime,O=>{let D=I.time;const L=this._tickOffset.get(O.time);L&&L.time>=I.time&&(R=L.seconds,D=L.time),I.state==="started"&&O.state!=="started"&&(R+=O.time-D,O.time!==C.time&&(F={state:O.state,time:O.time,seconds:R})),I=O}),this._state.remove(C),F&&this._secondsAtTime.add(F),R}setTicksAtTime(T,E){return E=this.toSeconds(E),this._tickOffset.cancel(E),this._tickOffset.add({seconds:this.frequency.getDurationOfTicks(T,E),ticks:T,time:E}),this._ticksAtTime.cancel(E),this._secondsAtTime.cancel(E),this}getStateAtTime(T){return T=this.toSeconds(T),this._state.getValueAtTime(T)}getTimeOfTick(T,E=this.now()){const C=this._tickOffset.get(E),P=this._state.get(E),I=Math.max(C.time,P.time),R=this.frequency.getTicksAtTime(I)+T-C.ticks;return this.frequency.getTimeOfTick(R)}forEachTickBetween(T,E,C){let P=this._state.get(T);this._state.forEachBetween(T,E,R=>{P&&P.state==="started"&&R.state!=="started"&&this.forEachTickBetween(Math.max(P.time,T),R.time-this.sampleTime,C),P=R});let I=null;if(P&&P.state==="started"){const R=Math.max(P.time,T),F=this.frequency.getTicksAtTime(R),O=this.frequency.getTicksAtTime(P.time),D=F-O;let L=Math.ceil(D)-D;L=EQ(L,1)?0:L;let B=this.frequency.getTimeOfTick(F+L);for(;B<E;){try{C(B,Math.round(this.getTicksAtTime(B)))}catch(V){I=V;break}B+=this.frequency.getDurationOfTicks(1,B)}}if(I)throw I;return this}dispose(){return super.dispose(),this._state.dispose(),this._tickOffset.dispose(),this._ticksAtTime.dispose(),this._secondsAtTime.dispose(),this.frequency.dispose(),this}}class Clock extends ToneWithContext{constructor(){const T=optionsFromArguments(Clock.getDefaults(),arguments,["callback","frequency"]);super(T),this.name="Clock",this.callback=noOp,this._lastUpdate=0,this._state=new StateTimeline("stopped"),this._boundLoop=this._loop.bind(this),this.callback=T.callback,this._tickSource=new TickSource({context:this.context,frequency:T.frequency,units:T.units}),this._lastUpdate=0,this.frequency=this._tickSource.frequency,readOnly(this,"frequency"),this._state.setStateAtTime("stopped",0),this.context.on("tick",this._boundLoop)}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,frequency:1,units:"hertz"})}get state(){return this._state.getValueAtTime(this.now())}start(T,E){assertContextRunning(this.context);const C=this.toSeconds(T);return this.log("start",C),this._state.getValueAtTime(C)!=="started"&&(this._state.setStateAtTime("started",C),this._tickSource.start(C,E),C<this._lastUpdate&&this.emit("start",C,E)),this}stop(T){const E=this.toSeconds(T);return this.log("stop",E),this._state.cancel(E),this._state.setStateAtTime("stopped",E),this._tickSource.stop(E),E<this._lastUpdate&&this.emit("stop",E),this}pause(T){const E=this.toSeconds(T);return this._state.getValueAtTime(E)==="started"&&(this._state.setStateAtTime("paused",E),this._tickSource.pause(E),E<this._lastUpdate&&this.emit("pause",E)),this}get ticks(){return Math.ceil(this.getTicksAtTime(this.now()))}set ticks(T){this._tickSource.ticks=T}get seconds(){return this._tickSource.seconds}set seconds(T){this._tickSource.seconds=T}getSecondsAtTime(T){return this._tickSource.getSecondsAtTime(T)}setTicksAtTime(T,E){return this._tickSource.setTicksAtTime(T,E),this}getTimeOfTick(T,E=this.now()){return this._tickSource.getTimeOfTick(T,E)}getTicksAtTime(T){return this._tickSource.getTicksAtTime(T)}nextTickTime(T,E){const C=this.toSeconds(E),P=this.getTicksAtTime(C);return this._tickSource.getTimeOfTick(P+T,C)}_loop(){const T=this._lastUpdate,E=this.now();this._lastUpdate=E,this.log("loop",T,E),T!==E&&(this._state.forEachBetween(T,E,C=>{switch(C.state){case"started":const P=this._tickSource.getTicksAtTime(C.time);this.emit("start",C.time,P);break;case"stopped":C.time!==0&&this.emit("stop",C.time);break;case"paused":this.emit("pause",C.time);break}}),this._tickSource.forEachTickBetween(T,E,(C,P)=>{this.callback(C,P)}))}getStateAtTime(T){const E=this.toSeconds(T);return this._state.getValueAtTime(E)}dispose(){return super.dispose(),this.context.off("tick",this._boundLoop),this._tickSource.dispose(),this._state.dispose(),this}}Emitter.mixin(Clock);class Delay extends ToneAudioNode{constructor(){const T=optionsFromArguments(Delay.getDefaults(),arguments,["delayTime","maxDelay"]);super(T),this.name="Delay";const E=this.toSeconds(T.maxDelay);this._maxDelay=Math.max(E,this.toSeconds(T.delayTime)),this._delayNode=this.input=this.output=this.context.createDelay(E),this.delayTime=new Param({context:this.context,param:this._delayNode.delayTime,units:"time",value:T.delayTime,minValue:0,maxValue:this.maxDelay}),readOnly(this,"delayTime")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{delayTime:0,maxDelay:1})}get maxDelay(){return this._maxDelay}dispose(){return super.dispose(),this._delayNode.disconnect(),this.delayTime.dispose(),this}}class Volume extends ToneAudioNode{constructor(){const T=optionsFromArguments(Volume.getDefaults(),arguments,["volume"]);super(T),this.name="Volume",this.input=this.output=new Gain({context:this.context,gain:T.volume,units:"decibels"}),this.volume=this.output.gain,readOnly(this,"volume"),this._unmutedVolume=T.volume,this.mute=T.mute}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.volume.value===-1/0}set mute(T){!this.mute&&T?(this._unmutedVolume=this.volume.value,this.volume.value=-1/0):this.mute&&!T&&(this.volume.value=this._unmutedVolume)}dispose(){return super.dispose(),this.input.dispose(),this.volume.dispose(),this}}class DestinationClass extends ToneAudioNode{constructor(){const T=optionsFromArguments(DestinationClass.getDefaults(),arguments);super(T),this.name="Destination",this.input=new Volume({context:this.context}),this.output=new Gain({context:this.context}),this.volume=this.input.volume,connectSeries(this.input,this.output,this.context.rawContext.destination),this.mute=T.mute,this._internalChannels=[this.input,this.context.rawContext.destination,this.output]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,volume:0})}get mute(){return this.input.mute}set mute(T){this.input.mute=T}chain(...T){return this.input.disconnect(),T.unshift(this.input),T.push(this.output),connectSeries(...T),this}get maxChannelCount(){return this.context.rawContext.destination.maxChannelCount}dispose(){return super.dispose(),this.volume.dispose(),this}}onContextInit(A=>{A.destination=new DestinationClass({context:A})});onContextClose(A=>{A.destination.dispose()});class ListenerClass extends ToneAudioNode{constructor(){super(...arguments),this.name="Listener",this.positionX=new Param({context:this.context,param:this.context.rawContext.listener.positionX}),this.positionY=new Param({context:this.context,param:this.context.rawContext.listener.positionY}),this.positionZ=new Param({context:this.context,param:this.context.rawContext.listener.positionZ}),this.forwardX=new Param({context:this.context,param:this.context.rawContext.listener.forwardX}),this.forwardY=new Param({context:this.context,param:this.context.rawContext.listener.forwardY}),this.forwardZ=new Param({context:this.context,param:this.context.rawContext.listener.forwardZ}),this.upX=new Param({context:this.context,param:this.context.rawContext.listener.upX}),this.upY=new Param({context:this.context,param:this.context.rawContext.listener.upY}),this.upZ=new Param({context:this.context,param:this.context.rawContext.listener.upZ})}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{positionX:0,positionY:0,positionZ:0,forwardX:0,forwardY:0,forwardZ:-1,upX:0,upY:1,upZ:0})}dispose(){return super.dispose(),this.positionX.dispose(),this.positionY.dispose(),this.positionZ.dispose(),this.forwardX.dispose(),this.forwardY.dispose(),this.forwardZ.dispose(),this.upX.dispose(),this.upY.dispose(),this.upZ.dispose(),this}}onContextInit(A=>{A.listener=new ListenerClass({context:A})});onContextClose(A=>{A.listener.dispose()});class ToneAudioBuffers extends Tone{constructor(){super(),this.name="ToneAudioBuffers",this._buffers=new Map,this._loadingCount=0;const T=optionsFromArguments(ToneAudioBuffers.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");this.baseUrl=T.baseUrl,Object.keys(T.urls).forEach(E=>{this._loadingCount++;const C=T.urls[E];this.add(E,C,this._bufferLoaded.bind(this,T.onload),T.onerror)})}static getDefaults(){return{baseUrl:"",onerror:noOp,onload:noOp,urls:{}}}has(T){return this._buffers.has(T.toString())}get(T){return assert(this.has(T),`ToneAudioBuffers has no buffer named: ${T}`),this._buffers.get(T.toString())}_bufferLoaded(T){this._loadingCount--,this._loadingCount===0&&T&&T()}get loaded(){return Array.from(this._buffers).every(([T,E])=>E.loaded)}add(T,E,C=noOp,P=noOp){return isString(E)?(this.baseUrl&&E.trim().substring(0,11).toLowerCase()==="data:audio/"&&(this.baseUrl=""),this._buffers.set(T.toString(),new ToneAudioBuffer(this.baseUrl+E,C,P))):this._buffers.set(T.toString(),new ToneAudioBuffer(E,C,P)),this}dispose(){return super.dispose(),this._buffers.forEach(T=>T.dispose()),this._buffers.clear(),this}}class MidiClass extends FrequencyClass{constructor(){super(...arguments),this.name="MidiClass",this.defaultUnits="midi"}_frequencyToUnits(T){return ftom(super._frequencyToUnits(T))}_ticksToUnits(T){return ftom(super._ticksToUnits(T))}_beatsToUnits(T){return ftom(super._beatsToUnits(T))}_secondsToUnits(T){return ftom(super._secondsToUnits(T))}toMidi(){return this.valueOf()}toFrequency(){return mtof(this.toMidi())}transpose(T){return new MidiClass(this.context,this.toMidi()+T)}}class TicksClass extends TransportTimeClass{constructor(){super(...arguments),this.name="Ticks",this.defaultUnits="i"}_now(){return this.context.transport.ticks}_beatsToUnits(T){return this._getPPQ()*T}_secondsToUnits(T){return Math.floor(T/(60/this._getBpm())*this._getPPQ())}_ticksToUnits(T){return T}toTicks(){return this.valueOf()}toSeconds(){return this.valueOf()/this._getPPQ()*(60/this._getBpm())}}class DrawClass extends ToneWithContext{constructor(){super(...arguments),this.name="Draw",this.expiration=.25,this.anticipation=.008,this._events=new Timeline,this._boundDrawLoop=this._drawLoop.bind(this),this._animationFrame=-1}schedule(T,E){return this._events.add({callback:T,time:this.toSeconds(E)}),this._events.length===1&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop)),this}cancel(T){return this._events.cancel(this.toSeconds(T)),this}_drawLoop(){const T=this.context.currentTime;for(;this._events.length&&this._events.peek().time-this.anticipation<=T;){const E=this._events.shift();E&&T-E.time<=this.expiration&&E.callback()}this._events.length>0&&(this._animationFrame=requestAnimationFrame(this._boundDrawLoop))}dispose(){return super.dispose(),this._events.dispose(),cancelAnimationFrame(this._animationFrame),this}}onContextInit(A=>{A.draw=new DrawClass({context:A})});onContextClose(A=>{A.draw.dispose()});class IntervalTimeline extends Tone{constructor(){super(...arguments),this.name="IntervalTimeline",this._root=null,this._length=0}add(T){assert(isDefined(T.time),"Events must have a time property"),assert(isDefined(T.duration),"Events must have a duration parameter"),T.time=T.time.valueOf();let E=new IntervalNode(T.time,T.time+T.duration,T);for(this._root===null?this._root=E:this._root.insert(E),this._length++;E!==null;)E.updateHeight(),E.updateMax(),this._rebalance(E),E=E.parent;return this}remove(T){if(this._root!==null){const E=[];this._root.search(T.time,E);for(const C of E)if(C.event===T){this._removeNode(C),this._length--;break}}return this}get length(){return this._length}cancel(T){return this.forEachFrom(T,E=>this.remove(E)),this}_setRoot(T){this._root=T,this._root!==null&&(this._root.parent=null)}_replaceNodeInParent(T,E){T.parent!==null?(T.isLeftChild()?T.parent.left=E:T.parent.right=E,this._rebalance(T.parent)):this._setRoot(E)}_removeNode(T){if(T.left===null&&T.right===null)this._replaceNodeInParent(T,null);else if(T.right===null)this._replaceNodeInParent(T,T.left);else if(T.left===null)this._replaceNodeInParent(T,T.right);else{const E=T.getBalance();let C,P=null;if(E>0)if(T.left.right===null)C=T.left,C.right=T.right,P=C;else{for(C=T.left.right;C.right!==null;)C=C.right;C.parent&&(C.parent.right=C.left,P=C.parent,C.left=T.left,C.right=T.right)}else if(T.right.left===null)C=T.right,C.left=T.left,P=C;else{for(C=T.right.left;C.left!==null;)C=C.left;C.parent&&(C.parent.left=C.right,P=C.parent,C.left=T.left,C.right=T.right)}T.parent!==null?T.isLeftChild()?T.parent.left=C:T.parent.right=C:this._setRoot(C),P&&this._rebalance(P)}T.dispose()}_rotateLeft(T){const E=T.parent,C=T.isLeftChild(),P=T.right;P&&(T.right=P.left,P.left=T),E!==null?C?E.left=P:E.right=P:this._setRoot(P)}_rotateRight(T){const E=T.parent,C=T.isLeftChild(),P=T.left;P&&(T.left=P.right,P.right=T),E!==null?C?E.left=P:E.right=P:this._setRoot(P)}_rebalance(T){const E=T.getBalance();E>1&&T.left?T.left.getBalance()<0?this._rotateLeft(T.left):this._rotateRight(T):E<-1&&T.right&&(T.right.getBalance()>0?this._rotateRight(T.right):this._rotateLeft(T))}get(T){if(this._root!==null){const E=[];if(this._root.search(T,E),E.length>0){let C=E[0];for(let P=1;P<E.length;P++)E[P].low>C.low&&(C=E[P]);return C.event}}return null}forEach(T){if(this._root!==null){const E=[];this._root.traverse(C=>E.push(C)),E.forEach(C=>{C.event&&T(C.event)})}return this}forEachAtTime(T,E){if(this._root!==null){const C=[];this._root.search(T,C),C.forEach(P=>{P.event&&E(P.event)})}return this}forEachFrom(T,E){if(this._root!==null){const C=[];this._root.searchAfter(T,C),C.forEach(P=>{P.event&&E(P.event)})}return this}dispose(){return super.dispose(),this._root!==null&&this._root.traverse(T=>T.dispose()),this._root=null,this}}class IntervalNode{constructor(T,E,C){this._left=null,this._right=null,this.parent=null,this.height=0,this.event=C,this.low=T,this.high=E,this.max=this.high}insert(T){T.low<=this.low?this.left===null?this.left=T:this.left.insert(T):this.right===null?this.right=T:this.right.insert(T)}search(T,E){T>this.max||(this.left!==null&&this.left.search(T,E),this.low<=T&&this.high>T&&E.push(this),!(this.low>T)&&this.right!==null&&this.right.search(T,E))}searchAfter(T,E){this.low>=T&&(E.push(this),this.left!==null&&this.left.searchAfter(T,E)),this.right!==null&&this.right.searchAfter(T,E)}traverse(T){T(this),this.left!==null&&this.left.traverse(T),this.right!==null&&this.right.traverse(T)}updateHeight(){this.left!==null&&this.right!==null?this.height=Math.max(this.left.height,this.right.height)+1:this.right!==null?this.height=this.right.height+1:this.left!==null?this.height=this.left.height+1:this.height=0}updateMax(){this.max=this.high,this.left!==null&&(this.max=Math.max(this.max,this.left.max)),this.right!==null&&(this.max=Math.max(this.max,this.right.max))}getBalance(){let T=0;return this.left!==null&&this.right!==null?T=this.left.height-this.right.height:this.left!==null?T=this.left.height+1:this.right!==null&&(T=-(this.right.height+1)),T}isLeftChild(){return this.parent!==null&&this.parent.left===this}get left(){return this._left}set left(T){this._left=T,T!==null&&(T.parent=this),this.updateHeight(),this.updateMax()}get right(){return this._right}set right(T){this._right=T,T!==null&&(T.parent=this),this.updateHeight(),this.updateMax()}dispose(){this.parent=null,this._left=null,this._right=null,this.event=null}}class TimelineValue extends Tone{constructor(T){super(),this.name="TimelineValue",this._timeline=new Timeline({memory:10}),this._initialValue=T}set(T,E){return this._timeline.add({value:T,time:E}),this}get(T){const E=this._timeline.get(T);return E?E.value:this._initialValue}}class SignalOperator extends ToneAudioNode{constructor(){super(optionsFromArguments(SignalOperator.getDefaults(),arguments,["context"]))}connect(T,E=0,C=0){return connectSignal(this,T,E,C),this}}class WaveShaper extends SignalOperator{constructor(){const T=optionsFromArguments(WaveShaper.getDefaults(),arguments,["mapping","length"]);super(T),this.name="WaveShaper",this._shaper=this.context.createWaveShaper(),this.input=this._shaper,this.output=this._shaper,isArray(T.mapping)||T.mapping instanceof Float32Array?this.curve=Float32Array.from(T.mapping):isFunction(T.mapping)&&this.setMap(T.mapping,T.length)}static getDefaults(){return Object.assign(Signal.getDefaults(),{length:1024})}setMap(T,E=1024){const C=new Float32Array(E);for(let P=0,I=E;P<I;P++){const R=P/(I-1)*2-1;C[P]=T(R,P)}return this.curve=C,this}get curve(){return this._shaper.curve}set curve(T){this._shaper.curve=T}get oversample(){return this._shaper.oversample}set oversample(T){const E=["none","2x","4x"].some(C=>C.includes(T));assert(E,"oversampling must be either 'none', '2x', or '4x'"),this._shaper.oversample=T}dispose(){return super.dispose(),this._shaper.disconnect(),this}}class Pow extends SignalOperator{constructor(){const T=optionsFromArguments(Pow.getDefaults(),arguments,["value"]);super(T),this.name="Pow",this._exponentScaler=this.input=this.output=new WaveShaper({context:this.context,mapping:this._expFunc(T.value),length:8192}),this._exponent=T.value}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{value:1})}_expFunc(T){return E=>Math.pow(Math.abs(E),T)}get value(){return this._exponent}set value(T){this._exponent=T,this._exponentScaler.setMap(this._expFunc(this._exponent))}dispose(){return super.dispose(),this._exponentScaler.dispose(),this}}class TransportEvent{constructor(T,E){this.id=TransportEvent._eventId++,this._remainderTime=0;const C=Object.assign(TransportEvent.getDefaults(),E);this.transport=T,this.callback=C.callback,this._once=C.once,this.time=Math.floor(C.time),this._remainderTime=C.time-this.time}static getDefaults(){return{callback:noOp,once:!1,time:0}}get floatTime(){return this.time+this._remainderTime}invoke(T){if(this.callback){const E=this.transport.bpm.getDurationOfTicks(1,T);this.callback(T+this._remainderTime*E),this._once&&this.transport.clear(this.id)}}dispose(){return this.callback=void 0,this}}TransportEvent._eventId=0;class TransportRepeatEvent extends TransportEvent{constructor(T,E){super(T,E),this._currentId=-1,this._nextId=-1,this._nextTick=this.time,this._boundRestart=this._restart.bind(this);const C=Object.assign(TransportRepeatEvent.getDefaults(),E);this.duration=C.duration,this._interval=C.interval,this._nextTick=C.time,this.transport.on("start",this._boundRestart),this.transport.on("loopStart",this._boundRestart),this.transport.on("ticks",this._boundRestart),this.context=this.transport.context,this._restart()}static getDefaults(){return Object.assign({},TransportEvent.getDefaults(),{duration:1/0,interval:1,once:!1})}invoke(T){this._createEvents(T),super.invoke(T)}_createEvent(){return LT(this._nextTick,this.floatTime+this.duration)?this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()):-1}_createEvents(T){LT(this._nextTick+this._interval,this.floatTime+this.duration)&&(this._nextTick+=this._interval,this._currentId=this._nextId,this._nextId=this.transport.scheduleOnce(this.invoke.bind(this),new TicksClass(this.context,this._nextTick).toSeconds()))}_restart(T){this.transport.clear(this._currentId),this.transport.clear(this._nextId),this._nextTick=this.floatTime;const E=this.transport.getTicksAtTime(T);GT(E,this.time)&&(this._nextTick=this.floatTime+Math.ceil((E-this.floatTime)/this._interval)*this._interval),this._currentId=this._createEvent(),this._nextTick+=this._interval,this._nextId=this._createEvent()}dispose(){return super.dispose(),this.transport.clear(this._currentId),this.transport.clear(this._nextId),this.transport.off("start",this._boundRestart),this.transport.off("loopStart",this._boundRestart),this.transport.off("ticks",this._boundRestart),this}}class TransportClass extends ToneWithContext{constructor(){const T=optionsFromArguments(TransportClass.getDefaults(),arguments);super(T),this.name="Transport",this._loop=new TimelineValue(!1),this._loopStart=0,this._loopEnd=0,this._scheduledEvents={},this._timeline=new Timeline,this._repeatedEvents=new IntervalTimeline,this._syncedSignals=[],this._swingAmount=0,this._ppq=T.ppq,this._clock=new Clock({callback:this._processTick.bind(this),context:this.context,frequency:0,units:"bpm"}),this._bindClockEvents(),this.bpm=this._clock.frequency,this._clock.frequency.multiplier=T.ppq,this.bpm.setValueAtTime(T.bpm,0),readOnly(this,"bpm"),this._timeSignature=T.timeSignature,this._swingTicks=T.ppq/2}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{bpm:120,loopEnd:"4m",loopStart:0,ppq:192,swing:0,swingSubdivision:"8n",timeSignature:4})}_processTick(T,E){if(this._loop.get(T)&&E>=this._loopEnd&&(this.emit("loopEnd",T),this._clock.setTicksAtTime(this._loopStart,T),E=this._loopStart,this.emit("loopStart",T,this._clock.getSecondsAtTime(T)),this.emit("loop",T)),this._swingAmount>0&&E%this._ppq!==0&&E%(this._swingTicks*2)!==0){const C=E%(this._swingTicks*2)/(this._swingTicks*2),P=Math.sin(C*Math.PI)*this._swingAmount;T+=new TicksClass(this.context,this._swingTicks*2/3).toSeconds()*P}enterScheduledCallback(!0),this._timeline.forEachAtTime(E,C=>C.invoke(T)),enterScheduledCallback(!1)}schedule(T,E){const C=new TransportEvent(this,{callback:T,time:new TransportTimeClass(this.context,E).toTicks()});return this._addEvent(C,this._timeline)}scheduleRepeat(T,E,C,P=1/0){const I=new TransportRepeatEvent(this,{callback:T,duration:new TimeClass(this.context,P).toTicks(),interval:new TimeClass(this.context,E).toTicks(),time:new TransportTimeClass(this.context,C).toTicks()});return this._addEvent(I,this._repeatedEvents)}scheduleOnce(T,E){const C=new TransportEvent(this,{callback:T,once:!0,time:new TransportTimeClass(this.context,E).toTicks()});return this._addEvent(C,this._timeline)}clear(T){if(this._scheduledEvents.hasOwnProperty(T)){const E=this._scheduledEvents[T.toString()];E.timeline.remove(E.event),E.event.dispose(),delete this._scheduledEvents[T.toString()]}return this}_addEvent(T,E){return this._scheduledEvents[T.id.toString()]={event:T,timeline:E},E.add(T),T.id}cancel(T=0){const E=this.toTicks(T);return this._timeline.forEachFrom(E,C=>this.clear(C.id)),this._repeatedEvents.forEachFrom(E,C=>this.clear(C.id)),this}_bindClockEvents(){this._clock.on("start",(T,E)=>{E=new TicksClass(this.context,E).toSeconds(),this.emit("start",T,E)}),this._clock.on("stop",T=>{this.emit("stop",T)}),this._clock.on("pause",T=>{this.emit("pause",T)})}get state(){return this._clock.getStateAtTime(this.now())}start(T,E){this.context.resume();let C;return isDefined(E)&&(C=this.toTicks(E)),this._clock.start(T,C),this}stop(T){return this._clock.stop(T),this}pause(T){return this._clock.pause(T),this}toggle(T){return T=this.toSeconds(T),this._clock.getStateAtTime(T)!=="started"?this.start(T):this.stop(T),this}get timeSignature(){return this._timeSignature}set timeSignature(T){isArray(T)&&(T=T[0]/T[1]*4),this._timeSignature=T}get loopStart(){return new TimeClass(this.context,this._loopStart,"i").toSeconds()}set loopStart(T){this._loopStart=this.toTicks(T)}get loopEnd(){return new TimeClass(this.context,this._loopEnd,"i").toSeconds()}set loopEnd(T){this._loopEnd=this.toTicks(T)}get loop(){return this._loop.get(this.now())}set loop(T){this._loop.set(T,this.now())}setLoopPoints(T,E){return this.loopStart=T,this.loopEnd=E,this}get swing(){return this._swingAmount}set swing(T){this._swingAmount=T}get swingSubdivision(){return new TicksClass(this.context,this._swingTicks).toNotation()}set swingSubdivision(T){this._swingTicks=this.toTicks(T)}get position(){const T=this.now(),E=this._clock.getTicksAtTime(T);return new TicksClass(this.context,E).toBarsBeatsSixteenths()}set position(T){const E=this.toTicks(T);this.ticks=E}get seconds(){return this._clock.seconds}set seconds(T){const E=this.now(),C=this._clock.frequency.timeToTicks(T,E);this.ticks=C}get progress(){if(this.loop){const T=this.now();return(this._clock.getTicksAtTime(T)-this._loopStart)/(this._loopEnd-this._loopStart)}else return 0}get ticks(){return this._clock.ticks}set ticks(T){if(this._clock.ticks!==T){const E=this.now();if(this.state==="started"){const C=this._clock.getTicksAtTime(E),P=this._clock.frequency.getDurationOfTicks(Math.ceil(C)-C,E),I=E+P;this.emit("stop",I),this._clock.setTicksAtTime(T,I),this.emit("start",I,this._clock.getSecondsAtTime(I))}else this.emit("ticks",E),this._clock.setTicksAtTime(T,E)}}getTicksAtTime(T){return this._clock.getTicksAtTime(T)}getSecondsAtTime(T){return this._clock.getSecondsAtTime(T)}get PPQ(){return this._clock.frequency.multiplier}set PPQ(T){this._clock.frequency.multiplier=T}nextSubdivision(T){if(T=this.toTicks(T),this.state!=="started")return 0;{const E=this.now(),C=this.getTicksAtTime(E),P=T-C%T;return this._clock.nextTickTime(P,E)}}syncSignal(T,E){const C=this.now();let P=this.bpm,I=1/(60/P.getValueAtTime(C)/this.PPQ),R=[];if(T.units==="time"){const O=.015625/I,D=new Gain(O),L=new Pow(-1),B=new Gain(O);P.chain(D,L,B),P=B,I=1/I,R=[D,L,B]}E||(T.getValueAtTime(C)!==0?E=T.getValueAtTime(C)/I:E=0);const F=new Gain(E);return P.connect(F),F.connect(T._param),R.push(F),this._syncedSignals.push({initial:T.value,nodes:R,signal:T}),T.value=0,this}unsyncSignal(T){for(let E=this._syncedSignals.length-1;E>=0;E--){const C=this._syncedSignals[E];C.signal===T&&(C.nodes.forEach(P=>P.dispose()),C.signal.value=C.initial,this._syncedSignals.splice(E,1))}return this}dispose(){return super.dispose(),this._clock.dispose(),writable(this,"bpm"),this._timeline.dispose(),this._repeatedEvents.dispose(),this}}Emitter.mixin(TransportClass);onContextInit(A=>{A.transport=new TransportClass({context:A})});onContextClose(A=>{A.transport.dispose()});class Source extends ToneAudioNode{constructor(T){super(T),this.input=void 0,this._state=new StateTimeline("stopped"),this._synced=!1,this._scheduled=[],this._syncedStart=noOp,this._syncedStop=noOp,this._state.memory=100,this._state.increasing=!0,this._volume=this.output=new Volume({context:this.context,mute:T.mute,volume:T.volume}),this.volume=this._volume.volume,readOnly(this,"volume"),this.onstop=T.onstop}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,onstop:noOp,volume:0})}get state(){return this._synced?this.context.transport.state==="started"?this._state.getValueAtTime(this.context.transport.seconds):"stopped":this._state.getValueAtTime(this.now())}get mute(){return this._volume.mute}set mute(T){this._volume.mute=T}_clampToCurrentTime(T){return this._synced?T:Math.max(T,this.context.currentTime)}start(T,E,C){let P=isUndef(T)&&this._synced?this.context.transport.seconds:this.toSeconds(T);if(P=this._clampToCurrentTime(P),!this._synced&&this._state.getValueAtTime(P)==="started")assert(GT(P,this._state.get(P).time),"Start time must be strictly greater than previous start time"),this._state.cancel(P),this._state.setStateAtTime("started",P),this.log("restart",P),this.restart(P,E,C);else if(this.log("start",P),this._state.setStateAtTime("started",P),this._synced){const I=this._state.get(P);I&&(I.offset=this.toSeconds(defaultArg(E,0)),I.duration=C?this.toSeconds(C):void 0);const R=this.context.transport.schedule(F=>{this._start(F,E,C)},P);this._scheduled.push(R),this.context.transport.state==="started"&&this.context.transport.getSecondsAtTime(this.immediate())>P&&this._syncedStart(this.now(),this.context.transport.seconds)}else assertContextRunning(this.context),this._start(P,E,C);return this}stop(T){let E=isUndef(T)&&this._synced?this.context.transport.seconds:this.toSeconds(T);if(E=this._clampToCurrentTime(E),this._state.getValueAtTime(E)==="started"||isDefined(this._state.getNextState("started",E))){if(this.log("stop",E),!this._synced)this._stop(E);else{const C=this.context.transport.schedule(this._stop.bind(this),E);this._scheduled.push(C)}this._state.cancel(E),this._state.setStateAtTime("stopped",E)}return this}restart(T,E,C){return T=this.toSeconds(T),this._state.getValueAtTime(T)==="started"&&(this._state.cancel(T),this._restart(T,E,C)),this}sync(){return this._synced||(this._synced=!0,this._syncedStart=(T,E)=>{if(GT(E,0)){const C=this._state.get(E);if(C&&C.state==="started"&&C.time!==E){const P=E-this.toSeconds(C.time);let I;C.duration&&(I=this.toSeconds(C.duration)-P),this._start(T,this.toSeconds(C.offset)+P,I)}}},this._syncedStop=T=>{const E=this.context.transport.getSecondsAtTime(Math.max(T-this.sampleTime,0));this._state.getValueAtTime(E)==="started"&&this._stop(T)},this.context.transport.on("start",this._syncedStart),this.context.transport.on("loopStart",this._syncedStart),this.context.transport.on("stop",this._syncedStop),this.context.transport.on("pause",this._syncedStop),this.context.transport.on("loopEnd",this._syncedStop)),this}unsync(){return this._synced&&(this.context.transport.off("stop",this._syncedStop),this.context.transport.off("pause",this._syncedStop),this.context.transport.off("loopEnd",this._syncedStop),this.context.transport.off("start",this._syncedStart),this.context.transport.off("loopStart",this._syncedStart)),this._synced=!1,this._scheduled.forEach(T=>this.context.transport.clear(T)),this._scheduled=[],this._state.cancel(0),this._stop(0),this}dispose(){return super.dispose(),this.onstop=noOp,this.unsync(),this._volume.dispose(),this._state.dispose(),this}}class ToneBufferSource extends OneShotSource{constructor(){const T=optionsFromArguments(ToneBufferSource.getDefaults(),arguments,["url","onload"]);super(T),this.name="ToneBufferSource",this._source=this.context.createBufferSource(),this._internalChannels=[this._source],this._sourceStarted=!1,this._sourceStopped=!1,connect(this._source,this._gainNode),this._source.onended=()=>this._stopSource(),this.playbackRate=new Param({context:this.context,param:this._source.playbackRate,units:"positive",value:T.playbackRate}),this.loop=T.loop,this.loopStart=T.loopStart,this.loopEnd=T.loopEnd,this._buffer=new ToneAudioBuffer(T.url,T.onload,T.onerror),this._internalChannels.push(this._source)}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{url:new ToneAudioBuffer,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1})}get fadeIn(){return this._fadeIn}set fadeIn(T){this._fadeIn=T}get fadeOut(){return this._fadeOut}set fadeOut(T){this._fadeOut=T}get curve(){return this._curve}set curve(T){this._curve=T}start(T,E,C,P=1){assert(this.buffer.loaded,"buffer is either not set or not loaded");const I=this.toSeconds(T);this._startGain(I,P),this.loop?E=defaultArg(E,this.loopStart):E=defaultArg(E,0);let R=Math.max(this.toSeconds(E),0);if(this.loop){const F=this.toSeconds(this.loopEnd)||this.buffer.duration,O=this.toSeconds(this.loopStart),D=F-O;GTE(R,F)&&(R=(R-O)%D+O),EQ(R,this.buffer.duration)&&(R=0)}if(this._source.buffer=this.buffer.get(),this._source.loopEnd=this.toSeconds(this.loopEnd)||this.buffer.duration,LT(R,this.buffer.duration)&&(this._sourceStarted=!0,this._source.start(I,R)),isDefined(C)){let F=this.toSeconds(C);F=Math.max(F,0),this.stop(I+F)}return this}_stopSource(T){!this._sourceStopped&&this._sourceStarted&&(this._sourceStopped=!0,this._source.stop(this.toSeconds(T)),this._onended())}get loopStart(){return this._source.loopStart}set loopStart(T){this._source.loopStart=this.toSeconds(T)}get loopEnd(){return this._source.loopEnd}set loopEnd(T){this._source.loopEnd=this.toSeconds(T)}get buffer(){return this._buffer}set buffer(T){this._buffer.set(T)}get loop(){return this._source.loop}set loop(T){this._source.loop=T,this._sourceStarted&&this.cancelStop()}dispose(){return super.dispose(),this._source.onended=null,this._source.disconnect(),this._buffer.dispose(),this.playbackRate.dispose(),this}}class Noise extends Source{constructor(){const T=optionsFromArguments(Noise.getDefaults(),arguments,["type"]);super(T),this.name="Noise",this._source=null,this._playbackRate=T.playbackRate,this.type=T.type,this._fadeIn=T.fadeIn,this._fadeOut=T.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{fadeIn:0,fadeOut:0,playbackRate:1,type:"white"})}get type(){return this._type}set type(T){if(assert(T in _noiseBuffers,"Noise: invalid type: "+T),this._type!==T&&(this._type=T,this.state==="started")){const E=this.now();this._stop(E),this._start(E)}}get playbackRate(){return this._playbackRate}set playbackRate(T){this._playbackRate=T,this._source&&(this._source.playbackRate.value=T)}_start(T){const E=_noiseBuffers[this._type];this._source=new ToneBufferSource({url:E,context:this.context,fadeIn:this._fadeIn,fadeOut:this._fadeOut,loop:!0,onended:()=>this.onstop(this),playbackRate:this._playbackRate}).connect(this.output),this._source.start(this.toSeconds(T),Math.random()*(E.duration-.001))}_stop(T){this._source&&(this._source.stop(this.toSeconds(T)),this._source=null)}get fadeIn(){return this._fadeIn}set fadeIn(T){this._fadeIn=T,this._source&&(this._source.fadeIn=this._fadeIn)}get fadeOut(){return this._fadeOut}set fadeOut(T){this._fadeOut=T,this._source&&(this._source.fadeOut=this._fadeOut)}_restart(T){this._stop(T),this._start(T)}dispose(){return super.dispose(),this._source&&this._source.disconnect(),this}}const BUFFER_LENGTH=44100*5,NUM_CHANNELS=2,_noiseCache={brown:null,pink:null,white:null},_noiseBuffers={get brown(){if(!_noiseCache.brown){const A=[];for(let T=0;T<NUM_CHANNELS;T++){const E=new Float32Array(BUFFER_LENGTH);A[T]=E;let C=0;for(let P=0;P<BUFFER_LENGTH;P++){const I=Math.random()*2-1;E[P]=(C+.02*I)/1.02,C=E[P],E[P]*=3.5}}_noiseCache.brown=new ToneAudioBuffer().fromArray(A)}return _noiseCache.brown},get pink(){if(!_noiseCache.pink){const A=[];for(let T=0;T<NUM_CHANNELS;T++){const E=new Float32Array(BUFFER_LENGTH);A[T]=E;let C,P,I,R,F,O,D;C=P=I=R=F=O=D=0;for(let L=0;L<BUFFER_LENGTH;L++){const B=Math.random()*2-1;C=.99886*C+B*.0555179,P=.99332*P+B*.0750759,I=.969*I+B*.153852,R=.8665*R+B*.3104856,F=.55*F+B*.5329522,O=-.7616*O-B*.016898,E[L]=C+P+I+R+F+O+D+B*.5362,E[L]*=.11,D=B*.115926}}_noiseCache.pink=new ToneAudioBuffer().fromArray(A)}return _noiseCache.pink},get white(){if(!_noiseCache.white){const A=[];for(let T=0;T<NUM_CHANNELS;T++){const E=new Float32Array(BUFFER_LENGTH);A[T]=E;for(let C=0;C<BUFFER_LENGTH;C++)E[C]=Math.random()*2-1}_noiseCache.white=new ToneAudioBuffer().fromArray(A)}return _noiseCache.white}};function generateWaveform(A,T){return __awaiter(this,void 0,void 0,function*(){const E=T/A.context.sampleRate,C=new OfflineContext(1,E,A.context.sampleRate);return new A.constructor(Object.assign(A.get(),{frequency:2/E,detune:0,context:C})).toDestination().start(0),(yield C.render()).getChannelData(0)})}class ToneOscillatorNode extends OneShotSource{constructor(){const T=optionsFromArguments(ToneOscillatorNode.getDefaults(),arguments,["frequency","type"]);super(T),this.name="ToneOscillatorNode",this._oscillator=this.context.createOscillator(),this._internalChannels=[this._oscillator],connect(this._oscillator,this._gainNode),this.type=T.type,this.frequency=new Param({context:this.context,param:this._oscillator.frequency,units:"frequency",value:T.frequency}),this.detune=new Param({context:this.context,param:this._oscillator.detune,units:"cents",value:T.detune}),readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(OneShotSource.getDefaults(),{detune:0,frequency:440,type:"sine"})}start(T){const E=this.toSeconds(T);return this.log("start",E),this._startGain(E),this._oscillator.start(E),this}_stopSource(T){this._oscillator.stop(T)}setPeriodicWave(T){return this._oscillator.setPeriodicWave(T),this}get type(){return this._oscillator.type}set type(T){this._oscillator.type=T}dispose(){return super.dispose(),this.state==="started"&&this.stop(),this._oscillator.disconnect(),this.frequency.dispose(),this.detune.dispose(),this}}class Oscillator extends Source{constructor(){const T=optionsFromArguments(Oscillator.getDefaults(),arguments,["frequency","type"]);super(T),this.name="Oscillator",this._oscillator=null,this.frequency=new Signal({context:this.context,units:"frequency",value:T.frequency}),readOnly(this,"frequency"),this.detune=new Signal({context:this.context,units:"cents",value:T.detune}),readOnly(this,"detune"),this._partials=T.partials,this._partialCount=T.partialCount,this._type=T.type,T.partialCount&&T.type!=="custom"&&(this._type=this.baseType+T.partialCount.toString()),this.phase=T.phase}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,partialCount:0,partials:[],phase:0,type:"sine"})}_start(T){const E=this.toSeconds(T),C=new ToneOscillatorNode({context:this.context,onended:()=>this.onstop(this)});this._oscillator=C,this._wave?this._oscillator.setPeriodicWave(this._wave):this._oscillator.type=this._type,this._oscillator.connect(this.output),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.start(E)}_stop(T){const E=this.toSeconds(T);this._oscillator&&this._oscillator.stop(E)}_restart(T){const E=this.toSeconds(T);return this.log("restart",E),this._oscillator&&this._oscillator.cancelStop(),this._state.cancel(E),this}syncFrequency(){return this.context.transport.syncSignal(this.frequency),this}unsyncFrequency(){return this.context.transport.unsyncSignal(this.frequency),this}_getCachedPeriodicWave(){if(this._type==="custom")return Oscillator._periodicWaveCache.find(E=>E.phase===this._phase&&deepEquals(E.partials,this._partials));{const T=Oscillator._periodicWaveCache.find(E=>E.type===this._type&&E.phase===this._phase);return this._partialCount=T?T.partialCount:this._partialCount,T}}get type(){return this._type}set type(T){this._type=T;const E=["sine","square","sawtooth","triangle"].indexOf(T)!==-1;if(this._phase===0&&E)this._wave=void 0,this._partialCount=0,this._oscillator!==null&&(this._oscillator.type=T);else{const C=this._getCachedPeriodicWave();if(isDefined(C)){const{partials:P,wave:I}=C;this._wave=I,this._partials=P,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave)}else{const[P,I]=this._getRealImaginary(T,this._phase),R=this.context.createPeriodicWave(P,I);this._wave=R,this._oscillator!==null&&this._oscillator.setPeriodicWave(this._wave),Oscillator._periodicWaveCache.push({imag:I,partialCount:this._partialCount,partials:this._partials,phase:this._phase,real:P,type:this._type,wave:this._wave}),Oscillator._periodicWaveCache.length>100&&Oscillator._periodicWaveCache.shift()}}}get baseType(){return this._type.replace(this.partialCount.toString(),"")}set baseType(T){this.partialCount&&this._type!=="custom"&&T!=="custom"?this.type=T+this.partialCount:this.type=T}get partialCount(){return this._partialCount}set partialCount(T){assertRange(T,0);let E=this._type;const C=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(this._type);if(C&&(E=C[1]),this._type!=="custom")T===0?this.type=E:this.type=E+T.toString();else{const P=new Float32Array(T);this._partials.forEach((I,R)=>P[R]=I),this._partials=Array.from(P),this.type=this._type}}_getRealImaginary(T,E){let P=2048;const I=new Float32Array(P),R=new Float32Array(P);let F=1;if(T==="custom"){if(F=this._partials.length+1,this._partialCount=this._partials.length,P=F,this._partials.length===0)return[I,R]}else{const O=/^(sine|triangle|square|sawtooth)(\d+)$/.exec(T);O?(F=parseInt(O[2],10)+1,this._partialCount=parseInt(O[2],10),T=O[1],F=Math.max(F,2),P=F):this._partialCount=0,this._partials=[]}for(let O=1;O<P;++O){const D=2/(O*Math.PI);let L;switch(T){case"sine":L=O<=F?1:0,this._partials[O-1]=L;break;case"square":L=O&1?2*D:0,this._partials[O-1]=L;break;case"sawtooth":L=D*(O&1?1:-1),this._partials[O-1]=L;break;case"triangle":O&1?L=2*(D*D)*(O-1>>1&1?-1:1):L=0,this._partials[O-1]=L;break;case"custom":L=this._partials[O-1];break;default:throw new TypeError("Oscillator: invalid type: "+T)}L!==0?(I[O]=-L*Math.sin(E*O),R[O]=L*Math.cos(E*O)):(I[O]=0,R[O]=0)}return[I,R]}_inverseFFT(T,E,C){let P=0;const I=T.length;for(let R=0;R<I;R++)P+=T[R]*Math.cos(R*C)+E[R]*Math.sin(R*C);return P}getInitialValue(){const[T,E]=this._getRealImaginary(this._type,0);let C=0;const P=Math.PI*2,I=32;for(let R=0;R<I;R++)C=Math.max(this._inverseFFT(T,E,R/I*P),C);return clamp(-this._inverseFFT(T,E,this._phase)/C,-1,1)}get partials(){return this._partials.slice(0,this.partialCount)}set partials(T){this._partials=T,this._partialCount=this._partials.length,T.length&&(this.type="custom")}get phase(){return this._phase*(180/Math.PI)}set phase(T){this._phase=T*Math.PI/180,this.type=this._type}asArray(){return __awaiter(this,arguments,void 0,function*(T=1024){return generateWaveform(this,T)})}dispose(){return super.dispose(),this._oscillator!==null&&this._oscillator.dispose(),this._wave=void 0,this.frequency.dispose(),this.detune.dispose(),this}}Oscillator._periodicWaveCache=[];class AudioToGain extends SignalOperator{constructor(){super(...arguments),this.name="AudioToGain",this._norm=new WaveShaper({context:this.context,mapping:T=>(T+1)/2}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Multiply extends Signal{constructor(){const T=optionsFromArguments(Multiply.getDefaults(),arguments,["value"]);super(T),this.name="Multiply",this.override=!1,this._mult=this.input=this.output=new Gain({context:this.context,minValue:T.minValue,maxValue:T.maxValue}),this.factor=this._param=this._mult.gain,this.factor.setValueAtTime(T.value,0)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._mult.dispose(),this}}class AMOscillator extends Source{constructor(){const T=optionsFromArguments(AMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);super(T),this.name="AMOscillator",this._modulationScale=new AudioToGain({context:this.context}),this._modulationNode=new Gain({context:this.context}),this._carrier=new Oscillator({context:this.context,detune:T.detune,frequency:T.frequency,onstop:()=>this.onstop(this),phase:T.phase,type:T.type}),this.frequency=this._carrier.frequency,this.detune=this._carrier.detune,this._modulator=new Oscillator({context:this.context,phase:T.phase,type:T.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:T.harmonicity}),this.frequency.chain(this.harmonicity,this._modulator.frequency),this._modulator.chain(this._modulationScale,this._modulationNode.gain),this._carrier.chain(this._modulationNode,this.output),readOnly(this,["frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationType:"square"})}_start(T){this._modulator.start(T),this._carrier.start(T)}_stop(T){this._modulator.stop(T),this._carrier.stop(T)}_restart(T){this._modulator.restart(T),this._carrier.restart(T)}get type(){return this._carrier.type}set type(T){this._carrier.type=T}get baseType(){return this._carrier.baseType}set baseType(T){this._carrier.baseType=T}get partialCount(){return this._carrier.partialCount}set partialCount(T){this._carrier.partialCount=T}get modulationType(){return this._modulator.type}set modulationType(T){this._modulator.type=T}get phase(){return this._carrier.phase}set phase(T){this._carrier.phase=T,this._modulator.phase=T}get partials(){return this._carrier.partials}set partials(T){this._carrier.partials=T}asArray(){return __awaiter(this,arguments,void 0,function*(T=1024){return generateWaveform(this,T)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this._modulationScale.dispose(),this}}class FMOscillator extends Source{constructor(){const T=optionsFromArguments(FMOscillator.getDefaults(),arguments,["frequency","type","modulationType"]);super(T),this.name="FMOscillator",this._modulationNode=new Gain({context:this.context,gain:0}),this._carrier=new Oscillator({context:this.context,detune:T.detune,frequency:0,onstop:()=>this.onstop(this),phase:T.phase,type:T.type}),this.detune=this._carrier.detune,this.frequency=new Signal({context:this.context,units:"frequency",value:T.frequency}),this._modulator=new Oscillator({context:this.context,phase:T.phase,type:T.modulationType}),this.harmonicity=new Multiply({context:this.context,units:"positive",value:T.harmonicity}),this.modulationIndex=new Multiply({context:this.context,units:"positive",value:T.modulationIndex}),this.frequency.connect(this._carrier.frequency),this.frequency.chain(this.harmonicity,this._modulator.frequency),this.frequency.chain(this.modulationIndex,this._modulationNode),this._modulator.connect(this._modulationNode.gain),this._modulationNode.connect(this._carrier.frequency),this._carrier.connect(this.output),this.detune.connect(this._modulator.detune),readOnly(this,["modulationIndex","frequency","detune","harmonicity"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{harmonicity:1,modulationIndex:2,modulationType:"square"})}_start(T){this._modulator.start(T),this._carrier.start(T)}_stop(T){this._modulator.stop(T),this._carrier.stop(T)}_restart(T){return this._modulator.restart(T),this._carrier.restart(T),this}get type(){return this._carrier.type}set type(T){this._carrier.type=T}get baseType(){return this._carrier.baseType}set baseType(T){this._carrier.baseType=T}get partialCount(){return this._carrier.partialCount}set partialCount(T){this._carrier.partialCount=T}get modulationType(){return this._modulator.type}set modulationType(T){this._modulator.type=T}get phase(){return this._carrier.phase}set phase(T){this._carrier.phase=T,this._modulator.phase=T}get partials(){return this._carrier.partials}set partials(T){this._carrier.partials=T}asArray(){return __awaiter(this,arguments,void 0,function*(T=1024){return generateWaveform(this,T)})}dispose(){return super.dispose(),this.frequency.dispose(),this.harmonicity.dispose(),this._carrier.dispose(),this._modulator.dispose(),this._modulationNode.dispose(),this.modulationIndex.dispose(),this}}class PulseOscillator extends Source{constructor(){const T=optionsFromArguments(PulseOscillator.getDefaults(),arguments,["frequency","width"]);super(T),this.name="PulseOscillator",this._widthGate=new Gain({context:this.context,gain:0}),this._thresh=new WaveShaper({context:this.context,mapping:E=>E<=0?-1:1}),this.width=new Signal({context:this.context,units:"audioRange",value:T.width}),this._triangle=new Oscillator({context:this.context,detune:T.detune,frequency:T.frequency,onstop:()=>this.onstop(this),phase:T.phase,type:"triangle"}),this.frequency=this._triangle.frequency,this.detune=this._triangle.detune,this._triangle.chain(this._thresh,this.output),this.width.chain(this._widthGate,this._thresh),readOnly(this,["width","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,phase:0,type:"pulse",width:.2})}_start(T){T=this.toSeconds(T),this._triangle.start(T),this._widthGate.gain.setValueAtTime(1,T)}_stop(T){T=this.toSeconds(T),this._triangle.stop(T),this._widthGate.gain.cancelScheduledValues(T),this._widthGate.gain.setValueAtTime(0,T)}_restart(T){this._triangle.restart(T),this._widthGate.gain.cancelScheduledValues(T),this._widthGate.gain.setValueAtTime(1,T)}get phase(){return this._triangle.phase}set phase(T){this._triangle.phase=T}get type(){return"pulse"}get baseType(){return"pulse"}get partials(){return[]}get partialCount(){return 0}set carrierType(T){this._triangle.type=T}asArray(){return __awaiter(this,arguments,void 0,function*(T=1024){return generateWaveform(this,T)})}dispose(){return super.dispose(),this._triangle.dispose(),this.width.dispose(),this._widthGate.dispose(),this._thresh.dispose(),this}}class FatOscillator extends Source{constructor(){const T=optionsFromArguments(FatOscillator.getDefaults(),arguments,["frequency","type","spread"]);super(T),this.name="FatOscillator",this._oscillators=[],this.frequency=new Signal({context:this.context,units:"frequency",value:T.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:T.detune}),this._spread=T.spread,this._type=T.type,this._phase=T.phase,this._partials=T.partials,this._partialCount=T.partialCount,this.count=T.count,readOnly(this,["frequency","detune"])}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{count:3,spread:20,type:"sawtooth"})}_start(T){T=this.toSeconds(T),this._forEach(E=>E.start(T))}_stop(T){T=this.toSeconds(T),this._forEach(E=>E.stop(T))}_restart(T){this._forEach(E=>E.restart(T))}_forEach(T){for(let E=0;E<this._oscillators.length;E++)T(this._oscillators[E],E)}get type(){return this._type}set type(T){this._type=T,this._forEach(E=>E.type=T)}get spread(){return this._spread}set spread(T){if(this._spread=T,this._oscillators.length>1){const E=-T/2,C=T/(this._oscillators.length-1);this._forEach((P,I)=>P.detune.value=E+C*I)}}get count(){return this._oscillators.length}set count(T){if(assertRange(T,1),this._oscillators.length!==T){this._forEach(E=>E.dispose()),this._oscillators=[];for(let E=0;E<T;E++){const C=new Oscillator({context:this.context,volume:-6-T*1.1,type:this._type,phase:this._phase+E/T*360,partialCount:this._partialCount,onstop:E===0?()=>this.onstop(this):noOp});this.type==="custom"&&(C.partials=this._partials),this.frequency.connect(C.frequency),this.detune.connect(C.detune),C.detune.overridden=!1,C.connect(this.output),this._oscillators[E]=C}this.spread=this._spread,this.state==="started"&&this._forEach(E=>E.start())}}get phase(){return this._phase}set phase(T){this._phase=T,this._forEach((E,C)=>E.phase=this._phase+C/this.count*360)}get baseType(){return this._oscillators[0].baseType}set baseType(T){this._forEach(E=>E.baseType=T),this._type=this._oscillators[0].type}get partials(){return this._oscillators[0].partials}set partials(T){this._partials=T,this._partialCount=this._partials.length,T.length&&(this._type="custom",this._forEach(E=>E.partials=T))}get partialCount(){return this._oscillators[0].partialCount}set partialCount(T){this._partialCount=T,this._forEach(E=>E.partialCount=T),this._type=this._oscillators[0].type}asArray(){return __awaiter(this,arguments,void 0,function*(T=1024){return generateWaveform(this,T)})}dispose(){return super.dispose(),this.frequency.dispose(),this.detune.dispose(),this._forEach(T=>T.dispose()),this}}class PWMOscillator extends Source{constructor(){const T=optionsFromArguments(PWMOscillator.getDefaults(),arguments,["frequency","modulationFrequency"]);super(T),this.name="PWMOscillator",this.sourceType="pwm",this._scale=new Multiply({context:this.context,value:2}),this._pulse=new PulseOscillator({context:this.context,frequency:T.modulationFrequency}),this._pulse.carrierType="sine",this.modulationFrequency=this._pulse.frequency,this._modulator=new Oscillator({context:this.context,detune:T.detune,frequency:T.frequency,onstop:()=>this.onstop(this),phase:T.phase}),this.frequency=this._modulator.frequency,this.detune=this._modulator.detune,this._modulator.chain(this._scale,this._pulse.width),this._pulse.connect(this.output),readOnly(this,["modulationFrequency","frequency","detune"])}static getDefaults(){return Object.assign(Source.getDefaults(),{detune:0,frequency:440,modulationFrequency:.4,phase:0,type:"pwm"})}_start(T){T=this.toSeconds(T),this._modulator.start(T),this._pulse.start(T)}_stop(T){T=this.toSeconds(T),this._modulator.stop(T),this._pulse.stop(T)}_restart(T){this._modulator.restart(T),this._pulse.restart(T)}get type(){return"pwm"}get baseType(){return"pwm"}get partials(){return[]}get partialCount(){return 0}get phase(){return this._modulator.phase}set phase(T){this._modulator.phase=T}asArray(){return __awaiter(this,arguments,void 0,function*(T=1024){return generateWaveform(this,T)})}dispose(){return super.dispose(),this._pulse.dispose(),this._scale.dispose(),this._modulator.dispose(),this}}const OmniOscillatorSourceMap={am:AMOscillator,fat:FatOscillator,fm:FMOscillator,oscillator:Oscillator,pulse:PulseOscillator,pwm:PWMOscillator};class OmniOscillator extends Source{constructor(){const T=optionsFromArguments(OmniOscillator.getDefaults(),arguments,["frequency","type"]);super(T),this.name="OmniOscillator",this.frequency=new Signal({context:this.context,units:"frequency",value:T.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:T.detune}),readOnly(this,["frequency","detune"]),this.set(T)}static getDefaults(){return Object.assign(Oscillator.getDefaults(),FMOscillator.getDefaults(),AMOscillator.getDefaults(),FatOscillator.getDefaults(),PulseOscillator.getDefaults(),PWMOscillator.getDefaults())}_start(T){this._oscillator.start(T)}_stop(T){this._oscillator.stop(T)}_restart(T){return this._oscillator.restart(T),this}get type(){let T="";return["am","fm","fat"].some(E=>this._sourceType===E)&&(T=this._sourceType),T+this._oscillator.type}set type(T){T.substr(0,2)==="fm"?(this._createNewOscillator("fm"),this._oscillator=this._oscillator,this._oscillator.type=T.substr(2)):T.substr(0,2)==="am"?(this._createNewOscillator("am"),this._oscillator=this._oscillator,this._oscillator.type=T.substr(2)):T.substr(0,3)==="fat"?(this._createNewOscillator("fat"),this._oscillator=this._oscillator,this._oscillator.type=T.substr(3)):T==="pwm"?(this._createNewOscillator("pwm"),this._oscillator=this._oscillator):T==="pulse"?this._createNewOscillator("pulse"):(this._createNewOscillator("oscillator"),this._oscillator=this._oscillator,this._oscillator.type=T)}get partials(){return this._oscillator.partials}set partials(T){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partials=T)}get partialCount(){return this._oscillator.partialCount}set partialCount(T){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&(this._oscillator.partialCount=T)}set(T){return Reflect.has(T,"type")&&T.type&&(this.type=T.type),super.set(T),this}_createNewOscillator(T){if(T!==this._sourceType){this._sourceType=T;const E=OmniOscillatorSourceMap[T],C=this.now();if(this._oscillator){const P=this._oscillator;P.stop(C),this.context.setTimeout(()=>P.dispose(),this.blockTime)}this._oscillator=new E({context:this.context}),this.frequency.connect(this._oscillator.frequency),this.detune.connect(this._oscillator.detune),this._oscillator.connect(this.output),this._oscillator.onstop=()=>this.onstop(this),this.state==="started"&&this._oscillator.start(C)}}get phase(){return this._oscillator.phase}set phase(T){this._oscillator.phase=T}get sourceType(){return this._sourceType}set sourceType(T){let E="sine";this._oscillator.type!=="pwm"&&this._oscillator.type!=="pulse"&&(E=this._oscillator.type),T==="fm"?this.type="fm"+E:T==="am"?this.type="am"+E:T==="fat"?this.type="fat"+E:T==="oscillator"?this.type=E:T==="pulse"?this.type="pulse":T==="pwm"&&(this.type="pwm")}_getOscType(T,E){return T instanceof OmniOscillatorSourceMap[E]}get baseType(){return this._oscillator.baseType}set baseType(T){!this._getOscType(this._oscillator,"pulse")&&!this._getOscType(this._oscillator,"pwm")&&T!=="pulse"&&T!=="pwm"&&(this._oscillator.baseType=T)}get width(){if(this._getOscType(this._oscillator,"pulse"))return this._oscillator.width}get count(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.count}set count(T){this._getOscType(this._oscillator,"fat")&&isNumber(T)&&(this._oscillator.count=T)}get spread(){if(this._getOscType(this._oscillator,"fat"))return this._oscillator.spread}set spread(T){this._getOscType(this._oscillator,"fat")&&isNumber(T)&&(this._oscillator.spread=T)}get modulationType(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.modulationType}set modulationType(T){(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))&&isString(T)&&(this._oscillator.modulationType=T)}get modulationIndex(){if(this._getOscType(this._oscillator,"fm"))return this._oscillator.modulationIndex}get harmonicity(){if(this._getOscType(this._oscillator,"fm")||this._getOscType(this._oscillator,"am"))return this._oscillator.harmonicity}get modulationFrequency(){if(this._getOscType(this._oscillator,"pwm"))return this._oscillator.modulationFrequency}asArray(){return __awaiter(this,arguments,void 0,function*(T=1024){return generateWaveform(this,T)})}dispose(){return super.dispose(),this.detune.dispose(),this.frequency.dispose(),this._oscillator.dispose(),this}}class Add extends Signal{constructor(){super(optionsFromArguments(Add.getDefaults(),arguments,["value"])),this.override=!1,this.name="Add",this._sum=new Gain({context:this.context}),this.input=this._sum,this.output=this._sum,this.addend=this._param,connectSeries(this._constantSource,this._sum)}static getDefaults(){return Object.assign(Signal.getDefaults(),{value:0})}dispose(){return super.dispose(),this._sum.dispose(),this}}class Scale extends SignalOperator{constructor(){const T=optionsFromArguments(Scale.getDefaults(),arguments,["min","max"]);super(T),this.name="Scale",this._mult=this.input=new Multiply({context:this.context,value:T.max-T.min}),this._add=this.output=new Add({context:this.context,value:T.min}),this._min=T.min,this._max=T.max,this.input.connect(this.output)}static getDefaults(){return Object.assign(SignalOperator.getDefaults(),{max:1,min:0})}get min(){return this._min}set min(T){this._min=T,this._setRange()}get max(){return this._max}set max(T){this._max=T,this._setRange()}_setRange(){this._add.value=this._min,this._mult.value=this._max-this._min}dispose(){return super.dispose(),this._add.dispose(),this._mult.dispose(),this}}class Zero extends SignalOperator{constructor(){super(optionsFromArguments(Zero.getDefaults(),arguments)),this.name="Zero",this._gain=new Gain({context:this.context}),this.output=this._gain,this.input=void 0,connect(this.context.getConstant(0),this._gain)}dispose(){return super.dispose(),disconnect(this.context.getConstant(0),this._gain),this}}class LFO extends ToneAudioNode{constructor(){const T=optionsFromArguments(LFO.getDefaults(),arguments,["frequency","min","max"]);super(T),this.name="LFO",this._stoppedValue=0,this._units="number",this.convert=!0,this._fromType=Param.prototype._fromType,this._toType=Param.prototype._toType,this._is=Param.prototype._is,this._clampValue=Param.prototype._clampValue,this._oscillator=new Oscillator(T),this.frequency=this._oscillator.frequency,this._amplitudeGain=new Gain({context:this.context,gain:T.amplitude,units:"normalRange"}),this.amplitude=this._amplitudeGain.gain,this._stoppedSignal=new Signal({context:this.context,units:"audioRange",value:0}),this._zeros=new Zero({context:this.context}),this._a2g=new AudioToGain({context:this.context}),this._scaler=this.output=new Scale({context:this.context,max:T.max,min:T.min}),this.units=T.units,this.min=T.min,this.max=T.max,this._oscillator.chain(this._amplitudeGain,this._a2g,this._scaler),this._zeros.connect(this._a2g),this._stoppedSignal.connect(this._a2g),readOnly(this,["amplitude","frequency"]),this.phase=T.phase}static getDefaults(){return Object.assign(Oscillator.getDefaults(),{amplitude:1,frequency:"4n",max:1,min:0,type:"sine",units:"number"})}start(T){return T=this.toSeconds(T),this._stoppedSignal.setValueAtTime(0,T),this._oscillator.start(T),this}stop(T){return T=this.toSeconds(T),this._stoppedSignal.setValueAtTime(this._stoppedValue,T),this._oscillator.stop(T),this}sync(){return this._oscillator.sync(),this._oscillator.syncFrequency(),this}unsync(){return this._oscillator.unsync(),this._oscillator.unsyncFrequency(),this}_setStoppedValue(){this._stoppedValue=this._oscillator.getInitialValue(),this._stoppedSignal.value=this._stoppedValue}get min(){return this._toType(this._scaler.min)}set min(T){T=this._fromType(T),this._scaler.min=T}get max(){return this._toType(this._scaler.max)}set max(T){T=this._fromType(T),this._scaler.max=T}get type(){return this._oscillator.type}set type(T){this._oscillator.type=T,this._setStoppedValue()}get partials(){return this._oscillator.partials}set partials(T){this._oscillator.partials=T,this._setStoppedValue()}get phase(){return this._oscillator.phase}set phase(T){this._oscillator.phase=T,this._setStoppedValue()}get units(){return this._units}set units(T){const E=this.min,C=this.max;this._units=T,this.min=E,this.max=C}get state(){return this._oscillator.state}connect(T,E,C){return(T instanceof Param||T instanceof Signal)&&(this.convert=T.convert,this.units=T.units),connectSignal(this,T,E,C),this}dispose(){return super.dispose(),this._oscillator.dispose(),this._stoppedSignal.dispose(),this._zeros.dispose(),this._scaler.dispose(),this._a2g.dispose(),this._amplitudeGain.dispose(),this.amplitude.dispose(),this}}function range(A,T=1/0){const E=new WeakMap;return function(C,P){Reflect.defineProperty(C,P,{configurable:!0,enumerable:!0,get:function(){return E.get(this)},set:function(I){assertRange(I,A,T),E.set(this,I)}})}}function timeRange(A,T=1/0){const E=new WeakMap;return function(C,P){Reflect.defineProperty(C,P,{configurable:!0,enumerable:!0,get:function(){return E.get(this)},set:function(I){assertRange(this.toSeconds(I),A,T),E.set(this,I)}})}}class Player extends Source{constructor(){const T=optionsFromArguments(Player.getDefaults(),arguments,["url","onload"]);super(T),this.name="Player",this._activeSources=new Set,this._buffer=new ToneAudioBuffer({onload:this._onload.bind(this,T.onload),onerror:T.onerror,reverse:T.reverse,url:T.url}),this.autostart=T.autostart,this._loop=T.loop,this._loopStart=T.loopStart,this._loopEnd=T.loopEnd,this._playbackRate=T.playbackRate,this.fadeIn=T.fadeIn,this.fadeOut=T.fadeOut}static getDefaults(){return Object.assign(Source.getDefaults(),{autostart:!1,fadeIn:0,fadeOut:0,loop:!1,loopEnd:0,loopStart:0,onload:noOp,onerror:noOp,playbackRate:1,reverse:!1})}load(T){return __awaiter(this,void 0,void 0,function*(){return yield this._buffer.load(T),this._onload(),this})}_onload(T=noOp){T(),this.autostart&&this.start()}_onSourceEnd(T){this.onstop(this),this._activeSources.delete(T),this._activeSources.size===0&&!this._synced&&this._state.getValueAtTime(this.now())==="started"&&(this._state.cancel(this.now()),this._state.setStateAtTime("stopped",this.now()))}start(T,E,C){return super.start(T,E,C),this}_start(T,E,C){this._loop?E=defaultArg(E,this._loopStart):E=defaultArg(E,0);const P=this.toSeconds(E),I=C;C=defaultArg(C,Math.max(this._buffer.duration-P,0));let R=this.toSeconds(C);R=R/this._playbackRate,T=this.toSeconds(T);const F=new ToneBufferSource({url:this._buffer,context:this.context,fadeIn:this.fadeIn,fadeOut:this.fadeOut,loop:this._loop,loopEnd:this._loopEnd,loopStart:this._loopStart,onended:this._onSourceEnd.bind(this),playbackRate:this._playbackRate}).connect(this.output);!this._loop&&!this._synced&&(this._state.cancel(T+R),this._state.setStateAtTime("stopped",T+R,{implicitEnd:!0})),this._activeSources.add(F),this._loop&&isUndef(I)?F.start(T,P):F.start(T,P,R-this.toSeconds(this.fadeOut))}_stop(T){const E=this.toSeconds(T);this._activeSources.forEach(C=>C.stop(E))}restart(T,E,C){return super.restart(T,E,C),this}_restart(T,E,C){var P;(P=[...this._activeSources].pop())===null||P===void 0||P.stop(T),this._start(T,E,C)}seek(T,E){const C=this.toSeconds(E);if(this._state.getValueAtTime(C)==="started"){const P=this.toSeconds(T);this._stop(C),this._start(C,P)}return this}setLoopPoints(T,E){return this.loopStart=T,this.loopEnd=E,this}get loopStart(){return this._loopStart}set loopStart(T){this._loopStart=T,this.buffer.loaded&&assertRange(this.toSeconds(T),0,this.buffer.duration),this._activeSources.forEach(E=>{E.loopStart=T})}get loopEnd(){return this._loopEnd}set loopEnd(T){this._loopEnd=T,this.buffer.loaded&&assertRange(this.toSeconds(T),0,this.buffer.duration),this._activeSources.forEach(E=>{E.loopEnd=T})}get buffer(){return this._buffer}set buffer(T){this._buffer.set(T)}get loop(){return this._loop}set loop(T){if(this._loop!==T&&(this._loop=T,this._activeSources.forEach(E=>{E.loop=T}),T)){const E=this._state.getNextState("stopped",this.now());E&&this._state.cancel(E.time)}}get playbackRate(){return this._playbackRate}set playbackRate(T){this._playbackRate=T;const E=this.now(),C=this._state.getNextState("stopped",E);C&&C.implicitEnd&&(this._state.cancel(C.time),this._activeSources.forEach(P=>P.cancelStop())),this._activeSources.forEach(P=>{P.playbackRate.setValueAtTime(T,E)})}get reverse(){return this._buffer.reverse}set reverse(T){this._buffer.reverse=T}get loaded(){return this._buffer.loaded}dispose(){return super.dispose(),this._activeSources.forEach(T=>T.dispose()),this._activeSources.clear(),this._buffer.dispose(),this}}__decorate([timeRange(0)],Player.prototype,"fadeIn",void 0);__decorate([timeRange(0)],Player.prototype,"fadeOut",void 0);class GainToAudio extends SignalOperator{constructor(){super(...arguments),this.name="GainToAudio",this._norm=new WaveShaper({context:this.context,mapping:T=>Math.abs(T)*2-1}),this.input=this._norm,this.output=this._norm}dispose(){return super.dispose(),this._norm.dispose(),this}}class Envelope extends ToneAudioNode{constructor(){const T=optionsFromArguments(Envelope.getDefaults(),arguments,["attack","decay","sustain","release"]);super(T),this.name="Envelope",this._sig=new Signal({context:this.context,value:0}),this.output=this._sig,this.input=void 0,this.attack=T.attack,this.decay=T.decay,this.sustain=T.sustain,this.release=T.release,this.attackCurve=T.attackCurve,this.releaseCurve=T.releaseCurve,this.decayCurve=T.decayCurve}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{attack:.01,attackCurve:"linear",decay:.1,decayCurve:"exponential",release:1,releaseCurve:"exponential",sustain:.5})}get value(){return this.getValueAtTime(this.now())}_getCurve(T,E){if(isString(T))return T;{let C;for(C in EnvelopeCurves)if(EnvelopeCurves[C][E]===T)return C;return T}}_setCurve(T,E,C){if(isString(C)&&Reflect.has(EnvelopeCurves,C)){const P=EnvelopeCurves[C];isObject(P)?T!=="_decayCurve"&&(this[T]=P[E]):this[T]=P}else if(isArray(C)&&T!=="_decayCurve")this[T]=C;else throw new Error("Envelope: invalid curve: "+C)}get attackCurve(){return this._getCurve(this._attackCurve,"In")}set attackCurve(T){this._setCurve("_attackCurve","In",T)}get releaseCurve(){return this._getCurve(this._releaseCurve,"Out")}set releaseCurve(T){this._setCurve("_releaseCurve","Out",T)}get decayCurve(){return this._getCurve(this._decayCurve,"Out")}set decayCurve(T){this._setCurve("_decayCurve","Out",T)}triggerAttack(T,E=1){this.log("triggerAttack",T,E),T=this.toSeconds(T);let P=this.toSeconds(this.attack);const I=this.toSeconds(this.decay),R=this.getValueAtTime(T);if(R>0){const F=1/P;P=(1-R)/F}if(P<this.sampleTime)this._sig.cancelScheduledValues(T),this._sig.setValueAtTime(E,T);else if(this._attackCurve==="linear")this._sig.linearRampTo(E,P,T);else if(this._attackCurve==="exponential")this._sig.targetRampTo(E,P,T);else{this._sig.cancelAndHoldAtTime(T);let F=this._attackCurve;for(let O=1;O<F.length;O++)if(F[O-1]<=R&&R<=F[O]){F=this._attackCurve.slice(O),F[0]=R;break}this._sig.setValueCurveAtTime(F,T,P,E)}if(I&&this.sustain<1){const F=E*this.sustain,O=T+P;this.log("decay",O),this._decayCurve==="linear"?this._sig.linearRampToValueAtTime(F,I+O):this._sig.exponentialApproachValueAtTime(F,O,I)}return this}triggerRelease(T){this.log("triggerRelease",T),T=this.toSeconds(T);const E=this.getValueAtTime(T);if(E>0){const C=this.toSeconds(this.release);C<this.sampleTime?this._sig.setValueAtTime(0,T):this._releaseCurve==="linear"?this._sig.linearRampTo(0,C,T):this._releaseCurve==="exponential"?this._sig.targetRampTo(0,C,T):(assert(isArray(this._releaseCurve),"releaseCurve must be either 'linear', 'exponential' or an array"),this._sig.cancelAndHoldAtTime(T),this._sig.setValueCurveAtTime(this._releaseCurve,T,C,E))}return this}getValueAtTime(T){return this._sig.getValueAtTime(T)}triggerAttackRelease(T,E,C=1){return E=this.toSeconds(E),this.triggerAttack(E,C),this.triggerRelease(E+this.toSeconds(T)),this}cancel(T){return this._sig.cancelScheduledValues(this.toSeconds(T)),this}connect(T,E=0,C=0){return connectSignal(this,T,E,C),this}asArray(){return __awaiter(this,arguments,void 0,function*(T=1024){const E=T/this.context.sampleRate,C=new OfflineContext(1,E,this.context.sampleRate),P=this.toSeconds(this.attack)+this.toSeconds(this.decay),I=P+this.toSeconds(this.release),R=I*.1,F=I+R,O=new this.constructor(Object.assign(this.get(),{attack:E*this.toSeconds(this.attack)/F,decay:E*this.toSeconds(this.decay)/F,release:E*this.toSeconds(this.release)/F,context:C}));return O._sig.toDestination(),O.triggerAttackRelease(E*(P+R)/F,0),(yield C.render()).getChannelData(0)})}dispose(){return super.dispose(),this._sig.dispose(),this}}__decorate([timeRange(0)],Envelope.prototype,"attack",void 0);__decorate([timeRange(0)],Envelope.prototype,"decay",void 0);__decorate([range(0,1)],Envelope.prototype,"sustain",void 0);__decorate([timeRange(0)],Envelope.prototype,"release",void 0);const EnvelopeCurves=(()=>{let T,E;const C=[];for(T=0;T<128;T++)C[T]=Math.sin(T/127*(Math.PI/2));const P=[],I=6.4;for(T=0;T<127;T++){E=T/127;const V=Math.sin(E*(Math.PI*2)*I-Math.PI/2)+1;P[T]=V/10+E*.83}P[127]=1;const R=[],F=5;for(T=0;T<128;T++)R[T]=Math.ceil(T/127*F)/F;const O=[];for(T=0;T<128;T++)E=T/127,O[T]=.5*(1-Math.cos(Math.PI*E));const D=[];for(T=0;T<128;T++){E=T/127;const V=Math.pow(E,3)*4+.2,U=Math.cos(V*Math.PI*2*E);D[T]=Math.abs(U*(1-E))}function L(V){const U=new Array(V.length);for(let z=0;z<V.length;z++)U[z]=1-V[z];return U}function B(V){return V.slice(0).reverse()}return{bounce:{In:L(D),Out:D},cosine:{In:C,Out:B(C)},exponential:"exponential",linear:"linear",ripple:{In:P,Out:L(P)},sine:{In:O,Out:L(O)},step:{In:R,Out:L(R)}}})();class Instrument extends ToneAudioNode{constructor(){const T=optionsFromArguments(Instrument.getDefaults(),arguments);super(T),this._scheduledEvents=[],this._synced=!1,this._original_triggerAttack=this.triggerAttack,this._original_triggerRelease=this.triggerRelease,this._syncedRelease=E=>this._original_triggerRelease(E),this._volume=this.output=new Volume({context:this.context,volume:T.volume}),this.volume=this._volume.volume,readOnly(this,"volume")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{volume:0})}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",0),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}_syncState(){let T=!1;return this._synced||(this._synced=!0,T=!0),T}_syncMethod(T,E){const C=this["_original_"+T]=this[T];this[T]=(...P)=>{const I=P[E],R=this.context.transport.schedule(F=>{P[E]=F,C.apply(this,P)},I);this._scheduledEvents.push(R)}}unsync(){return this._scheduledEvents.forEach(T=>this.context.transport.clear(T)),this._scheduledEvents=[],this._synced&&(this._synced=!1,this.triggerAttack=this._original_triggerAttack,this.triggerRelease=this._original_triggerRelease,this.context.transport.off("stop",this._syncedRelease),this.context.transport.off("pause",this._syncedRelease),this.context.transport.off("loopEnd",this._syncedRelease)),this}triggerAttackRelease(T,E,C,P){const I=this.toSeconds(C),R=this.toSeconds(E);return this.triggerAttack(T,I,P),this.triggerRelease(I+R),this}dispose(){return super.dispose(),this._volume.dispose(),this.unsync(),this._scheduledEvents=[],this}}class Monophonic extends Instrument{constructor(){const T=optionsFromArguments(Monophonic.getDefaults(),arguments);super(T),this.portamento=T.portamento,this.onsilence=T.onsilence}static getDefaults(){return Object.assign(Instrument.getDefaults(),{detune:0,onsilence:noOp,portamento:0})}triggerAttack(T,E,C=1){this.log("triggerAttack",T,E,C);const P=this.toSeconds(E);return this._triggerEnvelopeAttack(P,C),this.setNote(T,P),this}triggerRelease(T){this.log("triggerRelease",T);const E=this.toSeconds(T);return this._triggerEnvelopeRelease(E),this}setNote(T,E){const C=this.toSeconds(E),P=T instanceof FrequencyClass?T.toFrequency():T;if(this.portamento>0&&this.getLevelAtTime(C)>.05){const I=this.toSeconds(this.portamento);this.frequency.exponentialRampTo(P,I,C)}else this.frequency.setValueAtTime(P,C);return this}}__decorate([timeRange(0)],Monophonic.prototype,"portamento",void 0);class AmplitudeEnvelope extends Envelope{constructor(){super(optionsFromArguments(AmplitudeEnvelope.getDefaults(),arguments,["attack","decay","sustain","release"])),this.name="AmplitudeEnvelope",this._gainNode=new Gain({context:this.context,gain:0}),this.output=this._gainNode,this.input=this._gainNode,this._sig.connect(this._gainNode.gain),this.output=this._gainNode,this.input=this._gainNode}dispose(){return super.dispose(),this._gainNode.dispose(),this}}class Synth extends Monophonic{constructor(){const T=optionsFromArguments(Synth.getDefaults(),arguments);super(T),this.name="Synth",this.oscillator=new OmniOscillator(Object.assign({context:this.context,detune:T.detune,onstop:()=>this.onsilence(this)},T.oscillator)),this.frequency=this.oscillator.frequency,this.detune=this.oscillator.detune,this.envelope=new AmplitudeEnvelope(Object.assign({context:this.context},T.envelope)),this.oscillator.chain(this.envelope,this.output),readOnly(this,["oscillator","frequency","detune","envelope"])}static getDefaults(){return Object.assign(Monophonic.getDefaults(),{envelope:Object.assign(omitFromObject(Envelope.getDefaults(),Object.keys(ToneAudioNode.getDefaults())),{attack:.005,decay:.1,release:1,sustain:.3}),oscillator:Object.assign(omitFromObject(OmniOscillator.getDefaults(),[...Object.keys(Source.getDefaults()),"frequency","detune"]),{type:"triangle"})})}_triggerEnvelopeAttack(T,E){if(this.envelope.triggerAttack(T,E),this.oscillator.start(T),this.envelope.sustain===0){const C=this.toSeconds(this.envelope.attack),P=this.toSeconds(this.envelope.decay);this.oscillator.stop(T+C+P)}}_triggerEnvelopeRelease(T){this.envelope.triggerRelease(T),this.oscillator.stop(T+this.toSeconds(this.envelope.release))}getLevelAtTime(T){return T=this.toSeconds(T),this.envelope.getValueAtTime(T)}dispose(){return super.dispose(),this.oscillator.dispose(),this.envelope.dispose(),this}}class BiquadFilter extends ToneAudioNode{constructor(){const T=optionsFromArguments(BiquadFilter.getDefaults(),arguments,["frequency","type"]);super(T),this.name="BiquadFilter",this._filter=this.context.createBiquadFilter(),this.input=this.output=this._filter,this.Q=new Param({context:this.context,units:"number",value:T.Q,param:this._filter.Q}),this.frequency=new Param({context:this.context,units:"frequency",value:T.frequency,param:this._filter.frequency}),this.detune=new Param({context:this.context,units:"cents",value:T.detune,param:this._filter.detune}),this.gain=new Param({context:this.context,units:"decibels",convert:!1,value:T.gain,param:this._filter.gain}),this.type=T.type}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,type:"lowpass",frequency:350,detune:0,gain:0})}get type(){return this._filter.type}set type(T){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(T)!==-1,`Invalid filter type: ${T}`),this._filter.type=T}getFrequencyResponse(T=128){const E=new Float32Array(T);for(let R=0;R<T;R++){const O=Math.pow(R/T,2)*19980+20;E[R]=O}const C=new Float32Array(T),P=new Float32Array(T),I=this.context.createBiquadFilter();return I.type=this.type,I.Q.value=this.Q.value,I.frequency.value=this.frequency.value,I.gain.value=this.gain.value,I.getFrequencyResponse(E,C,P),C}dispose(){return super.dispose(),this._filter.disconnect(),this.Q.dispose(),this.frequency.dispose(),this.gain.dispose(),this.detune.dispose(),this}}class Filter extends ToneAudioNode{constructor(){const T=optionsFromArguments(Filter.getDefaults(),arguments,["frequency","type","rolloff"]);super(T),this.name="Filter",this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._filters=[],this._filters=[],this.Q=new Signal({context:this.context,units:"positive",value:T.Q}),this.frequency=new Signal({context:this.context,units:"frequency",value:T.frequency}),this.detune=new Signal({context:this.context,units:"cents",value:T.detune}),this.gain=new Signal({context:this.context,units:"decibels",convert:!1,value:T.gain}),this._type=T.type,this.rolloff=T.rolloff,readOnly(this,["detune","frequency","gain","Q"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{Q:1,detune:0,frequency:350,gain:0,rolloff:-12,type:"lowpass"})}get type(){return this._type}set type(T){assert(["lowpass","highpass","bandpass","lowshelf","highshelf","notch","allpass","peaking"].indexOf(T)!==-1,`Invalid filter type: ${T}`),this._type=T,this._filters.forEach(C=>C.type=T)}get rolloff(){return this._rolloff}set rolloff(T){const E=isNumber(T)?T:parseInt(T,10),C=[-12,-24,-48,-96];let P=C.indexOf(E);assert(P!==-1,`rolloff can only be ${C.join(", ")}`),P+=1,this._rolloff=E,this.input.disconnect(),this._filters.forEach(I=>I.disconnect()),this._filters=new Array(P);for(let I=0;I<P;I++){const R=new BiquadFilter({context:this.context});R.type=this._type,this.frequency.connect(R.frequency),this.detune.connect(R.detune),this.Q.connect(R.Q),this.gain.connect(R.gain),this._filters[I]=R}this._internalChannels=this._filters,connectSeries(this.input,...this._internalChannels,this.output)}getFrequencyResponse(T=128){const E=new BiquadFilter({frequency:this.frequency.value,gain:this.gain.value,Q:this.Q.value,type:this._type,detune:this.detune.value}),C=new Float32Array(T).map(()=>1);return this._filters.forEach(()=>{E.getFrequencyResponse(T).forEach((I,R)=>C[R]*=I)}),E.dispose(),C}dispose(){return super.dispose(),this._filters.forEach(T=>{T.dispose()}),writable(this,["detune","frequency","gain","Q"]),this.frequency.dispose(),this.Q.dispose(),this.detune.dispose(),this.gain.dispose(),this}}class MembraneSynth extends Synth{constructor(){const T=optionsFromArguments(MembraneSynth.getDefaults(),arguments);super(T),this.name="MembraneSynth",this.portamento=0,this.pitchDecay=T.pitchDecay,this.octaves=T.octaves,readOnly(this,["oscillator","envelope"])}static getDefaults(){return deepMerge(Monophonic.getDefaults(),Synth.getDefaults(),{envelope:{attack:.001,attackCurve:"exponential",decay:.4,release:1.4,sustain:.01},octaves:10,oscillator:{type:"sine"},pitchDecay:.05})}setNote(T,E){const C=this.toSeconds(E),P=this.toFrequency(T instanceof FrequencyClass?T.toFrequency():T),I=P*this.octaves;return this.oscillator.frequency.setValueAtTime(I,C),this.oscillator.frequency.exponentialRampToValueAtTime(P,C+this.toSeconds(this.pitchDecay)),this}dispose(){return super.dispose(),this}}__decorate([range(0)],MembraneSynth.prototype,"octaves",void 0);__decorate([timeRange(0)],MembraneSynth.prototype,"pitchDecay",void 0);const workletContext=new Set;function addToWorklet(A){workletContext.add(A)}function registerProcessor(A,T){const E=`registerProcessor("${A}", ${T})`;workletContext.add(E)}const toneAudioWorkletProcessor=`
	/**
	 * The base AudioWorkletProcessor for use in Tone.js. Works with the {@link ToneAudioWorklet}. 
	 */
	class ToneAudioWorkletProcessor extends AudioWorkletProcessor {

		constructor(options) {
			
			super(options);
			/**
			 * If the processor was disposed or not. Keep alive until it's disposed.
			 */
			this.disposed = false;
		   	/** 
			 * The number of samples in the processing block
			 */
			this.blockSize = 128;
			/**
			 * the sample rate
			 */
			this.sampleRate = sampleRate;

			this.port.onmessage = (event) => {
				// when it receives a dispose 
				if (event.data === "dispose") {
					this.disposed = true;
				}
			};
		}
	}
`;addToWorklet(toneAudioWorkletProcessor);const singleIOProcess=`
	/**
	 * Abstract class for a single input/output processor. 
	 * has a 'generate' function which processes one sample at a time
	 */
	class SingleIOProcessor extends ToneAudioWorkletProcessor {

		constructor(options) {
			super(Object.assign(options, {
				numberOfInputs: 1,
				numberOfOutputs: 1
			}));
			/**
			 * Holds the name of the parameter and a single value of that
			 * parameter at the current sample
			 * @type { [name: string]: number }
			 */
			this.params = {}
		}

		/**
		 * Generate an output sample from the input sample and parameters
		 * @abstract
		 * @param input number
		 * @param channel number
		 * @param parameters { [name: string]: number }
		 * @returns number
		 */
		generate(){}

		/**
		 * Update the private params object with the 
		 * values of the parameters at the given index
		 * @param parameters { [name: string]: Float32Array },
		 * @param index number
		 */
		updateParams(parameters, index) {
			for (const paramName in parameters) {
				const param = parameters[paramName];
				if (param.length > 1) {
					this.params[paramName] = parameters[paramName][index];
				} else {
					this.params[paramName] = parameters[paramName][0];
				}
			}
		}

		/**
		 * Process a single frame of the audio
		 * @param inputs Float32Array[][]
		 * @param outputs Float32Array[][]
		 */
		process(inputs, outputs, parameters) {
			const input = inputs[0];
			const output = outputs[0];
			// get the parameter values
			const channelCount = Math.max(input && input.length || 0, output.length);
			for (let sample = 0; sample < this.blockSize; sample++) {
				this.updateParams(parameters, sample);
				for (let channel = 0; channel < channelCount; channel++) {
					const inputSample = input && input.length ? input[channel][sample] : 0;
					output[channel][sample] = this.generate(inputSample, channel, this.params);
				}
			}
			return !this.disposed;
		}
	};
`;addToWorklet(singleIOProcess);const delayLine=`
	/**
	 * A multichannel buffer for use within an AudioWorkletProcessor as a delay line
	 */
	class DelayLine {
		
		constructor(size, channels) {
			this.buffer = [];
			this.writeHead = []
			this.size = size;

			// create the empty channels
			for (let i = 0; i < channels; i++) {
				this.buffer[i] = new Float32Array(this.size);
				this.writeHead[i] = 0;
			}
		}

		/**
		 * Push a value onto the end
		 * @param channel number
		 * @param value number
		 */
		push(channel, value) {
			this.writeHead[channel] += 1;
			if (this.writeHead[channel] > this.size) {
				this.writeHead[channel] = 0;
			}
			this.buffer[channel][this.writeHead[channel]] = value;
		}

		/**
		 * Get the recorded value of the channel given the delay
		 * @param channel number
		 * @param delay number delay samples
		 */
		get(channel, delay) {
			let readHead = this.writeHead[channel] - Math.floor(delay);
			if (readHead < 0) {
				readHead += this.size;
			}
			return this.buffer[channel][readHead];
		}
	}
`;addToWorklet(delayLine);const workletName$1="feedback-comb-filter",feedbackCombFilter=`
	class FeedbackCombFilterWorklet extends SingleIOProcessor {

		constructor(options) {
			super(options);
			this.delayLine = new DelayLine(this.sampleRate, options.channelCount || 2);
		}

		static get parameterDescriptors() {
			return [{
				name: "delayTime",
				defaultValue: 0.1,
				minValue: 0,
				maxValue: 1,
				automationRate: "k-rate"
			}, {
				name: "feedback",
				defaultValue: 0.5,
				minValue: 0,
				maxValue: 0.9999,
				automationRate: "k-rate"
			}];
		}

		generate(input, channel, parameters) {
			const delayedSample = this.delayLine.get(channel, parameters.delayTime * this.sampleRate);
			this.delayLine.push(channel, input + delayedSample * parameters.feedback);
			return delayedSample;
		}
	}
`;registerProcessor(workletName$1,feedbackCombFilter);class PolySynth extends Instrument{constructor(){const T=optionsFromArguments(PolySynth.getDefaults(),arguments,["voice","options"]);super(T),this.name="PolySynth",this._availableVoices=[],this._activeVoices=[],this._voices=[],this._gcTimeout=-1,this._averageActiveVoices=0,this._syncedRelease=P=>this.releaseAll(P),assert(!isNumber(T.voice),"DEPRECATED: The polyphony count is no longer the first argument.");const E=T.voice.getDefaults();this.options=Object.assign(E,T.options),this.voice=T.voice,this.maxPolyphony=T.maxPolyphony,this._dummyVoice=this._getNextAvailableVoice();const C=this._voices.indexOf(this._dummyVoice);this._voices.splice(C,1),this._gcTimeout=this.context.setInterval(this._collectGarbage.bind(this),1)}static getDefaults(){return Object.assign(Instrument.getDefaults(),{maxPolyphony:32,options:{},voice:Synth})}get activeVoices(){return this._activeVoices.length}_makeVoiceAvailable(T){this._availableVoices.push(T);const E=this._activeVoices.findIndex(C=>C.voice===T);this._activeVoices.splice(E,1)}_getNextAvailableVoice(){if(this._availableVoices.length)return this._availableVoices.shift();if(this._voices.length<this.maxPolyphony){const T=new this.voice(Object.assign(this.options,{context:this.context,onsilence:this._makeVoiceAvailable.bind(this)}));return assert(T instanceof Monophonic,"Voice must extend Monophonic class"),T.connect(this.output),this._voices.push(T),T}else warn("Max polyphony exceeded. Note dropped.")}_collectGarbage(){if(this._averageActiveVoices=Math.max(this._averageActiveVoices*.95,this.activeVoices),this._availableVoices.length&&this._voices.length>Math.ceil(this._averageActiveVoices+1)){const T=this._availableVoices.shift(),E=this._voices.indexOf(T);this._voices.splice(E,1),this.context.isOffline||T.dispose()}}_triggerAttack(T,E,C){T.forEach(P=>{const I=new MidiClass(this.context,P).toMidi(),R=this._getNextAvailableVoice();R&&(R.triggerAttack(P,E,C),this._activeVoices.push({midi:I,voice:R,released:!1}),this.log("triggerAttack",P,E))})}_triggerRelease(T,E){T.forEach(C=>{const P=new MidiClass(this.context,C).toMidi(),I=this._activeVoices.find(({midi:R,released:F})=>R===P&&!F);I&&(I.voice.triggerRelease(E),I.released=!0,this.log("triggerRelease",C,E))})}_scheduleEvent(T,E,C,P){assert(!this.disposed,"Synth was already disposed"),C<=this.now()?T==="attack"?this._triggerAttack(E,C,P):this._triggerRelease(E,C):this.context.setTimeout(()=>{this.disposed||this._scheduleEvent(T,E,C,P)},C-this.now())}triggerAttack(T,E,C){Array.isArray(T)||(T=[T]);const P=this.toSeconds(E);return this._scheduleEvent("attack",T,P,C),this}triggerRelease(T,E){Array.isArray(T)||(T=[T]);const C=this.toSeconds(E);return this._scheduleEvent("release",T,C),this}triggerAttackRelease(T,E,C,P){const I=this.toSeconds(C);if(this.triggerAttack(T,I,P),isArray(E)){assert(isArray(T),"If the duration is an array, the notes must also be an array"),T=T;for(let R=0;R<T.length;R++){const F=E[Math.min(R,E.length-1)],O=this.toSeconds(F);assert(O>0,"The duration must be greater than 0"),this.triggerRelease(T[R],I+O)}}else{const R=this.toSeconds(E);assert(R>0,"The duration must be greater than 0"),this.triggerRelease(T,I+R)}return this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1),this.context.transport.on("stop",this._syncedRelease),this.context.transport.on("pause",this._syncedRelease),this.context.transport.on("loopEnd",this._syncedRelease)),this}set(T){const E=omitFromObject(T,["onsilence","context"]);return this.options=deepMerge(this.options,E),this._voices.forEach(C=>C.set(E)),this._dummyVoice.set(E),this}get(){return this._dummyVoice.get()}releaseAll(T){const E=this.toSeconds(T);return this._activeVoices.forEach(({voice:C})=>{C.triggerRelease(E)}),this}dispose(){return super.dispose(),this._dummyVoice.dispose(),this._voices.forEach(T=>T.dispose()),this._activeVoices=[],this._availableVoices=[],this.context.clearInterval(this._gcTimeout),this}}class Sampler extends Instrument{constructor(){const T=optionsFromArguments(Sampler.getDefaults(),arguments,["urls","onload","baseUrl"],"urls");super(T),this.name="Sampler",this._activeSources=new Map;const E={};Object.keys(T.urls).forEach(C=>{const P=parseInt(C,10);if(assert(isNote(C)||isNumber(P)&&isFinite(P),`url key is neither a note or midi pitch: ${C}`),isNote(C)){const I=new FrequencyClass(this.context,C).toMidi();E[I]=T.urls[C]}else isNumber(P)&&isFinite(P)&&(E[P]=T.urls[P])}),this._buffers=new ToneAudioBuffers({urls:E,onload:T.onload,baseUrl:T.baseUrl,onerror:T.onerror}),this.attack=T.attack,this.release=T.release,this.curve=T.curve,this._buffers.loaded&&Promise.resolve().then(T.onload)}static getDefaults(){return Object.assign(Instrument.getDefaults(),{attack:0,baseUrl:"",curve:"exponential",onload:noOp,onerror:noOp,release:.1,urls:{}})}_findClosest(T){let C=0;for(;C<96;){if(this._buffers.has(T+C))return-C;if(this._buffers.has(T-C))return C;C++}throw new Error(`No available buffers for note: ${T}`)}triggerAttack(T,E,C=1){return this.log("triggerAttack",T,E,C),Array.isArray(T)||(T=[T]),T.forEach(P=>{const I=ftomf(new FrequencyClass(this.context,P).toFrequency()),R=Math.round(I),F=I-R,O=this._findClosest(R),D=R-O,L=this._buffers.get(D),B=intervalToFrequencyRatio(O+F),V=new ToneBufferSource({url:L,context:this.context,curve:this.curve,fadeIn:this.attack,fadeOut:this.release,playbackRate:B}).connect(this.output);V.start(E,0,L.duration/B,C),isArray(this._activeSources.get(R))||this._activeSources.set(R,[]),this._activeSources.get(R).push(V),V.onended=()=>{if(this._activeSources&&this._activeSources.has(R)){const U=this._activeSources.get(R),z=U.indexOf(V);z!==-1&&U.splice(z,1)}}}),this}triggerRelease(T,E){return this.log("triggerRelease",T,E),Array.isArray(T)||(T=[T]),T.forEach(C=>{const P=new FrequencyClass(this.context,C).toMidi();if(this._activeSources.has(P)&&this._activeSources.get(P).length){const I=this._activeSources.get(P);E=this.toSeconds(E),I.forEach(R=>{R.stop(E)}),this._activeSources.set(P,[])}}),this}releaseAll(T){const E=this.toSeconds(T);return this._activeSources.forEach(C=>{for(;C.length;)C.shift().stop(E)}),this}sync(){return this._syncState()&&(this._syncMethod("triggerAttack",1),this._syncMethod("triggerRelease",1)),this}triggerAttackRelease(T,E,C,P=1){const I=this.toSeconds(C);return this.triggerAttack(T,I,P),isArray(E)?(assert(isArray(T),"notes must be an array when duration is array"),T.forEach((R,F)=>{const O=E[Math.min(F,E.length-1)];this.triggerRelease(R,I+this.toSeconds(O))})):this.triggerRelease(T,I+this.toSeconds(E)),this}add(T,E,C){if(assert(isNote(T)||isFinite(T),`note must be a pitch or midi: ${T}`),isNote(T)){const P=new FrequencyClass(this.context,T).toMidi();this._buffers.add(P,E,C)}else this._buffers.add(T,E,C);return this}get loaded(){return this._buffers.loaded}dispose(){return super.dispose(),this._buffers.dispose(),this._activeSources.forEach(T=>{T.forEach(E=>E.dispose())}),this._activeSources.clear(),this}}__decorate([timeRange(0)],Sampler.prototype,"attack",void 0);__decorate([timeRange(0)],Sampler.prototype,"release",void 0);class ToneEvent extends ToneWithContext{constructor(){const T=optionsFromArguments(ToneEvent.getDefaults(),arguments,["callback","value"]);super(T),this.name="ToneEvent",this._state=new StateTimeline("stopped"),this._startOffset=0,this._loop=T.loop,this.callback=T.callback,this.value=T.value,this._loopStart=this.toTicks(T.loopStart),this._loopEnd=this.toTicks(T.loopEnd),this._playbackRate=T.playbackRate,this._probability=T.probability,this._humanize=T.humanize,this.mute=T.mute,this._playbackRate=T.playbackRate,this._state.increasing=!0,this._rescheduleEvents()}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{callback:noOp,humanize:!1,loop:!1,loopEnd:"1m",loopStart:0,mute:!1,playbackRate:1,probability:1,value:null})}_rescheduleEvents(T=-1){this._state.forEachFrom(T,E=>{let C;if(E.state==="started"){E.id!==-1&&this.context.transport.clear(E.id);const P=E.time+Math.round(this.startOffset/this._playbackRate);if(this._loop===!0||isNumber(this._loop)&&this._loop>1){C=1/0,isNumber(this._loop)&&(C=this._loop*this._getLoopDuration());const I=this._state.getAfter(P);I!==null&&(C=Math.min(C,I.time-P)),C!==1/0&&(C=new TicksClass(this.context,C));const R=new TicksClass(this.context,this._getLoopDuration());E.id=this.context.transport.scheduleRepeat(this._tick.bind(this),R,new TicksClass(this.context,P),C)}else E.id=this.context.transport.schedule(this._tick.bind(this),new TicksClass(this.context,P))}})}get state(){return this._state.getValueAtTime(this.context.transport.ticks)}get startOffset(){return this._startOffset}set startOffset(T){this._startOffset=T}get probability(){return this._probability}set probability(T){this._probability=T}get humanize(){return this._humanize}set humanize(T){this._humanize=T}start(T){const E=this.toTicks(T);return this._state.getValueAtTime(E)==="stopped"&&(this._state.add({id:-1,state:"started",time:E}),this._rescheduleEvents(E)),this}stop(T){this.cancel(T);const E=this.toTicks(T);if(this._state.getValueAtTime(E)==="started"){this._state.setStateAtTime("stopped",E,{id:-1});const C=this._state.getBefore(E);let P=E;C!==null&&(P=C.time),this._rescheduleEvents(P)}return this}cancel(T){T=defaultArg(T,-1/0);const E=this.toTicks(T);return this._state.forEachFrom(E,C=>{this.context.transport.clear(C.id)}),this._state.cancel(E),this}_tick(T){const E=this.context.transport.getTicksAtTime(T);if(!this.mute&&this._state.getValueAtTime(E)==="started"){if(this.probability<1&&Math.random()>this.probability)return;if(this.humanize){let C=.02;isBoolean(this.humanize)||(C=this.toSeconds(this.humanize)),T+=(Math.random()*2-1)*C}this.callback(T,this.value)}}_getLoopDuration(){return(this._loopEnd-this._loopStart)/this._playbackRate}get loop(){return this._loop}set loop(T){this._loop=T,this._rescheduleEvents()}get playbackRate(){return this._playbackRate}set playbackRate(T){this._playbackRate=T,this._rescheduleEvents()}get loopEnd(){return new TicksClass(this.context,this._loopEnd).toSeconds()}set loopEnd(T){this._loopEnd=this.toTicks(T),this._loop&&this._rescheduleEvents()}get loopStart(){return new TicksClass(this.context,this._loopStart).toSeconds()}set loopStart(T){this._loopStart=this.toTicks(T),this._loop&&this._rescheduleEvents()}get progress(){if(this._loop){const T=this.context.transport.ticks,E=this._state.get(T);if(E!==null&&E.state==="started"){const C=this._getLoopDuration();return(T-E.time)%C/C}else return 0}else return 0}dispose(){return super.dispose(),this.cancel(),this._state.dispose(),this}}class Loop extends ToneWithContext{constructor(){const T=optionsFromArguments(Loop.getDefaults(),arguments,["callback","interval"]);super(T),this.name="Loop",this._event=new ToneEvent({context:this.context,callback:this._tick.bind(this),loop:!0,loopEnd:T.interval,playbackRate:T.playbackRate,probability:T.probability,humanize:T.humanize}),this.callback=T.callback,this.iterations=T.iterations}static getDefaults(){return Object.assign(ToneWithContext.getDefaults(),{interval:"4n",callback:noOp,playbackRate:1,iterations:1/0,probability:1,mute:!1,humanize:!1})}start(T){return this._event.start(T),this}stop(T){return this._event.stop(T),this}cancel(T){return this._event.cancel(T),this}_tick(T){this.callback(T)}get state(){return this._event.state}get progress(){return this._event.progress}get interval(){return this._event.loopEnd}set interval(T){this._event.loopEnd=T}get playbackRate(){return this._event.playbackRate}set playbackRate(T){this._event.playbackRate=T}get humanize(){return this._event.humanize}set humanize(T){this._event.humanize=T}get probability(){return this._event.probability}set probability(T){this._event.probability=T}get mute(){return this._event.mute}set mute(T){this._event.mute=T}get iterations(){return this._event.loop===!0?1/0:this._event.loop}set iterations(T){T===1/0?this._event.loop=!0:this._event.loop=T}dispose(){return super.dispose(),this._event.dispose(),this}}class CrossFade extends ToneAudioNode{constructor(){const T=optionsFromArguments(CrossFade.getDefaults(),arguments,["fade"]);super(T),this.name="CrossFade",this._panner=this.context.createStereoPanner(),this._split=this.context.createChannelSplitter(2),this._g2a=new GainToAudio({context:this.context}),this.a=new Gain({context:this.context,gain:0}),this.b=new Gain({context:this.context,gain:0}),this.output=new Gain({context:this.context}),this._internalChannels=[this.a,this.b],this.fade=new Signal({context:this.context,units:"normalRange",value:T.fade}),readOnly(this,"fade"),this.context.getConstant(1).connect(this._panner),this._panner.connect(this._split),this._panner.channelCount=1,this._panner.channelCountMode="explicit",connect(this._split,this.a.gain,0),connect(this._split,this.b.gain,1),this.fade.chain(this._g2a,this._panner.pan),this.a.connect(this.output),this.b.connect(this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{fade:.5})}dispose(){return super.dispose(),this.a.dispose(),this.b.dispose(),this.output.dispose(),this.fade.dispose(),this._g2a.dispose(),this._panner.disconnect(),this._split.disconnect(),this}}class Effect extends ToneAudioNode{constructor(T){super(T),this.name="Effect",this._dryWet=new CrossFade({context:this.context}),this.wet=this._dryWet.fade,this.effectSend=new Gain({context:this.context}),this.effectReturn=new Gain({context:this.context}),this.input=new Gain({context:this.context}),this.output=this._dryWet,this.input.fan(this._dryWet.a,this.effectSend),this.effectReturn.connect(this._dryWet.b),this.wet.setValueAtTime(T.wet,0),this._internalChannels=[this.effectReturn,this.effectSend],readOnly(this,"wet")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}connectEffect(T){return this._internalChannels.push(T),this.effectSend.chain(T,this.effectReturn),this}dispose(){return super.dispose(),this._dryWet.dispose(),this.effectSend.dispose(),this.effectReturn.dispose(),this.wet.dispose(),this}}class LFOEffect extends Effect{constructor(T){super(T),this.name="LFOEffect",this._lfo=new LFO({context:this.context,frequency:T.frequency,amplitude:T.depth}),this.depth=this._lfo.amplitude,this.frequency=this._lfo.frequency,this.type=T.type,readOnly(this,["frequency","depth"])}static getDefaults(){return Object.assign(Effect.getDefaults(),{frequency:1,type:"sine",depth:1})}start(T){return this._lfo.start(T),this}stop(T){return this._lfo.stop(T),this}sync(){return this._lfo.sync(),this}unsync(){return this._lfo.unsync(),this}get type(){return this._lfo.type}set type(T){this._lfo.type=T}dispose(){return super.dispose(),this._lfo.dispose(),this.frequency.dispose(),this.depth.dispose(),this}}class AutoFilter extends LFOEffect{constructor(){const T=optionsFromArguments(AutoFilter.getDefaults(),arguments,["frequency","baseFrequency","octaves"]);super(T),this.name="AutoFilter",this.filter=new Filter(Object.assign(T.filter,{context:this.context})),this.connectEffect(this.filter),this._lfo.connect(this.filter.frequency),this.octaves=T.octaves,this.baseFrequency=T.baseFrequency}static getDefaults(){return Object.assign(LFOEffect.getDefaults(),{baseFrequency:200,octaves:2.6,filter:{type:"lowpass",rolloff:-12,Q:1}})}get baseFrequency(){return this._lfo.min}set baseFrequency(T){this._lfo.min=this.toFrequency(T),this.octaves=this._octaves}get octaves(){return this._octaves}set octaves(T){this._octaves=T,this._lfo.max=this._lfo.min*Math.pow(2,T)}dispose(){return super.dispose(),this.filter.dispose(),this}}class Panner extends ToneAudioNode{constructor(){const T=optionsFromArguments(Panner.getDefaults(),arguments,["pan"]);super(T),this.name="Panner",this._panner=this.context.createStereoPanner(),this.input=this._panner,this.output=this._panner,this.pan=new Param({context:this.context,param:this._panner.pan,value:T.pan,minValue:-1,maxValue:1}),this._panner.channelCount=T.channelCount,this._panner.channelCountMode="explicit",readOnly(this,"pan")}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,channelCount:1})}dispose(){return super.dispose(),this._panner.disconnect(),this.pan.dispose(),this}}const workletName="bit-crusher",bitCrusherWorklet=`
	class BitCrusherWorklet extends SingleIOProcessor {

		static get parameterDescriptors() {
			return [{
				name: "bits",
				defaultValue: 12,
				minValue: 1,
				maxValue: 16,
				automationRate: 'k-rate'
			}];
		}

		generate(input, _channel, parameters) {
			const step = Math.pow(0.5, parameters.bits - 1);
			const val = step * Math.floor(input / step + 0.5);
			return val;
		}
	}
`;registerProcessor(workletName,bitCrusherWorklet);class Split extends ToneAudioNode{constructor(){const T=optionsFromArguments(Split.getDefaults(),arguments,["channels"]);super(T),this.name="Split",this._splitter=this.input=this.output=this.context.createChannelSplitter(T.channels),this._internalChannels=[this._splitter]}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._splitter.disconnect(),this}}class Merge extends ToneAudioNode{constructor(){const T=optionsFromArguments(Merge.getDefaults(),arguments,["channels"]);super(T),this.name="Merge",this._merger=this.output=this.input=this.context.createChannelMerger(T.channels)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{channels:2})}dispose(){return super.dispose(),this._merger.disconnect(),this}}class StereoEffect extends ToneAudioNode{constructor(T){super(T),this.name="StereoEffect",this.input=new Gain({context:this.context}),this.input.channelCount=2,this.input.channelCountMode="explicit",this._dryWet=this.output=new CrossFade({context:this.context,fade:T.wet}),this.wet=this._dryWet.fade,this._split=new Split({context:this.context,channels:2}),this._merge=new Merge({context:this.context,channels:2}),this.input.connect(this._split),this.input.connect(this._dryWet.a),this._merge.connect(this._dryWet.b),readOnly(this,["wet"])}connectEffectLeft(...T){this._split.connect(T[0],0,0),connectSeries(...T),connect(T[T.length-1],this._merge,0,0)}connectEffectRight(...T){this._split.connect(T[0],1,0),connectSeries(...T),connect(T[T.length-1],this._merge,0,1)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{wet:1})}dispose(){return super.dispose(),this._dryWet.dispose(),this._split.dispose(),this._merge.dispose(),this}}class StereoFeedbackEffect extends StereoEffect{constructor(T){super(T),this.feedback=new Signal({context:this.context,value:T.feedback,units:"normalRange"}),this._feedbackL=new Gain({context:this.context}),this._feedbackR=new Gain({context:this.context}),this._feedbackSplit=new Split({context:this.context,channels:2}),this._feedbackMerge=new Merge({context:this.context,channels:2}),this._merge.connect(this._feedbackSplit),this._feedbackMerge.connect(this._split),this._feedbackSplit.connect(this._feedbackL,0,0),this._feedbackL.connect(this._feedbackMerge,0,0),this._feedbackSplit.connect(this._feedbackR,1,0),this._feedbackR.connect(this._feedbackMerge,0,1),this.feedback.fan(this._feedbackL.gain,this._feedbackR.gain),readOnly(this,["feedback"])}static getDefaults(){return Object.assign(StereoEffect.getDefaults(),{feedback:.5})}dispose(){return super.dispose(),this.feedback.dispose(),this._feedbackL.dispose(),this._feedbackR.dispose(),this._feedbackSplit.dispose(),this._feedbackMerge.dispose(),this}}class StereoXFeedbackEffect extends StereoFeedbackEffect{constructor(T){super(T),this._feedbackL.disconnect(),this._feedbackL.connect(this._feedbackMerge,0,1),this._feedbackR.disconnect(),this._feedbackR.connect(this._feedbackMerge,0,0),readOnly(this,["feedback"])}}class PingPongDelay extends StereoXFeedbackEffect{constructor(){const T=optionsFromArguments(PingPongDelay.getDefaults(),arguments,["delayTime","feedback"]);super(T),this.name="PingPongDelay",this._leftDelay=new Delay({context:this.context,maxDelay:T.maxDelay}),this._rightDelay=new Delay({context:this.context,maxDelay:T.maxDelay}),this._rightPreDelay=new Delay({context:this.context,maxDelay:T.maxDelay}),this.delayTime=new Signal({context:this.context,units:"time",value:T.delayTime}),this.connectEffectLeft(this._leftDelay),this.connectEffectRight(this._rightPreDelay,this._rightDelay),this.delayTime.fan(this._leftDelay.delayTime,this._rightDelay.delayTime,this._rightPreDelay.delayTime),this._feedbackL.disconnect(),this._feedbackL.connect(this._rightDelay),readOnly(this,["delayTime"])}static getDefaults(){return Object.assign(StereoXFeedbackEffect.getDefaults(),{delayTime:.25,maxDelay:1})}dispose(){return super.dispose(),this._leftDelay.dispose(),this._rightDelay.dispose(),this._rightPreDelay.dispose(),this.delayTime.dispose(),this}}class Reverb extends Effect{constructor(){const T=optionsFromArguments(Reverb.getDefaults(),arguments,["decay"]);super(T),this.name="Reverb",this._convolver=this.context.createConvolver(),this.ready=Promise.resolve(),this._decay=T.decay,this._preDelay=T.preDelay,this.generate(),this.connectEffect(this._convolver)}static getDefaults(){return Object.assign(Effect.getDefaults(),{decay:1.5,preDelay:.01})}get decay(){return this._decay}set decay(T){T=this.toSeconds(T),assertRange(T,.001),this._decay=T,this.generate()}get preDelay(){return this._preDelay}set preDelay(T){T=this.toSeconds(T),assertRange(T,0),this._preDelay=T,this.generate()}generate(){return __awaiter(this,void 0,void 0,function*(){const T=this.ready,E=new OfflineContext(2,this._decay+this._preDelay,this.context.sampleRate),C=new Noise({context:E}),P=new Noise({context:E}),I=new Merge({context:E});C.connect(I,0,0),P.connect(I,0,1);const R=new Gain({context:E}).toDestination();I.connect(R),C.start(0),P.start(0),R.gain.setValueAtTime(0,0),R.gain.setValueAtTime(1,this._preDelay),R.gain.exponentialApproachValueAtTime(0,this._preDelay,this.decay);const F=E.render();return this.ready=F.then(noOp),yield T,this._convolver.buffer=(yield F).get(),this})}dispose(){return super.dispose(),this._convolver.disconnect(),this}}class Solo extends ToneAudioNode{constructor(){const T=optionsFromArguments(Solo.getDefaults(),arguments,["solo"]);super(T),this.name="Solo",this.input=this.output=new Gain({context:this.context}),Solo._allSolos.has(this.context)||Solo._allSolos.set(this.context,new Set),Solo._allSolos.get(this.context).add(this),this.solo=T.solo}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{solo:!1})}get solo(){return this._isSoloed()}set solo(T){T?this._addSolo():this._removeSolo(),Solo._allSolos.get(this.context).forEach(E=>E._updateSolo())}get muted(){return this.input.gain.value===0}_addSolo(){Solo._soloed.has(this.context)||Solo._soloed.set(this.context,new Set),Solo._soloed.get(this.context).add(this)}_removeSolo(){Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).delete(this)}_isSoloed(){return Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).has(this)}_noSolos(){return!Solo._soloed.has(this.context)||Solo._soloed.has(this.context)&&Solo._soloed.get(this.context).size===0}_updateSolo(){this._isSoloed()?this.input.gain.value=1:this._noSolos()?this.input.gain.value=1:this.input.gain.value=0}dispose(){return super.dispose(),Solo._allSolos.get(this.context).delete(this),this._removeSolo(),this}}Solo._allSolos=new Map;Solo._soloed=new Map;class PanVol extends ToneAudioNode{constructor(){const T=optionsFromArguments(PanVol.getDefaults(),arguments,["pan","volume"]);super(T),this.name="PanVol",this._panner=this.input=new Panner({context:this.context,pan:T.pan,channelCount:T.channelCount}),this.pan=this._panner.pan,this._volume=this.output=new Volume({context:this.context,volume:T.volume}),this.volume=this._volume.volume,this._panner.connect(this._volume),this.mute=T.mute,readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{mute:!1,pan:0,volume:0,channelCount:1})}get mute(){return this._volume.mute}set mute(T){this._volume.mute=T}dispose(){return super.dispose(),this._panner.dispose(),this.pan.dispose(),this._volume.dispose(),this.volume.dispose(),this}}class Channel extends ToneAudioNode{constructor(){const T=optionsFromArguments(Channel.getDefaults(),arguments,["volume","pan"]);super(T),this.name="Channel",this._solo=this.input=new Solo({solo:T.solo,context:this.context}),this._panVol=this.output=new PanVol({context:this.context,pan:T.pan,volume:T.volume,mute:T.mute,channelCount:T.channelCount}),this.pan=this._panVol.pan,this.volume=this._panVol.volume,this._solo.connect(this._panVol),readOnly(this,["pan","volume"])}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{pan:0,volume:0,mute:!1,solo:!1,channelCount:1})}get solo(){return this._solo.solo}set solo(T){this._solo.solo=T}get muted(){return this._solo.muted||this.mute}get mute(){return this._panVol.mute}set mute(T){this._panVol.mute=T}_getBus(T){return Channel.buses.has(T)||Channel.buses.set(T,new Gain({context:this.context})),Channel.buses.get(T)}send(T,E=0){const C=this._getBus(T),P=new Gain({context:this.context,units:"decibels",gain:E});return this.connect(P),P.connect(C),P}receive(T){return this._getBus(T).connect(this),this}dispose(){return super.dispose(),this._panVol.dispose(),this.pan.dispose(),this.volume.dispose(),this._solo.dispose(),this}}Channel.buses=new Map;class Convolver extends ToneAudioNode{constructor(){const T=optionsFromArguments(Convolver.getDefaults(),arguments,["url","onload"]);super(T),this.name="Convolver",this._convolver=this.context.createConvolver(),this._buffer=new ToneAudioBuffer(T.url,E=>{this.buffer=E,T.onload()}),this.input=new Gain({context:this.context}),this.output=new Gain({context:this.context}),this._buffer.loaded&&(this.buffer=this._buffer),this.normalize=T.normalize,this.input.chain(this._convolver,this.output)}static getDefaults(){return Object.assign(ToneAudioNode.getDefaults(),{normalize:!0,onload:noOp})}load(T){return __awaiter(this,void 0,void 0,function*(){this.buffer=yield this._buffer.load(T)})}get buffer(){return this._buffer.length?this._buffer:null}set buffer(T){T&&this._buffer.set(T),this._convolver.buffer&&(this.input.disconnect(),this._convolver.disconnect(),this._convolver=this.context.createConvolver(),this.input.chain(this._convolver,this.output));const E=this._buffer.get();this._convolver.buffer=E||null}get normalize(){return this._convolver.normalize}set normalize(T){this._convolver.normalize=T}dispose(){return super.dispose(),this._buffer.dispose(),this._convolver.disconnect(),this}}function now(){return getContext().now()}getContext().transport;function getTransport(){return getContext().transport}getContext().destination;getContext().destination;getContext().listener;getContext().draw;getContext();function loaded(){return ToneAudioBuffer.loaded()}class SoundController{constructor(T){this.initialized=!1,this.volPlayer=-5,this.volSynth=-15,this.columnTime="12n",this.playing=!1,this.stepCounter=0,this.patternLength=4,this.notes=_.range(3,5).map(E=>["C","D","E","G","A"].map(C=>C+E)).flat(),this.noteIdx=8,this.noteIncrement=-1,this.filterNext=!1,this.reverbNext=!1,this.release=20,this.releaseMax=30,this.releaseMin=5,this.attack=.2,this.attackMax=.4,this.attackMin=.005,this.snareCounter=0,this.tick=E=>{if(!this.playing||!_.isNumber(this.stepCounter))return;const C=this.stepCounter%this.simulation.activeCount,P=Math.floor(C/this.patternLength),I=C%this.patternLength,R=P%2===0,F=this.simulation.getDeliverableNodes().find(B=>B.active&&B.i===C),O=this.simulation.getDeliverableNodes().filter(B=>Math.floor(B.i/this.patternLength)===P);if(!F)return;let D=!1;const{categories:L}=F;if(L.includes("product.outras-interfaces")&&this.incrementNoteFrequency(2),L.includes("goal.jornalistico-editorial")&&(this.filterNext=!0),L.includes("goal.impacto-positivo")&&(this.reverbNext=!0),L.includes("design.editorial")&&gsapWithCSS.fromTo(this,{release:this.releaseMax},{release:this.releaseMin,duration:2,ease:"power2.inOut",overwrite:"auto"}),L.includes("design.datavis")&&gsapWithCSS.fromTo(this,{attack:this.attackMax},{attack:this.attackMin,duration:2.5,overwrite:"auto"}),I%2===0?(L.includes("design.infografia")&&(D=!0,this.drumPlayers.hihatClosed.start(E)),(L.includes("design.user-interface")||L.includes("design.design-de-servicos"))&&(D=!0,this.drumPlayers.hihatOpen.start(E)),L.includes("industry.comunicacao")&&(D=!0,this.drumPlayers.clapPingPong.start(E))):L.includes("industry.educacao")&&(D=!0,this.drumPlayers.rimPingPong.start(E)),I===0){if(O.filter(B=>B.categories.includes("product.video")).length>=3&&(this.noteIncrement=this.noteIncrement*-1),L.includes("channel.digital")){D=!0;const B=this.notes[this.noteIdx];let V=new PolySynth().toDestination();V.set({envelope:{attack:this.attack,release:this.release}}),V.volume.value=this.volSynth,this.filterNext&&(V.connect(this.autoFilter),this.filterNext=!1),this.reverbNext&&(V.connect(this.reverb),this.reverbNext=!1),V.triggerAttackRelease(B,"8n"),getTransport().scheduleOnce(()=>{V.dispose(),V=null},now()+Time("2n").toSeconds())}if(R&&L.includes("design.ilustracao")){D=!0;const B=L.includes("goal.educacional")?"kickPingPong":"kick";this.drumPlayers[B].start(E)}if(L.includes("design.motion-graphics")){L.includes("product.outras-interfaces")||this.incrementNoteFrequency(),this.snareCounter++,D=!0;const B=this.snareCounter%3===0?"snarePingPong":"snare";this.drumPlayers[B].start(E)}}D&&this.animate(F),this.stepCounter++},this.simulation=T}loadPlayers(T){const E=I=>T+I;this.autoFilter=new AutoFilter({frequency:15,wet:.8,depth:.9}).toDestination(),this.reverb=new Reverb(3).toDestination(),this.pingPong=new PingPongDelay("4n",.2).toDestination();const C=new Convolver(E("/small-drum-room.wav")).toDestination(),P=new Panner().connect(C);new LFO(.13,-.25,.25).connect(P.pan),this.drumPlayers={kick:new Player(E("/808-kick-vm.mp3")).toDestination(),snare:new Player(E("/flares-snare-vm.mp3")).connect(P),hihatClosed:new Player(E("/808-hihat-vm.mp3")).connect(new Panner(-.5).connect(C)),hihatOpen:new Player(E("/808-hihat-open-vm.mp3")).connect(new Panner(-.5).connect(C)),tomLow:new Player(E("/slamdam-tom-low-vm.mp3")).connect(new Panner(-.4).connect(C)),tomMid:new Player(E("/slamdam-tom-mid-vm.mp3")).connect(C),tomHigh:new Player(E("/slamdam-tom-high-vm.mp3")).connect(new Panner(.4).connect(C)),clap:new Player(E("/909-clap-vm.mp3")).connect(new Panner(.5).connect(C)),rim:new Player(E("/909-rim-vm.wav")).connect(new Panner(.5).connect(C))},Object.entries(this.drumPlayers).forEach(([I,R])=>{R.volume.value=this.volPlayer;const F=new Player(R.buffer).connect(this.pingPong);F.volume.value=this.volPlayer,this.drumPlayers[I+"PingPong"]=F})}init(){Promise.all([start(),loaded()]).then(()=>{new Loop(this.tick,this.columnTime).start(0),getTransport().start(),this.initialized=!0})}resetParams(){this.stepCounter=0,this.release=20,this.attack=.2,this.snareCounter=0,this.filterNext=!1,this.reverbNext=!1,this.noteIdx=8,this.noteIncrement=-1}togglePlaying(){return this.initialized||this.init(),this.resetParams(),this.playing=!this.playing,this.playing}animate(T){T.context.animateSound()}incrementNoteFrequency(T=1){let E=this.noteIdx+this.noteIncrement*T;(E<0||E>=this.notes.length)&&(this.noteIncrement=this.noteIncrement*-1,E=this.noteIdx+this.noteIncrement*T),this.noteIdx=E}}function getFontSizeLabel(){return document.querySelector(".text-xxs"),+getComputedStyle(root).fontSize.replace("px","")}const ease="power2.out";class LayoutLabel{constructor(T,E,C,P){return this.translate=P,this.title=E.title,this.theta=E.thetaMin,this.outer=new Container,this.inner=new Container,this.text=new Text("",{fontSize:getFontSizeLabel(),fontFamily:["Rational","monospace"],fontWeight:"300"}),this.text.alpha=0,this.inner.x=C+get_store_value(nodeSize)*1.5,this.inner.y=-get_store_value(nodeSize)*1.75,this.outer.rotation=this.theta,this.inner.addChild(this.text),this.outer.addChild(this.inner),T.addChild(this.outer),this.enter(),this}enter(){this.updateText(),this.entranceTl=gsapWithCSS.timeline().to(this.text,{alpha:1,duration:1,delay:.75,ease}).from(this.outer,{rotation:this.theta-Math.PI/16,duration:1,ease},"<"),console.groupEnd()}toggleOpacity(T){gsapWithCSS.to(this.outer,{alpha:T,duration:.25,ease})}exit(){this.entranceTl.isActive()&&this.entranceTl.kill(),gsapWithCSS.timeline({overwrite:!0}).to(this.outer,{alpha:0,duration:.25},"<").call(()=>{this.outer.destroy({children:!0})})}updateText(){const{translate:T,title:E,text:C,theta:P}=this;C.text=(T?get_store_value($format)(E):E).toLowerCase(),P>=Math.PI/2&&P<=3*Math.PI/2?(C.pivot.set(C.width,C.height),C.rotation=Math.PI,C.style.align="right"):C.style.align="left"}}class LayoutInterface{constructor(T){this.context=new Container,this.nodes=[],this.queue=[],this.pop=E=>{const C=this.queue.findIndex(I=>I.id===E);return C===-1?void 0:this.queue.splice(C,1)[0]},this.simulation=T}toScene(T,E){E.add(this.tick),T.addChild(this.context)}enqueue(T,E){this.queue.push({id:T,...E})}toggleOpacity(T){this.nodes.forEach(E=>E.toggleOpacity(T))}setInterfaceLabels(T){for(;this.nodes.length;){const F=this.nodes.pop();F&&F.exit()}const{type:E,attrId:C}=T;if(C&&(this.prev=this.cur,this.cur=this.pop(C)),!this.cur||E==="exit")return;const{sectorTitleData:P,minRadius:I,translate:R}=this.cur;P.forEach((F,O)=>{const D=new LayoutLabel(this.context,F,I,R);this.nodes.push(D)})}updateText(){"updateText";this.cur&&this.nodes.forEach(T=>{T.updateText()})}tick(){}}const c={};c.shifts=1;c.maxDelayRadial=.7*c.shifts;c.colEntranceUpTo=c.shifts*.2;c.fullColEntranceMaxDuration=c.shifts-c.colEntranceUpTo;c.filterTotalDuration=c.shifts;c.filterBetweenGap=c.filterTotalDuration*.15;c.filterDuration=c.filterTotalDuration-c.filterBetweenGap;c.maxDurationRadial=c.shifts-c.maxDelayRadial;class Simulation{constructor(){this.onSelectedState=!1,this.initialized=!1,this.activeIds=[],this.activeCount=0,this.attrId=0,this.nodes=[],this.clients=[],this.projects=[],this.forceCollideRadius=T=>T.radius(),this.ticked=()=>this.nodes.forEach(T=>T.tick()),this.initSimulation=()=>{this.forceCollide=collide().radius(this.forceCollideRadius),this.forceX=x$1().strength(.005),this.forceY=y$1().strength(.005),this.forceSimulation=simulation$1().alphaTarget(.3).velocityDecay(.25).force("charge",manyBody().strength(-5)).force("x",this.forceX).force("y",this.forceY).force("collide",this.forceCollide).nodes(this.nodes).on("tick",this.ticked)},this.updateCategories=()=>{const T=this.getDeliverableNodes().filter(E=>E.active);categoriesEnriched.set(get_store_value(categories).map(E=>{const C={...E};if(["product","design","industry"].includes(E.type)){const P=I=>I.categories.includes(E.id);C.nNodes=T.filter(P).length,C.pctNodes=T.length>0?+(C.nNodes/T.length).toFixed(2):0}return C}))},this.chainNodesBlockAttr=T=>{const E=get_store_value(nodeSize),C=get_store_value(gap),P=get_store_value(figureWidth),I=get_store_value(figureHeight),R=P/I,F=Math.ceil(Math.sqrt(this.activeCount/R)),O=Math.ceil(R*F);let D=Math.ceil(this.activeCount/O),L=O,B=(L+1)*(E+C)-C,V;for(;B>P;)B=--L*(E+C)-C,D=Math.ceil(this.activeCount/L);B=--L*(E+C)-C,D=Math.ceil(this.activeCount/L),V=D*(E+C)-C;const U=randomDensity(L),z=+(c.fullColEntranceMaxDuration/D).toFixed(4);return this.getDeliverableNodes().forEach(Z=>{const X={x:0,y:0,radius:0,theta:0,time:0,active:Z.active};if(Z.active){const K=Math.floor(Z.i%L),Y=Math.floor(Z.i/L);X.x=K*(E+C)+E/2-B/2,X.y=Y*(E+C)+E/2-V/2,X.time=U[K]*c.colEntranceUpTo+z*Y}Z.attr.set(new NodeAttributes(T,X))}),{layoutSize:{width:B,height:V}}},this.chainNodesRadialAttr=T=>{const E=get_store_value(nodeSize),C=get_store_value(figureWidth),P=get_store_value(figureHeight),R=get_store_value(sortBy)==="dt"?"year":"industry",F=this.getDeliverableNodes().filter(de=>de.active),O=E*1.75,D=E*1,L=this.activeCount**(1/3);let B,V,U=Math.min(C,P)*.05,z=!0;do{const de=2*Math.PI*U;range$2(1,L+1,1).forEach(ue=>{const ge=makeSectorData(F,R,ue);B=ge[0],V=ge[1];const ae=(V.nPiles+V.nGaps)*O;z=de<ae}),U+=D}while(z);const W=B,Z=V,X=U,K=linear().domain([0,Z.nPiles+Z.nGaps]).range([0,2*Math.PI]),Y=linear().domain([0,2*Math.PI]).range([0,c.maxDelayRadial]);let Q=0,J=0,te=0,ie=0;const ne=[];this.getDeliverableNodes().forEach(de=>{const fe={x:0,y:0,theta:0,radius:0,time:0,active:de.active},ue=W.find(ge=>ge.id===de.id);if(ue){const{sectorIndex:ge,pileIndex:ae,inPileIndex:ce,sectorName:se}=ue;fe.theta=K(ae+ge),fe.radius=X+ce*(D+E),fe.x=Math.cos(fe.theta)*fe.radius,fe.y=Math.sin(fe.theta)*fe.radius,fe.time=Y(fe.theta),ne.push({sectorName:se,...fe})}fe.x<Q?Q=fe.x:fe.x>J&&(J=fe.x),fe.y<te?te=fe.y:fe.y>ie&&(ie=fe.y),de.attr.set(new NodeAttributes(T,fe))});const ve={sectorTitleData:Array.from(rollup(ne,de=>{const[fe,ue]=extent(de,ae=>ae.theta),ge=fe+(ue-fe)/2;return{title:(R==="industry"?"category.":"")+de[0].sectorName,thetaMin:fe,thetaMax:ue,theta:ge}},de=>de.sectorName).values()),minRadius:X-E*2,translate:R==="industry"};return this.interface.enqueue(T,ve),{layoutSize:{width:J-Q,height:ie-te},layoutData:ve}},this.chainNodeAttributes=(T,E=0)=>{if(!this.initialized)return;const C=++this.attrId,P=this.layout==="block"?this.chainNodesBlockAttr(C):this.chainNodesRadialAttr(C);setTimeout(()=>{this.transition.add({type:T,attrId:C,layout:this.layout,...P})},E)},this.debounceInitialize=_.debounce(()=>{this.initialized=!0,this.chainNodeAttributes("entrance",250)},300),this.handleFigureResize=T=>{T&&(this.initialized||this.debounceInitialize())},this.handleWindowResize=T=>{T&&this.zoom.updateScaleExtent(this.layout,T)},this.handleLanguageChange=T=>{this.interface.updateText()},this.load=T=>{const E=[];T.forEach(P=>{const I=new Deliverable(this,P);this.nodes.push(I),E.push(I.context.loading)});const C=this.getDeliverableNodes();this.activeIds=C.filter(P=>P.active).map(P=>P.id),this.activeCount=this.activeIds.length,this.complexityScale=linear().domain(extent(C,P=>P.complexity)).range([.75,1.25]),groups(C,P=>P.client).forEach(([P,I])=>{const R=new DeliverableGroup(this,P,I,8555258);this.clients.push(R)}),groups(C,P=>P.project).forEach(([P,I])=>{const R=new DeliverableGroup(this,P,I,11591736);this.projects.push(R)}),this.sort(get_store_value(sortBy),!0),Promise.all(E).then(()=>{this.updateCategories(),this.initSimulation(),loader.setLoaded("nodes")})},this.toScene=(T,E)=>{this.clients.forEach(C=>C.toScene(T,E)),this.projects.forEach(C=>C.toScene(T,E)),this.getDeliverableNodes().forEach(C=>{C.context.toScene(T,E)}),this.interface.toScene(T,E)},this.getDeliverableNodes=()=>this.nodes.filter(T=>T.id>=0),this.updateForceCollideRadius=()=>{this.forceSimulation&&this.forceCollide.radius(this.forceCollideRadius)},this.handleTransition=T=>{this.handleLinks("clients",!T&&get_store_value(linkClientOn)),this.handleLinks("projects",!T&&get_store_value(linkProjectOn))},this.getClosestTo=(T,E)=>{let C=9999999,P;const I=this.nodes.filter(R=>R.id!==-1);for(let R=0;R<I.length;R++){const F=I[R],O=F.context.context.x,D=F.context.context.y,L=Math.sqrt((T-O)**2+(E-D)**2);L<C&&(P=F,C=L)}return P},this.setLayout=T=>{T!==this.layout&&(this.layout=T,this.initialized&&(this.transition.add({type:"exit"}),this.chainNodeAttributes("entrance")))},this.sort=(T,E=!1)=>{const C=T==="dt"?(P,I)=>+I.active-+P.active||I[T]-P[T]:(P,I)=>+I.active-+P.active||P[T].localeCompare(I[T]);this.getDeliverableNodes().sort(C).forEach((P,I)=>{P.i=I}),!E&&this.chainNodeAttributes("sort")},this.filter=(T,E,C,P,I)=>{if(!this.initialized)return;this.getDeliverableNodes().forEach(O=>{O.setActive(T,E,C,P,I)});const R=this.getDeliverableNodes().filter(O=>O.active).map(O=>O.id);if(!(this.activeIds.length===R.length&&R.every(O=>this.activeIds.includes(O)))){const O=this.activeCount>R.length?"filterOut":"filterIn";this.activeIds=R,this.activeCount=R.length,this.sort(get_store_value(sortBy),!0),this.updateCategories(),this.chainNodeAttributes(O)}},this.handleSelected=T=>{this.onSelectedState&&!T?this.transition.playNext(!0):!this.onSelectedState&&T&&(this.transition.addSelectedLeaving({layout:this.layout}),this.onSelectedState=!!T),this.interface.toggleOpacity(+T),this.nodes.forEach(E=>E.handleSelected(T)),this.handleLinks("clients",!T&&get_store_value(linkClientOn)),this.handleLinks("projects",!T&&get_store_value(linkProjectOn))},this.handleHovered=T=>{this.clients.forEach(E=>E.setHovered(T&&E.id===T.client)),this.projects.forEach(E=>E.setHovered(T&&E.id===T.project))},this.handleComplexity=T=>{this.getDeliverableNodes().forEach(E=>E.attr.complexity())},this.handleLinks=(T,E)=>{this[T].forEach(C=>C.setActive(E))},this.transition=new TransitionController(this),this.zoom=new ZoomController(this),this.dummy=new DummyDeliverable(this),this.sound=new SoundController(this),this.interface=new LayoutInterface(this),this.nodes.push(this.dummy)}}const simulation=new Simulation,isSheetOpen=writable$1(!1),isFilterOpen=writable$1(!1),isToggleHidden=derived([isFilterOpen,selected],([A,T])=>A||!!T);function create_fragment$11(A){let T,E,C,P,I,R,F,O,D,L,B,V,U,z=A[0]("page.hero")+"",W;return{c(){T=element("figure"),E=svg_element("svg"),C=svg_element("g"),P=svg_element("g"),I=svg_element("path"),R=svg_element("path"),F=svg_element("path"),O=svg_element("path"),D=svg_element("g"),L=svg_element("path"),B=svg_element("rect"),V=space(),U=element("p"),W=text(z),this.h()},l(Z){T=claim_element(Z,"FIGURE",{class:!0});var X=children$1(T);E=claim_svg_element(X,"svg",{xmlns:!0,class:!0,viewBox:!0});var K=children$1(E);C=claim_svg_element(K,"g",{id:!0,"data-name":!0,transform:!0});var Y=children$1(C);P=claim_svg_element(Y,"g",{id:!0,"data-name":!0});var Q=children$1(P);I=claim_svg_element(Q,"path",{id:!0,"data-name":!0,d:!0,fill:!0}),children$1(I).forEach(detach),R=claim_svg_element(Q,"path",{id:!0,"data-name":!0,d:!0,fill:!0}),children$1(R).forEach(detach),Q.forEach(detach),F=claim_svg_element(Y,"path",{id:!0,"data-name":!0,d:!0,fill:!0}),children$1(F).forEach(detach),O=claim_svg_element(Y,"path",{id:!0,"data-name":!0,d:!0,fill:!0}),children$1(O).forEach(detach),D=claim_svg_element(Y,"g",{id:!0,"data-name":!0});var J=children$1(D);L=claim_svg_element(J,"path",{id:!0,"data-name":!0,d:!0,fill:!0}),children$1(L).forEach(detach),B=claim_svg_element(J,"rect",{id:!0,"data-name":!0,width:!0,height:!0,transform:!0,fill:!0}),children$1(B).forEach(detach),J.forEach(detach),Y.forEach(detach),K.forEach(detach),V=claim_space(X),U=claim_element(X,"P",{class:!0});var te=children$1(U);W=claim_text(te,z),te.forEach(detach),X.forEach(detach),this.h()},h(){attr(I,"id","Path_234"),attr(I,"data-name","Path 234"),attr(I,"d","M119.79,1047.038a12.222,12.222,0,0,0,2.7,8.214,8.847,8.847,0,0,0,6.99,3.207,9.3,9.3,0,0,0,7.278-3.1,13.339,13.339,0,0,0,0-16.286,9.173,9.173,0,0,0-7.206-3.134,8.964,8.964,0,0,0-6.99,3.17,11.693,11.693,0,0,0-2.774,7.927m19.24-43.2h8.143v60.854H139.03v-3.674a15.127,15.127,0,0,1-10.845,4.683,15.442,15.442,0,0,1-11.962-5.26,19.562,19.562,0,0,1-4.72-13.4,18.91,18.91,0,0,1,4.72-13.115,15.158,15.158,0,0,1,22.807-.252Z"),attr(I,"fill","#0d0d0d"),attr(R,"id","Path_235"),attr(R,"data-name","Path 235"),attr(R,"d","M162.034,1047.038a12.221,12.221,0,0,0,2.7,8.215,8.848,8.848,0,0,0,6.99,3.206,9.3,9.3,0,0,0,7.278-3.1,13.337,13.337,0,0,0,0-16.285,9.172,9.172,0,0,0-7.206-3.135,8.964,8.964,0,0,0-6.99,3.17,11.687,11.687,0,0,0-2.774,7.927m19.24-17.438h8.142v35.093h-8.142v-3.676q-5.01,4.685-10.773,4.684a15.521,15.521,0,0,1-12.034-5.26,19.56,19.56,0,0,1-4.72-13.4,18.959,18.959,0,0,1,4.72-13.151,15.215,15.215,0,0,1,11.818-5.26q6.124,0,10.989,5.044Z"),attr(R,"fill","#0d0d0d"),attr(P,"id","Group_355"),attr(P,"data-name","Group 355"),attr(F,"id","Path_236"),attr(F,"data-name","Path 236"),attr(F,"d","M209.448,1037.166v27.527h-8.106v-27.527H195.01V1029.6h6.331v-12.862h8.106V1029.6h6.305v7.566Z"),attr(F,"fill","#0d0d0d"),attr(O,"id","Path_237"),attr(O,"data-name","Path 237"),attr(O,"d","M227.581,1047.038a12.222,12.222,0,0,0,2.7,8.215,8.846,8.846,0,0,0,6.989,3.206,9.3,9.3,0,0,0,7.278-3.1,13.337,13.337,0,0,0,0-16.285,9.172,9.172,0,0,0-7.206-3.135,8.964,8.964,0,0,0-6.99,3.17,11.687,11.687,0,0,0-2.774,7.927m19.24-17.438h8.143v35.093h-8.143v-3.676q-5.009,4.685-10.773,4.684a15.521,15.521,0,0,1-12.034-5.26,19.56,19.56,0,0,1-4.72-13.4,18.959,18.959,0,0,1,4.72-13.151,15.218,15.218,0,0,1,11.818-5.26q6.124,0,10.989,5.044Z"),attr(O,"fill","#0d0d0d"),attr(L,"id","Path_238"),attr(L,"data-name","Path 238"),attr(L,"d","M286.74,1047.227a10.052,10.052,0,1,1-10.053-10.052,10.052,10.052,0,0,1,10.053,10.052"),attr(L,"fill","#7781fa"),attr(B,"id","Rectangle_782"),attr(B,"data-name","Rectangle 782"),attr(B,"width","35.05"),attr(B,"height","7.807"),attr(B,"transform","translate(293.493 1057.084)"),attr(B,"fill","#0d0d0d"),attr(D,"id","Group_356"),attr(D,"data-name","Group 356"),attr(C,"id","Group_357"),attr(C,"data-name","Group 357"),attr(C,"transform","translate(-111.503 -1003.838)"),attr(E,"xmlns","http://www.w3.org/2000/svg"),attr(E,"class","w-32 md:w-20"),attr(E,"viewBox","0 0 217.04 61.863"),attr(U,"class","text-nowrap flex items-end"),attr(T,"class","flex items-end gap-2.5")},m(Z,X){insert_hydration(Z,T,X),append_hydration(T,E),append_hydration(E,C),append_hydration(C,P),append_hydration(P,I),append_hydration(P,R),append_hydration(C,F),append_hydration(C,O),append_hydration(C,D),append_hydration(D,L),append_hydration(D,B),append_hydration(T,V),append_hydration(T,U),append_hydration(U,W)},p(Z,[X]){X&1&&z!==(z=Z[0]("page.hero")+"")&&set_data(W,z)},i:noop$1,o:noop$1,d(Z){Z&&detach(T)}}}function instance$H(A,T,E){let C;return component_subscribe(A,$format,P=>E(0,C=P)),[C]}class ProjectLogo extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$H,create_fragment$11,safe_not_equal,{})}}function get_each_context$8(A,T,E){const C=A.slice();return C[5]=T[E].value,C[6]=T[E].alias,C}function create_each_block$8(A){let T,E,C,P,I=A[6]+"",R,F,O,D,L;return O=init_binding_group(A[3][0]),{c(){T=element("label"),E=element("input"),C=space(),P=element("span"),R=text(I),F=space(),this.h()},l(B){T=claim_element(B,"LABEL",{});var V=children$1(T);E=claim_element(V,"INPUT",{type:!0,name:!0,class:!0}),C=claim_space(V),P=claim_element(V,"SPAN",{class:!0});var U=children$1(P);R=claim_text(U,I),U.forEach(detach),F=claim_space(V),V.forEach(detach),this.h()},h(){attr(E,"type","radio"),E.__value=A[5],set_input_value(E,E.__value),attr(E,"name","language-change"),attr(E,"class","svelte-1vaa99e"),attr(P,"class","svelte-1vaa99e"),O.p(E)},m(B,V){insert_hydration(B,T,V),append_hydration(T,E),E.checked=E.__value===A[0],append_hydration(T,C),append_hydration(T,P),append_hydration(P,R),append_hydration(T,F),D||(L=listen(E,"change",A[2]),D=!0)},p(B,V){V&1&&(E.checked=E.__value===B[0])},d(B){B&&detach(T),O.r(),D=!1,L()}}}function create_fragment$10(A){let T,E=ensure_array_like(A[1]),C=[];for(let P=0;P<E.length;P+=1)C[P]=create_each_block$8(get_each_context$8(A,E,P));return{c(){T=element("fieldset");for(let P=0;P<C.length;P+=1)C[P].c();this.h()},l(P){T=claim_element(P,"FIELDSET",{class:!0});var I=children$1(T);for(let R=0;R<C.length;R+=1)C[R].l(I);I.forEach(detach),this.h()},h(){attr(T,"class","svelte-1vaa99e")},m(P,I){insert_hydration(P,T,I);for(let R=0;R<C.length;R+=1)C[R]&&C[R].m(T,null)},p(P,[I]){if(I&3){E=ensure_array_like(P[1]);let R;for(R=0;R<E.length;R+=1){const F=get_each_context$8(P,E,R);C[R]?C[R].p(F,I):(C[R]=create_each_block$8(F),C[R].c(),C[R].m(T,null))}for(;R<C.length;R+=1)C[R].d(1);C.length=E.length}},i:noop$1,o:noop$1,d(P){P&&detach(T),destroy_each(C,P)}}}function instance$G(A,T,E){let C;component_subscribe(A,$locale,O=>E(4,C=O));const P=[{value:"pt",alias:"PT"},{value:"en",alias:"EN"}];let I=C.slice(0,2);const R=[[]];function F(){I=this.__value,E(0,I)}return A.$$.update=()=>{A.$$.dirty&1&&$locale.set(I.slice(0,2))},[I,P,F,R]}class LanguageChange extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$G,create_fragment$10,safe_not_equal,{})}}function create_fragment$$(A){let T,E,C,P,I,R,F,O;return{c(){T=svg_element("svg"),E=svg_element("g"),C=svg_element("path"),P=svg_element("path"),I=svg_element("path"),R=svg_element("defs"),F=svg_element("clipPath"),O=svg_element("rect"),this.h()},l(D){T=claim_svg_element(D,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var L=children$1(T);E=claim_svg_element(L,"g",{"clip-path":!0});var B=children$1(E);C=claim_svg_element(B,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(C).forEach(detach),P=claim_svg_element(B,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(P).forEach(detach),I=claim_svg_element(B,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(I).forEach(detach),B.forEach(detach),R=claim_svg_element(L,"defs",{});var V=children$1(R);F=claim_svg_element(V,"clipPath",{id:!0});var U=children$1(F);O=claim_svg_element(U,"rect",{width:!0,height:!0,fill:!0}),children$1(O).forEach(detach),U.forEach(detach),V.forEach(detach),L.forEach(detach),this.h()},h(){attr(C,"d","M22.01 1H4.99C2.78638 1 1 2.78638 1 4.99V22.01C1 24.2136 2.78638 26 4.99 26H22.01C24.2136 26 26 24.2136 26 22.01V4.99C26 2.78638 24.2136 1 22.01 1Z"),attr(C,"stroke","#1C1C1C"),attr(C,"stroke-width","2"),attr(C,"stroke-miterlimit","10"),attr(P,"d","M1 18.9199H13.5V25.9999"),attr(P,"stroke","#1C1C1C"),attr(P,"stroke-width","2"),attr(P,"stroke-miterlimit","10"),attr(I,"d","M13.5 18.92V1"),attr(I,"stroke","#1C1C1C"),attr(I,"stroke-width","2"),attr(I,"stroke-miterlimit","10"),attr(E,"clip-path","url(#clip0_371_39)"),attr(O,"width","27"),attr(O,"height","27"),attr(O,"fill","white"),attr(F,"id","clip0_371_39"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 27 27"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(D,L){insert_hydration(D,T,L),append_hydration(T,E),append_hydration(E,C),append_hydration(E,P),append_hydration(E,I),append_hydration(T,R),append_hydration(R,F),append_hydration(F,O)},p:noop$1,i:noop$1,o:noop$1,d(D){D&&detach(T)}}}class Designs extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$$,safe_not_equal,{})}}function create_fragment$_(A){let T,E,C,P,I,R,F;return{c(){T=svg_element("svg"),E=svg_element("g"),C=svg_element("path"),P=svg_element("path"),I=svg_element("defs"),R=svg_element("clipPath"),F=svg_element("rect"),this.h()},l(O){T=claim_svg_element(O,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var D=children$1(T);E=claim_svg_element(D,"g",{"clip-path":!0});var L=children$1(E);C=claim_svg_element(L,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(C).forEach(detach),P=claim_svg_element(L,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-linecap":!0,"stroke-linejoin":!0}),children$1(P).forEach(detach),L.forEach(detach),I=claim_svg_element(D,"defs",{});var B=children$1(I);R=claim_svg_element(B,"clipPath",{id:!0});var V=children$1(R);F=claim_svg_element(V,"rect",{width:!0,height:!0,fill:!0}),children$1(F).forEach(detach),V.forEach(detach),B.forEach(detach),D.forEach(detach),this.h()},h(){attr(C,"d","M13.5 26C20.4036 26 26 20.4036 26 13.5C26 6.59644 20.4036 1 13.5 1C6.59644 1 1 6.59644 1 13.5C1 20.4036 6.59644 26 13.5 26Z"),attr(C,"stroke","#1C1C1C"),attr(C,"stroke-width","2"),attr(C,"stroke-miterlimit","10"),attr(P,"d","M22.25 4.75L13.5 13.5L22.33 22.33"),attr(P,"stroke","#1C1C1C"),attr(P,"stroke-width","2"),attr(P,"stroke-linecap","round"),attr(P,"stroke-linejoin","round"),attr(E,"clip-path","url(#clip0_371_57)"),attr(F,"width","27"),attr(F,"height","27"),attr(F,"fill","white"),attr(R,"id","clip0_371_57"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 27 27"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(O,D){insert_hydration(O,T,D),append_hydration(T,E),append_hydration(E,C),append_hydration(E,P),append_hydration(T,I),append_hydration(I,R),append_hydration(R,F)},p:noop$1,i:noop$1,o:noop$1,d(O){O&&detach(T)}}}class Goals extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$_,safe_not_equal,{})}}function create_fragment$Z(A){let T,E,C,P,I,R,F,O,D;return{c(){T=svg_element("svg"),E=svg_element("g"),C=svg_element("path"),P=svg_element("path"),I=svg_element("path"),R=svg_element("path"),F=svg_element("defs"),O=svg_element("clipPath"),D=svg_element("rect"),this.h()},l(L){T=claim_svg_element(L,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var B=children$1(T);E=claim_svg_element(B,"g",{"clip-path":!0});var V=children$1(E);C=claim_svg_element(V,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(C).forEach(detach),P=claim_svg_element(V,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(P).forEach(detach),I=claim_svg_element(V,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0}),children$1(I).forEach(detach),R=claim_svg_element(V,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(R).forEach(detach),V.forEach(detach),F=claim_svg_element(B,"defs",{});var U=children$1(F);O=claim_svg_element(U,"clipPath",{id:!0});var z=children$1(O);D=claim_svg_element(z,"rect",{width:!0,height:!0,fill:!0}),children$1(D).forEach(detach),z.forEach(detach),U.forEach(detach),B.forEach(detach),this.h()},h(){attr(C,"d","M26 13.5C26 6.59644 20.4036 1 13.5 1C6.59644 1 1 6.59644 1 13.5C1 20.4036 6.59644 26 13.5 26C20.4036 26 26 20.4036 26 13.5Z"),attr(C,"stroke","#1C1C1C"),attr(C,"stroke-width","2"),attr(C,"stroke-miterlimit","10"),attr(P,"d","M17.74 14.3599C20.0817 14.3599 21.98 12.4616 21.98 10.1199C21.98 7.7782 20.0817 5.87988 17.74 5.87988C15.3983 5.87988 13.5 7.7782 13.5 10.1199C13.5 12.4616 15.3983 14.3599 17.74 14.3599Z"),attr(P,"stroke","#1C1C1C"),attr(P,"stroke-width","0.9"),attr(P,"stroke-miterlimit","10"),attr(I,"d","M10.8203 11.46C12.3391 11.46 13.5703 10.2287 13.5703 8.70996C13.5703 7.19118 12.3391 5.95996 10.8203 5.95996C9.30153 5.95996 8.07031 7.19118 8.07031 8.70996C8.07031 10.2287 9.30153 11.46 10.8203 11.46Z"),attr(I,"stroke","#1C1C1C"),attr(I,"stroke-miterlimit","10"),attr(R,"d","M10.8204 22.7302C13.9298 22.7302 16.4504 20.2096 16.4504 17.1002C16.4504 13.9909 13.9298 11.4702 10.8204 11.4702C7.71107 11.4702 5.19043 13.9909 5.19043 17.1002C5.19043 20.2096 7.71107 22.7302 10.8204 22.7302Z"),attr(R,"stroke","#1C1C1C"),attr(R,"stroke-width","0.9"),attr(R,"stroke-miterlimit","10"),attr(E,"clip-path","url(#clip0_371_13)"),attr(D,"width","27"),attr(D,"height","27"),attr(D,"fill","white"),attr(O,"id","clip0_371_13"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 27 27"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(L,B){insert_hydration(L,T,B),append_hydration(T,E),append_hydration(E,C),append_hydration(E,P),append_hydration(E,I),append_hydration(E,R),append_hydration(T,F),append_hydration(F,O),append_hydration(O,D)},p:noop$1,i:noop$1,o:noop$1,d(L){L&&detach(T)}}}class Industries extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$Z,safe_not_equal,{})}}function create_fragment$Y(A){let T,E,C,P,I,R,F,O;return{c(){T=svg_element("svg"),E=svg_element("g"),C=svg_element("path"),P=svg_element("path"),I=svg_element("path"),R=svg_element("defs"),F=svg_element("clipPath"),O=svg_element("rect"),this.h()},l(D){T=claim_svg_element(D,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var L=children$1(T);E=claim_svg_element(L,"g",{"clip-path":!0});var B=children$1(E);C=claim_svg_element(B,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(C).forEach(detach),P=claim_svg_element(B,"path",{d:!0,fill:!0}),children$1(P).forEach(detach),I=claim_svg_element(B,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0}),children$1(I).forEach(detach),B.forEach(detach),R=claim_svg_element(L,"defs",{});var V=children$1(R);F=claim_svg_element(V,"clipPath",{id:!0});var U=children$1(F);O=claim_svg_element(U,"rect",{width:!0,height:!0,fill:!0}),children$1(O).forEach(detach),U.forEach(detach),V.forEach(detach),L.forEach(detach),this.h()},h(){attr(C,"d","M13.5 26C20.4036 26 26 20.4036 26 13.5C26 6.59644 20.4036 1 13.5 1C6.59644 1 1 6.59644 1 13.5C1 20.4036 6.59644 26 13.5 26Z"),attr(C,"stroke","#1C1C1C"),attr(C,"stroke-width","2"),attr(C,"stroke-miterlimit","10"),attr(P,"d","M14.2598 19.46C17.5514 19.46 20.2198 16.7917 20.2198 13.5C20.2198 10.2084 17.5514 7.54004 14.2598 7.54004C10.9682 7.54004 8.2998 10.2084 8.2998 13.5C8.2998 16.7917 10.9682 19.46 14.2598 19.46Z"),attr(P,"fill","#1C1C1C"),attr(I,"d","M1 13.5C1 13.5 6.6 19.46 13.5 19.46C20.4 19.46 26 16.79 26 13.5C26 10.21 20.4 7.54004 13.5 7.54004C6.6 7.54004 1 13.5 1 13.5Z"),attr(I,"stroke","#1C1C1C"),attr(I,"stroke-miterlimit","10"),attr(E,"clip-path","url(#clip0_371_51)"),attr(O,"width","27"),attr(O,"height","27"),attr(O,"fill","white"),attr(F,"id","clip0_371_51"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 27 27"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(D,L){insert_hydration(D,T,L),append_hydration(T,E),append_hydration(E,C),append_hydration(E,P),append_hydration(E,I),append_hydration(T,R),append_hydration(R,F),append_hydration(F,O)},p:noop$1,i:noop$1,o:noop$1,d(D){D&&detach(T)}}}class Layouts extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$Y,safe_not_equal,{})}}function create_fragment$X(A){let T,E,C,P,I,R,F,O,D;return{c(){T=svg_element("svg"),E=svg_element("g"),C=svg_element("path"),P=svg_element("path"),I=svg_element("path"),R=svg_element("path"),F=svg_element("defs"),O=svg_element("clipPath"),D=svg_element("rect"),this.h()},l(L){T=claim_svg_element(L,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var B=children$1(T);E=claim_svg_element(B,"g",{"clip-path":!0});var V=children$1(E);C=claim_svg_element(V,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(C).forEach(detach),P=claim_svg_element(V,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0}),children$1(P).forEach(detach),I=claim_svg_element(V,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0}),children$1(I).forEach(detach),R=claim_svg_element(V,"path",{d:!0,fill:!0}),children$1(R).forEach(detach),V.forEach(detach),F=claim_svg_element(B,"defs",{});var U=children$1(F);O=claim_svg_element(U,"clipPath",{id:!0});var z=children$1(O);D=claim_svg_element(z,"rect",{width:!0,height:!0,fill:!0}),children$1(D).forEach(detach),z.forEach(detach),U.forEach(detach),B.forEach(detach),this.h()},h(){attr(C,"d","M13.5 26C20.4036 26 26 20.4036 26 13.5C26 6.59644 20.4036 1 13.5 1C6.59644 1 1 6.59644 1 13.5C1 20.4036 6.59644 26 13.5 26Z"),attr(C,"stroke","#1C1C1C"),attr(C,"stroke-width","2"),attr(C,"stroke-miterlimit","10"),attr(P,"d","M13.5 13.5L19.02 7.97998"),attr(P,"stroke","#1C1C1C"),attr(P,"stroke-miterlimit","10"),attr(I,"d","M13.5 13.5L16.26 21.39"),attr(I,"stroke","#1C1C1C"),attr(I,"stroke-miterlimit","10"),attr(R,"d","M13.5 15.54C14.6266 15.54 15.54 14.6266 15.54 13.5C15.54 12.3733 14.6266 11.46 13.5 11.46C12.3733 11.46 11.46 12.3733 11.46 13.5C11.46 14.6266 12.3733 15.54 13.5 15.54Z"),attr(R,"fill","#1C1C1C"),attr(E,"clip-path","url(#clip0_371_62)"),attr(D,"width","27"),attr(D,"height","27"),attr(D,"fill","white"),attr(O,"id","clip0_371_62"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 27 27"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(L,B){insert_hydration(L,T,B),append_hydration(T,E),append_hydration(E,C),append_hydration(E,P),append_hydration(E,I),append_hydration(E,R),append_hydration(T,F),append_hydration(F,O),append_hydration(O,D)},p:noop$1,i:noop$1,o:noop$1,d(L){L&&detach(T)}}}class Period extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$X,safe_not_equal,{})}}function create_fragment$W(A){let T,E,C,P,I,R,F,O;return{c(){T=svg_element("svg"),E=svg_element("g"),C=svg_element("path"),P=svg_element("path"),I=svg_element("path"),R=svg_element("defs"),F=svg_element("clipPath"),O=svg_element("rect"),this.h()},l(D){T=claim_svg_element(D,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var L=children$1(T);E=claim_svg_element(L,"g",{"clip-path":!0});var B=children$1(E);C=claim_svg_element(B,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(C).forEach(detach),P=claim_svg_element(B,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0}),children$1(P).forEach(detach),I=claim_svg_element(B,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0}),children$1(I).forEach(detach),B.forEach(detach),R=claim_svg_element(L,"defs",{});var V=children$1(R);F=claim_svg_element(V,"clipPath",{id:!0});var U=children$1(F);O=claim_svg_element(U,"rect",{width:!0,height:!0,fill:!0}),children$1(O).forEach(detach),U.forEach(detach),V.forEach(detach),L.forEach(detach),this.h()},h(){attr(C,"d","M13.5 26C20.4036 26 26 20.4036 26 13.5C26 6.59644 20.4036 1 13.5 1C6.59644 1 1 6.59644 1 13.5C1 20.4036 6.59644 26 13.5 26Z"),attr(C,"stroke","#1C1C1C"),attr(C,"stroke-width","2"),attr(C,"stroke-miterlimit","10"),attr(P,"d","M21.86 21.86L13.5 13.5V1"),attr(P,"stroke","#1C1C1C"),attr(P,"stroke-miterlimit","10"),attr(I,"d","M13.5004 13.5L1.61035 17.37"),attr(I,"stroke","#1C1C1C"),attr(I,"stroke-miterlimit","10"),attr(E,"clip-path","url(#clip0_371_7)"),attr(O,"width","27"),attr(O,"height","27"),attr(O,"fill","white"),attr(F,"id","clip0_371_7"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 27 27"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(D,L){insert_hydration(D,T,L),append_hydration(T,E),append_hydration(E,C),append_hydration(E,P),append_hydration(E,I),append_hydration(T,R),append_hydration(R,F),append_hydration(F,O)},p:noop$1,i:noop$1,o:noop$1,d(D){D&&detach(T)}}}class Products extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$W,safe_not_equal,{})}}function create_fragment$V(A){let T,E,C,P,I;return{c(){T=svg_element("svg"),E=svg_element("path"),C=svg_element("path"),P=svg_element("path"),I=svg_element("path"),this.h()},l(R){T=claim_svg_element(R,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var F=children$1(T);E=claim_svg_element(F,"path",{d:!0,fill:!0}),children$1(E).forEach(detach),C=claim_svg_element(F,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(C).forEach(detach),P=claim_svg_element(F,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(P).forEach(detach),I=claim_svg_element(F,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(I).forEach(detach),F.forEach(detach),this.h()},h(){attr(E,"d","M27 9C28.1046 9 29 8.10457 29 7C29 5.89543 28.1046 5 27 5C25.8954 5 25 5.89543 25 7C25 8.10457 25.8954 9 27 9Z"),attr(E,"fill","#1C1C1C"),attr(C,"d","M2 7H27"),attr(C,"stroke","#1C1C1C"),attr(C,"stroke-width","1.5"),attr(C,"stroke-miterlimit","10"),attr(P,"d","M2 14.8599H19.43"),attr(P,"stroke","#1C1C1C"),attr(P,"stroke-width","1.5"),attr(P,"stroke-miterlimit","10"),attr(I,"d","M2 22.73H14.5"),attr(I,"stroke","#1C1C1C"),attr(I,"stroke-width","1.5"),attr(I,"stroke-miterlimit","10"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 30 30"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(R,F){insert_hydration(R,T,F),append_hydration(T,E),append_hydration(T,C),append_hydration(T,P),append_hydration(T,I)},p:noop$1,i:noop$1,o:noop$1,d(R){R&&detach(T)}}}class BlockLayout extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$V,safe_not_equal,{})}}function create_fragment$U(A){let T,E,C;return{c(){T=svg_element("svg"),E=svg_element("path"),C=svg_element("path"),this.h()},l(P){T=claim_svg_element(P,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var I=children$1(T);E=claim_svg_element(I,"path",{d:!0,stroke:!0,"stroke-width":!0,"stroke-miterlimit":!0}),children$1(E).forEach(detach),C=claim_svg_element(I,"path",{d:!0,fill:!0}),children$1(C).forEach(detach),I.forEach(detach),this.h()},h(){attr(E,"d","M14.8278 25.6556C8.85085 25.6556 4 20.8047 4 14.8278C4 8.85085 8.85085 4 14.8278 4C20.8047 4 25.6556 8.85085 25.6556 14.8278"),attr(E,"stroke","#1C1C1C"),attr(E,"stroke-width","1.5"),attr(E,"stroke-miterlimit","10"),attr(C,"d","M25.7071 17.2359C26.6639 17.2359 27.4395 16.4602 27.4395 15.5034C27.4395 14.5466 26.6639 13.771 25.7071 13.771C24.7503 13.771 23.9746 14.5466 23.9746 15.5034C23.9746 16.4602 24.7503 17.2359 25.7071 17.2359Z"),attr(C,"fill","#1C1C1C"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 30 30"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(P,I){insert_hydration(P,T,I),append_hydration(T,E),append_hydration(T,C)},p:noop$1,i:noop$1,o:noop$1,d(P){P&&detach(T)}}}class RadialLayout extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$U,safe_not_equal,{})}}function create_fragment$T(A){let T,E;return{c(){T=svg_element("svg"),E=svg_element("path"),this.h()},l(C){T=claim_svg_element(C,"svg",{width:!0,height:!0,viewBox:!0,xmlns:!0});var P=children$1(T);E=claim_svg_element(P,"path",{d:!0}),children$1(E).forEach(detach),P.forEach(detach),this.h()},h(){attr(E,"d","M13.27 17.76H11.29L7 7H9.31L12.3 15.64L15.42 7H17.73L13.26 17.76H13.27Z"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 24 24"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(C,P){insert_hydration(C,T,P),append_hydration(T,E)},p:noop$1,i:noop$1,o:noop$1,d(C){C&&detach(T)}}}class Caret extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$T,safe_not_equal,{})}}function create_fragment$S(A){let T,E;return{c(){T=svg_element("svg"),E=svg_element("path"),this.h()},l(C){T=claim_svg_element(C,"svg",{width:!0,height:!0,viewBox:!0,xmlns:!0});var P=children$1(T);E=claim_svg_element(P,"path",{d:!0}),children$1(E).forEach(detach),P.forEach(detach),this.h()},h(){attr(E,"d","M19.6895 12.16L4.26953 21.31V3L19.6895 12.16Z"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 24 24"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(C,P){insert_hydration(C,T,P),append_hydration(T,E)},p:noop$1,i:noop$1,o:noop$1,d(C){C&&detach(T)}}}class Play extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$S,safe_not_equal,{})}}function create_fragment$R(A){let T,E,C;return{c(){T=svg_element("svg"),E=svg_element("path"),C=svg_element("path"),this.h()},l(P){T=claim_svg_element(P,"svg",{width:!0,height:!0,viewBox:!0,xmlns:!0});var I=children$1(T);E=claim_svg_element(I,"path",{d:!0}),children$1(E).forEach(detach),C=claim_svg_element(I,"path",{d:!0}),children$1(C).forEach(detach),I.forEach(detach),this.h()},h(){attr(E,"d","M10.5 2.5H4.5V21.5H10.5V2.5Z"),attr(C,"d","M19.5 2.5H13.5V21.5H19.5V2.5Z"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 24 24"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(P,I){insert_hydration(P,T,I),append_hydration(T,E),append_hydration(T,C)},p:noop$1,i:noop$1,o:noop$1,d(P){P&&detach(T)}}}class Pause extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$R,safe_not_equal,{})}}function create_fragment$Q(A){let T,E,C,P,I,R;return{c(){T=svg_element("svg"),E=svg_element("path"),C=svg_element("path"),P=svg_element("path"),I=svg_element("path"),R=svg_element("path"),this.h()},l(F){T=claim_svg_element(F,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0,class:!0});var O=children$1(T);E=claim_svg_element(O,"path",{class:!0,d:!0}),children$1(E).forEach(detach),C=claim_svg_element(O,"path",{class:!0,d:!0}),children$1(C).forEach(detach),P=claim_svg_element(O,"path",{class:!0,d:!0}),children$1(P).forEach(detach),I=claim_svg_element(O,"path",{class:!0,d:!0}),children$1(I).forEach(detach),R=claim_svg_element(O,"path",{class:!0,d:!0}),children$1(R).forEach(detach),O.forEach(detach),this.h()},h(){attr(E,"class","i-char default svelte-s8yumu"),attr(E,"d","M30.2201 33.0199V34.2299H20.3301V33.0199H24.6501V24.4699H21.2101V23.2599H25.9901V33.0199H30.2201ZM26.3001 21.1799H24.3701V18.8799H26.3001V21.1799Z"),attr(C,"class","i-char active svelte-s8yumu"),attr(C,"d","M31.3798 31.0699V33.7199H19.7598V31.0699H24.0098V25.2399H20.4798V22.5899H27.1498V31.0799H31.3798V31.0699ZM27.4298 20.9599H23.7498V17.6499H27.4298V20.9599Z"),attr(P,"class","underscore default svelte-s8yumu"),attr(P,"d","M13.8398 40.4902H36.3398"),attr(I,"class","underscore active svelte-s8yumu"),attr(I,"d","M14.3398 39.9902H36.8398"),attr(R,"class","square default svelte-s8yumu"),attr(R,"d","M51.24 2.5H0.5V49.87H51.24V2.5Z"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 52 52"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg"),attr(T,"class","svelte-s8yumu")},m(F,O){insert_hydration(F,T,O),append_hydration(T,E),append_hydration(T,C),append_hydration(T,P),append_hydration(T,I),append_hydration(T,R)},p:noop$1,i:noop$1,o:noop$1,d(F){F&&detach(T)}}}class InfoDefault extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$Q,safe_not_equal,{})}}function create_fragment$P(A){let T,E,C,P;return{c(){T=svg_element("svg"),E=svg_element("path"),C=svg_element("path"),P=svg_element("path"),this.h()},l(I){T=claim_svg_element(I,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var R=children$1(T);E=claim_svg_element(R,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0}),children$1(E).forEach(detach),C=claim_svg_element(R,"path",{d:!0,fill:!0}),children$1(C).forEach(detach),P=claim_svg_element(R,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0}),children$1(P).forEach(detach),R.forEach(detach),this.h()},h(){attr(E,"d","M51.24 2.5H0.5V49.87H51.24V2.5Z"),attr(E,"stroke","black"),attr(E,"stroke-miterlimit","10"),attr(C,"d","M30.8798 31.5699V34.2199H19.2598V31.5699H23.5098V25.7399H19.9798V23.0899H26.6498V31.5799H30.8798V31.5699ZM26.9298 21.4599H23.2498V18.1499H26.9298V21.4599Z"),attr(C,"fill","#8D95FB"),attr(P,"d","M13.8398 40.4902H36.3398"),attr(P,"stroke","#8D95FB"),attr(P,"stroke-miterlimit","10"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 52 52"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(I,R){insert_hydration(I,T,R),append_hydration(T,E),append_hydration(T,C),append_hydration(T,P)},p:noop$1,i:noop$1,o:noop$1,d(I){I&&detach(T)}}}class InfoActive extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$P,safe_not_equal,{})}}function create_fragment$O(A){let T,E,C,P;return{c(){T=svg_element("svg"),E=svg_element("path"),C=svg_element("path"),P=svg_element("path"),this.h()},l(I){T=claim_svg_element(I,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var R=children$1(T);E=claim_svg_element(R,"path",{d:!0,fill:!0}),children$1(E).forEach(detach),C=claim_svg_element(R,"path",{d:!0,fill:!0}),children$1(C).forEach(detach),P=claim_svg_element(R,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0}),children$1(P).forEach(detach),R.forEach(detach),this.h()},h(){attr(E,"d","M51.74 2H1V49.37H51.74V2Z"),attr(E,"fill","black"),attr(C,"d","M31.3798 31.0699V33.7199H19.7598V31.0699H24.0098V25.2399H20.4798V22.5899H27.1498V31.0799H31.3798V31.0699ZM27.4298 20.9599H23.7498V17.6499H27.4298V20.9599Z"),attr(C,"fill","#8D95FB"),attr(P,"d","M14.3398 39.9902H36.8398"),attr(P,"stroke","#8D95FB"),attr(P,"stroke-miterlimit","10"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 52 52"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(I,R){insert_hydration(I,T,R),append_hydration(T,E),append_hydration(T,C),append_hydration(T,P)},p:noop$1,i:noop$1,o:noop$1,d(I){I&&detach(T)}}}class InfoHover extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$O,safe_not_equal,{})}}function create_fragment$N(A){let T,E,C,P;return{c(){T=svg_element("svg"),E=svg_element("path"),C=svg_element("path"),P=svg_element("path"),this.h()},l(I){T=claim_svg_element(I,"svg",{width:!0,height:!0,viewBox:!0,xmlns:!0});var R=children$1(T);E=claim_svg_element(R,"path",{d:!0}),children$1(E).forEach(detach),C=claim_svg_element(R,"path",{"fill-rule":!0,"clip-rule":!0,d:!0}),children$1(C).forEach(detach),P=claim_svg_element(R,"path",{"fill-rule":!0,"clip-rule":!0,d:!0}),children$1(P).forEach(detach),R.forEach(detach),this.h()},h(){attr(E,"d","M8.64 18.9001C10.098 18.9001 11.28 17.7181 11.28 16.2601C11.28 14.8021 10.098 13.6201 8.64 13.6201C7.18197 13.6201 6 14.8021 6 16.2601C6 17.7181 7.18197 18.9001 8.64 18.9001Z"),attr(C,"fill-rule","evenodd"),attr(C,"clip-rule","evenodd"),attr(C,"d","M14.1173 6.71289C19.3879 11.9834 19.3879 20.5366 14.1173 25.8071L12.7031 24.3929C17.1926 19.9034 17.1926 12.6166 12.7031 8.1271L14.1173 6.71289Z"),attr(P,"fill-rule","evenodd"),attr(P,"clip-rule","evenodd"),attr(P,"d","M19.9171 1.00293C28.3477 9.43345 28.3477 23.0966 19.9171 31.5271L18.5029 30.1129C26.1524 22.4635 26.1524 10.0666 18.5029 2.41714L19.9171 1.00293Z"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 32 33"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(I,R){insert_hydration(I,T,R),append_hydration(T,E),append_hydration(T,C),append_hydration(T,P)},p:noop$1,i:noop$1,o:noop$1,d(I){I&&detach(T)}}}class Wireless extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$N,safe_not_equal,{})}}function create_fragment$M(A){let T,E;return{c(){T=svg_element("svg"),E=svg_element("path"),this.h()},l(C){T=claim_svg_element(C,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var P=children$1(T);E=claim_svg_element(P,"path",{d:!0,"stroke-linecap":!0}),children$1(E).forEach(detach),P.forEach(detach),this.h()},h(){attr(E,"d","M1.25 4.75C1.25 4.75 12.25 4.75 18.25 4.75C24.25 4.75 24.25 15.25 18.25 15.25C12.25 15.25 12.25 15.25 12.25 15.25M11.25 10.75L6.75 15L11.25 19.25"),attr(E,"stroke-linecap","round"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 24 24"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(C,P){insert_hydration(C,T,P),append_hydration(T,E)},p:noop$1,i:noop$1,o:noop$1,d(C){C&&detach(T)}}}class Return extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$M,safe_not_equal,{})}}function create_fragment$L(A){let T,E,C;return{c(){T=svg_element("svg"),E=svg_element("circle"),C=svg_element("path"),this.h()},l(P){T=claim_svg_element(P,"svg",{width:!0,height:!0,viewBox:!0,xmlns:!0});var I=children$1(T);E=claim_svg_element(I,"circle",{cx:!0,cy:!0,r:!0,fill:!0}),children$1(E).forEach(detach),C=claim_svg_element(I,"path",{d:!0,fill:!0}),children$1(C).forEach(detach),I.forEach(detach),this.h()},h(){attr(E,"cx","12"),attr(E,"cy","12"),attr(E,"r","12"),attr(E,"fill","black"),attr(C,"d","M10.9991 6L13.2134 6L18 18L15.4166 18L12.0727 8.36431L8.58341 18L6 18L10.9991 6Z"),attr(C,"fill","currentColor"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 24 24"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(P,I){insert_hydration(P,T,I),append_hydration(T,E),append_hydration(T,C)},p:noop$1,i:noop$1,o:noop$1,d(P){P&&detach(T)}}}class Collapse extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$L,safe_not_equal,{})}}function create_fragment$K(A){let T,E,C,P,I;return{c(){T=svg_element("svg"),E=svg_element("rect"),C=svg_element("g"),P=svg_element("path"),I=svg_element("polyline"),this.h()},l(R){T=claim_svg_element(R,"svg",{width:!0,height:!0,xmlns:!0,viewBox:!0});var F=children$1(T);E=claim_svg_element(F,"rect",{fill:!0,x:!0,y:!0,width:!0,height:!0,rx:!0,ry:!0}),children$1(E).forEach(detach),C=claim_svg_element(F,"g",{fill:!0,stroke:!0,"stroke-linecap":!0,"stroke-miterlimit":!0,"stroke-width":!0});var O=children$1(C);P=claim_svg_element(O,"path",{d:!0}),children$1(P).forEach(detach),I=claim_svg_element(O,"polyline",{points:!0}),children$1(I).forEach(detach),O.forEach(detach),F.forEach(detach),this.h()},h(){attr(E,"fill","var(--clr-black)"),attr(E,"x","0"),attr(E,"y","0"),attr(E,"width","91.42"),attr(E,"height","43.51"),attr(E,"rx","3.9"),attr(E,"ry","3.9"),attr(P,"d","m22.98,8.41h34.35c6.13,0,11.1,4.97,11.1,11.1h0c0,6.13-4.97,11.1-11.1,11.1h-11.63"),attr(I,"points","44.26 39.4 35.46 30.6 44.26 21.8"),attr(C,"fill","none"),attr(C,"stroke","var(--clr-white)"),attr(C,"stroke-linecap","round"),attr(C,"stroke-miterlimit","10"),attr(C,"stroke-width","2"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"xmlns","http://www.w3.org/2000/svg"),attr(T,"viewBox","0 0 91.42 43.51")},m(R,F){insert_hydration(R,T,F),append_hydration(T,E),append_hydration(T,C),append_hydration(C,P),append_hydration(C,I)},p:noop$1,i:noop$1,o:noop$1,d(R){R&&detach(T)}}}class ReturnBackground extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$K,safe_not_equal,{})}}function create_fragment$J(A){let T,E,C,P,I,R,F,O,D,L,B,V;return{c(){T=svg_element("svg"),E=svg_element("g"),C=svg_element("g"),P=svg_element("circle"),I=svg_element("circle"),R=svg_element("polyline"),F=svg_element("polyline"),O=svg_element("polyline"),D=svg_element("polyline"),L=svg_element("g"),B=svg_element("rect"),V=svg_element("rect"),this.h()},l(U){T=claim_svg_element(U,"svg",{width:!0,height:!0,xmlns:!0,viewBox:!0});var z=children$1(T);E=claim_svg_element(z,"g",{});var W=children$1(E);C=claim_svg_element(W,"g",{});var Z=children$1(C);P=claim_svg_element(Z,"circle",{class:!0,cx:!0,cy:!0,r:!0}),children$1(P).forEach(detach),I=claim_svg_element(Z,"circle",{class:!0,cx:!0,cy:!0,r:!0}),children$1(I).forEach(detach),R=claim_svg_element(Z,"polyline",{class:!0,points:!0}),children$1(R).forEach(detach),F=claim_svg_element(Z,"polyline",{class:!0,points:!0}),children$1(F).forEach(detach),O=claim_svg_element(Z,"polyline",{class:!0,points:!0}),children$1(O).forEach(detach),D=claim_svg_element(Z,"polyline",{class:!0,points:!0}),children$1(D).forEach(detach),L=claim_svg_element(Z,"g",{});var X=children$1(L);B=claim_svg_element(X,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,rx:!0,ry:!0}),children$1(B).forEach(detach),V=claim_svg_element(X,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0,rx:!0,ry:!0,transform:!0}),children$1(V).forEach(detach),X.forEach(detach),Z.forEach(detach),W.forEach(detach),z.forEach(detach),this.h()},h(){attr(P,"class","g svelte-tzmb8t"),attr(P,"cx","47.88"),attr(P,"cy","47.88"),attr(P,"r","46.55"),attr(I,"class","e svelte-tzmb8t"),attr(I,"cx","47.88"),attr(I,"cy","47.88"),attr(I,"r","38.83"),attr(R,"class","f svelte-tzmb8t"),attr(R,"points","40.57 74.54 47.88 81.85 55.19 74.54"),attr(F,"class","f svelte-tzmb8t"),attr(F,"points","21.22 40.57 13.91 47.88 21.22 55.19"),attr(O,"class","f svelte-tzmb8t"),attr(O,"points","55.19 21.22 47.88 13.91 40.57 21.22"),attr(D,"class","f svelte-tzmb8t"),attr(D,"points","74.54 55.19 81.85 47.88 74.54 40.57"),attr(B,"class","f svelte-tzmb8t"),attr(B,"x","37.28"),attr(B,"y","31.27"),attr(B,"width","21.2"),attr(B,"height","32.98"),attr(B,"rx","9.5"),attr(B,"ry","9.5"),attr(V,"class","d svelte-tzmb8t"),attr(V,"x","46.7"),attr(V,"y","40.11"),attr(V,"width","2.36"),attr(V,"height","5.89"),attr(V,"rx","1.18"),attr(V,"ry","1.18"),attr(V,"transform","translate(95.76 86.1) rotate(180)"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"xmlns","http://www.w3.org/2000/svg"),attr(T,"viewBox","0 0 95.76 95.76")},m(U,z){insert_hydration(U,T,z),append_hydration(T,E),append_hydration(E,C),append_hydration(C,P),append_hydration(C,I),append_hydration(C,R),append_hydration(C,F),append_hydration(C,O),append_hydration(C,D),append_hydration(C,L),append_hydration(L,B),append_hydration(L,V)},p:noop$1,i:noop$1,o:noop$1,d(U){U&&detach(T)}}}class MousePan extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$J,safe_not_equal,{})}}function create_fragment$I(A){let T,E,C,P,I,R,F,O,D,L,B,V,U;return{c(){T=svg_element("svg"),E=svg_element("g"),C=svg_element("g"),P=svg_element("circle"),I=svg_element("circle"),R=svg_element("g"),F=svg_element("line"),O=svg_element("polyline"),D=svg_element("g"),L=svg_element("line"),B=svg_element("polyline"),V=svg_element("path"),U=svg_element("line"),this.h()},l(z){T=claim_svg_element(z,"svg",{width:!0,height:!0,xmlns:!0,viewBox:!0});var W=children$1(T);E=claim_svg_element(W,"g",{});var Z=children$1(E);C=claim_svg_element(Z,"g",{});var X=children$1(C);P=claim_svg_element(X,"circle",{class:!0,cx:!0,cy:!0,r:!0}),children$1(P).forEach(detach),I=claim_svg_element(X,"circle",{class:!0,cx:!0,cy:!0,r:!0}),children$1(I).forEach(detach),R=claim_svg_element(X,"g",{});var K=children$1(R);F=claim_svg_element(K,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),children$1(F).forEach(detach),O=claim_svg_element(K,"polyline",{class:!0,points:!0}),children$1(O).forEach(detach),K.forEach(detach),D=claim_svg_element(X,"g",{});var Y=children$1(D);L=claim_svg_element(Y,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),children$1(L).forEach(detach),B=claim_svg_element(Y,"polyline",{class:!0,points:!0}),children$1(B).forEach(detach),Y.forEach(detach),V=claim_svg_element(X,"path",{class:!0,d:!0}),children$1(V).forEach(detach),U=claim_svg_element(X,"line",{class:!0,x1:!0,y1:!0,x2:!0,y2:!0}),children$1(U).forEach(detach),X.forEach(detach),Z.forEach(detach),W.forEach(detach),this.h()},h(){attr(P,"class","g svelte-kbzk64"),attr(P,"cx","47.88"),attr(P,"cy","47.88"),attr(P,"r","46.55"),attr(I,"class","d svelte-kbzk64"),attr(I,"cx","47.88"),attr(I,"cy","47.88"),attr(I,"r","38.83"),attr(F,"class","f svelte-kbzk64"),attr(F,"x1","52.97"),attr(F,"y1","17.38"),attr(F,"x2","63.4"),attr(F,"y2","20.74"),attr(O,"class","f svelte-kbzk64"),attr(O,"points","49.03 28.11 63.4 20.74 60.04 31.17"),attr(L,"class","f svelte-kbzk64"),attr(L,"x1","26.57"),attr(L,"y1","29.27"),attr(L,"x2","22.94"),attr(L,"y2","39.61"),attr(B,"class","f svelte-kbzk64"),attr(B,"points","37.5 32.62 22.94 39.61 33.28 43.24"),attr(V,"class","f svelte-kbzk64"),attr(V,"d","m67.64,71.5h0s1.04-3.24,1.04-3.24l2.12-6.58c.61-1.91-.2-4.08-2.03-4.88-2.11-.92-4.5.2-5.19,2.33.65-2.01-.46-4.17-2.47-4.82-2.01-.65-4.17.46-4.82,2.47.65-2.01-.46-4.17-2.47-4.82h0c-2.01-.65-4.17.46-4.82,2.47l5.81-18.06c.61-1.91-.2-4.08-2.03-4.88-2.11-.92-4.5.2-5.19,2.33l-8.06,25.06h0c-.34-2.84-.68-5.68-1.01-8.51-.27-2.43-2.58-4.14-5.04-3.62-2.14.46-3.48,2.61-3.23,4.78l1.6,14.37.24,2.02c.84,6.93,5.63,12.74,12.28,14.87l.77.25"),attr(U,"class","e svelte-kbzk64"),attr(U,"x1","39.53"),attr(U,"y1","58.88"),attr(U,"x2","38.59"),attr(U,"y2","61.81"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"xmlns","http://www.w3.org/2000/svg"),attr(T,"viewBox","0 0 95.76 95.76")},m(z,W){insert_hydration(z,T,W),append_hydration(T,E),append_hydration(E,C),append_hydration(C,P),append_hydration(C,I),append_hydration(C,R),append_hydration(R,F),append_hydration(R,O),append_hydration(C,D),append_hydration(D,L),append_hydration(D,B),append_hydration(C,V),append_hydration(C,U)},p:noop$1,i:noop$1,o:noop$1,d(z){z&&detach(T)}}}class Pinch extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$I,safe_not_equal,{})}}function create_fragment$H(A){let T,E,C,P;return{c(){T=svg_element("svg"),E=svg_element("path"),C=svg_element("path"),P=svg_element("path"),this.h()},l(I){T=claim_svg_element(I,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var R=children$1(T);E=claim_svg_element(R,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0}),children$1(E).forEach(detach),C=claim_svg_element(R,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0,"stroke-linecap":!0}),children$1(C).forEach(detach),P=claim_svg_element(R,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0,"stroke-linecap":!0}),children$1(P).forEach(detach),R.forEach(detach),this.h()},h(){attr(E,"d","M10.1 19.2C15.1258 19.2 19.2 15.1258 19.2 10.1C19.2 5.07421 15.1258 1 10.1 1C5.07421 1 1 5.07421 1 10.1C1 15.1258 5.07421 19.2 10.1 19.2Z"),attr(E,"stroke","currentColor"),attr(E,"stroke-miterlimit","10"),attr(C,"d","M5.7998 5.7998L14.3998 14.3998"),attr(C,"stroke","currentColor"),attr(C,"stroke-miterlimit","10"),attr(C,"stroke-linecap","round"),attr(P,"d","M14.3998 5.7998L5.7998 14.3998"),attr(P,"stroke","currentColor"),attr(P,"stroke-miterlimit","10"),attr(P,"stroke-linecap","round"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 20 20"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(I,R){insert_hydration(I,T,R),append_hydration(T,E),append_hydration(T,C),append_hydration(T,P)},p:noop$1,i:noop$1,o:noop$1,d(I){I&&detach(T)}}}class Close extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$H,safe_not_equal,{})}}function create_fragment$G(A){let T,E,C;return{c(){T=svg_element("svg"),E=svg_element("path"),C=svg_element("path"),this.h()},l(P){T=claim_svg_element(P,"svg",{width:!0,height:!0,viewBox:!0,fill:!0,xmlns:!0});var I=children$1(T);E=claim_svg_element(I,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0,"stroke-linecap":!0}),children$1(E).forEach(detach),C=claim_svg_element(I,"path",{d:!0,stroke:!0,"stroke-miterlimit":!0,"stroke-linecap":!0}),children$1(C).forEach(detach),I.forEach(detach),this.h()},h(){attr(E,"d","M5.7998 5.7998L14.3998 14.3998"),attr(E,"stroke","currentColor"),attr(E,"stroke-miterlimit","10"),attr(E,"stroke-linecap","round"),attr(C,"d","M14.3998 5.7998L5.7998 14.3998"),attr(C,"stroke","currentColor"),attr(C,"stroke-miterlimit","10"),attr(C,"stroke-linecap","round"),attr(T,"width","100%"),attr(T,"height","100%"),attr(T,"viewBox","0 0 20 20"),attr(T,"fill","none"),attr(T,"xmlns","http://www.w3.org/2000/svg")},m(P,I){insert_hydration(P,T,I),append_hydration(T,E),append_hydration(T,C)},p:noop$1,i:noop$1,o:noop$1,d(P){P&&detach(T)}}}class CloseX extends SvelteComponent{constructor(T){super(),init$2(this,T,null,create_fragment$G,safe_not_equal,{})}}function create_fragment$F(A){let T,E,C;var P=A[1][A[0]];function I(R,F){return{}}return P&&(E=construct_svelte_component(P,I())),{c(){T=element("div"),E&&create_component(E.$$.fragment),this.h()},l(R){T=claim_element(R,"DIV",{class:!0});var F=children$1(T);E&&claim_component(E.$$.fragment,F),F.forEach(detach),this.h()},h(){attr(T,"class","w-full h-full")},m(R,F){insert_hydration(R,T,F),E&&mount_component(E,T,null),C=!0},p(R,[F]){if(F&1&&P!==(P=R[1][R[0]])){if(E){group_outros();const O=E;transition_out(O.$$.fragment,1,0,()=>{destroy_component(O,1)}),check_outros()}P?(E=construct_svelte_component(P,I()),create_component(E.$$.fragment),transition_in(E.$$.fragment,1),mount_component(E,T,null)):E=null}},i(R){C||(E&&transition_in(E.$$.fragment,R),C=!0)},o(R){E&&transition_out(E.$$.fragment,R),C=!1},d(R){R&&detach(T),E&&destroy_component(E)}}}function instance$F(A,T,E){let{icon:C}=T;const P={designs:Designs,goals:Goals,industries:Industries,layouts:Layouts,period:Period,products:Products,block:BlockLayout,radial:RadialLayout,caret:Caret,play:Play,pause:Pause,wireless:Wireless,infoDefault:InfoDefault,infoActive:InfoActive,infoHover:InfoHover,return:Return,returnBackground:ReturnBackground,collapse:Collapse,mousePan:MousePan,pinch:Pinch,close:Close,closeX:CloseX};return A.$$set=I=>{"icon"in I&&E(0,C=I.icon)},[C,P]}class Icon extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$F,create_fragment$F,safe_not_equal,{icon:0})}}function create_if_block$c(A){let T,E,C;return E=new Icon({props:{icon:A[1]}}),{c(){T=element("div"),create_component(E.$$.fragment),this.h()},l(P){T=claim_element(P,"DIV",{class:!0});var I=children$1(T);claim_component(E.$$.fragment,I),I.forEach(detach),this.h()},h(){attr(T,"class","panel-item__icon svelte-1m03nv4")},m(P,I){insert_hydration(P,T,I),mount_component(E,T,null),C=!0},p(P,I){const R={};I&2&&(R.icon=P[1]),E.$set(R)},i(P){C||(transition_in(E.$$.fragment,P),C=!0)},o(P){transition_out(E.$$.fragment,P),C=!1},d(P){P&&detach(T),destroy_component(E)}}}function create_fragment$E(A){let T,E,C,P,I,R,F,O,D,L=A[1]&&create_if_block$c(A);const B=A[5].default,V=create_slot(B,A,A[4],null);return{c(){T=element("div"),E=element("div"),L&&L.c(),C=space(),P=element("h3"),I=text(A[0]),R=space(),F=element("div"),V&&V.c(),this.h()},l(U){T=claim_element(U,"DIV",{class:!0});var z=children$1(T);E=claim_element(z,"DIV",{class:!0});var W=children$1(E);L&&L.l(W),C=claim_space(W),P=claim_element(W,"H3",{class:!0});var Z=children$1(P);I=claim_text(Z,A[0]),Z.forEach(detach),R=claim_space(W),F=claim_element(W,"DIV",{class:!0});var X=children$1(F);V&&V.l(X),X.forEach(detach),W.forEach(detach),z.forEach(detach),this.h()},h(){attr(P,"class","panel-item__title text-xs svelte-1m03nv4"),attr(F,"class","panel-item__body svelte-1m03nv4"),attr(E,"class","panel-item svelte-1m03nv4"),attr(T,"class",O="panel-item-container w-full flex container "+A[2]+" "+A[3]+" svelte-1m03nv4")},m(U,z){insert_hydration(U,T,z),append_hydration(T,E),L&&L.m(E,null),append_hydration(E,C),append_hydration(E,P),append_hydration(P,I),append_hydration(E,R),append_hydration(E,F),V&&V.m(F,null),D=!0},p(U,[z]){U[1]?L?(L.p(U,z),z&2&&transition_in(L,1)):(L=create_if_block$c(U),L.c(),transition_in(L,1),L.m(E,C)):L&&(group_outros(),transition_out(L,1,1,()=>{L=null}),check_outros()),(!D||z&1)&&set_data(I,U[0]),V&&V.p&&(!D||z&16)&&update_slot_base(V,B,U,U[4],D?get_slot_changes(B,U[4],z,null):get_all_dirty_from_scope(U[4]),null),(!D||z&4&&O!==(O="panel-item-container w-full flex container "+U[2]+" "+U[3]+" svelte-1m03nv4"))&&attr(T,"class",O)},i(U){D||(transition_in(L),transition_in(V,U),D=!0)},o(U){transition_out(L),transition_out(V,U),D=!1},d(U){U&&detach(T),L&&L.d(),V&&V.d(U)}}}function instance$E(A,T,E){let{$$slots:C={},$$scope:P}=T,{title:I}=T,{icon:R=void 0}=T,{direction:F="column"}=T;const{theme:O}=getContext$1("item-theme");return A.$$set=D=>{"title"in D&&E(0,I=D.title),"icon"in D&&E(1,R=D.icon),"direction"in D&&E(2,F=D.direction),"$$scope"in D&&E(4,P=D.$$scope)},[I,R,F,O,P,C]}class PanelItem extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$E,create_fragment$E,safe_not_equal,{title:0,icon:1,direction:2})}}function create_if_block$b(A){let T,E,C,P,I,R,F=A[3]&&create_if_block_2$3(A),O=A[0]&&create_if_block_1$6(A);return{c(){T=svg_element("svg"),E=svg_element("g"),F&&F.c(),C=svg_element("circle"),P=svg_element("circle"),O&&O.c(),this.h()},l(D){T=claim_svg_element(D,"svg",{width:!0,height:!0,viewBox:!0,class:!0});var L=children$1(T);E=claim_svg_element(L,"g",{class:!0,transform:!0});var B=children$1(E);F&&F.l(B),C=claim_svg_element(B,"circle",{class:!0}),children$1(C).forEach(detach),P=claim_svg_element(B,"circle",{class:!0}),children$1(P).forEach(detach),O&&O.l(B),B.forEach(detach),L.forEach(detach),this.h()},h(){attr(C,"class","check__point svelte-11shla7"),attr(P,"class","check__main svelte-11shla7"),attr(E,"class","check"),attr(E,"transform",I="translate("+A[4]/2+", "+A[4]/2+")"),attr(T,"width",A[4]),attr(T,"height",A[4]),attr(T,"viewBox",R="0 0 "+A[4]+" "+A[4]),attr(T,"class","svelte-11shla7"),toggle_class(T,"active",A[0]),toggle_class(T,"hovered",!A[0]&&A[1]),toggle_class(T,"on-dark",A[2])},m(D,L){insert_hydration(D,T,L),append_hydration(T,E),F&&F.m(E,null),append_hydration(E,C),append_hydration(E,P),O&&O.m(E,null)},p(D,L){D[3]?F?F.p(D,L):(F=create_if_block_2$3(D),F.c(),F.m(E,C)):F&&(F.d(1),F=null),D[0]?O?O.p(D,L):(O=create_if_block_1$6(D),O.c(),O.m(E,null)):O&&(O.d(1),O=null),L&16&&I!==(I="translate("+D[4]/2+", "+D[4]/2+")")&&attr(E,"transform",I),L&16&&attr(T,"width",D[4]),L&16&&attr(T,"height",D[4]),L&16&&R!==(R="0 0 "+D[4]+" "+D[4])&&attr(T,"viewBox",R),L&1&&toggle_class(T,"active",D[0]),L&3&&toggle_class(T,"hovered",!D[0]&&D[1]),L&4&&toggle_class(T,"on-dark",D[2])},d(D){D&&detach(T),F&&F.d(),O&&O.d()}}}function create_if_block_2$3(A){let T;return{c(){T=svg_element("circle"),this.h()},l(E){T=claim_svg_element(E,"circle",{class:!0,fill:!0}),children$1(T).forEach(detach),this.h()},h(){attr(T,"class","check__goal svelte-11shla7"),attr(T,"fill",A[3])},m(E,C){insert_hydration(E,T,C)},p(E,C){C&8&&attr(T,"fill",E[3])},d(E){E&&detach(T)}}}function create_if_block_1$6(A){let T,E,C;return{c(){T=svg_element("line"),this.h()},l(P){T=claim_svg_element(P,"line",{class:!0,x1:!0,x2:!0,y1:!0,y2:!0}),children$1(T).forEach(detach),this.h()},h(){attr(T,"class","check__minus svelte-11shla7"),attr(T,"x1",E=-A[4]*.35),attr(T,"x2",C=A[4]*.35),attr(T,"y1","0"),attr(T,"y2","0")},m(P,I){insert_hydration(P,T,I)},p(P,I){I&16&&E!==(E=-P[4]*.35)&&attr(T,"x1",E),I&16&&C!==(C=P[4]*.35)&&attr(T,"x2",C)},d(P){P&&detach(T)}}}function create_fragment$D(A){let T,E,C=A[4]&&create_if_block$b(A);return{c(){T=element("div"),C&&C.c(),this.h()},l(P){T=claim_element(P,"DIV",{class:!0});var I=children$1(T);C&&C.l(I),I.forEach(detach),this.h()},h(){attr(T,"class","container check-icon svelte-11shla7"),add_render_callback(()=>A[5].call(T))},m(P,I){insert_hydration(P,T,I),C&&C.m(T,null),E=add_iframe_resize_listener(T,A[5].bind(T))},p(P,[I]){P[4]?C?C.p(P,I):(C=create_if_block$b(P),C.c(),C.m(T,null)):C&&(C.d(1),C=null)},i:noop$1,o:noop$1,d(P){P&&detach(T),C&&C.d(),E()}}}function instance$D(A,T,E){let{active:C=!1}=T,{hoveredFilter:P=!1}=T,{onDark:I=!1}=T,{backgroundColor:R=void 0}=T,F;function O(){F=this.clientWidth,E(4,F)}return A.$$set=D=>{"active"in D&&E(0,C=D.active),"hoveredFilter"in D&&E(1,P=D.hoveredFilter),"onDark"in D&&E(2,I=D.onDark),"backgroundColor"in D&&E(3,R=D.backgroundColor)},[C,P,I,R,F,O]}class CheckIcon extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$D,create_fragment$D,safe_not_equal,{active:0,hoveredFilter:1,onDark:2,backgroundColor:3})}}function get_each_context$7(A,T,E){const C=A.slice();C[9]=T[E].id,C[10]=T[E].alias;const P=C[0]===C[9];return C[11]=P,C}function create_each_block$7(A){let T,E,C,P,I,R,F,O,D,L,B,V,U=A[10]+"",z,W,Z,X,K,Y;P=new CheckIcon({props:{active:A[11],hoveredFilter:A[3]===A[9]}}),F=new Icon({props:{icon:A[9]}});function Q(){return A[7](A[9])}return X=init_binding_group(A[6][0]),{c(){T=element("li"),E=element("label"),C=element("div"),create_component(P.$$.fragment),I=space(),R=element("div"),create_component(F.$$.fragment),O=space(),D=element("div"),L=element("input"),B=space(),V=element("span"),z=text(U),W=space(),this.h()},l(J){T=claim_element(J,"LI",{class:!0});var te=children$1(T);E=claim_element(te,"LABEL",{class:!0});var ie=children$1(E);C=claim_element(ie,"DIV",{class:!0});var ne=children$1(C);claim_component(P.$$.fragment,ne),ne.forEach(detach),I=claim_space(ie),R=claim_element(ie,"DIV",{class:!0});var he=children$1(R);claim_component(F.$$.fragment,he),he.forEach(detach),O=claim_space(ie),D=claim_element(ie,"DIV",{class:!0});var ve=children$1(D);L=claim_element(ve,"INPUT",{type:!0,class:!0}),B=claim_space(ve),V=claim_element(ve,"SPAN",{});var ye=children$1(V);z=claim_text(ye,U),ye.forEach(detach),ve.forEach(detach),ie.forEach(detach),W=claim_space(te),te.forEach(detach),this.h()},h(){attr(C,"class","item__check svelte-1gcwn54"),attr(R,"class","item__icon svelte-1gcwn54"),attr(L,"type","radio"),L.__value=A[9],set_input_value(L,L.__value),L.disabled=A[1],attr(L,"class","svelte-1gcwn54"),attr(D,"class","item__label svelte-1gcwn54"),attr(E,"class","item text-xxs svelte-1gcwn54"),attr(T,"class","input-group__item"),toggle_class(T,"active",A[11]),X.p(L)},m(J,te){insert_hydration(J,T,te),append_hydration(T,E),append_hydration(E,C),mount_component(P,C,null),append_hydration(E,I),append_hydration(E,R),mount_component(F,R,null),append_hydration(E,O),append_hydration(E,D),append_hydration(D,L),L.checked=L.__value===A[0],append_hydration(D,B),append_hydration(D,V),append_hydration(V,z),append_hydration(T,W),Z=!0,K||(Y=[listen(L,"change",A[5]),listen(E,"mouseenter",Q),listen(E,"mouseleave",A[8])],K=!0)},p(J,te){A=J;const ie={};te&1&&(ie.active=A[11]),te&8&&(ie.hoveredFilter=A[3]===A[9]),P.$set(ie),(!Z||te&2)&&(L.disabled=A[1]),te&1&&(L.checked=L.__value===A[0]),(!Z||te&17)&&toggle_class(T,"active",A[11])},i(J){Z||(transition_in(P.$$.fragment,J),transition_in(F.$$.fragment,J),Z=!0)},o(J){transition_out(P.$$.fragment,J),transition_out(F.$$.fragment,J),Z=!1},d(J){J&&detach(T),destroy_component(P),destroy_component(F),X.r(),K=!1,run_all(Y)}}}function create_fragment$C(A){let T,E,C,P,I=ensure_array_like(A[4]),R=[];for(let O=0;O<I.length;O+=1)R[O]=create_each_block$7(get_each_context$7(A,I,O));const F=O=>transition_out(R[O],1,1,()=>{R[O]=null});return{c(){T=element("div"),E=element("ul");for(let O=0;O<R.length;O+=1)R[O].c();this.h()},l(O){T=claim_element(O,"DIV",{class:!0});var D=children$1(T);E=claim_element(D,"UL",{class:!0});var L=children$1(E);for(let B=0;B<R.length;B+=1)R[B].l(L);L.forEach(detach),D.forEach(detach),this.h()},h(){attr(E,"class","input-group svelte-1gcwn54"),attr(T,"class",C="container "+A[2]+" svelte-1gcwn54")},m(O,D){insert_hydration(O,T,D),append_hydration(T,E);for(let L=0;L<R.length;L+=1)R[L]&&R[L].m(E,null);P=!0},p(O,[D]){if(D&27){I=ensure_array_like(O[4]);let L;for(L=0;L<I.length;L+=1){const B=get_each_context$7(O,I,L);R[L]?(R[L].p(B,D),transition_in(R[L],1)):(R[L]=create_each_block$7(B),R[L].c(),transition_in(R[L],1),R[L].m(E,null))}for(group_outros(),L=I.length;L<R.length;L+=1)F(L);check_outros()}(!P||D&4&&C!==(C="container "+O[2]+" svelte-1gcwn54"))&&attr(T,"class",C)},i(O){if(!P){for(let D=0;D<I.length;D+=1)transition_in(R[D]);P=!0}},o(O){R=R.filter(Boolean);for(let D=0;D<R.length;D+=1)transition_out(R[D]);P=!1},d(O){O&&detach(T),destroy_each(R,O)}}}function instance$C(A,T,E){let C;component_subscribe(A,hoveredFilter,V=>E(3,C=V));let{selected:P=[]}=T,{disabled:I=!1}=T,{direction:R="column"}=T;const F=[{alias:"Block",id:"block"},{alias:"Radial",id:"radial"}],O=[[]];function D(){P=this.__value,E(0,P)}const L=V=>hoveredFilter.set(V),B=()=>hoveredFilter.set();return A.$$set=V=>{"selected"in V&&E(0,P=V.selected),"disabled"in V&&E(1,I=V.disabled),"direction"in V&&E(2,R=V.direction)},[P,I,R,C,F,D,O,L,B]}class InputGroupLayout extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$C,create_fragment$C,safe_not_equal,{selected:0,disabled:1,direction:2})}}function create_default_slot$c(A){let T,E,C;function P(R){A[5](R)}let I={direction:A[1],disabled:A[3]};return A[0]!==void 0&&(I.selected=A[0]),T=new InputGroupLayout({props:I}),binding_callbacks.push(()=>bind$2(T,"selected",P)),{c(){create_component(T.$$.fragment)},l(R){claim_component(T.$$.fragment,R)},m(R,F){mount_component(T,R,F),C=!0},p(R,F){const O={};F&2&&(O.direction=R[1]),F&8&&(O.disabled=R[3]),!E&&F&1&&(E=!0,O.selected=R[0],add_flush_callback(()=>E=!1)),T.$set(O)},i(R){C||(transition_in(T.$$.fragment,R),C=!0)},o(R){transition_out(T.$$.fragment,R),C=!1},d(R){destroy_component(T,R)}}}function create_fragment$B(A){let T,E;return T=new PanelItem({props:{icon:"layouts",title:A[2]("input.layout"),direction:A[1],$$slots:{default:[create_default_slot$c]},$$scope:{ctx:A}}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p(C,[P]){const I={};P&4&&(I.title=C[2]("input.layout")),P&2&&(I.direction=C[1]),P&75&&(I.$$scope={dirty:P,ctx:C}),T.$set(I)},i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function instance$B(A,T,E){let C,P;component_subscribe(A,$format,D=>E(2,C=D)),component_subscribe(A,isSwitchingLayout,D=>E(3,P=D));let{layout:I}=T,{direction:R="column"}=T,{theme:F="on-light"}=T;setContext$1("item-theme",{theme:F});function O(D){I=D,E(0,I)}return A.$$set=D=>{"layout"in D&&E(0,I=D.layout),"direction"in D&&E(1,R=D.direction),"theme"in D&&E(4,F=D.theme)},[I,R,C,P,F,O]}class InputLayout extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$B,create_fragment$B,safe_not_equal,{layout:0,direction:1,theme:4})}}function create_fragment$A(A){let T,E,C,P;const I=A[7].default,R=create_slot(I,A,A[6],null);return{c(){T=element("button"),R&&R.c(),this.h()},l(F){T=claim_element(F,"BUTTON",{class:!0});var O=children$1(T);R&&R.l(O),O.forEach(detach),this.h()},h(){attr(T,"class","clean-btn svelte-2whk0p"),T.disabled=A[1],set_style(T,"--clr-default",A[2]),set_style(T,"--clr-active",A[3]),set_style(T,"--clr-hover",A[4]),set_style(T,"--clr-disabled",A[5])},m(F,O){insert_hydration(F,T,O),R&&R.m(T,null),E=!0,C||(P=listen(T,"click",function(){is_function(A[0])&&A[0].apply(this,arguments)}),C=!0)},p(F,[O]){A=F,R&&R.p&&(!E||O&64)&&update_slot_base(R,I,A,A[6],E?get_slot_changes(I,A[6],O,null):get_all_dirty_from_scope(A[6]),null),(!E||O&2)&&(T.disabled=A[1]),O&4&&set_style(T,"--clr-default",A[2]),O&8&&set_style(T,"--clr-active",A[3]),O&16&&set_style(T,"--clr-hover",A[4]),O&32&&set_style(T,"--clr-disabled",A[5])},i(F){E||(transition_in(R,F),E=!0)},o(F){transition_out(R,F),E=!1},d(F){F&&detach(T),R&&R.d(F),C=!1,P()}}}function instance$A(A,T,E){let{$$slots:C={},$$scope:P}=T,{onClick:I}=T,{disabled:R=!1}=T,{colorDefault:F="var(--clr-accent)"}=T,{colorActive:O="var(--clr-white)"}=T,{colorHover:D="var(--clr-white)"}=T,{colorDisabled:L="var(--clr-gray)"}=T;return A.$$set=B=>{"onClick"in B&&E(0,I=B.onClick),"disabled"in B&&E(1,R=B.disabled),"colorDefault"in B&&E(2,F=B.colorDefault),"colorActive"in B&&E(3,O=B.colorActive),"colorHover"in B&&E(4,D=B.colorHover),"colorDisabled"in B&&E(5,L=B.colorDisabled),"$$scope"in B&&E(6,P=B.$$scope)},[I,R,F,O,D,L,P,C]}class Button extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$A,create_fragment$A,safe_not_equal,{onClick:0,disabled:1,colorDefault:2,colorActive:3,colorHover:4,colorDisabled:5})}}function fallback_block(A){let T,E=A[3]("input.unselect")+"",C;return{c(){T=element("span"),C=text(E),this.h()},l(P){T=claim_element(P,"SPAN",{class:!0});var I=children$1(T);C=claim_text(I,E),I.forEach(detach),this.h()},h(){attr(T,"class","font-inherit underline")},m(P,I){insert_hydration(P,T,I),append_hydration(T,C)},p(P,I){I&8&&E!==(E=P[3]("input.unselect")+"")&&set_data(C,E)},d(P){P&&detach(T)}}}function create_fragment$z(A){let T,E,C,P,I,R;const F=A[5].default,O=create_slot(F,A,A[4],null),D=O||fallback_block(A);return{c(){T=element("button"),E=element("p"),D&&D.c(),this.h()},l(L){T=claim_element(L,"BUTTON",{class:!0});var B=children$1(T);E=claim_element(B,"P",{class:!0});var V=children$1(E);D&&D.l(V),V.forEach(detach),B.forEach(detach),this.h()},h(){attr(E,"class",C="w-full text-left font-inherit text-nowrap text-xxs "+(A[2]?"uppercase":"")),attr(T,"class","clear-filter-button"),T.disabled=A[1]},m(L,B){insert_hydration(L,T,B),append_hydration(T,E),D&&D.m(E,null),P=!0,I||(R=listen(T,"click",function(){is_function(A[0])&&A[0].apply(this,arguments)}),I=!0)},p(L,[B]){A=L,O?O.p&&(!P||B&16)&&update_slot_base(O,F,A,A[4],P?get_slot_changes(F,A[4],B,null):get_all_dirty_from_scope(A[4]),null):D&&D.p&&(!P||B&8)&&D.p(A,P?B:-1),(!P||B&4&&C!==(C="w-full text-left font-inherit text-nowrap text-xxs "+(A[2]?"uppercase":"")))&&attr(E,"class",C),(!P||B&2)&&(T.disabled=A[1])},i(L){P||(transition_in(D,L),P=!0)},o(L){transition_out(D,L),P=!1},d(L){L&&detach(T),D&&D.d(L),I=!1,R()}}}function instance$z(A,T,E){let C;component_subscribe(A,$format,D=>E(3,C=D));let{$$slots:P={},$$scope:I}=T,{onClick:R}=T,{disabled:F}=T,{uppercase:O=!1}=T;return A.$$set=D=>{"onClick"in D&&E(0,R=D.onClick),"disabled"in D&&E(1,F=D.disabled),"uppercase"in D&&E(2,O=D.uppercase),"$$scope"in D&&E(4,I=D.$$scope)},[R,F,O,C,I,P]}class ClearFilterButton extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$z,create_fragment$z,safe_not_equal,{onClick:0,disabled:1,uppercase:2})}}function is_date(A){return Object.prototype.toString.call(A)==="[object Date]"}function cubicOut(A){const T=A-1;return T*T*T+1}function get_interpolator(A,T){if(A===T||A!==A)return()=>A;const E=typeof A;if(E!==typeof T||Array.isArray(A)!==Array.isArray(T))throw new Error("Cannot interpolate values of different type");if(Array.isArray(A)){const C=T.map((P,I)=>get_interpolator(A[I],P));return P=>C.map(I=>I(P))}if(E==="object"){if(!A||!T)throw new Error("Object cannot be null");if(is_date(A)&&is_date(T)){A=A.getTime(),T=T.getTime();const I=T-A;return R=>new Date(A+R*I)}const C=Object.keys(T),P={};return C.forEach(I=>{P[I]=get_interpolator(A[I],T[I])}),I=>{const R={};return C.forEach(F=>{R[F]=P[F](I)}),R}}if(E==="number"){const C=T-A;return P=>A+P*C}throw new Error(`Cannot interpolate ${E} values`)}function tweened(A,T={}){const E=writable$1(A);let C,P=A;function I(R,F){if(A==null)return E.set(A=R),Promise.resolve();P=R;let O=C,D=!1,{delay:L=0,duration:B=400,easing:V=identity$5,interpolate:U=get_interpolator}=assign$1(assign$1({},T),F);if(B===0)return O&&(O.abort(),O=null),E.set(A=P),Promise.resolve();const z=now$2()+L;let W;return C=loop(Z=>{if(Z<z)return!0;D||(W=U(A,R),typeof B=="function"&&(B=B(A,R)),D=!0),O&&(O.abort(),O=null);const X=Z-z;return X>B?(E.set(A=R),!1):(E.set(A=W(V(X/B))),!0)}),C.promise}return{set:I,update:(R,F)=>I(R(P,A),F),subscribe:E.subscribe}}function create_fragment$y(A){let T,E,C,P,I,R,F,O,D;return{c(){T=element("div"),E=svg_element("svg"),C=svg_element("line"),R=svg_element("line"),this.h()},l(L){T=claim_element(L,"DIV",{class:!0});var B=children$1(T);E=claim_svg_element(B,"svg",{class:!0});var V=children$1(E);C=claim_svg_element(V,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-dasharray":!0}),children$1(C).forEach(detach),R=claim_svg_element(V,"line",{x1:!0,x2:!0,y1:!0,y2:!0,stroke:!0,"stroke-width":!0}),children$1(R).forEach(detach),V.forEach(detach),B.forEach(detach),this.h()},h(){attr(C,"x1","0"),attr(C,"x2",A[0]),attr(C,"y1",P=A[1]/2),attr(C,"y2",I=A[1]/2),attr(C,"stroke","black"),attr(C,"stroke-dasharray","1 3"),attr(R,"x1","0"),attr(R,"x2",A[2]),attr(R,"y1",F=A[1]/2),attr(R,"y2",O=A[1]/2),attr(R,"stroke","var(--clr-accent)"),attr(R,"stroke-width","2"),attr(E,"class","svelte-1xji6c4"),attr(T,"class","bar-container svelte-1xji6c4"),add_render_callback(()=>A[9].call(T))},m(L,B){insert_hydration(L,T,B),append_hydration(T,E),append_hydration(E,C),append_hydration(E,R),D=add_iframe_resize_listener(T,A[9].bind(T))},p(L,[B]){B&1&&attr(C,"x2",L[0]),B&2&&P!==(P=L[1]/2)&&attr(C,"y1",P),B&2&&I!==(I=L[1]/2)&&attr(C,"y2",I),B&4&&attr(R,"x2",L[2]),B&2&&F!==(F=L[1]/2)&&attr(R,"y1",F),B&2&&O!==(O=L[1]/2)&&attr(R,"y2",O)},i:noop$1,o:noop$1,d(L){L&&detach(T),D()}}}function instance$y(A,T,E){let C,P,{i:I}=T,{number:R}=T,{domain:F=[0,1]}=T,{options:O={}}=T,D=0,L=0;const V={...{duration:1e3,delay:I*.05*1e3,easing:cubicInOut},...O},U=tweened(0,V);component_subscribe(A,U,W=>E(2,P=W));function z(){D=this.clientWidth,L=this.clientHeight,E(0,D),E(1,L)}return A.$$set=W=>{"i"in W&&E(4,I=W.i),"number"in W&&E(5,R=W.number),"domain"in W&&E(6,F=W.domain),"options"in W&&E(7,O=W.options)},A.$$.update=()=>{A.$$.dirty&65&&E(8,C=linear().domain(F).range([0,D])),A.$$.dirty&288&&set_store_value(U,P=C(R),P)},[D,L,P,U,I,R,F,O,C,z]}class BarTween extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$y,create_fragment$y,safe_not_equal,{i:4,number:5,domain:6,options:7})}}function create_fragment$x(A){let T,E=(A[0]?Math.round(A[1]*100)+"%":Math.round(A[1]))+"",C;return{c(){T=element("p"),C=text(E),this.h()},l(P){T=claim_element(P,"P",{class:!0});var I=children$1(T);C=claim_text(I,E),I.forEach(detach),this.h()},h(){attr(T,"class","text-xxs m-0")},m(P,I){insert_hydration(P,T,I),append_hydration(T,C)},p(P,[I]){I&3&&E!==(E=(P[0]?Math.round(P[1]*100)+"%":Math.round(P[1]))+"")&&set_data(C,E)},i:noop$1,o:noop$1,d(P){P&&detach(T)}}}function instance$x(A,T,E){let C,{number:P}=T,{isPct:I=!1}=T,{options:R={}}=T;const O={...{duration:500,easing:cubicInOut},...R},D=tweened(0,O);return component_subscribe(A,D,L=>E(1,C=L)),A.$$set=L=>{"number"in L&&E(3,P=L.number),"isPct"in L&&E(0,I=L.isPct),"options"in L&&E(4,R=L.options)},A.$$.update=()=>{A.$$.dirty&8&&set_store_value(D,C=P,C)},[I,C,D,P,R]}class NumberTween extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$x,create_fragment$x,safe_not_equal,{number:3,isPct:0,options:4})}}function get_each_context$6(A,T,E){const C=A.slice();C[18]=T[E].id,C[19]=T[E].pctNodes,C[22]=E;const P=C[2]?C[0].includes(C[18]):C[0]===C[18];return C[20]=P,C}function create_else_block$5(A){let T,E,C=!1,P,I,R;return P=init_binding_group(A[13][0]),{c(){T=element("input"),this.h()},l(F){T=claim_element(F,"INPUT",{type:!0,class:!0}),this.h()},h(){attr(T,"type","radio"),T.__value=E=A[18],set_input_value(T,T.__value),T.disabled=A[4],attr(T,"class","svelte-7uq28"),P.p(T)},m(F,O){insert_hydration(F,T,O),T.checked=T.__value===A[0],I||(R=listen(T,"change",A[14]),I=!0)},p(F,O){O&2&&E!==(E=F[18])&&(T.__value=E,set_input_value(T,T.__value),C=!0),O&16&&(T.disabled=F[4]),(C||O&3)&&(T.checked=T.__value===F[0])},d(F){F&&detach(T),P.r(),I=!1,R()}}}function create_if_block_2$2(A){let T,E,C=!1,P,I,R;return P=init_binding_group(A[13][0]),{c(){T=element("input"),this.h()},l(F){T=claim_element(F,"INPUT",{type:!0,class:!0}),this.h()},h(){attr(T,"type","checkbox"),T.__value=E=A[18],set_input_value(T,T.__value),T.disabled=A[4],attr(T,"class","svelte-7uq28"),P.p(T)},m(F,O){insert_hydration(F,T,O),T.checked=~(A[0]||[]).indexOf(T.__value),I||(R=listen(T,"change",A[12]),I=!0)},p(F,O){O&2&&E!==(E=F[18])&&(T.__value=E,set_input_value(T,T.__value),C=!0),O&16&&(T.disabled=F[4]),(C||O&3)&&(T.checked=~(F[0]||[]).indexOf(T.__value))},d(F){F&&detach(T),P.r(),I=!1,R()}}}function create_if_block_1$5(A){let T,E,C,P,I,R;return E=new BarTween({props:{i:A[22],number:A[19]}}),I=new NumberTween({props:{number:A[19],isPct:!0}}),{c(){T=element("div"),create_component(E.$$.fragment),C=space(),P=element("div"),create_component(I.$$.fragment),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);claim_component(E.$$.fragment,O),O.forEach(detach),C=claim_space(F),P=claim_element(F,"DIV",{class:!0});var D=children$1(P);claim_component(I.$$.fragment,D),D.forEach(detach),this.h()},h(){attr(T,"class","item__bar svelte-7uq28"),attr(P,"class","item__number svelte-7uq28")},m(F,O){insert_hydration(F,T,O),mount_component(E,T,null),insert_hydration(F,C,O),insert_hydration(F,P,O),mount_component(I,P,null),R=!0},p(F,O){const D={};O&2&&(D.number=F[19]),E.$set(D);const L={};O&2&&(L.number=F[19]),I.$set(L)},i(F){R||(transition_in(E.$$.fragment,F),transition_in(I.$$.fragment,F),R=!0)},o(F){transition_out(E.$$.fragment,F),transition_out(I.$$.fragment,F),R=!1},d(F){F&&(detach(T),detach(C),detach(P)),destroy_component(E),destroy_component(I)}}}function create_each_block$6(A){let T,E,C,P,I,R,F,O,D=A[10](A[6]+A[18])+"",L,B,V,U,z;P=new CheckIcon({props:{onDark:A[5]||A[11]==="on-dark",active:A[20],hoveredFilter:A[9]===A[18]}});function W(Q,J){return Q[2]?create_if_block_2$2:create_else_block$5}let Z=W(A),X=Z(A),K=A[7]==="design"&&create_if_block_1$5(A);function Y(){return A[15](A[18])}return{c(){T=element("li"),E=element("label"),C=element("div"),create_component(P.$$.fragment),I=space(),R=element("div"),X.c(),F=space(),O=element("span"),L=text(D),B=space(),K&&K.c(),this.h()},l(Q){T=claim_element(Q,"LI",{class:!0});var J=children$1(T);E=claim_element(J,"LABEL",{class:!0});var te=children$1(E);C=claim_element(te,"DIV",{class:!0});var ie=children$1(C);claim_component(P.$$.fragment,ie),ie.forEach(detach),I=claim_space(te),R=claim_element(te,"DIV",{class:!0});var ne=children$1(R);X.l(ne),F=claim_space(ne),O=claim_element(ne,"SPAN",{class:!0});var he=children$1(O);L=claim_text(he,D),he.forEach(detach),ne.forEach(detach),B=claim_space(te),K&&K.l(te),te.forEach(detach),J.forEach(detach),this.h()},h(){attr(C,"class","item__check svelte-7uq28"),attr(O,"class","svelte-7uq28"),toggle_class(O,"on-dark",A[5]),attr(R,"class","item__label svelte-7uq28"),attr(E,"class","item text-xxs svelte-7uq28"),attr(T,"class","input-group__item"),toggle_class(T,"active",A[20])},m(Q,J){insert_hydration(Q,T,J),append_hydration(T,E),append_hydration(E,C),mount_component(P,C,null),append_hydration(E,I),append_hydration(E,R),X.m(R,null),append_hydration(R,F),append_hydration(R,O),append_hydration(O,L),append_hydration(E,B),K&&K.m(E,null),V=!0,U||(z=[listen(E,"mouseenter",Y),listen(E,"mouseleave",A[16])],U=!0)},p(Q,J){A=Q;const te={};J&32&&(te.onDark=A[5]||A[11]==="on-dark"),J&7&&(te.active=A[20]),J&514&&(te.hoveredFilter=A[9]===A[18]),P.$set(te),Z===(Z=W(A))&&X?X.p(A,J):(X.d(1),X=Z(A),X&&(X.c(),X.m(R,F))),(!V||J&1090)&&D!==(D=A[10](A[6]+A[18])+"")&&set_data(L,D),(!V||J&32)&&toggle_class(O,"on-dark",A[5]),A[7]==="design"?K?(K.p(A,J),J&128&&transition_in(K,1)):(K=create_if_block_1$5(A),K.c(),transition_in(K,1),K.m(E,null)):K&&(group_outros(),transition_out(K,1,1,()=>{K=null}),check_outros()),(!V||J&7)&&toggle_class(T,"active",A[20])},i(Q){V||(transition_in(P.$$.fragment,Q),transition_in(K),V=!0)},o(Q){transition_out(P.$$.fragment,Q),transition_out(K),V=!1},d(Q){Q&&detach(T),destroy_component(P),X.d(),K&&K.d(),U=!1,run_all(z)}}}function create_if_block$a(A){let T,E,C;return E=new ClearFilterButton({props:{onClick:A[17],disabled:A[0].length===0}}),{c(){T=element("li"),create_component(E.$$.fragment),this.h()},l(P){T=claim_element(P,"LI",{class:!0});var I=children$1(T);claim_component(E.$$.fragment,I),I.forEach(detach),this.h()},h(){attr(T,"class","input-group__unselect-btn svelte-7uq28")},m(P,I){insert_hydration(P,T,I),mount_component(E,T,null),C=!0},p(P,I){const R={};I&1&&(R.onClick=P[17]),I&1&&(R.disabled=P[0].length===0),E.$set(R)},i(P){C||(transition_in(E.$$.fragment,P),C=!0)},o(P){transition_out(E.$$.fragment,P),C=!1},d(P){P&&detach(T),destroy_component(E)}}}function create_fragment$w(A){let T,E,C,P,I,R=ensure_array_like(A[1]),F=[];for(let L=0;L<R.length;L+=1)F[L]=create_each_block$6(get_each_context$6(A,R,L));const O=L=>transition_out(F[L],1,1,()=>{F[L]=null});let D=A[3]&&create_if_block$a(A);return{c(){T=element("div"),E=element("ul");for(let L=0;L<F.length;L+=1)F[L].c();C=space(),D&&D.c(),this.h()},l(L){T=claim_element(L,"DIV",{class:!0});var B=children$1(T);E=claim_element(B,"UL",{class:!0});var V=children$1(E);for(let U=0;U<F.length;U+=1)F[U].l(V);C=claim_space(V),D&&D.l(V),V.forEach(detach),B.forEach(detach),this.h()},h(){attr(E,"class","input-group svelte-7uq28"),attr(T,"class",P="container "+A[7]+" "+A[8]+" "+A[11]+" svelte-7uq28")},m(L,B){insert_hydration(L,T,B),append_hydration(T,E);for(let V=0;V<F.length;V+=1)F[V]&&F[V].m(E,null);append_hydration(E,C),D&&D.m(E,null),I=!0},p(L,[B]){if(B&3831){R=ensure_array_like(L[1]);let V;for(V=0;V<R.length;V+=1){const U=get_each_context$6(L,R,V);F[V]?(F[V].p(U,B),transition_in(F[V],1)):(F[V]=create_each_block$6(U),F[V].c(),transition_in(F[V],1),F[V].m(E,C))}for(group_outros(),V=R.length;V<F.length;V+=1)O(V);check_outros()}L[3]?D?(D.p(L,B),B&8&&transition_in(D,1)):(D=create_if_block$a(L),D.c(),transition_in(D,1),D.m(E,null)):D&&(group_outros(),transition_out(D,1,1,()=>{D=null}),check_outros()),(!I||B&384&&P!==(P="container "+L[7]+" "+L[8]+" "+L[11]+" svelte-7uq28"))&&attr(T,"class",P)},i(L){if(!I){for(let B=0;B<R.length;B+=1)transition_in(F[B]);transition_in(D),I=!0}},o(L){F=F.filter(Boolean);for(let B=0;B<F.length;B+=1)transition_out(F[B]);transition_out(D),I=!1},d(L){L&&detach(T),destroy_each(F,L),D&&D.d()}}}function instance$w(A,T,E){let C,P;component_subscribe(A,hoveredFilter,J=>E(9,C=J)),component_subscribe(A,$format,J=>E(10,P=J));let{categories:I}=T,{selected:R=[]}=T,{multiselect:F=!0}=T,{unselectBtn:O=F}=T,{disabled:D=!1}=T,{onDark:L=!1}=T,{i18nPrefix:B=""}=T,{gridlayout:V="simple"}=T,{direction:U="row"}=T;const{theme:z}=getContext$1("item-theme"),W=[[]];function Z(){R=get_binding_group_value(W[0],this.__value,this.checked),E(0,R)}function X(){R=this.__value,E(0,R)}const K=J=>set_store_value(hoveredFilter,C=J,C),Y=()=>set_store_value(hoveredFilter,C=void 0,C),Q=()=>E(0,R=[]);return A.$$set=J=>{"categories"in J&&E(1,I=J.categories),"selected"in J&&E(0,R=J.selected),"multiselect"in J&&E(2,F=J.multiselect),"unselectBtn"in J&&E(3,O=J.unselectBtn),"disabled"in J&&E(4,D=J.disabled),"onDark"in J&&E(5,L=J.onDark),"i18nPrefix"in J&&E(6,B=J.i18nPrefix),"gridlayout"in J&&E(7,V=J.gridlayout),"direction"in J&&E(8,U=J.direction)},[R,I,F,O,D,L,B,V,U,C,P,z,Z,W,X,K,Y,Q]}class InputGroup extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$w,create_fragment$w,safe_not_equal,{categories:1,selected:0,multiselect:2,unselectBtn:3,disabled:4,onDark:5,i18nPrefix:6,gridlayout:7,direction:8})}}function create_default_slot$b(A){let T,E,C;function P(R){A[5](R)}let I={gridlayout:"design",categories:A[1].filter(func$2),direction:"column",i18nPrefix:"category.",disabled:A[2]};return A[3]!==void 0&&(I.selected=A[3]),T=new InputGroup({props:I}),binding_callbacks.push(()=>bind$2(T,"selected",P)),{c(){create_component(T.$$.fragment)},l(R){claim_component(T.$$.fragment,R)},m(R,F){mount_component(T,R,F),C=!0},p(R,F){const O={};F&2&&(O.categories=R[1].filter(func$2)),F&4&&(O.disabled=R[2]),!E&&F&8&&(E=!0,O.selected=R[3],add_flush_callback(()=>E=!1)),T.$set(O)},i(R){C||(transition_in(T.$$.fragment,R),C=!0)},o(R){transition_out(T.$$.fragment,R),C=!1},d(R){destroy_component(T,R)}}}function create_fragment$v(A){let T,E;return T=new PanelItem({props:{icon:"designs",title:A[0]("input.design"),$$slots:{default:[create_default_slot$b]},$$scope:{ctx:A}}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p(C,[P]){const I={};P&1&&(I.title=C[0]("input.design")),P&78&&(I.$$scope={dirty:P,ctx:C}),T.$set(I)},i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}const func$2=A=>A.type==="design";function instance$v(A,T,E){let C,P,I,R;component_subscribe(A,$format,D=>E(0,C=D)),component_subscribe(A,categoriesEnriched,D=>E(1,P=D)),component_subscribe(A,isSwitchingLayout,D=>E(2,I=D)),component_subscribe(A,fdesigns,D=>E(3,R=D));let{theme:F="on-light"}=T;setContext$1("item-theme",{theme:F});function O(D){R=D,fdesigns.set(R)}return A.$$set=D=>{"theme"in D&&E(4,F=D.theme)},[C,P,I,R,F,O]}class InputDesign extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$v,create_fragment$v,safe_not_equal,{theme:4})}}function get_each_context$5(A,T,E){const C=A.slice();C[22]=T[E],C[26]=E;const P=C[6](C[22]);C[23]=P;const I=C[26]===1&&C[5][0]===C[0];return C[24]=I,C}function get_each_context_1(A,T,E){const C=A.slice();C[22]=T[E];const P=C[6](C[22])+C[9].left;return C[23]=P,C}function create_each_block_1(A){let T,E=A[22]+"",C,P,I=`${A[23]}px`;return{c(){T=element("p"),C=text(E),P=space(),this.h()},l(R){T=claim_element(R,"P",{class:!0});var F=children$1(T);C=claim_text(F,E),P=claim_space(F),F.forEach(detach),this.h()},h(){attr(T,"class","label text-xxs svelte-u3fm5r"),set_style(T,"left",I)},m(R,F){insert_hydration(R,T,F),append_hydration(T,C),append_hydration(T,P)},p(R,F){F&32&&E!==(E=R[22]+"")&&set_data(C,E),F&96&&I!==(I=`${R[23]}px`)&&set_style(T,"left",I)},d(R){R&&detach(T)}}}function create_each_block$5(A){let T,E,C,P,I,R,F,O,D;return{c(){T=svg_element("g"),E=svg_element("circle"),C=svg_element("circle"),I=svg_element("rect"),this.h()},l(L){T=claim_svg_element(L,"g",{class:!0,transform:!0,"data-index":!0});var B=children$1(T);E=claim_svg_element(B,"circle",{class:!0,r:!0}),children$1(E).forEach(detach),C=claim_svg_element(B,"circle",{class:!0,r:!0}),children$1(C).forEach(detach),I=claim_svg_element(B,"rect",{class:!0,x:!0,y:!0,width:!0,height:!0}),children$1(I).forEach(detach),B.forEach(detach),this.h()},h(){attr(E,"class","outer-circle svelte-u3fm5r"),attr(E,"r",A[7]),attr(C,"class","inner-circle svelte-u3fm5r"),attr(C,"r",P=A[7]/4),attr(I,"class","hover-box svelte-u3fm5r"),attr(I,"x",R=-A[6].step()/2),attr(I,"y",F=-A[3]/2),attr(I,"width",O=A[6].step()),attr(I,"height",A[3]),attr(T,"class","handler svelte-u3fm5r"),attr(T,"transform",D="translate("+A[23]+", 0)"),attr(T,"data-index",A[26]),toggle_class(T,"unclickable",A[24]),set_style(T,"cursor","pointer")},m(L,B){insert_hydration(L,T,B),append_hydration(T,E),append_hydration(T,C),append_hydration(T,I)},p(L,B){B&128&&attr(E,"r",L[7]),B&128&&P!==(P=L[7]/4)&&attr(C,"r",P),B&64&&R!==(R=-L[6].step()/2)&&attr(I,"x",R),B&8&&F!==(F=-L[3]/2)&&attr(I,"y",F),B&64&&O!==(O=L[6].step())&&attr(I,"width",O),B&8&&attr(I,"height",L[3]),B&96&&D!==(D="translate("+L[23]+", 0)")&&attr(T,"transform",D),B&33&&toggle_class(T,"unclickable",L[24])},d(L){L&&detach(T)}}}function create_fragment$u(A){let T,E,C,P,I,R,F,O,D,L,B,V,U,z,W=ensure_array_like(A[5]),Z=[];for(let Y=0;Y<W.length;Y+=1)Z[Y]=create_each_block_1(get_each_context_1(A,W,Y));let X=ensure_array_like(A[5]),K=[];for(let Y=0;Y<X.length;Y+=1)K[Y]=create_each_block$5(get_each_context$5(A,X,Y));return{c(){T=element("div"),E=element("ul");for(let Y=0;Y<Z.length;Y+=1)Z[Y].c();C=space(),P=element("div"),I=svg_element("svg"),R=svg_element("g"),F=svg_element("g"),O=svg_element("line"),D=svg_element("line"),V=svg_element("g");for(let Y=0;Y<K.length;Y+=1)K[Y].c();this.h()},l(Y){T=claim_element(Y,"DIV",{class:!0});var Q=children$1(T);E=claim_element(Q,"UL",{class:!0});var J=children$1(E);for(let ye=0;ye<Z.length;ye+=1)Z[ye].l(J);J.forEach(detach),C=claim_space(Q),P=claim_element(Q,"DIV",{class:!0});var te=children$1(P);I=claim_svg_element(te,"svg",{class:!0});var ie=children$1(I);R=claim_svg_element(ie,"g",{transform:!0});var ne=children$1(R);F=claim_svg_element(ne,"g",{class:!0});var he=children$1(F);O=claim_svg_element(he,"line",{class:!0,x1:!0,x2:!0}),children$1(O).forEach(detach),D=claim_svg_element(he,"line",{class:!0,x1:!0,x2:!0}),children$1(D).forEach(detach),he.forEach(detach),V=claim_svg_element(ne,"g",{class:!0});var ve=children$1(V);for(let ye=0;ye<K.length;ye+=1)K[ye].l(ve);ve.forEach(detach),ne.forEach(detach),ie.forEach(detach),te.forEach(detach),Q.forEach(detach),this.h()},h(){attr(E,"class","labels svelte-u3fm5r"),attr(O,"class","line-back svelte-u3fm5r"),attr(O,"x1","0"),attr(O,"x2",A[4]),attr(D,"class","line-front svelte-u3fm5r"),attr(D,"x1",L=A[6](A[5][0])),attr(D,"x2",B=A[6](A[5][1])),attr(F,"class","slider__lines svelte-u3fm5r"),attr(V,"class","slider__handlers"),attr(R,"transform",U="translate("+A[9].left+", "+A[3]/2+")"),attr(I,"class","slider svelte-u3fm5r"),attr(P,"class","slider-container svelte-u3fm5r"),add_render_callback(()=>A[16].call(P)),attr(T,"class","container "+A[8]+" svelte-u3fm5r")},m(Y,Q){insert_hydration(Y,T,Q),append_hydration(T,E);for(let J=0;J<Z.length;J+=1)Z[J]&&Z[J].m(E,null);append_hydration(T,C),append_hydration(T,P),append_hydration(P,I),append_hydration(I,R),append_hydration(R,F),append_hydration(F,O),append_hydration(F,D),append_hydration(R,V);for(let J=0;J<K.length;J+=1)K[J]&&K[J].m(V,null);A[15](I),z=add_iframe_resize_listener(P,A[16].bind(P))},p(Y,[Q]){if(Q&608){W=ensure_array_like(Y[5]);let J;for(J=0;J<W.length;J+=1){const te=get_each_context_1(Y,W,J);Z[J]?Z[J].p(te,Q):(Z[J]=create_each_block_1(te),Z[J].c(),Z[J].m(E,null))}for(;J<Z.length;J+=1)Z[J].d(1);Z.length=W.length}if(Q&16&&attr(O,"x2",Y[4]),Q&96&&L!==(L=Y[6](Y[5][0]))&&attr(D,"x1",L),Q&96&&B!==(B=Y[6](Y[5][1]))&&attr(D,"x2",B),Q&233){X=ensure_array_like(Y[5]);let J;for(J=0;J<X.length;J+=1){const te=get_each_context$5(Y,X,J);K[J]?K[J].p(te,Q):(K[J]=create_each_block$5(te),K[J].c(),K[J].m(V,null))}for(;J<K.length;J+=1)K[J].d(1);K.length=X.length}Q&8&&U!==(U="translate("+Y[9].left+", "+Y[3]/2+")")&&attr(R,"transform",U)},i:noop$1,o:noop$1,d(Y){Y&&detach(T),destroy_each(Z,Y),destroy_each(K,Y),A[15](null),z()}}}function instance$u(A,T,E){let C,P,I,R,{min:F}=T,{max:O}=T,{step:D=1}=T,{selected:L=[F,O]}=T,{disabled:B}=T;const V=[F,O],{theme:U}=getContext$1("item-theme");let z,W=100,Z=100,X=!1;const K={left:8,right:8},Y=range$2(F,O+D,D);function Q(he){if(B)return;const ve=+this.getAttribute("data-index"),ye=R(he.x);ve===0?E(5,V[ve]=Math.min(ye,V[1]),V):E(5,V[ve]=Math.max(ye,V[0]),V)}function J(){B||(document.body.style.cursor="pointer")}function te(){document.body.style.cursor="default",!B&&E(10,L=V)}function ie(he){binding_callbacks[he?"unshift":"push"](()=>{z=he,E(1,z)})}function ne(){W=this.clientWidth,Z=this.clientHeight,E(2,W),E(3,Z)}return A.$$set=he=>{"min"in he&&E(11,F=he.min),"max"in he&&E(0,O=he.max),"step"in he&&E(12,D=he.step),"selected"in he&&E(10,L=he.selected),"disabled"in he&&E(13,B=he.disabled)},A.$$.update=()=>{if(A.$$.dirty&8&&E(7,C=Z/4),A.$$.dirty&4&&E(4,P=W-(K.left+K.right)),A.$$.dirty&16&&E(6,I=point().domain(Y).range([0,P])),A.$$.dirty&16&&(R=quantize().domain([0,P]).range(Y)),A.$$.dirty&16386&&z&&!X){const he=drag().on("start",J).on("drag",Q).on("end",te);select(z).selectAll(".slider__handlers > .handler").call(he),E(14,X=!0)}A.$$.dirty&1024&&(E(5,V[0]=L[0],V),E(5,V[1]=L[1],V))},[O,z,W,Z,P,V,I,C,U,K,L,F,D,B,X,ie,ne]}class YearSliderPicker extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$u,create_fragment$u,safe_not_equal,{min:11,max:0,step:12,selected:10,disabled:13})}}function create_default_slot$a(A){let T,E,C;function P(R){A[4](R)}let I={disabled:A[1],min:2014,max:2023};return A[2]!==void 0&&(I.selected=A[2]),T=new YearSliderPicker({props:I}),binding_callbacks.push(()=>bind$2(T,"selected",P)),{c(){create_component(T.$$.fragment)},l(R){claim_component(T.$$.fragment,R)},m(R,F){mount_component(T,R,F),C=!0},p(R,F){const O={};F&2&&(O.disabled=R[1]),!E&&F&4&&(E=!0,O.selected=R[2],add_flush_callback(()=>E=!1)),T.$set(O)},i(R){C||(transition_in(T.$$.fragment,R),C=!0)},o(R){transition_out(T.$$.fragment,R),C=!1},d(R){destroy_component(T,R)}}}function create_fragment$t(A){let T,E;return T=new PanelItem({props:{icon:"period",title:A[0]("input.period"),$$slots:{default:[create_default_slot$a]},$$scope:{ctx:A}}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p(C,[P]){const I={};P&1&&(I.title=C[0]("input.period")),P&38&&(I.$$scope={dirty:P,ctx:C}),T.$set(I)},i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function instance$t(A,T,E){let C,P,I;component_subscribe(A,$format,O=>E(0,C=O)),component_subscribe(A,isSwitchingLayout,O=>E(1,P=O)),component_subscribe(A,fyears,O=>E(2,I=O));let{theme:R="on-light"}=T;setContext$1("item-theme",{theme:R});function F(O){I=O,fyears.set(I)}return A.$$set=O=>{"theme"in O&&E(3,R=O.theme)},[C,P,I,R,F]}class InputPeriod extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$t,create_fragment$t,safe_not_equal,{theme:3})}}function get_each_context$4(A,T,E){const C=A.slice();C[13]=T[E].id,C[14]=T[E].data;const P=C[0].includes(C[13]);return C[15]=P,C}function create_each_block$4(A){let T,E,C,P,I,R,F,O,D=!1,L,B,V=A[6]("category."+A[13])+"",U,z,W,Z,X;P=new CheckIcon({props:{active:A[15],hoveredFilter:A[5]===A[13],backgroundColor:A[14].color}});function K(){return A[10](A[13])}return W=init_binding_group(A[9][0]),{c(){T=element("li"),E=element("label"),C=element("div"),create_component(P.$$.fragment),I=space(),R=element("div"),F=element("input"),L=space(),B=element("span"),U=text(V),this.h()},l(Y){T=claim_element(Y,"LI",{class:!0});var Q=children$1(T);E=claim_element(Q,"LABEL",{class:!0});var J=children$1(E);C=claim_element(J,"DIV",{class:!0});var te=children$1(C);claim_component(P.$$.fragment,te),te.forEach(detach),I=claim_space(J),R=claim_element(J,"DIV",{class:!0});var ie=children$1(R);F=claim_element(ie,"INPUT",{type:!0,class:!0}),L=claim_space(ie),B=claim_element(ie,"SPAN",{class:!0});var ne=children$1(B);U=claim_text(ne,V),ne.forEach(detach),ie.forEach(detach),J.forEach(detach),Q.forEach(detach),this.h()},h(){attr(C,"class","item__check svelte-1knrbk"),attr(F,"type","checkbox"),F.__value=O=A[13],set_input_value(F,F.__value),F.disabled=A[2],attr(F,"class","svelte-1knrbk"),attr(B,"class","svelte-1knrbk"),attr(R,"class","item__label svelte-1knrbk"),attr(E,"class","item text-xxs svelte-1knrbk"),attr(T,"class","input-group__item"),toggle_class(T,"active",A[15]),W.p(F)},m(Y,Q){insert_hydration(Y,T,Q),append_hydration(T,E),append_hydration(E,C),mount_component(P,C,null),append_hydration(E,I),append_hydration(E,R),append_hydration(R,F),F.checked=~(A[0]||[]).indexOf(F.__value),append_hydration(R,L),append_hydration(R,B),append_hydration(B,U),z=!0,Z||(X=[listen(F,"change",A[8]),listen(E,"mouseenter",K),listen(E,"mouseleave",A[11])],Z=!0)},p(Y,Q){A=Y;const J={};Q&3&&(J.active=A[15]),Q&34&&(J.hoveredFilter=A[5]===A[13]),Q&2&&(J.backgroundColor=A[14].color),P.$set(J),(!z||Q&2&&O!==(O=A[13]))&&(F.__value=O,set_input_value(F,F.__value),D=!0),(!z||Q&4)&&(F.disabled=A[2]),(D||Q&3)&&(F.checked=~(A[0]||[]).indexOf(F.__value)),(!z||Q&66)&&V!==(V=A[6]("category."+A[13])+"")&&set_data(U,V),(!z||Q&3)&&toggle_class(T,"active",A[15])},i(Y){z||(transition_in(P.$$.fragment,Y),z=!0)},o(Y){transition_out(P.$$.fragment,Y),z=!1},d(Y){Y&&detach(T),destroy_component(P),W.r(),Z=!1,run_all(X)}}}function create_fragment$s(A){let T,E,C,P,I,R,F=ensure_array_like(A[1]),O=[];for(let L=0;L<F.length;L+=1)O[L]=create_each_block$4(get_each_context$4(A,F,L));const D=L=>transition_out(O[L],1,1,()=>{O[L]=null});return I=new ClearFilterButton({props:{onClick:A[12],disabled:A[0].length===0}}),{c(){T=element("div"),E=element("ul");for(let L=0;L<O.length;L+=1)O[L].c();C=space(),P=element("li"),create_component(I.$$.fragment),this.h()},l(L){T=claim_element(L,"DIV",{class:!0});var B=children$1(T);E=claim_element(B,"UL",{class:!0});var V=children$1(E);for(let z=0;z<O.length;z+=1)O[z].l(V);C=claim_space(V),P=claim_element(V,"LI",{class:!0});var U=children$1(P);claim_component(I.$$.fragment,U),U.forEach(detach),V.forEach(detach),B.forEach(detach),this.h()},h(){attr(P,"class","input-group__unselect-btn"),attr(E,"class","input-group svelte-1knrbk"),set_style(E,"--n-columns",A[3]),set_style(E,"--items-by-column",A[4]),attr(T,"class","container "+A[7]+" svelte-1knrbk")},m(L,B){insert_hydration(L,T,B),append_hydration(T,E);for(let V=0;V<O.length;V+=1)O[V]&&O[V].m(E,null);append_hydration(E,C),append_hydration(E,P),mount_component(I,P,null),R=!0},p(L,[B]){if(B&103){F=ensure_array_like(L[1]);let U;for(U=0;U<F.length;U+=1){const z=get_each_context$4(L,F,U);O[U]?(O[U].p(z,B),transition_in(O[U],1)):(O[U]=create_each_block$4(z),O[U].c(),transition_in(O[U],1),O[U].m(E,C))}for(group_outros(),U=F.length;U<O.length;U+=1)D(U);check_outros()}const V={};B&1&&(V.onClick=L[12]),B&1&&(V.disabled=L[0].length===0),I.$set(V),B&8&&set_style(E,"--n-columns",L[3]),B&16&&set_style(E,"--items-by-column",L[4])},i(L){if(!R){for(let B=0;B<F.length;B+=1)transition_in(O[B]);transition_in(I.$$.fragment,L),R=!0}},o(L){O=O.filter(Boolean);for(let B=0;B<O.length;B+=1)transition_out(O[B]);transition_out(I.$$.fragment,L),R=!1},d(L){L&&detach(T),destroy_each(O,L),destroy_component(I)}}}function instance$s(A,T,E){let C,P,I;component_subscribe(A,hoveredFilter,Z=>E(5,P=Z)),component_subscribe(A,$format,Z=>E(6,I=Z));let{categories:R}=T,{selected:F=[]}=T,{disabled:O=!1}=T,{nColumns:D=1}=T;const{theme:L}=getContext$1("item-theme"),B=[[]];function V(){F=get_binding_group_value(B[0],this.__value,this.checked),E(0,F)}const U=Z=>hoveredFilter.set(Z),z=()=>hoveredFilter.set(),W=()=>E(0,F=[]);return A.$$set=Z=>{"categories"in Z&&E(1,R=Z.categories),"selected"in Z&&E(0,F=Z.selected),"disabled"in Z&&E(2,O=Z.disabled),"nColumns"in Z&&E(3,D=Z.nColumns)},A.$$.update=()=>{A.$$.dirty&10&&E(4,C=Math.ceil((R.length+1)/D))},[F,R,O,D,C,P,I,L,V,B,U,z,W]}class InputGroupGoal extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$s,create_fragment$s,safe_not_equal,{categories:1,selected:0,disabled:2,nColumns:3})}}function create_default_slot$9(A){let T,E,C;function P(R){A[6](R)}let I={categories:A[2].filter(func$1),disabled:A[3],nColumns:A[0]};return A[4]!==void 0&&(I.selected=A[4]),T=new InputGroupGoal({props:I}),binding_callbacks.push(()=>bind$2(T,"selected",P)),{c(){create_component(T.$$.fragment)},l(R){claim_component(T.$$.fragment,R)},m(R,F){mount_component(T,R,F),C=!0},p(R,F){const O={};F&4&&(O.categories=R[2].filter(func$1)),F&8&&(O.disabled=R[3]),F&1&&(O.nColumns=R[0]),!E&&F&16&&(E=!0,O.selected=R[4],add_flush_callback(()=>E=!1)),T.$set(O)},i(R){C||(transition_in(T.$$.fragment,R),C=!0)},o(R){transition_out(T.$$.fragment,R),C=!1},d(R){destroy_component(T,R)}}}function create_fragment$r(A){let T,E;return T=new PanelItem({props:{icon:"goals",title:A[1]("input.goal"),$$slots:{default:[create_default_slot$9]},$$scope:{ctx:A}}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p(C,[P]){const I={};P&2&&(I.title=C[1]("input.goal")),P&157&&(I.$$scope={dirty:P,ctx:C}),T.$set(I)},i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}const func$1=A=>A.type==="goal";function instance$r(A,T,E){let C,P,I,R;component_subscribe(A,$format,L=>E(1,C=L)),component_subscribe(A,categoriesEnriched,L=>E(2,P=L)),component_subscribe(A,isSwitchingLayout,L=>E(3,I=L)),component_subscribe(A,fgoals,L=>E(4,R=L));let{nColumns:F=1}=T,{theme:O="on-light"}=T;setContext$1("item-theme",{theme:O});function D(L){R=L,fgoals.set(R)}return A.$$set=L=>{"nColumns"in L&&E(0,F=L.nColumns),"theme"in L&&E(5,O=L.theme)},[F,C,P,I,R,O,D]}class InputGoal extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$r,create_fragment$r,safe_not_equal,{nColumns:0,theme:5})}}function castContainer(A,{context:T,parent:E=get_store_value(app).stage,hasMask:C=!1,destroy:P=!0,centered:I=!0,propagateOpacity:R=!1}={}){if(!T)return;E.addChild(T);let F;C&&(F=new Graphics$1,F.name="cast-container-mask",T.mask=F,T.addChild(F));const O=get_store_value(app).ticker.add(D);function D(){const L=A.getBoundingClientRect();let B=0,V=0;I&&(B+=L.width/2,V+=L.height/2);const U=L.x-E.x+B,z=L.y-E.y+V;if(T.x=U,T.y=z,R){let W=A;_.isString(R)?W=document.querySelector(R):_.isBoolean(R)||(W=R),T.alpha=window.getComputedStyle(W).opacity}C&&(F.clear(),F.beginFill(0),F.drawRect(-B,-V,L.width,L.height),F.endFill())}return{destroy:()=>{P&&(O.remove(D),T.destroy({children:!0}),C&&F.destroy())}}}function create_fragment$q(A){let T;const E=A[5].default,C=create_slot(E,A,A[4],null);return{c(){C&&C.c()},l(P){C&&C.l(P)},m(P,I){C&&C.m(P,I),T=!0},p(P,[I]){C&&C.p&&(!T||I&16)&&update_slot_base(C,E,P,P[4],T?get_slot_changes(E,P[4],I,null):get_all_dirty_from_scope(P[4]),null)},i(P){T||(transition_in(C,P),T=!0)},o(P){transition_out(C,P),T=!1},d(P){C&&C.d(P)}}}function instance$q(A,T,E){let{$$slots:C={},$$scope:P}=T,{context:I}=T,{drawFunc:R=void 0}=T,{alpha:F=1}=T,{blendmode:O="NORMAL"}=T;const D=new Graphics$1;return D.alpha=F,D.blendMode=BLEND_MODES[O],R&&R(D),I.addChild(D),setContext$1("graphics",D),A.$$set=L=>{"context"in L&&E(0,I=L.context),"drawFunc"in L&&E(1,R=L.drawFunc),"alpha"in L&&E(2,F=L.alpha),"blendmode"in L&&E(3,O=L.blendmode),"$$scope"in L&&E(4,P=L.$$scope)},[I,R,F,O,P,C]}class Graphics extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$q,create_fragment$q,safe_not_equal,{context:0,drawFunc:1,alpha:2,blendmode:3})}}function instance$p(A,T,E){let C;component_subscribe(A,app,B=>E(2,C=B));let{i:P}=T,{r:I}=T;const R=getContext$1("graphics"),F={r:I},O={duration:1,delay:P*.05,ease:cubicInOut};function D(){R.clear(),R.beginFill(14475006),R.drawCircle(0,0,F.r),R.endFill()}const L=C.ticker.add(D);return onDestroy(()=>{L.remove(D)}),A.$$set=B=>{"i"in B&&E(0,P=B.i),"r"in B&&E(1,I=B.r)},A.$$.update=()=>{A.$$.dirty&2&&gsapWithCSS.to(F,{r:I,...O})},[P,I]}class Bubble extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$p,null,safe_not_equal,{i:0,r:1})}}function get_each_context$3(A,T,E){const C=A.slice();C[15]=T[E].id,C[16]=T[E].nNodes,C[19]=E;const P=C[0].includes(C[15]);return C[17]=P,C}function get_if_ctx(A){const T=A.slice(),E=new Container;T[20]=E;const C=T[16]/(3*20)*T[7];return T[21]=C,T}function create_if_block$9(A){let T,E,C,P,I,R,F,O;return E=new Graphics({props:{context:A[20],blendmode:"MULTIPLY",alpha:".9",$$slots:{default:[create_default_slot$8]},$$scope:{ctx:A}}}),P=new Graphics({props:{context:A[20],drawFunc:templates[A[15]]}}),{c(){T=element("div"),create_component(E.$$.fragment),C=space(),create_component(P.$$.fragment),this.h()},l(D){T=claim_element(D,"DIV",{class:!0});var L=children$1(T);claim_component(E.$$.fragment,L),C=claim_space(L),claim_component(P.$$.fragment,L),L.forEach(detach),this.h()},h(){attr(T,"class","item__bubble svelte-1wcac7d")},m(D,L){insert_hydration(D,T,L),mount_component(E,T,null),append_hydration(T,C),mount_component(P,T,null),R=!0,F||(O=action_destroyer(I=castContainer.call(null,T,{parent:A[4],context:A[20]})),F=!0)},p(D,L){A=D;const B={};L&4194434&&(B.$$scope={dirty:L,ctx:A}),E.$set(B);const V={};L&2&&(V.drawFunc=templates[A[15]]),P.$set(V),I&&is_function(I.update)&&L&16&&I.update.call(null,{parent:A[4],context:A[20]})},i(D){R||(transition_in(E.$$.fragment,D),transition_in(P.$$.fragment,D),R=!0)},o(D){transition_out(E.$$.fragment,D),transition_out(P.$$.fragment,D),R=!1},d(D){D&&detach(T),destroy_component(E),destroy_component(P),F=!1,O()}}}function create_default_slot$8(A){let T,E;return T=new Bubble({props:{i:A[19],r:A[21]}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p(C,P){const I={};P&130&&(I.r=C[21]),T.$set(I)},i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function create_each_block$3(A){let T,E,C,P,I,R,F,O,D,L=!1,B,V,U=A[8]("category."+A[15])+"",z,W,Z,X,K;P=new CheckIcon({props:{onDark:A[9]==="on-dark",active:A[17],hoveredFilter:A[6]===A[15]}});let Y=A[4]!==void 0&&create_if_block$9(get_if_ctx(A));function Q(){return A[12](A[15])}return Z=init_binding_group(A[11][0]),{c(){T=element("li"),E=element("label"),C=element("div"),create_component(P.$$.fragment),I=space(),Y&&Y.c(),R=space(),F=element("div"),O=element("input"),B=space(),V=element("p"),z=text(U),this.h()},l(J){T=claim_element(J,"LI",{class:!0});var te=children$1(T);E=claim_element(te,"LABEL",{class:!0});var ie=children$1(E);C=claim_element(ie,"DIV",{class:!0});var ne=children$1(C);claim_component(P.$$.fragment,ne),ne.forEach(detach),I=claim_space(ie),Y&&Y.l(ie),R=claim_space(ie),F=claim_element(ie,"DIV",{class:!0});var he=children$1(F);O=claim_element(he,"INPUT",{type:!0,class:!0}),B=claim_space(he),V=claim_element(he,"P",{class:!0});var ve=children$1(V);z=claim_text(ve,U),ve.forEach(detach),he.forEach(detach),ie.forEach(detach),te.forEach(detach),this.h()},h(){attr(C,"class","item__check svelte-1wcac7d"),attr(O,"type","checkbox"),O.__value=D=A[15],set_input_value(O,O.__value),O.disabled=A[2],attr(O,"class","svelte-1wcac7d"),attr(V,"class","text-xxs svelte-1wcac7d"),attr(F,"class","item__label svelte-1wcac7d"),attr(E,"class","item svelte-1wcac7d"),attr(T,"class","input-group__item"),toggle_class(T,"active",A[17]),Z.p(O)},m(J,te){insert_hydration(J,T,te),append_hydration(T,E),append_hydration(E,C),mount_component(P,C,null),append_hydration(E,I),Y&&Y.m(E,null),append_hydration(E,R),append_hydration(E,F),append_hydration(F,O),O.checked=~(A[0]||[]).indexOf(O.__value),append_hydration(F,B),append_hydration(F,V),append_hydration(V,z),W=!0,X||(K=[listen(O,"change",A[10]),listen(E,"mouseenter",Q),listen(E,"mouseleave",A[13])],X=!0)},p(J,te){A=J;const ie={};te&3&&(ie.active=A[17]),te&66&&(ie.hoveredFilter=A[6]===A[15]),P.$set(ie),A[4]!==void 0?Y?(Y.p(get_if_ctx(A),te),te&16&&transition_in(Y,1)):(Y=create_if_block$9(get_if_ctx(A)),Y.c(),transition_in(Y,1),Y.m(E,R)):Y&&(group_outros(),transition_out(Y,1,1,()=>{Y=null}),check_outros()),(!W||te&2&&D!==(D=A[15]))&&(O.__value=D,set_input_value(O,O.__value),L=!0),(!W||te&4)&&(O.disabled=A[2]),(L||te&3)&&(O.checked=~(A[0]||[]).indexOf(O.__value)),(!W||te&258)&&U!==(U=A[8]("category."+A[15])+"")&&set_data(z,U),(!W||te&3)&&toggle_class(T,"active",A[17])},i(J){W||(transition_in(P.$$.fragment,J),transition_in(Y),W=!0)},o(J){transition_out(P.$$.fragment,J),transition_out(Y),W=!1},d(J){J&&detach(T),destroy_component(P),Y&&Y.d(),Z.r(),X=!1,run_all(K)}}}function create_fragment$p(A){let T,E,C,P,I,R,F=ensure_array_like(A[1]),O=[];for(let L=0;L<F.length;L+=1)O[L]=create_each_block$3(get_each_context$3(A,F,L));const D=L=>transition_out(O[L],1,1,()=>{O[L]=null});return I=new ClearFilterButton({props:{onClick:A[14],disabled:A[0].length===0}}),{c(){T=element("div"),E=element("ul");for(let L=0;L<O.length;L+=1)O[L].c();C=space(),P=element("li"),create_component(I.$$.fragment),this.h()},l(L){T=claim_element(L,"DIV",{class:!0});var B=children$1(T);E=claim_element(B,"UL",{class:!0});var V=children$1(E);for(let z=0;z<O.length;z+=1)O[z].l(V);C=claim_space(V),P=claim_element(V,"LI",{class:!0});var U=children$1(P);claim_component(I.$$.fragment,U),U.forEach(detach),V.forEach(detach),B.forEach(detach),this.h()},h(){attr(P,"class","input-group__unselect-btn svelte-1wcac7d"),attr(E,"class","input-group svelte-1wcac7d"),set_style(E,"--n-columns",A[3]),set_style(E,"--items-by-column",A[5]),attr(T,"class","container "+A[9]+" svelte-1wcac7d"),toggle_class(T,"bubble",!!A[4])},m(L,B){insert_hydration(L,T,B),append_hydration(T,E);for(let V=0;V<O.length;V+=1)O[V]&&O[V].m(E,null);append_hydration(E,C),append_hydration(E,P),mount_component(I,P,null),R=!0},p(L,[B]){if(B&983){F=ensure_array_like(L[1]);let U;for(U=0;U<F.length;U+=1){const z=get_each_context$3(L,F,U);O[U]?(O[U].p(z,B),transition_in(O[U],1)):(O[U]=create_each_block$3(z),O[U].c(),transition_in(O[U],1),O[U].m(E,C))}for(group_outros(),U=F.length;U<O.length;U+=1)D(U);check_outros()}const V={};B&1&&(V.onClick=L[14]),B&1&&(V.disabled=L[0].length===0),I.$set(V),B&8&&set_style(E,"--n-columns",L[3]),B&32&&set_style(E,"--items-by-column",L[5]),(!R||B&16)&&toggle_class(T,"bubble",!!L[4])},i(L){if(!R){for(let B=0;B<F.length;B+=1)transition_in(O[B]);transition_in(I.$$.fragment,L),R=!0}},o(L){O=O.filter(Boolean);for(let B=0;B<O.length;B+=1)transition_out(O[B]);transition_out(I.$$.fragment,L),R=!1},d(L){L&&detach(T),destroy_each(O,L),destroy_component(I)}}}function instance$o(A,T,E){let C,P,I,R;component_subscribe(A,hoveredFilter,K=>E(6,P=K)),component_subscribe(A,nodeSize,K=>E(7,I=K)),component_subscribe(A,$format,K=>E(8,R=K));const{theme:F}=getContext$1("item-theme");let{categories:O}=T,{selected:D=[]}=T,{disabled:L=!1}=T,{nColumns:B=1}=T,{parent:V=void 0}=T;const U=[[]];function z(){D=get_binding_group_value(U[0],this.__value,this.checked),E(0,D)}const W=K=>hoveredFilter.set(K),Z=()=>hoveredFilter.set(),X=()=>E(0,D=[]);return A.$$set=K=>{"categories"in K&&E(1,O=K.categories),"selected"in K&&E(0,D=K.selected),"disabled"in K&&E(2,L=K.disabled),"nColumns"in K&&E(3,B=K.nColumns),"parent"in K&&E(4,V=K.parent)},A.$$.update=()=>{A.$$.dirty&10&&E(5,C=Math.ceil((O.length+1)/B))},[D,O,L,B,V,C,P,I,R,F,z,U,W,Z,X]}class InputGroupProduct extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$o,create_fragment$p,safe_not_equal,{categories:1,selected:0,disabled:2,nColumns:3,parent:4})}}function create_default_slot$7(A){let T,E,C;function P(R){A[7](R)}let I={parent:A[0],categories:A[3].filter(func),disabled:A[4],nColumns:A[1]};return A[5]!==void 0&&(I.selected=A[5]),T=new InputGroupProduct({props:I}),binding_callbacks.push(()=>bind$2(T,"selected",P)),{c(){create_component(T.$$.fragment)},l(R){claim_component(T.$$.fragment,R)},m(R,F){mount_component(T,R,F),C=!0},p(R,F){const O={};F&1&&(O.parent=R[0]),F&8&&(O.categories=R[3].filter(func)),F&16&&(O.disabled=R[4]),F&2&&(O.nColumns=R[1]),!E&&F&32&&(E=!0,O.selected=R[5],add_flush_callback(()=>E=!1)),T.$set(O)},i(R){C||(transition_in(T.$$.fragment,R),C=!0)},o(R){transition_out(T.$$.fragment,R),C=!1},d(R){destroy_component(T,R)}}}function create_fragment$o(A){let T,E;return T=new PanelItem({props:{icon:"products",title:A[2]("input.product"),$$slots:{default:[create_default_slot$7]},$$scope:{ctx:A}}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p(C,[P]){const I={};P&4&&(I.title=C[2]("input.product")),P&315&&(I.$$scope={dirty:P,ctx:C}),T.$set(I)},i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}const func=A=>A.type==="product";function instance$n(A,T,E){let C,P,I,R;component_subscribe(A,$format,B=>E(2,C=B)),component_subscribe(A,categoriesEnriched,B=>E(3,P=B)),component_subscribe(A,isSwitchingLayout,B=>E(4,I=B)),component_subscribe(A,fproducts,B=>E(5,R=B));let{parent:F=void 0}=T,{nColumns:O=1}=T,{theme:D="on-light"}=T;setContext$1("item-theme",{theme:D});function L(B){R=B,fproducts.set(R)}return A.$$set=B=>{"parent"in B&&E(0,F=B.parent),"nColumns"in B&&E(1,O=B.nColumns),"theme"in B&&E(6,D=B.theme)},[F,O,C,P,I,R,D,L]}class InputProduct extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$n,create_fragment$o,safe_not_equal,{parent:0,nColumns:1,theme:6})}}function random(){return"".concat(Math.random().toString(36),"00000000000000000").replace(/[^a-z]+/g,"").slice(0,5)}function circles(){var A=20,T="",E=2,C=!1,P="#343434",I="#343434",R=0,F=random(),O=function(L){var B=L.append("defs").append("pattern").attr("id",F).attr("patternUnits","userSpaceOnUse").attr("width",A).attr("height",A);if(T&&B.append("rect").attr("width",A).attr("height",A).attr("fill",T),B.append("circle").attr("cx",A/2).attr("cy",A/2).attr("r",E).attr("fill",P).attr("stroke",I).attr("stroke-width",R),C)for(var V=0,U=[[0,0],[0,A],[A,0],[A,A]];V<U.length;V++){var z=U[V];B.append("circle").attr("cx",z[0]).attr("cy",z[1]).attr("r",E).attr("fill",P).attr("stroke",I).attr("stroke-width",R)}};return O.heavier=function(D){return E*=arguments.length===0?2:2*D,O},O.lighter=function(D){return E/=arguments.length===0?2:2*D,O},O.thinner=function(D){return A*=arguments.length===0?2:2*D,O},O.thicker=function(D){return A/=arguments.length===0?2:2*D,O},O.background=function(D){return T=D,O},O.size=function(D){return A=D,O},O.complement=function(D){return C=arguments.length===0?!0:D,O},O.radius=function(D){return E=D,O},O.fill=function(D){return P=D,O},O.stroke=function(D){return I=D,O},O.strokeWidth=function(D){return R=D,O},O.id=function(D){return arguments.length===0?F:(F=D,O)},O.url=function(){return"url(#".concat(F,")")},O}function _unsupportedIterableToArray(A,T){if(A){if(typeof A=="string")return _arrayLikeToArray(A,T);var E=Object.prototype.toString.call(A).slice(8,-1);if(E==="Object"&&A.constructor&&(E=A.constructor.name),E==="Map"||E==="Set")return Array.from(A);if(E==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(E))return _arrayLikeToArray(A,T)}}function _arrayLikeToArray(A,T){(T==null||T>A.length)&&(T=A.length);for(var E=0,C=new Array(T);E<T;E++)C[E]=A[E];return C}function _createForOfIteratorHelper(A,T){var E;if(typeof Symbol>"u"||A[Symbol.iterator]==null){if(Array.isArray(A)||(E=_unsupportedIterableToArray(A))||T){E&&(A=E);var C=0,P=function(){};return{s:P,n:function(){return C>=A.length?{done:!0}:{done:!1,value:A[C++]}},e:function(O){throw O},f:P}}throw new TypeError(`Invalid attempt to iterate non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var I=!0,R=!1,F;return{s:function(){E=A[Symbol.iterator]()},n:function(){var O=E.next();return I=O.done,O},e:function(O){R=!0,F=O},f:function(){try{!I&&E.return!=null&&E.return()}finally{if(R)throw F}}}}function lines(){var A=20,T="#343434",E=2,C="",P=random(),I=["diagonal"],R="auto",F=function(L){var B=A;switch(L){case"0/8":case"vertical":return"M ".concat(B/2,", 0 l 0, ").concat(B);case"1/8":return"M ".concat(-B/4,",").concat(B," l ").concat(B/2,",").concat(-B," M ").concat(B/4,",").concat(B," l ").concat(B/2,",").concat(-B," M ").concat(B*3/4,",").concat(B," l ").concat(B/2,",").concat(-B);case"2/8":case"diagonal":return"M 0,".concat(B," l ").concat(B,",").concat(-B," M ").concat(-B/4,",").concat(B/4," l ").concat(B/2,",").concat(-B/2," M ").concat(3/4*B,",").concat(5/4*B," l ").concat(B/2,",").concat(-B/2);case"3/8":return"M 0,".concat(3/4*B," l ").concat(B,",").concat(-B/2," M 0,").concat(B/4," l ").concat(B,",").concat(-B/2," M 0,").concat(B*5/4," l ").concat(B,",").concat(-B/2);case"4/8":case"horizontal":return"M 0,".concat(B/2," l ").concat(B,",0");case"5/8":return"M 0,".concat(-B/4," l ").concat(B,",").concat(B/2,"M 0,").concat(B/4," l ").concat(B,",").concat(B/2," M 0,").concat(B*3/4," l ").concat(B,",").concat(B/2);case"6/8":return"M 0,0 l ".concat(B,",").concat(B," M ").concat(-B/4,",").concat(3/4*B," l ").concat(B/2,",").concat(B/2," M ").concat(B*3/4,",").concat(-B/4," l ").concat(B/2,",").concat(B/2);case"7/8":return"M ".concat(-B/4,",0 l ").concat(B/2,",").concat(B," M ").concat(B/4,",0 l ").concat(B/2,",").concat(B," M ").concat(B*3/4,",0 l ").concat(B/2,",").concat(B);default:return"M ".concat(B/2,", 0 l 0, ").concat(B)}},O=function(L){var B=L.append("defs").append("pattern").attr("id",P).attr("patternUnits","userSpaceOnUse").attr("width",A).attr("height",A);C&&B.append("rect").attr("width",A).attr("height",A).attr("fill",C);var V=_createForOfIteratorHelper(I),U;try{for(V.s();!(U=V.n()).done;){var z=U.value;B.append("path").attr("d",F(z)).attr("stroke-width",E).attr("shape-rendering",R).attr("stroke",T).attr("stroke-linecap","square")}}catch(W){V.e(W)}finally{V.f()}};return O.heavier=function(D){return E*=arguments.length===0?2:2*D,O},O.lighter=function(D){return E/=arguments.length===0?2:2*D,O},O.thinner=function(D){return A*=arguments.length===0?2:2*D,O},O.thicker=function(D){return A/=arguments.length===0?2:2*D,O},O.background=function(D){return C=D,O},O.size=function(D){return A=D,O},O.orientation=function(){for(var D=arguments.length,L=new Array(D),B=0;B<D;B++)L[B]=arguments[B];return arguments.length===0||(I=L),O},O.shapeRendering=function(D){return R=D,O},O.stroke=function(D){return T=D,O},O.strokeWidth=function(D){return E=D,O},O.id=function(D){return arguments.length===0?P:(P=D,O)},O.url=function(){return"url(#".concat(P,")")},O}function paths(){var A=1,T=1,E=20,C="#343434",P=2,I="",R=function(U){return"M ".concat(U/4,",").concat(U*3/4,"l").concat(U/4,",").concat(-U/2,"l").concat(U/4,",").concat(U/2)},F=random(),O="transparent",D="auto",L=function(U){var z=E;switch(U){case"squares":return"M ".concat(z/4," ").concat(z/4," l ").concat(z/2," 0 l 0 ").concat(z/2," l ").concat(-z/2," 0 Z");case"nylon":return"M 0 ".concat(z/4," l ").concat(z/4," 0 l 0 ").concat(-z/4," M ").concat(z*3/4," ").concat(z," l 0 ").concat(-z/4," l ").concat(z/4," 0 M ").concat(z/4," ").concat(z/2," l 0 ").concat(z/4," l ").concat(z/4," 0 M ").concat(z/2," ").concat(z/4," l ").concat(z/4," 0 l 0 ").concat(z/4);case"waves":return"M 0 ".concat(z/2," c ").concat(z/8," ").concat(-z/4," , ").concat(z*3/8," ").concat(-z/4," , ").concat(z/2," 0 c ").concat(z/8," ").concat(z/4," , ").concat(z*3/8," ").concat(z/4," , ").concat(z/2," 0 M ").concat(-z/2," ").concat(z/2," c ").concat(z/8," ").concat(z/4," , ").concat(z*3/8," ").concat(z/4," , ").concat(z/2," 0 M ").concat(z," ").concat(z/2," c ").concat(z/8," ").concat(-z/4," , ").concat(z*3/8," ").concat(-z/4," , ").concat(z/2," 0");case"woven":return"M ".concat(z/4,",").concat(z/4,"l").concat(z/2,",").concat(z/2,"M").concat(z*3/4,",").concat(z/4,"l").concat(z/2,",").concat(-z/2," M").concat(z/4,",").concat(z*3/4,"l").concat(-z/2,",").concat(z/2,"M").concat(z*3/4,",").concat(z*5/4,"l").concat(z/2,",").concat(-z/2," M").concat(-z/4,",").concat(z/4,"l").concat(z/2,",").concat(-z/2);case"crosses":return"M ".concat(z/4,",").concat(z/4,"l").concat(z/2,",").concat(z/2,"M").concat(z/4,",").concat(z*3/4,"l").concat(z/2,",").concat(-z/2);case"caps":return"M ".concat(z/4,",").concat(z*3/4,"l").concat(z/4,",").concat(-z/2,"l").concat(z/4,",").concat(z/2);case"hexagons":return A=3,T=Math.sqrt(3),"M ".concat(z,",0 l ").concat(z,",0 l ").concat(z/2,",").concat(z*Math.sqrt(3)/2," l ").concat(-z/2,",").concat(z*Math.sqrt(3)/2," l ").concat(-z,",0 l ").concat(-z/2,",").concat(-z*Math.sqrt(3)/2," Z M 0,").concat(z*Math.sqrt(3)/2," l ").concat(z/2,",0 M ").concat(3*z,",").concat(z*Math.sqrt(3)/2," l ").concat(-z/2,",0");default:return U(z)}},B=function(U){var z=L(R),W=U.append("defs").append("pattern").attr("id",F).attr("patternUnits","userSpaceOnUse").attr("width",E*A).attr("height",E*T);I&&W.append("rect").attr("width",E*A).attr("height",E*T).attr("fill",I),W.append("path").attr("d",z).attr("fill",O).attr("stroke",C).attr("stroke-width",P).attr("stroke-linecap","square").attr("shape-rendering",D)};return B.heavier=function(V){return P*=arguments.length===0?2:2*V,B},B.lighter=function(V){return P/=arguments.length===0?2:2*V,B},B.thinner=function(V){return E*=arguments.length===0?2:2*V,B},B.thicker=function(V){return E/=arguments.length===0?2:2*V,B},B.background=function(V){return I=V,B},B.shapeRendering=function(V){return D=V,B},B.size=function(V){return E=V,B},B.d=function(V){return R=V,B},B.fill=function(V){return O=V,B},B.stroke=function(V){return C=V,B},B.strokeWidth=function(V){return P=V,B},B.id=function(V){return arguments.length===0?F:(F=V,B)},B.url=function(){return"url(#".concat(F,")")},B}var main={circles,lines,paths};function wrapSVGText(A,{text:T,maxWidth:E,lineHeight:C=1.3,verticalCenter:P=!1}){A.each(function(){const I=select(this),R=T.split(/\s+/).reverse();I.text(null);const F=I.attr("x")?I.attr("x"):0,O=I.attr("y")?I.attr("y"):0,D=I.attr("dy")?parseFloat(I.attr("dy")):0,L=I.append("tspan"),B=[];let V=[];for(;R.length;){const U=R.pop();V.push(U),Math.ceil(L.text(V.join(" ")).node().getComputedTextLength())>E&&(V.pop(),B.push(V.join(" ")),V=[U])}B.push(V.join(" ")),L.remove(),I.selectAll("tspan").data(B).enter().append("tspan").attr("x",F).attr("y",O).attr("dy",(U,z)=>P?Math.ceil(z-B.length/2)*C+D+"em":z*C+D+"em").text(U=>U)})}function create_fragment$n(A){let T,E,C,P,I,R,F,O,D,L,B,V,U,z,W;return z=new ClearFilterButton({props:{onClick:A[9],disabled:A[0].length===0}}),{c(){T=element("div"),E=element("div"),C=svg_element("svg"),P=svg_element("defs"),I=svg_element("filter"),R=svg_element("feFlood"),F=svg_element("feMerge"),O=svg_element("feMergeNode"),D=svg_element("feMergeNode"),L=svg_element("g"),U=space(),create_component(z.$$.fragment),this.h()},l(Z){T=claim_element(Z,"DIV",{class:!0});var X=children$1(T);E=claim_element(X,"DIV",{class:!0});var K=children$1(E);C=claim_svg_element(K,"svg",{class:!0});var Y=children$1(C);P=claim_svg_element(Y,"defs",{});var Q=children$1(P);I=claim_svg_element(Q,"filter",{x:!0,y:!0,width:!0,height:!0,id:!0});var J=children$1(I);R=claim_svg_element(J,"feFlood",{"flood-color":!0,result:!0}),children$1(R).forEach(detach),F=claim_svg_element(J,"feMerge",{});var te=children$1(F);O=claim_svg_element(te,"feMergeNode",{in:!0}),children$1(O).forEach(detach),D=claim_svg_element(te,"feMergeNode",{in:!0}),children$1(D).forEach(detach),te.forEach(detach),J.forEach(detach),Q.forEach(detach),L=claim_svg_element(Y,"g",{class:!0,transform:!0});var ie=children$1(L);ie.forEach(detach),Y.forEach(detach),K.forEach(detach),U=claim_space(X),claim_component(z.$$.fragment,X),X.forEach(detach),this.h()},h(){attr(R,"flood-color","var(--clr-accent-low)"),attr(R,"result","bg"),attr(O,"in","bg"),attr(D,"in","SourceGraphic"),attr(I,"x","0"),attr(I,"y","0"),attr(I,"width","1"),attr(I,"height","1"),attr(I,"id","text-bg"),attr(L,"class","chart"),attr(L,"transform",B="translate("+(A[1]?A[1]/2:0)+", "+(A[2]?A[2]/2:0)+")"),attr(C,"class","w-full h-full overflow-visible relative"),attr(E,"class","w-full h-full"),add_render_callback(()=>A[8].call(E)),attr(T,"class","h-80 md:h-64 grid grid-rows-[1fr_min-content]")},m(Z,X){insert_hydration(Z,T,X),append_hydration(T,E),append_hydration(E,C),append_hydration(C,P),append_hydration(P,I),append_hydration(I,R),append_hydration(I,F),append_hydration(F,O),append_hydration(F,D),append_hydration(C,L),A[7](C),V=add_iframe_resize_listener(E,A[8].bind(E)),append_hydration(T,U),mount_component(z,T,null),W=!0},p(Z,[X]){(!W||X&6&&B!==(B="translate("+(Z[1]?Z[1]/2:0)+", "+(Z[2]?Z[2]/2:0)+")"))&&attr(L,"transform",B);const K={};X&1&&(K.onClick=Z[9]),X&1&&(K.disabled=Z[0].length===0),z.$set(K)},i(Z){W||(transition_in(z.$$.fragment,Z),W=!0)},o(Z){transition_out(z.$$.fragment,Z),W=!1},d(Z){Z&&detach(T),A[7](null),V(),destroy_component(z)}}}function bringToFront(){const A=this.parentNode,T=A.removeChild(this);A.appendChild(T)}function instance$m(A,T,E){let C,P,I,R,F,O;component_subscribe(A,$format,ae=>E(17,C=ae)),component_subscribe(A,$locale,ae=>E(5,P=ae)),component_subscribe(A,categoriesEnriched,ae=>E(6,I=ae)),component_subscribe(A,lineWidth,ae=>E(18,R=ae)),component_subscribe(A,width,ae=>E(19,F=ae)),component_subscribe(A,nodeSize,ae=>E(20,O=ae));let{selected:D=[]}=T,{disabled:L}=T,B,V,U,z=[],W,Z=!1,X,K,Y,Q;const J=main.circles().size(O/2).radius(R).complement().fill("#818afa"),te=collide().strength(.9);U=simulation$1().force("charge",manyBody().strength(10)).force("center",center$1().x(0).y(0).strength(.5)).force("collide",te).on("tick",he),onMount(()=>{K=linear().domain([0,1]).range([0,(F>=768?2e4:12500)*(O/10)]),Y=ce=>Math.sqrt(K(ce)/(2*Math.PI))+5,Q=ce=>Y(ce.v)+(F>=768?5:15),ye(),z=I.filter(ce=>ce.type==="industry").map(ce=>{const se=Y(ce.pctNodes);return{id:ce.id,name:ce.name,v:ce.pctNodes,r:se,r1:se}}),W=select(X).call(J).select(".chart").selectAll(".bs-bubble").data(z).enter().append("g").attr("id",ce=>`bs-bubble-${ce.id.replace(".","_")}`).attr("class","bs-bubble").style("cursor","pointer").on("mouseover",bringToFront).on("click",(ce,se)=>ve(se.id)),W.append("circle").attr("class","outer").attr("r",ce=>ce.r1).attr("fill",J.url()).attr("stroke-width",R),W.append("circle").attr("class","inner").attr("r",2.4*R);const ae=W.append("g").attr("class","text").attr("font-size","1rem");ae.append("text").attr("class","percentage").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("dy","-.15em").text(ce=>Math.round(ce.v*100)+"%"),ae.append("text").attr("class","label").attr("text-anchor","middle").attr("dominant-baseline","middle").attr("dy","1.35em").attr("filter","url(#text-bg)"),U.nodes(z),Z=!0,ie()});function ie(){Z&&W.selectAll("text.label").each(function(ae){const ce=C("category."+ae.id);select(this).call(wrapSVGText,{maxWidth:120,text:ce})})}function ne(ae){Z&&(z.forEach(ce=>{const se=ae.find(_e=>_e.id===ce.id).pctNodes;ce.v=se,ce.r1=Y(se);const le=select(`#bs-bubble-${ce.id.replace(".","_")} circle.outer`);gsapWithCSS.to(ce,{r:ce.r1,duration:.5,ease:"power2.out",onUpdate:()=>le.attr("r",ce.r)})}),ye(),W.data(z).select(".percentage").style("display",ce=>ce.v>0?"":"none").text(ce=>Math.round(ce.v*100)+"%"),U.nodes(z),U.alpha(1).restart())}function he(){Z&&W.attr("transform",ae=>`translate(${ae.x}, ${ae.y})`)}function ve(ae){if(!L){if(D.includes(ae)){const ce=D.indexOf(ae);D.splice(ce,1)}else D.push(ae);E(0,D=[...D]),ye()}}function ye(){te.radius(Q)}function de(){W&&W.classed("active",ae=>D.includes(ae.id))}function fe(ae){binding_callbacks[ae?"unshift":"push"](()=>{X=ae,E(3,X)})}function ue(){B=this.clientWidth,V=this.clientHeight,E(1,B),E(2,V)}const ge=()=>E(0,D=[]);return A.$$set=ae=>{"selected"in ae&&E(0,D=ae.selected),"disabled"in ae&&E(4,L=ae.disabled)},A.$$.update=()=>{A.$$.dirty&64&&ne(I),A.$$.dirty&32&&P&&ie(),A.$$.dirty&1&&D&&de()},[D,B,V,X,L,P,I,fe,ue,ge]}class BeeswarmAlt extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$m,create_fragment$n,safe_not_equal,{selected:0,disabled:4})}}function create_default_slot$6(A){let T,E,C;function P(R){A[4](R)}let I={disabled:A[1]};return A[2]!==void 0&&(I.selected=A[2]),T=new BeeswarmAlt({props:I}),binding_callbacks.push(()=>bind$2(T,"selected",P)),{c(){create_component(T.$$.fragment)},l(R){claim_component(T.$$.fragment,R)},m(R,F){mount_component(T,R,F),C=!0},p(R,F){const O={};F&2&&(O.disabled=R[1]),!E&&F&4&&(E=!0,O.selected=R[2],add_flush_callback(()=>E=!1)),T.$set(O)},i(R){C||(transition_in(T.$$.fragment,R),C=!0)},o(R){transition_out(T.$$.fragment,R),C=!1},d(R){destroy_component(T,R)}}}function create_fragment$m(A){let T,E;return T=new PanelItem({props:{icon:"industries",title:A[0]("input.industry"),$$slots:{default:[create_default_slot$6]},$$scope:{ctx:A}}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p(C,[P]){const I={};P&1&&(I.title=C[0]("input.industry")),P&38&&(I.$$scope={dirty:P,ctx:C}),T.$set(I)},i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function instance$l(A,T,E){let C,P,I;component_subscribe(A,$format,O=>E(0,C=O)),component_subscribe(A,isSwitchingLayout,O=>E(1,P=O)),component_subscribe(A,findustries,O=>E(2,I=O));let{theme:R="on-light"}=T;setContext$1("item-theme",{theme:R});function F(O){I=O,findustries.set(I)}return A.$$set=O=>{"theme"in O&&E(3,R=O.theme)},[C,P,I,R,F]}class InputIndustry extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$l,create_fragment$m,safe_not_equal,{theme:3})}}function create_default_slot$5(A){let T,E,C=A[1]("menu.unselect-all")+"",P;return{c(){T=text("X "),E=element("span"),P=text(C),this.h()},l(I){T=claim_text(I,"X "),E=claim_element(I,"SPAN",{class:!0});var R=children$1(E);P=claim_text(R,C),R.forEach(detach),this.h()},h(){attr(E,"class","font-inherit underline")},m(I,R){insert_hydration(I,T,R),insert_hydration(I,E,R),append_hydration(E,P)},p(I,R){R&2&&C!==(C=I[1]("menu.unselect-all")+"")&&set_data(P,C)},d(I){I&&(detach(T),detach(E))}}}function create_fragment$l(A){let T,E;return T=new ClearFilterButton({props:{uppercase:!0,onClick:A[2],disabled:A[0],$$slots:{default:[create_default_slot$5]},$$scope:{ctx:A}}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p(C,[P]){const I={};P&1&&(I.disabled=C[0]),P&258&&(I.$$scope={dirty:P,ctx:C}),T.$set(I)},i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function instance$k(A,T,E){let C,P,I,R,F,O,D;component_subscribe(A,fyears,B=>E(3,P=B)),component_subscribe(A,fproducts,B=>E(4,I=B)),component_subscribe(A,findustries,B=>E(5,R=B)),component_subscribe(A,fgoals,B=>E(6,F=B)),component_subscribe(A,fdesigns,B=>E(7,O=B)),component_subscribe(A,$format,B=>E(1,D=B));function L(){fyears.set([2014,2023]),fdesigns.set([]),fgoals.set([]),findustries.set([]),fproducts.set([])}return A.$$.update=()=>{A.$$.dirty&248&&E(0,C=O.length+F.length+R.length+I.length===0&&(!P||P.length===2&&P[0]===2014&&P[1]===2023))},[C,D,L,P,I,R,F,O]}class ClearAllFilterButton extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$k,create_fragment$l,safe_not_equal,{})}}const PUBLIC_AWS_SOUND_BASE_URL="https://s3-us-west-2.amazonaws.com/s.cdpn.io/969699";function create_fragment$k(A){let T,E,C,P,I="play my vis!",R,F,O,D,L,B,V,U,z;return E=new Icon({props:{icon:A[0]?"pause":"play"}}),{c(){T=element("button"),create_component(E.$$.fragment),C=space(),P=element("span"),P.textContent=I,R=space(),F=svg_element("svg"),O=svg_element("path"),D=svg_element("path"),L=svg_element("path"),this.h()},l(W){T=claim_element(W,"BUTTON",{class:!0});var Z=children$1(T);claim_component(E.$$.fragment,Z),C=claim_space(Z),P=claim_element(Z,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(P)!=="svelte-1esz6cp"&&(P.textContent=I),R=claim_space(Z),F=claim_svg_element(Z,"svg",{id:!0,width:!0,height:!0,viewBox:!0,xmlns:!0});var X=children$1(F);O=claim_svg_element(X,"path",{d:!0}),children$1(O).forEach(detach),D=claim_svg_element(X,"path",{"fill-rule":!0,"clip-rule":!0,d:!0}),children$1(D).forEach(detach),L=claim_svg_element(X,"path",{"fill-rule":!0,"clip-rule":!0,d:!0}),children$1(L).forEach(detach),X.forEach(detach),Z.forEach(detach),this.h()},h(){attr(P,"class","text-nowrap"),attr(O,"d","M8.64 18.9001C10.098 18.9001 11.28 17.7181 11.28 16.2601C11.28 14.8021 10.098 13.6201 8.64 13.6201C7.18197 13.6201 6 14.8021 6 16.2601C6 17.7181 7.18197 18.9001 8.64 18.9001Z"),attr(D,"fill-rule","evenodd"),attr(D,"clip-rule","evenodd"),attr(D,"d","M14.1173 6.71289C19.3879 11.9834 19.3879 20.5366 14.1173 25.8071L12.7031 24.3929C17.1926 19.9034 17.1926 12.6166 12.7031 8.1271L14.1173 6.71289Z"),attr(L,"fill-rule","evenodd"),attr(L,"clip-rule","evenodd"),attr(L,"d","M19.9171 1.00293C28.3477 9.43345 28.3477 23.0966 19.9171 31.5271L18.5029 30.1129C26.1524 22.4635 26.1524 10.0666 18.5029 2.41714L19.9171 1.00293Z"),attr(F,"id","sound-icon"),attr(F,"width","100%"),attr(F,"height","100%"),attr(F,"viewBox","0 0 32 33"),attr(F,"xmlns","http://www.w3.org/2000/svg"),attr(T,"class",B="text-xxs w-full h-full py-0 px-4 grid grid-cols-[1.125rem_min-content_1.125rem] justify-center items-center gap-2.5 italic "+(A[0]?"bg-primary fill-black text-black md:hover:bg-primary-300":"bg-black fill-primary text-primary md:hover:text-secondary md:hover:fill-secondary")+" transition-colors")},m(W,Z){insert_hydration(W,T,Z),mount_component(E,T,null),append_hydration(T,C),append_hydration(T,P),append_hydration(T,R),append_hydration(T,F),append_hydration(F,O),append_hydration(F,D),append_hydration(F,L),V=!0,U||(z=listen(T,"click",A[1]),U=!0)},p(W,[Z]){const X={};Z&1&&(X.icon=W[0]?"pause":"play"),E.$set(X),(!V||Z&1&&B!==(B="text-xxs w-full h-full py-0 px-4 grid grid-cols-[1.125rem_min-content_1.125rem] justify-center items-center gap-2.5 italic "+(W[0]?"bg-primary fill-black text-black md:hover:bg-primary-300":"bg-black fill-primary text-primary md:hover:text-secondary md:hover:fill-secondary")+" transition-colors"))&&attr(T,"class",B)},i(W){V||(transition_in(E.$$.fragment,W),V=!0)},o(W){transition_out(E.$$.fragment,W),V=!1},d(W){W&&detach(T),destroy_component(E),U=!1,z()}}}function instance$j(A,T,E){let C,P;onMount(()=>{simulation.sound.loadPlayers(PUBLIC_AWS_SOUND_BASE_URL)});function I(){E(0,C=simulation.sound.togglePlaying())}return A.$$.update=()=>{A.$$.dirty&5&&(C?E(2,P=gsapWithCSS.fromTo("#sound-icon path",{opacity:0},{opacity:1,duration:.5,ease:"power2.out",stagger:.2,repeat:-1})):P&&(P.progress(1),P.kill(),E(2,P=null)))},[C,I,P]}class PlayButton extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$j,create_fragment$k,safe_not_equal,{})}}function create_fragment$j(A){let T,E,C,P,I,R,F;return C=new Icon({props:{icon:"pinch"}}),R=new Icon({props:{icon:"mousePan"}}),{c(){T=element("div"),E=element("div"),create_component(C.$$.fragment),P=space(),I=element("div"),create_component(R.$$.fragment),this.h()},l(O){T=claim_element(O,"DIV",{class:!0});var D=children$1(T);E=claim_element(D,"DIV",{id:!0,class:!0});var L=children$1(E);claim_component(C.$$.fragment,L),L.forEach(detach),P=claim_space(D),I=claim_element(D,"DIV",{id:!0,class:!0});var B=children$1(I);claim_component(R.$$.fragment,B),B.forEach(detach),D.forEach(detach),this.h()},h(){attr(E,"id","pinch-signal"),attr(E,"class","signal signals__pinch svelte-9alu6d"),attr(I,"id","pan-signal"),attr(I,"class","signal signals__pan svelte-9alu6d"),attr(T,"class","signals svelte-9alu6d"),toggle_class(T,"fade",!!A[0])},m(O,D){insert_hydration(O,T,D),append_hydration(T,E),mount_component(C,E,null),append_hydration(T,P),append_hydration(T,I),mount_component(R,I,null),F=!0},p(O,[D]){(!F||D&1)&&toggle_class(T,"fade",!!O[0])},i(O){F||(transition_in(C.$$.fragment,O),transition_in(R.$$.fragment,O),F=!0)},o(O){transition_out(C.$$.fragment,O),transition_out(R.$$.fragment,O),F=!1},d(O){O&&detach(T),destroy_component(C),destroy_component(R)}}}function instance$i(A,T,E){let C;return component_subscribe(A,selected,P=>E(0,C=P)),[C]}class Signals extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$i,create_fragment$j,safe_not_equal,{})}}function create_fragment$i(A){let T,E,C,P,I;return{c(){T=element("div"),this.h()},l(R){T=claim_element(R,"DIV",{class:!0}),children$1(T).forEach(detach),this.h()},h(){attr(T,"class","w-full h-full"),add_render_callback(()=>A[10].call(T))},m(R,F){insert_hydration(R,T,F),A[9](T),E=add_iframe_resize_listener(T,A[10].bind(T)),P||(I=action_destroyer(C=castContainer.call(null,T,{context:A[3],hasMask:!0,centered:!1,propagateOpacity:"#vis-container"})),P=!0)},p(R,[F]){C&&is_function(C.update)&&F&8&&C.update.call(null,{context:R[3],hasMask:!0,centered:!1,propagateOpacity:"#vis-container"})},i:noop$1,o:noop$1,d(R){R&&detach(T),A[9](null),E(),P=!1,I()}}}function instance$h(A,T,E){let C,P,I,R,F,O,D;component_subscribe(A,app,X=>E(12,C=X)),component_subscribe(A,nodeSize,X=>E(5,P=X)),component_subscribe(A,figureHeight,X=>E(0,I=X)),component_subscribe(A,figureWidth,X=>E(1,R=X)),component_subscribe(A,zoom,X=>E(6,F=X)),component_subscribe(A,cameraOffsetY,X=>E(7,O=X)),component_subscribe(A,cameraOffsetX,X=>E(8,D=X));let L;const B=new Container,V=new Container,U=new Container;B.name="vis-container",V.name="outer-scene",U.name="scene",U.node={hitArea:new Rectangle},B.addChild(V),V.addChild(U),onMount(()=>{simulation.zoom.initZoom(L),simulation.toScene(U,C.ticker)});function z(X){U.node.hitArea.x=-X/2,U.node.hitArea.y=-X/2,U.node.hitArea.width=X,U.node.hitArea.height=X}function W(X){binding_callbacks[X?"unshift":"push"](()=>{L=X,E(2,L)})}function Z(){R=this.clientWidth,figureWidth.set(R),I=this.clientHeight,figureHeight.set(I)}return A.$$.update=()=>{A.$$.dirty&256&&E(4,V.x=D,V),A.$$.dirty&128&&E(4,V.y=O,V),A.$$.dirty&80&&V.scale.set(F),A.$$.dirty&2&&(U.x=R/2),A.$$.dirty&1&&(U.y=I/2),A.$$.dirty&32&&z(P)},[I,R,L,B,V,P,F,O,D,W,Z]}class Visualization extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$h,create_fragment$i,safe_not_equal,{})}}function fly(A,{delay:T=0,duration:E=400,easing:C=cubicOut,x:P=0,y:I=0,opacity:R=0}={}){const F=getComputedStyle(A),O=+F.opacity,D=F.transform==="none"?"":F.transform,L=O*(1-R),[B,V]=split_css_unit(P),[U,z]=split_css_unit(I);return{delay:T,duration:E,easing:C,css:(W,Z)=>`
			transform: ${D} translate(${(1-W)*B}${V}, ${(1-W)*U}${z});
			opacity: ${O-L*Z}`}}function scale(A,{delay:T=0,duration:E=400,easing:C=cubicOut,start:P=0,opacity:I=0}={}){const R=getComputedStyle(A),F=+R.opacity,O=R.transform==="none"?"":R.transform,D=1-P,L=F*(1-I);return{delay:T,duration:E,easing:C,css:(B,V)=>`
			transform: ${O} scale(${1-D*V});
			opacity: ${F-L*V}
		`}}function instance$g(A,T,E){let C;component_subscribe(A,app,V=>E(3,C=V));let{id:P}=T,{context:I}=T;const R=2+Math.random()*5,F=C.ticker.add(B),O=new Graphics$1;I.addChild(O),templates[P](O,P>=30&&P<40?{anchor:[.5,.5],rotateSprite:!1}:void 0);const D={rotation:0,translation:0,scale:1},L=[];if(get_store_value(width)>768){const V=Math.random()>.5?1:-1;L.push(gsapWithCSS.fromTo(D,{rotation:V*-Math.PI/12},{rotation:V*Math.PI/12,repeat:-1,duration:1.75+Math.random()*1.5,yoyo:!0,ease:"none"}));const U=Math.random()>.5?1:-1;L.push(gsapWithCSS.fromTo(D,{translation:0},{translation:U*2*Math.PI,repeat:-1,duration:6+Math.random()*4,ease:"none"})),L.push(gsapWithCSS.fromTo(D,{scale:.9+Math.random()*.1},{scale:1.15+Math.random()*.05,repeat:-1,duration:3+Math.random(),yoyo:!0,ease:"none"}))}else O.scale.set(.7);function B(){L.length&&(O.rotation=D.rotation,O.x=Math.cos(D.translation)*R,O.y=Math.sin(D.translation)*R,O.scale.set(D.scale))}return onDestroy(()=>{F.remove(B),L.forEach(V=>V.kill())}),A.$$set=V=>{"id"in V&&E(0,P=V.id),"context"in V&&E(1,I=V.context)},[P,I]}class FileTrace extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$g,null,safe_not_equal,{id:0,context:1})}}function get_each_context$2(A,T,E){const C=A.slice();C[18]=T[E],C[22]=E;const P=new Container;C[19]=P;const I=C[10].find(function(...F){return A[13](C[18],...F)});return C[20]=I,C}function create_if_block_1$4(A){let T,E,C,P,I,R,F=A[11]("category."+A[20].id)+"",O,D,L,B,V;return C=new FileTrace({props:{id:A[18],context:A[19]}}),{c(){T=element("li"),E=element("figure"),create_component(C.$$.fragment),I=space(),R=element("p"),O=text(F),D=space(),this.h()},l(U){T=claim_element(U,"LI",{class:!0});var z=children$1(T);E=claim_element(z,"FIGURE",{class:!0});var W=children$1(E);claim_component(C.$$.fragment,W),W.forEach(detach),I=claim_space(z),R=claim_element(z,"P",{class:!0});var Z=children$1(R);O=claim_text(Z,F),Z.forEach(detach),D=claim_space(z),z.forEach(detach),this.h()},h(){attr(E,"class","opacity-[inherit] aspect-square"),attr(R,"class","text-xxs md:text-xs self-center lowercase underline"),attr(T,"class","grid grid-cols-[2rem_minmax(0,1fr)] gap-2.5 md:grid-cols-[2.25rem_minmax(0,1fr)] items-center")},m(U,z){insert_hydration(U,T,z),append_hydration(T,E),mount_component(C,E,null),append_hydration(T,I),append_hydration(T,R),append_hydration(R,O),append_hydration(T,D),L=!0,B||(V=action_destroyer(P=castContainer.call(null,E,{parent:get_store_value(app).stage.getChildByName("vis-container"),context:A[19],propagateOpacity:A[3]})),B=!0)},p(U,z){A=U;const W={};z&16&&(W.id=A[18]),C.$set(W),P&&is_function(P.update)&&z&8&&P.update.call(null,{parent:get_store_value(app).stage.getChildByName("vis-container"),context:A[19],propagateOpacity:A[3]}),(!L||z&3088)&&F!==(F=A[11]("category."+A[20].id)+"")&&set_data(O,F)},i(U){L||(transition_in(C.$$.fragment,U),L=!0)},o(U){transition_out(C.$$.fragment,U),L=!1},d(U){U&&detach(T),destroy_component(C),B=!1,V()}}}function create_each_block$2(A,T){let E,C,P,I=T[20]&&create_if_block_1$4(T);return{key:A,first:null,c(){E=empty$1(),I&&I.c(),C=empty$1(),this.h()},l(R){E=empty$1(),I&&I.l(R),C=empty$1(),this.h()},h(){this.first=E},m(R,F){insert_hydration(R,E,F),I&&I.m(R,F),insert_hydration(R,C,F),P=!0},p(R,F){T=R,T[20]?I?(I.p(T,F),F&1040&&transition_in(I,1)):(I=create_if_block_1$4(T),I.c(),transition_in(I,1),I.m(C.parentNode,C)):I&&(group_outros(),transition_out(I,1,1,()=>{I=null}),check_outros())},i(R){P||(transition_in(I),P=!0)},o(R){transition_out(I),P=!1},d(R){R&&(detach(E),detach(C)),I&&I.d(R)}}}function create_if_block$8(A){let T,E,C,P,I,R=A[11]("file.back")+"",F,O,D,L;return C=new Icon({props:{icon:"return"}}),{c(){T=element("button"),E=element("figure"),create_component(C.$$.fragment),P=space(),I=element("p"),F=text(R),this.h()},l(B){T=claim_element(B,"BUTTON",{class:!0});var V=children$1(T);E=claim_element(V,"FIGURE",{class:!0});var U=children$1(E);claim_component(C.$$.fragment,U),U.forEach(detach),P=claim_space(V),I=claim_element(V,"P",{});var z=children$1(I);F=claim_text(z,R),z.forEach(detach),V.forEach(detach),this.h()},h(){attr(E,"class","w-10 h-10"),attr(T,"class","stroke-black stroke-1 hover:stroke-primary hover:text-primary flex flex-col")},m(B,V){insert_hydration(B,T,V),append_hydration(T,E),mount_component(C,E,null),append_hydration(T,P),append_hydration(T,I),append_hydration(I,F),O=!0,D||(L=listen(T,"click",A[12]),D=!0)},p(B,V){(!O||V&2048)&&R!==(R=B[11]("file.back")+"")&&set_data(F,R)},i(B){O||(transition_in(C.$$.fragment,B),O=!0)},o(B){transition_out(C.$$.fragment,B),O=!1},d(B){B&&detach(T),destroy_component(C),D=!1,L()}}}function create_fragment$h(A){let T,E,C,P=[],I=new Map,R=`repeat(${A[0]}, minmax(0,1fr))`,F=`repeat(${A[5]}, minmax(0,1fr))`,O,D,L,B,V,U,z,W,Z,X,K,Y,Q,J,te,ie,ne,he,ve=ensure_array_like(A[4]);const ye=fe=>fe[18];for(let fe=0;fe<ve.length;fe+=1){let ue=get_each_context$2(A,ve,fe),ge=ye(ue);I.set(ge,P[fe]=create_each_block$2(ge,ue))}let de=!A[1]&&create_if_block$8(A);return{c(){T=element("section"),E=element("article"),C=element("ul");for(let fe=0;fe<P.length;fe+=1)P[fe].c();O=space(),D=element("div"),L=element("div"),B=element("h3"),V=text(A[6]),U=space(),z=element("h4"),W=text(A[7]),Z=space(),X=element("p"),K=text(A[8]),Y=space(),Q=element("div"),J=element("p"),te=text(A[9]),ie=space(),de&&de.c(),this.h()},l(fe){T=claim_element(fe,"SECTION",{class:!0});var ue=children$1(T);E=claim_element(ue,"ARTICLE",{class:!0});var ge=children$1(E);C=claim_element(ge,"UL",{class:!0});var ae=children$1(C);for(let Ce=0;Ce<P.length;Ce+=1)P[Ce].l(ae);ae.forEach(detach),O=claim_space(ge),D=claim_element(ge,"DIV",{class:!0});var ce=children$1(D);L=claim_element(ce,"DIV",{class:!0});var se=children$1(L);B=claim_element(se,"H3",{class:!0});var le=children$1(B);V=claim_text(le,A[6]),le.forEach(detach),U=claim_space(se),z=claim_element(se,"H4",{class:!0});var _e=children$1(z);W=claim_text(_e,A[7]),_e.forEach(detach),se.forEach(detach),Z=claim_space(ce),X=claim_element(ce,"P",{});var me=children$1(X);K=claim_text(me,A[8]),me.forEach(detach),Y=claim_space(ce),Q=claim_element(ce,"DIV",{class:!0});var Ee=children$1(Q);J=claim_element(Ee,"P",{class:!0});var Pe=children$1(J);te=claim_text(Pe,A[9]),Pe.forEach(detach),ie=claim_space(Ee),de&&de.l(Ee),Ee.forEach(detach),ce.forEach(detach),ge.forEach(detach),ue.forEach(detach),this.h()},h(){attr(C,"class","row-start-2 md:row-start-1 md:col-start-1 gap-y-6 gap-x-2 content-center grid overflow-y-auto overflow-x-hidden pr-2"),set_style(C,"grid-template-columns",R),set_style(C,"grid-template-rows",F),attr(B,"class","inline-block font-bold uppercase text-2xl md:text-3xl"),attr(z,"class","mt-1.5 underline text-lg"),attr(L,"class","flex flex-col"),attr(J,"class","underline"),attr(Q,"class","flex flex-col gap-4 items-start"),attr(D,"class","flex flex-col gap-3 justify-center md:py-8"),attr(E,"class","max-w-full max-h-full mx-auto px-6 py-8 grid grid-rows-[max-content_minmax(auto,1fr)] gap-10 md:py-0 md:max-w-3xl md:grid-rows-none md:grid-cols-[max-content_minmax(auto,1fr)] overflow-hidden"),attr(T,"class",ne="hidden absolute top-0 left-0 w-full h-full z-40 "+(A[2]?"pointer-events-auto":"pointer-events-none")+" flex flex-col justify-center")},m(fe,ue){insert_hydration(fe,T,ue),append_hydration(T,E),append_hydration(E,C);for(let ge=0;ge<P.length;ge+=1)P[ge]&&P[ge].m(C,null);append_hydration(E,O),append_hydration(E,D),append_hydration(D,L),append_hydration(L,B),append_hydration(B,V),append_hydration(L,U),append_hydration(L,z),append_hydration(z,W),append_hydration(D,Z),append_hydration(D,X),append_hydration(X,K),append_hydration(D,Y),append_hydration(D,Q),append_hydration(Q,J),append_hydration(J,te),append_hydration(Q,ie),de&&de.m(Q,null),A[14](T),he=!0},p(fe,[ue]){ue&3096&&(ve=ensure_array_like(fe[4]),group_outros(),P=update_keyed_each(P,ue,ye,1,fe,ve,I,C,outro_and_destroy_block,create_each_block$2,null,get_each_context$2),check_outros()),ue&1&&R!==(R=`repeat(${fe[0]}, minmax(0,1fr))`)&&set_style(C,"grid-template-columns",R),ue&32&&F!==(F=`repeat(${fe[5]}, minmax(0,1fr))`)&&set_style(C,"grid-template-rows",F),(!he||ue&64)&&set_data(V,fe[6]),(!he||ue&128)&&set_data(W,fe[7]),(!he||ue&256)&&set_data(K,fe[8]),(!he||ue&512)&&set_data(te,fe[9]),fe[1]?de&&(group_outros(),transition_out(de,1,1,()=>{de=null}),check_outros()):de?(de.p(fe,ue),ue&2&&transition_in(de,1)):(de=create_if_block$8(fe),de.c(),transition_in(de,1),de.m(Q,null)),(!he||ue&4&&ne!==(ne="hidden absolute top-0 left-0 w-full h-full z-40 "+(fe[2]?"pointer-events-auto":"pointer-events-none")+" flex flex-col justify-center"))&&attr(T,"class",ne)},i(fe){if(!he){for(let ue=0;ue<ve.length;ue+=1)transition_in(P[ue]);transition_in(de),he=!0}},o(fe){for(let ue=0;ue<P.length;ue+=1)transition_out(P[ue]);transition_out(de),he=!1},d(fe){fe&&detach(T);for(let ue=0;ue<P.length;ue+=1)P[ue].d();de&&de.d(),A[14](null)}}}function instance$f(A,T,E){let C,P,I;component_subscribe(A,selected,J=>E(2,C=J)),component_subscribe(A,categories,J=>E(10,P=J)),component_subscribe(A,$format,J=>E(11,I=J));let{nColumns:R=1}=T,{outerClose:F=!1}=T,O,D=[],L=0,B="",V="",U="",z="";function W(J){if(!J)return X();E(4,D=[J.channel,...J.products,...J.designs,...J.goals]),E(6,B=J.project),E(7,V=J.client),E(8,U=J.description),E(9,z=J.date),E(5,L=Math.ceil(D.length/R)),Z()}function Z(){if(!O)return;gsapWithCSS.timeline({overwrite:!0}).set(O,{display:"flex"}).fromTo(O,{opacity:0,y:-300,rotateY:30,skewY:-30},{opacity:1,y:0,rotateY:0,skewY:0})}function X(){if(!O)return;gsapWithCSS.timeline({overwrite:!0}).fromTo(O,{opacity:1,scale:1,y:0},{opacity:0,scale:1.2,y:-20}).set(O,{scale:1,display:"none"}).add(()=>{E(4,D=[]),E(6,B=""),E(7,V=""),E(8,U=""),E(9,z="")})}function K(){selected.set(null)}const Y=(J,te)=>te.id===J;function Q(J){binding_callbacks[J?"unshift":"push"](()=>{O=J,E(3,O)})}return A.$$set=J=>{"nColumns"in J&&E(0,R=J.nColumns),"outerClose"in J&&E(1,F=J.outerClose)},A.$$.update=()=>{A.$$.dirty&4&&W(C)},[R,F,C,O,D,L,B,V,U,z,P,I,K,Y,Q]}class File extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$f,create_fragment$h,safe_not_equal,{nColumns:0,outerClose:1})}}function clickOutside(A){function T(E){if(!(!A||A.contains(E.target)||E.defaultPrevented))return A.dispatchEvent(new CustomEvent("outsideclick",A))}return document.addEventListener("click",T,!0),{destroy:()=>document.removeEventListener("click",T,!0)}}function create_else_block$4(A){let T,E,C,P,I,R=A[2]("file.back")+"",F,O,D,L,B;return C=new Icon({props:{icon:"return"}}),{c(){T=element("button"),E=element("figure"),create_component(C.$$.fragment),P=space(),I=element("p"),F=text(R),this.h()},l(V){T=claim_element(V,"BUTTON",{class:!0});var U=children$1(T);E=claim_element(U,"FIGURE",{class:!0});var z=children$1(E);claim_component(C.$$.fragment,z),z.forEach(detach),P=claim_space(U),I=claim_element(U,"P",{});var W=children$1(I);F=claim_text(W,R),W.forEach(detach),U.forEach(detach),this.h()},h(){attr(E,"class","w-6 h-6 stroke-black"),attr(T,"class","grid grid-cols-[repeat(2,min-content)] items-center justify-end gap-2.5")},m(V,U){insert_hydration(V,T,U),append_hydration(T,E),mount_component(C,E,null),append_hydration(T,P),append_hydration(T,I),append_hydration(I,F),D=!0,L||(B=listen(T,"click",A[7]),L=!0)},p(V,U){(!D||U&4)&&R!==(R=V[2]("file.back")+"")&&set_data(F,R)},i(V){D||(transition_in(C.$$.fragment,V),V&&(O||add_render_callback(()=>{O=create_in_transition(T,fly,{y:-12}),O.start()})),D=!0)},o(V){transition_out(C.$$.fragment,V),D=!1},d(V){V&&detach(T),destroy_component(C),L=!1,B()}}}function create_if_block$7(A){let T,E,C,P,I;function R(O){A[9](O)}let F={direction:"row"};return A[0]!==void 0&&(F.layout=A[0]),E=new InputLayout({props:F}),binding_callbacks.push(()=>bind$2(E,"layout",R)),{c(){T=element("div"),create_component(E.$$.fragment)},l(O){T=claim_element(O,"DIV",{});var D=children$1(T);claim_component(E.$$.fragment,D),D.forEach(detach)},m(O,D){insert_hydration(O,T,D),mount_component(E,T,null),I=!0},p(O,D){const L={};!C&&D&1&&(C=!0,L.layout=O[0],add_flush_callback(()=>C=!1)),E.$set(L)},i(O){I||(transition_in(E.$$.fragment,O),O&&(P||add_render_callback(()=>{P=create_in_transition(T,fly,{y:-12}),P.start()})),I=!0)},o(O){transition_out(E.$$.fragment,O),I=!1},d(O){O&&detach(T),destroy_component(E)}}}function create_default_slot$4(A){let T,E;return T=new Icon({props:{icon:"infoDefault"}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p:noop$1,i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function create_fragment$g(A){let T,E,C,P,I,R,F,O,D,L,B,V,U,z,W,Z,X,K,Y,Q,J=A[2]("menu.filters")+"",te,ie,ne,he,ve,ye,de,fe,ue,ge,ae,ce,se,le,_e,me,Ee,Pe,Ce,ke,Be,Me,Oe,Je,et,qe,De='<p class="text-white text-2xl font-bold mx-auto">X</p>',Ue,Re,Ne,Ge,We,je,Ye,Fe,He,nt,ot,pt,dt,yt;P=new ProjectLogo({}),F=new LanguageChange({}),B=new Signals({}),U=new Visualization({}),W=new File({props:{nColumns:"2",outerClose:!0}}),de=new InputPeriod({props:{theme:"on-dark"}}),ge=new InputDesign({props:{theme:"on-dark"}}),se=new InputGoal({props:{nColumns:"2",theme:"on-dark"}}),me=new InputProduct({props:{nColumns:"2",theme:"on-dark"}}),Ce=new InputIndustry({props:{theme:"on-dark"}}),Oe=new ClearAllFilterButton({});const Rt=[create_if_block$7,create_else_block$4],wt=[];function Ot(Ze,St){return Ze[4]?1:0}return Ge=Ot(A),We=wt[Ge]=Rt[Ge](A),He=new Button({props:{onClick:A[8],$$slots:{default:[create_default_slot$4]},$$scope:{ctx:A}}}),ot=new PlayButton({}),{c(){T=element("div"),E=element("section"),C=element("div"),create_component(P.$$.fragment),I=space(),R=element("div"),create_component(F.$$.fragment),O=space(),D=element("section"),L=element("article"),create_component(B.$$.fragment),V=space(),create_component(U.$$.fragment),z=space(),create_component(W.$$.fragment),Z=space(),X=element("article"),K=element("button"),Y=element("p"),Q=text("> "),te=text(J),ne=space(),he=element("aside"),ve=element("ul"),ye=element("li"),create_component(de.$$.fragment),fe=space(),ue=element("li"),create_component(ge.$$.fragment),ae=space(),ce=element("li"),create_component(se.$$.fragment),le=space(),_e=element("li"),create_component(me.$$.fragment),Ee=space(),Pe=element("li"),create_component(Ce.$$.fragment),ke=space(),Be=element("div"),Me=element("div"),create_component(Oe.$$.fragment),Je=space(),et=element("div"),qe=element("button"),qe.innerHTML=De,Re=space(),Ne=element("section"),We.c(),je=space(),Ye=element("section"),Fe=element("figure"),create_component(He.$$.fragment),nt=space(),create_component(ot.$$.fragment),this.h()},l(Ze){T=claim_element(Ze,"DIV",{id:!0,class:!0});var St=children$1(T);E=claim_element(St,"SECTION",{id:!0,class:!0});var Wt=children$1(E);C=claim_element(Wt,"DIV",{class:!0});var qt=children$1(C);claim_component(P.$$.fragment,qt),qt.forEach(detach),I=claim_space(Wt),R=claim_element(Wt,"DIV",{class:!0});var Qe=children$1(R);claim_component(F.$$.fragment,Qe),Qe.forEach(detach),Wt.forEach(detach),O=claim_space(St),D=claim_element(St,"SECTION",{class:!0});var xt=children$1(D);L=claim_element(xt,"ARTICLE",{id:!0,class:!0});var Lt=children$1(L);claim_component(B.$$.fragment,Lt),V=claim_space(Lt),claim_component(U.$$.fragment,Lt),z=claim_space(Lt),claim_component(W.$$.fragment,Lt),Lt.forEach(detach),Z=claim_space(xt),X=claim_element(xt,"ARTICLE",{id:!0,class:!0});var It=children$1(X);K=claim_element(It,"BUTTON",{class:!0});var Ut=children$1(K);Y=claim_element(Ut,"P",{});var rr=children$1(Y);Q=claim_text(rr,"> "),te=claim_text(rr,J),rr.forEach(detach),Ut.forEach(detach),ne=claim_space(It),he=claim_element(It,"ASIDE",{class:!0});var Pt=children$1(he);ve=claim_element(Pt,"UL",{class:!0});var Bt=children$1(ve);ye=claim_element(Bt,"LI",{class:!0});var hr=children$1(ye);claim_component(de.$$.fragment,hr),hr.forEach(detach),fe=claim_space(Bt),ue=claim_element(Bt,"LI",{class:!0});var wr=children$1(ue);claim_component(ge.$$.fragment,wr),wr.forEach(detach),ae=claim_space(Bt),ce=claim_element(Bt,"LI",{class:!0});var Cr=children$1(ce);claim_component(se.$$.fragment,Cr),Cr.forEach(detach),le=claim_space(Bt),_e=claim_element(Bt,"LI",{class:!0});var nr=children$1(_e);claim_component(me.$$.fragment,nr),nr.forEach(detach),Ee=claim_space(Bt),Pe=claim_element(Bt,"LI",{class:!0});var Or=children$1(Pe);claim_component(Ce.$$.fragment,Or),Or.forEach(detach),Bt.forEach(detach),ke=claim_space(Pt),Be=claim_element(Pt,"DIV",{class:!0});var Mt=children$1(Be);Me=claim_element(Mt,"DIV",{class:!0});var Pr=children$1(Me);claim_component(Oe.$$.fragment,Pr),Pr.forEach(detach),Je=claim_space(Mt),et=claim_element(Mt,"DIV",{class:!0});var Dr=children$1(et);qe=claim_element(Dr,"BUTTON",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(qe)!=="svelte-5u2sco"&&(qe.innerHTML=De),Dr.forEach(detach),Mt.forEach(detach),Pt.forEach(detach),It.forEach(detach),xt.forEach(detach),Re=claim_space(St),Ne=claim_element(St,"SECTION",{id:!0,class:!0});var At=children$1(Ne);We.l(At),At.forEach(detach),je=claim_space(St),Ye=claim_element(St,"SECTION",{id:!0,class:!0});var mt=children$1(Ye);Fe=claim_element(mt,"FIGURE",{class:!0});var Lr=children$1(Fe);claim_component(He.$$.fragment,Lr),Lr.forEach(detach),nt=claim_space(mt),claim_component(ot.$$.fragment,mt),mt.forEach(detach),St.forEach(detach),this.h()},h(){attr(C,"class","logo-container"),attr(R,"class","options-wrapper flex flex-col justify-between items-end"),attr(E,"id","mobile-header"),attr(E,"class","row-start-1 z-10 px-6 pt-7 pb-3.5 flex justify-between items-end border-b border-b-black border-opacity-50"),attr(L,"id","vis-container"),attr(L,"class","w-full"),attr(K,"class",ie="bg-black text-white absolute top-4 right-0 border-none rounded-tl-[1rem] rounded-bl-[1rem] p-3 transition-transform ease-in-out "+(A[1]?"translate-x-full duration-200 pointer-events-none":"duration-[750ms] delay-500 pointer-events-auto")),attr(ye,"class","border-b border-b-white border-opacity-50 py-8 pr-8 pl-0"),attr(ue,"class","border-b border-b-white border-opacity-50 py-8 pr-8 pl-0"),attr(ce,"class","border-b border-b-white border-opacity-50 py-8 pr-4 pl-0"),attr(_e,"class","border-b border-b-white border-opacity-50 py-8 pr-4 pl-0"),attr(Pe,"class","py-8 pr-4 pl-0"),attr(ve,"class","overflow-y-auto overflow-x-hidden pt-0 pb-8 pl-10 pr-4"),attr(Me,"class","col-span-4"),attr(qe,"class","clean-btn"),attr(et,"class","p-2 border-l border-l-white border-opacity-50 flex items-center justify-center"),attr(Be,"class","grid grid-cols-5 h-16 border-t border-white border-opacity-50 pl-10"),attr(he,"class",Ue="pointer-events-auto absolute top-0 right-0 w-[85vw] h-full grid grid-rows-[minmax(0,1fr)_min-content] bg-black border border-white border-r-black rounded-tl-[3rem] rounded-bl-[3rem] transition-transform duration-500 ease-in-out overflow-hidden "+(A[3]?"translate-x-0":"translate-x-full")),attr(X,"id","filter-container"),attr(X,"class","absolute overflow-hidden top-0 left-0 w-full h-[110%] pointer-events-none"),attr(D,"class","row-start-2 z-20 w-full flex relative"),attr(Ne,"id","layout-container"),attr(Ne,"class","row-start-3 z-10 border-t flex justify-center items-center border-t-black border-opacity-50 h-12"),attr(Fe,"class","h-full aspect-square border-r border-r-dark-gray"),attr(Ye,"id","play-my-vis"),attr(Ye,"class","row-start-4 z-10 h-12 border-t border-t-black border-opacity-50 grid grid-cols-[min-content_minmax(0,1fr)]"),attr(T,"id","root"),attr(T,"class","w-full h-full overflow-hidden grid grid-rows-[max-content_minmax(0,1fr)_max-content_max-content]")},m(Ze,St){insert_hydration(Ze,T,St),append_hydration(T,E),append_hydration(E,C),mount_component(P,C,null),append_hydration(E,I),append_hydration(E,R),mount_component(F,R,null),append_hydration(T,O),append_hydration(T,D),append_hydration(D,L),mount_component(B,L,null),append_hydration(L,V),mount_component(U,L,null),append_hydration(L,z),mount_component(W,L,null),append_hydration(D,Z),append_hydration(D,X),append_hydration(X,K),append_hydration(K,Y),append_hydration(Y,Q),append_hydration(Y,te),append_hydration(X,ne),append_hydration(X,he),append_hydration(he,ve),append_hydration(ve,ye),mount_component(de,ye,null),append_hydration(ve,fe),append_hydration(ve,ue),mount_component(ge,ue,null),append_hydration(ve,ae),append_hydration(ve,ce),mount_component(se,ce,null),append_hydration(ve,le),append_hydration(ve,_e),mount_component(me,_e,null),append_hydration(ve,Ee),append_hydration(ve,Pe),mount_component(Ce,Pe,null),append_hydration(he,ke),append_hydration(he,Be),append_hydration(Be,Me),mount_component(Oe,Me,null),append_hydration(Be,Je),append_hydration(Be,et),append_hydration(et,qe),append_hydration(T,Re),append_hydration(T,Ne),wt[Ge].m(Ne,null),append_hydration(T,je),append_hydration(T,Ye),append_hydration(Ye,Fe),mount_component(He,Fe,null),append_hydration(Ye,nt),mount_component(ot,Ye,null),pt=!0,dt||(yt=[listen(K,"click",A[5]),listen(qe,"click",A[6]),action_destroyer(clickOutside.call(null,he)),listen(he,"outsideclick",A[6])],dt=!0)},p(Ze,[St]){(!pt||St&4)&&J!==(J=Ze[2]("menu.filters")+"")&&set_data(te,J),(!pt||St&2&&ie!==(ie="bg-black text-white absolute top-4 right-0 border-none rounded-tl-[1rem] rounded-bl-[1rem] p-3 transition-transform ease-in-out "+(Ze[1]?"translate-x-full duration-200 pointer-events-none":"duration-[750ms] delay-500 pointer-events-auto")))&&attr(K,"class",ie),(!pt||St&8&&Ue!==(Ue="pointer-events-auto absolute top-0 right-0 w-[85vw] h-full grid grid-rows-[minmax(0,1fr)_min-content] bg-black border border-white border-r-black rounded-tl-[3rem] rounded-bl-[3rem] transition-transform duration-500 ease-in-out overflow-hidden "+(Ze[3]?"translate-x-0":"translate-x-full")))&&attr(he,"class",Ue);let Wt=Ge;Ge=Ot(Ze),Ge===Wt?wt[Ge].p(Ze,St):(group_outros(),transition_out(wt[Wt],1,1,()=>{wt[Wt]=null}),check_outros(),We=wt[Ge],We?We.p(Ze,St):(We=wt[Ge]=Rt[Ge](Ze),We.c()),transition_in(We,1),We.m(Ne,null));const qt={};St&1024&&(qt.$$scope={dirty:St,ctx:Ze}),He.$set(qt)},i(Ze){pt||(transition_in(P.$$.fragment,Ze),transition_in(F.$$.fragment,Ze),transition_in(B.$$.fragment,Ze),transition_in(U.$$.fragment,Ze),transition_in(W.$$.fragment,Ze),transition_in(de.$$.fragment,Ze),transition_in(ge.$$.fragment,Ze),transition_in(se.$$.fragment,Ze),transition_in(me.$$.fragment,Ze),transition_in(Ce.$$.fragment,Ze),transition_in(Oe.$$.fragment,Ze),transition_in(We),transition_in(He.$$.fragment,Ze),transition_in(ot.$$.fragment,Ze),pt=!0)},o(Ze){transition_out(P.$$.fragment,Ze),transition_out(F.$$.fragment,Ze),transition_out(B.$$.fragment,Ze),transition_out(U.$$.fragment,Ze),transition_out(W.$$.fragment,Ze),transition_out(de.$$.fragment,Ze),transition_out(ge.$$.fragment,Ze),transition_out(se.$$.fragment,Ze),transition_out(me.$$.fragment,Ze),transition_out(Ce.$$.fragment,Ze),transition_out(Oe.$$.fragment,Ze),transition_out(We),transition_out(He.$$.fragment,Ze),transition_out(ot.$$.fragment,Ze),pt=!1},d(Ze){Ze&&detach(T),destroy_component(P),destroy_component(F),destroy_component(B),destroy_component(U),destroy_component(W),destroy_component(de),destroy_component(ge),destroy_component(se),destroy_component(me),destroy_component(Ce),destroy_component(Oe),wt[Ge].d(),destroy_component(He),destroy_component(ot),dt=!1,run_all(yt)}}}function instance$e(A,T,E){let C,P,I,R;component_subscribe(A,isToggleHidden,U=>E(1,C=U)),component_subscribe(A,$format,U=>E(2,P=U)),component_subscribe(A,isFilterOpen,U=>E(3,I=U)),component_subscribe(A,selected,U=>E(4,R=U));let{layout:F}=T;function O(){isFilterOpen.set(!0)}function D(){isFilterOpen.set(!1)}function L(){selected.set(null)}function B(){isSheetOpen.set(!0)}function V(U){F=U,E(0,F)}return A.$$set=U=>{"layout"in U&&E(0,F=U.layout)},[F,C,P,I,R,O,D,L,B,V]}class MobileFrame extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$e,create_fragment$g,safe_not_equal,{layout:0})}}function create_else_block$3(A){let T,E="...";return{c(){T=element("span"),T.textContent=E,this.h()},l(C){T=claim_element(C,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(T)!=="svelte-gxj7xe"&&(T.textContent=E),this.h()},h(){attr(T,"class","button__label text-xxs")},m(C,P){insert_hydration(C,T,P)},p:noop$1,i:noop$1,o:noop$1,d(C){C&&detach(T)}}}function create_if_block$6(A){let T,E,C,P,I,R;return E=new Icon({props:{icon:"caret"}}),{c(){T=element("div"),create_component(E.$$.fragment),C=space(),P=element("span"),I=text(A[0]),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);claim_component(E.$$.fragment,O),O.forEach(detach),C=claim_space(F),P=claim_element(F,"SPAN",{class:!0});var D=children$1(P);I=claim_text(D,A[0]),D.forEach(detach),this.h()},h(){attr(T,"class","button__icon svelte-l3v3h3"),attr(P,"class","button__label text-xxs")},m(F,O){insert_hydration(F,T,O),mount_component(E,T,null),insert_hydration(F,C,O),insert_hydration(F,P,O),append_hydration(P,I),R=!0},p(F,O){(!R||O&1)&&set_data(I,F[0])},i(F){R||(transition_in(E.$$.fragment,F),R=!0)},o(F){transition_out(E.$$.fragment,F),R=!1},d(F){F&&(detach(T),detach(C),detach(P)),destroy_component(E)}}}function create_fragment$f(A){let T,E,C,P,I,R,F,O,D;const L=[create_if_block$6,create_else_block$3],B=[];function V(W,Z){return W[0]?0:1}C=V(A),P=B[C]=L[C](A);const U=A[6].default,z=create_slot(U,A,A[5],null);return{c(){T=element("div"),E=element("button"),P.c(),I=space(),R=element("div"),z&&z.c(),this.h()},l(W){T=claim_element(W,"DIV",{class:!0});var Z=children$1(T);E=claim_element(Z,"BUTTON",{class:!0});var X=children$1(E);P.l(X),X.forEach(detach),I=claim_space(Z),R=claim_element(Z,"DIV",{class:!0});var K=children$1(R);z&&z.l(K),K.forEach(detach),Z.forEach(detach),this.h()},h(){attr(E,"class","button svelte-l3v3h3"),attr(R,"class","content svelte-l3v3h3"),attr(T,"class","dropdown svelte-l3v3h3"),toggle_class(T,"active",A[1])},m(W,Z){insert_hydration(W,T,Z),append_hydration(T,E),B[C].m(E,null),append_hydration(T,I),append_hydration(T,R),z&&z.m(R,null),F=!0,O||(D=[listen(E,"pointerup",A[4]),listen(T,"pointerenter",A[2]),listen(T,"pointerleave",A[3])],O=!0)},p(W,[Z]){let X=C;C=V(W),C===X?B[C].p(W,Z):(group_outros(),transition_out(B[X],1,1,()=>{B[X]=null}),check_outros(),P=B[C],P?P.p(W,Z):(P=B[C]=L[C](W),P.c()),transition_in(P,1),P.m(E,null)),z&&z.p&&(!F||Z&32)&&update_slot_base(z,U,W,W[5],F?get_slot_changes(U,W[5],Z,null):get_all_dirty_from_scope(W[5]),null),(!F||Z&2)&&toggle_class(T,"active",W[1])},i(W){F||(transition_in(P),transition_in(z,W),F=!0)},o(W){transition_out(P),transition_out(z,W),F=!1},d(W){W&&detach(T),B[C].d(),z&&z.d(W),O=!1,run_all(D)}}}function instance$d(A,T,E){let{$$slots:C={},$$scope:P}=T,{title:I}=T,R=!1;function F(L){E(1,R=!0),L.preventDefault(),L.stopPropagation()}function O(L){E(1,R=!1),L.preventDefault(),L.stopPropagation()}function D(L){E(1,R=!R),L.preventDefault(),L.stopPropagation()}return setContext$1("item-theme",{theme:"on-dark"}),A.$$set=L=>{"title"in L&&E(0,I=L.title),"$$scope"in L&&E(5,P=L.$$scope)},[I,R,F,O,D,P,C]}class DropdownMenu extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$d,create_fragment$f,safe_not_equal,{title:0})}}function create_default_slot$3(A){let T,E,C;function P(R){A[3](R)}let I={direction:"column",i18nPrefix:"menu.active.values.",categories:A[2],multiselect:!0,unselectBtn:!1,onDark:!0};return A[0]!==void 0&&(I.selected=A[0]),T=new InputGroup({props:I}),binding_callbacks.push(()=>bind$2(T,"selected",P)),{c(){create_component(T.$$.fragment)},l(R){claim_component(T.$$.fragment,R)},m(R,F){mount_component(T,R,F),C=!0},p(R,F){const O={};F&4&&(O.categories=R[2]),!E&&F&1&&(E=!0,O.selected=R[0],add_flush_callback(()=>E=!1)),T.$set(O)},i(R){C||(transition_in(T.$$.fragment,R),C=!0)},o(R){transition_out(T.$$.fragment,R),C=!1},d(R){destroy_component(T,R)}}}function create_fragment$e(A){let T,E;return T=new DropdownMenu({props:{title:A[1]("menu.active.title"),$$slots:{default:[create_default_slot$3]},$$scope:{ctx:A}}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p(C,[P]){const I={};P&2&&(I.title=C[1]("menu.active.title")),P&37&&(I.$$scope={dirty:P,ctx:C}),T.$set(I)},i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function instance$c(A,T,E){let C,P;component_subscribe(A,$format,O=>E(1,P=O));let I=[];const R=["complexity","link-project","link-client"];function F(O){I=O,E(0,I)}return A.$$.update=()=>{A.$$.dirty&2&&E(2,C=R.map(O=>({id:O,alias:P(`menu.active.values.${O}`)}))),A.$$.dirty&1&&complexityOn.set(I.includes("complexity")),A.$$.dirty&1&&linkProjectOn.set(I.includes("link-project")),A.$$.dirty&1&&linkClientOn.set(I.includes("link-client"))},[I,P,C,F]}class DropdownActivate extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$c,create_fragment$e,safe_not_equal,{})}}function create_default_slot$2(A){let T,E,C;function P(R){A[3](R)}let I={direction:"column",i18nPrefix:"menu.sort.values.",categories:A[1],multiselect:!1,onDark:!0};return A[2]!==void 0&&(I.selected=A[2]),T=new InputGroup({props:I}),binding_callbacks.push(()=>bind$2(T,"selected",P)),{c(){create_component(T.$$.fragment)},l(R){claim_component(T.$$.fragment,R)},m(R,F){mount_component(T,R,F),C=!0},p(R,F){const O={};F&2&&(O.categories=R[1]),!E&&F&4&&(E=!0,O.selected=R[2],add_flush_callback(()=>E=!1)),T.$set(O)},i(R){C||(transition_in(T.$$.fragment,R),C=!0)},o(R){transition_out(T.$$.fragment,R),C=!1},d(R){destroy_component(T,R)}}}function create_fragment$d(A){let T,E;return T=new DropdownMenu({props:{title:A[0]("menu.sort.title"),$$slots:{default:[create_default_slot$2]},$$scope:{ctx:A}}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p(C,[P]){const I={};P&1&&(I.title=C[0]("menu.sort.title")),P&38&&(I.$$scope={dirty:P,ctx:C}),T.$set(I)},i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function instance$b(A,T,E){let C,P,I;component_subscribe(A,$format,O=>E(0,P=O)),component_subscribe(A,sortBy,O=>E(2,I=O));const R=["dt","industry"];function F(O){I=O,sortBy.set(I)}return A.$$.update=()=>{A.$$.dirty&1&&E(1,C=R.map(O=>({id:O,alias:P(`menu.sort.values.${O}`)})))},[P,C,I,F]}class DropdownSortBy extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$b,create_fragment$d,safe_not_equal,{})}}function create_default_slot$1(A){let T,E,C=A[1]("menu.sort.title")+"",P,I,R,F,O,D,L,B=A[1]("menu.active.title")+"",V,U,z,W,Z;function X(J){A[5](J)}let K={direction:"column",i18nPrefix:"menu.sort.values.",categories:A[3],multiselect:!1,onDark:!0};A[4]!==void 0&&(K.selected=A[4]),R=new InputGroup({props:K}),binding_callbacks.push(()=>bind$2(R,"selected",X));function Y(J){A[6](J)}let Q={direction:"column",i18nPrefix:"menu.active.values.",categories:A[2],multiselect:!0,unselectBtn:!1,onDark:!0};return A[0]!==void 0&&(Q.selected=A[0]),z=new InputGroup({props:Q}),binding_callbacks.push(()=>bind$2(z,"selected",Y)),{c(){T=element("div"),E=element("h5"),P=text(C),I=space(),create_component(R.$$.fragment),O=space(),D=element("div"),L=element("h5"),V=text(B),U=space(),create_component(z.$$.fragment),this.h()},l(J){T=claim_element(J,"DIV",{class:!0});var te=children$1(T);E=claim_element(te,"H5",{class:!0});var ie=children$1(E);P=claim_text(ie,C),ie.forEach(detach),I=claim_space(te),claim_component(R.$$.fragment,te),te.forEach(detach),O=claim_space(J),D=claim_element(J,"DIV",{class:!0});var ne=children$1(D);L=claim_element(ne,"H5",{class:!0});var he=children$1(L);V=claim_text(he,B),he.forEach(detach),U=claim_space(ne),claim_component(z.$$.fragment,ne),ne.forEach(detach),this.h()},h(){attr(E,"class","svelte-iiocv2"),attr(T,"class","dropdown-section svelte-iiocv2"),attr(L,"class","svelte-iiocv2"),attr(D,"class","dropdown-section svelte-iiocv2")},m(J,te){insert_hydration(J,T,te),append_hydration(T,E),append_hydration(E,P),append_hydration(T,I),mount_component(R,T,null),insert_hydration(J,O,te),insert_hydration(J,D,te),append_hydration(D,L),append_hydration(L,V),append_hydration(D,U),mount_component(z,D,null),Z=!0},p(J,te){(!Z||te&2)&&C!==(C=J[1]("menu.sort.title")+"")&&set_data(P,C);const ie={};te&8&&(ie.categories=J[3]),!F&&te&16&&(F=!0,ie.selected=J[4],add_flush_callback(()=>F=!1)),R.$set(ie),(!Z||te&2)&&B!==(B=J[1]("menu.active.title")+"")&&set_data(V,B);const ne={};te&4&&(ne.categories=J[2]),!W&&te&1&&(W=!0,ne.selected=J[0],add_flush_callback(()=>W=!1)),z.$set(ne)},i(J){Z||(transition_in(R.$$.fragment,J),transition_in(z.$$.fragment,J),Z=!0)},o(J){transition_out(R.$$.fragment,J),transition_out(z.$$.fragment,J),Z=!1},d(J){J&&(detach(T),detach(O),detach(D)),destroy_component(R),destroy_component(z)}}}function create_fragment$c(A){let T,E;return T=new DropdownMenu({props:{$$slots:{default:[create_default_slot$1]},$$scope:{ctx:A}}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p(C,[P]){const I={};P&543&&(I.$$scope={dirty:P,ctx:C}),T.$set(I)},i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function instance$a(A,T,E){let C,P,I,R;component_subscribe(A,$format,V=>E(1,I=V)),component_subscribe(A,sortBy,V=>E(4,R=V));const F=["dt","industry"];let O=[];const D=["complexity","link-project","link-client"];function L(V){R=V,sortBy.set(R)}function B(V){O=V,E(0,O)}return A.$$.update=()=>{A.$$.dirty&2&&E(3,C=F.map(V=>({id:V,alias:I(`menu.sort.values.${V}`)}))),A.$$.dirty&2&&E(2,P=D.map(V=>({id:V,alias:I(`menu.active.values.${V}`)}))),A.$$.dirty&1&&complexityOn.set(O.includes("complexity")),A.$$.dirty&1&&linkProjectOn.set(O.includes("link-project")),A.$$.dirty&1&&linkClientOn.set(O.includes("link-client"))},[O,I,P,C,R,L,B]}class DropdownAll extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$a,create_fragment$c,safe_not_equal,{})}}function create_default_slot_1(A){let T,E;return T=new Icon({props:{icon:"infoDefault"}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p:noop$1,i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function create_else_block$2(A){let T,E,C;return E=new DropdownAll({}),{c(){T=element("li"),create_component(E.$$.fragment),this.h()},l(P){T=claim_element(P,"LI",{id:!0,class:!0});var I=children$1(T);claim_component(E.$$.fragment,I),I.forEach(detach),this.h()},h(){attr(T,"id","sortby-activate"),attr(T,"class","border-y border-y-black border-r border-r-black")},m(P,I){insert_hydration(P,T,I),mount_component(E,T,null),C=!0},i(P){C||(transition_in(E.$$.fragment,P),C=!0)},o(P){transition_out(E.$$.fragment,P),C=!1},d(P){P&&detach(T),destroy_component(E)}}}function create_if_block$5(A){let T,E,C,P,I,R;return E=new DropdownSortBy({}),I=new DropdownActivate({}),{c(){T=element("li"),create_component(E.$$.fragment),C=space(),P=element("li"),create_component(I.$$.fragment),this.h()},l(F){T=claim_element(F,"LI",{id:!0,class:!0});var O=children$1(T);claim_component(E.$$.fragment,O),O.forEach(detach),C=claim_space(F),P=claim_element(F,"LI",{id:!0,class:!0});var D=children$1(P);claim_component(I.$$.fragment,D),D.forEach(detach),this.h()},h(){attr(T,"id","sortby"),attr(T,"class","border-y border-y-black border-r border-r-black"),attr(P,"id","activate"),attr(P,"class","border-y border-y-black border-r border-r-black")},m(F,O){insert_hydration(F,T,O),mount_component(E,T,null),insert_hydration(F,C,O),insert_hydration(F,P,O),mount_component(I,P,null),R=!0},i(F){R||(transition_in(E.$$.fragment,F),transition_in(I.$$.fragment,F),R=!0)},o(F){transition_out(E.$$.fragment,F),transition_out(I.$$.fragment,F),R=!1},d(F){F&&(detach(T),detach(C),detach(P)),destroy_component(E),destroy_component(I)}}}function create_default_slot(A){let T,E;return T=new Icon({props:{icon:"collapse"}}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p:noop$1,i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function create_fragment$b(A){let T,E,C,P,I,R,F,O,D,L,B=`translate(0, ${A[3]?-1*A[2]:0}px)`,V=`${A[3]?0:A[2]}px`,U,z,W,Z,X,K,Y,Q,J,te,ie,ne,he,ve,ye,de,fe,ue,ge,ae,ce,se,le,_e,me,Ee,Pe,Ce,ke,Be,Me,Oe,Je,et,qe,De,Ue,Re,Ne,Ge,We,je,Ye,Fe,He,nt,ot,pt,dt,yt,Rt,wt;I=new InputProduct({props:{parent:A[1]}}),L=new Button({props:{onClick:A[7],$$slots:{default:[create_default_slot_1]},$$scope:{ctx:A}}});const Ot=[create_if_block$5,create_else_block$2],Ze=[];function St(Qe,xt){return Qe[4]>=1024?0:1}W=St(A),Z=Ze[W]=Ot[W](A),Y=new ClearAllFilterButton({}),te=new PlayButton({}),ve=new ProjectLogo({}),ge=new Button({props:{onClick:A[5],colorDefault:"var(--clr-white)",colorHover:"var(--clr-accent)",colorActive:"var(--clr-accent-low)",$$slots:{default:[create_default_slot]},$$scope:{ctx:A}}}),_e=new LanguageChange({});function Wt(Qe){A[8](Qe)}let qt={};return A[0]!==void 0&&(qt.layout=A[0]),ke=new InputLayout({props:qt}),binding_callbacks.push(()=>bind$2(ke,"layout",Wt)),Je=new InputPeriod({}),De=new InputDesign({}),Ne=new InputGoal({}),je=new InputIndustry({}),He=new Signals({}),ot=new Visualization({}),dt=new File({}),{c(){T=element("div"),E=element("section"),C=element("article"),P=element("div"),create_component(I.$$.fragment),O=space(),D=element("figure"),create_component(L.$$.fragment),U=space(),z=element("ul"),Z.c(),X=space(),K=element("li"),create_component(Y.$$.fragment),Q=space(),J=element("li"),create_component(te.$$.fragment),ie=space(),ne=element("li"),he=element("div"),create_component(ve.$$.fragment),ye=space(),de=element("li"),fe=element("figure"),ue=element("div"),create_component(ge.$$.fragment),ce=space(),se=element("li"),le=element("div"),create_component(_e.$$.fragment),me=space(),Ee=element("section"),Pe=element("ul"),Ce=element("li"),create_component(ke.$$.fragment),Me=space(),Oe=element("li"),create_component(Je.$$.fragment),et=space(),qe=element("li"),create_component(De.$$.fragment),Ue=space(),Re=element("li"),create_component(Ne.$$.fragment),Ge=space(),We=element("li"),create_component(je.$$.fragment),Ye=space(),Fe=element("section"),create_component(He.$$.fragment),nt=space(),create_component(ot.$$.fragment),pt=space(),create_component(dt.$$.fragment),this.h()},l(Qe){T=claim_element(Qe,"DIV",{id:!0,class:!0});var xt=children$1(T);E=claim_element(xt,"SECTION",{id:!0,class:!0});var Lt=children$1(E);C=claim_element(Lt,"ARTICLE",{id:!0,class:!0});var It=children$1(C);P=claim_element(It,"DIV",{class:!0});var Ut=children$1(P);claim_component(I.$$.fragment,Ut),Ut.forEach(detach),O=claim_space(It),D=claim_element(It,"FIGURE",{class:!0});var rr=children$1(D);claim_component(L.$$.fragment,rr),rr.forEach(detach),It.forEach(detach),U=claim_space(Lt),z=claim_element(Lt,"UL",{id:!0,class:!0});var Pt=children$1(z);Z.l(Pt),X=claim_space(Pt),K=claim_element(Pt,"LI",{id:!0,class:!0});var Bt=children$1(K);claim_component(Y.$$.fragment,Bt),Bt.forEach(detach),Q=claim_space(Pt),J=claim_element(Pt,"LI",{id:!0,class:!0});var hr=children$1(J);claim_component(te.$$.fragment,hr),hr.forEach(detach),ie=claim_space(Pt),ne=claim_element(Pt,"LI",{id:!0,class:!0});var wr=children$1(ne);he=claim_element(wr,"DIV",{class:!0});var Cr=children$1(he);claim_component(ve.$$.fragment,Cr),Cr.forEach(detach),wr.forEach(detach),ye=claim_space(Pt),de=claim_element(Pt,"LI",{id:!0,class:!0});var nr=children$1(de);fe=claim_element(nr,"FIGURE",{class:!0});var Or=children$1(fe);ue=claim_element(Or,"DIV",{class:!0});var Mt=children$1(ue);claim_component(ge.$$.fragment,Mt),Mt.forEach(detach),Or.forEach(detach),nr.forEach(detach),ce=claim_space(Pt),se=claim_element(Pt,"LI",{id:!0,class:!0});var Pr=children$1(se);le=claim_element(Pr,"DIV",{class:!0});var Dr=children$1(le);claim_component(_e.$$.fragment,Dr),Dr.forEach(detach),Pr.forEach(detach),Pt.forEach(detach),Lt.forEach(detach),me=claim_space(xt),Ee=claim_element(xt,"SECTION",{id:!0,class:!0});var At=children$1(Ee);Pe=claim_element(At,"UL",{});var mt=children$1(Pe);Ce=claim_element(mt,"LI",{class:!0});var Lr=children$1(Ce);claim_component(ke.$$.fragment,Lr),Lr.forEach(detach),Me=claim_space(mt),Oe=claim_element(mt,"LI",{class:!0});var kr=children$1(Oe);claim_component(Je.$$.fragment,kr),kr.forEach(detach),et=claim_space(mt),qe=claim_element(mt,"LI",{class:!0});var hn=children$1(qe);claim_component(De.$$.fragment,hn),hn.forEach(detach),Ue=claim_space(mt),Re=claim_element(mt,"LI",{class:!0});var cn=children$1(Re);claim_component(Ne.$$.fragment,cn),cn.forEach(detach),Ge=claim_space(mt),We=claim_element(mt,"LI",{class:!0});var un=children$1(We);claim_component(je.$$.fragment,un),un.forEach(detach),mt.forEach(detach),At.forEach(detach),Ye=claim_space(xt),Fe=claim_element(xt,"SECTION",{id:!0,class:!0});var Yt=children$1(Fe);claim_component(He.$$.fragment,Yt),nt=claim_space(Yt),claim_component(ot.$$.fragment,Yt),pt=claim_space(Yt),claim_component(dt.$$.fragment,Yt),Yt.forEach(detach),xt.forEach(detach),this.h()},h(){attr(P,"class","pt-12 pr-0 pb-6 pl-12"),add_render_callback(()=>A[6].call(P)),attr(D,"class","absolute top-12 right-12 w-10 h-10"),attr(C,"id","shrink-panel"),attr(C,"class","relative overflow-hidden transition-all duration-300 ease-in-out"),set_style(C,"transform",B),set_style(C,"max-height",V),attr(K,"id","clear-all"),attr(K,"class","border-y border-y-black border-r border-r-black py-0 px-3"),attr(J,"id","play-my-vis"),attr(J,"class","border-y border-y-black border-r border-r-black"),attr(he,"class","h-10 flex py-2"),attr(ne,"id","project-logo"),attr(ne,"class","border-y border-y-black px-8 h-full max-h-full"),attr(ue,"class",ae="rotate transition-transform duration-150 ease-in-out origin-center "+(A[3]?"rotate-180":"rotate-0")),attr(fe,"class","absolute top-full left-1/3 -translate-y-1/2 w-8"),attr(de,"id","shrink-button-wrapper"),attr(de,"class","border-y border-y-black relative z-20 hidden lg:block"),attr(le,"class","mr-12 z-40"),attr(se,"id","change-language"),attr(se,"class","border-y border-y-black flex items-center"),attr(z,"id","top-panel-menu"),attr(z,"class","h-10 grid md:grid-cols-[auto_auto_max-content_max-content_minmax(0,1fr)_min-content] lg:grid-cols-[auto_auto_auto_max-content_max-content_minmax(0,1fr)_min-content]"),attr(E,"id","top-panel"),attr(E,"class","col-start-2 col-span-full row-start-1 row-span-1 z-20"),attr(Ce,"class","pb-7 pr-6 pl-0 border-b border-b-black border-opacity-40 input-layout"),attr(Oe,"class","py-7 pr-6 pl-0 border-b border-b-black border-opacity-40 input-period"),attr(qe,"class","py-7 pr-6 pl-0 border-b border-b-black border-opacity-40 input-design"),attr(Re,"class","py-7 pr-6 pl-0 border-b border-b-black border-opacity-40 input-goal"),attr(We,"class","py-7 pr-6 pl-0 input-industry"),attr(Ee,"id","left-panel"),attr(Ee,"class","col-start-1 col-span-1 row-start-1 row-span-full z-10 border-r border-r-black overflow-y-auto pt-12 pr-6 pb-6 pl-12 flex flex-col"),attr(Fe,"id","vis-container"),attr(Fe,"class","col-start-2 col-span-full row-start-2 relative"),attr(T,"id","root"),attr(T,"class","w-full h-full relative overflow-hidden grid md:grid-rows-[auto_1fr] md:grid-cols-[240px_repeat(4,minmax(0,1fr))] xl:grid-cols-5")},m(Qe,xt){insert_hydration(Qe,T,xt),append_hydration(T,E),append_hydration(E,C),append_hydration(C,P),mount_component(I,P,null),R=add_iframe_resize_listener(P,A[6].bind(P)),append_hydration(C,O),append_hydration(C,D),mount_component(L,D,null),append_hydration(E,U),append_hydration(E,z),Ze[W].m(z,null),append_hydration(z,X),append_hydration(z,K),mount_component(Y,K,null),append_hydration(z,Q),append_hydration(z,J),mount_component(te,J,null),append_hydration(z,ie),append_hydration(z,ne),append_hydration(ne,he),mount_component(ve,he,null),append_hydration(z,ye),append_hydration(z,de),append_hydration(de,fe),append_hydration(fe,ue),mount_component(ge,ue,null),append_hydration(z,ce),append_hydration(z,se),append_hydration(se,le),mount_component(_e,le,null),append_hydration(T,me),append_hydration(T,Ee),append_hydration(Ee,Pe),append_hydration(Pe,Ce),mount_component(ke,Ce,null),append_hydration(Pe,Me),append_hydration(Pe,Oe),mount_component(Je,Oe,null),append_hydration(Pe,et),append_hydration(Pe,qe),mount_component(De,qe,null),append_hydration(Pe,Ue),append_hydration(Pe,Re),mount_component(Ne,Re,null),append_hydration(Pe,Ge),append_hydration(Pe,We),mount_component(je,We,null),append_hydration(T,Ye),append_hydration(T,Fe),mount_component(He,Fe,null),append_hydration(Fe,nt),mount_component(ot,Fe,null),append_hydration(Fe,pt),mount_component(dt,Fe,null),yt=!0,Rt||(wt=action_destroyer(F=castContainer.call(null,P,{context:A[1],hasMask:!0,propagateOpacity:"#shrink-panel"})),Rt=!0)},p(Qe,[xt]){const Lt={};xt&2&&(Lt.parent=Qe[1]),I.$set(Lt),F&&is_function(F.update)&&xt&2&&F.update.call(null,{context:Qe[1],hasMask:!0,propagateOpacity:"#shrink-panel"});const It={};xt&512&&(It.$$scope={dirty:xt,ctx:Qe}),L.$set(It),xt&12&&B!==(B=`translate(0, ${Qe[3]?-1*Qe[2]:0}px)`)&&set_style(C,"transform",B),xt&12&&V!==(V=`${Qe[3]?0:Qe[2]}px`)&&set_style(C,"max-height",V);let Ut=W;W=St(Qe),W!==Ut&&(group_outros(),transition_out(Ze[Ut],1,1,()=>{Ze[Ut]=null}),check_outros(),Z=Ze[W],Z||(Z=Ze[W]=Ot[W](Qe),Z.c()),transition_in(Z,1),Z.m(z,X));const rr={};xt&512&&(rr.$$scope={dirty:xt,ctx:Qe}),ge.$set(rr),(!yt||xt&8&&ae!==(ae="rotate transition-transform duration-150 ease-in-out origin-center "+(Qe[3]?"rotate-180":"rotate-0")))&&attr(ue,"class",ae);const Pt={};!Be&&xt&1&&(Be=!0,Pt.layout=Qe[0],add_flush_callback(()=>Be=!1)),ke.$set(Pt)},i(Qe){yt||(transition_in(I.$$.fragment,Qe),transition_in(L.$$.fragment,Qe),transition_in(Z),transition_in(Y.$$.fragment,Qe),transition_in(te.$$.fragment,Qe),transition_in(ve.$$.fragment,Qe),transition_in(ge.$$.fragment,Qe),transition_in(_e.$$.fragment,Qe),transition_in(ke.$$.fragment,Qe),transition_in(Je.$$.fragment,Qe),transition_in(De.$$.fragment,Qe),transition_in(Ne.$$.fragment,Qe),transition_in(je.$$.fragment,Qe),transition_in(He.$$.fragment,Qe),transition_in(ot.$$.fragment,Qe),transition_in(dt.$$.fragment,Qe),yt=!0)},o(Qe){transition_out(I.$$.fragment,Qe),transition_out(L.$$.fragment,Qe),transition_out(Z),transition_out(Y.$$.fragment,Qe),transition_out(te.$$.fragment,Qe),transition_out(ve.$$.fragment,Qe),transition_out(ge.$$.fragment,Qe),transition_out(_e.$$.fragment,Qe),transition_out(ke.$$.fragment,Qe),transition_out(Je.$$.fragment,Qe),transition_out(De.$$.fragment,Qe),transition_out(Ne.$$.fragment,Qe),transition_out(je.$$.fragment,Qe),transition_out(He.$$.fragment,Qe),transition_out(ot.$$.fragment,Qe),transition_out(dt.$$.fragment,Qe),yt=!1},d(Qe){Qe&&detach(T),destroy_component(I),R(),destroy_component(L),Ze[W].d(),destroy_component(Y),destroy_component(te),destroy_component(ve),destroy_component(ge),destroy_component(_e),destroy_component(ke),destroy_component(Je),destroy_component(De),destroy_component(Ne),destroy_component(je),destroy_component(He),destroy_component(ot),destroy_component(dt),Rt=!1,wt()}}}function instance$9(A,T,E){let C;component_subscribe(A,width,V=>E(4,C=V));const P=new Container;P.name="top-panel";let{layout:I}=T,R,F=!1;function O(){E(3,F=!F)}function D(){R=this.clientHeight,E(2,R)}const L=()=>isSheetOpen.set(!0);function B(V){I=V,E(0,I)}return A.$$set=V=>{"layout"in V&&E(0,I=V.layout)},[I,P,R,F,C,O,D,L,B]}class DesktopFrame extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$9,create_fragment$b,safe_not_equal,{layout:0})}}function create_fragment$a(A){let T,E,C,P,I,R,F,O,D,L,B,V,U,z=A[1]("page.hero")+"",W,Z,X,K,Y=A[1]("techsheet.main")+"",Q,J,te,ie,ne=A[1]("techsheet.encourage")+"",he,ve,ye,de,fe=A[1]("techsheet.made-by")+"",ue,ge,ae,ce,se,le="Flávia Marinho",_e,me=A[1]("techsheet.roles.flavia")+"",Ee,Pe,Ce,ke,Be,Me="Otávio Burin",Oe,Je=A[1]("techsheet.roles.otavio")+"",et,qe,De,Ue,Re,Ne="Italo Oliveira",Ge,We=A[1]("techsheet.roles.italo")+"",je,Ye,Fe,He,nt,ot="Quintino Andrade",pt,dt=A[1]("techsheet.roles.quintino")+"",yt,Rt,wt,Ot,Ze,St="Ludmila Souza",Wt,qt=A[1]("techsheet.roles.ludmila")+"",Qe,xt,Lt,It,Ut,rr="Gabriel Maciel",Pt,Bt=A[1]("techsheet.roles.gabriel")+"",hr,wr,Cr,nr,Or='<a href="https://datadotestudio.com/" target="_blank">datadot.com.br</a>',Mt,Pr,Dr;return O=new Icon({props:{icon:"closeX"}}),{c(){T=element("div"),E=element("div"),C=space(),P=element("div"),I=element("div"),R=element("div"),F=element("button"),create_component(O.$$.fragment),D=space(),L=element("div"),B=element("div"),V=element("h3"),U=text("datadot "),W=text(z),Z=space(),X=element("div"),K=element("p"),Q=text(Y),J=space(),te=element("p"),ie=element("span"),he=text(ne),ve=space(),ye=element("div"),de=element("h5"),ue=text(fe),ge=space(),ae=element("ul"),ce=element("li"),se=element("span"),se.textContent=le,_e=text(" ("),Ee=text(me),Pe=text(")"),Ce=space(),ke=element("li"),Be=element("span"),Be.textContent=Me,Oe=text(" ("),et=text(Je),qe=text(")"),De=space(),Ue=element("li"),Re=element("span"),Re.textContent=Ne,Ge=text(" ("),je=text(We),Ye=text(")"),Fe=space(),He=element("li"),nt=element("span"),nt.textContent=ot,pt=text(" ("),yt=text(dt),Rt=text(")"),wt=space(),Ot=element("li"),Ze=element("span"),Ze.textContent=St,Wt=text(" ("),Qe=text(qt),xt=text(")"),Lt=space(),It=element("li"),Ut=element("span"),Ut.textContent=rr,Pt=text(" ("),hr=text(Bt),wr=text(")"),Cr=space(),nr=element("div"),nr.innerHTML=Or,this.h()},l(At){T=claim_element(At,"DIV",{class:!0});var mt=children$1(T);E=claim_element(mt,"DIV",{class:!0}),children$1(E).forEach(detach),C=claim_space(mt),P=claim_element(mt,"DIV",{class:!0});var Lr=children$1(P);I=claim_element(Lr,"DIV",{class:!0});var kr=children$1(I);R=claim_element(kr,"DIV",{class:!0});var hn=children$1(R);F=claim_element(hn,"BUTTON",{class:!0});var cn=children$1(F);claim_component(O.$$.fragment,cn),cn.forEach(detach),hn.forEach(detach),D=claim_space(kr),L=claim_element(kr,"DIV",{class:!0});var un=children$1(L);B=claim_element(un,"DIV",{class:!0});var Yt=children$1(B);V=claim_element(Yt,"H3",{class:!0});var Wn=children$1(V);U=claim_text(Wn,"datadot "),W=claim_text(Wn,z),Wn.forEach(detach),Z=claim_space(Yt),X=claim_element(Yt,"DIV",{});var An=children$1(X);K=claim_element(An,"P",{class:!0});var fi=children$1(K);Q=claim_text(fi,Y),fi.forEach(detach),J=claim_space(An),te=claim_element(An,"P",{class:!0});var pi=children$1(te);ie=claim_element(pi,"SPAN",{class:!0});var qn=children$1(ie);he=claim_text(qn,ne),qn.forEach(detach),pi.forEach(detach),An.forEach(detach),ve=claim_space(Yt),ye=claim_element(Yt,"DIV",{});var wn=children$1(ye);de=claim_element(wn,"H5",{class:!0});var mi=children$1(de);ue=claim_text(mi,fe),mi.forEach(detach),ge=claim_space(wn),ae=claim_element(wn,"UL",{class:!0});var ir=children$1(ae);ce=claim_element(ir,"LI",{});var dn=children$1(ce);se=claim_element(dn,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(se)!=="svelte-1po971f"&&(se.textContent=le),_e=claim_text(dn," ("),Ee=claim_text(dn,me),Pe=claim_text(dn,")"),dn.forEach(detach),Ce=claim_space(ir),ke=claim_element(ir,"LI",{});var fn=children$1(ke);Be=claim_element(fn,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(Be)!=="svelte-gnyq50"&&(Be.textContent=Me),Oe=claim_text(fn," ("),et=claim_text(fn,Je),qe=claim_text(fn,")"),fn.forEach(detach),De=claim_space(ir),Ue=claim_element(ir,"LI",{});var pn=children$1(Ue);Re=claim_element(pn,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(Re)!=="svelte-js96a2"&&(Re.textContent=Ne),Ge=claim_text(pn," ("),je=claim_text(pn,We),Ye=claim_text(pn,")"),pn.forEach(detach),Fe=claim_space(ir),He=claim_element(ir,"LI",{});var Br=children$1(He);nt=claim_element(Br,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(nt)!=="svelte-f1sz9s"&&(nt.textContent=ot),pt=claim_text(Br," ("),yt=claim_text(Br,dt),Rt=claim_text(Br,")"),Br.forEach(detach),wt=claim_space(ir),Ot=claim_element(ir,"LI",{});var mn=children$1(Ot);Ze=claim_element(mn,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(Ze)!=="svelte-1wvsova"&&(Ze.textContent=St),Wt=claim_text(mn," ("),Qe=claim_text(mn,qt),xt=claim_text(mn,")"),mn.forEach(detach),Lt=claim_space(ir),It=claim_element(ir,"LI",{});var $r=children$1(It);Ut=claim_element($r,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(Ut)!=="svelte-kjcu9f"&&(Ut.textContent=rr),Pt=claim_text($r," ("),hr=claim_text($r,Bt),wr=claim_text($r,")"),$r.forEach(detach),ir.forEach(detach),wn.forEach(detach),Cr=claim_space(Yt),nr=claim_element(Yt,"DIV",{"data-svelte-h":!0}),get_svelte_dataset(nr)!=="svelte-1nh53s1"&&(nr.innerHTML=Or),Yt.forEach(detach),un.forEach(detach),kr.forEach(detach),Lr.forEach(detach),mt.forEach(detach),this.h()},h(){attr(E,"class","techsheet-backdrop svelte-1lw7ke"),attr(F,"class","clean-btn svelte-1lw7ke"),attr(R,"class","close-wrapper svelte-1lw7ke"),attr(V,"class","text-lg"),attr(K,"class","text-xs svelte-1lw7ke"),attr(ie,"class","font-medium"),attr(te,"class","text-xs svelte-1lw7ke"),attr(de,"class","svelte-1lw7ke"),attr(se,"class","font-medium"),attr(Be,"class","font-medium"),attr(Re,"class","font-medium"),attr(nt,"class","font-medium"),attr(Ze,"class","font-medium"),attr(Ut,"class","font-medium"),attr(ae,"class","text-xs"),attr(B,"class","content__body svelte-1lw7ke"),attr(L,"class","content svelte-1lw7ke"),attr(I,"class","techsheet-panel svelte-1lw7ke"),attr(P,"class","techsheet-panel-wrapper svelte-1lw7ke"),attr(T,"class","techsheet svelte-1lw7ke")},m(At,mt){insert_hydration(At,T,mt),append_hydration(T,E),append_hydration(T,C),append_hydration(T,P),append_hydration(P,I),append_hydration(I,R),append_hydration(R,F),mount_component(O,F,null),append_hydration(I,D),append_hydration(I,L),append_hydration(L,B),append_hydration(B,V),append_hydration(V,U),append_hydration(V,W),append_hydration(B,Z),append_hydration(B,X),append_hydration(X,K),append_hydration(K,Q),append_hydration(X,J),append_hydration(X,te),append_hydration(te,ie),append_hydration(ie,he),append_hydration(B,ve),append_hydration(B,ye),append_hydration(ye,de),append_hydration(de,ue),append_hydration(ye,ge),append_hydration(ye,ae),append_hydration(ae,ce),append_hydration(ce,se),append_hydration(ce,_e),append_hydration(ce,Ee),append_hydration(ce,Pe),append_hydration(ae,Ce),append_hydration(ae,ke),append_hydration(ke,Be),append_hydration(ke,Oe),append_hydration(ke,et),append_hydration(ke,qe),append_hydration(ae,De),append_hydration(ae,Ue),append_hydration(Ue,Re),append_hydration(Ue,Ge),append_hydration(Ue,je),append_hydration(Ue,Ye),append_hydration(ae,Fe),append_hydration(ae,He),append_hydration(He,nt),append_hydration(He,pt),append_hydration(He,yt),append_hydration(He,Rt),append_hydration(ae,wt),append_hydration(ae,Ot),append_hydration(Ot,Ze),append_hydration(Ot,Wt),append_hydration(Ot,Qe),append_hydration(Ot,xt),append_hydration(ae,Lt),append_hydration(ae,It),append_hydration(It,Ut),append_hydration(It,Pt),append_hydration(It,hr),append_hydration(It,wr),append_hydration(B,Cr),append_hydration(B,nr),A[4](T),Mt=!0,Pr||(Dr=listen(F,"click",A[2]),Pr=!0)},p(At,[mt]){(!Mt||mt&2)&&z!==(z=At[1]("page.hero")+"")&&set_data(W,z),(!Mt||mt&2)&&Y!==(Y=At[1]("techsheet.main")+"")&&set_data(Q,Y),(!Mt||mt&2)&&ne!==(ne=At[1]("techsheet.encourage")+"")&&set_data(he,ne),(!Mt||mt&2)&&fe!==(fe=At[1]("techsheet.made-by")+"")&&set_data(ue,fe),(!Mt||mt&2)&&me!==(me=At[1]("techsheet.roles.flavia")+"")&&set_data(Ee,me),(!Mt||mt&2)&&Je!==(Je=At[1]("techsheet.roles.otavio")+"")&&set_data(et,Je),(!Mt||mt&2)&&We!==(We=At[1]("techsheet.roles.italo")+"")&&set_data(je,We),(!Mt||mt&2)&&dt!==(dt=At[1]("techsheet.roles.quintino")+"")&&set_data(yt,dt),(!Mt||mt&2)&&qt!==(qt=At[1]("techsheet.roles.ludmila")+"")&&set_data(Qe,qt),(!Mt||mt&2)&&Bt!==(Bt=At[1]("techsheet.roles.gabriel")+"")&&set_data(hr,Bt)},i(At){Mt||(transition_in(O.$$.fragment,At),Mt=!0)},o(At){transition_out(O.$$.fragment,At),Mt=!1},d(At){At&&detach(T),destroy_component(O),A[4](null),Pr=!1,Dr()}}}function instance$8(A,T,E){let C,P;component_subscribe(A,isSheetOpen,L=>E(3,C=L)),component_subscribe(A,$format,L=>E(1,P=L));let I;function R(){isSheetOpen.set(!1)}function F(){I&&I.classList.add("open")}function O(){I&&I.classList.remove("open")}function D(L){binding_callbacks[L?"unshift":"push"](()=>{I=L,E(0,I)})}return A.$$.update=()=>{A.$$.dirty&9&&(I&&C?gsapWithCSS.timeline({overwrite:!0,onStart:F}).fromTo(".techsheet-backdrop",{opacity:0},{opacity:1,duration:.15}).fromTo(".techsheet-panel",{y:12,opacity:0},{y:0,opacity:1,duration:.3},"<"):I&&!C&&gsapWithCSS.timeline({overwrite:!0,onComplete:O,onInterrupt:O}).to(".techsheet-backdrop",{opacity:0,duration:.5}).to(".techsheet-panel",{y:-12,opacity:0,duration:.3},"<"))},[I,P,R,C,D]}class TechSheet extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$8,create_fragment$a,safe_not_equal,{})}}function get_each_context$1(A,T,E){const C=A.slice();return C[45]=T[E],C[47]=E,C}function create_if_block$4(A){let T,E,C,P,I,R='<svg width="100%" height="100%" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg"><g class="stroke-white hover:opacity-60 transition-colors" stroke-miterlimit="10" stroke-linecap="round"><path d="M10.1 19.2C15.1258 19.2 19.2 15.1258 19.2 10.1C19.2 5.07421 15.1258 1 10.1 1C5.07421 1 1 5.07421 1 10.1C1 15.1258 5.07421 19.2 10.1 19.2Z" fill="transparent"></path><path d="M5.7998 5.7998L14.3998 14.3998"></path><path d="M14.3998 5.7998L5.7998 14.3998"></path></g></svg>',F,O,D,L,B,V=A[6](A[3]===0?"onboarding.panel.skip":"onboarding.panel.back")+"",U,z,W,Z=A[6]("onboarding.panel.next")+"",X,K,Y,Q=ensure_array_like(A[4]),J=[];for(let te=0;te<Q.length;te+=1)J[te]=create_each_block$1(get_each_context$1(A,Q,te));return{c(){T=element("section"),E=element("div"),C=element("article"),P=element("div"),I=element("button"),I.innerHTML=R,F=space(),O=element("div");for(let te=0;te<J.length;te+=1)J[te].c();D=space(),L=element("div"),B=element("button"),U=text(V),z=space(),W=element("button"),X=text(Z),this.h()},l(te){T=claim_element(te,"SECTION",{id:!0,class:!0});var ie=children$1(T);E=claim_element(ie,"DIV",{id:!0,class:!0});var ne=children$1(E);C=claim_element(ne,"ARTICLE",{id:!0,class:!0});var he=children$1(C);P=claim_element(he,"DIV",{class:!0});var ve=children$1(P);I=claim_element(ve,"BUTTON",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(I)!=="svelte-bupgv5"&&(I.innerHTML=R),ve.forEach(detach),F=claim_space(he),O=claim_element(he,"DIV",{class:!0});var ye=children$1(O);for(let ge=0;ge<J.length;ge+=1)J[ge].l(ye);ye.forEach(detach),D=claim_space(he),L=claim_element(he,"DIV",{class:!0});var de=children$1(L);B=claim_element(de,"BUTTON",{class:!0});var fe=children$1(B);U=claim_text(fe,V),fe.forEach(detach),z=claim_space(de),W=claim_element(de,"BUTTON",{class:!0});var ue=children$1(W);X=claim_text(ue,Z),ue.forEach(detach),de.forEach(detach),he.forEach(detach),ne.forEach(detach),ie.forEach(detach),this.h()},h(){attr(I,"class","p-0 w-6"),attr(P,"class","flex justify-between h-6"),attr(O,"class","p-0"),attr(B,"class","onboarding-nav"),attr(W,"class","onboarding-nav"),attr(L,"class","pt-1.5 px-0 flex justify-between gap-4"),attr(C,"id","panel"),attr(C,"class","opacity-0 w-[75vw] md:min-w-24 md:max-w-80 my-0 mx-auto pt-4 pb-3 px-4 bg-dark-gray flex flex-col gap-3 shadow"),attr(E,"id","onboarding"),attr(E,"class","absolute"),attr(T,"id","onboarding-layer"),attr(T,"class","absolute top-0 left-0 w-full h-full z-50")},m(te,ie){insert_hydration(te,T,ie),append_hydration(T,E),append_hydration(E,C),append_hydration(C,P),append_hydration(P,I),append_hydration(C,F),append_hydration(C,O);for(let ne=0;ne<J.length;ne+=1)J[ne]&&J[ne].m(O,null);append_hydration(C,D),append_hydration(C,L),append_hydration(L,B),append_hydration(B,U),append_hydration(L,z),append_hydration(L,W),append_hydration(W,X),A[11](C),A[12](E),K||(Y=[listen(I,"click",A[9]),listen(B,"click",function(){is_function(A[3]===0?A[9]:A[8])&&(A[3]===0?A[9]:A[8]).apply(this,arguments)}),listen(W,"click",A[7]),listen(T,"click",A[7])],K=!0)},p(te,ie){if(A=te,ie[0]&112){Q=ensure_array_like(A[4]);let ne;for(ne=0;ne<Q.length;ne+=1){const he=get_each_context$1(A,Q,ne);J[ne]?J[ne].p(he,ie):(J[ne]=create_each_block$1(he),J[ne].c(),J[ne].m(O,null))}for(;ne<J.length;ne+=1)J[ne].d(1);J.length=Q.length}ie[0]&72&&V!==(V=A[6](A[3]===0?"onboarding.panel.skip":"onboarding.panel.back")+"")&&set_data(U,V),ie[0]&64&&Z!==(Z=A[6]("onboarding.panel.next")+"")&&set_data(X,Z)},d(te){te&&detach(T),destroy_each(J,te),A[11](null),A[12](null),K=!1,run_all(Y)}}}function create_each_block$1(A){let T,E,C=A[6](A[45].contentKey)+"",P,I;return{c(){T=element("p"),E=new HtmlTagHydration(!1),P=space(),this.h()},l(R){T=claim_element(R,"P",{class:!0});var F=children$1(T);E=claim_html_tag(F,!1),P=claim_space(F),F.forEach(detach),this.h()},h(){E.a=P,attr(T,"class",I="text-white "+(A[47]===A[5]?"block":"hidden"))},m(R,F){insert_hydration(R,T,F),E.m(C,T),append_hydration(T,P)},p(R,F){F[0]&80&&C!==(C=R[6](R[45].contentKey)+"")&&E.p(C),F[0]&32&&I!==(I="text-white "+(R[47]===R[5]?"block":"hidden"))&&attr(T,"class",I)},d(R){R&&detach(T)}}}function create_fragment$9(A){let T,E=A[0]&&create_if_block$4(A);return{c(){E&&E.c(),T=empty$1()},l(C){E&&E.l(C),T=empty$1()},m(C,P){E&&E.m(C,P),insert_hydration(C,T,P)},p(C,P){C[0]?E?E.p(C,P):(E=create_if_block$4(C),E.c(),E.m(T.parentNode,T)):E&&(E.d(1),E=null)},i:noop$1,o:noop$1,d(C){C&&detach(T),E&&E.d(C)}}}function isNextStepAllowed(A){return A.id==="onboarding-layer"||A.id==="onboarding"||A.classList.contains("onboarding-nav")}function instance$7(A,T,E){let C,P,I,R;component_subscribe(A,contentKeyIdx,De=>E(5,C=De)),component_subscribe(A,ongoing,De=>E(0,P=De)),component_subscribe(A,width,De=>E(20,I=De)),component_subscribe(A,$format,De=>E(6,R=De));const F={fadeoutDuration:.15,fadeoutOpacity:.1,offset:12},O={root:"#root",header:"#mobile-header",filter:"#filter-container",vis:"#vis-container",layout:"#layout-container",playMyVis:"#play-my-vis",shrink:"#shrink-panel",activate:"#activate",otherMenuItems:":is(#sortby, #sortby-activate, #clear-all, #project-logo, #shrink-button-wrapper, #change-language)",leftPanel:"#left-panel"},D=[{contentKey:"onboarding.desktop.1",positionTo:O.root,placement:"center",borderPosition:"top"},{contentKey:"onboarding.desktop.2",highlight:O.vis,positionTo:O.vis,placement:"left-start",borderPosition:"right"},{contentKey:"onboarding.desktop.3",highlight:O.vis,positionTo:O.vis,placement:"left-start",borderPosition:"right",onStart:Ee,onLeave:Pe},{contentKey:"onboarding.desktop.4",highlight:O.leftPanel,positionTo:O.leftPanel,placement:"right",borderPosition:"left",onStart:ke,onLeave:Be},{contentKey:"onboarding.desktop.5",highlight:O.activate,positionTo:O.activate,placement:"top",borderPosition:"bottom",onStart:Me,onLeave:Me},{contentKey:"onboarding.desktop.6",positionTo:O.playMyVis,highlight:O.playMyVis,placement:"bottom",borderPosition:"top"}],L=[{contentKey:"onboarding.desktop.1",positionTo:O.root,placement:"center",borderPosition:"top"},{contentKey:"onboarding.desktop.2",highlight:O.vis,positionTo:O.vis,placement:"left-start",borderPosition:"right"},{contentKey:"onboarding.desktop.3",highlight:O.vis,positionTo:O.vis,placement:"left-start",borderPosition:"right",onStart:Ee,onLeave:Pe},{contentKey:"onboarding.desktop.4",highlight:O.leftPanel,positionTo:O.leftPanel,placement:"right",borderPosition:"left",onStart:ke,onLeave:Be},{contentKey:"onboarding.desktop.6",positionTo:O.playMyVis,highlight:O.playMyVis,placement:"bottom",borderPosition:"top"}],B=[{contentKey:"onboarding.mobile.1",positionTo:O.root,placement:"center",borderPosition:"top"},{contentKey:"onboarding.mobile.2",highlight:O.vis,positionTo:O.layout,placement:"top",borderPosition:"top"},{contentKey:"onboarding.mobile.3",highlight:O.vis,positionTo:O.layout,placement:"top",borderPosition:"top",onStart:Ee,onLeave:Pe},{contentKey:"onboarding.mobile.4",highlight:O.layout,positionTo:O.layout,placement:"top",borderPosition:"bottom"},{contentKey:"onboarding.mobile.5",highlight:O.filter,positionTo:"#root",placement:"top-start",borderPosition:"bottom",onStart:Oe,onLeave:Je},{contentKey:"onboarding.mobile.6",positionTo:O.playMyVis,highlight:O.playMyVis,placement:"top",borderPosition:"bottom"}],V=gsapWithCSS.timeline({overwrite:!0});let U,z,W,Z,X,K=!1,Y,Q,J,te,ie,ne;onMount(()=>{I<768?(ne=["header","vis","filter","layout","playMyVis"].map(De=>O[De]),E(4,ie=B)):(ne=["shrink","activate","playMyVis","otherMenuItems","vis","leftPanel"].map(De=>O[De]),E(4,ie=I<1024?L:D))}),afterUpdate(ae);function he(De){De.stopPropagation(),isNextStepAllowed(De.target)&&ye(1)}function ve(De){De.stopPropagation(),ye(-1)}function ye(De){Y+De>=0&&Y+De<ie.length?(E(3,Y+=De),de()):me()}function de(){const De=ie[Y];J=te,te=De?{index:Y,position:void 0,settings:De}:void 0,te&&fe()}function fe(){const De=ne.filter(Ue=>Ue!==te.settings.highlight).join(", ");ue(De),J&&ge(J),V.call(()=>contentKeyIdx.set(Y))}function ue(De){V.to(De,{opacity:F.fadeoutOpacity,duration:F.fadeoutDuration})}function ge(De){const{position:Ue,settings:Re}=De;V.to(z,{x:Ue.xOffset*2,y:Ue.yOffset*2,opacity:0,duration:F.fadeoutDuration},"<"),Re.onLeave&&V.call(Re.onLeave,[],"<")}function ae(){!P||!te||Y!==C||Q===C||(ce(te.settings.borderPosition),te.position=se(te.settings),te.settings.onStart&&te.settings.onStart(),_e(te.position),te.settings.highlight&&V.to(te.settings.highlight,{opacity:1,duration:.15},"<"))}function ce(De){switch(E(2,z.style.borderTop="",z),E(2,z.style.borderRight="",z),E(2,z.style.borderBottom="",z),E(2,z.style.borderLeft="",z),De){case"top":E(2,z.style.borderTop="4px solid #818afa",z);break;case"right":E(2,z.style.borderRight="4px solid #818afa",z);break;case"bottom":E(2,z.style.borderBottom="4px solid #818afa",z);break;case"left":E(2,z.style.borderLeft="4px solid #818afa",z);break}}function se(De){const Ue=document.querySelector(De.positionTo),{x:Re,y:Ne,width:Ge,height:We}=Ue.getBoundingClientRect();return le(Re,Ne,Ge,We,De.placement)}function le(De,Ue,Re,Ne,Ge){let We=De,je=Ue,Ye=0,Fe=0,He=0,nt=0,ot=0,pt=0;Ge==="center"?(je+=Ne*.5,We+=Re*.5,Fe=-50,Ye=-50,nt=-F.offset):Ge==="left"||Ge==="right"?(je+=Ne*.5,Fe=-50):(Ge==="top"||Ge==="bottom")&&(We+=Re*.5,Ye=-50),Ge.includes("left")?(Ye=-100,He=-F.offset):Ge.includes("right")?(We+=Re,He=F.offset):Ge.includes("top")?(Fe=-100,nt=-F.offset):Ge.includes("bottom")&&(je+=Ne,nt=F.offset),Ge.includes("end")&&(Ge.includes("left")||Ge.includes("right")?(je+=Ne,Fe=-100):(Ge.includes("top")||Ge.includes("bottom"))&&(We+=Re,Ye=-100));const dt=We+z.clientWidth*Ye/100+He,yt=je+z.clientHeight*Fe/100+nt;return dt<=0?ot=dt*-1+2*F.offset:dt>=document.body.clientWidth&&(ot=document.body.clientWidth-(dt+2*F.offset)),yt<=0?pt=yt*-1+2*F.offset:yt>=document.body.clientHeight&&(pt=document.body.clientHeight-(yt+2*F.offset)),{left:We,top:je,xPercent:Ye,yPercent:Fe,xOffset:He,yOffset:nt,xOffset2:ot,yOffset2:pt}}function _e({left:De,top:Ue,xPercent:Re,yPercent:Ne,xOffset:Ge,yOffset:We,xOffset2:je,yOffset2:Ye}){V.set(U,{left:De,top:Ue}).set(z,{xPercent:Re,yPercent:Ne,x:je,y:Ye,opacity:0}).to(z,{x:Ge+je,y:We+Ye,opacity:1,duration:.3},"<")}function me(De=void 0){De&&De.stopPropagation(),te.settings.onLeave&&te.settings.onLeave();const Ue=ne.join(", ");V.to(Ue,{opacity:1,duration:.5}).to(z,{x:te.position?te.position.xOffset*2:0,y:te.position?te.position.yOffset*2:0,opacity:0,duration:.5},"<").call(()=>{ongoing.set(!1),finished.set(!0),E(3,Y=0)})}function Ee(){const Ue=document.querySelector("#vis-container").getBoundingClientRect(),Re=Ue.width*.5,Ne=Ue.height*.5,Ge={x:0,y:0};W=get_store_value(app).stage.getChildByName("cursor",!0),X=gsapWithCSS.timeline(),X.call(()=>{W.renderable=!0}).set(Ge,{x:Ue.width*.8,y:Ue.height*.95}).to(Ge,{x:Re,y:Ne,duration:2}).set(Ge,{x:Re-4,y:Ne+4,delay:.3}).set(Ge,{x:Re,y:Ne,delay:.15}).call(()=>{simulation.getClosestTo(-4,4-get_store_value(cameraOffsetY)).context.select(),W.renderable=!1}),Z=get_store_value(app).ticker.add(()=>{W.x=Ge.x,W.y=Ge.y})}function Pe(){X.isActive()&&(X.kill(),get_store_value(app).ticker.remove(Z),W.renderable=!1),selected.set(null)}let Ce;function ke(){const De=document.querySelector(O.leftPanel),Ue=document.querySelector(O.shrink),Re=document.querySelector("#onboarding #panel span.left"),Ne=document.querySelector("#onboarding #panel span.top");Ce=gsapWithCSS.timeline().call(()=>{De&&De.classList.add("soft-blink"),Re&&Re.classList.add("blink")}).call(()=>{De&&De.classList.remove("soft-blink"),Re&&Re.classList.remove("blink")},[],"+=2").call(()=>{Ue&&Ue.classList.add("soft-blink"),Ne&&Ne.classList.add("blink")},[],"<").call(()=>{Ue&&Ue.classList.remove("soft-blink"),Ne&&Ne.classList.remove("blink")},[],"+=2").set(O.shrink,{opacity:1})}function Be(){Ce!=null&&Ce.isActive()&&Ce.kill();const De=document.querySelector(O.leftPanel),Ue=document.querySelector(O.shrink),Re=document.querySelector("#onboarding #panel span.left"),Ne=document.querySelector("#onboarding #panel span.top");De&&De.classList.remove("soft-blink"),Ue&&Ue.classList.remove("soft-blink"),Re&&Re.classList.remove("blink"),Ne&&Ne.classList.remove("blink")}function Me(){const De=document.querySelector(O.activate),Re=De.querySelector(":scope .dropdown").classList.toggle("active");De.style.borderLeft=Re?"1px solid black":"none"}function Oe(){isFilterOpen.set(!0)}function Je(){isFilterOpen.set(!1)}function et(De){binding_callbacks[De?"unshift":"push"](()=>{z=De,E(2,z)})}function qe(De){binding_callbacks[De?"unshift":"push"](()=>{U=De,E(1,U)})}return A.$$.update=()=>{if(A.$$.dirty[0]&1025&&P&&!K){E(10,K=!0),E(3,Y=0);const De=Assets.get("cursor"),Ue=new Sprite(De);Ue.renderable=!1,Ue.name="cursor",get_store_value(app).stage.getChildByName("vis-container",!0).addChild(Ue),de()}},[P,U,z,Y,ie,C,R,he,ve,me,K,et,qe]}class Onboarding extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$7,create_fragment$9,safe_not_equal,{},null,[-1,-1])}}const BackgroundVertex=`attribute vec2 aVertexPosition;

uniform mat3 projectionMatrix;

varying vec2 vTextureCoord;
varying vec2 vResolution;

uniform vec4 inputSize;
uniform vec4 outputFrame;

vec4 filterVertexPosition( void ) {
  vec2 position = aVertexPosition * max(outputFrame.zw, vec2(0.)) + outputFrame.xy;
  return vec4((projectionMatrix * vec3(position, 1.0)).xy, 0.0, 1.0);
}

vec2 filterTextureCoord( void ) {
  return aVertexPosition * (outputFrame.zw * inputSize.zw);
}

void main(void) {
  gl_Position = filterVertexPosition();
  vTextureCoord = filterTextureCoord();
  vResolution = outputFrame.zw;
}`,BackgroundFragment=`precision mediump float;

varying vec2 vTextureCoord;
varying vec2 vResolution;

uniform float iTime;
uniform float iRatio;

mat2 rotationMatrix(float theta) {
  float s = sin(theta);
  float c = cos(theta);
  return mat2(c, -s, s, c);
}

vec2 hash(vec2 p) {
  p = vec2( 
    dot(p, vec2(2127.1, 81.17)), 
    dot(p, vec2(1269.5, 283.37)) 
  );

  return fract(sin(p) * 43758.5453);
}

float noise(vec2 p) {
  vec2 i = floor(p);
  vec2 f = fract(p);

  vec2 u = f * f * (3. - 2. * f);

  float n = mix( 
    mix(dot( -1. + 2. * hash( i + vec2(.0, .0) ), f - vec2(.0, .0) ),
        dot( -1. + 2. * hash( i + vec2(1., .0) ), f - vec2(1., .0) ), 
        u.x),
    mix(dot( -1. + 2. * hash( i + vec2(.0, 1.) ), f - vec2(.0, 1.) ),
        dot( -1. + 2. * hash( i + vec2(1., 1.) ), f - vec2(1., 1.) ), 
        u.x), 
    u.y);

  return .5 + .5 * n;
}

void main(void) {
  vec2 uv = vTextureCoord;
  //float ratio = 1.2;

  vec2 tuv = uv;
  tuv -= .5;

  // rotate with Noise
  float degree = noise(vec2(iTime*.1, tuv.x * tuv.y));

  tuv.y *= 1. / iRatio;
  tuv *= rotationMatrix(radians((degree -.5) * 720. + 180.));
  tuv.y *= iRatio;

  // Wave warp with sin
  float frequency = 5.;
  float amplitude = 30.;
  float speed = iTime * 2.;
  tuv.x += sin(tuv.y * frequency + speed) / amplitude;
  tuv.y += sin(tuv.x * frequency * 1.5 + speed) / (amplitude * .5);


  // draw the image
  vec3 colorPink = vec3(250., 236., 242.) / 255.;
  vec3 colorBlue = vec3(226., 246., 253.) / 255.;

  vec3 layer1 = mix(colorPink, colorBlue, smoothstep(-.3, .2, (tuv * rotationMatrix(radians(-5.))).x));
  vec3 layer2 = mix(colorBlue, colorPink, smoothstep(-.3, .2, (tuv * rotationMatrix(radians(-5.))).x));
  
  vec3 color = mix(layer1, layer2, smoothstep(.5, -.3, tuv.y));
   
  gl_FragColor = vec4(color, 1.);
}`;function create_fragment$8(A){let T;return{c(){T=element("canvas"),this.h()},l(E){T=claim_element(E,"CANVAS",{id:!0,class:!0}),children$1(T).forEach(detach),this.h()},h(){attr(T,"id","canvas"),attr(T,"class","absolute top-0 left-0 w-full h-full")},m(E,C){insert_hydration(E,T,C),A[1](T)},p:noop$1,i:noop$1,o:noop$1,d(E){E&&detach(T),A[1](null)}}}function instance$6(A,T,E){let C;component_subscribe(A,pixelRatio,D=>E(4,C=D));let P,I;Assets.add({alias:"petal",src:"/sprites/petal.png"}),Assets.add({alias:"cursor",src:"/sprites/cursor.png"}),Assets.add({alias:"soundFX",src:"/sprites/sound-fx.json"}),Assets.load("petal"),Assets.load("cursor"),Assets.load("soundFX"),onMount(R);function R(){settings.RESOLUTION=C,I=globalThis.__PIXI_APP__=new Application({view:P,resizeTo:window,backgroundAlpha:0,antialias:!0}),F(),app.set(I)}function F(){const D=new Filter$1(BackgroundVertex,BackgroundFragment,{iTime:0,iRatio:1}),L=new Graphics$1;L.filters=[D],I.stage.addChild(L),I.ticker.add(B=>{D.uniforms.iTime+=.025*B,D.uniforms.iRatio=I.screen.width/I.screen.height,L.clear(),L.beginFill(16777215),L.drawRect(0,0,I.screen.width,I.screen.height),L.endFill()})}function O(D){binding_callbacks[D?"unshift":"push"](()=>{P=D,E(0,P)})}return[P,O]}class Renderer extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$6,create_fragment$8,safe_not_equal,{})}}var lottie$1={exports:{}};(function(module,exports){typeof navigator<"u"&&function(A,T){module.exports=T()}(commonjsGlobal,function(){var svgNS="http://www.w3.org/2000/svg",locationHref="",_useWebWorker=!1,initialDefaultFrame=-999999,setWebWorker=function(T){_useWebWorker=!!T},getWebWorker=function(){return _useWebWorker},setLocationHref=function(T){locationHref=T},getLocationHref=function(){return locationHref};function createTag(A){return document.createElement(A)}function extendPrototype(A,T){var E,C=A.length,P;for(E=0;E<C;E+=1){P=A[E].prototype;for(var I in P)Object.prototype.hasOwnProperty.call(P,I)&&(T.prototype[I]=P[I])}}function getDescriptor(A,T){return Object.getOwnPropertyDescriptor(A,T)}function createProxyFunction(A){function T(){}return T.prototype=A,T}var audioControllerFactory=function(){function A(T){this.audios=[],this.audioFactory=T,this._volume=1,this._isMuted=!1}return A.prototype={addAudio:function(E){this.audios.push(E)},pause:function(){var E,C=this.audios.length;for(E=0;E<C;E+=1)this.audios[E].pause()},resume:function(){var E,C=this.audios.length;for(E=0;E<C;E+=1)this.audios[E].resume()},setRate:function(E){var C,P=this.audios.length;for(C=0;C<P;C+=1)this.audios[C].setRate(E)},createAudio:function(E){return this.audioFactory?this.audioFactory(E):window.Howl?new window.Howl({src:[E]}):{isPlaying:!1,play:function(){this.isPlaying=!0},seek:function(){this.isPlaying=!1},playing:function(){},rate:function(){},setVolume:function(){}}},setAudioFactory:function(E){this.audioFactory=E},setVolume:function(E){this._volume=E,this._updateVolume()},mute:function(){this._isMuted=!0,this._updateVolume()},unmute:function(){this._isMuted=!1,this._updateVolume()},getVolume:function(){return this._volume},_updateVolume:function(){var E,C=this.audios.length;for(E=0;E<C;E+=1)this.audios[E].volume(this._volume*(this._isMuted?0:1))}},function(){return new A}}(),createTypedArray=function(){function A(E,C){var P=0,I=[],R;switch(E){case"int16":case"uint8c":R=1;break;default:R=1.1;break}for(P=0;P<C;P+=1)I.push(R);return I}function T(E,C){return E==="float32"?new Float32Array(C):E==="int16"?new Int16Array(C):E==="uint8c"?new Uint8ClampedArray(C):A(E,C)}return typeof Uint8ClampedArray=="function"&&typeof Float32Array=="function"?T:A}();function createSizedArray(A){return Array.apply(null,{length:A})}function _typeof$6(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$6=function(E){return typeof E}:_typeof$6=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},_typeof$6(A)}var subframeEnabled=!0,expressionsPlugin=null,expressionsInterfaces=null,idPrefix$1="",isSafari=/^((?!chrome|android).)*safari/i.test(navigator.userAgent),bmPow=Math.pow,bmSqrt=Math.sqrt,bmFloor=Math.floor,bmMax=Math.max,bmMin=Math.min,BMMath={};(function(){var A=["abs","acos","acosh","asin","asinh","atan","atanh","atan2","ceil","cbrt","expm1","clz32","cos","cosh","exp","floor","fround","hypot","imul","log","log1p","log2","log10","max","min","pow","random","round","sign","sin","sinh","sqrt","tan","tanh","trunc","E","LN10","LN2","LOG10E","LOG2E","PI","SQRT1_2","SQRT2"],T,E=A.length;for(T=0;T<E;T+=1)BMMath[A[T]]=Math[A[T]]})(),BMMath.random=Math.random,BMMath.abs=function(A){var T=_typeof$6(A);if(T==="object"&&A.length){var E=createSizedArray(A.length),C,P=A.length;for(C=0;C<P;C+=1)E[C]=Math.abs(A[C]);return E}return Math.abs(A)};var defaultCurveSegments=150,degToRads=Math.PI/180,roundCorner=.5519;function styleDiv(A){A.style.position="absolute",A.style.top=0,A.style.left=0,A.style.display="block",A.style.transformOrigin="0 0",A.style.webkitTransformOrigin="0 0",A.style.backfaceVisibility="visible",A.style.webkitBackfaceVisibility="visible",A.style.transformStyle="preserve-3d",A.style.webkitTransformStyle="preserve-3d",A.style.mozTransformStyle="preserve-3d"}function BMEnterFrameEvent(A,T,E,C){this.type=A,this.currentTime=T,this.totalTime=E,this.direction=C<0?-1:1}function BMCompleteEvent(A,T){this.type=A,this.direction=T<0?-1:1}function BMCompleteLoopEvent(A,T,E,C){this.type=A,this.currentLoop=E,this.totalLoops=T,this.direction=C<0?-1:1}function BMSegmentStartEvent(A,T,E){this.type=A,this.firstFrame=T,this.totalFrames=E}function BMDestroyEvent(A,T){this.type=A,this.target=T}function BMRenderFrameErrorEvent(A,T){this.type="renderFrameError",this.nativeError=A,this.currentTime=T}function BMConfigErrorEvent(A){this.type="configError",this.nativeError=A}var createElementID=function(){var A=0;return function(){return A+=1,idPrefix$1+"__lottie_element_"+A}}();function HSVtoRGB(A,T,E){var C,P,I,R,F,O,D,L;switch(R=Math.floor(A*6),F=A*6-R,O=E*(1-T),D=E*(1-F*T),L=E*(1-(1-F)*T),R%6){case 0:C=E,P=L,I=O;break;case 1:C=D,P=E,I=O;break;case 2:C=O,P=E,I=L;break;case 3:C=O,P=D,I=E;break;case 4:C=L,P=O,I=E;break;case 5:C=E,P=O,I=D;break}return[C,P,I]}function RGBtoHSV(A,T,E){var C=Math.max(A,T,E),P=Math.min(A,T,E),I=C-P,R,F=C===0?0:I/C,O=C/255;switch(C){case P:R=0;break;case A:R=T-E+I*(T<E?6:0),R/=6*I;break;case T:R=E-A+I*2,R/=6*I;break;case E:R=A-T+I*4,R/=6*I;break}return[R,F,O]}function addSaturationToRGB(A,T){var E=RGBtoHSV(A[0]*255,A[1]*255,A[2]*255);return E[1]+=T,E[1]>1?E[1]=1:E[1]<=0&&(E[1]=0),HSVtoRGB(E[0],E[1],E[2])}function addBrightnessToRGB(A,T){var E=RGBtoHSV(A[0]*255,A[1]*255,A[2]*255);return E[2]+=T,E[2]>1?E[2]=1:E[2]<0&&(E[2]=0),HSVtoRGB(E[0],E[1],E[2])}function addHueToRGB(A,T){var E=RGBtoHSV(A[0]*255,A[1]*255,A[2]*255);return E[0]+=T/360,E[0]>1?E[0]-=1:E[0]<0&&(E[0]+=1),HSVtoRGB(E[0],E[1],E[2])}var rgbToHex=function(){var A=[],T,E;for(T=0;T<256;T+=1)E=T.toString(16),A[T]=E.length===1?"0"+E:E;return function(C,P,I){return C<0&&(C=0),P<0&&(P=0),I<0&&(I=0),"#"+A[C]+A[P]+A[I]}}(),setSubframeEnabled=function(T){subframeEnabled=!!T},getSubframeEnabled=function(){return subframeEnabled},setExpressionsPlugin=function(T){expressionsPlugin=T},getExpressionsPlugin=function(){return expressionsPlugin},setExpressionInterfaces=function(T){expressionsInterfaces=T},getExpressionInterfaces=function(){return expressionsInterfaces},setDefaultCurveSegments=function(T){defaultCurveSegments=T},getDefaultCurveSegments=function(){return defaultCurveSegments},setIdPrefix=function(T){idPrefix$1=T};function createNS(A){return document.createElementNS(svgNS,A)}function _typeof$5(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$5=function(E){return typeof E}:_typeof$5=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},_typeof$5(A)}var dataManager=function(){var A=1,T=[],E,C,P={onmessage:function(){},postMessage:function(U){E({data:U})}},I={postMessage:function(U){P.onmessage({data:U})}};function R(V){if(window.Worker&&window.Blob&&getWebWorker()){var U=new Blob(["var _workerSelf = self; self.onmessage = ",V.toString()],{type:"text/javascript"}),z=URL.createObjectURL(U);return new Worker(z)}return E=V,P}function F(){C||(C=R(function(U){function z(){function Z(ge,ae){var ce,se,le=ge.length,_e,me,Ee,Pe;for(se=0;se<le;se+=1)if(ce=ge[se],"ks"in ce&&!ce.completed){if(ce.completed=!0,ce.hasMask){var Ce=ce.masksProperties;for(me=Ce.length,_e=0;_e<me;_e+=1)if(Ce[_e].pt.k.i)J(Ce[_e].pt.k);else for(Pe=Ce[_e].pt.k.length,Ee=0;Ee<Pe;Ee+=1)Ce[_e].pt.k[Ee].s&&J(Ce[_e].pt.k[Ee].s[0]),Ce[_e].pt.k[Ee].e&&J(Ce[_e].pt.k[Ee].e[0])}ce.ty===0?(ce.layers=Y(ce.refId,ae),Z(ce.layers,ae)):ce.ty===4?Q(ce.shapes):ce.ty===5&&fe(ce)}}function X(ge,ae){if(ge){var ce=0,se=ge.length;for(ce=0;ce<se;ce+=1)ge[ce].t===1&&(ge[ce].data.layers=Y(ge[ce].data.refId,ae),Z(ge[ce].data.layers,ae))}}function K(ge,ae){for(var ce=0,se=ae.length;ce<se;){if(ae[ce].id===ge)return ae[ce];ce+=1}return null}function Y(ge,ae){var ce=K(ge,ae);return ce?ce.layers.__used?JSON.parse(JSON.stringify(ce.layers)):(ce.layers.__used=!0,ce.layers):null}function Q(ge){var ae,ce=ge.length,se,le;for(ae=ce-1;ae>=0;ae-=1)if(ge[ae].ty==="sh")if(ge[ae].ks.k.i)J(ge[ae].ks.k);else for(le=ge[ae].ks.k.length,se=0;se<le;se+=1)ge[ae].ks.k[se].s&&J(ge[ae].ks.k[se].s[0]),ge[ae].ks.k[se].e&&J(ge[ae].ks.k[se].e[0]);else ge[ae].ty==="gr"&&Q(ge[ae].it)}function J(ge){var ae,ce=ge.i.length;for(ae=0;ae<ce;ae+=1)ge.i[ae][0]+=ge.v[ae][0],ge.i[ae][1]+=ge.v[ae][1],ge.o[ae][0]+=ge.v[ae][0],ge.o[ae][1]+=ge.v[ae][1]}function te(ge,ae){var ce=ae?ae.split("."):[100,100,100];return ge[0]>ce[0]?!0:ce[0]>ge[0]?!1:ge[1]>ce[1]?!0:ce[1]>ge[1]?!1:ge[2]>ce[2]?!0:ce[2]>ge[2]?!1:null}var ie=function(){var ge=[4,4,14];function ae(se){var le=se.t.d;se.t.d={k:[{s:le,t:0}]}}function ce(se){var le,_e=se.length;for(le=0;le<_e;le+=1)se[le].ty===5&&ae(se[le])}return function(se){if(te(ge,se.v)&&(ce(se.layers),se.assets)){var le,_e=se.assets.length;for(le=0;le<_e;le+=1)se.assets[le].layers&&ce(se.assets[le].layers)}}}(),ne=function(){var ge=[4,7,99];return function(ae){if(ae.chars&&!te(ge,ae.v)){var ce,se=ae.chars.length;for(ce=0;ce<se;ce+=1){var le=ae.chars[ce];le.data&&le.data.shapes&&(Q(le.data.shapes),le.data.ip=0,le.data.op=99999,le.data.st=0,le.data.sr=1,le.data.ks={p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0}},ae.chars[ce].t||(le.data.shapes.push({ty:"no"}),le.data.shapes[0].it.push({p:{k:[0,0],a:0},s:{k:[100,100],a:0},a:{k:[0,0],a:0},r:{k:0,a:0},o:{k:100,a:0},sk:{k:0,a:0},sa:{k:0,a:0},ty:"tr"})))}}}}(),he=function(){var ge=[5,7,15];function ae(se){var le=se.t.p;typeof le.a=="number"&&(le.a={a:0,k:le.a}),typeof le.p=="number"&&(le.p={a:0,k:le.p}),typeof le.r=="number"&&(le.r={a:0,k:le.r})}function ce(se){var le,_e=se.length;for(le=0;le<_e;le+=1)se[le].ty===5&&ae(se[le])}return function(se){if(te(ge,se.v)&&(ce(se.layers),se.assets)){var le,_e=se.assets.length;for(le=0;le<_e;le+=1)se.assets[le].layers&&ce(se.assets[le].layers)}}}(),ve=function(){var ge=[4,1,9];function ae(se){var le,_e=se.length,me,Ee;for(le=0;le<_e;le+=1)if(se[le].ty==="gr")ae(se[le].it);else if(se[le].ty==="fl"||se[le].ty==="st")if(se[le].c.k&&se[le].c.k[0].i)for(Ee=se[le].c.k.length,me=0;me<Ee;me+=1)se[le].c.k[me].s&&(se[le].c.k[me].s[0]/=255,se[le].c.k[me].s[1]/=255,se[le].c.k[me].s[2]/=255,se[le].c.k[me].s[3]/=255),se[le].c.k[me].e&&(se[le].c.k[me].e[0]/=255,se[le].c.k[me].e[1]/=255,se[le].c.k[me].e[2]/=255,se[le].c.k[me].e[3]/=255);else se[le].c.k[0]/=255,se[le].c.k[1]/=255,se[le].c.k[2]/=255,se[le].c.k[3]/=255}function ce(se){var le,_e=se.length;for(le=0;le<_e;le+=1)se[le].ty===4&&ae(se[le].shapes)}return function(se){if(te(ge,se.v)&&(ce(se.layers),se.assets)){var le,_e=se.assets.length;for(le=0;le<_e;le+=1)se.assets[le].layers&&ce(se.assets[le].layers)}}}(),ye=function(){var ge=[4,4,18];function ae(se){var le,_e=se.length,me,Ee;for(le=_e-1;le>=0;le-=1)if(se[le].ty==="sh")if(se[le].ks.k.i)se[le].ks.k.c=se[le].closed;else for(Ee=se[le].ks.k.length,me=0;me<Ee;me+=1)se[le].ks.k[me].s&&(se[le].ks.k[me].s[0].c=se[le].closed),se[le].ks.k[me].e&&(se[le].ks.k[me].e[0].c=se[le].closed);else se[le].ty==="gr"&&ae(se[le].it)}function ce(se){var le,_e,me=se.length,Ee,Pe,Ce,ke;for(_e=0;_e<me;_e+=1){if(le=se[_e],le.hasMask){var Be=le.masksProperties;for(Pe=Be.length,Ee=0;Ee<Pe;Ee+=1)if(Be[Ee].pt.k.i)Be[Ee].pt.k.c=Be[Ee].cl;else for(ke=Be[Ee].pt.k.length,Ce=0;Ce<ke;Ce+=1)Be[Ee].pt.k[Ce].s&&(Be[Ee].pt.k[Ce].s[0].c=Be[Ee].cl),Be[Ee].pt.k[Ce].e&&(Be[Ee].pt.k[Ce].e[0].c=Be[Ee].cl)}le.ty===4&&ae(le.shapes)}}return function(se){if(te(ge,se.v)&&(ce(se.layers),se.assets)){var le,_e=se.assets.length;for(le=0;le<_e;le+=1)se.assets[le].layers&&ce(se.assets[le].layers)}}}();function de(ge){ge.__complete||(ve(ge),ie(ge),ne(ge),he(ge),ye(ge),Z(ge.layers,ge.assets),X(ge.chars,ge.assets),ge.__complete=!0)}function fe(ge){ge.t.a.length===0&&"m"in ge.t.p}var ue={};return ue.completeData=de,ue.checkColors=ve,ue.checkChars=ne,ue.checkPathProperties=he,ue.checkShapes=ye,ue.completeLayers=Z,ue}if(I.dataManager||(I.dataManager=z()),I.assetLoader||(I.assetLoader=function(){function Z(K){var Y=K.getResponseHeader("content-type");return Y&&K.responseType==="json"&&Y.indexOf("json")!==-1||K.response&&_typeof$5(K.response)==="object"?K.response:K.response&&typeof K.response=="string"?JSON.parse(K.response):K.responseText?JSON.parse(K.responseText):null}function X(K,Y,Q,J){var te,ie=new XMLHttpRequest;try{ie.responseType="json"}catch{}ie.onreadystatechange=function(){if(ie.readyState===4)if(ie.status===200)te=Z(ie),Q(te);else try{te=Z(ie),Q(te)}catch(ne){J&&J(ne)}};try{ie.open(["G","E","T"].join(""),K,!0)}catch{ie.open(["G","E","T"].join(""),Y+"/"+K,!0)}ie.send()}return{load:X}}()),U.data.type==="loadAnimation")I.assetLoader.load(U.data.path,U.data.fullPath,function(Z){I.dataManager.completeData(Z),I.postMessage({id:U.data.id,payload:Z,status:"success"})},function(){I.postMessage({id:U.data.id,status:"error"})});else if(U.data.type==="complete"){var W=U.data.animation;I.dataManager.completeData(W),I.postMessage({id:U.data.id,payload:W,status:"success"})}else U.data.type==="loadData"&&I.assetLoader.load(U.data.path,U.data.fullPath,function(Z){I.postMessage({id:U.data.id,payload:Z,status:"success"})},function(){I.postMessage({id:U.data.id,status:"error"})})}),C.onmessage=function(V){var U=V.data,z=U.id,W=T[z];T[z]=null,U.status==="success"?W.onComplete(U.payload):W.onError&&W.onError()})}function O(V,U){A+=1;var z="processId_"+A;return T[z]={onComplete:V,onError:U},z}function D(V,U,z){F();var W=O(U,z);C.postMessage({type:"loadAnimation",path:V,fullPath:window.location.origin+window.location.pathname,id:W})}function L(V,U,z){F();var W=O(U,z);C.postMessage({type:"loadData",path:V,fullPath:window.location.origin+window.location.pathname,id:W})}function B(V,U,z){F();var W=O(U,z);C.postMessage({type:"complete",animation:V,id:W})}return{loadAnimation:D,loadData:L,completeAnimation:B}}(),ImagePreloader=function(){var A=function(){var X=createTag("canvas");X.width=1,X.height=1;var K=X.getContext("2d");return K.fillStyle="rgba(0,0,0,0)",K.fillRect(0,0,1,1),X}();function T(){this.loadedAssets+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function E(){this.loadedFootagesCount+=1,this.loadedAssets===this.totalImages&&this.loadedFootagesCount===this.totalFootages&&this.imagesLoadedCb&&this.imagesLoadedCb(null)}function C(X,K,Y){var Q="";if(X.e)Q=X.p;else if(K){var J=X.p;J.indexOf("images/")!==-1&&(J=J.split("/")[1]),Q=K+J}else Q=Y,Q+=X.u?X.u:"",Q+=X.p;return Q}function P(X){var K=0,Y=setInterval((function(){var Q=X.getBBox();(Q.width||K>500)&&(this._imageLoaded(),clearInterval(Y)),K+=1}).bind(this),50)}function I(X){var K=C(X,this.assetsPath,this.path),Y=createNS("image");isSafari?this.testImageLoaded(Y):Y.addEventListener("load",this._imageLoaded,!1),Y.addEventListener("error",(function(){Q.img=A,this._imageLoaded()}).bind(this),!1),Y.setAttributeNS("http://www.w3.org/1999/xlink","href",K),this._elementHelper.append?this._elementHelper.append(Y):this._elementHelper.appendChild(Y);var Q={img:Y,assetData:X};return Q}function R(X){var K=C(X,this.assetsPath,this.path),Y=createTag("img");Y.crossOrigin="anonymous",Y.addEventListener("load",this._imageLoaded,!1),Y.addEventListener("error",(function(){Q.img=A,this._imageLoaded()}).bind(this),!1),Y.src=K;var Q={img:Y,assetData:X};return Q}function F(X){var K={assetData:X},Y=C(X,this.assetsPath,this.path);return dataManager.loadData(Y,(function(Q){K.img=Q,this._footageLoaded()}).bind(this),(function(){K.img={},this._footageLoaded()}).bind(this)),K}function O(X,K){this.imagesLoadedCb=K;var Y,Q=X.length;for(Y=0;Y<Q;Y+=1)X[Y].layers||(!X[Y].t||X[Y].t==="seq"?(this.totalImages+=1,this.images.push(this._createImageData(X[Y]))):X[Y].t===3&&(this.totalFootages+=1,this.images.push(this.createFootageData(X[Y]))))}function D(X){this.path=X||""}function L(X){this.assetsPath=X||""}function B(X){for(var K=0,Y=this.images.length;K<Y;){if(this.images[K].assetData===X)return this.images[K].img;K+=1}return null}function V(){this.imagesLoadedCb=null,this.images.length=0}function U(){return this.totalImages===this.loadedAssets}function z(){return this.totalFootages===this.loadedFootagesCount}function W(X,K){X==="svg"?(this._elementHelper=K,this._createImageData=this.createImageData.bind(this)):this._createImageData=this.createImgData.bind(this)}function Z(){this._imageLoaded=T.bind(this),this._footageLoaded=E.bind(this),this.testImageLoaded=P.bind(this),this.createFootageData=F.bind(this),this.assetsPath="",this.path="",this.totalImages=0,this.totalFootages=0,this.loadedAssets=0,this.loadedFootagesCount=0,this.imagesLoadedCb=null,this.images=[]}return Z.prototype={loadAssets:O,setAssetsPath:L,setPath:D,loadedImages:U,loadedFootages:z,destroy:V,getAsset:B,createImgData:R,createImageData:I,imageLoaded:T,footageLoaded:E,setCacheType:W},Z}();function BaseEvent(){}BaseEvent.prototype={triggerEvent:function(T,E){if(this._cbs[T])for(var C=this._cbs[T],P=0;P<C.length;P+=1)C[P](E)},addEventListener:function(T,E){return this._cbs[T]||(this._cbs[T]=[]),this._cbs[T].push(E),(function(){this.removeEventListener(T,E)}).bind(this)},removeEventListener:function(T,E){if(!E)this._cbs[T]=null;else if(this._cbs[T]){for(var C=0,P=this._cbs[T].length;C<P;)this._cbs[T][C]===E&&(this._cbs[T].splice(C,1),C-=1,P-=1),C+=1;this._cbs[T].length||(this._cbs[T]=null)}}};var markerParser=function(){function A(T){for(var E=T.split(`\r
`),C={},P,I=0,R=0;R<E.length;R+=1)P=E[R].split(":"),P.length===2&&(C[P[0]]=P[1].trim(),I+=1);if(I===0)throw new Error;return C}return function(T){for(var E=[],C=0;C<T.length;C+=1){var P=T[C],I={time:P.tm,duration:P.dr};try{I.payload=JSON.parse(T[C].cm)}catch{try{I.payload=A(T[C].cm)}catch{I.payload={name:T[C].cm}}}E.push(I)}return E}}(),ProjectInterface=function(){function A(T){this.compositions.push(T)}return function(){function T(E){for(var C=0,P=this.compositions.length;C<P;){if(this.compositions[C].data&&this.compositions[C].data.nm===E)return this.compositions[C].prepareFrame&&this.compositions[C].data.xt&&this.compositions[C].prepareFrame(this.currentFrame),this.compositions[C].compInterface;C+=1}return null}return T.compositions=[],T.currentFrame=0,T.registerComposition=A,T}}(),renderers={},registerRenderer=function(T,E){renderers[T]=E};function getRenderer(A){return renderers[A]}function getRegisteredRenderer(){if(renderers.canvas)return"canvas";for(var A in renderers)if(renderers[A])return A;return""}function _typeof$4(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$4=function(E){return typeof E}:_typeof$4=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},_typeof$4(A)}var AnimationItem=function(){this._cbs=[],this.name="",this.path="",this.isLoaded=!1,this.currentFrame=0,this.currentRawFrame=0,this.firstFrame=0,this.totalFrames=0,this.frameRate=0,this.frameMult=0,this.playSpeed=1,this.playDirection=1,this.playCount=0,this.animationData={},this.assets=[],this.isPaused=!0,this.autoplay=!1,this.loop=!0,this.renderer=null,this.animationID=createElementID(),this.assetsPath="",this.timeCompleted=0,this.segmentPos=0,this.isSubframeEnabled=getSubframeEnabled(),this.segments=[],this._idle=!0,this._completedLoop=!1,this.projectInterface=ProjectInterface(),this.imagePreloader=new ImagePreloader,this.audioController=audioControllerFactory(),this.markers=[],this.configAnimation=this.configAnimation.bind(this),this.onSetupError=this.onSetupError.bind(this),this.onSegmentComplete=this.onSegmentComplete.bind(this),this.drawnFrameEvent=new BMEnterFrameEvent("drawnFrame",0,0,0),this.expressionsPlugin=getExpressionsPlugin()};extendPrototype([BaseEvent],AnimationItem),AnimationItem.prototype.setParams=function(A){(A.wrapper||A.container)&&(this.wrapper=A.wrapper||A.container);var T="svg";A.animType?T=A.animType:A.renderer&&(T=A.renderer);var E=getRenderer(T);this.renderer=new E(this,A.rendererSettings),this.imagePreloader.setCacheType(T,this.renderer.globalData.defs),this.renderer.setProjectInterface(this.projectInterface),this.animType=T,A.loop===""||A.loop===null||A.loop===void 0||A.loop===!0?this.loop=!0:A.loop===!1?this.loop=!1:this.loop=parseInt(A.loop,10),this.autoplay="autoplay"in A?A.autoplay:!0,this.name=A.name?A.name:"",this.autoloadSegments=Object.prototype.hasOwnProperty.call(A,"autoloadSegments")?A.autoloadSegments:!0,this.assetsPath=A.assetsPath,this.initialSegment=A.initialSegment,A.audioFactory&&this.audioController.setAudioFactory(A.audioFactory),A.animationData?this.setupAnimation(A.animationData):A.path&&(A.path.lastIndexOf("\\")!==-1?this.path=A.path.substr(0,A.path.lastIndexOf("\\")+1):this.path=A.path.substr(0,A.path.lastIndexOf("/")+1),this.fileName=A.path.substr(A.path.lastIndexOf("/")+1),this.fileName=this.fileName.substr(0,this.fileName.lastIndexOf(".json")),dataManager.loadAnimation(A.path,this.configAnimation,this.onSetupError))},AnimationItem.prototype.onSetupError=function(){this.trigger("data_failed")},AnimationItem.prototype.setupAnimation=function(A){dataManager.completeAnimation(A,this.configAnimation)},AnimationItem.prototype.setData=function(A,T){T&&_typeof$4(T)!=="object"&&(T=JSON.parse(T));var E={wrapper:A,animationData:T},C=A.attributes;E.path=C.getNamedItem("data-animation-path")?C.getNamedItem("data-animation-path").value:C.getNamedItem("data-bm-path")?C.getNamedItem("data-bm-path").value:C.getNamedItem("bm-path")?C.getNamedItem("bm-path").value:"",E.animType=C.getNamedItem("data-anim-type")?C.getNamedItem("data-anim-type").value:C.getNamedItem("data-bm-type")?C.getNamedItem("data-bm-type").value:C.getNamedItem("bm-type")?C.getNamedItem("bm-type").value:C.getNamedItem("data-bm-renderer")?C.getNamedItem("data-bm-renderer").value:C.getNamedItem("bm-renderer")?C.getNamedItem("bm-renderer").value:getRegisteredRenderer()||"canvas";var P=C.getNamedItem("data-anim-loop")?C.getNamedItem("data-anim-loop").value:C.getNamedItem("data-bm-loop")?C.getNamedItem("data-bm-loop").value:C.getNamedItem("bm-loop")?C.getNamedItem("bm-loop").value:"";P==="false"?E.loop=!1:P==="true"?E.loop=!0:P!==""&&(E.loop=parseInt(P,10));var I=C.getNamedItem("data-anim-autoplay")?C.getNamedItem("data-anim-autoplay").value:C.getNamedItem("data-bm-autoplay")?C.getNamedItem("data-bm-autoplay").value:C.getNamedItem("bm-autoplay")?C.getNamedItem("bm-autoplay").value:!0;E.autoplay=I!=="false",E.name=C.getNamedItem("data-name")?C.getNamedItem("data-name").value:C.getNamedItem("data-bm-name")?C.getNamedItem("data-bm-name").value:C.getNamedItem("bm-name")?C.getNamedItem("bm-name").value:"";var R=C.getNamedItem("data-anim-prerender")?C.getNamedItem("data-anim-prerender").value:C.getNamedItem("data-bm-prerender")?C.getNamedItem("data-bm-prerender").value:C.getNamedItem("bm-prerender")?C.getNamedItem("bm-prerender").value:"";R==="false"&&(E.prerender=!1),E.path?this.setParams(E):this.trigger("destroy")},AnimationItem.prototype.includeLayers=function(A){A.op>this.animationData.op&&(this.animationData.op=A.op,this.totalFrames=Math.floor(A.op-this.animationData.ip));var T=this.animationData.layers,E,C=T.length,P=A.layers,I,R=P.length;for(I=0;I<R;I+=1)for(E=0;E<C;){if(T[E].id===P[I].id){T[E]=P[I];break}E+=1}if((A.chars||A.fonts)&&(this.renderer.globalData.fontManager.addChars(A.chars),this.renderer.globalData.fontManager.addFonts(A.fonts,this.renderer.globalData.defs)),A.assets)for(C=A.assets.length,E=0;E<C;E+=1)this.animationData.assets.push(A.assets[E]);this.animationData.__complete=!1,dataManager.completeAnimation(this.animationData,this.onSegmentComplete)},AnimationItem.prototype.onSegmentComplete=function(A){this.animationData=A;var T=getExpressionsPlugin();T&&T.initExpressions(this),this.loadNextSegment()},AnimationItem.prototype.loadNextSegment=function(){var A=this.animationData.segments;if(!A||A.length===0||!this.autoloadSegments){this.trigger("data_ready"),this.timeCompleted=this.totalFrames;return}var T=A.shift();this.timeCompleted=T.time*this.frameRate;var E=this.path+this.fileName+"_"+this.segmentPos+".json";this.segmentPos+=1,dataManager.loadData(E,this.includeLayers.bind(this),(function(){this.trigger("data_failed")}).bind(this))},AnimationItem.prototype.loadSegments=function(){var A=this.animationData.segments;A||(this.timeCompleted=this.totalFrames),this.loadNextSegment()},AnimationItem.prototype.imagesLoaded=function(){this.trigger("loaded_images"),this.checkLoaded()},AnimationItem.prototype.preloadImages=function(){this.imagePreloader.setAssetsPath(this.assetsPath),this.imagePreloader.setPath(this.path),this.imagePreloader.loadAssets(this.animationData.assets,this.imagesLoaded.bind(this))},AnimationItem.prototype.configAnimation=function(A){if(this.renderer)try{this.animationData=A,this.initialSegment?(this.totalFrames=Math.floor(this.initialSegment[1]-this.initialSegment[0]),this.firstFrame=Math.round(this.initialSegment[0])):(this.totalFrames=Math.floor(this.animationData.op-this.animationData.ip),this.firstFrame=Math.round(this.animationData.ip)),this.renderer.configAnimation(A),A.assets||(A.assets=[]),this.assets=this.animationData.assets,this.frameRate=this.animationData.fr,this.frameMult=this.animationData.fr/1e3,this.renderer.searchExtraCompositions(A.assets),this.markers=markerParser(A.markers||[]),this.trigger("config_ready"),this.preloadImages(),this.loadSegments(),this.updaFrameModifier(),this.waitForFontsLoaded(),this.isPaused&&this.audioController.pause()}catch(T){this.triggerConfigError(T)}},AnimationItem.prototype.waitForFontsLoaded=function(){this.renderer&&(this.renderer.globalData.fontManager.isLoaded?this.checkLoaded():setTimeout(this.waitForFontsLoaded.bind(this),20))},AnimationItem.prototype.checkLoaded=function(){if(!this.isLoaded&&this.renderer.globalData.fontManager.isLoaded&&(this.imagePreloader.loadedImages()||this.renderer.rendererType!=="canvas")&&this.imagePreloader.loadedFootages()){this.isLoaded=!0;var A=getExpressionsPlugin();A&&A.initExpressions(this),this.renderer.initItems(),setTimeout((function(){this.trigger("DOMLoaded")}).bind(this),0),this.gotoFrame(),this.autoplay&&this.play()}},AnimationItem.prototype.resize=function(A,T){var E=typeof A=="number"?A:void 0,C=typeof T=="number"?T:void 0;this.renderer.updateContainerSize(E,C)},AnimationItem.prototype.setSubframe=function(A){this.isSubframeEnabled=!!A},AnimationItem.prototype.gotoFrame=function(){this.currentFrame=this.isSubframeEnabled?this.currentRawFrame:~~this.currentRawFrame,this.timeCompleted!==this.totalFrames&&this.currentFrame>this.timeCompleted&&(this.currentFrame=this.timeCompleted),this.trigger("enterFrame"),this.renderFrame(),this.trigger("drawnFrame")},AnimationItem.prototype.renderFrame=function(){if(!(this.isLoaded===!1||!this.renderer))try{this.expressionsPlugin&&this.expressionsPlugin.resetFrame(),this.renderer.renderFrame(this.currentFrame+this.firstFrame)}catch(A){this.triggerRenderFrameError(A)}},AnimationItem.prototype.play=function(A){A&&this.name!==A||this.isPaused===!0&&(this.isPaused=!1,this.trigger("_play"),this.audioController.resume(),this._idle&&(this._idle=!1,this.trigger("_active")))},AnimationItem.prototype.pause=function(A){A&&this.name!==A||this.isPaused===!1&&(this.isPaused=!0,this.trigger("_pause"),this._idle=!0,this.trigger("_idle"),this.audioController.pause())},AnimationItem.prototype.togglePause=function(A){A&&this.name!==A||(this.isPaused===!0?this.play():this.pause())},AnimationItem.prototype.stop=function(A){A&&this.name!==A||(this.pause(),this.playCount=0,this._completedLoop=!1,this.setCurrentRawFrameValue(0))},AnimationItem.prototype.getMarkerData=function(A){for(var T,E=0;E<this.markers.length;E+=1)if(T=this.markers[E],T.payload&&T.payload.name===A)return T;return null},AnimationItem.prototype.goToAndStop=function(A,T,E){if(!(E&&this.name!==E)){var C=Number(A);if(isNaN(C)){var P=this.getMarkerData(A);P&&this.goToAndStop(P.time,!0)}else T?this.setCurrentRawFrameValue(A):this.setCurrentRawFrameValue(A*this.frameModifier);this.pause()}},AnimationItem.prototype.goToAndPlay=function(A,T,E){if(!(E&&this.name!==E)){var C=Number(A);if(isNaN(C)){var P=this.getMarkerData(A);P&&(P.duration?this.playSegments([P.time,P.time+P.duration],!0):this.goToAndStop(P.time,!0))}else this.goToAndStop(C,T,E);this.play()}},AnimationItem.prototype.advanceTime=function(A){if(!(this.isPaused===!0||this.isLoaded===!1)){var T=this.currentRawFrame+A*this.frameModifier,E=!1;T>=this.totalFrames-1&&this.frameModifier>0?!this.loop||this.playCount===this.loop?this.checkSegments(T>this.totalFrames?T%this.totalFrames:0)||(E=!0,T=this.totalFrames-1):T>=this.totalFrames?(this.playCount+=1,this.checkSegments(T%this.totalFrames)||(this.setCurrentRawFrameValue(T%this.totalFrames),this._completedLoop=!0,this.trigger("loopComplete"))):this.setCurrentRawFrameValue(T):T<0?this.checkSegments(T%this.totalFrames)||(this.loop&&!(this.playCount--<=0&&this.loop!==!0)?(this.setCurrentRawFrameValue(this.totalFrames+T%this.totalFrames),this._completedLoop?this.trigger("loopComplete"):this._completedLoop=!0):(E=!0,T=0)):this.setCurrentRawFrameValue(T),E&&(this.setCurrentRawFrameValue(T),this.pause(),this.trigger("complete"))}},AnimationItem.prototype.adjustSegment=function(A,T){this.playCount=0,A[1]<A[0]?(this.frameModifier>0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(-1)),this.totalFrames=A[0]-A[1],this.timeCompleted=this.totalFrames,this.firstFrame=A[1],this.setCurrentRawFrameValue(this.totalFrames-.001-T)):A[1]>A[0]&&(this.frameModifier<0&&(this.playSpeed<0?this.setSpeed(-this.playSpeed):this.setDirection(1)),this.totalFrames=A[1]-A[0],this.timeCompleted=this.totalFrames,this.firstFrame=A[0],this.setCurrentRawFrameValue(.001+T)),this.trigger("segmentStart")},AnimationItem.prototype.setSegment=function(A,T){var E=-1;this.isPaused&&(this.currentRawFrame+this.firstFrame<A?E=A:this.currentRawFrame+this.firstFrame>T&&(E=T-A)),this.firstFrame=A,this.totalFrames=T-A,this.timeCompleted=this.totalFrames,E!==-1&&this.goToAndStop(E,!0)},AnimationItem.prototype.playSegments=function(A,T){if(T&&(this.segments.length=0),_typeof$4(A[0])==="object"){var E,C=A.length;for(E=0;E<C;E+=1)this.segments.push(A[E])}else this.segments.push(A);this.segments.length&&T&&this.adjustSegment(this.segments.shift(),0),this.isPaused&&this.play()},AnimationItem.prototype.resetSegments=function(A){this.segments.length=0,this.segments.push([this.animationData.ip,this.animationData.op]),A&&this.checkSegments(0)},AnimationItem.prototype.checkSegments=function(A){return this.segments.length?(this.adjustSegment(this.segments.shift(),A),!0):!1},AnimationItem.prototype.destroy=function(A){A&&this.name!==A||!this.renderer||(this.renderer.destroy(),this.imagePreloader.destroy(),this.trigger("destroy"),this._cbs=null,this.onEnterFrame=null,this.onLoopComplete=null,this.onComplete=null,this.onSegmentStart=null,this.onDestroy=null,this.renderer=null,this.expressionsPlugin=null,this.imagePreloader=null,this.projectInterface=null)},AnimationItem.prototype.setCurrentRawFrameValue=function(A){this.currentRawFrame=A,this.gotoFrame()},AnimationItem.prototype.setSpeed=function(A){this.playSpeed=A,this.updaFrameModifier()},AnimationItem.prototype.setDirection=function(A){this.playDirection=A<0?-1:1,this.updaFrameModifier()},AnimationItem.prototype.setLoop=function(A){this.loop=A},AnimationItem.prototype.setVolume=function(A,T){T&&this.name!==T||this.audioController.setVolume(A)},AnimationItem.prototype.getVolume=function(){return this.audioController.getVolume()},AnimationItem.prototype.mute=function(A){A&&this.name!==A||this.audioController.mute()},AnimationItem.prototype.unmute=function(A){A&&this.name!==A||this.audioController.unmute()},AnimationItem.prototype.updaFrameModifier=function(){this.frameModifier=this.frameMult*this.playSpeed*this.playDirection,this.audioController.setRate(this.playSpeed*this.playDirection)},AnimationItem.prototype.getPath=function(){return this.path},AnimationItem.prototype.getAssetsPath=function(A){var T="";if(A.e)T=A.p;else if(this.assetsPath){var E=A.p;E.indexOf("images/")!==-1&&(E=E.split("/")[1]),T=this.assetsPath+E}else T=this.path,T+=A.u?A.u:"",T+=A.p;return T},AnimationItem.prototype.getAssetData=function(A){for(var T=0,E=this.assets.length;T<E;){if(A===this.assets[T].id)return this.assets[T];T+=1}return null},AnimationItem.prototype.hide=function(){this.renderer.hide()},AnimationItem.prototype.show=function(){this.renderer.show()},AnimationItem.prototype.getDuration=function(A){return A?this.totalFrames:this.totalFrames/this.frameRate},AnimationItem.prototype.updateDocumentData=function(A,T,E){try{var C=this.renderer.getElementByPath(A);C.updateDocumentData(T,E)}catch{}},AnimationItem.prototype.trigger=function(A){if(this._cbs&&this._cbs[A])switch(A){case"enterFrame":this.triggerEvent(A,new BMEnterFrameEvent(A,this.currentFrame,this.totalFrames,this.frameModifier));break;case"drawnFrame":this.drawnFrameEvent.currentTime=this.currentFrame,this.drawnFrameEvent.totalTime=this.totalFrames,this.drawnFrameEvent.direction=this.frameModifier,this.triggerEvent(A,this.drawnFrameEvent);break;case"loopComplete":this.triggerEvent(A,new BMCompleteLoopEvent(A,this.loop,this.playCount,this.frameMult));break;case"complete":this.triggerEvent(A,new BMCompleteEvent(A,this.frameMult));break;case"segmentStart":this.triggerEvent(A,new BMSegmentStartEvent(A,this.firstFrame,this.totalFrames));break;case"destroy":this.triggerEvent(A,new BMDestroyEvent(A,this));break;default:this.triggerEvent(A)}A==="enterFrame"&&this.onEnterFrame&&this.onEnterFrame.call(this,new BMEnterFrameEvent(A,this.currentFrame,this.totalFrames,this.frameMult)),A==="loopComplete"&&this.onLoopComplete&&this.onLoopComplete.call(this,new BMCompleteLoopEvent(A,this.loop,this.playCount,this.frameMult)),A==="complete"&&this.onComplete&&this.onComplete.call(this,new BMCompleteEvent(A,this.frameMult)),A==="segmentStart"&&this.onSegmentStart&&this.onSegmentStart.call(this,new BMSegmentStartEvent(A,this.firstFrame,this.totalFrames)),A==="destroy"&&this.onDestroy&&this.onDestroy.call(this,new BMDestroyEvent(A,this))},AnimationItem.prototype.triggerRenderFrameError=function(A){var T=new BMRenderFrameErrorEvent(A,this.currentFrame);this.triggerEvent("error",T),this.onError&&this.onError.call(this,T)},AnimationItem.prototype.triggerConfigError=function(A){var T=new BMConfigErrorEvent(A,this.currentFrame);this.triggerEvent("error",T),this.onError&&this.onError.call(this,T)};var animationManager=function(){var A={},T=[],E=0,C=0,P=0,I=!0,R=!1;function F(ae){for(var ce=0,se=ae.target;ce<C;)T[ce].animation===se&&(T.splice(ce,1),ce-=1,C-=1,se.isPaused||B()),ce+=1}function O(ae,ce){if(!ae)return null;for(var se=0;se<C;){if(T[se].elem===ae&&T[se].elem!==null)return T[se].animation;se+=1}var le=new AnimationItem;return V(le,ae),le.setData(ae,ce),le}function D(){var ae,ce=T.length,se=[];for(ae=0;ae<ce;ae+=1)se.push(T[ae].animation);return se}function L(){P+=1,ve()}function B(){P-=1}function V(ae,ce){ae.addEventListener("destroy",F),ae.addEventListener("_active",L),ae.addEventListener("_idle",B),T.push({elem:ce,animation:ae}),C+=1}function U(ae){var ce=new AnimationItem;return V(ce,null),ce.setParams(ae),ce}function z(ae,ce){var se;for(se=0;se<C;se+=1)T[se].animation.setSpeed(ae,ce)}function W(ae,ce){var se;for(se=0;se<C;se+=1)T[se].animation.setDirection(ae,ce)}function Z(ae){var ce;for(ce=0;ce<C;ce+=1)T[ce].animation.play(ae)}function X(ae){var ce=ae-E,se;for(se=0;se<C;se+=1)T[se].animation.advanceTime(ce);E=ae,P&&!R?window.requestAnimationFrame(X):I=!0}function K(ae){E=ae,window.requestAnimationFrame(X)}function Y(ae){var ce;for(ce=0;ce<C;ce+=1)T[ce].animation.pause(ae)}function Q(ae,ce,se){var le;for(le=0;le<C;le+=1)T[le].animation.goToAndStop(ae,ce,se)}function J(ae){var ce;for(ce=0;ce<C;ce+=1)T[ce].animation.stop(ae)}function te(ae){var ce;for(ce=0;ce<C;ce+=1)T[ce].animation.togglePause(ae)}function ie(ae){var ce;for(ce=C-1;ce>=0;ce-=1)T[ce].animation.destroy(ae)}function ne(ae,ce,se){var le=[].concat([].slice.call(document.getElementsByClassName("lottie")),[].slice.call(document.getElementsByClassName("bodymovin"))),_e,me=le.length;for(_e=0;_e<me;_e+=1)se&&le[_e].setAttribute("data-bm-type",se),O(le[_e],ae);if(ce&&me===0){se||(se="svg");var Ee=document.getElementsByTagName("body")[0];Ee.innerText="";var Pe=createTag("div");Pe.style.width="100%",Pe.style.height="100%",Pe.setAttribute("data-bm-type",se),Ee.appendChild(Pe),O(Pe,ae)}}function he(){var ae;for(ae=0;ae<C;ae+=1)T[ae].animation.resize()}function ve(){!R&&P&&I&&(window.requestAnimationFrame(K),I=!1)}function ye(){R=!0}function de(){R=!1,ve()}function fe(ae,ce){var se;for(se=0;se<C;se+=1)T[se].animation.setVolume(ae,ce)}function ue(ae){var ce;for(ce=0;ce<C;ce+=1)T[ce].animation.mute(ae)}function ge(ae){var ce;for(ce=0;ce<C;ce+=1)T[ce].animation.unmute(ae)}return A.registerAnimation=O,A.loadAnimation=U,A.setSpeed=z,A.setDirection=W,A.play=Z,A.pause=Y,A.stop=J,A.togglePause=te,A.searchAnimations=ne,A.resize=he,A.goToAndStop=Q,A.destroy=ie,A.freeze=ye,A.unfreeze=de,A.setVolume=fe,A.mute=ue,A.unmute=ge,A.getRegisteredAnimations=D,A}(),BezierFactory=function(){var A={};A.getBezierEasing=E;var T={};function E(K,Y,Q,J,te){var ie=te||("bez_"+K+"_"+Y+"_"+Q+"_"+J).replace(/\./g,"p");if(T[ie])return T[ie];var ne=new X([K,Y,Q,J]);return T[ie]=ne,ne}var C=4,P=.001,I=1e-7,R=10,F=11,O=1/(F-1),D=typeof Float32Array=="function";function L(K,Y){return 1-3*Y+3*K}function B(K,Y){return 3*Y-6*K}function V(K){return 3*K}function U(K,Y,Q){return((L(Y,Q)*K+B(Y,Q))*K+V(Y))*K}function z(K,Y,Q){return 3*L(Y,Q)*K*K+2*B(Y,Q)*K+V(Y)}function W(K,Y,Q,J,te){var ie,ne,he=0;do ne=Y+(Q-Y)/2,ie=U(ne,J,te)-K,ie>0?Q=ne:Y=ne;while(Math.abs(ie)>I&&++he<R);return ne}function Z(K,Y,Q,J){for(var te=0;te<C;++te){var ie=z(Y,Q,J);if(ie===0)return Y;var ne=U(Y,Q,J)-K;Y-=ne/ie}return Y}function X(K){this._p=K,this._mSampleValues=D?new Float32Array(F):new Array(F),this._precomputed=!1,this.get=this.get.bind(this)}return X.prototype={get:function(Y){var Q=this._p[0],J=this._p[1],te=this._p[2],ie=this._p[3];return this._precomputed||this._precompute(),Q===J&&te===ie?Y:Y===0?0:Y===1?1:U(this._getTForX(Y),J,ie)},_precompute:function(){var Y=this._p[0],Q=this._p[1],J=this._p[2],te=this._p[3];this._precomputed=!0,(Y!==Q||J!==te)&&this._calcSampleValues()},_calcSampleValues:function(){for(var Y=this._p[0],Q=this._p[2],J=0;J<F;++J)this._mSampleValues[J]=U(J*O,Y,Q)},_getTForX:function(Y){for(var Q=this._p[0],J=this._p[2],te=this._mSampleValues,ie=0,ne=1,he=F-1;ne!==he&&te[ne]<=Y;++ne)ie+=O;--ne;var ve=(Y-te[ne])/(te[ne+1]-te[ne]),ye=ie+ve*O,de=z(ye,Q,J);return de>=P?Z(Y,ye,Q,J):de===0?ye:W(Y,ie,ie+O,Q,J)}},A}(),pooling=function(){function A(T){return T.concat(createSizedArray(T.length))}return{double:A}}(),poolFactory=function(){return function(A,T,E){var C=0,P=A,I=createSizedArray(P),R={newElement:F,release:O};function F(){var D;return C?(C-=1,D=I[C]):D=T(),D}function O(D){C===P&&(I=pooling.double(I),P*=2),E&&E(D),I[C]=D,C+=1}return R}}(),bezierLengthPool=function(){function A(){return{addedLength:0,percents:createTypedArray("float32",getDefaultCurveSegments()),lengths:createTypedArray("float32",getDefaultCurveSegments())}}return poolFactory(8,A)}(),segmentsLengthPool=function(){function A(){return{lengths:[],totalLength:0}}function T(E){var C,P=E.lengths.length;for(C=0;C<P;C+=1)bezierLengthPool.release(E.lengths[C]);E.lengths.length=0}return poolFactory(8,A,T)}();function bezFunction(){var A=Math;function T(V,U,z,W,Z,X){var K=V*W+U*Z+z*X-Z*W-X*V-z*U;return K>-.001&&K<.001}function E(V,U,z,W,Z,X,K,Y,Q){if(z===0&&X===0&&Q===0)return T(V,U,W,Z,K,Y);var J=A.sqrt(A.pow(W-V,2)+A.pow(Z-U,2)+A.pow(X-z,2)),te=A.sqrt(A.pow(K-V,2)+A.pow(Y-U,2)+A.pow(Q-z,2)),ie=A.sqrt(A.pow(K-W,2)+A.pow(Y-Z,2)+A.pow(Q-X,2)),ne;return J>te?J>ie?ne=J-te-ie:ne=ie-te-J:ie>te?ne=ie-te-J:ne=te-J-ie,ne>-1e-4&&ne<1e-4}var C=function(){return function(V,U,z,W){var Z=getDefaultCurveSegments(),X,K,Y,Q,J,te=0,ie,ne=[],he=[],ve=bezierLengthPool.newElement();for(Y=z.length,X=0;X<Z;X+=1){for(J=X/(Z-1),ie=0,K=0;K<Y;K+=1)Q=bmPow(1-J,3)*V[K]+3*bmPow(1-J,2)*J*z[K]+3*(1-J)*bmPow(J,2)*W[K]+bmPow(J,3)*U[K],ne[K]=Q,he[K]!==null&&(ie+=bmPow(ne[K]-he[K],2)),he[K]=ne[K];ie&&(ie=bmSqrt(ie),te+=ie),ve.percents[X]=J,ve.lengths[X]=te}return ve.addedLength=te,ve}}();function P(V){var U=segmentsLengthPool.newElement(),z=V.c,W=V.v,Z=V.o,X=V.i,K,Y=V._length,Q=U.lengths,J=0;for(K=0;K<Y-1;K+=1)Q[K]=C(W[K],W[K+1],Z[K],X[K+1]),J+=Q[K].addedLength;return z&&Y&&(Q[K]=C(W[K],W[0],Z[K],X[0]),J+=Q[K].addedLength),U.totalLength=J,U}function I(V){this.segmentLength=0,this.points=new Array(V)}function R(V,U){this.partialLength=V,this.point=U}var F=function(){var V={};return function(U,z,W,Z){var X=(U[0]+"_"+U[1]+"_"+z[0]+"_"+z[1]+"_"+W[0]+"_"+W[1]+"_"+Z[0]+"_"+Z[1]).replace(/\./g,"p");if(!V[X]){var K=getDefaultCurveSegments(),Y,Q,J,te,ie,ne=0,he,ve,ye=null;U.length===2&&(U[0]!==z[0]||U[1]!==z[1])&&T(U[0],U[1],z[0],z[1],U[0]+W[0],U[1]+W[1])&&T(U[0],U[1],z[0],z[1],z[0]+Z[0],z[1]+Z[1])&&(K=2);var de=new I(K);for(J=W.length,Y=0;Y<K;Y+=1){for(ve=createSizedArray(J),ie=Y/(K-1),he=0,Q=0;Q<J;Q+=1)te=bmPow(1-ie,3)*U[Q]+3*bmPow(1-ie,2)*ie*(U[Q]+W[Q])+3*(1-ie)*bmPow(ie,2)*(z[Q]+Z[Q])+bmPow(ie,3)*z[Q],ve[Q]=te,ye!==null&&(he+=bmPow(ve[Q]-ye[Q],2));he=bmSqrt(he),ne+=he,de.points[Y]=new R(he,ve),ye=ve}de.segmentLength=ne,V[X]=de}return V[X]}}();function O(V,U){var z=U.percents,W=U.lengths,Z=z.length,X=bmFloor((Z-1)*V),K=V*U.addedLength,Y=0;if(X===Z-1||X===0||K===W[X])return z[X];for(var Q=W[X]>K?-1:1,J=!0;J;)if(W[X]<=K&&W[X+1]>K?(Y=(K-W[X])/(W[X+1]-W[X]),J=!1):X+=Q,X<0||X>=Z-1){if(X===Z-1)return z[X];J=!1}return z[X]+(z[X+1]-z[X])*Y}function D(V,U,z,W,Z,X){var K=O(Z,X),Y=1-K,Q=A.round((Y*Y*Y*V[0]+(K*Y*Y+Y*K*Y+Y*Y*K)*z[0]+(K*K*Y+Y*K*K+K*Y*K)*W[0]+K*K*K*U[0])*1e3)/1e3,J=A.round((Y*Y*Y*V[1]+(K*Y*Y+Y*K*Y+Y*Y*K)*z[1]+(K*K*Y+Y*K*K+K*Y*K)*W[1]+K*K*K*U[1])*1e3)/1e3;return[Q,J]}var L=createTypedArray("float32",8);function B(V,U,z,W,Z,X,K){Z<0?Z=0:Z>1&&(Z=1);var Y=O(Z,K);X=X>1?1:X;var Q=O(X,K),J,te=V.length,ie=1-Y,ne=1-Q,he=ie*ie*ie,ve=Y*ie*ie*3,ye=Y*Y*ie*3,de=Y*Y*Y,fe=ie*ie*ne,ue=Y*ie*ne+ie*Y*ne+ie*ie*Q,ge=Y*Y*ne+ie*Y*Q+Y*ie*Q,ae=Y*Y*Q,ce=ie*ne*ne,se=Y*ne*ne+ie*Q*ne+ie*ne*Q,le=Y*Q*ne+ie*Q*Q+Y*ne*Q,_e=Y*Q*Q,me=ne*ne*ne,Ee=Q*ne*ne+ne*Q*ne+ne*ne*Q,Pe=Q*Q*ne+ne*Q*Q+Q*ne*Q,Ce=Q*Q*Q;for(J=0;J<te;J+=1)L[J*4]=A.round((he*V[J]+ve*z[J]+ye*W[J]+de*U[J])*1e3)/1e3,L[J*4+1]=A.round((fe*V[J]+ue*z[J]+ge*W[J]+ae*U[J])*1e3)/1e3,L[J*4+2]=A.round((ce*V[J]+se*z[J]+le*W[J]+_e*U[J])*1e3)/1e3,L[J*4+3]=A.round((me*V[J]+Ee*z[J]+Pe*W[J]+Ce*U[J])*1e3)/1e3;return L}return{getSegmentsLength:P,getNewSegment:B,getPointInSegment:D,buildBezierData:F,pointOnLine2D:T,pointOnLine3D:E}}var bez=bezFunction(),initFrame=initialDefaultFrame,mathAbs=Math.abs;function interpolateValue(A,T){var E=this.offsetTime,C;this.propType==="multidimensional"&&(C=createTypedArray("float32",this.pv.length));for(var P=T.lastIndex,I=P,R=this.keyframes.length-1,F=!0,O,D,L;F;){if(O=this.keyframes[I],D=this.keyframes[I+1],I===R-1&&A>=D.t-E){O.h&&(O=D),P=0;break}if(D.t-E>A){P=I;break}I<R-1?I+=1:(P=0,F=!1)}L=this.keyframesMetadata[I]||{};var B,V,U,z,W,Z,X=D.t-E,K=O.t-E,Y;if(O.to){L.bezierData||(L.bezierData=bez.buildBezierData(O.s,D.s||O.e,O.to,O.ti));var Q=L.bezierData;if(A>=X||A<K){var J=A>=X?Q.points.length-1:0;for(V=Q.points[J].point.length,B=0;B<V;B+=1)C[B]=Q.points[J].point[B]}else{L.__fnct?Z=L.__fnct:(Z=BezierFactory.getBezierEasing(O.o.x,O.o.y,O.i.x,O.i.y,O.n).get,L.__fnct=Z),U=Z((A-K)/(X-K));var te=Q.segmentLength*U,ie,ne=T.lastFrame<A&&T._lastKeyframeIndex===I?T._lastAddedLength:0;for(W=T.lastFrame<A&&T._lastKeyframeIndex===I?T._lastPoint:0,F=!0,z=Q.points.length;F;){if(ne+=Q.points[W].partialLength,te===0||U===0||W===Q.points.length-1){for(V=Q.points[W].point.length,B=0;B<V;B+=1)C[B]=Q.points[W].point[B];break}else if(te>=ne&&te<ne+Q.points[W+1].partialLength){for(ie=(te-ne)/Q.points[W+1].partialLength,V=Q.points[W].point.length,B=0;B<V;B+=1)C[B]=Q.points[W].point[B]+(Q.points[W+1].point[B]-Q.points[W].point[B])*ie;break}W<z-1?W+=1:F=!1}T._lastPoint=W,T._lastAddedLength=ne-Q.points[W].partialLength,T._lastKeyframeIndex=I}}else{var he,ve,ye,de,fe;if(R=O.s.length,Y=D.s||O.e,this.sh&&O.h!==1)if(A>=X)C[0]=Y[0],C[1]=Y[1],C[2]=Y[2];else if(A<=K)C[0]=O.s[0],C[1]=O.s[1],C[2]=O.s[2];else{var ue=createQuaternion(O.s),ge=createQuaternion(Y),ae=(A-K)/(X-K);quaternionToEuler(C,slerp(ue,ge,ae))}else for(I=0;I<R;I+=1)O.h!==1&&(A>=X?U=1:A<K?U=0:(O.o.x.constructor===Array?(L.__fnct||(L.__fnct=[]),L.__fnct[I]?Z=L.__fnct[I]:(he=O.o.x[I]===void 0?O.o.x[0]:O.o.x[I],ve=O.o.y[I]===void 0?O.o.y[0]:O.o.y[I],ye=O.i.x[I]===void 0?O.i.x[0]:O.i.x[I],de=O.i.y[I]===void 0?O.i.y[0]:O.i.y[I],Z=BezierFactory.getBezierEasing(he,ve,ye,de).get,L.__fnct[I]=Z)):L.__fnct?Z=L.__fnct:(he=O.o.x,ve=O.o.y,ye=O.i.x,de=O.i.y,Z=BezierFactory.getBezierEasing(he,ve,ye,de).get,O.keyframeMetadata=Z),U=Z((A-K)/(X-K)))),Y=D.s||O.e,fe=O.h===1?O.s[I]:O.s[I]+(Y[I]-O.s[I])*U,this.propType==="multidimensional"?C[I]=fe:C=fe}return T.lastIndex=P,C}function slerp(A,T,E){var C=[],P=A[0],I=A[1],R=A[2],F=A[3],O=T[0],D=T[1],L=T[2],B=T[3],V,U,z,W,Z;return U=P*O+I*D+R*L+F*B,U<0&&(U=-U,O=-O,D=-D,L=-L,B=-B),1-U>1e-6?(V=Math.acos(U),z=Math.sin(V),W=Math.sin((1-E)*V)/z,Z=Math.sin(E*V)/z):(W=1-E,Z=E),C[0]=W*P+Z*O,C[1]=W*I+Z*D,C[2]=W*R+Z*L,C[3]=W*F+Z*B,C}function quaternionToEuler(A,T){var E=T[0],C=T[1],P=T[2],I=T[3],R=Math.atan2(2*C*I-2*E*P,1-2*C*C-2*P*P),F=Math.asin(2*E*C+2*P*I),O=Math.atan2(2*E*I-2*C*P,1-2*E*E-2*P*P);A[0]=R/degToRads,A[1]=F/degToRads,A[2]=O/degToRads}function createQuaternion(A){var T=A[0]*degToRads,E=A[1]*degToRads,C=A[2]*degToRads,P=Math.cos(T/2),I=Math.cos(E/2),R=Math.cos(C/2),F=Math.sin(T/2),O=Math.sin(E/2),D=Math.sin(C/2),L=P*I*R-F*O*D,B=F*O*R+P*I*D,V=F*I*R+P*O*D,U=P*O*R-F*I*D;return[B,V,U,L]}function getValueAtCurrentTime(){var A=this.comp.renderedFrame-this.offsetTime,T=this.keyframes[0].t-this.offsetTime,E=this.keyframes[this.keyframes.length-1].t-this.offsetTime;if(!(A===this._caching.lastFrame||this._caching.lastFrame!==initFrame&&(this._caching.lastFrame>=E&&A>=E||this._caching.lastFrame<T&&A<T))){this._caching.lastFrame>=A&&(this._caching._lastKeyframeIndex=-1,this._caching.lastIndex=0);var C=this.interpolateValue(A,this._caching);this.pv=C}return this._caching.lastFrame=A,this.pv}function setVValue(A){var T;if(this.propType==="unidimensional")T=A*this.mult,mathAbs(this.v-T)>1e-5&&(this.v=T,this._mdf=!0);else for(var E=0,C=this.v.length;E<C;)T=A[E]*this.mult,mathAbs(this.v[E]-T)>1e-5&&(this.v[E]=T,this._mdf=!0),E+=1}function processEffectsSequence(){if(!(this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)){if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=this._isFirstFrame;var A,T=this.effectsSequence.length,E=this.kf?this.pv:this.data.k;for(A=0;A<T;A+=1)E=this.effectsSequence[A](E);this.setVValue(E),this._isFirstFrame=!1,this.lock=!1,this.frameId=this.elem.globalData.frameId}}function addEffect(A){this.effectsSequence.push(A),this.container.addDynamicProperty(this)}function ValueProperty(A,T,E,C){this.propType="unidimensional",this.mult=E||1,this.data=T,this.v=E?T.k*E:T.k,this.pv=T.k,this._mdf=!1,this.elem=A,this.container=C,this.comp=A.comp,this.k=!1,this.kf=!1,this.vel=0,this.effectsSequence=[],this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function MultiDimensionalProperty(A,T,E,C){this.propType="multidimensional",this.mult=E||1,this.data=T,this._mdf=!1,this.elem=A,this.container=C,this.comp=A.comp,this.k=!1,this.kf=!1,this.frameId=-1;var P,I=T.k.length;for(this.v=createTypedArray("float32",I),this.pv=createTypedArray("float32",I),this.vel=createTypedArray("float32",I),P=0;P<I;P+=1)this.v[P]=T.k[P]*this.mult,this.pv[P]=T.k[P];this._isFirstFrame=!0,this.effectsSequence=[],this.getValue=processEffectsSequence,this.setVValue=setVValue,this.addEffect=addEffect}function KeyframedValueProperty(A,T,E,C){this.propType="unidimensional",this.keyframes=T.k,this.keyframesMetadata=[],this.offsetTime=A.data.st,this.frameId=-1,this._caching={lastFrame:initFrame,lastIndex:0,value:0,_lastKeyframeIndex:-1},this.k=!0,this.kf=!0,this.data=T,this.mult=E||1,this.elem=A,this.container=C,this.comp=A.comp,this.v=initFrame,this.pv=initFrame,this._isFirstFrame=!0,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.addEffect=addEffect}function KeyframedMultidimensionalProperty(A,T,E,C){this.propType="multidimensional";var P,I=T.k.length,R,F,O,D;for(P=0;P<I-1;P+=1)T.k[P].to&&T.k[P].s&&T.k[P+1]&&T.k[P+1].s&&(R=T.k[P].s,F=T.k[P+1].s,O=T.k[P].to,D=T.k[P].ti,(R.length===2&&!(R[0]===F[0]&&R[1]===F[1])&&bez.pointOnLine2D(R[0],R[1],F[0],F[1],R[0]+O[0],R[1]+O[1])&&bez.pointOnLine2D(R[0],R[1],F[0],F[1],F[0]+D[0],F[1]+D[1])||R.length===3&&!(R[0]===F[0]&&R[1]===F[1]&&R[2]===F[2])&&bez.pointOnLine3D(R[0],R[1],R[2],F[0],F[1],F[2],R[0]+O[0],R[1]+O[1],R[2]+O[2])&&bez.pointOnLine3D(R[0],R[1],R[2],F[0],F[1],F[2],F[0]+D[0],F[1]+D[1],F[2]+D[2]))&&(T.k[P].to=null,T.k[P].ti=null),R[0]===F[0]&&R[1]===F[1]&&O[0]===0&&O[1]===0&&D[0]===0&&D[1]===0&&(R.length===2||R[2]===F[2]&&O[2]===0&&D[2]===0)&&(T.k[P].to=null,T.k[P].ti=null));this.effectsSequence=[getValueAtCurrentTime.bind(this)],this.data=T,this.keyframes=T.k,this.keyframesMetadata=[],this.offsetTime=A.data.st,this.k=!0,this.kf=!0,this._isFirstFrame=!0,this.mult=E||1,this.elem=A,this.container=C,this.comp=A.comp,this.getValue=processEffectsSequence,this.setVValue=setVValue,this.interpolateValue=interpolateValue,this.frameId=-1;var L=T.k[0].s.length;for(this.v=createTypedArray("float32",L),this.pv=createTypedArray("float32",L),P=0;P<L;P+=1)this.v[P]=initFrame,this.pv[P]=initFrame;this._caching={lastFrame:initFrame,lastIndex:0,value:createTypedArray("float32",L)},this.addEffect=addEffect}var PropertyFactory=function(){function A(E,C,P,I,R){C.sid&&(C=E.globalData.slotManager.getProp(C));var F;if(!C.k.length)F=new ValueProperty(E,C,I,R);else if(typeof C.k[0]=="number")F=new MultiDimensionalProperty(E,C,I,R);else switch(P){case 0:F=new KeyframedValueProperty(E,C,I,R);break;case 1:F=new KeyframedMultidimensionalProperty(E,C,I,R);break}return F.effectsSequence.length&&R.addDynamicProperty(F),F}var T={getProp:A};return T}();function DynamicPropertyContainer(){}DynamicPropertyContainer.prototype={addDynamicProperty:function(T){this.dynamicProperties.indexOf(T)===-1&&(this.dynamicProperties.push(T),this.container.addDynamicProperty(this),this._isAnimated=!0)},iterateDynamicProperties:function(){this._mdf=!1;var T,E=this.dynamicProperties.length;for(T=0;T<E;T+=1)this.dynamicProperties[T].getValue(),this.dynamicProperties[T]._mdf&&(this._mdf=!0)},initDynamicPropertyContainer:function(T){this.container=T,this.dynamicProperties=[],this._mdf=!1,this._isAnimated=!1}};var pointPool=function(){function A(){return createTypedArray("float32",2)}return poolFactory(8,A)}();function ShapePath(){this.c=!1,this._length=0,this._maxLength=8,this.v=createSizedArray(this._maxLength),this.o=createSizedArray(this._maxLength),this.i=createSizedArray(this._maxLength)}ShapePath.prototype.setPathData=function(A,T){this.c=A,this.setLength(T);for(var E=0;E<T;)this.v[E]=pointPool.newElement(),this.o[E]=pointPool.newElement(),this.i[E]=pointPool.newElement(),E+=1},ShapePath.prototype.setLength=function(A){for(;this._maxLength<A;)this.doubleArrayLength();this._length=A},ShapePath.prototype.doubleArrayLength=function(){this.v=this.v.concat(createSizedArray(this._maxLength)),this.i=this.i.concat(createSizedArray(this._maxLength)),this.o=this.o.concat(createSizedArray(this._maxLength)),this._maxLength*=2},ShapePath.prototype.setXYAt=function(A,T,E,C,P){var I;switch(this._length=Math.max(this._length,C+1),this._length>=this._maxLength&&this.doubleArrayLength(),E){case"v":I=this.v;break;case"i":I=this.i;break;case"o":I=this.o;break;default:I=[];break}(!I[C]||I[C]&&!P)&&(I[C]=pointPool.newElement()),I[C][0]=A,I[C][1]=T},ShapePath.prototype.setTripleAt=function(A,T,E,C,P,I,R,F){this.setXYAt(A,T,"v",R,F),this.setXYAt(E,C,"o",R,F),this.setXYAt(P,I,"i",R,F)},ShapePath.prototype.reverse=function(){var A=new ShapePath;A.setPathData(this.c,this._length);var T=this.v,E=this.o,C=this.i,P=0;this.c&&(A.setTripleAt(T[0][0],T[0][1],C[0][0],C[0][1],E[0][0],E[0][1],0,!1),P=1);var I=this._length-1,R=this._length,F;for(F=P;F<R;F+=1)A.setTripleAt(T[I][0],T[I][1],C[I][0],C[I][1],E[I][0],E[I][1],F,!1),I-=1;return A},ShapePath.prototype.length=function(){return this._length};var shapePool=function(){function A(){return new ShapePath}function T(P){var I=P._length,R;for(R=0;R<I;R+=1)pointPool.release(P.v[R]),pointPool.release(P.i[R]),pointPool.release(P.o[R]),P.v[R]=null,P.i[R]=null,P.o[R]=null;P._length=0,P.c=!1}function E(P){var I=C.newElement(),R,F=P._length===void 0?P.v.length:P._length;for(I.setLength(F),I.c=P.c,R=0;R<F;R+=1)I.setTripleAt(P.v[R][0],P.v[R][1],P.o[R][0],P.o[R][1],P.i[R][0],P.i[R][1],R);return I}var C=poolFactory(4,A,T);return C.clone=E,C}();function ShapeCollection(){this._length=0,this._maxLength=4,this.shapes=createSizedArray(this._maxLength)}ShapeCollection.prototype.addShape=function(A){this._length===this._maxLength&&(this.shapes=this.shapes.concat(createSizedArray(this._maxLength)),this._maxLength*=2),this.shapes[this._length]=A,this._length+=1},ShapeCollection.prototype.releaseShapes=function(){var A;for(A=0;A<this._length;A+=1)shapePool.release(this.shapes[A]);this._length=0};var shapeCollectionPool=function(){var A={newShapeCollection:P,release:I},T=0,E=4,C=createSizedArray(E);function P(){var R;return T?(T-=1,R=C[T]):R=new ShapeCollection,R}function I(R){var F,O=R._length;for(F=0;F<O;F+=1)shapePool.release(R.shapes[F]);R._length=0,T===E&&(C=pooling.double(C),E*=2),C[T]=R,T+=1}return A}(),ShapePropertyFactory=function(){var A=-999999;function T(X,K,Y){var Q=Y.lastIndex,J,te,ie,ne,he,ve,ye,de,fe,ue=this.keyframes;if(X<ue[0].t-this.offsetTime)J=ue[0].s[0],ie=!0,Q=0;else if(X>=ue[ue.length-1].t-this.offsetTime)J=ue[ue.length-1].s?ue[ue.length-1].s[0]:ue[ue.length-2].e[0],ie=!0;else{for(var ge=Q,ae=ue.length-1,ce=!0,se,le,_e;ce&&(se=ue[ge],le=ue[ge+1],!(le.t-this.offsetTime>X));)ge<ae-1?ge+=1:ce=!1;if(_e=this.keyframesMetadata[ge]||{},ie=se.h===1,Q=ge,!ie){if(X>=le.t-this.offsetTime)de=1;else if(X<se.t-this.offsetTime)de=0;else{var me;_e.__fnct?me=_e.__fnct:(me=BezierFactory.getBezierEasing(se.o.x,se.o.y,se.i.x,se.i.y).get,_e.__fnct=me),de=me((X-(se.t-this.offsetTime))/(le.t-this.offsetTime-(se.t-this.offsetTime)))}te=le.s?le.s[0]:se.e[0]}J=se.s[0]}for(ve=K._length,ye=J.i[0].length,Y.lastIndex=Q,ne=0;ne<ve;ne+=1)for(he=0;he<ye;he+=1)fe=ie?J.i[ne][he]:J.i[ne][he]+(te.i[ne][he]-J.i[ne][he])*de,K.i[ne][he]=fe,fe=ie?J.o[ne][he]:J.o[ne][he]+(te.o[ne][he]-J.o[ne][he])*de,K.o[ne][he]=fe,fe=ie?J.v[ne][he]:J.v[ne][he]+(te.v[ne][he]-J.v[ne][he])*de,K.v[ne][he]=fe}function E(){var X=this.comp.renderedFrame-this.offsetTime,K=this.keyframes[0].t-this.offsetTime,Y=this.keyframes[this.keyframes.length-1].t-this.offsetTime,Q=this._caching.lastFrame;return Q!==A&&(Q<K&&X<K||Q>Y&&X>Y)||(this._caching.lastIndex=Q<X?this._caching.lastIndex:0,this.interpolateShape(X,this.pv,this._caching)),this._caching.lastFrame=X,this.pv}function C(){this.paths=this.localShapeCollection}function P(X,K){if(X._length!==K._length||X.c!==K.c)return!1;var Y,Q=X._length;for(Y=0;Y<Q;Y+=1)if(X.v[Y][0]!==K.v[Y][0]||X.v[Y][1]!==K.v[Y][1]||X.o[Y][0]!==K.o[Y][0]||X.o[Y][1]!==K.o[Y][1]||X.i[Y][0]!==K.i[Y][0]||X.i[Y][1]!==K.i[Y][1])return!1;return!0}function I(X){P(this.v,X)||(this.v=shapePool.clone(X),this.localShapeCollection.releaseShapes(),this.localShapeCollection.addShape(this.v),this._mdf=!0,this.paths=this.localShapeCollection)}function R(){if(this.elem.globalData.frameId!==this.frameId){if(!this.effectsSequence.length){this._mdf=!1;return}if(this.lock){this.setVValue(this.pv);return}this.lock=!0,this._mdf=!1;var X;this.kf?X=this.pv:this.data.ks?X=this.data.ks.k:X=this.data.pt.k;var K,Y=this.effectsSequence.length;for(K=0;K<Y;K+=1)X=this.effectsSequence[K](X);this.setVValue(X),this.lock=!1,this.frameId=this.elem.globalData.frameId}}function F(X,K,Y){this.propType="shape",this.comp=X.comp,this.container=X,this.elem=X,this.data=K,this.k=!1,this.kf=!1,this._mdf=!1;var Q=Y===3?K.pt.k:K.ks.k;this.v=shapePool.clone(Q),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.reset=C,this.effectsSequence=[]}function O(X){this.effectsSequence.push(X),this.container.addDynamicProperty(this)}F.prototype.interpolateShape=T,F.prototype.getValue=R,F.prototype.setVValue=I,F.prototype.addEffect=O;function D(X,K,Y){this.propType="shape",this.comp=X.comp,this.elem=X,this.container=X,this.offsetTime=X.data.st,this.keyframes=Y===3?K.pt.k:K.ks.k,this.keyframesMetadata=[],this.k=!0,this.kf=!0;var Q=this.keyframes[0].s[0].i.length;this.v=shapePool.newElement(),this.v.setPathData(this.keyframes[0].s[0].c,Q),this.pv=shapePool.clone(this.v),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.paths.addShape(this.v),this.lastFrame=A,this.reset=C,this._caching={lastFrame:A,lastIndex:0},this.effectsSequence=[E.bind(this)]}D.prototype.getValue=R,D.prototype.interpolateShape=T,D.prototype.setVValue=I,D.prototype.addEffect=O;var L=function(){var X=roundCorner;function K(Y,Q){this.v=shapePool.newElement(),this.v.setPathData(!0,4),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.paths=this.localShapeCollection,this.localShapeCollection.addShape(this.v),this.d=Q.d,this.elem=Y,this.comp=Y.comp,this.frameId=-1,this.initDynamicPropertyContainer(Y),this.p=PropertyFactory.getProp(Y,Q.p,1,0,this),this.s=PropertyFactory.getProp(Y,Q.s,1,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertEllToPath())}return K.prototype={reset:C,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertEllToPath())},convertEllToPath:function(){var Q=this.p.v[0],J=this.p.v[1],te=this.s.v[0]/2,ie=this.s.v[1]/2,ne=this.d!==3,he=this.v;he.v[0][0]=Q,he.v[0][1]=J-ie,he.v[1][0]=ne?Q+te:Q-te,he.v[1][1]=J,he.v[2][0]=Q,he.v[2][1]=J+ie,he.v[3][0]=ne?Q-te:Q+te,he.v[3][1]=J,he.i[0][0]=ne?Q-te*X:Q+te*X,he.i[0][1]=J-ie,he.i[1][0]=ne?Q+te:Q-te,he.i[1][1]=J-ie*X,he.i[2][0]=ne?Q+te*X:Q-te*X,he.i[2][1]=J+ie,he.i[3][0]=ne?Q-te:Q+te,he.i[3][1]=J+ie*X,he.o[0][0]=ne?Q+te*X:Q-te*X,he.o[0][1]=J-ie,he.o[1][0]=ne?Q+te:Q-te,he.o[1][1]=J+ie*X,he.o[2][0]=ne?Q-te*X:Q+te*X,he.o[2][1]=J+ie,he.o[3][0]=ne?Q-te:Q+te,he.o[3][1]=J-ie*X}},extendPrototype([DynamicPropertyContainer],K),K}(),B=function(){function X(K,Y){this.v=shapePool.newElement(),this.v.setPathData(!0,0),this.elem=K,this.comp=K.comp,this.data=Y,this.frameId=-1,this.d=Y.d,this.initDynamicPropertyContainer(K),Y.sy===1?(this.ir=PropertyFactory.getProp(K,Y.ir,0,0,this),this.is=PropertyFactory.getProp(K,Y.is,0,.01,this),this.convertToPath=this.convertStarToPath):this.convertToPath=this.convertPolygonToPath,this.pt=PropertyFactory.getProp(K,Y.pt,0,0,this),this.p=PropertyFactory.getProp(K,Y.p,1,0,this),this.r=PropertyFactory.getProp(K,Y.r,0,degToRads,this),this.or=PropertyFactory.getProp(K,Y.or,0,0,this),this.os=PropertyFactory.getProp(K,Y.os,0,.01,this),this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertToPath())}return X.prototype={reset:C,getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertToPath())},convertStarToPath:function(){var Y=Math.floor(this.pt.v)*2,Q=Math.PI*2/Y,J=!0,te=this.or.v,ie=this.ir.v,ne=this.os.v,he=this.is.v,ve=2*Math.PI*te/(Y*2),ye=2*Math.PI*ie/(Y*2),de,fe,ue,ge,ae=-Math.PI/2;ae+=this.r.v;var ce=this.data.d===3?-1:1;for(this.v._length=0,de=0;de<Y;de+=1){fe=J?te:ie,ue=J?ne:he,ge=J?ve:ye;var se=fe*Math.cos(ae),le=fe*Math.sin(ae),_e=se===0&&le===0?0:le/Math.sqrt(se*se+le*le),me=se===0&&le===0?0:-se/Math.sqrt(se*se+le*le);se+=+this.p.v[0],le+=+this.p.v[1],this.v.setTripleAt(se,le,se-_e*ge*ue*ce,le-me*ge*ue*ce,se+_e*ge*ue*ce,le+me*ge*ue*ce,de,!0),J=!J,ae+=Q*ce}},convertPolygonToPath:function(){var Y=Math.floor(this.pt.v),Q=Math.PI*2/Y,J=this.or.v,te=this.os.v,ie=2*Math.PI*J/(Y*4),ne,he=-Math.PI*.5,ve=this.data.d===3?-1:1;for(he+=this.r.v,this.v._length=0,ne=0;ne<Y;ne+=1){var ye=J*Math.cos(he),de=J*Math.sin(he),fe=ye===0&&de===0?0:de/Math.sqrt(ye*ye+de*de),ue=ye===0&&de===0?0:-ye/Math.sqrt(ye*ye+de*de);ye+=+this.p.v[0],de+=+this.p.v[1],this.v.setTripleAt(ye,de,ye-fe*ie*te*ve,de-ue*ie*te*ve,ye+fe*ie*te*ve,de+ue*ie*te*ve,ne,!0),he+=Q*ve}this.paths.length=0,this.paths[0]=this.v}},extendPrototype([DynamicPropertyContainer],X),X}(),V=function(){function X(K,Y){this.v=shapePool.newElement(),this.v.c=!0,this.localShapeCollection=shapeCollectionPool.newShapeCollection(),this.localShapeCollection.addShape(this.v),this.paths=this.localShapeCollection,this.elem=K,this.comp=K.comp,this.frameId=-1,this.d=Y.d,this.initDynamicPropertyContainer(K),this.p=PropertyFactory.getProp(K,Y.p,1,0,this),this.s=PropertyFactory.getProp(K,Y.s,1,0,this),this.r=PropertyFactory.getProp(K,Y.r,0,0,this),this.dynamicProperties.length?this.k=!0:(this.k=!1,this.convertRectToPath())}return X.prototype={convertRectToPath:function(){var Y=this.p.v[0],Q=this.p.v[1],J=this.s.v[0]/2,te=this.s.v[1]/2,ie=bmMin(J,te,this.r.v),ne=ie*(1-roundCorner);this.v._length=0,this.d===2||this.d===1?(this.v.setTripleAt(Y+J,Q-te+ie,Y+J,Q-te+ie,Y+J,Q-te+ne,0,!0),this.v.setTripleAt(Y+J,Q+te-ie,Y+J,Q+te-ne,Y+J,Q+te-ie,1,!0),ie!==0?(this.v.setTripleAt(Y+J-ie,Q+te,Y+J-ie,Q+te,Y+J-ne,Q+te,2,!0),this.v.setTripleAt(Y-J+ie,Q+te,Y-J+ne,Q+te,Y-J+ie,Q+te,3,!0),this.v.setTripleAt(Y-J,Q+te-ie,Y-J,Q+te-ie,Y-J,Q+te-ne,4,!0),this.v.setTripleAt(Y-J,Q-te+ie,Y-J,Q-te+ne,Y-J,Q-te+ie,5,!0),this.v.setTripleAt(Y-J+ie,Q-te,Y-J+ie,Q-te,Y-J+ne,Q-te,6,!0),this.v.setTripleAt(Y+J-ie,Q-te,Y+J-ne,Q-te,Y+J-ie,Q-te,7,!0)):(this.v.setTripleAt(Y-J,Q+te,Y-J+ne,Q+te,Y-J,Q+te,2),this.v.setTripleAt(Y-J,Q-te,Y-J,Q-te+ne,Y-J,Q-te,3))):(this.v.setTripleAt(Y+J,Q-te+ie,Y+J,Q-te+ne,Y+J,Q-te+ie,0,!0),ie!==0?(this.v.setTripleAt(Y+J-ie,Q-te,Y+J-ie,Q-te,Y+J-ne,Q-te,1,!0),this.v.setTripleAt(Y-J+ie,Q-te,Y-J+ne,Q-te,Y-J+ie,Q-te,2,!0),this.v.setTripleAt(Y-J,Q-te+ie,Y-J,Q-te+ie,Y-J,Q-te+ne,3,!0),this.v.setTripleAt(Y-J,Q+te-ie,Y-J,Q+te-ne,Y-J,Q+te-ie,4,!0),this.v.setTripleAt(Y-J+ie,Q+te,Y-J+ie,Q+te,Y-J+ne,Q+te,5,!0),this.v.setTripleAt(Y+J-ie,Q+te,Y+J-ne,Q+te,Y+J-ie,Q+te,6,!0),this.v.setTripleAt(Y+J,Q+te-ie,Y+J,Q+te-ie,Y+J,Q+te-ne,7,!0)):(this.v.setTripleAt(Y-J,Q-te,Y-J+ne,Q-te,Y-J,Q-te,1,!0),this.v.setTripleAt(Y-J,Q+te,Y-J,Q+te-ne,Y-J,Q+te,2,!0),this.v.setTripleAt(Y+J,Q+te,Y+J-ne,Q+te,Y+J,Q+te,3,!0)))},getValue:function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf&&this.convertRectToPath())},reset:C},extendPrototype([DynamicPropertyContainer],X),X}();function U(X,K,Y){var Q;if(Y===3||Y===4){var J=Y===3?K.pt:K.ks,te=J.k;te.length?Q=new D(X,K,Y):Q=new F(X,K,Y)}else Y===5?Q=new V(X,K):Y===6?Q=new L(X,K):Y===7&&(Q=new B(X,K));return Q.k&&X.addDynamicProperty(Q),Q}function z(){return F}function W(){return D}var Z={};return Z.getShapeProp=U,Z.getConstructorFunction=z,Z.getKeyframedConstructorFunction=W,Z}();/*!
 Transformation Matrix v2.0
 (c) Epistemex 2014-2015
 www.epistemex.com
 By Ken Fyrstenberg
 Contributions by leeoniya.
 License: MIT, header required.
 */var Matrix=function(){var A=Math.cos,T=Math.sin,E=Math.tan,C=Math.round;function P(){return this.props[0]=1,this.props[1]=0,this.props[2]=0,this.props[3]=0,this.props[4]=0,this.props[5]=1,this.props[6]=0,this.props[7]=0,this.props[8]=0,this.props[9]=0,this.props[10]=1,this.props[11]=0,this.props[12]=0,this.props[13]=0,this.props[14]=0,this.props[15]=1,this}function I(se){if(se===0)return this;var le=A(se),_e=T(se);return this._t(le,-_e,0,0,_e,le,0,0,0,0,1,0,0,0,0,1)}function R(se){if(se===0)return this;var le=A(se),_e=T(se);return this._t(1,0,0,0,0,le,-_e,0,0,_e,le,0,0,0,0,1)}function F(se){if(se===0)return this;var le=A(se),_e=T(se);return this._t(le,0,_e,0,0,1,0,0,-_e,0,le,0,0,0,0,1)}function O(se){if(se===0)return this;var le=A(se),_e=T(se);return this._t(le,-_e,0,0,_e,le,0,0,0,0,1,0,0,0,0,1)}function D(se,le){return this._t(1,le,se,1,0,0)}function L(se,le){return this.shear(E(se),E(le))}function B(se,le){var _e=A(le),me=T(le);return this._t(_e,me,0,0,-me,_e,0,0,0,0,1,0,0,0,0,1)._t(1,0,0,0,E(se),1,0,0,0,0,1,0,0,0,0,1)._t(_e,-me,0,0,me,_e,0,0,0,0,1,0,0,0,0,1)}function V(se,le,_e){return!_e&&_e!==0&&(_e=1),se===1&&le===1&&_e===1?this:this._t(se,0,0,0,0,le,0,0,0,0,_e,0,0,0,0,1)}function U(se,le,_e,me,Ee,Pe,Ce,ke,Be,Me,Oe,Je,et,qe,De,Ue){return this.props[0]=se,this.props[1]=le,this.props[2]=_e,this.props[3]=me,this.props[4]=Ee,this.props[5]=Pe,this.props[6]=Ce,this.props[7]=ke,this.props[8]=Be,this.props[9]=Me,this.props[10]=Oe,this.props[11]=Je,this.props[12]=et,this.props[13]=qe,this.props[14]=De,this.props[15]=Ue,this}function z(se,le,_e){return _e=_e||0,se!==0||le!==0||_e!==0?this._t(1,0,0,0,0,1,0,0,0,0,1,0,se,le,_e,1):this}function W(se,le,_e,me,Ee,Pe,Ce,ke,Be,Me,Oe,Je,et,qe,De,Ue){var Re=this.props;if(se===1&&le===0&&_e===0&&me===0&&Ee===0&&Pe===1&&Ce===0&&ke===0&&Be===0&&Me===0&&Oe===1&&Je===0)return Re[12]=Re[12]*se+Re[15]*et,Re[13]=Re[13]*Pe+Re[15]*qe,Re[14]=Re[14]*Oe+Re[15]*De,Re[15]*=Ue,this._identityCalculated=!1,this;var Ne=Re[0],Ge=Re[1],We=Re[2],je=Re[3],Ye=Re[4],Fe=Re[5],He=Re[6],nt=Re[7],ot=Re[8],pt=Re[9],dt=Re[10],yt=Re[11],Rt=Re[12],wt=Re[13],Ot=Re[14],Ze=Re[15];return Re[0]=Ne*se+Ge*Ee+We*Be+je*et,Re[1]=Ne*le+Ge*Pe+We*Me+je*qe,Re[2]=Ne*_e+Ge*Ce+We*Oe+je*De,Re[3]=Ne*me+Ge*ke+We*Je+je*Ue,Re[4]=Ye*se+Fe*Ee+He*Be+nt*et,Re[5]=Ye*le+Fe*Pe+He*Me+nt*qe,Re[6]=Ye*_e+Fe*Ce+He*Oe+nt*De,Re[7]=Ye*me+Fe*ke+He*Je+nt*Ue,Re[8]=ot*se+pt*Ee+dt*Be+yt*et,Re[9]=ot*le+pt*Pe+dt*Me+yt*qe,Re[10]=ot*_e+pt*Ce+dt*Oe+yt*De,Re[11]=ot*me+pt*ke+dt*Je+yt*Ue,Re[12]=Rt*se+wt*Ee+Ot*Be+Ze*et,Re[13]=Rt*le+wt*Pe+Ot*Me+Ze*qe,Re[14]=Rt*_e+wt*Ce+Ot*Oe+Ze*De,Re[15]=Rt*me+wt*ke+Ot*Je+Ze*Ue,this._identityCalculated=!1,this}function Z(se){var le=se.props;return this.transform(le[0],le[1],le[2],le[3],le[4],le[5],le[6],le[7],le[8],le[9],le[10],le[11],le[12],le[13],le[14],le[15])}function X(){return this._identityCalculated||(this._identity=!(this.props[0]!==1||this.props[1]!==0||this.props[2]!==0||this.props[3]!==0||this.props[4]!==0||this.props[5]!==1||this.props[6]!==0||this.props[7]!==0||this.props[8]!==0||this.props[9]!==0||this.props[10]!==1||this.props[11]!==0||this.props[12]!==0||this.props[13]!==0||this.props[14]!==0||this.props[15]!==1),this._identityCalculated=!0),this._identity}function K(se){for(var le=0;le<16;){if(se.props[le]!==this.props[le])return!1;le+=1}return!0}function Y(se){var le;for(le=0;le<16;le+=1)se.props[le]=this.props[le];return se}function Q(se){var le;for(le=0;le<16;le+=1)this.props[le]=se[le]}function J(se,le,_e){return{x:se*this.props[0]+le*this.props[4]+_e*this.props[8]+this.props[12],y:se*this.props[1]+le*this.props[5]+_e*this.props[9]+this.props[13],z:se*this.props[2]+le*this.props[6]+_e*this.props[10]+this.props[14]}}function te(se,le,_e){return se*this.props[0]+le*this.props[4]+_e*this.props[8]+this.props[12]}function ie(se,le,_e){return se*this.props[1]+le*this.props[5]+_e*this.props[9]+this.props[13]}function ne(se,le,_e){return se*this.props[2]+le*this.props[6]+_e*this.props[10]+this.props[14]}function he(){var se=this.props[0]*this.props[5]-this.props[1]*this.props[4],le=this.props[5]/se,_e=-this.props[1]/se,me=-this.props[4]/se,Ee=this.props[0]/se,Pe=(this.props[4]*this.props[13]-this.props[5]*this.props[12])/se,Ce=-(this.props[0]*this.props[13]-this.props[1]*this.props[12])/se,ke=new Matrix;return ke.props[0]=le,ke.props[1]=_e,ke.props[4]=me,ke.props[5]=Ee,ke.props[12]=Pe,ke.props[13]=Ce,ke}function ve(se){var le=this.getInverseMatrix();return le.applyToPointArray(se[0],se[1],se[2]||0)}function ye(se){var le,_e=se.length,me=[];for(le=0;le<_e;le+=1)me[le]=ve(se[le]);return me}function de(se,le,_e){var me=createTypedArray("float32",6);if(this.isIdentity())me[0]=se[0],me[1]=se[1],me[2]=le[0],me[3]=le[1],me[4]=_e[0],me[5]=_e[1];else{var Ee=this.props[0],Pe=this.props[1],Ce=this.props[4],ke=this.props[5],Be=this.props[12],Me=this.props[13];me[0]=se[0]*Ee+se[1]*Ce+Be,me[1]=se[0]*Pe+se[1]*ke+Me,me[2]=le[0]*Ee+le[1]*Ce+Be,me[3]=le[0]*Pe+le[1]*ke+Me,me[4]=_e[0]*Ee+_e[1]*Ce+Be,me[5]=_e[0]*Pe+_e[1]*ke+Me}return me}function fe(se,le,_e){var me;return this.isIdentity()?me=[se,le,_e]:me=[se*this.props[0]+le*this.props[4]+_e*this.props[8]+this.props[12],se*this.props[1]+le*this.props[5]+_e*this.props[9]+this.props[13],se*this.props[2]+le*this.props[6]+_e*this.props[10]+this.props[14]],me}function ue(se,le){if(this.isIdentity())return se+","+le;var _e=this.props;return Math.round((se*_e[0]+le*_e[4]+_e[12])*100)/100+","+Math.round((se*_e[1]+le*_e[5]+_e[13])*100)/100}function ge(){for(var se=0,le=this.props,_e="matrix3d(",me=1e4;se<16;)_e+=C(le[se]*me)/me,_e+=se===15?")":",",se+=1;return _e}function ae(se){var le=1e4;return se<1e-6&&se>0||se>-1e-6&&se<0?C(se*le)/le:se}function ce(){var se=this.props,le=ae(se[0]),_e=ae(se[1]),me=ae(se[4]),Ee=ae(se[5]),Pe=ae(se[12]),Ce=ae(se[13]);return"matrix("+le+","+_e+","+me+","+Ee+","+Pe+","+Ce+")"}return function(){this.reset=P,this.rotate=I,this.rotateX=R,this.rotateY=F,this.rotateZ=O,this.skew=L,this.skewFromAxis=B,this.shear=D,this.scale=V,this.setTransform=U,this.translate=z,this.transform=W,this.multiply=Z,this.applyToPoint=J,this.applyToX=te,this.applyToY=ie,this.applyToZ=ne,this.applyToPointArray=fe,this.applyToTriplePoints=de,this.applyToPointStringified=ue,this.toCSS=ge,this.to2dCSS=ce,this.clone=Y,this.cloneFromProps=Q,this.equals=K,this.inversePoints=ye,this.inversePoint=ve,this.getInverseMatrix=he,this._t=this.transform,this.isIdentity=X,this._identity=!0,this._identityCalculated=!1,this.props=createTypedArray("float32",16),this.reset()}}();function _typeof$3(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$3=function(E){return typeof E}:_typeof$3=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},_typeof$3(A)}var lottie={};function setLocation(A){setLocationHref(A)}function searchAnimations(){animationManager.searchAnimations()}function setSubframeRendering(A){setSubframeEnabled(A)}function setPrefix(A){setIdPrefix(A)}function loadAnimation(A){return animationManager.loadAnimation(A)}function setQuality(A){if(typeof A=="string")switch(A){case"high":setDefaultCurveSegments(200);break;default:case"medium":setDefaultCurveSegments(50);break;case"low":setDefaultCurveSegments(10);break}else!isNaN(A)&&A>1&&setDefaultCurveSegments(A)}function inBrowser(){return typeof navigator<"u"}function installPlugin(A,T){A==="expressions"&&setExpressionsPlugin(T)}function getFactory(A){switch(A){case"propertyFactory":return PropertyFactory;case"shapePropertyFactory":return ShapePropertyFactory;case"matrix":return Matrix;default:return null}}lottie.play=animationManager.play,lottie.pause=animationManager.pause,lottie.setLocationHref=setLocation,lottie.togglePause=animationManager.togglePause,lottie.setSpeed=animationManager.setSpeed,lottie.setDirection=animationManager.setDirection,lottie.stop=animationManager.stop,lottie.searchAnimations=searchAnimations,lottie.registerAnimation=animationManager.registerAnimation,lottie.loadAnimation=loadAnimation,lottie.setSubframeRendering=setSubframeRendering,lottie.resize=animationManager.resize,lottie.goToAndStop=animationManager.goToAndStop,lottie.destroy=animationManager.destroy,lottie.setQuality=setQuality,lottie.inBrowser=inBrowser,lottie.installPlugin=installPlugin,lottie.freeze=animationManager.freeze,lottie.unfreeze=animationManager.unfreeze,lottie.setVolume=animationManager.setVolume,lottie.mute=animationManager.mute,lottie.unmute=animationManager.unmute,lottie.getRegisteredAnimations=animationManager.getRegisteredAnimations,lottie.useWebWorker=setWebWorker,lottie.setIDPrefix=setPrefix,lottie.__getFactory=getFactory,lottie.version="5.12.2";function checkReady(){document.readyState==="complete"&&(clearInterval(readyStateCheckInterval),searchAnimations())}function getQueryVariable(A){for(var T=queryString.split("&"),E=0;E<T.length;E+=1){var C=T[E].split("=");if(decodeURIComponent(C[0])==A)return decodeURIComponent(C[1])}return null}var queryString="";{var scripts=document.getElementsByTagName("script"),index=scripts.length-1,myScript=scripts[index]||{src:""};queryString=myScript.src?myScript.src.replace(/^[^\?]+\??/,""):"",getQueryVariable("renderer")}var readyStateCheckInterval=setInterval(checkReady,100);try{_typeof$3(exports)!=="object"&&(window.bodymovin=lottie)}catch(A){}var ShapeModifiers=function(){var A={},T={};A.registerModifier=E,A.getModifier=C;function E(P,I){T[P]||(T[P]=I)}function C(P,I,R){return new T[P](I,R)}return A}();function ShapeModifier(){}ShapeModifier.prototype.initModifierProperties=function(){},ShapeModifier.prototype.addShapeToModifier=function(){},ShapeModifier.prototype.addShape=function(A){if(!this.closed){A.sh.container.addDynamicProperty(A.sh);var T={shape:A.sh,data:A,localShapeCollection:shapeCollectionPool.newShapeCollection()};this.shapes.push(T),this.addShapeToModifier(T),this._isAnimated&&A.setAsAnimated()}},ShapeModifier.prototype.init=function(A,T){this.shapes=[],this.elem=A,this.initDynamicPropertyContainer(A),this.initModifierProperties(A,T),this.frameId=initialDefaultFrame,this.closed=!1,this.k=!1,this.dynamicProperties.length?this.k=!0:this.getValue(!0)},ShapeModifier.prototype.processKeys=function(){this.elem.globalData.frameId!==this.frameId&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties())},extendPrototype([DynamicPropertyContainer],ShapeModifier);function TrimModifier(){}extendPrototype([ShapeModifier],TrimModifier),TrimModifier.prototype.initModifierProperties=function(A,T){this.s=PropertyFactory.getProp(A,T.s,0,.01,this),this.e=PropertyFactory.getProp(A,T.e,0,.01,this),this.o=PropertyFactory.getProp(A,T.o,0,0,this),this.sValue=0,this.eValue=0,this.getValue=this.processKeys,this.m=T.m,this._isAnimated=!!this.s.effectsSequence.length||!!this.e.effectsSequence.length||!!this.o.effectsSequence.length},TrimModifier.prototype.addShapeToModifier=function(A){A.pathsData=[]},TrimModifier.prototype.calculateShapeEdges=function(A,T,E,C,P){var I=[];T<=1?I.push({s:A,e:T}):A>=1?I.push({s:A-1,e:T-1}):(I.push({s:A,e:1}),I.push({s:0,e:T-1}));var R=[],F,O=I.length,D;for(F=0;F<O;F+=1)if(D=I[F],!(D.e*P<C||D.s*P>C+E)){var L,B;D.s*P<=C?L=0:L=(D.s*P-C)/E,D.e*P>=C+E?B=1:B=(D.e*P-C)/E,R.push([L,B])}return R.length||R.push([0,0]),R},TrimModifier.prototype.releasePathsData=function(A){var T,E=A.length;for(T=0;T<E;T+=1)segmentsLengthPool.release(A[T]);return A.length=0,A},TrimModifier.prototype.processShapes=function(A){var T,E;if(this._mdf||A){var C=this.o.v%360/360;if(C<0&&(C+=1),this.s.v>1?T=1+C:this.s.v<0?T=0+C:T=this.s.v+C,this.e.v>1?E=1+C:this.e.v<0?E=0+C:E=this.e.v+C,T>E){var P=T;T=E,E=P}T=Math.round(T*1e4)*1e-4,E=Math.round(E*1e4)*1e-4,this.sValue=T,this.eValue=E}else T=this.sValue,E=this.eValue;var I,R,F=this.shapes.length,O,D,L,B,V,U=0;if(E===T)for(R=0;R<F;R+=1)this.shapes[R].localShapeCollection.releaseShapes(),this.shapes[R].shape._mdf=!0,this.shapes[R].shape.paths=this.shapes[R].localShapeCollection,this._mdf&&(this.shapes[R].pathsData.length=0);else if(E===1&&T===0||E===0&&T===1){if(this._mdf)for(R=0;R<F;R+=1)this.shapes[R].pathsData.length=0,this.shapes[R].shape._mdf=!0}else{var z=[],W,Z;for(R=0;R<F;R+=1)if(W=this.shapes[R],!W.shape._mdf&&!this._mdf&&!A&&this.m!==2)W.shape.paths=W.localShapeCollection;else{if(I=W.shape.paths,D=I._length,V=0,!W.shape._mdf&&W.pathsData.length)V=W.totalShapeLength;else{for(L=this.releasePathsData(W.pathsData),O=0;O<D;O+=1)B=bez.getSegmentsLength(I.shapes[O]),L.push(B),V+=B.totalLength;W.totalShapeLength=V,W.pathsData=L}U+=V,W.shape._mdf=!0}var X=T,K=E,Y=0,Q;for(R=F-1;R>=0;R-=1)if(W=this.shapes[R],W.shape._mdf){for(Z=W.localShapeCollection,Z.releaseShapes(),this.m===2&&F>1?(Q=this.calculateShapeEdges(T,E,W.totalShapeLength,Y,U),Y+=W.totalShapeLength):Q=[[X,K]],D=Q.length,O=0;O<D;O+=1){X=Q[O][0],K=Q[O][1],z.length=0,K<=1?z.push({s:W.totalShapeLength*X,e:W.totalShapeLength*K}):X>=1?z.push({s:W.totalShapeLength*(X-1),e:W.totalShapeLength*(K-1)}):(z.push({s:W.totalShapeLength*X,e:W.totalShapeLength}),z.push({s:0,e:W.totalShapeLength*(K-1)}));var J=this.addShapes(W,z[0]);if(z[0].s!==z[0].e){if(z.length>1){var te=W.shape.paths.shapes[W.shape.paths._length-1];if(te.c){var ie=J.pop();this.addPaths(J,Z),J=this.addShapes(W,z[1],ie)}else this.addPaths(J,Z),J=this.addShapes(W,z[1])}this.addPaths(J,Z)}}W.shape.paths=Z}}},TrimModifier.prototype.addPaths=function(A,T){var E,C=A.length;for(E=0;E<C;E+=1)T.addShape(A[E])},TrimModifier.prototype.addSegment=function(A,T,E,C,P,I,R){P.setXYAt(T[0],T[1],"o",I),P.setXYAt(E[0],E[1],"i",I+1),R&&P.setXYAt(A[0],A[1],"v",I),P.setXYAt(C[0],C[1],"v",I+1)},TrimModifier.prototype.addSegmentFromArray=function(A,T,E,C){T.setXYAt(A[1],A[5],"o",E),T.setXYAt(A[2],A[6],"i",E+1),C&&T.setXYAt(A[0],A[4],"v",E),T.setXYAt(A[3],A[7],"v",E+1)},TrimModifier.prototype.addShapes=function(A,T,E){var C=A.pathsData,P=A.shape.paths.shapes,I,R=A.shape.paths._length,F,O,D=0,L,B,V,U,z=[],W,Z=!0;for(E?(B=E._length,W=E._length):(E=shapePool.newElement(),B=0,W=0),z.push(E),I=0;I<R;I+=1){for(V=C[I].lengths,E.c=P[I].c,O=P[I].c?V.length:V.length+1,F=1;F<O;F+=1)if(L=V[F-1],D+L.addedLength<T.s)D+=L.addedLength,E.c=!1;else if(D>T.e){E.c=!1;break}else T.s<=D&&T.e>=D+L.addedLength?(this.addSegment(P[I].v[F-1],P[I].o[F-1],P[I].i[F],P[I].v[F],E,B,Z),Z=!1):(U=bez.getNewSegment(P[I].v[F-1],P[I].v[F],P[I].o[F-1],P[I].i[F],(T.s-D)/L.addedLength,(T.e-D)/L.addedLength,V[F-1]),this.addSegmentFromArray(U,E,B,Z),Z=!1,E.c=!1),D+=L.addedLength,B+=1;if(P[I].c&&V.length){if(L=V[F-1],D<=T.e){var X=V[F-1].addedLength;T.s<=D&&T.e>=D+X?(this.addSegment(P[I].v[F-1],P[I].o[F-1],P[I].i[0],P[I].v[0],E,B,Z),Z=!1):(U=bez.getNewSegment(P[I].v[F-1],P[I].v[0],P[I].o[F-1],P[I].i[0],(T.s-D)/X,(T.e-D)/X,V[F-1]),this.addSegmentFromArray(U,E,B,Z),Z=!1,E.c=!1)}else E.c=!1;D+=L.addedLength,B+=1}if(E._length&&(E.setXYAt(E.v[W][0],E.v[W][1],"i",W),E.setXYAt(E.v[E._length-1][0],E.v[E._length-1][1],"o",E._length-1)),D>T.e)break;I<R-1&&(E=shapePool.newElement(),Z=!0,z.push(E),B=0)}return z};function PuckerAndBloatModifier(){}extendPrototype([ShapeModifier],PuckerAndBloatModifier),PuckerAndBloatModifier.prototype.initModifierProperties=function(A,T){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(A,T.a,0,null,this),this._isAnimated=!!this.amount.effectsSequence.length},PuckerAndBloatModifier.prototype.processPath=function(A,T){var E=T/100,C=[0,0],P=A._length,I=0;for(I=0;I<P;I+=1)C[0]+=A.v[I][0],C[1]+=A.v[I][1];C[0]/=P,C[1]/=P;var R=shapePool.newElement();R.c=A.c;var F,O,D,L,B,V;for(I=0;I<P;I+=1)F=A.v[I][0]+(C[0]-A.v[I][0])*E,O=A.v[I][1]+(C[1]-A.v[I][1])*E,D=A.o[I][0]+(C[0]-A.o[I][0])*-E,L=A.o[I][1]+(C[1]-A.o[I][1])*-E,B=A.i[I][0]+(C[0]-A.i[I][0])*-E,V=A.i[I][1]+(C[1]-A.i[I][1])*-E,R.setTripleAt(F,O,D,L,B,V,I);return R},PuckerAndBloatModifier.prototype.processShapes=function(A){var T,E,C=this.shapes.length,P,I,R=this.amount.v;if(R!==0){var F,O;for(E=0;E<C;E+=1){if(F=this.shapes[E],O=F.localShapeCollection,!(!F.shape._mdf&&!this._mdf&&!A))for(O.releaseShapes(),F.shape._mdf=!0,T=F.shape.paths.shapes,I=F.shape.paths._length,P=0;P<I;P+=1)O.addShape(this.processPath(T[P],R));F.shape.paths=F.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};var TransformPropertyFactory=function(){var A=[0,0];function T(O){var D=this._mdf;this.iterateDynamicProperties(),this._mdf=this._mdf||D,this.a&&O.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.s&&O.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&O.skewFromAxis(-this.sk.v,this.sa.v),this.r?O.rotate(-this.r.v):O.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.data.p.s?this.data.p.z?O.translate(this.px.v,this.py.v,-this.pz.v):O.translate(this.px.v,this.py.v,0):O.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}function E(O){if(this.elem.globalData.frameId!==this.frameId){if(this._isDirty&&(this.precalculateMatrix(),this._isDirty=!1),this.iterateDynamicProperties(),this._mdf||O){var D;if(this.v.cloneFromProps(this.pre.props),this.appliedTransformations<1&&this.v.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations<2&&this.v.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.sk&&this.appliedTransformations<3&&this.v.skewFromAxis(-this.sk.v,this.sa.v),this.r&&this.appliedTransformations<4?this.v.rotate(-this.r.v):!this.r&&this.appliedTransformations<4&&this.v.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.autoOriented){var L,B;if(D=this.elem.globalData.frameRate,this.p&&this.p.keyframes&&this.p.getValueAtTime)this.p._caching.lastFrame+this.p.offsetTime<=this.p.keyframes[0].t?(L=this.p.getValueAtTime((this.p.keyframes[0].t+.01)/D,0),B=this.p.getValueAtTime(this.p.keyframes[0].t/D,0)):this.p._caching.lastFrame+this.p.offsetTime>=this.p.keyframes[this.p.keyframes.length-1].t?(L=this.p.getValueAtTime(this.p.keyframes[this.p.keyframes.length-1].t/D,0),B=this.p.getValueAtTime((this.p.keyframes[this.p.keyframes.length-1].t-.05)/D,0)):(L=this.p.pv,B=this.p.getValueAtTime((this.p._caching.lastFrame+this.p.offsetTime-.01)/D,this.p.offsetTime));else if(this.px&&this.px.keyframes&&this.py.keyframes&&this.px.getValueAtTime&&this.py.getValueAtTime){L=[],B=[];var V=this.px,U=this.py;V._caching.lastFrame+V.offsetTime<=V.keyframes[0].t?(L[0]=V.getValueAtTime((V.keyframes[0].t+.01)/D,0),L[1]=U.getValueAtTime((U.keyframes[0].t+.01)/D,0),B[0]=V.getValueAtTime(V.keyframes[0].t/D,0),B[1]=U.getValueAtTime(U.keyframes[0].t/D,0)):V._caching.lastFrame+V.offsetTime>=V.keyframes[V.keyframes.length-1].t?(L[0]=V.getValueAtTime(V.keyframes[V.keyframes.length-1].t/D,0),L[1]=U.getValueAtTime(U.keyframes[U.keyframes.length-1].t/D,0),B[0]=V.getValueAtTime((V.keyframes[V.keyframes.length-1].t-.01)/D,0),B[1]=U.getValueAtTime((U.keyframes[U.keyframes.length-1].t-.01)/D,0)):(L=[V.pv,U.pv],B[0]=V.getValueAtTime((V._caching.lastFrame+V.offsetTime-.01)/D,V.offsetTime),B[1]=U.getValueAtTime((U._caching.lastFrame+U.offsetTime-.01)/D,U.offsetTime))}else B=A,L=B;this.v.rotate(-Math.atan2(L[1]-B[1],L[0]-B[0]))}this.data.p&&this.data.p.s?this.data.p.z?this.v.translate(this.px.v,this.py.v,-this.pz.v):this.v.translate(this.px.v,this.py.v,0):this.v.translate(this.p.v[0],this.p.v[1],-this.p.v[2])}this.frameId=this.elem.globalData.frameId}}function C(){if(this.appliedTransformations=0,this.pre.reset(),!this.a.effectsSequence.length)this.pre.translate(-this.a.v[0],-this.a.v[1],this.a.v[2]),this.appliedTransformations=1;else return;if(!this.s.effectsSequence.length)this.pre.scale(this.s.v[0],this.s.v[1],this.s.v[2]),this.appliedTransformations=2;else return;if(this.sk)if(!this.sk.effectsSequence.length&&!this.sa.effectsSequence.length)this.pre.skewFromAxis(-this.sk.v,this.sa.v),this.appliedTransformations=3;else return;this.r?this.r.effectsSequence.length||(this.pre.rotate(-this.r.v),this.appliedTransformations=4):!this.rz.effectsSequence.length&&!this.ry.effectsSequence.length&&!this.rx.effectsSequence.length&&!this.or.effectsSequence.length&&(this.pre.rotateZ(-this.rz.v).rotateY(this.ry.v).rotateX(this.rx.v).rotateZ(-this.or.v[2]).rotateY(this.or.v[1]).rotateX(this.or.v[0]),this.appliedTransformations=4)}function P(){}function I(O){this._addDynamicProperty(O),this.elem.addDynamicProperty(O),this._isDirty=!0}function R(O,D,L){if(this.elem=O,this.frameId=-1,this.propType="transform",this.data=D,this.v=new Matrix,this.pre=new Matrix,this.appliedTransformations=0,this.initDynamicPropertyContainer(L||O),D.p&&D.p.s?(this.px=PropertyFactory.getProp(O,D.p.x,0,0,this),this.py=PropertyFactory.getProp(O,D.p.y,0,0,this),D.p.z&&(this.pz=PropertyFactory.getProp(O,D.p.z,0,0,this))):this.p=PropertyFactory.getProp(O,D.p||{k:[0,0,0]},1,0,this),D.rx){if(this.rx=PropertyFactory.getProp(O,D.rx,0,degToRads,this),this.ry=PropertyFactory.getProp(O,D.ry,0,degToRads,this),this.rz=PropertyFactory.getProp(O,D.rz,0,degToRads,this),D.or.k[0].ti){var B,V=D.or.k.length;for(B=0;B<V;B+=1)D.or.k[B].to=null,D.or.k[B].ti=null}this.or=PropertyFactory.getProp(O,D.or,1,degToRads,this),this.or.sh=!0}else this.r=PropertyFactory.getProp(O,D.r||{k:0},0,degToRads,this);D.sk&&(this.sk=PropertyFactory.getProp(O,D.sk,0,degToRads,this),this.sa=PropertyFactory.getProp(O,D.sa,0,degToRads,this)),this.a=PropertyFactory.getProp(O,D.a||{k:[0,0,0]},1,0,this),this.s=PropertyFactory.getProp(O,D.s||{k:[100,100,100]},1,.01,this),D.o?this.o=PropertyFactory.getProp(O,D.o,0,.01,O):this.o={_mdf:!1,v:1},this._isDirty=!0,this.dynamicProperties.length||this.getValue(!0)}R.prototype={applyToMatrix:T,getValue:E,precalculateMatrix:C,autoOrient:P},extendPrototype([DynamicPropertyContainer],R),R.prototype.addDynamicProperty=I,R.prototype._addDynamicProperty=DynamicPropertyContainer.prototype.addDynamicProperty;function F(O,D,L){return new R(O,D,L)}return{getTransformProperty:F}}();function RepeaterModifier(){}extendPrototype([ShapeModifier],RepeaterModifier),RepeaterModifier.prototype.initModifierProperties=function(A,T){this.getValue=this.processKeys,this.c=PropertyFactory.getProp(A,T.c,0,null,this),this.o=PropertyFactory.getProp(A,T.o,0,null,this),this.tr=TransformPropertyFactory.getTransformProperty(A,T.tr,this),this.so=PropertyFactory.getProp(A,T.tr.so,0,.01,this),this.eo=PropertyFactory.getProp(A,T.tr.eo,0,.01,this),this.data=T,this.dynamicProperties.length||this.getValue(!0),this._isAnimated=!!this.dynamicProperties.length,this.pMatrix=new Matrix,this.rMatrix=new Matrix,this.sMatrix=new Matrix,this.tMatrix=new Matrix,this.matrix=new Matrix},RepeaterModifier.prototype.applyTransforms=function(A,T,E,C,P,I){var R=I?-1:1,F=C.s.v[0]+(1-C.s.v[0])*(1-P),O=C.s.v[1]+(1-C.s.v[1])*(1-P);A.translate(C.p.v[0]*R*P,C.p.v[1]*R*P,C.p.v[2]),T.translate(-C.a.v[0],-C.a.v[1],C.a.v[2]),T.rotate(-C.r.v*R*P),T.translate(C.a.v[0],C.a.v[1],C.a.v[2]),E.translate(-C.a.v[0],-C.a.v[1],C.a.v[2]),E.scale(I?1/F:F,I?1/O:O),E.translate(C.a.v[0],C.a.v[1],C.a.v[2])},RepeaterModifier.prototype.init=function(A,T,E,C){for(this.elem=A,this.arr=T,this.pos=E,this.elemsData=C,this._currentCopies=0,this._elements=[],this._groups=[],this.frameId=-1,this.initDynamicPropertyContainer(A),this.initModifierProperties(A,T[E]);E>0;)E-=1,this._elements.unshift(T[E]);this.dynamicProperties.length?this.k=!0:this.getValue(!0)},RepeaterModifier.prototype.resetElements=function(A){var T,E=A.length;for(T=0;T<E;T+=1)A[T]._processed=!1,A[T].ty==="gr"&&this.resetElements(A[T].it)},RepeaterModifier.prototype.cloneElements=function(A){var T=JSON.parse(JSON.stringify(A));return this.resetElements(T),T},RepeaterModifier.prototype.changeGroupRender=function(A,T){var E,C=A.length;for(E=0;E<C;E+=1)A[E]._render=T,A[E].ty==="gr"&&this.changeGroupRender(A[E].it,T)},RepeaterModifier.prototype.processShapes=function(A){var T,E,C,P,I,R=!1;if(this._mdf||A){var F=Math.ceil(this.c.v);if(this._groups.length<F){for(;this._groups.length<F;){var O={it:this.cloneElements(this._elements),ty:"gr"};O.it.push({a:{a:0,ix:1,k:[0,0]},nm:"Transform",o:{a:0,ix:7,k:100},p:{a:0,ix:2,k:[0,0]},r:{a:1,ix:6,k:[{s:0,e:0,t:0},{s:0,e:0,t:1}]},s:{a:0,ix:3,k:[100,100]},sa:{a:0,ix:5,k:0},sk:{a:0,ix:4,k:0},ty:"tr"}),this.arr.splice(0,0,O),this._groups.splice(0,0,O),this._currentCopies+=1}this.elem.reloadShapes(),R=!0}I=0;var D;for(C=0;C<=this._groups.length-1;C+=1){if(D=I<F,this._groups[C]._render=D,this.changeGroupRender(this._groups[C].it,D),!D){var L=this.elemsData[C].it,B=L[L.length-1];B.transform.op.v!==0?(B.transform.op._mdf=!0,B.transform.op.v=0):B.transform.op._mdf=!1}I+=1}this._currentCopies=F;var V=this.o.v,U=V%1,z=V>0?Math.floor(V):Math.ceil(V),W=this.pMatrix.props,Z=this.rMatrix.props,X=this.sMatrix.props;this.pMatrix.reset(),this.rMatrix.reset(),this.sMatrix.reset(),this.tMatrix.reset(),this.matrix.reset();var K=0;if(V>0){for(;K<z;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),K+=1;U&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,U,!1),K+=U)}else if(V<0){for(;K>z;)this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!0),K-=1;U&&(this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,-U,!0),K-=U)}C=this.data.m===1?0:this._currentCopies-1,P=this.data.m===1?1:-1,I=this._currentCopies;for(var Y,Q;I;){if(T=this.elemsData[C].it,E=T[T.length-1].transform.mProps.v.props,Q=E.length,T[T.length-1].transform.mProps._mdf=!0,T[T.length-1].transform.op._mdf=!0,T[T.length-1].transform.op.v=this._currentCopies===1?this.so.v:this.so.v+(this.eo.v-this.so.v)*(C/(this._currentCopies-1)),K!==0){for((C!==0&&P===1||C!==this._currentCopies-1&&P===-1)&&this.applyTransforms(this.pMatrix,this.rMatrix,this.sMatrix,this.tr,1,!1),this.matrix.transform(Z[0],Z[1],Z[2],Z[3],Z[4],Z[5],Z[6],Z[7],Z[8],Z[9],Z[10],Z[11],Z[12],Z[13],Z[14],Z[15]),this.matrix.transform(X[0],X[1],X[2],X[3],X[4],X[5],X[6],X[7],X[8],X[9],X[10],X[11],X[12],X[13],X[14],X[15]),this.matrix.transform(W[0],W[1],W[2],W[3],W[4],W[5],W[6],W[7],W[8],W[9],W[10],W[11],W[12],W[13],W[14],W[15]),Y=0;Y<Q;Y+=1)E[Y]=this.matrix.props[Y];this.matrix.reset()}else for(this.matrix.reset(),Y=0;Y<Q;Y+=1)E[Y]=this.matrix.props[Y];K+=1,I-=1,C+=P}}else for(I=this._currentCopies,C=0,P=1;I;)T=this.elemsData[C].it,E=T[T.length-1].transform.mProps.v.props,T[T.length-1].transform.mProps._mdf=!1,T[T.length-1].transform.op._mdf=!1,I-=1,C+=P;return R},RepeaterModifier.prototype.addShape=function(){};function RoundCornersModifier(){}extendPrototype([ShapeModifier],RoundCornersModifier),RoundCornersModifier.prototype.initModifierProperties=function(A,T){this.getValue=this.processKeys,this.rd=PropertyFactory.getProp(A,T.r,0,null,this),this._isAnimated=!!this.rd.effectsSequence.length},RoundCornersModifier.prototype.processPath=function(A,T){var E=shapePool.newElement();E.c=A.c;var C,P=A._length,I,R,F,O,D,L,B=0,V,U,z,W,Z,X;for(C=0;C<P;C+=1)I=A.v[C],F=A.o[C],R=A.i[C],I[0]===F[0]&&I[1]===F[1]&&I[0]===R[0]&&I[1]===R[1]?(C===0||C===P-1)&&!A.c?(E.setTripleAt(I[0],I[1],F[0],F[1],R[0],R[1],B),B+=1):(C===0?O=A.v[P-1]:O=A.v[C-1],D=Math.sqrt(Math.pow(I[0]-O[0],2)+Math.pow(I[1]-O[1],2)),L=D?Math.min(D/2,T)/D:0,Z=I[0]+(O[0]-I[0])*L,V=Z,X=I[1]-(I[1]-O[1])*L,U=X,z=V-(V-I[0])*roundCorner,W=U-(U-I[1])*roundCorner,E.setTripleAt(V,U,z,W,Z,X,B),B+=1,C===P-1?O=A.v[0]:O=A.v[C+1],D=Math.sqrt(Math.pow(I[0]-O[0],2)+Math.pow(I[1]-O[1],2)),L=D?Math.min(D/2,T)/D:0,z=I[0]+(O[0]-I[0])*L,V=z,W=I[1]+(O[1]-I[1])*L,U=W,Z=V-(V-I[0])*roundCorner,X=U-(U-I[1])*roundCorner,E.setTripleAt(V,U,z,W,Z,X,B),B+=1):(E.setTripleAt(A.v[C][0],A.v[C][1],A.o[C][0],A.o[C][1],A.i[C][0],A.i[C][1],B),B+=1);return E},RoundCornersModifier.prototype.processShapes=function(A){var T,E,C=this.shapes.length,P,I,R=this.rd.v;if(R!==0){var F,O;for(E=0;E<C;E+=1){if(F=this.shapes[E],O=F.localShapeCollection,!(!F.shape._mdf&&!this._mdf&&!A))for(O.releaseShapes(),F.shape._mdf=!0,T=F.shape.paths.shapes,I=F.shape.paths._length,P=0;P<I;P+=1)O.addShape(this.processPath(T[P],R));F.shape.paths=F.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function floatEqual(A,T){return Math.abs(A-T)*1e5<=Math.min(Math.abs(A),Math.abs(T))}function floatZero(A){return Math.abs(A)<=1e-5}function lerp(A,T,E){return A*(1-E)+T*E}function lerpPoint(A,T,E){return[lerp(A[0],T[0],E),lerp(A[1],T[1],E)]}function quadRoots(A,T,E){if(A===0)return[];var C=T*T-4*A*E;if(C<0)return[];var P=-T/(2*A);if(C===0)return[P];var I=Math.sqrt(C)/(2*A);return[P-I,P+I]}function polynomialCoefficients(A,T,E,C){return[-A+3*T-3*E+C,3*A-6*T+3*E,-3*A+3*T,A]}function singlePoint(A){return new PolynomialBezier(A,A,A,A,!1)}function PolynomialBezier(A,T,E,C,P){P&&pointEqual(A,T)&&(T=lerpPoint(A,C,1/3)),P&&pointEqual(E,C)&&(E=lerpPoint(A,C,2/3));var I=polynomialCoefficients(A[0],T[0],E[0],C[0]),R=polynomialCoefficients(A[1],T[1],E[1],C[1]);this.a=[I[0],R[0]],this.b=[I[1],R[1]],this.c=[I[2],R[2]],this.d=[I[3],R[3]],this.points=[A,T,E,C]}PolynomialBezier.prototype.point=function(A){return[((this.a[0]*A+this.b[0])*A+this.c[0])*A+this.d[0],((this.a[1]*A+this.b[1])*A+this.c[1])*A+this.d[1]]},PolynomialBezier.prototype.derivative=function(A){return[(3*A*this.a[0]+2*this.b[0])*A+this.c[0],(3*A*this.a[1]+2*this.b[1])*A+this.c[1]]},PolynomialBezier.prototype.tangentAngle=function(A){var T=this.derivative(A);return Math.atan2(T[1],T[0])},PolynomialBezier.prototype.normalAngle=function(A){var T=this.derivative(A);return Math.atan2(T[0],T[1])},PolynomialBezier.prototype.inflectionPoints=function(){var A=this.a[1]*this.b[0]-this.a[0]*this.b[1];if(floatZero(A))return[];var T=-.5*(this.a[1]*this.c[0]-this.a[0]*this.c[1])/A,E=T*T-1/3*(this.b[1]*this.c[0]-this.b[0]*this.c[1])/A;if(E<0)return[];var C=Math.sqrt(E);return floatZero(C)?C>0&&C<1?[T]:[]:[T-C,T+C].filter(function(P){return P>0&&P<1})},PolynomialBezier.prototype.split=function(A){if(A<=0)return[singlePoint(this.points[0]),this];if(A>=1)return[this,singlePoint(this.points[this.points.length-1])];var T=lerpPoint(this.points[0],this.points[1],A),E=lerpPoint(this.points[1],this.points[2],A),C=lerpPoint(this.points[2],this.points[3],A),P=lerpPoint(T,E,A),I=lerpPoint(E,C,A),R=lerpPoint(P,I,A);return[new PolynomialBezier(this.points[0],T,P,R,!0),new PolynomialBezier(R,I,C,this.points[3],!0)]};function extrema(A,T){var E=A.points[0][T],C=A.points[A.points.length-1][T];if(E>C){var P=C;C=E,E=P}for(var I=quadRoots(3*A.a[T],2*A.b[T],A.c[T]),R=0;R<I.length;R+=1)if(I[R]>0&&I[R]<1){var F=A.point(I[R])[T];F<E?E=F:F>C&&(C=F)}return{min:E,max:C}}PolynomialBezier.prototype.bounds=function(){return{x:extrema(this,0),y:extrema(this,1)}},PolynomialBezier.prototype.boundingBox=function(){var A=this.bounds();return{left:A.x.min,right:A.x.max,top:A.y.min,bottom:A.y.max,width:A.x.max-A.x.min,height:A.y.max-A.y.min,cx:(A.x.max+A.x.min)/2,cy:(A.y.max+A.y.min)/2}};function intersectData(A,T,E){var C=A.boundingBox();return{cx:C.cx,cy:C.cy,width:C.width,height:C.height,bez:A,t:(T+E)/2,t1:T,t2:E}}function splitData(A){var T=A.bez.split(.5);return[intersectData(T[0],A.t1,A.t),intersectData(T[1],A.t,A.t2)]}function boxIntersect(A,T){return Math.abs(A.cx-T.cx)*2<A.width+T.width&&Math.abs(A.cy-T.cy)*2<A.height+T.height}function intersectsImpl(A,T,E,C,P,I){if(boxIntersect(A,T)){if(E>=I||A.width<=C&&A.height<=C&&T.width<=C&&T.height<=C){P.push([A.t,T.t]);return}var R=splitData(A),F=splitData(T);intersectsImpl(R[0],F[0],E+1,C,P,I),intersectsImpl(R[0],F[1],E+1,C,P,I),intersectsImpl(R[1],F[0],E+1,C,P,I),intersectsImpl(R[1],F[1],E+1,C,P,I)}}PolynomialBezier.prototype.intersections=function(A,T,E){T===void 0&&(T=2),E===void 0&&(E=7);var C=[];return intersectsImpl(intersectData(this,0,1),intersectData(A,0,1),0,T,C,E),C},PolynomialBezier.shapeSegment=function(A,T){var E=(T+1)%A.length();return new PolynomialBezier(A.v[T],A.o[T],A.i[E],A.v[E],!0)},PolynomialBezier.shapeSegmentInverted=function(A,T){var E=(T+1)%A.length();return new PolynomialBezier(A.v[E],A.i[E],A.o[T],A.v[T],!0)};function crossProduct(A,T){return[A[1]*T[2]-A[2]*T[1],A[2]*T[0]-A[0]*T[2],A[0]*T[1]-A[1]*T[0]]}function lineIntersection(A,T,E,C){var P=[A[0],A[1],1],I=[T[0],T[1],1],R=[E[0],E[1],1],F=[C[0],C[1],1],O=crossProduct(crossProduct(P,I),crossProduct(R,F));return floatZero(O[2])?null:[O[0]/O[2],O[1]/O[2]]}function polarOffset(A,T,E){return[A[0]+Math.cos(T)*E,A[1]-Math.sin(T)*E]}function pointDistance(A,T){return Math.hypot(A[0]-T[0],A[1]-T[1])}function pointEqual(A,T){return floatEqual(A[0],T[0])&&floatEqual(A[1],T[1])}function ZigZagModifier(){}extendPrototype([ShapeModifier],ZigZagModifier),ZigZagModifier.prototype.initModifierProperties=function(A,T){this.getValue=this.processKeys,this.amplitude=PropertyFactory.getProp(A,T.s,0,null,this),this.frequency=PropertyFactory.getProp(A,T.r,0,null,this),this.pointsType=PropertyFactory.getProp(A,T.pt,0,null,this),this._isAnimated=this.amplitude.effectsSequence.length!==0||this.frequency.effectsSequence.length!==0||this.pointsType.effectsSequence.length!==0};function setPoint(A,T,E,C,P,I,R){var F=E-Math.PI/2,O=E+Math.PI/2,D=T[0]+Math.cos(E)*C*P,L=T[1]-Math.sin(E)*C*P;A.setTripleAt(D,L,D+Math.cos(F)*I,L-Math.sin(F)*I,D+Math.cos(O)*R,L-Math.sin(O)*R,A.length())}function getPerpendicularVector(A,T){var E=[T[0]-A[0],T[1]-A[1]],C=-Math.PI*.5,P=[Math.cos(C)*E[0]-Math.sin(C)*E[1],Math.sin(C)*E[0]+Math.cos(C)*E[1]];return P}function getProjectingAngle(A,T){var E=T===0?A.length()-1:T-1,C=(T+1)%A.length(),P=A.v[E],I=A.v[C],R=getPerpendicularVector(P,I);return Math.atan2(0,1)-Math.atan2(R[1],R[0])}function zigZagCorner(A,T,E,C,P,I,R){var F=getProjectingAngle(T,E),O=T.v[E%T._length],D=T.v[E===0?T._length-1:E-1],L=T.v[(E+1)%T._length],B=I===2?Math.sqrt(Math.pow(O[0]-D[0],2)+Math.pow(O[1]-D[1],2)):0,V=I===2?Math.sqrt(Math.pow(O[0]-L[0],2)+Math.pow(O[1]-L[1],2)):0;setPoint(A,T.v[E%T._length],F,R,C,V/((P+1)*2),B/((P+1)*2))}function zigZagSegment(A,T,E,C,P,I){for(var R=0;R<C;R+=1){var F=(R+1)/(C+1),O=P===2?Math.sqrt(Math.pow(T.points[3][0]-T.points[0][0],2)+Math.pow(T.points[3][1]-T.points[0][1],2)):0,D=T.normalAngle(F),L=T.point(F);setPoint(A,L,D,I,E,O/((C+1)*2),O/((C+1)*2)),I=-I}return I}ZigZagModifier.prototype.processPath=function(A,T,E,C){var P=A._length,I=shapePool.newElement();if(I.c=A.c,A.c||(P-=1),P===0)return I;var R=-1,F=PolynomialBezier.shapeSegment(A,0);zigZagCorner(I,A,0,T,E,C,R);for(var O=0;O<P;O+=1)R=zigZagSegment(I,F,T,E,C,-R),O===P-1&&!A.c?F=null:F=PolynomialBezier.shapeSegment(A,(O+1)%P),zigZagCorner(I,A,O+1,T,E,C,R);return I},ZigZagModifier.prototype.processShapes=function(A){var T,E,C=this.shapes.length,P,I,R=this.amplitude.v,F=Math.max(0,Math.round(this.frequency.v)),O=this.pointsType.v;if(R!==0){var D,L;for(E=0;E<C;E+=1){if(D=this.shapes[E],L=D.localShapeCollection,!(!D.shape._mdf&&!this._mdf&&!A))for(L.releaseShapes(),D.shape._mdf=!0,T=D.shape.paths.shapes,I=D.shape.paths._length,P=0;P<I;P+=1)L.addShape(this.processPath(T[P],R,F,O));D.shape.paths=D.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function linearOffset(A,T,E){var C=Math.atan2(T[0]-A[0],T[1]-A[1]);return[polarOffset(A,C,E),polarOffset(T,C,E)]}function offsetSegment(A,T){var E,C,P,I,R,F,O;O=linearOffset(A.points[0],A.points[1],T),E=O[0],C=O[1],O=linearOffset(A.points[1],A.points[2],T),P=O[0],I=O[1],O=linearOffset(A.points[2],A.points[3],T),R=O[0],F=O[1];var D=lineIntersection(E,C,P,I);D===null&&(D=C);var L=lineIntersection(R,F,P,I);return L===null&&(L=R),new PolynomialBezier(E,D,L,F)}function joinLines(A,T,E,C,P){var I=T.points[3],R=E.points[0];if(C===3||pointEqual(I,R))return I;if(C===2){var F=-T.tangentAngle(1),O=-E.tangentAngle(0)+Math.PI,D=lineIntersection(I,polarOffset(I,F+Math.PI/2,100),R,polarOffset(R,F+Math.PI/2,100)),L=D?pointDistance(D,I):pointDistance(I,R)/2,B=polarOffset(I,F,2*L*roundCorner);return A.setXYAt(B[0],B[1],"o",A.length()-1),B=polarOffset(R,O,2*L*roundCorner),A.setTripleAt(R[0],R[1],R[0],R[1],B[0],B[1],A.length()),R}var V=pointEqual(I,T.points[2])?T.points[0]:T.points[2],U=pointEqual(R,E.points[1])?E.points[3]:E.points[1],z=lineIntersection(V,I,R,U);return z&&pointDistance(z,I)<P?(A.setTripleAt(z[0],z[1],z[0],z[1],z[0],z[1],A.length()),z):I}function getIntersection(A,T){var E=A.intersections(T);return E.length&&floatEqual(E[0][0],1)&&E.shift(),E.length?E[0]:null}function pruneSegmentIntersection(A,T){var E=A.slice(),C=T.slice(),P=getIntersection(A[A.length-1],T[0]);return P&&(E[A.length-1]=A[A.length-1].split(P[0])[0],C[0]=T[0].split(P[1])[1]),A.length>1&&T.length>1&&(P=getIntersection(A[0],T[T.length-1]),P)?[[A[0].split(P[0])[0]],[T[T.length-1].split(P[1])[1]]]:[E,C]}function pruneIntersections(A){for(var T,E=1;E<A.length;E+=1)T=pruneSegmentIntersection(A[E-1],A[E]),A[E-1]=T[0],A[E]=T[1];return A.length>1&&(T=pruneSegmentIntersection(A[A.length-1],A[0]),A[A.length-1]=T[0],A[0]=T[1]),A}function offsetSegmentSplit(A,T){var E=A.inflectionPoints(),C,P,I,R;if(E.length===0)return[offsetSegment(A,T)];if(E.length===1||floatEqual(E[1],1))return I=A.split(E[0]),C=I[0],P=I[1],[offsetSegment(C,T),offsetSegment(P,T)];I=A.split(E[0]),C=I[0];var F=(E[1]-E[0])/(1-E[0]);return I=I[1].split(F),R=I[0],P=I[1],[offsetSegment(C,T),offsetSegment(R,T),offsetSegment(P,T)]}function OffsetPathModifier(){}extendPrototype([ShapeModifier],OffsetPathModifier),OffsetPathModifier.prototype.initModifierProperties=function(A,T){this.getValue=this.processKeys,this.amount=PropertyFactory.getProp(A,T.a,0,null,this),this.miterLimit=PropertyFactory.getProp(A,T.ml,0,null,this),this.lineJoin=T.lj,this._isAnimated=this.amount.effectsSequence.length!==0},OffsetPathModifier.prototype.processPath=function(A,T,E,C){var P=shapePool.newElement();P.c=A.c;var I=A.length();A.c||(I-=1);var R,F,O,D=[];for(R=0;R<I;R+=1)O=PolynomialBezier.shapeSegment(A,R),D.push(offsetSegmentSplit(O,T));if(!A.c)for(R=I-1;R>=0;R-=1)O=PolynomialBezier.shapeSegmentInverted(A,R),D.push(offsetSegmentSplit(O,T));D=pruneIntersections(D);var L=null,B=null;for(R=0;R<D.length;R+=1){var V=D[R];for(B&&(L=joinLines(P,B,V[0],E,C)),B=V[V.length-1],F=0;F<V.length;F+=1)O=V[F],L&&pointEqual(O.points[0],L)?P.setXYAt(O.points[1][0],O.points[1][1],"o",P.length()-1):P.setTripleAt(O.points[0][0],O.points[0][1],O.points[1][0],O.points[1][1],O.points[0][0],O.points[0][1],P.length()),P.setTripleAt(O.points[3][0],O.points[3][1],O.points[3][0],O.points[3][1],O.points[2][0],O.points[2][1],P.length()),L=O.points[3]}return D.length&&joinLines(P,B,D[0][0],E,C),P},OffsetPathModifier.prototype.processShapes=function(A){var T,E,C=this.shapes.length,P,I,R=this.amount.v,F=this.miterLimit.v,O=this.lineJoin;if(R!==0){var D,L;for(E=0;E<C;E+=1){if(D=this.shapes[E],L=D.localShapeCollection,!(!D.shape._mdf&&!this._mdf&&!A))for(L.releaseShapes(),D.shape._mdf=!0,T=D.shape.paths.shapes,I=D.shape.paths._length,P=0;P<I;P+=1)L.addShape(this.processPath(T[P],R,O,F));D.shape.paths=D.localShapeCollection}}this.dynamicProperties.length||(this._mdf=!1)};function getFontProperties(A){for(var T=A.fStyle?A.fStyle.split(" "):[],E="normal",C="normal",P=T.length,I,R=0;R<P;R+=1)switch(I=T[R].toLowerCase(),I){case"italic":C="italic";break;case"bold":E="700";break;case"black":E="900";break;case"medium":E="500";break;case"regular":case"normal":E="400";break;case"light":case"thin":E="200";break}return{style:C,weight:A.fWeight||E}}var FontManager=function(){var A=5e3,T={w:0,size:0,shapes:[],data:{shapes:[]}},E=[];E=E.concat([2304,2305,2306,2307,2362,2363,2364,2364,2366,2367,2368,2369,2370,2371,2372,2373,2374,2375,2376,2377,2378,2379,2380,2381,2382,2383,2387,2388,2389,2390,2391,2402,2403]);var C=127988,P=917631,I=917601,R=917626,F=65039,O=8205,D=127462,L=127487,B=["d83cdffb","d83cdffc","d83cdffd","d83cdffe","d83cdfff"];function V(ae){var ce=ae.split(","),se,le=ce.length,_e=[];for(se=0;se<le;se+=1)ce[se]!=="sans-serif"&&ce[se]!=="monospace"&&_e.push(ce[se]);return _e.join(",")}function U(ae,ce){var se=createTag("span");se.setAttribute("aria-hidden",!0),se.style.fontFamily=ce;var le=createTag("span");le.innerText="giItT1WQy@!-/#",se.style.position="absolute",se.style.left="-10000px",se.style.top="-10000px",se.style.fontSize="300px",se.style.fontVariant="normal",se.style.fontStyle="normal",se.style.fontWeight="normal",se.style.letterSpacing="0",se.appendChild(le),document.body.appendChild(se);var _e=le.offsetWidth;return le.style.fontFamily=V(ae)+", "+ce,{node:le,w:_e,parent:se}}function z(){var ae,ce=this.fonts.length,se,le,_e=ce;for(ae=0;ae<ce;ae+=1)this.fonts[ae].loaded?_e-=1:this.fonts[ae].fOrigin==="n"||this.fonts[ae].origin===0?this.fonts[ae].loaded=!0:(se=this.fonts[ae].monoCase.node,le=this.fonts[ae].monoCase.w,se.offsetWidth!==le?(_e-=1,this.fonts[ae].loaded=!0):(se=this.fonts[ae].sansCase.node,le=this.fonts[ae].sansCase.w,se.offsetWidth!==le&&(_e-=1,this.fonts[ae].loaded=!0)),this.fonts[ae].loaded&&(this.fonts[ae].sansCase.parent.parentNode.removeChild(this.fonts[ae].sansCase.parent),this.fonts[ae].monoCase.parent.parentNode.removeChild(this.fonts[ae].monoCase.parent)));_e!==0&&Date.now()-this.initTime<A?setTimeout(this.checkLoadedFontsBinded,20):setTimeout(this.setIsLoadedBinded,10)}function W(ae,ce){var se=document.body&&ce?"svg":"canvas",le,_e=getFontProperties(ae);if(se==="svg"){var me=createNS("text");me.style.fontSize="100px",me.setAttribute("font-family",ae.fFamily),me.setAttribute("font-style",_e.style),me.setAttribute("font-weight",_e.weight),me.textContent="1",ae.fClass?(me.style.fontFamily="inherit",me.setAttribute("class",ae.fClass)):me.style.fontFamily=ae.fFamily,ce.appendChild(me),le=me}else{var Ee=new OffscreenCanvas(500,500).getContext("2d");Ee.font=_e.style+" "+_e.weight+" 100px "+ae.fFamily,le=Ee}function Pe(Ce){return se==="svg"?(le.textContent=Ce,le.getComputedTextLength()):le.measureText(Ce).width}return{measureText:Pe}}function Z(ae,ce){if(!ae){this.isLoaded=!0;return}if(this.chars){this.isLoaded=!0,this.fonts=ae.list;return}if(!document.body){this.isLoaded=!0,ae.list.forEach(function(Oe){Oe.helper=W(Oe),Oe.cache={}}),this.fonts=ae.list;return}var se=ae.list,le,_e=se.length,me=_e;for(le=0;le<_e;le+=1){var Ee=!0,Pe,Ce;if(se[le].loaded=!1,se[le].monoCase=U(se[le].fFamily,"monospace"),se[le].sansCase=U(se[le].fFamily,"sans-serif"),!se[le].fPath)se[le].loaded=!0,me-=1;else if(se[le].fOrigin==="p"||se[le].origin===3){if(Pe=document.querySelectorAll('style[f-forigin="p"][f-family="'+se[le].fFamily+'"], style[f-origin="3"][f-family="'+se[le].fFamily+'"]'),Pe.length>0&&(Ee=!1),Ee){var ke=createTag("style");ke.setAttribute("f-forigin",se[le].fOrigin),ke.setAttribute("f-origin",se[le].origin),ke.setAttribute("f-family",se[le].fFamily),ke.type="text/css",ke.innerText="@font-face {font-family: "+se[le].fFamily+"; font-style: normal; src: url('"+se[le].fPath+"');}",ce.appendChild(ke)}}else if(se[le].fOrigin==="g"||se[le].origin===1){for(Pe=document.querySelectorAll('link[f-forigin="g"], link[f-origin="1"]'),Ce=0;Ce<Pe.length;Ce+=1)Pe[Ce].href.indexOf(se[le].fPath)!==-1&&(Ee=!1);if(Ee){var Be=createTag("link");Be.setAttribute("f-forigin",se[le].fOrigin),Be.setAttribute("f-origin",se[le].origin),Be.type="text/css",Be.rel="stylesheet",Be.href=se[le].fPath,document.body.appendChild(Be)}}else if(se[le].fOrigin==="t"||se[le].origin===2){for(Pe=document.querySelectorAll('script[f-forigin="t"], script[f-origin="2"]'),Ce=0;Ce<Pe.length;Ce+=1)se[le].fPath===Pe[Ce].src&&(Ee=!1);if(Ee){var Me=createTag("link");Me.setAttribute("f-forigin",se[le].fOrigin),Me.setAttribute("f-origin",se[le].origin),Me.setAttribute("rel","stylesheet"),Me.setAttribute("href",se[le].fPath),ce.appendChild(Me)}}se[le].helper=W(se[le],ce),se[le].cache={},this.fonts.push(se[le])}me===0?this.isLoaded=!0:setTimeout(this.checkLoadedFonts.bind(this),100)}function X(ae){if(ae){this.chars||(this.chars=[]);var ce,se=ae.length,le,_e=this.chars.length,me;for(ce=0;ce<se;ce+=1){for(le=0,me=!1;le<_e;)this.chars[le].style===ae[ce].style&&this.chars[le].fFamily===ae[ce].fFamily&&this.chars[le].ch===ae[ce].ch&&(me=!0),le+=1;me||(this.chars.push(ae[ce]),_e+=1)}}}function K(ae,ce,se){for(var le=0,_e=this.chars.length;le<_e;){if(this.chars[le].ch===ae&&this.chars[le].style===ce&&this.chars[le].fFamily===se)return this.chars[le];le+=1}return(typeof ae=="string"&&ae.charCodeAt(0)!==13||!ae)&&console&&console.warn&&!this._warned&&(this._warned=!0,console.warn("Missing character from exported characters list: ",ae,ce,se)),T}function Y(ae,ce,se){var le=this.getFontByName(ce),_e=ae;if(!le.cache[_e]){var me=le.helper;if(ae===" "){var Ee=me.measureText("|"+ae+"|"),Pe=me.measureText("||");le.cache[_e]=(Ee-Pe)/100}else le.cache[_e]=me.measureText(ae)/100}return le.cache[_e]*se}function Q(ae){for(var ce=0,se=this.fonts.length;ce<se;){if(this.fonts[ce].fName===ae)return this.fonts[ce];ce+=1}return this.fonts[0]}function J(ae){var ce=0,se=ae.charCodeAt(0);if(se>=55296&&se<=56319){var le=ae.charCodeAt(1);le>=56320&&le<=57343&&(ce=(se-55296)*1024+le-56320+65536)}return ce}function te(ae,ce){var se=ae.toString(16)+ce.toString(16);return B.indexOf(se)!==-1}function ie(ae){return ae===O}function ne(ae){return ae===F}function he(ae){var ce=J(ae);return ce>=D&&ce<=L}function ve(ae){return he(ae.substr(0,2))&&he(ae.substr(2,2))}function ye(ae){return E.indexOf(ae)!==-1}function de(ae,ce){var se=J(ae.substr(ce,2));if(se!==C)return!1;var le=0;for(ce+=2;le<5;){if(se=J(ae.substr(ce,2)),se<I||se>R)return!1;le+=1,ce+=2}return J(ae.substr(ce,2))===P}function fe(){this.isLoaded=!0}var ue=function(){this.fonts=[],this.chars=null,this.typekitLoaded=0,this.isLoaded=!1,this._warned=!1,this.initTime=Date.now(),this.setIsLoadedBinded=this.setIsLoaded.bind(this),this.checkLoadedFontsBinded=this.checkLoadedFonts.bind(this)};ue.isModifier=te,ue.isZeroWidthJoiner=ie,ue.isFlagEmoji=ve,ue.isRegionalCode=he,ue.isCombinedCharacter=ye,ue.isRegionalFlag=de,ue.isVariationSelector=ne,ue.BLACK_FLAG_CODE_POINT=C;var ge={addChars:X,addFonts:Z,getCharData:K,getFontByName:Q,measureText:Y,checkLoadedFonts:z,setIsLoaded:fe};return ue.prototype=ge,ue}();function SlotManager(A){this.animationData=A}SlotManager.prototype.getProp=function(A){return this.animationData.slots&&this.animationData.slots[A.sid]?Object.assign(A,this.animationData.slots[A.sid].p):A};function slotFactory(A){return new SlotManager(A)}function RenderableElement(){}RenderableElement.prototype={initRenderable:function(){this.isInRange=!1,this.hidden=!1,this.isTransparent=!1,this.renderableComponents=[]},addRenderableComponent:function(T){this.renderableComponents.indexOf(T)===-1&&this.renderableComponents.push(T)},removeRenderableComponent:function(T){this.renderableComponents.indexOf(T)!==-1&&this.renderableComponents.splice(this.renderableComponents.indexOf(T),1)},prepareRenderableFrame:function(T){this.checkLayerLimits(T)},checkTransparency:function(){this.finalTransform.mProp.o.v<=0?!this.isTransparent&&this.globalData.renderConfig.hideOnTransparent&&(this.isTransparent=!0,this.hide()):this.isTransparent&&(this.isTransparent=!1,this.show())},checkLayerLimits:function(T){this.data.ip-this.data.st<=T&&this.data.op-this.data.st>T?this.isInRange!==!0&&(this.globalData._mdf=!0,this._mdf=!0,this.isInRange=!0,this.show()):this.isInRange!==!1&&(this.globalData._mdf=!0,this.isInRange=!1,this.hide())},renderRenderable:function(){var T,E=this.renderableComponents.length;for(T=0;T<E;T+=1)this.renderableComponents[T].renderFrame(this._isFirstFrame)},sourceRectAtTime:function(){return{top:0,left:0,width:100,height:100}},getLayerSize:function(){return this.data.ty===5?{w:this.data.textData.width,h:this.data.textData.height}:{w:this.data.width,h:this.data.height}}};var getBlendMode=function(){var A={0:"source-over",1:"multiply",2:"screen",3:"overlay",4:"darken",5:"lighten",6:"color-dodge",7:"color-burn",8:"hard-light",9:"soft-light",10:"difference",11:"exclusion",12:"hue",13:"saturation",14:"color",15:"luminosity"};return function(T){return A[T]||""}}();function SliderEffect(A,T,E){this.p=PropertyFactory.getProp(T,A.v,0,0,E)}function AngleEffect(A,T,E){this.p=PropertyFactory.getProp(T,A.v,0,0,E)}function ColorEffect(A,T,E){this.p=PropertyFactory.getProp(T,A.v,1,0,E)}function PointEffect(A,T,E){this.p=PropertyFactory.getProp(T,A.v,1,0,E)}function LayerIndexEffect(A,T,E){this.p=PropertyFactory.getProp(T,A.v,0,0,E)}function MaskIndexEffect(A,T,E){this.p=PropertyFactory.getProp(T,A.v,0,0,E)}function CheckboxEffect(A,T,E){this.p=PropertyFactory.getProp(T,A.v,0,0,E)}function NoValueEffect(){this.p={}}function EffectsManager(A,T){var E=A.ef||[];this.effectElements=[];var C,P=E.length,I;for(C=0;C<P;C+=1)I=new GroupEffect(E[C],T),this.effectElements.push(I)}function GroupEffect(A,T){this.init(A,T)}extendPrototype([DynamicPropertyContainer],GroupEffect),GroupEffect.prototype.getValue=GroupEffect.prototype.iterateDynamicProperties,GroupEffect.prototype.init=function(A,T){this.data=A,this.effectElements=[],this.initDynamicPropertyContainer(T);var E,C=this.data.ef.length,P,I=this.data.ef;for(E=0;E<C;E+=1){switch(P=null,I[E].ty){case 0:P=new SliderEffect(I[E],T,this);break;case 1:P=new AngleEffect(I[E],T,this);break;case 2:P=new ColorEffect(I[E],T,this);break;case 3:P=new PointEffect(I[E],T,this);break;case 4:case 7:P=new CheckboxEffect(I[E],T,this);break;case 10:P=new LayerIndexEffect(I[E],T,this);break;case 11:P=new MaskIndexEffect(I[E],T,this);break;case 5:P=new EffectsManager(I[E],T);break;default:P=new NoValueEffect(I[E]);break}P&&this.effectElements.push(P)}};function BaseElement(){}BaseElement.prototype={checkMasks:function(){if(!this.data.hasMask)return!1;for(var T=0,E=this.data.masksProperties.length;T<E;){if(this.data.masksProperties[T].mode!=="n"&&this.data.masksProperties[T].cl!==!1)return!0;T+=1}return!1},initExpressions:function(){var T=getExpressionInterfaces();if(T){var E=T("layer"),C=T("effects"),P=T("shape"),I=T("text"),R=T("comp");this.layerInterface=E(this),this.data.hasMask&&this.maskManager&&this.layerInterface.registerMaskInterface(this.maskManager);var F=C.createEffectsInterface(this,this.layerInterface);this.layerInterface.registerEffectsInterface(F),this.data.ty===0||this.data.xt?this.compInterface=R(this):this.data.ty===4?(this.layerInterface.shapeInterface=P(this.shapesData,this.itemsData,this.layerInterface),this.layerInterface.content=this.layerInterface.shapeInterface):this.data.ty===5&&(this.layerInterface.textInterface=I(this),this.layerInterface.text=this.layerInterface.textInterface)}},setBlendMode:function(){var T=getBlendMode(this.data.bm),E=this.baseElement||this.layerElement;E.style["mix-blend-mode"]=T},initBaseData:function(T,E,C){this.globalData=E,this.comp=C,this.data=T,this.layerId=createElementID(),this.data.sr||(this.data.sr=1),this.effectsManager=new EffectsManager(this.data,this,this.dynamicProperties)},getType:function(){return this.type},sourceRectAtTime:function(){}};function FrameElement(){}FrameElement.prototype={initFrame:function(){this._isFirstFrame=!1,this.dynamicProperties=[],this._mdf=!1},prepareProperties:function(T,E){var C,P=this.dynamicProperties.length;for(C=0;C<P;C+=1)(E||this._isParent&&this.dynamicProperties[C].propType==="transform")&&(this.dynamicProperties[C].getValue(),this.dynamicProperties[C]._mdf&&(this.globalData._mdf=!0,this._mdf=!0))},addDynamicProperty:function(T){this.dynamicProperties.indexOf(T)===-1&&this.dynamicProperties.push(T)}};function FootageElement(A,T,E){this.initFrame(),this.initRenderable(),this.assetData=T.getAssetData(A.refId),this.footageData=T.imageLoader.getAsset(this.assetData),this.initBaseData(A,T,E)}FootageElement.prototype.prepareFrame=function(){},extendPrototype([RenderableElement,BaseElement,FrameElement],FootageElement),FootageElement.prototype.getBaseElement=function(){return null},FootageElement.prototype.renderFrame=function(){},FootageElement.prototype.destroy=function(){},FootageElement.prototype.initExpressions=function(){var A=getExpressionInterfaces();if(A){var T=A("footage");this.layerInterface=T(this)}},FootageElement.prototype.getFootageData=function(){return this.footageData};function AudioElement(A,T,E){this.initFrame(),this.initRenderable(),this.assetData=T.getAssetData(A.refId),this.initBaseData(A,T,E),this._isPlaying=!1,this._canPlay=!1;var C=this.globalData.getAssetsPath(this.assetData);this.audio=this.globalData.audioController.createAudio(C),this._currentTime=0,this.globalData.audioController.addAudio(this),this._volumeMultiplier=1,this._volume=1,this._previousVolume=null,this.tm=A.tm?PropertyFactory.getProp(this,A.tm,0,T.frameRate,this):{_placeholder:!0},this.lv=PropertyFactory.getProp(this,A.au&&A.au.lv?A.au.lv:{k:[100]},1,.01,this)}AudioElement.prototype.prepareFrame=function(A){if(this.prepareRenderableFrame(A,!0),this.prepareProperties(A,!0),this.tm._placeholder)this._currentTime=A/this.data.sr;else{var T=this.tm.v;this._currentTime=T}this._volume=this.lv.v[0];var E=this._volume*this._volumeMultiplier;this._previousVolume!==E&&(this._previousVolume=E,this.audio.volume(E))},extendPrototype([RenderableElement,BaseElement,FrameElement],AudioElement),AudioElement.prototype.renderFrame=function(){this.isInRange&&this._canPlay&&(this._isPlaying?(!this.audio.playing()||Math.abs(this._currentTime/this.globalData.frameRate-this.audio.seek())>.1)&&this.audio.seek(this._currentTime/this.globalData.frameRate):(this.audio.play(),this.audio.seek(this._currentTime/this.globalData.frameRate),this._isPlaying=!0))},AudioElement.prototype.show=function(){},AudioElement.prototype.hide=function(){this.audio.pause(),this._isPlaying=!1},AudioElement.prototype.pause=function(){this.audio.pause(),this._isPlaying=!1,this._canPlay=!1},AudioElement.prototype.resume=function(){this._canPlay=!0},AudioElement.prototype.setRate=function(A){this.audio.rate(A)},AudioElement.prototype.volume=function(A){this._volumeMultiplier=A,this._previousVolume=A*this._volume,this.audio.volume(this._previousVolume)},AudioElement.prototype.getBaseElement=function(){return null},AudioElement.prototype.destroy=function(){},AudioElement.prototype.sourceRectAtTime=function(){},AudioElement.prototype.initExpressions=function(){};function BaseRenderer(){}BaseRenderer.prototype.checkLayers=function(A){var T,E=this.layers.length,C;for(this.completeLayers=!0,T=E-1;T>=0;T-=1)this.elements[T]||(C=this.layers[T],C.ip-C.st<=A-this.layers[T].st&&C.op-C.st>A-this.layers[T].st&&this.buildItem(T)),this.completeLayers=this.elements[T]?this.completeLayers:!1;this.checkPendingElements()},BaseRenderer.prototype.createItem=function(A){switch(A.ty){case 2:return this.createImage(A);case 0:return this.createComp(A);case 1:return this.createSolid(A);case 3:return this.createNull(A);case 4:return this.createShape(A);case 5:return this.createText(A);case 6:return this.createAudio(A);case 13:return this.createCamera(A);case 15:return this.createFootage(A);default:return this.createNull(A)}},BaseRenderer.prototype.createCamera=function(){throw new Error("You're using a 3d camera. Try the html renderer.")},BaseRenderer.prototype.createAudio=function(A){return new AudioElement(A,this.globalData,this)},BaseRenderer.prototype.createFootage=function(A){return new FootageElement(A,this.globalData,this)},BaseRenderer.prototype.buildAllItems=function(){var A,T=this.layers.length;for(A=0;A<T;A+=1)this.buildItem(A);this.checkPendingElements()},BaseRenderer.prototype.includeLayers=function(A){this.completeLayers=!1;var T,E=A.length,C,P=this.layers.length;for(T=0;T<E;T+=1)for(C=0;C<P;){if(this.layers[C].id===A[T].id){this.layers[C]=A[T];break}C+=1}},BaseRenderer.prototype.setProjectInterface=function(A){this.globalData.projectInterface=A},BaseRenderer.prototype.initItems=function(){this.globalData.progressiveLoad||this.buildAllItems()},BaseRenderer.prototype.buildElementParenting=function(A,T,E){for(var C=this.elements,P=this.layers,I=0,R=P.length;I<R;)P[I].ind==T&&(!C[I]||C[I]===!0?(this.buildItem(I),this.addPendingElement(A)):(E.push(C[I]),C[I].setAsParent(),P[I].parent!==void 0?this.buildElementParenting(A,P[I].parent,E):A.setHierarchy(E))),I+=1},BaseRenderer.prototype.addPendingElement=function(A){this.pendingElements.push(A)},BaseRenderer.prototype.searchExtraCompositions=function(A){var T,E=A.length;for(T=0;T<E;T+=1)if(A[T].xt){var C=this.createComp(A[T]);C.initExpressions(),this.globalData.projectInterface.registerComposition(C)}},BaseRenderer.prototype.getElementById=function(A){var T,E=this.elements.length;for(T=0;T<E;T+=1)if(this.elements[T].data.ind===A)return this.elements[T];return null},BaseRenderer.prototype.getElementByPath=function(A){var T=A.shift(),E;if(typeof T=="number")E=this.elements[T];else{var C,P=this.elements.length;for(C=0;C<P;C+=1)if(this.elements[C].data.nm===T){E=this.elements[C];break}}return A.length===0?E:E.getElementByPath(A)},BaseRenderer.prototype.setupGlobalData=function(A,T){this.globalData.fontManager=new FontManager,this.globalData.slotManager=slotFactory(A),this.globalData.fontManager.addChars(A.chars),this.globalData.fontManager.addFonts(A.fonts,T),this.globalData.getAssetData=this.animationItem.getAssetData.bind(this.animationItem),this.globalData.getAssetsPath=this.animationItem.getAssetsPath.bind(this.animationItem),this.globalData.imageLoader=this.animationItem.imagePreloader,this.globalData.audioController=this.animationItem.audioController,this.globalData.frameId=0,this.globalData.frameRate=A.fr,this.globalData.nm=A.nm,this.globalData.compSize={w:A.w,h:A.h}};var effectTypes={TRANSFORM_EFFECT:"transformEFfect"};function TransformElement(){}TransformElement.prototype={initTransform:function(){var T=new Matrix;this.finalTransform={mProp:this.data.ks?TransformPropertyFactory.getTransformProperty(this,this.data.ks,this):{o:0},_matMdf:!1,_localMatMdf:!1,_opMdf:!1,mat:T,localMat:T,localOpacity:1},this.data.ao&&(this.finalTransform.mProp.autoOriented=!0),this.data.ty},renderTransform:function(){if(this.finalTransform._opMdf=this.finalTransform.mProp.o._mdf||this._isFirstFrame,this.finalTransform._matMdf=this.finalTransform.mProp._mdf||this._isFirstFrame,this.hierarchy){var T,E=this.finalTransform.mat,C=0,P=this.hierarchy.length;if(!this.finalTransform._matMdf)for(;C<P;){if(this.hierarchy[C].finalTransform.mProp._mdf){this.finalTransform._matMdf=!0;break}C+=1}if(this.finalTransform._matMdf)for(T=this.finalTransform.mProp.v.props,E.cloneFromProps(T),C=0;C<P;C+=1)E.multiply(this.hierarchy[C].finalTransform.mProp.v)}this.finalTransform._matMdf&&(this.finalTransform._localMatMdf=this.finalTransform._matMdf),this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v)},renderLocalTransform:function(){if(this.localTransforms){var T=0,E=this.localTransforms.length;if(this.finalTransform._localMatMdf=this.finalTransform._matMdf,!this.finalTransform._localMatMdf||!this.finalTransform._opMdf)for(;T<E;)this.localTransforms[T]._mdf&&(this.finalTransform._localMatMdf=!0),this.localTransforms[T]._opMdf&&!this.finalTransform._opMdf&&(this.finalTransform.localOpacity=this.finalTransform.mProp.o.v,this.finalTransform._opMdf=!0),T+=1;if(this.finalTransform._localMatMdf){var C=this.finalTransform.localMat;for(this.localTransforms[0].matrix.clone(C),T=1;T<E;T+=1){var P=this.localTransforms[T].matrix;C.multiply(P)}C.multiply(this.finalTransform.mat)}if(this.finalTransform._opMdf){var I=this.finalTransform.localOpacity;for(T=0;T<E;T+=1)I*=this.localTransforms[T].opacity*.01;this.finalTransform.localOpacity=I}}},searchEffectTransforms:function(){if(this.renderableEffectsManager){var T=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT);if(T.length){this.localTransforms=[],this.finalTransform.localMat=new Matrix;var E=0,C=T.length;for(E=0;E<C;E+=1)this.localTransforms.push(T[E])}}},globalToLocal:function(T){var E=[];E.push(this.finalTransform);for(var C=!0,P=this.comp;C;)P.finalTransform?(P.data.hasMask&&E.splice(0,0,P.finalTransform),P=P.comp):C=!1;var I,R=E.length,F;for(I=0;I<R;I+=1)F=E[I].mat.applyToPointArray(0,0,0),T=[T[0]-F[0],T[1]-F[1],0];return T},mHelper:new Matrix};function MaskElement(A,T,E){this.data=A,this.element=T,this.globalData=E,this.storedData=[],this.masksProperties=this.data.masksProperties||[],this.maskElement=null;var C=this.globalData.defs,P,I=this.masksProperties?this.masksProperties.length:0;this.viewData=createSizedArray(I),this.solidPath="";var R,F=this.masksProperties,O=0,D=[],L,B,V=createElementID(),U,z,W,Z,X="clipPath",K="clip-path";for(P=0;P<I;P+=1)if((F[P].mode!=="a"&&F[P].mode!=="n"||F[P].inv||F[P].o.k!==100||F[P].o.x)&&(X="mask",K="mask"),(F[P].mode==="s"||F[P].mode==="i")&&O===0?(U=createNS("rect"),U.setAttribute("fill","#ffffff"),U.setAttribute("width",this.element.comp.data.w||0),U.setAttribute("height",this.element.comp.data.h||0),D.push(U)):U=null,R=createNS("path"),F[P].mode==="n")this.viewData[P]={op:PropertyFactory.getProp(this.element,F[P].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,F[P],3),elem:R,lastPath:""},C.appendChild(R);else{O+=1,R.setAttribute("fill",F[P].mode==="s"?"#000000":"#ffffff"),R.setAttribute("clip-rule","nonzero");var Y;if(F[P].x.k!==0?(X="mask",K="mask",Z=PropertyFactory.getProp(this.element,F[P].x,0,null,this.element),Y=createElementID(),z=createNS("filter"),z.setAttribute("id",Y),W=createNS("feMorphology"),W.setAttribute("operator","erode"),W.setAttribute("in","SourceGraphic"),W.setAttribute("radius","0"),z.appendChild(W),C.appendChild(z),R.setAttribute("stroke",F[P].mode==="s"?"#000000":"#ffffff")):(W=null,Z=null),this.storedData[P]={elem:R,x:Z,expan:W,lastPath:"",lastOperator:"",filterId:Y,lastRadius:0},F[P].mode==="i"){B=D.length;var Q=createNS("g");for(L=0;L<B;L+=1)Q.appendChild(D[L]);var J=createNS("mask");J.setAttribute("mask-type","alpha"),J.setAttribute("id",V+"_"+O),J.appendChild(R),C.appendChild(J),Q.setAttribute("mask","url("+getLocationHref()+"#"+V+"_"+O+")"),D.length=0,D.push(Q)}else D.push(R);F[P].inv&&!this.solidPath&&(this.solidPath=this.createLayerSolidPath()),this.viewData[P]={elem:R,lastPath:"",op:PropertyFactory.getProp(this.element,F[P].o,0,.01,this.element),prop:ShapePropertyFactory.getShapeProp(this.element,F[P],3),invRect:U},this.viewData[P].prop.k||this.drawPath(F[P],this.viewData[P].prop.v,this.viewData[P])}for(this.maskElement=createNS(X),I=D.length,P=0;P<I;P+=1)this.maskElement.appendChild(D[P]);O>0&&(this.maskElement.setAttribute("id",V),this.element.maskedElement.setAttribute(K,"url("+getLocationHref()+"#"+V+")"),C.appendChild(this.maskElement)),this.viewData.length&&this.element.addRenderableComponent(this)}MaskElement.prototype.getMaskProperty=function(A){return this.viewData[A].prop},MaskElement.prototype.renderFrame=function(A){var T=this.element.finalTransform.mat,E,C=this.masksProperties.length;for(E=0;E<C;E+=1)if((this.viewData[E].prop._mdf||A)&&this.drawPath(this.masksProperties[E],this.viewData[E].prop.v,this.viewData[E]),(this.viewData[E].op._mdf||A)&&this.viewData[E].elem.setAttribute("fill-opacity",this.viewData[E].op.v),this.masksProperties[E].mode!=="n"&&(this.viewData[E].invRect&&(this.element.finalTransform.mProp._mdf||A)&&this.viewData[E].invRect.setAttribute("transform",T.getInverseMatrix().to2dCSS()),this.storedData[E].x&&(this.storedData[E].x._mdf||A))){var P=this.storedData[E].expan;this.storedData[E].x.v<0?(this.storedData[E].lastOperator!=="erode"&&(this.storedData[E].lastOperator="erode",this.storedData[E].elem.setAttribute("filter","url("+getLocationHref()+"#"+this.storedData[E].filterId+")")),P.setAttribute("radius",-this.storedData[E].x.v)):(this.storedData[E].lastOperator!=="dilate"&&(this.storedData[E].lastOperator="dilate",this.storedData[E].elem.setAttribute("filter",null)),this.storedData[E].elem.setAttribute("stroke-width",this.storedData[E].x.v*2))}},MaskElement.prototype.getMaskelement=function(){return this.maskElement},MaskElement.prototype.createLayerSolidPath=function(){var A="M0,0 ";return A+=" h"+this.globalData.compSize.w,A+=" v"+this.globalData.compSize.h,A+=" h-"+this.globalData.compSize.w,A+=" v-"+this.globalData.compSize.h+" ",A},MaskElement.prototype.drawPath=function(A,T,E){var C=" M"+T.v[0][0]+","+T.v[0][1],P,I;for(I=T._length,P=1;P<I;P+=1)C+=" C"+T.o[P-1][0]+","+T.o[P-1][1]+" "+T.i[P][0]+","+T.i[P][1]+" "+T.v[P][0]+","+T.v[P][1];if(T.c&&I>1&&(C+=" C"+T.o[P-1][0]+","+T.o[P-1][1]+" "+T.i[0][0]+","+T.i[0][1]+" "+T.v[0][0]+","+T.v[0][1]),E.lastPath!==C){var R="";E.elem&&(T.c&&(R=A.inv?this.solidPath+C:C),E.elem.setAttribute("d",R)),E.lastPath=C}},MaskElement.prototype.destroy=function(){this.element=null,this.globalData=null,this.maskElement=null,this.data=null,this.masksProperties=null};var filtersFactory=function(){var A={};A.createFilter=T,A.createAlphaToLuminanceFilter=E;function T(C,P){var I=createNS("filter");return I.setAttribute("id",C),P!==!0&&(I.setAttribute("filterUnits","objectBoundingBox"),I.setAttribute("x","0%"),I.setAttribute("y","0%"),I.setAttribute("width","100%"),I.setAttribute("height","100%")),I}function E(){var C=createNS("feColorMatrix");return C.setAttribute("type","matrix"),C.setAttribute("color-interpolation-filters","sRGB"),C.setAttribute("values","0 0 0 1 0  0 0 0 1 0  0 0 0 1 0  0 0 0 1 1"),C}return A}(),featureSupport=function(){var A={maskType:!0,svgLumaHidden:!0,offscreenCanvas:typeof OffscreenCanvas<"u"};return(/MSIE 10/i.test(navigator.userAgent)||/MSIE 9/i.test(navigator.userAgent)||/rv:11.0/i.test(navigator.userAgent)||/Edge\/\d./i.test(navigator.userAgent))&&(A.maskType=!1),/firefox/i.test(navigator.userAgent)&&(A.svgLumaHidden=!1),A}(),registeredEffects$1={},idPrefix="filter_result_";function SVGEffects(A){var T,E="SourceGraphic",C=A.data.ef?A.data.ef.length:0,P=createElementID(),I=filtersFactory.createFilter(P,!0),R=0;this.filters=[];var F;for(T=0;T<C;T+=1){F=null;var O=A.data.ef[T].ty;if(registeredEffects$1[O]){var D=registeredEffects$1[O].effect;F=new D(I,A.effectsManager.effectElements[T],A,idPrefix+R,E),E=idPrefix+R,registeredEffects$1[O].countsAsEffect&&(R+=1)}F&&this.filters.push(F)}R&&(A.globalData.defs.appendChild(I),A.layerElement.setAttribute("filter","url("+getLocationHref()+"#"+P+")")),this.filters.length&&A.addRenderableComponent(this)}SVGEffects.prototype.renderFrame=function(A){var T,E=this.filters.length;for(T=0;T<E;T+=1)this.filters[T].renderFrame(A)},SVGEffects.prototype.getEffects=function(A){var T,E=this.filters.length,C=[];for(T=0;T<E;T+=1)this.filters[T].type===A&&C.push(this.filters[T]);return C};function registerEffect$1(A,T,E){registeredEffects$1[A]={effect:T,countsAsEffect:E}}function SVGBaseElement(){}SVGBaseElement.prototype={initRendererElement:function(){this.layerElement=createNS("g")},createContainerElements:function(){this.matteElement=createNS("g"),this.transformedElement=this.layerElement,this.maskedElement=this.layerElement,this._sizeChanged=!1;var T=null;if(this.data.td){this.matteMasks={};var E=createNS("g");E.setAttribute("id",this.layerId),E.appendChild(this.layerElement),T=E,this.globalData.defs.appendChild(E)}else this.data.tt?(this.matteElement.appendChild(this.layerElement),T=this.matteElement,this.baseElement=this.matteElement):this.baseElement=this.layerElement;if(this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.ty===0&&!this.data.hd){var C=createNS("clipPath"),P=createNS("path");P.setAttribute("d","M0,0 L"+this.data.w+",0 L"+this.data.w+","+this.data.h+" L0,"+this.data.h+"z");var I=createElementID();if(C.setAttribute("id",I),C.appendChild(P),this.globalData.defs.appendChild(C),this.checkMasks()){var R=createNS("g");R.setAttribute("clip-path","url("+getLocationHref()+"#"+I+")"),R.appendChild(this.layerElement),this.transformedElement=R,T?T.appendChild(this.transformedElement):this.baseElement=this.transformedElement}else this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+I+")")}this.data.bm!==0&&this.setBlendMode()},renderElement:function(){this.finalTransform._localMatMdf&&this.transformedElement.setAttribute("transform",this.finalTransform.localMat.to2dCSS()),this.finalTransform._opMdf&&this.transformedElement.setAttribute("opacity",this.finalTransform.localOpacity)},destroyBaseElement:function(){this.layerElement=null,this.matteElement=null,this.maskManager.destroy()},getBaseElement:function(){return this.data.hd?null:this.baseElement},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData),this.renderableEffectsManager=new SVGEffects(this),this.searchEffectTransforms()},getMatte:function(T){if(this.matteMasks||(this.matteMasks={}),!this.matteMasks[T]){var E=this.layerId+"_"+T,C,P,I,R;if(T===1||T===3){var F=createNS("mask");F.setAttribute("id",E),F.setAttribute("mask-type",T===3?"luminance":"alpha"),I=createNS("use"),I.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),F.appendChild(I),this.globalData.defs.appendChild(F),!featureSupport.maskType&&T===1&&(F.setAttribute("mask-type","luminance"),C=createElementID(),P=filtersFactory.createFilter(C),this.globalData.defs.appendChild(P),P.appendChild(filtersFactory.createAlphaToLuminanceFilter()),R=createNS("g"),R.appendChild(I),F.appendChild(R),R.setAttribute("filter","url("+getLocationHref()+"#"+C+")"))}else if(T===2){var O=createNS("mask");O.setAttribute("id",E),O.setAttribute("mask-type","alpha");var D=createNS("g");O.appendChild(D),C=createElementID(),P=filtersFactory.createFilter(C);var L=createNS("feComponentTransfer");L.setAttribute("in","SourceGraphic"),P.appendChild(L);var B=createNS("feFuncA");B.setAttribute("type","table"),B.setAttribute("tableValues","1.0 0.0"),L.appendChild(B),this.globalData.defs.appendChild(P);var V=createNS("rect");V.setAttribute("width",this.comp.data.w),V.setAttribute("height",this.comp.data.h),V.setAttribute("x","0"),V.setAttribute("y","0"),V.setAttribute("fill","#ffffff"),V.setAttribute("opacity","0"),D.setAttribute("filter","url("+getLocationHref()+"#"+C+")"),D.appendChild(V),I=createNS("use"),I.setAttributeNS("http://www.w3.org/1999/xlink","href","#"+this.layerId),D.appendChild(I),featureSupport.maskType||(O.setAttribute("mask-type","luminance"),P.appendChild(filtersFactory.createAlphaToLuminanceFilter()),R=createNS("g"),D.appendChild(V),R.appendChild(this.layerElement),D.appendChild(R)),this.globalData.defs.appendChild(O)}this.matteMasks[T]=E}return this.matteMasks[T]},setMatte:function(T){this.matteElement&&this.matteElement.setAttribute("mask","url("+getLocationHref()+"#"+T+")")}};function HierarchyElement(){}HierarchyElement.prototype={initHierarchy:function(){this.hierarchy=[],this._isParent=!1,this.checkParenting()},setHierarchy:function(T){this.hierarchy=T},setAsParent:function(){this._isParent=!0},checkParenting:function(){this.data.parent!==void 0&&this.comp.buildElementParenting(this,this.data.parent,[])}};function RenderableDOMElement(){}(function(){var A={initElement:function(E,C,P){this.initFrame(),this.initBaseData(E,C,P),this.initTransform(E,C,P),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide()},hide:function(){if(!this.hidden&&(!this.isInRange||this.isTransparent)){var E=this.baseElement||this.layerElement;E.style.display="none",this.hidden=!0}},show:function(){if(this.isInRange&&!this.isTransparent){if(!this.data.hd){var E=this.baseElement||this.layerElement;E.style.display="block"}this.hidden=!1,this._isFirstFrame=!0}},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},renderInnerContent:function(){},prepareFrame:function(E){this._mdf=!1,this.prepareRenderableFrame(E),this.prepareProperties(E,this.isInRange),this.checkTransparency()},destroy:function(){this.innerElem=null,this.destroyBaseElement()}};extendPrototype([RenderableElement,createProxyFunction(A)],RenderableDOMElement)})();function IImageElement(A,T,E){this.assetData=T.getAssetData(A.refId),this.assetData&&this.assetData.sid&&(this.assetData=T.slotManager.getProp(this.assetData)),this.initElement(A,T,E),this.sourceRect={top:0,left:0,width:this.assetData.w,height:this.assetData.h}}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],IImageElement),IImageElement.prototype.createContent=function(){var A=this.globalData.getAssetsPath(this.assetData);this.innerElem=createNS("image"),this.innerElem.setAttribute("width",this.assetData.w+"px"),this.innerElem.setAttribute("height",this.assetData.h+"px"),this.innerElem.setAttribute("preserveAspectRatio",this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio),this.innerElem.setAttributeNS("http://www.w3.org/1999/xlink","href",A),this.layerElement.appendChild(this.innerElem)},IImageElement.prototype.sourceRectAtTime=function(){return this.sourceRect};function ProcessedElement(A,T){this.elem=A,this.pos=T}function IShapeElement(){}IShapeElement.prototype={addShapeToModifiers:function(T){var E,C=this.shapeModifiers.length;for(E=0;E<C;E+=1)this.shapeModifiers[E].addShape(T)},isShapeInAnimatedModifiers:function(T){for(var E=0,C=this.shapeModifiers.length;E<C;)if(this.shapeModifiers[E].isAnimatedWithShape(T))return!0;return!1},renderModifiers:function(){if(this.shapeModifiers.length){var T,E=this.shapes.length;for(T=0;T<E;T+=1)this.shapes[T].sh.reset();E=this.shapeModifiers.length;var C;for(T=E-1;T>=0&&(C=this.shapeModifiers[T].processShapes(this._isFirstFrame),!C);T-=1);}},searchProcessedElement:function(T){for(var E=this.processedElements,C=0,P=E.length;C<P;){if(E[C].elem===T)return E[C].pos;C+=1}return 0},addProcessedElement:function(T,E){for(var C=this.processedElements,P=C.length;P;)if(P-=1,C[P].elem===T){C[P].pos=E;return}C.push(new ProcessedElement(T,E))},prepareFrame:function(T){this.prepareRenderableFrame(T),this.prepareProperties(T,this.isInRange)}};var lineCapEnum={1:"butt",2:"round",3:"square"},lineJoinEnum={1:"miter",2:"round",3:"bevel"};function SVGShapeData(A,T,E){this.caches=[],this.styles=[],this.transformers=A,this.lStr="",this.sh=E,this.lvl=T,this._isAnimated=!!E.k;for(var C=0,P=A.length;C<P;){if(A[C].mProps.dynamicProperties.length){this._isAnimated=!0;break}C+=1}}SVGShapeData.prototype.setAsAnimated=function(){this._isAnimated=!0};function SVGStyleData(A,T){this.data=A,this.type=A.ty,this.d="",this.lvl=T,this._mdf=!1,this.closed=A.hd===!0,this.pElem=createNS("path"),this.msElem=null}SVGStyleData.prototype.reset=function(){this.d="",this._mdf=!1};function DashProperty(A,T,E,C){this.elem=A,this.frameId=-1,this.dataProps=createSizedArray(T.length),this.renderer=E,this.k=!1,this.dashStr="",this.dashArray=createTypedArray("float32",T.length?T.length-1:0),this.dashoffset=createTypedArray("float32",1),this.initDynamicPropertyContainer(C);var P,I=T.length||0,R;for(P=0;P<I;P+=1)R=PropertyFactory.getProp(A,T[P].v,0,0,this),this.k=R.k||this.k,this.dataProps[P]={n:T[P].n,p:R};this.k||this.getValue(!0),this._isAnimated=this.k}DashProperty.prototype.getValue=function(A){if(!(this.elem.globalData.frameId===this.frameId&&!A)&&(this.frameId=this.elem.globalData.frameId,this.iterateDynamicProperties(),this._mdf=this._mdf||A,this._mdf)){var T=0,E=this.dataProps.length;for(this.renderer==="svg"&&(this.dashStr=""),T=0;T<E;T+=1)this.dataProps[T].n!=="o"?this.renderer==="svg"?this.dashStr+=" "+this.dataProps[T].p.v:this.dashArray[T]=this.dataProps[T].p.v:this.dashoffset[0]=this.dataProps[T].p.v}},extendPrototype([DynamicPropertyContainer],DashProperty);function SVGStrokeStyleData(A,T,E){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(A,T.o,0,.01,this),this.w=PropertyFactory.getProp(A,T.w,0,null,this),this.d=new DashProperty(A,T.d||{},"svg",this),this.c=PropertyFactory.getProp(A,T.c,1,255,this),this.style=E,this._isAnimated=!!this._isAnimated}extendPrototype([DynamicPropertyContainer],SVGStrokeStyleData);function SVGFillStyleData(A,T,E){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.o=PropertyFactory.getProp(A,T.o,0,.01,this),this.c=PropertyFactory.getProp(A,T.c,1,255,this),this.style=E}extendPrototype([DynamicPropertyContainer],SVGFillStyleData);function SVGNoStyleData(A,T,E){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.style=E}extendPrototype([DynamicPropertyContainer],SVGNoStyleData);function GradientProperty(A,T,E){this.data=T,this.c=createTypedArray("uint8c",T.p*4);var C=T.k.k[0].s?T.k.k[0].s.length-T.p*4:T.k.k.length-T.p*4;this.o=createTypedArray("float32",C),this._cmdf=!1,this._omdf=!1,this._collapsable=this.checkCollapsable(),this._hasOpacity=C,this.initDynamicPropertyContainer(E),this.prop=PropertyFactory.getProp(A,T.k,1,null,this),this.k=this.prop.k,this.getValue(!0)}GradientProperty.prototype.comparePoints=function(A,T){for(var E=0,C=this.o.length/2,P;E<C;){if(P=Math.abs(A[E*4]-A[T*4+E*2]),P>.01)return!1;E+=1}return!0},GradientProperty.prototype.checkCollapsable=function(){if(this.o.length/2!==this.c.length/4)return!1;if(this.data.k.k[0].s)for(var A=0,T=this.data.k.k.length;A<T;){if(!this.comparePoints(this.data.k.k[A].s,this.data.p))return!1;A+=1}else if(!this.comparePoints(this.data.k.k,this.data.p))return!1;return!0},GradientProperty.prototype.getValue=function(A){if(this.prop.getValue(),this._mdf=!1,this._cmdf=!1,this._omdf=!1,this.prop._mdf||A){var T,E=this.data.p*4,C,P;for(T=0;T<E;T+=1)C=T%4===0?100:255,P=Math.round(this.prop.v[T]*C),this.c[T]!==P&&(this.c[T]=P,this._cmdf=!A);if(this.o.length)for(E=this.prop.v.length,T=this.data.p*4;T<E;T+=1)C=T%2===0?100:1,P=T%2===0?Math.round(this.prop.v[T]*100):this.prop.v[T],this.o[T-this.data.p*4]!==P&&(this.o[T-this.data.p*4]=P,this._omdf=!A);this._mdf=!A}},extendPrototype([DynamicPropertyContainer],GradientProperty);function SVGGradientFillStyleData(A,T,E){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.initGradientData(A,T,E)}SVGGradientFillStyleData.prototype.initGradientData=function(A,T,E){this.o=PropertyFactory.getProp(A,T.o,0,.01,this),this.s=PropertyFactory.getProp(A,T.s,1,null,this),this.e=PropertyFactory.getProp(A,T.e,1,null,this),this.h=PropertyFactory.getProp(A,T.h||{k:0},0,.01,this),this.a=PropertyFactory.getProp(A,T.a||{k:0},0,degToRads,this),this.g=new GradientProperty(A,T.g,this),this.style=E,this.stops=[],this.setGradientData(E.pElem,T),this.setGradientOpacity(T,E),this._isAnimated=!!this._isAnimated},SVGGradientFillStyleData.prototype.setGradientData=function(A,T){var E=createElementID(),C=createNS(T.t===1?"linearGradient":"radialGradient");C.setAttribute("id",E),C.setAttribute("spreadMethod","pad"),C.setAttribute("gradientUnits","userSpaceOnUse");var P=[],I,R,F;for(F=T.g.p*4,R=0;R<F;R+=4)I=createNS("stop"),C.appendChild(I),P.push(I);A.setAttribute(T.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+E+")"),this.gf=C,this.cst=P},SVGGradientFillStyleData.prototype.setGradientOpacity=function(A,T){if(this.g._hasOpacity&&!this.g._collapsable){var E,C,P,I=createNS("mask"),R=createNS("path");I.appendChild(R);var F=createElementID(),O=createElementID();I.setAttribute("id",O);var D=createNS(A.t===1?"linearGradient":"radialGradient");D.setAttribute("id",F),D.setAttribute("spreadMethod","pad"),D.setAttribute("gradientUnits","userSpaceOnUse"),P=A.g.k.k[0].s?A.g.k.k[0].s.length:A.g.k.k.length;var L=this.stops;for(C=A.g.p*4;C<P;C+=2)E=createNS("stop"),E.setAttribute("stop-color","rgb(255,255,255)"),D.appendChild(E),L.push(E);R.setAttribute(A.ty==="gf"?"fill":"stroke","url("+getLocationHref()+"#"+F+")"),A.ty==="gs"&&(R.setAttribute("stroke-linecap",lineCapEnum[A.lc||2]),R.setAttribute("stroke-linejoin",lineJoinEnum[A.lj||2]),A.lj===1&&R.setAttribute("stroke-miterlimit",A.ml)),this.of=D,this.ms=I,this.ost=L,this.maskId=O,T.msElem=R}},extendPrototype([DynamicPropertyContainer],SVGGradientFillStyleData);function SVGGradientStrokeStyleData(A,T,E){this.initDynamicPropertyContainer(A),this.getValue=this.iterateDynamicProperties,this.w=PropertyFactory.getProp(A,T.w,0,null,this),this.d=new DashProperty(A,T.d||{},"svg",this),this.initGradientData(A,T,E),this._isAnimated=!!this._isAnimated}extendPrototype([SVGGradientFillStyleData,DynamicPropertyContainer],SVGGradientStrokeStyleData);function ShapeGroupData(){this.it=[],this.prevViewData=[],this.gr=createNS("g")}function SVGTransformData(A,T,E){this.transform={mProps:A,op:T,container:E},this.elements=[],this._isAnimated=this.transform.mProps.dynamicProperties.length||this.transform.op.effectsSequence.length}var buildShapeString=function(T,E,C,P){if(E===0)return"";var I=T.o,R=T.i,F=T.v,O,D=" M"+P.applyToPointStringified(F[0][0],F[0][1]);for(O=1;O<E;O+=1)D+=" C"+P.applyToPointStringified(I[O-1][0],I[O-1][1])+" "+P.applyToPointStringified(R[O][0],R[O][1])+" "+P.applyToPointStringified(F[O][0],F[O][1]);return C&&E&&(D+=" C"+P.applyToPointStringified(I[O-1][0],I[O-1][1])+" "+P.applyToPointStringified(R[0][0],R[0][1])+" "+P.applyToPointStringified(F[0][0],F[0][1]),D+="z"),D},SVGElementsRenderer=function(){var A=new Matrix,T=new Matrix,E={createRenderFunction:C};function C(B){switch(B.ty){case"fl":return F;case"gf":return D;case"gs":return O;case"st":return L;case"sh":case"el":case"rc":case"sr":return R;case"tr":return P;case"no":return I;default:return null}}function P(B,V,U){(U||V.transform.op._mdf)&&V.transform.container.setAttribute("opacity",V.transform.op.v),(U||V.transform.mProps._mdf)&&V.transform.container.setAttribute("transform",V.transform.mProps.v.to2dCSS())}function I(){}function R(B,V,U){var z,W,Z,X,K,Y,Q=V.styles.length,J=V.lvl,te,ie,ne,he;for(Y=0;Y<Q;Y+=1){if(X=V.sh._mdf||U,V.styles[Y].lvl<J){for(ie=T.reset(),ne=J-V.styles[Y].lvl,he=V.transformers.length-1;!X&&ne>0;)X=V.transformers[he].mProps._mdf||X,ne-=1,he-=1;if(X)for(ne=J-V.styles[Y].lvl,he=V.transformers.length-1;ne>0;)ie.multiply(V.transformers[he].mProps.v),ne-=1,he-=1}else ie=A;if(te=V.sh.paths,W=te._length,X){for(Z="",z=0;z<W;z+=1)K=te.shapes[z],K&&K._length&&(Z+=buildShapeString(K,K._length,K.c,ie));V.caches[Y]=Z}else Z=V.caches[Y];V.styles[Y].d+=B.hd===!0?"":Z,V.styles[Y]._mdf=X||V.styles[Y]._mdf}}function F(B,V,U){var z=V.style;(V.c._mdf||U)&&z.pElem.setAttribute("fill","rgb("+bmFloor(V.c.v[0])+","+bmFloor(V.c.v[1])+","+bmFloor(V.c.v[2])+")"),(V.o._mdf||U)&&z.pElem.setAttribute("fill-opacity",V.o.v)}function O(B,V,U){D(B,V,U),L(B,V,U)}function D(B,V,U){var z=V.gf,W=V.g._hasOpacity,Z=V.s.v,X=V.e.v;if(V.o._mdf||U){var K=B.ty==="gf"?"fill-opacity":"stroke-opacity";V.style.pElem.setAttribute(K,V.o.v)}if(V.s._mdf||U){var Y=B.t===1?"x1":"cx",Q=Y==="x1"?"y1":"cy";z.setAttribute(Y,Z[0]),z.setAttribute(Q,Z[1]),W&&!V.g._collapsable&&(V.of.setAttribute(Y,Z[0]),V.of.setAttribute(Q,Z[1]))}var J,te,ie,ne;if(V.g._cmdf||U){J=V.cst;var he=V.g.c;for(ie=J.length,te=0;te<ie;te+=1)ne=J[te],ne.setAttribute("offset",he[te*4]+"%"),ne.setAttribute("stop-color","rgb("+he[te*4+1]+","+he[te*4+2]+","+he[te*4+3]+")")}if(W&&(V.g._omdf||U)){var ve=V.g.o;for(V.g._collapsable?J=V.cst:J=V.ost,ie=J.length,te=0;te<ie;te+=1)ne=J[te],V.g._collapsable||ne.setAttribute("offset",ve[te*2]+"%"),ne.setAttribute("stop-opacity",ve[te*2+1])}if(B.t===1)(V.e._mdf||U)&&(z.setAttribute("x2",X[0]),z.setAttribute("y2",X[1]),W&&!V.g._collapsable&&(V.of.setAttribute("x2",X[0]),V.of.setAttribute("y2",X[1])));else{var ye;if((V.s._mdf||V.e._mdf||U)&&(ye=Math.sqrt(Math.pow(Z[0]-X[0],2)+Math.pow(Z[1]-X[1],2)),z.setAttribute("r",ye),W&&!V.g._collapsable&&V.of.setAttribute("r",ye)),V.e._mdf||V.h._mdf||V.a._mdf||U){ye||(ye=Math.sqrt(Math.pow(Z[0]-X[0],2)+Math.pow(Z[1]-X[1],2)));var de=Math.atan2(X[1]-Z[1],X[0]-Z[0]),fe=V.h.v;fe>=1?fe=.99:fe<=-1&&(fe=-.99);var ue=ye*fe,ge=Math.cos(de+V.a.v)*ue+Z[0],ae=Math.sin(de+V.a.v)*ue+Z[1];z.setAttribute("fx",ge),z.setAttribute("fy",ae),W&&!V.g._collapsable&&(V.of.setAttribute("fx",ge),V.of.setAttribute("fy",ae))}}}function L(B,V,U){var z=V.style,W=V.d;W&&(W._mdf||U)&&W.dashStr&&(z.pElem.setAttribute("stroke-dasharray",W.dashStr),z.pElem.setAttribute("stroke-dashoffset",W.dashoffset[0])),V.c&&(V.c._mdf||U)&&z.pElem.setAttribute("stroke","rgb("+bmFloor(V.c.v[0])+","+bmFloor(V.c.v[1])+","+bmFloor(V.c.v[2])+")"),(V.o._mdf||U)&&z.pElem.setAttribute("stroke-opacity",V.o.v),(V.w._mdf||U)&&(z.pElem.setAttribute("stroke-width",V.w.v),z.msElem&&z.msElem.setAttribute("stroke-width",V.w.v))}return E}();function SVGShapeElement(A,T,E){this.shapes=[],this.shapesData=A.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.initElement(A,T,E),this.prevViewData=[]}extendPrototype([BaseElement,TransformElement,SVGBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableDOMElement],SVGShapeElement),SVGShapeElement.prototype.initSecondaryElement=function(){},SVGShapeElement.prototype.identityMatrix=new Matrix,SVGShapeElement.prototype.buildExpressionInterface=function(){},SVGShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes()},SVGShapeElement.prototype.filterUniqueShapes=function(){var A,T=this.shapes.length,E,C,P=this.stylesList.length,I,R=[],F=!1;for(C=0;C<P;C+=1){for(I=this.stylesList[C],F=!1,R.length=0,A=0;A<T;A+=1)E=this.shapes[A],E.styles.indexOf(I)!==-1&&(R.push(E),F=E._isAnimated||F);R.length>1&&F&&this.setShapesAsAnimated(R)}},SVGShapeElement.prototype.setShapesAsAnimated=function(A){var T,E=A.length;for(T=0;T<E;T+=1)A[T].setAsAnimated()},SVGShapeElement.prototype.createStyleElement=function(A,T){var E,C=new SVGStyleData(A,T),P=C.pElem;if(A.ty==="st")E=new SVGStrokeStyleData(this,A,C);else if(A.ty==="fl")E=new SVGFillStyleData(this,A,C);else if(A.ty==="gf"||A.ty==="gs"){var I=A.ty==="gf"?SVGGradientFillStyleData:SVGGradientStrokeStyleData;E=new I(this,A,C),this.globalData.defs.appendChild(E.gf),E.maskId&&(this.globalData.defs.appendChild(E.ms),this.globalData.defs.appendChild(E.of),P.setAttribute("mask","url("+getLocationHref()+"#"+E.maskId+")"))}else A.ty==="no"&&(E=new SVGNoStyleData(this,A,C));return(A.ty==="st"||A.ty==="gs")&&(P.setAttribute("stroke-linecap",lineCapEnum[A.lc||2]),P.setAttribute("stroke-linejoin",lineJoinEnum[A.lj||2]),P.setAttribute("fill-opacity","0"),A.lj===1&&P.setAttribute("stroke-miterlimit",A.ml)),A.r===2&&P.setAttribute("fill-rule","evenodd"),A.ln&&P.setAttribute("id",A.ln),A.cl&&P.setAttribute("class",A.cl),A.bm&&(P.style["mix-blend-mode"]=getBlendMode(A.bm)),this.stylesList.push(C),this.addToAnimatedContents(A,E),E},SVGShapeElement.prototype.createGroupElement=function(A){var T=new ShapeGroupData;return A.ln&&T.gr.setAttribute("id",A.ln),A.cl&&T.gr.setAttribute("class",A.cl),A.bm&&(T.gr.style["mix-blend-mode"]=getBlendMode(A.bm)),T},SVGShapeElement.prototype.createTransformElement=function(A,T){var E=TransformPropertyFactory.getTransformProperty(this,A,this),C=new SVGTransformData(E,E.o,T);return this.addToAnimatedContents(A,C),C},SVGShapeElement.prototype.createShapeElement=function(A,T,E){var C=4;A.ty==="rc"?C=5:A.ty==="el"?C=6:A.ty==="sr"&&(C=7);var P=ShapePropertyFactory.getShapeProp(this,A,C,this),I=new SVGShapeData(T,E,P);return this.shapes.push(I),this.addShapeToModifiers(I),this.addToAnimatedContents(A,I),I},SVGShapeElement.prototype.addToAnimatedContents=function(A,T){for(var E=0,C=this.animatedContents.length;E<C;){if(this.animatedContents[E].element===T)return;E+=1}this.animatedContents.push({fn:SVGElementsRenderer.createRenderFunction(A),element:T,data:A})},SVGShapeElement.prototype.setElementStyles=function(A){var T=A.styles,E,C=this.stylesList.length;for(E=0;E<C;E+=1)this.stylesList[E].closed||T.push(this.stylesList[E])},SVGShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var A,T=this.itemsData.length;for(A=0;A<T;A+=1)this.prevViewData[A]=this.itemsData[A];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.layerElement,0,[],!0),this.filterUniqueShapes(),T=this.dynamicProperties.length,A=0;A<T;A+=1)this.dynamicProperties[A].getValue();this.renderModifiers()},SVGShapeElement.prototype.searchShapes=function(A,T,E,C,P,I,R){var F=[].concat(I),O,D=A.length-1,L,B,V=[],U=[],z,W,Z;for(O=D;O>=0;O-=1){if(Z=this.searchProcessedElement(A[O]),Z?T[O]=E[Z-1]:A[O]._render=R,A[O].ty==="fl"||A[O].ty==="st"||A[O].ty==="gf"||A[O].ty==="gs"||A[O].ty==="no")Z?T[O].style.closed=!1:T[O]=this.createStyleElement(A[O],P),A[O]._render&&T[O].style.pElem.parentNode!==C&&C.appendChild(T[O].style.pElem),V.push(T[O].style);else if(A[O].ty==="gr"){if(!Z)T[O]=this.createGroupElement(A[O]);else for(B=T[O].it.length,L=0;L<B;L+=1)T[O].prevViewData[L]=T[O].it[L];this.searchShapes(A[O].it,T[O].it,T[O].prevViewData,T[O].gr,P+1,F,R),A[O]._render&&T[O].gr.parentNode!==C&&C.appendChild(T[O].gr)}else A[O].ty==="tr"?(Z||(T[O]=this.createTransformElement(A[O],C)),z=T[O].transform,F.push(z)):A[O].ty==="sh"||A[O].ty==="rc"||A[O].ty==="el"||A[O].ty==="sr"?(Z||(T[O]=this.createShapeElement(A[O],F,P)),this.setElementStyles(T[O])):A[O].ty==="tm"||A[O].ty==="rd"||A[O].ty==="ms"||A[O].ty==="pb"||A[O].ty==="zz"||A[O].ty==="op"?(Z?(W=T[O],W.closed=!1):(W=ShapeModifiers.getModifier(A[O].ty),W.init(this,A[O]),T[O]=W,this.shapeModifiers.push(W)),U.push(W)):A[O].ty==="rp"&&(Z?(W=T[O],W.closed=!0):(W=ShapeModifiers.getModifier(A[O].ty),T[O]=W,W.init(this,A,O,T),this.shapeModifiers.push(W),R=!1),U.push(W));this.addProcessedElement(A[O],O+1)}for(D=V.length,O=0;O<D;O+=1)V[O].closed=!0;for(D=U.length,O=0;O<D;O+=1)U[O].closed=!0},SVGShapeElement.prototype.renderInnerContent=function(){this.renderModifiers();var A,T=this.stylesList.length;for(A=0;A<T;A+=1)this.stylesList[A].reset();for(this.renderShape(),A=0;A<T;A+=1)(this.stylesList[A]._mdf||this._isFirstFrame)&&(this.stylesList[A].msElem&&(this.stylesList[A].msElem.setAttribute("d",this.stylesList[A].d),this.stylesList[A].d="M0 0"+this.stylesList[A].d),this.stylesList[A].pElem.setAttribute("d",this.stylesList[A].d||"M0 0"))},SVGShapeElement.prototype.renderShape=function(){var A,T=this.animatedContents.length,E;for(A=0;A<T;A+=1)E=this.animatedContents[A],(this._isFirstFrame||E.element._isAnimated)&&E.data!==!0&&E.fn(E.data,E.element,this._isFirstFrame)},SVGShapeElement.prototype.destroy=function(){this.destroyBaseElement(),this.shapesData=null,this.itemsData=null};function LetterProps(A,T,E,C,P,I){this.o=A,this.sw=T,this.sc=E,this.fc=C,this.m=P,this.p=I,this._mdf={o:!0,sw:!!T,sc:!!E,fc:!!C,m:!0,p:!0}}LetterProps.prototype.update=function(A,T,E,C,P,I){this._mdf.o=!1,this._mdf.sw=!1,this._mdf.sc=!1,this._mdf.fc=!1,this._mdf.m=!1,this._mdf.p=!1;var R=!1;return this.o!==A&&(this.o=A,this._mdf.o=!0,R=!0),this.sw!==T&&(this.sw=T,this._mdf.sw=!0,R=!0),this.sc!==E&&(this.sc=E,this._mdf.sc=!0,R=!0),this.fc!==C&&(this.fc=C,this._mdf.fc=!0,R=!0),this.m!==P&&(this.m=P,this._mdf.m=!0,R=!0),I.length&&(this.p[0]!==I[0]||this.p[1]!==I[1]||this.p[4]!==I[4]||this.p[5]!==I[5]||this.p[12]!==I[12]||this.p[13]!==I[13])&&(this.p=I,this._mdf.p=!0,R=!0),R};function TextProperty(A,T){this._frameId=initialDefaultFrame,this.pv="",this.v="",this.kf=!1,this._isFirstFrame=!0,this._mdf=!1,T.d&&T.d.sid&&(T.d=A.globalData.slotManager.getProp(T.d)),this.data=T,this.elem=A,this.comp=this.elem.comp,this.keysIndex=0,this.canResize=!1,this.minimumFontSize=1,this.effectsSequence=[],this.currentData={ascent:0,boxWidth:this.defaultBoxWidth,f:"",fStyle:"",fWeight:"",fc:"",j:"",justifyOffset:"",l:[],lh:0,lineWidths:[],ls:"",of:"",s:"",sc:"",sw:0,t:0,tr:0,sz:0,ps:null,fillColorAnim:!1,strokeColorAnim:!1,strokeWidthAnim:!1,yOffset:0,finalSize:0,finalText:[],finalLineHeight:0,__complete:!1},this.copyData(this.currentData,this.data.d.k[0].s),this.searchProperty()||this.completeTextData(this.currentData)}TextProperty.prototype.defaultBoxWidth=[0,0],TextProperty.prototype.copyData=function(A,T){for(var E in T)Object.prototype.hasOwnProperty.call(T,E)&&(A[E]=T[E]);return A},TextProperty.prototype.setCurrentData=function(A){A.__complete||this.completeTextData(A),this.currentData=A,this.currentData.boxWidth=this.currentData.boxWidth||this.defaultBoxWidth,this._mdf=!0},TextProperty.prototype.searchProperty=function(){return this.searchKeyframes()},TextProperty.prototype.searchKeyframes=function(){return this.kf=this.data.d.k.length>1,this.kf&&this.addEffect(this.getKeyframeValue.bind(this)),this.kf},TextProperty.prototype.addEffect=function(A){this.effectsSequence.push(A),this.elem.addDynamicProperty(this)},TextProperty.prototype.getValue=function(A){if(!((this.elem.globalData.frameId===this.frameId||!this.effectsSequence.length)&&!A)){this.currentData.t=this.data.d.k[this.keysIndex].s.t;var T=this.currentData,E=this.keysIndex;if(this.lock){this.setCurrentData(this.currentData);return}this.lock=!0,this._mdf=!1;var C,P=this.effectsSequence.length,I=A||this.data.d.k[this.keysIndex].s;for(C=0;C<P;C+=1)E!==this.keysIndex?I=this.effectsSequence[C](I,I.t):I=this.effectsSequence[C](this.currentData,I.t);T!==I&&this.setCurrentData(I),this.v=this.currentData,this.pv=this.v,this.lock=!1,this.frameId=this.elem.globalData.frameId}},TextProperty.prototype.getKeyframeValue=function(){for(var A=this.data.d.k,T=this.elem.comp.renderedFrame,E=0,C=A.length;E<=C-1&&!(E===C-1||A[E+1].t>T);)E+=1;return this.keysIndex!==E&&(this.keysIndex=E),this.data.d.k[this.keysIndex].s},TextProperty.prototype.buildFinalText=function(A){for(var T=[],E=0,C=A.length,P,I,R=!1,F=!1,O="";E<C;)R=F,F=!1,P=A.charCodeAt(E),O=A.charAt(E),FontManager.isCombinedCharacter(P)?R=!0:P>=55296&&P<=56319?FontManager.isRegionalFlag(A,E)?O=A.substr(E,14):(I=A.charCodeAt(E+1),I>=56320&&I<=57343&&(FontManager.isModifier(P,I)?(O=A.substr(E,2),R=!0):FontManager.isFlagEmoji(A.substr(E,4))?O=A.substr(E,4):O=A.substr(E,2))):P>56319?(I=A.charCodeAt(E+1),FontManager.isVariationSelector(P)&&(R=!0)):FontManager.isZeroWidthJoiner(P)&&(R=!0,F=!0),R?(T[T.length-1]+=O,R=!1):T.push(O),E+=O.length;return T},TextProperty.prototype.completeTextData=function(A){A.__complete=!0;var T=this.elem.globalData.fontManager,E=this.data,C=[],P,I,R,F=0,O,D=E.m.g,L=0,B=0,V=0,U=[],z=0,W=0,Z,X,K=T.getFontByName(A.f),Y,Q=0,J=getFontProperties(K);A.fWeight=J.weight,A.fStyle=J.style,A.finalSize=A.s,A.finalText=this.buildFinalText(A.t),I=A.finalText.length,A.finalLineHeight=A.lh;var te=A.tr/1e3*A.finalSize,ie;if(A.sz)for(var ne=!0,he=A.sz[0],ve=A.sz[1],ye,de;ne;){de=this.buildFinalText(A.t),ye=0,z=0,I=de.length,te=A.tr/1e3*A.finalSize;var fe=-1;for(P=0;P<I;P+=1)ie=de[P].charCodeAt(0),R=!1,de[P]===" "?fe=P:(ie===13||ie===3)&&(z=0,R=!0,ye+=A.finalLineHeight||A.finalSize*1.2),T.chars?(Y=T.getCharData(de[P],K.fStyle,K.fFamily),Q=R?0:Y.w*A.finalSize/100):Q=T.measureText(de[P],A.f,A.finalSize),z+Q>he&&de[P]!==" "?(fe===-1?I+=1:P=fe,ye+=A.finalLineHeight||A.finalSize*1.2,de.splice(P,fe===P?1:0,"\r"),fe=-1,z=0):(z+=Q,z+=te);ye+=K.ascent*A.finalSize/100,this.canResize&&A.finalSize>this.minimumFontSize&&ve<ye?(A.finalSize-=1,A.finalLineHeight=A.finalSize*A.lh/A.s):(A.finalText=de,I=A.finalText.length,ne=!1)}z=-te,Q=0;var ue=0,ge;for(P=0;P<I;P+=1)if(R=!1,ge=A.finalText[P],ie=ge.charCodeAt(0),ie===13||ie===3?(ue=0,U.push(z),W=z>W?z:W,z=-2*te,O="",R=!0,V+=1):O=ge,T.chars?(Y=T.getCharData(ge,K.fStyle,T.getFontByName(A.f).fFamily),Q=R?0:Y.w*A.finalSize/100):Q=T.measureText(O,A.f,A.finalSize),ge===" "?ue+=Q+te:(z+=Q+te+ue,ue=0),C.push({l:Q,an:Q,add:L,n:R,anIndexes:[],val:O,line:V,animatorJustifyOffset:0}),D==2){if(L+=Q,O===""||O===" "||P===I-1){for((O===""||O===" ")&&(L-=Q);B<=P;)C[B].an=L,C[B].ind=F,C[B].extra=Q,B+=1;F+=1,L=0}}else if(D==3){if(L+=Q,O===""||P===I-1){for(O===""&&(L-=Q);B<=P;)C[B].an=L,C[B].ind=F,C[B].extra=Q,B+=1;L=0,F+=1}}else C[F].ind=F,C[F].extra=0,F+=1;if(A.l=C,W=z>W?z:W,U.push(z),A.sz)A.boxWidth=A.sz[0],A.justifyOffset=0;else switch(A.boxWidth=W,A.j){case 1:A.justifyOffset=-A.boxWidth;break;case 2:A.justifyOffset=-A.boxWidth/2;break;default:A.justifyOffset=0}A.lineWidths=U;var ae=E.a,ce,se;X=ae.length;var le,_e,me=[];for(Z=0;Z<X;Z+=1){for(ce=ae[Z],ce.a.sc&&(A.strokeColorAnim=!0),ce.a.sw&&(A.strokeWidthAnim=!0),(ce.a.fc||ce.a.fh||ce.a.fs||ce.a.fb)&&(A.fillColorAnim=!0),_e=0,le=ce.s.b,P=0;P<I;P+=1)se=C[P],se.anIndexes[Z]=_e,(le==1&&se.val!==""||le==2&&se.val!==""&&se.val!==" "||le==3&&(se.n||se.val==" "||P==I-1)||le==4&&(se.n||P==I-1))&&(ce.s.rn===1&&me.push(_e),_e+=1);E.a[Z].s.totalChars=_e;var Ee=-1,Pe;if(ce.s.rn===1)for(P=0;P<I;P+=1)se=C[P],Ee!=se.anIndexes[Z]&&(Ee=se.anIndexes[Z],Pe=me.splice(Math.floor(Math.random()*me.length),1)[0]),se.anIndexes[Z]=Pe}A.yOffset=A.finalLineHeight||A.finalSize*1.2,A.ls=A.ls||0,A.ascent=K.ascent*A.finalSize/100},TextProperty.prototype.updateDocumentData=function(A,T){T=T===void 0?this.keysIndex:T;var E=this.copyData({},this.data.d.k[T].s);E=this.copyData(E,A),this.data.d.k[T].s=E,this.recalculate(T),this.setCurrentData(E),this.elem.addDynamicProperty(this)},TextProperty.prototype.recalculate=function(A){var T=this.data.d.k[A].s;T.__complete=!1,this.keysIndex=0,this._isFirstFrame=!0,this.getValue(T)},TextProperty.prototype.canResizeFont=function(A){this.canResize=A,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)},TextProperty.prototype.setMinimumFontSize=function(A){this.minimumFontSize=Math.floor(A)||1,this.recalculate(this.keysIndex),this.elem.addDynamicProperty(this)};var TextSelectorProp=function(){var A=Math.max,T=Math.min,E=Math.floor;function C(I,R){this._currentTextLength=-1,this.k=!1,this.data=R,this.elem=I,this.comp=I.comp,this.finalS=0,this.finalE=0,this.initDynamicPropertyContainer(I),this.s=PropertyFactory.getProp(I,R.s||{k:0},0,0,this),"e"in R?this.e=PropertyFactory.getProp(I,R.e,0,0,this):this.e={v:100},this.o=PropertyFactory.getProp(I,R.o||{k:0},0,0,this),this.xe=PropertyFactory.getProp(I,R.xe||{k:0},0,0,this),this.ne=PropertyFactory.getProp(I,R.ne||{k:0},0,0,this),this.sm=PropertyFactory.getProp(I,R.sm||{k:100},0,0,this),this.a=PropertyFactory.getProp(I,R.a,0,.01,this),this.dynamicProperties.length||this.getValue()}C.prototype={getMult:function(R){this._currentTextLength!==this.elem.textProperty.currentData.l.length&&this.getValue();var F=0,O=0,D=1,L=1;this.ne.v>0?F=this.ne.v/100:O=-this.ne.v/100,this.xe.v>0?D=1-this.xe.v/100:L=1+this.xe.v/100;var B=BezierFactory.getBezierEasing(F,O,D,L).get,V=0,U=this.finalS,z=this.finalE,W=this.data.sh;if(W===2)z===U?V=R>=z?1:0:V=A(0,T(.5/(z-U)+(R-U)/(z-U),1)),V=B(V);else if(W===3)z===U?V=R>=z?0:1:V=1-A(0,T(.5/(z-U)+(R-U)/(z-U),1)),V=B(V);else if(W===4)z===U?V=0:(V=A(0,T(.5/(z-U)+(R-U)/(z-U),1)),V<.5?V*=2:V=1-2*(V-.5)),V=B(V);else if(W===5){if(z===U)V=0;else{var Z=z-U;R=T(A(0,R+.5-U),z-U);var X=-Z/2+R,K=Z/2;V=Math.sqrt(1-X*X/(K*K))}V=B(V)}else W===6?(z===U?V=0:(R=T(A(0,R+.5-U),z-U),V=(1+Math.cos(Math.PI+Math.PI*2*R/(z-U)))/2),V=B(V)):(R>=E(U)&&(R-U<0?V=A(0,T(T(z,1)-(U-R),1)):V=A(0,T(z-R,1))),V=B(V));if(this.sm.v!==100){var Y=this.sm.v*.01;Y===0&&(Y=1e-8);var Q=.5-Y*.5;V<Q?V=0:(V=(V-Q)/Y,V>1&&(V=1))}return V*this.a.v},getValue:function(R){this.iterateDynamicProperties(),this._mdf=R||this._mdf,this._currentTextLength=this.elem.textProperty.currentData.l.length||0,R&&this.data.r===2&&(this.e.v=this._currentTextLength);var F=this.data.r===2?1:100/this.data.totalChars,O=this.o.v/F,D=this.s.v/F+O,L=this.e.v/F+O;if(D>L){var B=D;D=L,L=B}this.finalS=D,this.finalE=L}},extendPrototype([DynamicPropertyContainer],C);function P(I,R,F){return new C(I,R)}return{getTextSelectorProp:P}}();function TextAnimatorDataProperty(A,T,E){var C={propType:!1},P=PropertyFactory.getProp,I=T.a;this.a={r:I.r?P(A,I.r,0,degToRads,E):C,rx:I.rx?P(A,I.rx,0,degToRads,E):C,ry:I.ry?P(A,I.ry,0,degToRads,E):C,sk:I.sk?P(A,I.sk,0,degToRads,E):C,sa:I.sa?P(A,I.sa,0,degToRads,E):C,s:I.s?P(A,I.s,1,.01,E):C,a:I.a?P(A,I.a,1,0,E):C,o:I.o?P(A,I.o,0,.01,E):C,p:I.p?P(A,I.p,1,0,E):C,sw:I.sw?P(A,I.sw,0,0,E):C,sc:I.sc?P(A,I.sc,1,0,E):C,fc:I.fc?P(A,I.fc,1,0,E):C,fh:I.fh?P(A,I.fh,0,0,E):C,fs:I.fs?P(A,I.fs,0,.01,E):C,fb:I.fb?P(A,I.fb,0,.01,E):C,t:I.t?P(A,I.t,0,0,E):C},this.s=TextSelectorProp.getTextSelectorProp(A,T.s,E),this.s.t=T.s.t}function TextAnimatorProperty(A,T,E){this._isFirstFrame=!0,this._hasMaskedPath=!1,this._frameId=-1,this._textData=A,this._renderType=T,this._elem=E,this._animatorsData=createSizedArray(this._textData.a.length),this._pathData={},this._moreOptions={alignment:{}},this.renderedLetters=[],this.lettersChangedFlag=!1,this.initDynamicPropertyContainer(E)}TextAnimatorProperty.prototype.searchProperties=function(){var A,T=this._textData.a.length,E,C=PropertyFactory.getProp;for(A=0;A<T;A+=1)E=this._textData.a[A],this._animatorsData[A]=new TextAnimatorDataProperty(this._elem,E,this);this._textData.p&&"m"in this._textData.p?(this._pathData={a:C(this._elem,this._textData.p.a,0,0,this),f:C(this._elem,this._textData.p.f,0,0,this),l:C(this._elem,this._textData.p.l,0,0,this),r:C(this._elem,this._textData.p.r,0,0,this),p:C(this._elem,this._textData.p.p,0,0,this),m:this._elem.maskManager.getMaskProperty(this._textData.p.m)},this._hasMaskedPath=!0):this._hasMaskedPath=!1,this._moreOptions.alignment=C(this._elem,this._textData.m.a,1,0,this)},TextAnimatorProperty.prototype.getMeasures=function(A,T){if(this.lettersChangedFlag=T,!(!this._mdf&&!this._isFirstFrame&&!T&&(!this._hasMaskedPath||!this._pathData.m._mdf))){this._isFirstFrame=!1;var E=this._moreOptions.alignment.v,C=this._animatorsData,P=this._textData,I=this.mHelper,R=this._renderType,F=this.renderedLetters.length,O,D,L,B,V=A.l,U,z,W,Z,X,K,Y,Q,J,te,ie,ne,he,ve,ye;if(this._hasMaskedPath){if(ye=this._pathData.m,!this._pathData.n||this._pathData._mdf){var de=ye.v;this._pathData.r.v&&(de=de.reverse()),U={tLength:0,segments:[]},B=de._length-1;var fe;for(ne=0,L=0;L<B;L+=1)fe=bez.buildBezierData(de.v[L],de.v[L+1],[de.o[L][0]-de.v[L][0],de.o[L][1]-de.v[L][1]],[de.i[L+1][0]-de.v[L+1][0],de.i[L+1][1]-de.v[L+1][1]]),U.tLength+=fe.segmentLength,U.segments.push(fe),ne+=fe.segmentLength;L=B,ye.v.c&&(fe=bez.buildBezierData(de.v[L],de.v[0],[de.o[L][0]-de.v[L][0],de.o[L][1]-de.v[L][1]],[de.i[0][0]-de.v[0][0],de.i[0][1]-de.v[0][1]]),U.tLength+=fe.segmentLength,U.segments.push(fe),ne+=fe.segmentLength),this._pathData.pi=U}if(U=this._pathData.pi,z=this._pathData.f.v,Y=0,K=1,Z=0,X=!0,te=U.segments,z<0&&ye.v.c)for(U.tLength<Math.abs(z)&&(z=-Math.abs(z)%U.tLength),Y=te.length-1,J=te[Y].points,K=J.length-1;z<0;)z+=J[K].partialLength,K-=1,K<0&&(Y-=1,J=te[Y].points,K=J.length-1);J=te[Y].points,Q=J[K-1],W=J[K],ie=W.partialLength}B=V.length,O=0,D=0;var ue=A.finalSize*1.2*.714,ge=!0,ae,ce,se,le,_e;le=C.length;var me,Ee=-1,Pe,Ce,ke,Be=z,Me=Y,Oe=K,Je=-1,et,qe,De,Ue,Re,Ne,Ge,We,je="",Ye=this.defaultPropsArray,Fe;if(A.j===2||A.j===1){var He=0,nt=0,ot=A.j===2?-.5:-1,pt=0,dt=!0;for(L=0;L<B;L+=1)if(V[L].n){for(He&&(He+=nt);pt<L;)V[pt].animatorJustifyOffset=He,pt+=1;He=0,dt=!0}else{for(se=0;se<le;se+=1)ae=C[se].a,ae.t.propType&&(dt&&A.j===2&&(nt+=ae.t.v*ot),ce=C[se].s,me=ce.getMult(V[L].anIndexes[se],P.a[se].s.totalChars),me.length?He+=ae.t.v*me[0]*ot:He+=ae.t.v*me*ot);dt=!1}for(He&&(He+=nt);pt<L;)V[pt].animatorJustifyOffset=He,pt+=1}for(L=0;L<B;L+=1){if(I.reset(),et=1,V[L].n)O=0,D+=A.yOffset,D+=ge?1:0,z=Be,ge=!1,this._hasMaskedPath&&(Y=Me,K=Oe,J=te[Y].points,Q=J[K-1],W=J[K],ie=W.partialLength,Z=0),je="",We="",Ne="",Fe="",Ye=this.defaultPropsArray;else{if(this._hasMaskedPath){if(Je!==V[L].line){switch(A.j){case 1:z+=ne-A.lineWidths[V[L].line];break;case 2:z+=(ne-A.lineWidths[V[L].line])/2;break}Je=V[L].line}Ee!==V[L].ind&&(V[Ee]&&(z+=V[Ee].extra),z+=V[L].an/2,Ee=V[L].ind),z+=E[0]*V[L].an*.005;var yt=0;for(se=0;se<le;se+=1)ae=C[se].a,ae.p.propType&&(ce=C[se].s,me=ce.getMult(V[L].anIndexes[se],P.a[se].s.totalChars),me.length?yt+=ae.p.v[0]*me[0]:yt+=ae.p.v[0]*me),ae.a.propType&&(ce=C[se].s,me=ce.getMult(V[L].anIndexes[se],P.a[se].s.totalChars),me.length?yt+=ae.a.v[0]*me[0]:yt+=ae.a.v[0]*me);for(X=!0,this._pathData.a.v&&(z=V[0].an*.5+(ne-this._pathData.f.v-V[0].an*.5-V[V.length-1].an*.5)*Ee/(B-1),z+=this._pathData.f.v);X;)Z+ie>=z+yt||!J?(he=(z+yt-Z)/W.partialLength,Ce=Q.point[0]+(W.point[0]-Q.point[0])*he,ke=Q.point[1]+(W.point[1]-Q.point[1])*he,I.translate(-E[0]*V[L].an*.005,-(E[1]*ue)*.01),X=!1):J&&(Z+=W.partialLength,K+=1,K>=J.length&&(K=0,Y+=1,te[Y]?J=te[Y].points:ye.v.c?(K=0,Y=0,J=te[Y].points):(Z-=W.partialLength,J=null)),J&&(Q=W,W=J[K],ie=W.partialLength));Pe=V[L].an/2-V[L].add,I.translate(-Pe,0,0)}else Pe=V[L].an/2-V[L].add,I.translate(-Pe,0,0),I.translate(-E[0]*V[L].an*.005,-E[1]*ue*.01,0);for(se=0;se<le;se+=1)ae=C[se].a,ae.t.propType&&(ce=C[se].s,me=ce.getMult(V[L].anIndexes[se],P.a[se].s.totalChars),(O!==0||A.j!==0)&&(this._hasMaskedPath?me.length?z+=ae.t.v*me[0]:z+=ae.t.v*me:me.length?O+=ae.t.v*me[0]:O+=ae.t.v*me));for(A.strokeWidthAnim&&(De=A.sw||0),A.strokeColorAnim&&(A.sc?qe=[A.sc[0],A.sc[1],A.sc[2]]:qe=[0,0,0]),A.fillColorAnim&&A.fc&&(Ue=[A.fc[0],A.fc[1],A.fc[2]]),se=0;se<le;se+=1)ae=C[se].a,ae.a.propType&&(ce=C[se].s,me=ce.getMult(V[L].anIndexes[se],P.a[se].s.totalChars),me.length?I.translate(-ae.a.v[0]*me[0],-ae.a.v[1]*me[1],ae.a.v[2]*me[2]):I.translate(-ae.a.v[0]*me,-ae.a.v[1]*me,ae.a.v[2]*me));for(se=0;se<le;se+=1)ae=C[se].a,ae.s.propType&&(ce=C[se].s,me=ce.getMult(V[L].anIndexes[se],P.a[se].s.totalChars),me.length?I.scale(1+(ae.s.v[0]-1)*me[0],1+(ae.s.v[1]-1)*me[1],1):I.scale(1+(ae.s.v[0]-1)*me,1+(ae.s.v[1]-1)*me,1));for(se=0;se<le;se+=1){if(ae=C[se].a,ce=C[se].s,me=ce.getMult(V[L].anIndexes[se],P.a[se].s.totalChars),ae.sk.propType&&(me.length?I.skewFromAxis(-ae.sk.v*me[0],ae.sa.v*me[1]):I.skewFromAxis(-ae.sk.v*me,ae.sa.v*me)),ae.r.propType&&(me.length?I.rotateZ(-ae.r.v*me[2]):I.rotateZ(-ae.r.v*me)),ae.ry.propType&&(me.length?I.rotateY(ae.ry.v*me[1]):I.rotateY(ae.ry.v*me)),ae.rx.propType&&(me.length?I.rotateX(ae.rx.v*me[0]):I.rotateX(ae.rx.v*me)),ae.o.propType&&(me.length?et+=(ae.o.v*me[0]-et)*me[0]:et+=(ae.o.v*me-et)*me),A.strokeWidthAnim&&ae.sw.propType&&(me.length?De+=ae.sw.v*me[0]:De+=ae.sw.v*me),A.strokeColorAnim&&ae.sc.propType)for(Re=0;Re<3;Re+=1)me.length?qe[Re]+=(ae.sc.v[Re]-qe[Re])*me[0]:qe[Re]+=(ae.sc.v[Re]-qe[Re])*me;if(A.fillColorAnim&&A.fc){if(ae.fc.propType)for(Re=0;Re<3;Re+=1)me.length?Ue[Re]+=(ae.fc.v[Re]-Ue[Re])*me[0]:Ue[Re]+=(ae.fc.v[Re]-Ue[Re])*me;ae.fh.propType&&(me.length?Ue=addHueToRGB(Ue,ae.fh.v*me[0]):Ue=addHueToRGB(Ue,ae.fh.v*me)),ae.fs.propType&&(me.length?Ue=addSaturationToRGB(Ue,ae.fs.v*me[0]):Ue=addSaturationToRGB(Ue,ae.fs.v*me)),ae.fb.propType&&(me.length?Ue=addBrightnessToRGB(Ue,ae.fb.v*me[0]):Ue=addBrightnessToRGB(Ue,ae.fb.v*me))}}for(se=0;se<le;se+=1)ae=C[se].a,ae.p.propType&&(ce=C[se].s,me=ce.getMult(V[L].anIndexes[se],P.a[se].s.totalChars),this._hasMaskedPath?me.length?I.translate(0,ae.p.v[1]*me[0],-ae.p.v[2]*me[1]):I.translate(0,ae.p.v[1]*me,-ae.p.v[2]*me):me.length?I.translate(ae.p.v[0]*me[0],ae.p.v[1]*me[1],-ae.p.v[2]*me[2]):I.translate(ae.p.v[0]*me,ae.p.v[1]*me,-ae.p.v[2]*me));if(A.strokeWidthAnim&&(Ne=De<0?0:De),A.strokeColorAnim&&(Ge="rgb("+Math.round(qe[0]*255)+","+Math.round(qe[1]*255)+","+Math.round(qe[2]*255)+")"),A.fillColorAnim&&A.fc&&(We="rgb("+Math.round(Ue[0]*255)+","+Math.round(Ue[1]*255)+","+Math.round(Ue[2]*255)+")"),this._hasMaskedPath){if(I.translate(0,-A.ls),I.translate(0,E[1]*ue*.01+D,0),this._pathData.p.v){ve=(W.point[1]-Q.point[1])/(W.point[0]-Q.point[0]);var Rt=Math.atan(ve)*180/Math.PI;W.point[0]<Q.point[0]&&(Rt+=180),I.rotate(-Rt*Math.PI/180)}I.translate(Ce,ke,0),z-=E[0]*V[L].an*.005,V[L+1]&&Ee!==V[L+1].ind&&(z+=V[L].an/2,z+=A.tr*.001*A.finalSize)}else{switch(I.translate(O,D,0),A.ps&&I.translate(A.ps[0],A.ps[1]+A.ascent,0),A.j){case 1:I.translate(V[L].animatorJustifyOffset+A.justifyOffset+(A.boxWidth-A.lineWidths[V[L].line]),0,0);break;case 2:I.translate(V[L].animatorJustifyOffset+A.justifyOffset+(A.boxWidth-A.lineWidths[V[L].line])/2,0,0);break}I.translate(0,-A.ls),I.translate(Pe,0,0),I.translate(E[0]*V[L].an*.005,E[1]*ue*.01,0),O+=V[L].l+A.tr*.001*A.finalSize}R==="html"?je=I.toCSS():R==="svg"?je=I.to2dCSS():Ye=[I.props[0],I.props[1],I.props[2],I.props[3],I.props[4],I.props[5],I.props[6],I.props[7],I.props[8],I.props[9],I.props[10],I.props[11],I.props[12],I.props[13],I.props[14],I.props[15]],Fe=et}F<=L?(_e=new LetterProps(Fe,Ne,Ge,We,je,Ye),this.renderedLetters.push(_e),F+=1,this.lettersChangedFlag=!0):(_e=this.renderedLetters[L],this.lettersChangedFlag=_e.update(Fe,Ne,Ge,We,je,Ye)||this.lettersChangedFlag)}}},TextAnimatorProperty.prototype.getValue=function(){this._elem.globalData.frameId!==this._frameId&&(this._frameId=this._elem.globalData.frameId,this.iterateDynamicProperties())},TextAnimatorProperty.prototype.mHelper=new Matrix,TextAnimatorProperty.prototype.defaultPropsArray=[],extendPrototype([DynamicPropertyContainer],TextAnimatorProperty);function ITextElement(){}ITextElement.prototype.initElement=function(A,T,E){this.lettersChangedFlag=!0,this.initFrame(),this.initBaseData(A,T,E),this.textProperty=new TextProperty(this,A.t,this.dynamicProperties),this.textAnimator=new TextAnimatorProperty(A.t,this.renderType,this),this.initTransform(A,T,E),this.initHierarchy(),this.initRenderable(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),this.createContent(),this.hide(),this.textAnimator.searchProperties(this.dynamicProperties)},ITextElement.prototype.prepareFrame=function(A){this._mdf=!1,this.prepareRenderableFrame(A),this.prepareProperties(A,this.isInRange)},ITextElement.prototype.createPathShape=function(A,T){var E,C=T.length,P,I="";for(E=0;E<C;E+=1)T[E].ty==="sh"&&(P=T[E].ks.k,I+=buildShapeString(P,P.i.length,!0,A));return I},ITextElement.prototype.updateDocumentData=function(A,T){this.textProperty.updateDocumentData(A,T)},ITextElement.prototype.canResizeFont=function(A){this.textProperty.canResizeFont(A)},ITextElement.prototype.setMinimumFontSize=function(A){this.textProperty.setMinimumFontSize(A)},ITextElement.prototype.applyTextPropertiesToMatrix=function(A,T,E,C,P){switch(A.ps&&T.translate(A.ps[0],A.ps[1]+A.ascent,0),T.translate(0,-A.ls,0),A.j){case 1:T.translate(A.justifyOffset+(A.boxWidth-A.lineWidths[E]),0,0);break;case 2:T.translate(A.justifyOffset+(A.boxWidth-A.lineWidths[E])/2,0,0);break}T.translate(C,P,0)},ITextElement.prototype.buildColor=function(A){return"rgb("+Math.round(A[0]*255)+","+Math.round(A[1]*255)+","+Math.round(A[2]*255)+")"},ITextElement.prototype.emptyProp=new LetterProps,ITextElement.prototype.destroy=function(){},ITextElement.prototype.validateText=function(){(this.textProperty._mdf||this.textProperty._isFirstFrame)&&(this.buildNewText(),this.textProperty._isFirstFrame=!1,this.textProperty._mdf=!1)};var emptyShapeData={shapes:[]};function SVGTextLottieElement(A,T,E){this.textSpans=[],this.renderType="svg",this.initElement(A,T,E)}extendPrototype([BaseElement,TransformElement,SVGBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],SVGTextLottieElement),SVGTextLottieElement.prototype.createContent=function(){this.data.singleShape&&!this.globalData.fontManager.chars&&(this.textContainer=createNS("text"))},SVGTextLottieElement.prototype.buildTextContents=function(A){for(var T=0,E=A.length,C=[],P="";T<E;)A[T]==="\r"||A[T]===""?(C.push(P),P=""):P+=A[T],T+=1;return C.push(P),C},SVGTextLottieElement.prototype.buildShapeData=function(A,T){if(A.shapes&&A.shapes.length){var E=A.shapes[0];if(E.it){var C=E.it[E.it.length-1];C.s&&(C.s.k[0]=T,C.s.k[1]=T)}}return A},SVGTextLottieElement.prototype.buildNewText=function(){this.addDynamicProperty(this);var A,T,E=this.textProperty.currentData;this.renderedLetters=createSizedArray(E?E.l.length:0),E.fc?this.layerElement.setAttribute("fill",this.buildColor(E.fc)):this.layerElement.setAttribute("fill","rgba(0,0,0,0)"),E.sc&&(this.layerElement.setAttribute("stroke",this.buildColor(E.sc)),this.layerElement.setAttribute("stroke-width",E.sw)),this.layerElement.setAttribute("font-size",E.finalSize);var C=this.globalData.fontManager.getFontByName(E.f);if(C.fClass)this.layerElement.setAttribute("class",C.fClass);else{this.layerElement.setAttribute("font-family",C.fFamily);var P=E.fWeight,I=E.fStyle;this.layerElement.setAttribute("font-style",I),this.layerElement.setAttribute("font-weight",P)}this.layerElement.setAttribute("aria-label",E.t);var R=E.l||[],F=!!this.globalData.fontManager.chars;T=R.length;var O,D=this.mHelper,L="",B=this.data.singleShape,V=0,U=0,z=!0,W=E.tr*.001*E.finalSize;if(B&&!F&&!E.sz){var Z=this.textContainer,X="start";switch(E.j){case 1:X="end";break;case 2:X="middle";break;default:X="start";break}Z.setAttribute("text-anchor",X),Z.setAttribute("letter-spacing",W);var K=this.buildTextContents(E.finalText);for(T=K.length,U=E.ps?E.ps[1]+E.ascent:0,A=0;A<T;A+=1)O=this.textSpans[A].span||createNS("tspan"),O.textContent=K[A],O.setAttribute("x",0),O.setAttribute("y",U),O.style.display="inherit",Z.appendChild(O),this.textSpans[A]||(this.textSpans[A]={span:null,glyph:null}),this.textSpans[A].span=O,U+=E.finalLineHeight;this.layerElement.appendChild(Z)}else{var Y=this.textSpans.length,Q;for(A=0;A<T;A+=1){if(this.textSpans[A]||(this.textSpans[A]={span:null,childSpan:null,glyph:null}),!F||!B||A===0){if(O=Y>A?this.textSpans[A].span:createNS(F?"g":"text"),Y<=A){if(O.setAttribute("stroke-linecap","butt"),O.setAttribute("stroke-linejoin","round"),O.setAttribute("stroke-miterlimit","4"),this.textSpans[A].span=O,F){var J=createNS("g");O.appendChild(J),this.textSpans[A].childSpan=J}this.textSpans[A].span=O,this.layerElement.appendChild(O)}O.style.display="inherit"}if(D.reset(),B&&(R[A].n&&(V=-W,U+=E.yOffset,U+=z?1:0,z=!1),this.applyTextPropertiesToMatrix(E,D,R[A].line,V,U),V+=R[A].l||0,V+=W),F){Q=this.globalData.fontManager.getCharData(E.finalText[A],C.fStyle,this.globalData.fontManager.getFontByName(E.f).fFamily);var te;if(Q.t===1)te=new SVGCompElement(Q.data,this.globalData,this);else{var ie=emptyShapeData;Q.data&&Q.data.shapes&&(ie=this.buildShapeData(Q.data,E.finalSize)),te=new SVGShapeElement(ie,this.globalData,this)}if(this.textSpans[A].glyph){var ne=this.textSpans[A].glyph;this.textSpans[A].childSpan.removeChild(ne.layerElement),ne.destroy()}this.textSpans[A].glyph=te,te._debug=!0,te.prepareFrame(0),te.renderFrame(),this.textSpans[A].childSpan.appendChild(te.layerElement),Q.t===1&&this.textSpans[A].childSpan.setAttribute("transform","scale("+E.finalSize/100+","+E.finalSize/100+")")}else B&&O.setAttribute("transform","translate("+D.props[12]+","+D.props[13]+")"),O.textContent=R[A].val,O.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve")}B&&O&&O.setAttribute("d",L)}for(;A<this.textSpans.length;)this.textSpans[A].span.style.display="none",A+=1;this._sizeChanged=!0},SVGTextLottieElement.prototype.sourceRectAtTime=function(){if(this.prepareFrame(this.comp.renderedFrame-this.data.st),this.renderInnerContent(),this._sizeChanged){this._sizeChanged=!1;var A=this.layerElement.getBBox();this.bbox={top:A.y,left:A.x,width:A.width,height:A.height}}return this.bbox},SVGTextLottieElement.prototype.getValue=function(){var A,T=this.textSpans.length,E;for(this.renderedFrame=this.comp.renderedFrame,A=0;A<T;A+=1)E=this.textSpans[A].glyph,E&&(E.prepareFrame(this.comp.renderedFrame-this.data.st),E._mdf&&(this._mdf=!0))},SVGTextLottieElement.prototype.renderInnerContent=function(){if(this.validateText(),(!this.data.singleShape||this._mdf)&&(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),this.lettersChangedFlag||this.textAnimator.lettersChangedFlag)){this._sizeChanged=!0;var A,T,E=this.textAnimator.renderedLetters,C=this.textProperty.currentData.l;T=C.length;var P,I,R;for(A=0;A<T;A+=1)C[A].n||(P=E[A],I=this.textSpans[A].span,R=this.textSpans[A].glyph,R&&R.renderFrame(),P._mdf.m&&I.setAttribute("transform",P.m),P._mdf.o&&I.setAttribute("opacity",P.o),P._mdf.sw&&I.setAttribute("stroke-width",P.sw),P._mdf.sc&&I.setAttribute("stroke",P.sc),P._mdf.fc&&I.setAttribute("fill",P.fc))}};function ISolidElement(A,T,E){this.initElement(A,T,E)}extendPrototype([IImageElement],ISolidElement),ISolidElement.prototype.createContent=function(){var A=createNS("rect");A.setAttribute("width",this.data.sw),A.setAttribute("height",this.data.sh),A.setAttribute("fill",this.data.sc),this.layerElement.appendChild(A)};function NullElement(A,T,E){this.initFrame(),this.initBaseData(A,T,E),this.initFrame(),this.initTransform(A,T,E),this.initHierarchy()}NullElement.prototype.prepareFrame=function(A){this.prepareProperties(A,!0)},NullElement.prototype.renderFrame=function(){},NullElement.prototype.getBaseElement=function(){return null},NullElement.prototype.destroy=function(){},NullElement.prototype.sourceRectAtTime=function(){},NullElement.prototype.hide=function(){},extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement],NullElement);function SVGRendererBase(){}extendPrototype([BaseRenderer],SVGRendererBase),SVGRendererBase.prototype.createNull=function(A){return new NullElement(A,this.globalData,this)},SVGRendererBase.prototype.createShape=function(A){return new SVGShapeElement(A,this.globalData,this)},SVGRendererBase.prototype.createText=function(A){return new SVGTextLottieElement(A,this.globalData,this)},SVGRendererBase.prototype.createImage=function(A){return new IImageElement(A,this.globalData,this)},SVGRendererBase.prototype.createSolid=function(A){return new ISolidElement(A,this.globalData,this)},SVGRendererBase.prototype.configAnimation=function(A){this.svgElement.setAttribute("xmlns","http://www.w3.org/2000/svg"),this.svgElement.setAttribute("xmlns:xlink","http://www.w3.org/1999/xlink"),this.renderConfig.viewBoxSize?this.svgElement.setAttribute("viewBox",this.renderConfig.viewBoxSize):this.svgElement.setAttribute("viewBox","0 0 "+A.w+" "+A.h),this.renderConfig.viewBoxOnly||(this.svgElement.setAttribute("width",A.w),this.svgElement.setAttribute("height",A.h),this.svgElement.style.width="100%",this.svgElement.style.height="100%",this.svgElement.style.transform="translate3d(0,0,0)",this.svgElement.style.contentVisibility=this.renderConfig.contentVisibility),this.renderConfig.width&&this.svgElement.setAttribute("width",this.renderConfig.width),this.renderConfig.height&&this.svgElement.setAttribute("height",this.renderConfig.height),this.renderConfig.className&&this.svgElement.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.svgElement.setAttribute("id",this.renderConfig.id),this.renderConfig.focusable!==void 0&&this.svgElement.setAttribute("focusable",this.renderConfig.focusable),this.svgElement.setAttribute("preserveAspectRatio",this.renderConfig.preserveAspectRatio),this.animationItem.wrapper.appendChild(this.svgElement);var T=this.globalData.defs;this.setupGlobalData(A,T),this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.data=A;var E=createNS("clipPath"),C=createNS("rect");C.setAttribute("width",A.w),C.setAttribute("height",A.h),C.setAttribute("x",0),C.setAttribute("y",0);var P=createElementID();E.setAttribute("id",P),E.appendChild(C),this.layerElement.setAttribute("clip-path","url("+getLocationHref()+"#"+P+")"),T.appendChild(E),this.layers=A.layers,this.elements=createSizedArray(A.layers.length)},SVGRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.layerElement=null,this.globalData.defs=null;var A,T=this.layers?this.layers.length:0;for(A=0;A<T;A+=1)this.elements[A]&&this.elements[A].destroy&&this.elements[A].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},SVGRendererBase.prototype.updateContainerSize=function(){},SVGRendererBase.prototype.findIndexByInd=function(A){var T=0,E=this.layers.length;for(T=0;T<E;T+=1)if(this.layers[T].ind===A)return T;return-1},SVGRendererBase.prototype.buildItem=function(A){var T=this.elements;if(!(T[A]||this.layers[A].ty===99)){T[A]=!0;var E=this.createItem(this.layers[A]);if(T[A]=E,getExpressionsPlugin()&&(this.layers[A].ty===0&&this.globalData.projectInterface.registerComposition(E),E.initExpressions()),this.appendElementInPos(E,A),this.layers[A].tt){var C="tp"in this.layers[A]?this.findIndexByInd(this.layers[A].tp):A-1;if(C===-1)return;if(!this.elements[C]||this.elements[C]===!0)this.buildItem(C),this.addPendingElement(E);else{var P=T[C],I=P.getMatte(this.layers[A].tt);E.setMatte(I)}}}},SVGRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var A=this.pendingElements.pop();if(A.checkParenting(),A.data.tt)for(var T=0,E=this.elements.length;T<E;){if(this.elements[T]===A){var C="tp"in A.data?this.findIndexByInd(A.data.tp):T-1,P=this.elements[C],I=P.getMatte(this.layers[T].tt);A.setMatte(I);break}T+=1}}},SVGRendererBase.prototype.renderFrame=function(A){if(!(this.renderedFrame===A||this.destroyed)){A===null?A=this.renderedFrame:this.renderedFrame=A,this.globalData.frameNum=A,this.globalData.frameId+=1,this.globalData.projectInterface.currentFrame=A,this.globalData._mdf=!1;var T,E=this.layers.length;for(this.completeLayers||this.checkLayers(A),T=E-1;T>=0;T-=1)(this.completeLayers||this.elements[T])&&this.elements[T].prepareFrame(A-this.layers[T].st);if(this.globalData._mdf)for(T=0;T<E;T+=1)(this.completeLayers||this.elements[T])&&this.elements[T].renderFrame()}},SVGRendererBase.prototype.appendElementInPos=function(A,T){var E=A.getBaseElement();if(E){for(var C=0,P;C<T;)this.elements[C]&&this.elements[C]!==!0&&this.elements[C].getBaseElement()&&(P=this.elements[C].getBaseElement()),C+=1;P?this.layerElement.insertBefore(E,P):this.layerElement.appendChild(E)}},SVGRendererBase.prototype.hide=function(){this.layerElement.style.display="none"},SVGRendererBase.prototype.show=function(){this.layerElement.style.display="block"};function ICompElement(){}extendPrototype([BaseElement,TransformElement,HierarchyElement,FrameElement,RenderableDOMElement],ICompElement),ICompElement.prototype.initElement=function(A,T,E){this.initFrame(),this.initBaseData(A,T,E),this.initTransform(A,T,E),this.initRenderable(),this.initHierarchy(),this.initRendererElement(),this.createContainerElements(),this.createRenderableComponents(),(this.data.xt||!T.progressiveLoad)&&this.buildAllItems(),this.hide()},ICompElement.prototype.prepareFrame=function(A){if(this._mdf=!1,this.prepareRenderableFrame(A),this.prepareProperties(A,this.isInRange),!(!this.isInRange&&!this.data.xt)){if(this.tm._placeholder)this.renderedFrame=A/this.data.sr;else{var T=this.tm.v;T===this.data.op&&(T=this.data.op-1),this.renderedFrame=T}var E,C=this.elements.length;for(this.completeLayers||this.checkLayers(this.renderedFrame),E=C-1;E>=0;E-=1)(this.completeLayers||this.elements[E])&&(this.elements[E].prepareFrame(this.renderedFrame-this.layers[E].st),this.elements[E]._mdf&&(this._mdf=!0))}},ICompElement.prototype.renderInnerContent=function(){var A,T=this.layers.length;for(A=0;A<T;A+=1)(this.completeLayers||this.elements[A])&&this.elements[A].renderFrame()},ICompElement.prototype.setElements=function(A){this.elements=A},ICompElement.prototype.getElements=function(){return this.elements},ICompElement.prototype.destroyElements=function(){var A,T=this.layers.length;for(A=0;A<T;A+=1)this.elements[A]&&this.elements[A].destroy()},ICompElement.prototype.destroy=function(){this.destroyElements(),this.destroyBaseElement()};function SVGCompElement(A,T,E){this.layers=A.layers,this.supports3d=!0,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(A,T,E),this.tm=A.tm?PropertyFactory.getProp(this,A.tm,0,T.frameRate,this):{_placeholder:!0}}extendPrototype([SVGRendererBase,ICompElement,SVGBaseElement],SVGCompElement),SVGCompElement.prototype.createComp=function(A){return new SVGCompElement(A,this.globalData,this)};function SVGRenderer(A,T){this.animationItem=A,this.layers=null,this.renderedFrame=-1,this.svgElement=createNS("svg");var E="";if(T&&T.title){var C=createNS("title"),P=createElementID();C.setAttribute("id",P),C.textContent=T.title,this.svgElement.appendChild(C),E+=P}if(T&&T.description){var I=createNS("desc"),R=createElementID();I.setAttribute("id",R),I.textContent=T.description,this.svgElement.appendChild(I),E+=" "+R}E&&this.svgElement.setAttribute("aria-labelledby",E);var F=createNS("defs");this.svgElement.appendChild(F);var O=createNS("g");this.svgElement.appendChild(O),this.layerElement=O,this.renderConfig={preserveAspectRatio:T&&T.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:T&&T.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:T&&T.contentVisibility||"visible",progressiveLoad:T&&T.progressiveLoad||!1,hideOnTransparent:!(T&&T.hideOnTransparent===!1),viewBoxOnly:T&&T.viewBoxOnly||!1,viewBoxSize:T&&T.viewBoxSize||!1,className:T&&T.className||"",id:T&&T.id||"",focusable:T&&T.focusable,filterSize:{width:T&&T.filterSize&&T.filterSize.width||"100%",height:T&&T.filterSize&&T.filterSize.height||"100%",x:T&&T.filterSize&&T.filterSize.x||"0%",y:T&&T.filterSize&&T.filterSize.y||"0%"},width:T&&T.width,height:T&&T.height,runExpressions:!T||T.runExpressions===void 0||T.runExpressions},this.globalData={_mdf:!1,frameNum:-1,defs:F,renderConfig:this.renderConfig},this.elements=[],this.pendingElements=[],this.destroyed=!1,this.rendererType="svg"}extendPrototype([SVGRendererBase],SVGRenderer),SVGRenderer.prototype.createComp=function(A){return new SVGCompElement(A,this.globalData,this)};function ShapeTransformManager(){this.sequences={},this.sequenceList=[],this.transform_key_count=0}ShapeTransformManager.prototype={addTransformSequence:function(T){var E,C=T.length,P="_";for(E=0;E<C;E+=1)P+=T[E].transform.key+"_";var I=this.sequences[P];return I||(I={transforms:[].concat(T),finalTransform:new Matrix,_mdf:!1},this.sequences[P]=I,this.sequenceList.push(I)),I},processSequence:function(T,E){for(var C=0,P=T.transforms.length,I=E;C<P&&!E;){if(T.transforms[C].transform.mProps._mdf){I=!0;break}C+=1}if(I)for(T.finalTransform.reset(),C=P-1;C>=0;C-=1)T.finalTransform.multiply(T.transforms[C].transform.mProps.v);T._mdf=I},processSequences:function(T){var E,C=this.sequenceList.length;for(E=0;E<C;E+=1)this.processSequence(this.sequenceList[E],T)},getNewKey:function(){return this.transform_key_count+=1,"_"+this.transform_key_count}};var lumaLoader=function(){var T="__lottie_element_luma_buffer",E=null,C=null,P=null;function I(){var O=createNS("svg"),D=createNS("filter"),L=createNS("feColorMatrix");return D.setAttribute("id",T),L.setAttribute("type","matrix"),L.setAttribute("color-interpolation-filters","sRGB"),L.setAttribute("values","0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0, 0.3, 0.3, 0.3, 0, 0"),D.appendChild(L),O.appendChild(D),O.setAttribute("id",T+"_svg"),featureSupport.svgLumaHidden&&(O.style.display="none"),O}function R(){E||(P=I(),document.body.appendChild(P),E=createTag("canvas"),C=E.getContext("2d"),C.filter="url(#"+T+")",C.fillStyle="rgba(0,0,0,0)",C.fillRect(0,0,1,1))}function F(O){return E||R(),E.width=O.width,E.height=O.height,C.filter="url(#"+T+")",E}return{load:R,get:F}};function createCanvas(A,T){if(featureSupport.offscreenCanvas)return new OffscreenCanvas(A,T);var E=createTag("canvas");return E.width=A,E.height=T,E}var assetLoader=function(){return{loadLumaCanvas:lumaLoader.load,getLumaCanvas:lumaLoader.get,createCanvas}}(),registeredEffects={};function CVEffects(A){var T,E=A.data.ef?A.data.ef.length:0;this.filters=[];var C;for(T=0;T<E;T+=1){C=null;var P=A.data.ef[T].ty;if(registeredEffects[P]){var I=registeredEffects[P].effect;C=new I(A.effectsManager.effectElements[T],A)}C&&this.filters.push(C)}this.filters.length&&A.addRenderableComponent(this)}CVEffects.prototype.renderFrame=function(A){var T,E=this.filters.length;for(T=0;T<E;T+=1)this.filters[T].renderFrame(A)},CVEffects.prototype.getEffects=function(A){var T,E=this.filters.length,C=[];for(T=0;T<E;T+=1)this.filters[T].type===A&&C.push(this.filters[T]);return C};function registerEffect(A,T){registeredEffects[A]={effect:T}}function CVMaskElement(A,T){this.data=A,this.element=T,this.masksProperties=this.data.masksProperties||[],this.viewData=createSizedArray(this.masksProperties.length);var E,C=this.masksProperties.length,P=!1;for(E=0;E<C;E+=1)this.masksProperties[E].mode!=="n"&&(P=!0),this.viewData[E]=ShapePropertyFactory.getShapeProp(this.element,this.masksProperties[E],3);this.hasMasks=P,P&&this.element.addRenderableComponent(this)}CVMaskElement.prototype.renderFrame=function(){if(this.hasMasks){var A=this.element.finalTransform.mat,T=this.element.canvasContext,E,C=this.masksProperties.length,P,I,R;for(T.beginPath(),E=0;E<C;E+=1)if(this.masksProperties[E].mode!=="n"){this.masksProperties[E].inv&&(T.moveTo(0,0),T.lineTo(this.element.globalData.compSize.w,0),T.lineTo(this.element.globalData.compSize.w,this.element.globalData.compSize.h),T.lineTo(0,this.element.globalData.compSize.h),T.lineTo(0,0)),R=this.viewData[E].v,P=A.applyToPointArray(R.v[0][0],R.v[0][1],0),T.moveTo(P[0],P[1]);var F,O=R._length;for(F=1;F<O;F+=1)I=A.applyToTriplePoints(R.o[F-1],R.i[F],R.v[F]),T.bezierCurveTo(I[0],I[1],I[2],I[3],I[4],I[5]);I=A.applyToTriplePoints(R.o[F-1],R.i[0],R.v[0]),T.bezierCurveTo(I[0],I[1],I[2],I[3],I[4],I[5])}this.element.globalData.renderer.save(!0),T.clip()}},CVMaskElement.prototype.getMaskProperty=MaskElement.prototype.getMaskProperty,CVMaskElement.prototype.destroy=function(){this.element=null};function CVBaseElement(){}var operationsMap={1:"source-in",2:"source-out",3:"source-in",4:"source-out"};CVBaseElement.prototype={createElements:function(){},initRendererElement:function(){},createContainerElements:function(){if(this.data.tt>=1){this.buffers=[];var T=this.globalData.canvasContext,E=assetLoader.createCanvas(T.canvas.width,T.canvas.height);this.buffers.push(E);var C=assetLoader.createCanvas(T.canvas.width,T.canvas.height);this.buffers.push(C),this.data.tt>=3&&!document._isProxy&&assetLoader.loadLumaCanvas()}this.canvasContext=this.globalData.canvasContext,this.transformCanvas=this.globalData.transformCanvas,this.renderableEffectsManager=new CVEffects(this),this.searchEffectTransforms()},createContent:function(){},setBlendMode:function(){var T=this.globalData;if(T.blendMode!==this.data.bm){T.blendMode=this.data.bm;var E=getBlendMode(this.data.bm);T.canvasContext.globalCompositeOperation=E}},createRenderableComponents:function(){this.maskManager=new CVMaskElement(this.data,this),this.transformEffects=this.renderableEffectsManager.getEffects(effectTypes.TRANSFORM_EFFECT)},hideElement:function(){!this.hidden&&(!this.isInRange||this.isTransparent)&&(this.hidden=!0)},showElement:function(){this.isInRange&&!this.isTransparent&&(this.hidden=!1,this._isFirstFrame=!0,this.maskManager._isFirstFrame=!0)},clearCanvas:function(T){T.clearRect(this.transformCanvas.tx,this.transformCanvas.ty,this.transformCanvas.w*this.transformCanvas.sx,this.transformCanvas.h*this.transformCanvas.sy)},prepareLayer:function(){if(this.data.tt>=1){var T=this.buffers[0],E=T.getContext("2d");this.clearCanvas(E),E.drawImage(this.canvasContext.canvas,0,0),this.currentTransform=this.canvasContext.getTransform(),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform)}},exitLayer:function(){if(this.data.tt>=1){var T=this.buffers[1],E=T.getContext("2d");this.clearCanvas(E),E.drawImage(this.canvasContext.canvas,0,0),this.canvasContext.setTransform(1,0,0,1,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.setTransform(this.currentTransform);var C=this.comp.getElementById("tp"in this.data?this.data.tp:this.data.ind-1);if(C.renderFrame(!0),this.canvasContext.setTransform(1,0,0,1,0,0),this.data.tt>=3&&!document._isProxy){var P=assetLoader.getLumaCanvas(this.canvasContext.canvas),I=P.getContext("2d");I.drawImage(this.canvasContext.canvas,0,0),this.clearCanvas(this.canvasContext),this.canvasContext.drawImage(P,0,0)}this.canvasContext.globalCompositeOperation=operationsMap[this.data.tt],this.canvasContext.drawImage(T,0,0),this.canvasContext.globalCompositeOperation="destination-over",this.canvasContext.drawImage(this.buffers[0],0,0),this.canvasContext.setTransform(this.currentTransform),this.canvasContext.globalCompositeOperation="source-over"}},renderFrame:function(T){if(!(this.hidden||this.data.hd)&&!(this.data.td===1&&!T)){this.renderTransform(),this.renderRenderable(),this.renderLocalTransform(),this.setBlendMode();var E=this.data.ty===0;this.prepareLayer(),this.globalData.renderer.save(E),this.globalData.renderer.ctxTransform(this.finalTransform.localMat.props),this.globalData.renderer.ctxOpacity(this.finalTransform.localOpacity),this.renderInnerContent(),this.globalData.renderer.restore(E),this.exitLayer(),this.maskManager.hasMasks&&this.globalData.renderer.restore(!0),this._isFirstFrame&&(this._isFirstFrame=!1)}},destroy:function(){this.canvasContext=null,this.data=null,this.globalData=null,this.maskManager.destroy()},mHelper:new Matrix},CVBaseElement.prototype.hide=CVBaseElement.prototype.hideElement,CVBaseElement.prototype.show=CVBaseElement.prototype.showElement;function CVShapeData(A,T,E,C){this.styledShapes=[],this.tr=[0,0,0,0,0,0];var P=4;T.ty==="rc"?P=5:T.ty==="el"?P=6:T.ty==="sr"&&(P=7),this.sh=ShapePropertyFactory.getShapeProp(A,T,P,A);var I,R=E.length,F;for(I=0;I<R;I+=1)E[I].closed||(F={transforms:C.addTransformSequence(E[I].transforms),trNodes:[]},this.styledShapes.push(F),E[I].elements.push(F))}CVShapeData.prototype.setAsAnimated=SVGShapeData.prototype.setAsAnimated;function CVShapeElement(A,T,E){this.shapes=[],this.shapesData=A.shapes,this.stylesList=[],this.itemsData=[],this.prevViewData=[],this.shapeModifiers=[],this.processedElements=[],this.transformsManager=new ShapeTransformManager,this.initElement(A,T,E)}extendPrototype([BaseElement,TransformElement,CVBaseElement,IShapeElement,HierarchyElement,FrameElement,RenderableElement],CVShapeElement),CVShapeElement.prototype.initElement=RenderableDOMElement.prototype.initElement,CVShapeElement.prototype.transformHelper={opacity:1,_opMdf:!1},CVShapeElement.prototype.dashResetter=[],CVShapeElement.prototype.createContent=function(){this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[])},CVShapeElement.prototype.createStyleElement=function(A,T){var E={data:A,type:A.ty,preTransforms:this.transformsManager.addTransformSequence(T),transforms:[],elements:[],closed:A.hd===!0},C={};if(A.ty==="fl"||A.ty==="st"?(C.c=PropertyFactory.getProp(this,A.c,1,255,this),C.c.k||(E.co="rgb("+bmFloor(C.c.v[0])+","+bmFloor(C.c.v[1])+","+bmFloor(C.c.v[2])+")")):(A.ty==="gf"||A.ty==="gs")&&(C.s=PropertyFactory.getProp(this,A.s,1,null,this),C.e=PropertyFactory.getProp(this,A.e,1,null,this),C.h=PropertyFactory.getProp(this,A.h||{k:0},0,.01,this),C.a=PropertyFactory.getProp(this,A.a||{k:0},0,degToRads,this),C.g=new GradientProperty(this,A.g,this)),C.o=PropertyFactory.getProp(this,A.o,0,.01,this),A.ty==="st"||A.ty==="gs"){if(E.lc=lineCapEnum[A.lc||2],E.lj=lineJoinEnum[A.lj||2],A.lj==1&&(E.ml=A.ml),C.w=PropertyFactory.getProp(this,A.w,0,null,this),C.w.k||(E.wi=C.w.v),A.d){var P=new DashProperty(this,A.d,"canvas",this);C.d=P,C.d.k||(E.da=C.d.dashArray,E.do=C.d.dashoffset[0])}}else E.r=A.r===2?"evenodd":"nonzero";return this.stylesList.push(E),C.style=E,C},CVShapeElement.prototype.createGroupElement=function(){var A={it:[],prevViewData:[]};return A},CVShapeElement.prototype.createTransformElement=function(A){var T={transform:{opacity:1,_opMdf:!1,key:this.transformsManager.getNewKey(),op:PropertyFactory.getProp(this,A.o,0,.01,this),mProps:TransformPropertyFactory.getTransformProperty(this,A,this)}};return T},CVShapeElement.prototype.createShapeElement=function(A){var T=new CVShapeData(this,A,this.stylesList,this.transformsManager);return this.shapes.push(T),this.addShapeToModifiers(T),T},CVShapeElement.prototype.reloadShapes=function(){this._isFirstFrame=!0;var A,T=this.itemsData.length;for(A=0;A<T;A+=1)this.prevViewData[A]=this.itemsData[A];for(this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,!0,[]),T=this.dynamicProperties.length,A=0;A<T;A+=1)this.dynamicProperties[A].getValue();this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame)},CVShapeElement.prototype.addTransformToStyleList=function(A){var T,E=this.stylesList.length;for(T=0;T<E;T+=1)this.stylesList[T].closed||this.stylesList[T].transforms.push(A)},CVShapeElement.prototype.removeTransformFromStyleList=function(){var A,T=this.stylesList.length;for(A=0;A<T;A+=1)this.stylesList[A].closed||this.stylesList[A].transforms.pop()},CVShapeElement.prototype.closeStyles=function(A){var T,E=A.length;for(T=0;T<E;T+=1)A[T].closed=!0},CVShapeElement.prototype.searchShapes=function(A,T,E,C,P){var I,R=A.length-1,F,O,D=[],L=[],B,V,U,z=[].concat(P);for(I=R;I>=0;I-=1){if(B=this.searchProcessedElement(A[I]),B?T[I]=E[B-1]:A[I]._shouldRender=C,A[I].ty==="fl"||A[I].ty==="st"||A[I].ty==="gf"||A[I].ty==="gs")B?T[I].style.closed=!1:T[I]=this.createStyleElement(A[I],z),D.push(T[I].style);else if(A[I].ty==="gr"){if(!B)T[I]=this.createGroupElement(A[I]);else for(O=T[I].it.length,F=0;F<O;F+=1)T[I].prevViewData[F]=T[I].it[F];this.searchShapes(A[I].it,T[I].it,T[I].prevViewData,C,z)}else A[I].ty==="tr"?(B||(U=this.createTransformElement(A[I]),T[I]=U),z.push(T[I]),this.addTransformToStyleList(T[I])):A[I].ty==="sh"||A[I].ty==="rc"||A[I].ty==="el"||A[I].ty==="sr"?B||(T[I]=this.createShapeElement(A[I])):A[I].ty==="tm"||A[I].ty==="rd"||A[I].ty==="pb"||A[I].ty==="zz"||A[I].ty==="op"?(B?(V=T[I],V.closed=!1):(V=ShapeModifiers.getModifier(A[I].ty),V.init(this,A[I]),T[I]=V,this.shapeModifiers.push(V)),L.push(V)):A[I].ty==="rp"&&(B?(V=T[I],V.closed=!0):(V=ShapeModifiers.getModifier(A[I].ty),T[I]=V,V.init(this,A,I,T),this.shapeModifiers.push(V),C=!1),L.push(V));this.addProcessedElement(A[I],I+1)}for(this.removeTransformFromStyleList(),this.closeStyles(D),R=L.length,I=0;I<R;I+=1)L[I].closed=!0},CVShapeElement.prototype.renderInnerContent=function(){this.transformHelper.opacity=1,this.transformHelper._opMdf=!1,this.renderModifiers(),this.transformsManager.processSequences(this._isFirstFrame),this.renderShape(this.transformHelper,this.shapesData,this.itemsData,!0)},CVShapeElement.prototype.renderShapeTransform=function(A,T){(A._opMdf||T.op._mdf||this._isFirstFrame)&&(T.opacity=A.opacity,T.opacity*=T.op.v,T._opMdf=!0)},CVShapeElement.prototype.drawLayer=function(){var A,T=this.stylesList.length,E,C,P,I,R,F,O=this.globalData.renderer,D=this.globalData.canvasContext,L,B;for(A=0;A<T;A+=1)if(B=this.stylesList[A],L=B.type,!((L==="st"||L==="gs")&&B.wi===0||!B.data._shouldRender||B.coOp===0||this.globalData.currentGlobalAlpha===0)){for(O.save(),R=B.elements,L==="st"||L==="gs"?(O.ctxStrokeStyle(L==="st"?B.co:B.grd),O.ctxLineWidth(B.wi),O.ctxLineCap(B.lc),O.ctxLineJoin(B.lj),O.ctxMiterLimit(B.ml||0)):O.ctxFillStyle(L==="fl"?B.co:B.grd),O.ctxOpacity(B.coOp),L!=="st"&&L!=="gs"&&D.beginPath(),O.ctxTransform(B.preTransforms.finalTransform.props),C=R.length,E=0;E<C;E+=1){for((L==="st"||L==="gs")&&(D.beginPath(),B.da&&(D.setLineDash(B.da),D.lineDashOffset=B.do)),F=R[E].trNodes,I=F.length,P=0;P<I;P+=1)F[P].t==="m"?D.moveTo(F[P].p[0],F[P].p[1]):F[P].t==="c"?D.bezierCurveTo(F[P].pts[0],F[P].pts[1],F[P].pts[2],F[P].pts[3],F[P].pts[4],F[P].pts[5]):D.closePath();(L==="st"||L==="gs")&&(O.ctxStroke(),B.da&&D.setLineDash(this.dashResetter))}L!=="st"&&L!=="gs"&&this.globalData.renderer.ctxFill(B.r),O.restore()}},CVShapeElement.prototype.renderShape=function(A,T,E,C){var P,I=T.length-1,R;for(R=A,P=I;P>=0;P-=1)T[P].ty==="tr"?(R=E[P].transform,this.renderShapeTransform(A,R)):T[P].ty==="sh"||T[P].ty==="el"||T[P].ty==="rc"||T[P].ty==="sr"?this.renderPath(T[P],E[P]):T[P].ty==="fl"?this.renderFill(T[P],E[P],R):T[P].ty==="st"?this.renderStroke(T[P],E[P],R):T[P].ty==="gf"||T[P].ty==="gs"?this.renderGradientFill(T[P],E[P],R):T[P].ty==="gr"?this.renderShape(R,T[P].it,E[P].it):T[P].ty;C&&this.drawLayer()},CVShapeElement.prototype.renderStyledShape=function(A,T){if(this._isFirstFrame||T._mdf||A.transforms._mdf){var E=A.trNodes,C=T.paths,P,I,R,F=C._length;E.length=0;var O=A.transforms.finalTransform;for(R=0;R<F;R+=1){var D=C.shapes[R];if(D&&D.v){for(I=D._length,P=1;P<I;P+=1)P===1&&E.push({t:"m",p:O.applyToPointArray(D.v[0][0],D.v[0][1],0)}),E.push({t:"c",pts:O.applyToTriplePoints(D.o[P-1],D.i[P],D.v[P])});I===1&&E.push({t:"m",p:O.applyToPointArray(D.v[0][0],D.v[0][1],0)}),D.c&&I&&(E.push({t:"c",pts:O.applyToTriplePoints(D.o[P-1],D.i[0],D.v[0])}),E.push({t:"z"}))}}A.trNodes=E}},CVShapeElement.prototype.renderPath=function(A,T){if(A.hd!==!0&&A._shouldRender){var E,C=T.styledShapes.length;for(E=0;E<C;E+=1)this.renderStyledShape(T.styledShapes[E],T.sh)}},CVShapeElement.prototype.renderFill=function(A,T,E){var C=T.style;(T.c._mdf||this._isFirstFrame)&&(C.co="rgb("+bmFloor(T.c.v[0])+","+bmFloor(T.c.v[1])+","+bmFloor(T.c.v[2])+")"),(T.o._mdf||E._opMdf||this._isFirstFrame)&&(C.coOp=T.o.v*E.opacity)},CVShapeElement.prototype.renderGradientFill=function(A,T,E){var C=T.style,P;if(!C.grd||T.g._mdf||T.s._mdf||T.e._mdf||A.t!==1&&(T.h._mdf||T.a._mdf)){var I=this.globalData.canvasContext,R=T.s.v,F=T.e.v;if(A.t===1)P=I.createLinearGradient(R[0],R[1],F[0],F[1]);else{var O=Math.sqrt(Math.pow(R[0]-F[0],2)+Math.pow(R[1]-F[1],2)),D=Math.atan2(F[1]-R[1],F[0]-R[0]),L=T.h.v;L>=1?L=.99:L<=-1&&(L=-.99);var B=O*L,V=Math.cos(D+T.a.v)*B+R[0],U=Math.sin(D+T.a.v)*B+R[1];P=I.createRadialGradient(V,U,0,R[0],R[1],O)}var z,W=A.g.p,Z=T.g.c,X=1;for(z=0;z<W;z+=1)T.g._hasOpacity&&T.g._collapsable&&(X=T.g.o[z*2+1]),P.addColorStop(Z[z*4]/100,"rgba("+Z[z*4+1]+","+Z[z*4+2]+","+Z[z*4+3]+","+X+")");C.grd=P}C.coOp=T.o.v*E.opacity},CVShapeElement.prototype.renderStroke=function(A,T,E){var C=T.style,P=T.d;P&&(P._mdf||this._isFirstFrame)&&(C.da=P.dashArray,C.do=P.dashoffset[0]),(T.c._mdf||this._isFirstFrame)&&(C.co="rgb("+bmFloor(T.c.v[0])+","+bmFloor(T.c.v[1])+","+bmFloor(T.c.v[2])+")"),(T.o._mdf||E._opMdf||this._isFirstFrame)&&(C.coOp=T.o.v*E.opacity),(T.w._mdf||this._isFirstFrame)&&(C.wi=T.w.v)},CVShapeElement.prototype.destroy=function(){this.shapesData=null,this.globalData=null,this.canvasContext=null,this.stylesList.length=0,this.itemsData.length=0};function CVTextElement(A,T,E){this.textSpans=[],this.yOffset=0,this.fillColorAnim=!1,this.strokeColorAnim=!1,this.strokeWidthAnim=!1,this.stroke=!1,this.fill=!1,this.justifyOffset=0,this.currentRender=null,this.renderType="canvas",this.values={fill:"rgba(0,0,0,0)",stroke:"rgba(0,0,0,0)",sWidth:0,fValue:""},this.initElement(A,T,E)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement,ITextElement],CVTextElement),CVTextElement.prototype.tHelper=createTag("canvas").getContext("2d"),CVTextElement.prototype.buildNewText=function(){var A=this.textProperty.currentData;this.renderedLetters=createSizedArray(A.l?A.l.length:0);var T=!1;A.fc?(T=!0,this.values.fill=this.buildColor(A.fc)):this.values.fill="rgba(0,0,0,0)",this.fill=T;var E=!1;A.sc&&(E=!0,this.values.stroke=this.buildColor(A.sc),this.values.sWidth=A.sw);var C=this.globalData.fontManager.getFontByName(A.f),P,I,R=A.l,F=this.mHelper;this.stroke=E,this.values.fValue=A.finalSize+"px "+this.globalData.fontManager.getFontByName(A.f).fFamily,I=A.finalText.length;var O,D,L,B,V,U,z,W,Z,X,K=this.data.singleShape,Y=A.tr*.001*A.finalSize,Q=0,J=0,te=!0,ie=0;for(P=0;P<I;P+=1){O=this.globalData.fontManager.getCharData(A.finalText[P],C.fStyle,this.globalData.fontManager.getFontByName(A.f).fFamily),D=O&&O.data||{},F.reset(),K&&R[P].n&&(Q=-Y,J+=A.yOffset,J+=te?1:0,te=!1),V=D.shapes?D.shapes[0].it:[],z=V.length,F.scale(A.finalSize/100,A.finalSize/100),K&&this.applyTextPropertiesToMatrix(A,F,R[P].line,Q,J),Z=createSizedArray(z-1);var ne=0;for(U=0;U<z;U+=1)if(V[U].ty==="sh"){for(B=V[U].ks.k.i.length,W=V[U].ks.k,X=[],L=1;L<B;L+=1)L===1&&X.push(F.applyToX(W.v[0][0],W.v[0][1],0),F.applyToY(W.v[0][0],W.v[0][1],0)),X.push(F.applyToX(W.o[L-1][0],W.o[L-1][1],0),F.applyToY(W.o[L-1][0],W.o[L-1][1],0),F.applyToX(W.i[L][0],W.i[L][1],0),F.applyToY(W.i[L][0],W.i[L][1],0),F.applyToX(W.v[L][0],W.v[L][1],0),F.applyToY(W.v[L][0],W.v[L][1],0));X.push(F.applyToX(W.o[L-1][0],W.o[L-1][1],0),F.applyToY(W.o[L-1][0],W.o[L-1][1],0),F.applyToX(W.i[0][0],W.i[0][1],0),F.applyToY(W.i[0][0],W.i[0][1],0),F.applyToX(W.v[0][0],W.v[0][1],0),F.applyToY(W.v[0][0],W.v[0][1],0)),Z[ne]=X,ne+=1}K&&(Q+=R[P].l,Q+=Y),this.textSpans[ie]?this.textSpans[ie].elem=Z:this.textSpans[ie]={elem:Z},ie+=1}},CVTextElement.prototype.renderInnerContent=function(){this.validateText();var A=this.canvasContext;A.font=this.values.fValue,this.globalData.renderer.ctxLineCap("butt"),this.globalData.renderer.ctxLineJoin("miter"),this.globalData.renderer.ctxMiterLimit(4),this.data.singleShape||this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag);var T,E,C,P,I,R,F=this.textAnimator.renderedLetters,O=this.textProperty.currentData.l;E=O.length;var D,L=null,B=null,V=null,U,z,W=this.globalData.renderer;for(T=0;T<E;T+=1)if(!O[T].n){if(D=F[T],D&&(W.save(),W.ctxTransform(D.p),W.ctxOpacity(D.o)),this.fill){for(D&&D.fc?L!==D.fc&&(W.ctxFillStyle(D.fc),L=D.fc):L!==this.values.fill&&(L=this.values.fill,W.ctxFillStyle(this.values.fill)),U=this.textSpans[T].elem,P=U.length,this.globalData.canvasContext.beginPath(),C=0;C<P;C+=1)for(z=U[C],R=z.length,this.globalData.canvasContext.moveTo(z[0],z[1]),I=2;I<R;I+=6)this.globalData.canvasContext.bezierCurveTo(z[I],z[I+1],z[I+2],z[I+3],z[I+4],z[I+5]);this.globalData.canvasContext.closePath(),W.ctxFill()}if(this.stroke){for(D&&D.sw?V!==D.sw&&(V=D.sw,W.ctxLineWidth(D.sw)):V!==this.values.sWidth&&(V=this.values.sWidth,W.ctxLineWidth(this.values.sWidth)),D&&D.sc?B!==D.sc&&(B=D.sc,W.ctxStrokeStyle(D.sc)):B!==this.values.stroke&&(B=this.values.stroke,W.ctxStrokeStyle(this.values.stroke)),U=this.textSpans[T].elem,P=U.length,this.globalData.canvasContext.beginPath(),C=0;C<P;C+=1)for(z=U[C],R=z.length,this.globalData.canvasContext.moveTo(z[0],z[1]),I=2;I<R;I+=6)this.globalData.canvasContext.bezierCurveTo(z[I],z[I+1],z[I+2],z[I+3],z[I+4],z[I+5]);this.globalData.canvasContext.closePath(),W.ctxStroke()}D&&this.globalData.renderer.restore()}};function CVImageElement(A,T,E){this.assetData=T.getAssetData(A.refId),this.img=T.imageLoader.getAsset(this.assetData),this.initElement(A,T,E)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVImageElement),CVImageElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVImageElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVImageElement.prototype.createContent=function(){if(this.img.width&&(this.assetData.w!==this.img.width||this.assetData.h!==this.img.height)){var A=createTag("canvas");A.width=this.assetData.w,A.height=this.assetData.h;var T=A.getContext("2d"),E=this.img.width,C=this.img.height,P=E/C,I=this.assetData.w/this.assetData.h,R,F,O=this.assetData.pr||this.globalData.renderConfig.imagePreserveAspectRatio;P>I&&O==="xMidYMid slice"||P<I&&O!=="xMidYMid slice"?(F=C,R=F*I):(R=E,F=R/I),T.drawImage(this.img,(E-R)/2,(C-F)/2,R,F,0,0,this.assetData.w,this.assetData.h),this.img=A}},CVImageElement.prototype.renderInnerContent=function(){this.canvasContext.drawImage(this.img,0,0)},CVImageElement.prototype.destroy=function(){this.img=null};function CVSolidElement(A,T,E){this.initElement(A,T,E)}extendPrototype([BaseElement,TransformElement,CVBaseElement,HierarchyElement,FrameElement,RenderableElement],CVSolidElement),CVSolidElement.prototype.initElement=SVGShapeElement.prototype.initElement,CVSolidElement.prototype.prepareFrame=IImageElement.prototype.prepareFrame,CVSolidElement.prototype.renderInnerContent=function(){this.globalData.renderer.ctxFillStyle(this.data.sc),this.globalData.renderer.ctxFillRect(0,0,this.data.sw,this.data.sh)};function CanvasRendererBase(){}extendPrototype([BaseRenderer],CanvasRendererBase),CanvasRendererBase.prototype.createShape=function(A){return new CVShapeElement(A,this.globalData,this)},CanvasRendererBase.prototype.createText=function(A){return new CVTextElement(A,this.globalData,this)},CanvasRendererBase.prototype.createImage=function(A){return new CVImageElement(A,this.globalData,this)},CanvasRendererBase.prototype.createSolid=function(A){return new CVSolidElement(A,this.globalData,this)},CanvasRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,CanvasRendererBase.prototype.ctxTransform=function(A){A[0]===1&&A[1]===0&&A[4]===0&&A[5]===1&&A[12]===0&&A[13]===0||this.canvasContext.transform(A[0],A[1],A[4],A[5],A[12],A[13])},CanvasRendererBase.prototype.ctxOpacity=function(A){this.canvasContext.globalAlpha*=A<0?0:A},CanvasRendererBase.prototype.ctxFillStyle=function(A){this.canvasContext.fillStyle=A},CanvasRendererBase.prototype.ctxStrokeStyle=function(A){this.canvasContext.strokeStyle=A},CanvasRendererBase.prototype.ctxLineWidth=function(A){this.canvasContext.lineWidth=A},CanvasRendererBase.prototype.ctxLineCap=function(A){this.canvasContext.lineCap=A},CanvasRendererBase.prototype.ctxLineJoin=function(A){this.canvasContext.lineJoin=A},CanvasRendererBase.prototype.ctxMiterLimit=function(A){this.canvasContext.miterLimit=A},CanvasRendererBase.prototype.ctxFill=function(A){this.canvasContext.fill(A)},CanvasRendererBase.prototype.ctxFillRect=function(A,T,E,C){this.canvasContext.fillRect(A,T,E,C)},CanvasRendererBase.prototype.ctxStroke=function(){this.canvasContext.stroke()},CanvasRendererBase.prototype.reset=function(){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}this.contextData.reset()},CanvasRendererBase.prototype.save=function(){this.canvasContext.save()},CanvasRendererBase.prototype.restore=function(A){if(!this.renderConfig.clearCanvas){this.canvasContext.restore();return}A&&(this.globalData.blendMode="source-over"),this.contextData.restore(A)},CanvasRendererBase.prototype.configAnimation=function(A){if(this.animationItem.wrapper){this.animationItem.container=createTag("canvas");var T=this.animationItem.container.style;T.width="100%",T.height="100%";var E="0px 0px 0px";T.transformOrigin=E,T.mozTransformOrigin=E,T.webkitTransformOrigin=E,T["-webkit-transform"]=E,T.contentVisibility=this.renderConfig.contentVisibility,this.animationItem.wrapper.appendChild(this.animationItem.container),this.canvasContext=this.animationItem.container.getContext("2d"),this.renderConfig.className&&this.animationItem.container.setAttribute("class",this.renderConfig.className),this.renderConfig.id&&this.animationItem.container.setAttribute("id",this.renderConfig.id)}else this.canvasContext=this.renderConfig.context;this.contextData.setContext(this.canvasContext),this.data=A,this.layers=A.layers,this.transformCanvas={w:A.w,h:A.h,sx:0,sy:0,tx:0,ty:0},this.setupGlobalData(A,document.body),this.globalData.canvasContext=this.canvasContext,this.globalData.renderer=this,this.globalData.isDashed=!1,this.globalData.progressiveLoad=this.renderConfig.progressiveLoad,this.globalData.transformCanvas=this.transformCanvas,this.elements=createSizedArray(A.layers.length),this.updateContainerSize()},CanvasRendererBase.prototype.updateContainerSize=function(A,T){this.reset();var E,C;A?(E=A,C=T,this.canvasContext.canvas.width=E,this.canvasContext.canvas.height=C):(this.animationItem.wrapper&&this.animationItem.container?(E=this.animationItem.wrapper.offsetWidth,C=this.animationItem.wrapper.offsetHeight):(E=this.canvasContext.canvas.width,C=this.canvasContext.canvas.height),this.canvasContext.canvas.width=E*this.renderConfig.dpr,this.canvasContext.canvas.height=C*this.renderConfig.dpr);var P,I;if(this.renderConfig.preserveAspectRatio.indexOf("meet")!==-1||this.renderConfig.preserveAspectRatio.indexOf("slice")!==-1){var R=this.renderConfig.preserveAspectRatio.split(" "),F=R[1]||"meet",O=R[0]||"xMidYMid",D=O.substr(0,4),L=O.substr(4);P=E/C,I=this.transformCanvas.w/this.transformCanvas.h,I>P&&F==="meet"||I<P&&F==="slice"?(this.transformCanvas.sx=E/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=E/(this.transformCanvas.w/this.renderConfig.dpr)):(this.transformCanvas.sx=C/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.sy=C/(this.transformCanvas.h/this.renderConfig.dpr)),D==="xMid"&&(I<P&&F==="meet"||I>P&&F==="slice")?this.transformCanvas.tx=(E-this.transformCanvas.w*(C/this.transformCanvas.h))/2*this.renderConfig.dpr:D==="xMax"&&(I<P&&F==="meet"||I>P&&F==="slice")?this.transformCanvas.tx=(E-this.transformCanvas.w*(C/this.transformCanvas.h))*this.renderConfig.dpr:this.transformCanvas.tx=0,L==="YMid"&&(I>P&&F==="meet"||I<P&&F==="slice")?this.transformCanvas.ty=(C-this.transformCanvas.h*(E/this.transformCanvas.w))/2*this.renderConfig.dpr:L==="YMax"&&(I>P&&F==="meet"||I<P&&F==="slice")?this.transformCanvas.ty=(C-this.transformCanvas.h*(E/this.transformCanvas.w))*this.renderConfig.dpr:this.transformCanvas.ty=0}else this.renderConfig.preserveAspectRatio==="none"?(this.transformCanvas.sx=E/(this.transformCanvas.w/this.renderConfig.dpr),this.transformCanvas.sy=C/(this.transformCanvas.h/this.renderConfig.dpr),this.transformCanvas.tx=0,this.transformCanvas.ty=0):(this.transformCanvas.sx=this.renderConfig.dpr,this.transformCanvas.sy=this.renderConfig.dpr,this.transformCanvas.tx=0,this.transformCanvas.ty=0);this.transformCanvas.props=[this.transformCanvas.sx,0,0,0,0,this.transformCanvas.sy,0,0,0,0,1,0,this.transformCanvas.tx,this.transformCanvas.ty,0,1],this.ctxTransform(this.transformCanvas.props),this.canvasContext.beginPath(),this.canvasContext.rect(0,0,this.transformCanvas.w,this.transformCanvas.h),this.canvasContext.closePath(),this.canvasContext.clip(),this.renderFrame(this.renderedFrame,!0)},CanvasRendererBase.prototype.destroy=function(){this.renderConfig.clearCanvas&&this.animationItem.wrapper&&(this.animationItem.wrapper.innerText="");var A,T=this.layers?this.layers.length:0;for(A=T-1;A>=0;A-=1)this.elements[A]&&this.elements[A].destroy&&this.elements[A].destroy();this.elements.length=0,this.globalData.canvasContext=null,this.animationItem.container=null,this.destroyed=!0},CanvasRendererBase.prototype.renderFrame=function(A,T){if(!(this.renderedFrame===A&&this.renderConfig.clearCanvas===!0&&!T||this.destroyed||A===-1)){this.renderedFrame=A,this.globalData.frameNum=A-this.animationItem._isFirstFrame,this.globalData.frameId+=1,this.globalData._mdf=!this.renderConfig.clearCanvas||T,this.globalData.projectInterface.currentFrame=A;var E,C=this.layers.length;for(this.completeLayers||this.checkLayers(A),E=C-1;E>=0;E-=1)(this.completeLayers||this.elements[E])&&this.elements[E].prepareFrame(A-this.layers[E].st);if(this.globalData._mdf){for(this.renderConfig.clearCanvas===!0?this.canvasContext.clearRect(0,0,this.transformCanvas.w,this.transformCanvas.h):this.save(),E=C-1;E>=0;E-=1)(this.completeLayers||this.elements[E])&&this.elements[E].renderFrame();this.renderConfig.clearCanvas!==!0&&this.restore()}}},CanvasRendererBase.prototype.buildItem=function(A){var T=this.elements;if(!(T[A]||this.layers[A].ty===99)){var E=this.createItem(this.layers[A],this,this.globalData);T[A]=E,E.initExpressions()}},CanvasRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var A=this.pendingElements.pop();A.checkParenting()}},CanvasRendererBase.prototype.hide=function(){this.animationItem.container.style.display="none"},CanvasRendererBase.prototype.show=function(){this.animationItem.container.style.display="block"};function CanvasContext(){this.opacity=-1,this.transform=createTypedArray("float32",16),this.fillStyle="",this.strokeStyle="",this.lineWidth="",this.lineCap="",this.lineJoin="",this.miterLimit="",this.id=Math.random()}function CVContextData(){this.stack=[],this.cArrPos=0,this.cTr=new Matrix;var A,T=15;for(A=0;A<T;A+=1){var E=new CanvasContext;this.stack[A]=E}this._length=T,this.nativeContext=null,this.transformMat=new Matrix,this.currentOpacity=1,this.currentFillStyle="",this.appliedFillStyle="",this.currentStrokeStyle="",this.appliedStrokeStyle="",this.currentLineWidth="",this.appliedLineWidth="",this.currentLineCap="",this.appliedLineCap="",this.currentLineJoin="",this.appliedLineJoin="",this.appliedMiterLimit="",this.currentMiterLimit=""}CVContextData.prototype.duplicate=function(){var A=this._length*2,T=0;for(T=this._length;T<A;T+=1)this.stack[T]=new CanvasContext;this._length=A},CVContextData.prototype.reset=function(){this.cArrPos=0,this.cTr.reset(),this.stack[this.cArrPos].opacity=1},CVContextData.prototype.restore=function(A){this.cArrPos-=1;var T=this.stack[this.cArrPos],E=T.transform,C,P=this.cTr.props;for(C=0;C<16;C+=1)P[C]=E[C];if(A){this.nativeContext.restore();var I=this.stack[this.cArrPos+1];this.appliedFillStyle=I.fillStyle,this.appliedStrokeStyle=I.strokeStyle,this.appliedLineWidth=I.lineWidth,this.appliedLineCap=I.lineCap,this.appliedLineJoin=I.lineJoin,this.appliedMiterLimit=I.miterLimit}this.nativeContext.setTransform(E[0],E[1],E[4],E[5],E[12],E[13]),(A||T.opacity!==-1&&this.currentOpacity!==T.opacity)&&(this.nativeContext.globalAlpha=T.opacity,this.currentOpacity=T.opacity),this.currentFillStyle=T.fillStyle,this.currentStrokeStyle=T.strokeStyle,this.currentLineWidth=T.lineWidth,this.currentLineCap=T.lineCap,this.currentLineJoin=T.lineJoin,this.currentMiterLimit=T.miterLimit},CVContextData.prototype.save=function(A){A&&this.nativeContext.save();var T=this.cTr.props;this._length<=this.cArrPos&&this.duplicate();var E=this.stack[this.cArrPos],C;for(C=0;C<16;C+=1)E.transform[C]=T[C];this.cArrPos+=1;var P=this.stack[this.cArrPos];P.opacity=E.opacity,P.fillStyle=E.fillStyle,P.strokeStyle=E.strokeStyle,P.lineWidth=E.lineWidth,P.lineCap=E.lineCap,P.lineJoin=E.lineJoin,P.miterLimit=E.miterLimit},CVContextData.prototype.setOpacity=function(A){this.stack[this.cArrPos].opacity=A},CVContextData.prototype.setContext=function(A){this.nativeContext=A},CVContextData.prototype.fillStyle=function(A){this.stack[this.cArrPos].fillStyle!==A&&(this.currentFillStyle=A,this.stack[this.cArrPos].fillStyle=A)},CVContextData.prototype.strokeStyle=function(A){this.stack[this.cArrPos].strokeStyle!==A&&(this.currentStrokeStyle=A,this.stack[this.cArrPos].strokeStyle=A)},CVContextData.prototype.lineWidth=function(A){this.stack[this.cArrPos].lineWidth!==A&&(this.currentLineWidth=A,this.stack[this.cArrPos].lineWidth=A)},CVContextData.prototype.lineCap=function(A){this.stack[this.cArrPos].lineCap!==A&&(this.currentLineCap=A,this.stack[this.cArrPos].lineCap=A)},CVContextData.prototype.lineJoin=function(A){this.stack[this.cArrPos].lineJoin!==A&&(this.currentLineJoin=A,this.stack[this.cArrPos].lineJoin=A)},CVContextData.prototype.miterLimit=function(A){this.stack[this.cArrPos].miterLimit!==A&&(this.currentMiterLimit=A,this.stack[this.cArrPos].miterLimit=A)},CVContextData.prototype.transform=function(A){this.transformMat.cloneFromProps(A);var T=this.cTr;this.transformMat.multiply(T),T.cloneFromProps(this.transformMat.props);var E=T.props;this.nativeContext.setTransform(E[0],E[1],E[4],E[5],E[12],E[13])},CVContextData.prototype.opacity=function(A){var T=this.stack[this.cArrPos].opacity;T*=A<0?0:A,this.stack[this.cArrPos].opacity!==T&&(this.currentOpacity!==A&&(this.nativeContext.globalAlpha=A,this.currentOpacity=A),this.stack[this.cArrPos].opacity=T)},CVContextData.prototype.fill=function(A){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fill(A)},CVContextData.prototype.fillRect=function(A,T,E,C){this.appliedFillStyle!==this.currentFillStyle&&(this.appliedFillStyle=this.currentFillStyle,this.nativeContext.fillStyle=this.appliedFillStyle),this.nativeContext.fillRect(A,T,E,C)},CVContextData.prototype.stroke=function(){this.appliedStrokeStyle!==this.currentStrokeStyle&&(this.appliedStrokeStyle=this.currentStrokeStyle,this.nativeContext.strokeStyle=this.appliedStrokeStyle),this.appliedLineWidth!==this.currentLineWidth&&(this.appliedLineWidth=this.currentLineWidth,this.nativeContext.lineWidth=this.appliedLineWidth),this.appliedLineCap!==this.currentLineCap&&(this.appliedLineCap=this.currentLineCap,this.nativeContext.lineCap=this.appliedLineCap),this.appliedLineJoin!==this.currentLineJoin&&(this.appliedLineJoin=this.currentLineJoin,this.nativeContext.lineJoin=this.appliedLineJoin),this.appliedMiterLimit!==this.currentMiterLimit&&(this.appliedMiterLimit=this.currentMiterLimit,this.nativeContext.miterLimit=this.appliedMiterLimit),this.nativeContext.stroke()};function CVCompElement(A,T,E){this.completeLayers=!1,this.layers=A.layers,this.pendingElements=[],this.elements=createSizedArray(this.layers.length),this.initElement(A,T,E),this.tm=A.tm?PropertyFactory.getProp(this,A.tm,0,T.frameRate,this):{_placeholder:!0}}extendPrototype([CanvasRendererBase,ICompElement,CVBaseElement],CVCompElement),CVCompElement.prototype.renderInnerContent=function(){var A=this.canvasContext;A.beginPath(),A.moveTo(0,0),A.lineTo(this.data.w,0),A.lineTo(this.data.w,this.data.h),A.lineTo(0,this.data.h),A.lineTo(0,0),A.clip();var T,E=this.layers.length;for(T=E-1;T>=0;T-=1)(this.completeLayers||this.elements[T])&&this.elements[T].renderFrame()},CVCompElement.prototype.destroy=function(){var A,T=this.layers.length;for(A=T-1;A>=0;A-=1)this.elements[A]&&this.elements[A].destroy();this.layers=null,this.elements=null},CVCompElement.prototype.createComp=function(A){return new CVCompElement(A,this.globalData,this)};function CanvasRenderer(A,T){this.animationItem=A,this.renderConfig={clearCanvas:T&&T.clearCanvas!==void 0?T.clearCanvas:!0,context:T&&T.context||null,progressiveLoad:T&&T.progressiveLoad||!1,preserveAspectRatio:T&&T.preserveAspectRatio||"xMidYMid meet",imagePreserveAspectRatio:T&&T.imagePreserveAspectRatio||"xMidYMid slice",contentVisibility:T&&T.contentVisibility||"visible",className:T&&T.className||"",id:T&&T.id||"",runExpressions:!T||T.runExpressions===void 0||T.runExpressions},this.renderConfig.dpr=T&&T.dpr||1,this.animationItem.wrapper&&(this.renderConfig.dpr=T&&T.dpr||window.devicePixelRatio||1),this.renderedFrame=-1,this.globalData={frameNum:-1,_mdf:!1,renderConfig:this.renderConfig,currentGlobalAlpha:-1},this.contextData=new CVContextData,this.elements=[],this.pendingElements=[],this.transformMat=new Matrix,this.completeLayers=!1,this.rendererType="canvas",this.renderConfig.clearCanvas&&(this.ctxTransform=this.contextData.transform.bind(this.contextData),this.ctxOpacity=this.contextData.opacity.bind(this.contextData),this.ctxFillStyle=this.contextData.fillStyle.bind(this.contextData),this.ctxStrokeStyle=this.contextData.strokeStyle.bind(this.contextData),this.ctxLineWidth=this.contextData.lineWidth.bind(this.contextData),this.ctxLineCap=this.contextData.lineCap.bind(this.contextData),this.ctxLineJoin=this.contextData.lineJoin.bind(this.contextData),this.ctxMiterLimit=this.contextData.miterLimit.bind(this.contextData),this.ctxFill=this.contextData.fill.bind(this.contextData),this.ctxFillRect=this.contextData.fillRect.bind(this.contextData),this.ctxStroke=this.contextData.stroke.bind(this.contextData),this.save=this.contextData.save.bind(this.contextData))}extendPrototype([CanvasRendererBase],CanvasRenderer),CanvasRenderer.prototype.createComp=function(A){return new CVCompElement(A,this.globalData,this)};function HBaseElement(){}HBaseElement.prototype={checkBlendMode:function(){},initRendererElement:function(){this.baseElement=createTag(this.data.tg||"div"),this.data.hasMask?(this.svgElement=createNS("svg"),this.layerElement=createNS("g"),this.maskedElement=this.layerElement,this.svgElement.appendChild(this.layerElement),this.baseElement.appendChild(this.svgElement)):this.layerElement=this.baseElement,styleDiv(this.baseElement)},createContainerElements:function(){this.renderableEffectsManager=new CVEffects(this),this.transformedElement=this.baseElement,this.maskedElement=this.layerElement,this.data.ln&&this.layerElement.setAttribute("id",this.data.ln),this.data.cl&&this.layerElement.setAttribute("class",this.data.cl),this.data.bm!==0&&this.setBlendMode()},renderElement:function(){var T=this.transformedElement?this.transformedElement.style:{};if(this.finalTransform._matMdf){var E=this.finalTransform.mat.toCSS();T.transform=E,T.webkitTransform=E}this.finalTransform._opMdf&&(T.opacity=this.finalTransform.mProp.o.v)},renderFrame:function(){this.data.hd||this.hidden||(this.renderTransform(),this.renderRenderable(),this.renderElement(),this.renderInnerContent(),this._isFirstFrame&&(this._isFirstFrame=!1))},destroy:function(){this.layerElement=null,this.transformedElement=null,this.matteElement&&(this.matteElement=null),this.maskManager&&(this.maskManager.destroy(),this.maskManager=null)},createRenderableComponents:function(){this.maskManager=new MaskElement(this.data,this,this.globalData)},addEffects:function(){},setMatte:function(){}},HBaseElement.prototype.getBaseElement=SVGBaseElement.prototype.getBaseElement,HBaseElement.prototype.destroyBaseElement=HBaseElement.prototype.destroy,HBaseElement.prototype.buildElementParenting=BaseRenderer.prototype.buildElementParenting;function HSolidElement(A,T,E){this.initElement(A,T,E)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement],HSolidElement),HSolidElement.prototype.createContent=function(){var A;this.data.hasMask?(A=createNS("rect"),A.setAttribute("width",this.data.sw),A.setAttribute("height",this.data.sh),A.setAttribute("fill",this.data.sc),this.svgElement.setAttribute("width",this.data.sw),this.svgElement.setAttribute("height",this.data.sh)):(A=createTag("div"),A.style.width=this.data.sw+"px",A.style.height=this.data.sh+"px",A.style.backgroundColor=this.data.sc),this.layerElement.appendChild(A)};function HShapeElement(A,T,E){this.shapes=[],this.shapesData=A.shapes,this.stylesList=[],this.shapeModifiers=[],this.itemsData=[],this.processedElements=[],this.animatedContents=[],this.shapesContainer=createNS("g"),this.initElement(A,T,E),this.prevViewData=[],this.currentBBox={x:999999,y:-999999,h:0,w:0}}extendPrototype([BaseElement,TransformElement,HSolidElement,SVGShapeElement,HBaseElement,HierarchyElement,FrameElement,RenderableElement],HShapeElement),HShapeElement.prototype._renderShapeFrame=HShapeElement.prototype.renderInnerContent,HShapeElement.prototype.createContent=function(){var A;if(this.baseElement.style.fontSize=0,this.data.hasMask)this.layerElement.appendChild(this.shapesContainer),A=this.svgElement;else{A=createNS("svg");var T=this.comp.data?this.comp.data:this.globalData.compSize;A.setAttribute("width",T.w),A.setAttribute("height",T.h),A.appendChild(this.shapesContainer),this.layerElement.appendChild(A)}this.searchShapes(this.shapesData,this.itemsData,this.prevViewData,this.shapesContainer,0,[],!0),this.filterUniqueShapes(),this.shapeCont=A},HShapeElement.prototype.getTransformedPoint=function(A,T){var E,C=A.length;for(E=0;E<C;E+=1)T=A[E].mProps.v.applyToPointArray(T[0],T[1],0);return T},HShapeElement.prototype.calculateShapeBoundingBox=function(A,T){var E=A.sh.v,C=A.transformers,P,I=E._length,R,F,O,D;if(!(I<=1)){for(P=0;P<I-1;P+=1)R=this.getTransformedPoint(C,E.v[P]),F=this.getTransformedPoint(C,E.o[P]),O=this.getTransformedPoint(C,E.i[P+1]),D=this.getTransformedPoint(C,E.v[P+1]),this.checkBounds(R,F,O,D,T);E.c&&(R=this.getTransformedPoint(C,E.v[P]),F=this.getTransformedPoint(C,E.o[P]),O=this.getTransformedPoint(C,E.i[0]),D=this.getTransformedPoint(C,E.v[0]),this.checkBounds(R,F,O,D,T))}},HShapeElement.prototype.checkBounds=function(A,T,E,C,P){this.getBoundsOfCurve(A,T,E,C);var I=this.shapeBoundingBox;P.x=bmMin(I.left,P.x),P.xMax=bmMax(I.right,P.xMax),P.y=bmMin(I.top,P.y),P.yMax=bmMax(I.bottom,P.yMax)},HShapeElement.prototype.shapeBoundingBox={left:0,right:0,top:0,bottom:0},HShapeElement.prototype.tempBoundingBox={x:0,xMax:0,y:0,yMax:0,width:0,height:0},HShapeElement.prototype.getBoundsOfCurve=function(A,T,E,C){for(var P=[[A[0],C[0]],[A[1],C[1]]],I,R,F,O,D,L,B,V=0;V<2;++V)R=6*A[V]-12*T[V]+6*E[V],I=-3*A[V]+9*T[V]-9*E[V]+3*C[V],F=3*T[V]-3*A[V],R|=0,I|=0,F|=0,I===0&&R===0||(I===0?(O=-F/R,O>0&&O<1&&P[V].push(this.calculateF(O,A,T,E,C,V))):(D=R*R-4*F*I,D>=0&&(L=(-R+bmSqrt(D))/(2*I),L>0&&L<1&&P[V].push(this.calculateF(L,A,T,E,C,V)),B=(-R-bmSqrt(D))/(2*I),B>0&&B<1&&P[V].push(this.calculateF(B,A,T,E,C,V)))));this.shapeBoundingBox.left=bmMin.apply(null,P[0]),this.shapeBoundingBox.top=bmMin.apply(null,P[1]),this.shapeBoundingBox.right=bmMax.apply(null,P[0]),this.shapeBoundingBox.bottom=bmMax.apply(null,P[1])},HShapeElement.prototype.calculateF=function(A,T,E,C,P,I){return bmPow(1-A,3)*T[I]+3*bmPow(1-A,2)*A*E[I]+3*(1-A)*bmPow(A,2)*C[I]+bmPow(A,3)*P[I]},HShapeElement.prototype.calculateBoundingBox=function(A,T){var E,C=A.length;for(E=0;E<C;E+=1)A[E]&&A[E].sh?this.calculateShapeBoundingBox(A[E],T):A[E]&&A[E].it?this.calculateBoundingBox(A[E].it,T):A[E]&&A[E].style&&A[E].w&&this.expandStrokeBoundingBox(A[E].w,T)},HShapeElement.prototype.expandStrokeBoundingBox=function(A,T){var E=0;if(A.keyframes){for(var C=0;C<A.keyframes.length;C+=1){var P=A.keyframes[C].s;P>E&&(E=P)}E*=A.mult}else E=A.v*A.mult;T.x-=E,T.xMax+=E,T.y-=E,T.yMax+=E},HShapeElement.prototype.currentBoxContains=function(A){return this.currentBBox.x<=A.x&&this.currentBBox.y<=A.y&&this.currentBBox.width+this.currentBBox.x>=A.x+A.width&&this.currentBBox.height+this.currentBBox.y>=A.y+A.height},HShapeElement.prototype.renderInnerContent=function(){if(this._renderShapeFrame(),!this.hidden&&(this._isFirstFrame||this._mdf)){var A=this.tempBoundingBox,T=999999;if(A.x=T,A.xMax=-T,A.y=T,A.yMax=-T,this.calculateBoundingBox(this.itemsData,A),A.width=A.xMax<A.x?0:A.xMax-A.x,A.height=A.yMax<A.y?0:A.yMax-A.y,this.currentBoxContains(A))return;var E=!1;if(this.currentBBox.w!==A.width&&(this.currentBBox.w=A.width,this.shapeCont.setAttribute("width",A.width),E=!0),this.currentBBox.h!==A.height&&(this.currentBBox.h=A.height,this.shapeCont.setAttribute("height",A.height),E=!0),E||this.currentBBox.x!==A.x||this.currentBBox.y!==A.y){this.currentBBox.w=A.width,this.currentBBox.h=A.height,this.currentBBox.x=A.x,this.currentBBox.y=A.y,this.shapeCont.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h);var C=this.shapeCont.style,P="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";C.transform=P,C.webkitTransform=P}}};function HTextElement(A,T,E){this.textSpans=[],this.textPaths=[],this.currentBBox={x:999999,y:-999999,h:0,w:0},this.renderType="svg",this.isMasked=!1,this.initElement(A,T,E)}extendPrototype([BaseElement,TransformElement,HBaseElement,HierarchyElement,FrameElement,RenderableDOMElement,ITextElement],HTextElement),HTextElement.prototype.createContent=function(){if(this.isMasked=this.checkMasks(),this.isMasked){this.renderType="svg",this.compW=this.comp.data.w,this.compH=this.comp.data.h,this.svgElement.setAttribute("width",this.compW),this.svgElement.setAttribute("height",this.compH);var A=createNS("g");this.maskedElement.appendChild(A),this.innerElem=A}else this.renderType="html",this.innerElem=this.layerElement;this.checkParenting()},HTextElement.prototype.buildNewText=function(){var A=this.textProperty.currentData;this.renderedLetters=createSizedArray(A.l?A.l.length:0);var T=this.innerElem.style,E=A.fc?this.buildColor(A.fc):"rgba(0,0,0,0)";T.fill=E,T.color=E,A.sc&&(T.stroke=this.buildColor(A.sc),T.strokeWidth=A.sw+"px");var C=this.globalData.fontManager.getFontByName(A.f);if(!this.globalData.fontManager.chars)if(T.fontSize=A.finalSize+"px",T.lineHeight=A.finalSize+"px",C.fClass)this.innerElem.className=C.fClass;else{T.fontFamily=C.fFamily;var P=A.fWeight,I=A.fStyle;T.fontStyle=I,T.fontWeight=P}var R,F,O=A.l;F=O.length;var D,L,B,V=this.mHelper,U,z="",W=0;for(R=0;R<F;R+=1){if(this.globalData.fontManager.chars?(this.textPaths[W]?D=this.textPaths[W]:(D=createNS("path"),D.setAttribute("stroke-linecap",lineCapEnum[1]),D.setAttribute("stroke-linejoin",lineJoinEnum[2]),D.setAttribute("stroke-miterlimit","4")),this.isMasked||(this.textSpans[W]?(L=this.textSpans[W],B=L.children[0]):(L=createTag("div"),L.style.lineHeight=0,B=createNS("svg"),B.appendChild(D),styleDiv(L)))):this.isMasked?D=this.textPaths[W]?this.textPaths[W]:createNS("text"):this.textSpans[W]?(L=this.textSpans[W],D=this.textPaths[W]):(L=createTag("span"),styleDiv(L),D=createTag("span"),styleDiv(D),L.appendChild(D)),this.globalData.fontManager.chars){var Z=this.globalData.fontManager.getCharData(A.finalText[R],C.fStyle,this.globalData.fontManager.getFontByName(A.f).fFamily),X;if(Z?X=Z.data:X=null,V.reset(),X&&X.shapes&&X.shapes.length&&(U=X.shapes[0].it,V.scale(A.finalSize/100,A.finalSize/100),z=this.createPathShape(V,U),D.setAttribute("d",z)),this.isMasked)this.innerElem.appendChild(D);else{if(this.innerElem.appendChild(L),X&&X.shapes){document.body.appendChild(B);var K=B.getBBox();B.setAttribute("width",K.width+2),B.setAttribute("height",K.height+2),B.setAttribute("viewBox",K.x-1+" "+(K.y-1)+" "+(K.width+2)+" "+(K.height+2));var Y=B.style,Q="translate("+(K.x-1)+"px,"+(K.y-1)+"px)";Y.transform=Q,Y.webkitTransform=Q,O[R].yOffset=K.y-1}else B.setAttribute("width",1),B.setAttribute("height",1);L.appendChild(B)}}else if(D.textContent=O[R].val,D.setAttributeNS("http://www.w3.org/XML/1998/namespace","xml:space","preserve"),this.isMasked)this.innerElem.appendChild(D);else{this.innerElem.appendChild(L);var J=D.style,te="translate3d(0,"+-A.finalSize/1.2+"px,0)";J.transform=te,J.webkitTransform=te}this.isMasked?this.textSpans[W]=D:this.textSpans[W]=L,this.textSpans[W].style.display="block",this.textPaths[W]=D,W+=1}for(;W<this.textSpans.length;)this.textSpans[W].style.display="none",W+=1},HTextElement.prototype.renderInnerContent=function(){this.validateText();var A;if(this.data.singleShape){if(!this._isFirstFrame&&!this.lettersChangedFlag)return;if(this.isMasked&&this.finalTransform._matMdf){this.svgElement.setAttribute("viewBox",-this.finalTransform.mProp.p.v[0]+" "+-this.finalTransform.mProp.p.v[1]+" "+this.compW+" "+this.compH),A=this.svgElement.style;var T="translate("+-this.finalTransform.mProp.p.v[0]+"px,"+-this.finalTransform.mProp.p.v[1]+"px)";A.transform=T,A.webkitTransform=T}}if(this.textAnimator.getMeasures(this.textProperty.currentData,this.lettersChangedFlag),!(!this.lettersChangedFlag&&!this.textAnimator.lettersChangedFlag)){var E,C,P=0,I=this.textAnimator.renderedLetters,R=this.textProperty.currentData.l;C=R.length;var F,O,D;for(E=0;E<C;E+=1)R[E].n?P+=1:(O=this.textSpans[E],D=this.textPaths[E],F=I[P],P+=1,F._mdf.m&&(this.isMasked?O.setAttribute("transform",F.m):(O.style.webkitTransform=F.m,O.style.transform=F.m)),O.style.opacity=F.o,F.sw&&F._mdf.sw&&D.setAttribute("stroke-width",F.sw),F.sc&&F._mdf.sc&&D.setAttribute("stroke",F.sc),F.fc&&F._mdf.fc&&(D.setAttribute("fill",F.fc),D.style.color=F.fc));if(this.innerElem.getBBox&&!this.hidden&&(this._isFirstFrame||this._mdf)){var L=this.innerElem.getBBox();this.currentBBox.w!==L.width&&(this.currentBBox.w=L.width,this.svgElement.setAttribute("width",L.width)),this.currentBBox.h!==L.height&&(this.currentBBox.h=L.height,this.svgElement.setAttribute("height",L.height));var B=1;if(this.currentBBox.w!==L.width+B*2||this.currentBBox.h!==L.height+B*2||this.currentBBox.x!==L.x-B||this.currentBBox.y!==L.y-B){this.currentBBox.w=L.width+B*2,this.currentBBox.h=L.height+B*2,this.currentBBox.x=L.x-B,this.currentBBox.y=L.y-B,this.svgElement.setAttribute("viewBox",this.currentBBox.x+" "+this.currentBBox.y+" "+this.currentBBox.w+" "+this.currentBBox.h),A=this.svgElement.style;var V="translate("+this.currentBBox.x+"px,"+this.currentBBox.y+"px)";A.transform=V,A.webkitTransform=V}}}};function HCameraElement(A,T,E){this.initFrame(),this.initBaseData(A,T,E),this.initHierarchy();var C=PropertyFactory.getProp;if(this.pe=C(this,A.pe,0,0,this),A.ks.p.s?(this.px=C(this,A.ks.p.x,1,0,this),this.py=C(this,A.ks.p.y,1,0,this),this.pz=C(this,A.ks.p.z,1,0,this)):this.p=C(this,A.ks.p,1,0,this),A.ks.a&&(this.a=C(this,A.ks.a,1,0,this)),A.ks.or.k.length&&A.ks.or.k[0].to){var P,I=A.ks.or.k.length;for(P=0;P<I;P+=1)A.ks.or.k[P].to=null,A.ks.or.k[P].ti=null}this.or=C(this,A.ks.or,1,degToRads,this),this.or.sh=!0,this.rx=C(this,A.ks.rx,0,degToRads,this),this.ry=C(this,A.ks.ry,0,degToRads,this),this.rz=C(this,A.ks.rz,0,degToRads,this),this.mat=new Matrix,this._prevMat=new Matrix,this._isFirstFrame=!0,this.finalTransform={mProp:this}}extendPrototype([BaseElement,FrameElement,HierarchyElement],HCameraElement),HCameraElement.prototype.setup=function(){var A,T=this.comp.threeDElements.length,E,C,P;for(A=0;A<T;A+=1)if(E=this.comp.threeDElements[A],E.type==="3d"){C=E.perspectiveElem.style,P=E.container.style;var I=this.pe.v+"px",R="0px 0px 0px",F="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";C.perspective=I,C.webkitPerspective=I,P.transformOrigin=R,P.mozTransformOrigin=R,P.webkitTransformOrigin=R,C.transform=F,C.webkitTransform=F}},HCameraElement.prototype.createElements=function(){},HCameraElement.prototype.hide=function(){},HCameraElement.prototype.renderFrame=function(){var A=this._isFirstFrame,T,E;if(this.hierarchy)for(E=this.hierarchy.length,T=0;T<E;T+=1)A=this.hierarchy[T].finalTransform.mProp._mdf||A;if(A||this.pe._mdf||this.p&&this.p._mdf||this.px&&(this.px._mdf||this.py._mdf||this.pz._mdf)||this.rx._mdf||this.ry._mdf||this.rz._mdf||this.or._mdf||this.a&&this.a._mdf){if(this.mat.reset(),this.hierarchy)for(E=this.hierarchy.length-1,T=E;T>=0;T-=1){var C=this.hierarchy[T].finalTransform.mProp;this.mat.translate(-C.p.v[0],-C.p.v[1],C.p.v[2]),this.mat.rotateX(-C.or.v[0]).rotateY(-C.or.v[1]).rotateZ(C.or.v[2]),this.mat.rotateX(-C.rx.v).rotateY(-C.ry.v).rotateZ(C.rz.v),this.mat.scale(1/C.s.v[0],1/C.s.v[1],1/C.s.v[2]),this.mat.translate(C.a.v[0],C.a.v[1],C.a.v[2])}if(this.p?this.mat.translate(-this.p.v[0],-this.p.v[1],this.p.v[2]):this.mat.translate(-this.px.v,-this.py.v,this.pz.v),this.a){var P;this.p?P=[this.p.v[0]-this.a.v[0],this.p.v[1]-this.a.v[1],this.p.v[2]-this.a.v[2]]:P=[this.px.v-this.a.v[0],this.py.v-this.a.v[1],this.pz.v-this.a.v[2]];var I=Math.sqrt(Math.pow(P[0],2)+Math.pow(P[1],2)+Math.pow(P[2],2)),R=[P[0]/I,P[1]/I,P[2]/I],F=Math.sqrt(R[2]*R[2]+R[0]*R[0]),O=Math.atan2(R[1],F),D=Math.atan2(R[0],-R[2]);this.mat.rotateY(D).rotateX(-O)}this.mat.rotateX(-this.rx.v).rotateY(-this.ry.v).rotateZ(this.rz.v),this.mat.rotateX(-this.or.v[0]).rotateY(-this.or.v[1]).rotateZ(this.or.v[2]),this.mat.translate(this.globalData.compSize.w/2,this.globalData.compSize.h/2,0),this.mat.translate(0,0,this.pe.v);var L=!this._prevMat.equals(this.mat);if((L||this.pe._mdf)&&this.comp.threeDElements){E=this.comp.threeDElements.length;var B,V,U;for(T=0;T<E;T+=1)if(B=this.comp.threeDElements[T],B.type==="3d"){if(L){var z=this.mat.toCSS();U=B.container.style,U.transform=z,U.webkitTransform=z}this.pe._mdf&&(V=B.perspectiveElem.style,V.perspective=this.pe.v+"px",V.webkitPerspective=this.pe.v+"px")}this.mat.clone(this._prevMat)}}this._isFirstFrame=!1},HCameraElement.prototype.prepareFrame=function(A){this.prepareProperties(A,!0)},HCameraElement.prototype.destroy=function(){},HCameraElement.prototype.getBaseElement=function(){return null};function HImageElement(A,T,E){this.assetData=T.getAssetData(A.refId),this.initElement(A,T,E)}extendPrototype([BaseElement,TransformElement,HBaseElement,HSolidElement,HierarchyElement,FrameElement,RenderableElement],HImageElement),HImageElement.prototype.createContent=function(){var A=this.globalData.getAssetsPath(this.assetData),T=new Image;this.data.hasMask?(this.imageElem=createNS("image"),this.imageElem.setAttribute("width",this.assetData.w+"px"),this.imageElem.setAttribute("height",this.assetData.h+"px"),this.imageElem.setAttributeNS("http://www.w3.org/1999/xlink","href",A),this.layerElement.appendChild(this.imageElem),this.baseElement.setAttribute("width",this.assetData.w),this.baseElement.setAttribute("height",this.assetData.h)):this.layerElement.appendChild(T),T.crossOrigin="anonymous",T.src=A,this.data.ln&&this.baseElement.setAttribute("id",this.data.ln)};function HybridRendererBase(A,T){this.animationItem=A,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:T&&T.className||"",imagePreserveAspectRatio:T&&T.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(T&&T.hideOnTransparent===!1),filterSize:{width:T&&T.filterSize&&T.filterSize.width||"400%",height:T&&T.filterSize&&T.filterSize.height||"400%",x:T&&T.filterSize&&T.filterSize.x||"-100%",y:T&&T.filterSize&&T.filterSize.y||"-100%"}},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([BaseRenderer],HybridRendererBase),HybridRendererBase.prototype.buildItem=SVGRenderer.prototype.buildItem,HybridRendererBase.prototype.checkPendingElements=function(){for(;this.pendingElements.length;){var A=this.pendingElements.pop();A.checkParenting()}},HybridRendererBase.prototype.appendElementInPos=function(A,T){var E=A.getBaseElement();if(E){var C=this.layers[T];if(!C.ddd||!this.supports3d)if(this.threeDElements)this.addTo3dContainer(E,T);else{for(var P=0,I,R,F;P<T;)this.elements[P]&&this.elements[P]!==!0&&this.elements[P].getBaseElement&&(R=this.elements[P],F=this.layers[P].ddd?this.getThreeDContainerByPos(P):R.getBaseElement(),I=F||I),P+=1;I?(!C.ddd||!this.supports3d)&&this.layerElement.insertBefore(E,I):(!C.ddd||!this.supports3d)&&this.layerElement.appendChild(E)}else this.addTo3dContainer(E,T)}},HybridRendererBase.prototype.createShape=function(A){return this.supports3d?new HShapeElement(A,this.globalData,this):new SVGShapeElement(A,this.globalData,this)},HybridRendererBase.prototype.createText=function(A){return this.supports3d?new HTextElement(A,this.globalData,this):new SVGTextLottieElement(A,this.globalData,this)},HybridRendererBase.prototype.createCamera=function(A){return this.camera=new HCameraElement(A,this.globalData,this),this.camera},HybridRendererBase.prototype.createImage=function(A){return this.supports3d?new HImageElement(A,this.globalData,this):new IImageElement(A,this.globalData,this)},HybridRendererBase.prototype.createSolid=function(A){return this.supports3d?new HSolidElement(A,this.globalData,this):new ISolidElement(A,this.globalData,this)},HybridRendererBase.prototype.createNull=SVGRenderer.prototype.createNull,HybridRendererBase.prototype.getThreeDContainerByPos=function(A){for(var T=0,E=this.threeDElements.length;T<E;){if(this.threeDElements[T].startPos<=A&&this.threeDElements[T].endPos>=A)return this.threeDElements[T].perspectiveElem;T+=1}return null},HybridRendererBase.prototype.createThreeDContainer=function(A,T){var E=createTag("div"),C,P;styleDiv(E);var I=createTag("div");if(styleDiv(I),T==="3d"){C=E.style,C.width=this.globalData.compSize.w+"px",C.height=this.globalData.compSize.h+"px";var R="50% 50%";C.webkitTransformOrigin=R,C.mozTransformOrigin=R,C.transformOrigin=R,P=I.style;var F="matrix3d(1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1)";P.transform=F,P.webkitTransform=F}E.appendChild(I);var O={container:I,perspectiveElem:E,startPos:A,endPos:A,type:T};return this.threeDElements.push(O),O},HybridRendererBase.prototype.build3dContainers=function(){var A,T=this.layers.length,E,C="";for(A=0;A<T;A+=1)this.layers[A].ddd&&this.layers[A].ty!==3?(C!=="3d"&&(C="3d",E=this.createThreeDContainer(A,"3d")),E.endPos=Math.max(E.endPos,A)):(C!=="2d"&&(C="2d",E=this.createThreeDContainer(A,"2d")),E.endPos=Math.max(E.endPos,A));for(T=this.threeDElements.length,A=T-1;A>=0;A-=1)this.resizerElem.appendChild(this.threeDElements[A].perspectiveElem)},HybridRendererBase.prototype.addTo3dContainer=function(A,T){for(var E=0,C=this.threeDElements.length;E<C;){if(T<=this.threeDElements[E].endPos){for(var P=this.threeDElements[E].startPos,I;P<T;)this.elements[P]&&this.elements[P].getBaseElement&&(I=this.elements[P].getBaseElement()),P+=1;I?this.threeDElements[E].container.insertBefore(A,I):this.threeDElements[E].container.appendChild(A);break}E+=1}},HybridRendererBase.prototype.configAnimation=function(A){var T=createTag("div"),E=this.animationItem.wrapper,C=T.style;C.width=A.w+"px",C.height=A.h+"px",this.resizerElem=T,styleDiv(T),C.transformStyle="flat",C.mozTransformStyle="flat",C.webkitTransformStyle="flat",this.renderConfig.className&&T.setAttribute("class",this.renderConfig.className),E.appendChild(T),C.overflow="hidden";var P=createNS("svg");P.setAttribute("width","1"),P.setAttribute("height","1"),styleDiv(P),this.resizerElem.appendChild(P);var I=createNS("defs");P.appendChild(I),this.data=A,this.setupGlobalData(A,P),this.globalData.defs=I,this.layers=A.layers,this.layerElement=this.resizerElem,this.build3dContainers(),this.updateContainerSize()},HybridRendererBase.prototype.destroy=function(){this.animationItem.wrapper&&(this.animationItem.wrapper.innerText=""),this.animationItem.container=null,this.globalData.defs=null;var A,T=this.layers?this.layers.length:0;for(A=0;A<T;A+=1)this.elements[A]&&this.elements[A].destroy&&this.elements[A].destroy();this.elements.length=0,this.destroyed=!0,this.animationItem=null},HybridRendererBase.prototype.updateContainerSize=function(){var A=this.animationItem.wrapper.offsetWidth,T=this.animationItem.wrapper.offsetHeight,E=A/T,C=this.globalData.compSize.w/this.globalData.compSize.h,P,I,R,F;C>E?(P=A/this.globalData.compSize.w,I=A/this.globalData.compSize.w,R=0,F=(T-this.globalData.compSize.h*(A/this.globalData.compSize.w))/2):(P=T/this.globalData.compSize.h,I=T/this.globalData.compSize.h,R=(A-this.globalData.compSize.w*(T/this.globalData.compSize.h))/2,F=0);var O=this.resizerElem.style;O.webkitTransform="matrix3d("+P+",0,0,0,0,"+I+",0,0,0,0,1,0,"+R+","+F+",0,1)",O.transform=O.webkitTransform},HybridRendererBase.prototype.renderFrame=SVGRenderer.prototype.renderFrame,HybridRendererBase.prototype.hide=function(){this.resizerElem.style.display="none"},HybridRendererBase.prototype.show=function(){this.resizerElem.style.display="block"},HybridRendererBase.prototype.initItems=function(){if(this.buildAllItems(),this.camera)this.camera.setup();else{var A=this.globalData.compSize.w,T=this.globalData.compSize.h,E,C=this.threeDElements.length;for(E=0;E<C;E+=1){var P=this.threeDElements[E].perspectiveElem.style;P.webkitPerspective=Math.sqrt(Math.pow(A,2)+Math.pow(T,2))+"px",P.perspective=P.webkitPerspective}}},HybridRendererBase.prototype.searchExtraCompositions=function(A){var T,E=A.length,C=createTag("div");for(T=0;T<E;T+=1)if(A[T].xt){var P=this.createComp(A[T],C,this.globalData.comp,null);P.initExpressions(),this.globalData.projectInterface.registerComposition(P)}};function HCompElement(A,T,E){this.layers=A.layers,this.supports3d=!A.hasMask,this.completeLayers=!1,this.pendingElements=[],this.elements=this.layers?createSizedArray(this.layers.length):[],this.initElement(A,T,E),this.tm=A.tm?PropertyFactory.getProp(this,A.tm,0,T.frameRate,this):{_placeholder:!0}}extendPrototype([HybridRendererBase,ICompElement,HBaseElement],HCompElement),HCompElement.prototype._createBaseContainerElements=HCompElement.prototype.createContainerElements,HCompElement.prototype.createContainerElements=function(){this._createBaseContainerElements(),this.data.hasMask?(this.svgElement.setAttribute("width",this.data.w),this.svgElement.setAttribute("height",this.data.h),this.transformedElement=this.baseElement):this.transformedElement=this.layerElement},HCompElement.prototype.addTo3dContainer=function(A,T){for(var E=0,C;E<T;)this.elements[E]&&this.elements[E].getBaseElement&&(C=this.elements[E].getBaseElement()),E+=1;C?this.layerElement.insertBefore(A,C):this.layerElement.appendChild(A)},HCompElement.prototype.createComp=function(A){return this.supports3d?new HCompElement(A,this.globalData,this):new SVGCompElement(A,this.globalData,this)};function HybridRenderer(A,T){this.animationItem=A,this.layers=null,this.renderedFrame=-1,this.renderConfig={className:T&&T.className||"",imagePreserveAspectRatio:T&&T.imagePreserveAspectRatio||"xMidYMid slice",hideOnTransparent:!(T&&T.hideOnTransparent===!1),filterSize:{width:T&&T.filterSize&&T.filterSize.width||"400%",height:T&&T.filterSize&&T.filterSize.height||"400%",x:T&&T.filterSize&&T.filterSize.x||"-100%",y:T&&T.filterSize&&T.filterSize.y||"-100%"},runExpressions:!T||T.runExpressions===void 0||T.runExpressions},this.globalData={_mdf:!1,frameNum:-1,renderConfig:this.renderConfig},this.pendingElements=[],this.elements=[],this.threeDElements=[],this.destroyed=!1,this.camera=null,this.supports3d=!0,this.rendererType="html"}extendPrototype([HybridRendererBase],HybridRenderer),HybridRenderer.prototype.createComp=function(A){return this.supports3d?new HCompElement(A,this.globalData,this):new SVGCompElement(A,this.globalData,this)};var CompExpressionInterface=function(){return function(A){function T(E){for(var C=0,P=A.layers.length;C<P;){if(A.layers[C].nm===E||A.layers[C].ind===E)return A.elements[C].layerInterface;C+=1}return null}return Object.defineProperty(T,"_name",{value:A.data.nm}),T.layer=T,T.pixelAspect=1,T.height=A.data.h||A.globalData.compSize.h,T.width=A.data.w||A.globalData.compSize.w,T.pixelAspect=1,T.frameDuration=1/A.globalData.frameRate,T.displayStartTime=0,T.numLayers=A.layers.length,T}}();function _typeof$2(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$2=function(E){return typeof E}:_typeof$2=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},_typeof$2(A)}function seedRandom(A,T){var E=this,C=256,P=6,I=52,R="random",F=T.pow(C,P),O=T.pow(2,I),D=O*2,L=C-1,B;function V(Y,Q,J){var te=[];Q=Q===!0?{entropy:!0}:Q||{};var ie=Z(W(Q.entropy?[Y,K(A)]:Y===null?X():Y,3),te),ne=new U(te),he=function(){for(var ye=ne.g(P),de=F,fe=0;ye<O;)ye=(ye+fe)*C,de*=C,fe=ne.g(1);for(;ye>=D;)ye/=2,de/=2,fe>>>=1;return(ye+fe)/de};return he.int32=function(){return ne.g(4)|0},he.quick=function(){return ne.g(4)/4294967296},he.double=he,Z(K(ne.S),A),(Q.pass||J||function(ve,ye,de,fe){return fe&&(fe.S&&z(fe,ne),ve.state=function(){return z(ne,{})}),de?(T[R]=ve,ye):ve})(he,ie,"global"in Q?Q.global:this==T,Q.state)}T["seed"+R]=V;function U(Y){var Q,J=Y.length,te=this,ie=0,ne=te.i=te.j=0,he=te.S=[];for(J||(Y=[J++]);ie<C;)he[ie]=ie++;for(ie=0;ie<C;ie++)he[ie]=he[ne=L&ne+Y[ie%J]+(Q=he[ie])],he[ne]=Q;te.g=function(ve){for(var ye,de=0,fe=te.i,ue=te.j,ge=te.S;ve--;)ye=ge[fe=L&fe+1],de=de*C+ge[L&(ge[fe]=ge[ue=L&ue+ye])+(ge[ue]=ye)];return te.i=fe,te.j=ue,de}}function z(Y,Q){return Q.i=Y.i,Q.j=Y.j,Q.S=Y.S.slice(),Q}function W(Y,Q){var J=[],te=_typeof$2(Y),ie;if(Q&&te=="object")for(ie in Y)try{J.push(W(Y[ie],Q-1))}catch{}return J.length?J:te=="string"?Y:Y+"\0"}function Z(Y,Q){for(var J=Y+"",te,ie=0;ie<J.length;)Q[L&ie]=L&(te^=Q[L&ie]*19)+J.charCodeAt(ie++);return K(Q)}function X(){try{var Y=new Uint8Array(C);return(E.crypto||E.msCrypto).getRandomValues(Y),K(Y)}catch{var Q=E.navigator,J=Q&&Q.plugins;return[+new Date,E,J,E.screen,K(A)]}}function K(Y){return String.fromCharCode.apply(0,Y)}Z(T.random(),A)}function initialize$2(A){seedRandom([],A)}var propTypes={SHAPE:"shape"};function _typeof$1(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof$1=function(E){return typeof E}:_typeof$1=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},_typeof$1(A)}var ExpressionManager=function(){var ob={},Math=BMMath,window=null,document=null,XMLHttpRequest=null,fetch=null,frames=null,_lottieGlobal={};initialize$2(BMMath);function resetFrame(){_lottieGlobal={}}function $bm_isInstanceOfArray(A){return A.constructor===Array||A.constructor===Float32Array}function isNumerable(A,T){return A==="number"||T instanceof Number||A==="boolean"||A==="string"}function $bm_neg(A){var T=_typeof$1(A);if(T==="number"||A instanceof Number||T==="boolean")return-A;if($bm_isInstanceOfArray(A)){var E,C=A.length,P=[];for(E=0;E<C;E+=1)P[E]=-A[E];return P}return A.propType?A.v:-A}var easeInBez=BezierFactory.getBezierEasing(.333,0,.833,.833,"easeIn").get,easeOutBez=BezierFactory.getBezierEasing(.167,.167,.667,1,"easeOut").get,easeInOutBez=BezierFactory.getBezierEasing(.33,0,.667,1,"easeInOut").get;function sum(A,T){var E=_typeof$1(A),C=_typeof$1(T);if(isNumerable(E,A)&&isNumerable(C,T)||E==="string"||C==="string")return A+T;if($bm_isInstanceOfArray(A)&&isNumerable(C,T))return A=A.slice(0),A[0]+=T,A;if(isNumerable(E,A)&&$bm_isInstanceOfArray(T))return T=T.slice(0),T[0]=A+T[0],T;if($bm_isInstanceOfArray(A)&&$bm_isInstanceOfArray(T)){for(var P=0,I=A.length,R=T.length,F=[];P<I||P<R;)(typeof A[P]=="number"||A[P]instanceof Number)&&(typeof T[P]=="number"||T[P]instanceof Number)?F[P]=A[P]+T[P]:F[P]=T[P]===void 0?A[P]:A[P]||T[P],P+=1;return F}return 0}var add=sum;function sub(A,T){var E=_typeof$1(A),C=_typeof$1(T);if(isNumerable(E,A)&&isNumerable(C,T))return E==="string"&&(A=parseInt(A,10)),C==="string"&&(T=parseInt(T,10)),A-T;if($bm_isInstanceOfArray(A)&&isNumerable(C,T))return A=A.slice(0),A[0]-=T,A;if(isNumerable(E,A)&&$bm_isInstanceOfArray(T))return T=T.slice(0),T[0]=A-T[0],T;if($bm_isInstanceOfArray(A)&&$bm_isInstanceOfArray(T)){for(var P=0,I=A.length,R=T.length,F=[];P<I||P<R;)(typeof A[P]=="number"||A[P]instanceof Number)&&(typeof T[P]=="number"||T[P]instanceof Number)?F[P]=A[P]-T[P]:F[P]=T[P]===void 0?A[P]:A[P]||T[P],P+=1;return F}return 0}function mul(A,T){var E=_typeof$1(A),C=_typeof$1(T),P;if(isNumerable(E,A)&&isNumerable(C,T))return A*T;var I,R;if($bm_isInstanceOfArray(A)&&isNumerable(C,T)){for(R=A.length,P=createTypedArray("float32",R),I=0;I<R;I+=1)P[I]=A[I]*T;return P}if(isNumerable(E,A)&&$bm_isInstanceOfArray(T)){for(R=T.length,P=createTypedArray("float32",R),I=0;I<R;I+=1)P[I]=A*T[I];return P}return 0}function div(A,T){var E=_typeof$1(A),C=_typeof$1(T),P;if(isNumerable(E,A)&&isNumerable(C,T))return A/T;var I,R;if($bm_isInstanceOfArray(A)&&isNumerable(C,T)){for(R=A.length,P=createTypedArray("float32",R),I=0;I<R;I+=1)P[I]=A[I]/T;return P}if(isNumerable(E,A)&&$bm_isInstanceOfArray(T)){for(R=T.length,P=createTypedArray("float32",R),I=0;I<R;I+=1)P[I]=A/T[I];return P}return 0}function mod(A,T){return typeof A=="string"&&(A=parseInt(A,10)),typeof T=="string"&&(T=parseInt(T,10)),A%T}var $bm_sum=sum,$bm_sub=sub,$bm_mul=mul,$bm_div=div,$bm_mod=mod;function clamp(A,T,E){if(T>E){var C=E;E=T,T=C}return Math.min(Math.max(A,T),E)}function radiansToDegrees(A){return A/degToRads}var radians_to_degrees=radiansToDegrees;function degreesToRadians(A){return A*degToRads}var degrees_to_radians=radiansToDegrees,helperLengthArray=[0,0,0,0,0,0];function length(A,T){if(typeof A=="number"||A instanceof Number)return T=T||0,Math.abs(A-T);T||(T=helperLengthArray);var E,C=Math.min(A.length,T.length),P=0;for(E=0;E<C;E+=1)P+=Math.pow(T[E]-A[E],2);return Math.sqrt(P)}function normalize(A){return div(A,length(A))}function rgbToHsl(A){var T=A[0],E=A[1],C=A[2],P=Math.max(T,E,C),I=Math.min(T,E,C),R,F,O=(P+I)/2;if(P===I)R=0,F=0;else{var D=P-I;switch(F=O>.5?D/(2-P-I):D/(P+I),P){case T:R=(E-C)/D+(E<C?6:0);break;case E:R=(C-T)/D+2;break;case C:R=(T-E)/D+4;break}R/=6}return[R,F,O,A[3]]}function hue2rgb(A,T,E){return E<0&&(E+=1),E>1&&(E-=1),E<1/6?A+(T-A)*6*E:E<1/2?T:E<2/3?A+(T-A)*(2/3-E)*6:A}function hslToRgb(A){var T=A[0],E=A[1],C=A[2],P,I,R;if(E===0)P=C,R=C,I=C;else{var F=C<.5?C*(1+E):C+E-C*E,O=2*C-F;P=hue2rgb(O,F,T+1/3),I=hue2rgb(O,F,T),R=hue2rgb(O,F,T-1/3)}return[P,I,R,A[3]]}function linear(A,T,E,C,P){if((C===void 0||P===void 0)&&(C=T,P=E,T=0,E=1),E<T){var I=E;E=T,T=I}if(A<=T)return C;if(A>=E)return P;var R=E===T?0:(A-T)/(E-T);if(!C.length)return C+(P-C)*R;var F,O=C.length,D=createTypedArray("float32",O);for(F=0;F<O;F+=1)D[F]=C[F]+(P[F]-C[F])*R;return D}function random(A,T){if(T===void 0&&(A===void 0?(A=0,T=1):(T=A,A=void 0)),T.length){var E,C=T.length;A||(A=createTypedArray("float32",C));var P=createTypedArray("float32",C),I=BMMath.random();for(E=0;E<C;E+=1)P[E]=A[E]+I*(T[E]-A[E]);return P}A===void 0&&(A=0);var R=BMMath.random();return A+R*(T-A)}function createPath(A,T,E,C){var P,I=A.length,R=shapePool.newElement();R.setPathData(!!C,I);var F=[0,0],O,D;for(P=0;P<I;P+=1)O=T&&T[P]?T[P]:F,D=E&&E[P]?E[P]:F,R.setTripleAt(A[P][0],A[P][1],D[0]+A[P][0],D[1]+A[P][1],O[0]+A[P][0],O[1]+A[P][1],P,!0);return R}function initiateExpression(elem,data,property){function noOp(A){return A}if(!elem.globalData.renderConfig.runExpressions)return noOp;var val=data.x,needsVelocity=/velocity(?![\w\d])/.test(val),_needsRandom=val.indexOf("random")!==-1,elemType=elem.data.ty,transform,$bm_transform,content,effect,thisProperty=property;thisProperty.valueAtTime=thisProperty.getValueAtTime,Object.defineProperty(thisProperty,"value",{get:function(){return thisProperty.v}}),elem.comp.frameDuration=1/elem.comp.globalData.frameRate,elem.comp.displayStartTime=0;var inPoint=elem.data.ip/elem.comp.globalData.frameRate,outPoint=elem.data.op/elem.comp.globalData.frameRate,width=elem.data.sw?elem.data.sw:0,height=elem.data.sh?elem.data.sh:0,name=elem.data.nm,loopIn,loop_in,loopOut,loop_out,smooth,toWorld,fromWorld,fromComp,toComp,fromCompToSurface,position,rotation,anchorPoint,scale,thisLayer,thisComp,mask,valueAtTime,velocityAtTime,scoped_bm_rt,expression_function=eval("[function _expression_function(){"+val+";scoped_bm_rt=$bm_rt}]")[0],numKeys=property.kf?data.k.length:0,active=!this.data||this.data.hd!==!0,wiggle=(function A(T,E){var C,P,I=this.pv.length?this.pv.length:1,R=createTypedArray("float32",I);T=5;var F=Math.floor(time*T);for(C=0,P=0;C<F;){for(P=0;P<I;P+=1)R[P]+=-E+E*2*BMMath.random();C+=1}var O=time*T,D=O-Math.floor(O),L=createTypedArray("float32",I);if(I>1){for(P=0;P<I;P+=1)L[P]=this.pv[P]+R[P]+(-E+E*2*BMMath.random())*D;return L}return this.pv+R[0]+(-E+E*2*BMMath.random())*D}).bind(this);thisProperty.loopIn&&(loopIn=thisProperty.loopIn.bind(thisProperty),loop_in=loopIn),thisProperty.loopOut&&(loopOut=thisProperty.loopOut.bind(thisProperty),loop_out=loopOut),thisProperty.smooth&&(smooth=thisProperty.smooth.bind(thisProperty));function loopInDuration(A,T){return loopIn(A,T,!0)}function loopOutDuration(A,T){return loopOut(A,T,!0)}this.getValueAtTime&&(valueAtTime=this.getValueAtTime.bind(this)),this.getVelocityAtTime&&(velocityAtTime=this.getVelocityAtTime.bind(this));var comp=elem.comp.globalData.projectInterface.bind(elem.comp.globalData.projectInterface);function lookAt(A,T){var E=[T[0]-A[0],T[1]-A[1],T[2]-A[2]],C=Math.atan2(E[0],Math.sqrt(E[1]*E[1]+E[2]*E[2]))/degToRads,P=-Math.atan2(E[1],E[2])/degToRads;return[P,C,0]}function easeOut(A,T,E,C,P){return applyEase(easeOutBez,A,T,E,C,P)}function easeIn(A,T,E,C,P){return applyEase(easeInBez,A,T,E,C,P)}function ease(A,T,E,C,P){return applyEase(easeInOutBez,A,T,E,C,P)}function applyEase(A,T,E,C,P,I){P===void 0?(P=E,I=C):T=(T-E)/(C-E),T>1?T=1:T<0&&(T=0);var R=A(T);if($bm_isInstanceOfArray(P)){var F,O=P.length,D=createTypedArray("float32",O);for(F=0;F<O;F+=1)D[F]=(I[F]-P[F])*R+P[F];return D}return(I-P)*R+P}function nearestKey(A){var T,E=data.k.length,C,P;if(!data.k.length||typeof data.k[0]=="number")C=0,P=0;else if(C=-1,A*=elem.comp.globalData.frameRate,A<data.k[0].t)C=1,P=data.k[0].t;else{for(T=0;T<E-1;T+=1)if(A===data.k[T].t){C=T+1,P=data.k[T].t;break}else if(A>data.k[T].t&&A<data.k[T+1].t){A-data.k[T].t>data.k[T+1].t-A?(C=T+2,P=data.k[T+1].t):(C=T+1,P=data.k[T].t);break}C===-1&&(C=T+1,P=data.k[T].t)}var I={};return I.index=C,I.time=P/elem.comp.globalData.frameRate,I}function key(A){var T,E,C;if(!data.k.length||typeof data.k[0]=="number")throw new Error("The property has no keyframe at index "+A);A-=1,T={time:data.k[A].t/elem.comp.globalData.frameRate,value:[]};var P=Object.prototype.hasOwnProperty.call(data.k[A],"s")?data.k[A].s:data.k[A-1].e;for(C=P.length,E=0;E<C;E+=1)T[E]=P[E],T.value[E]=P[E];return T}function framesToTime(A,T){return T||(T=elem.comp.globalData.frameRate),A/T}function timeToFrames(A,T){return!A&&A!==0&&(A=time),T||(T=elem.comp.globalData.frameRate),A*T}function seedRandom(A){BMMath.seedrandom(randSeed+A)}function sourceRectAtTime(){return elem.sourceRectAtTime()}function substring(A,T){return typeof value=="string"?T===void 0?value.substring(A):value.substring(A,T):""}function substr(A,T){return typeof value=="string"?T===void 0?value.substr(A):value.substr(A,T):""}function posterizeTime(A){time=A===0?0:Math.floor(time*A)/A,value=valueAtTime(time)}var time,velocity,value,text,textIndex,textTotal,selectorValue,index=elem.data.ind,hasParent=!!(elem.hierarchy&&elem.hierarchy.length),parent,randSeed=Math.floor(Math.random()*1e6),globalData=elem.globalData;function executeExpression(A){return value=A,this.frameExpressionId===elem.globalData.frameId&&this.propType!=="textSelector"?value:(this.propType==="textSelector"&&(textIndex=this.textIndex,textTotal=this.textTotal,selectorValue=this.selectorValue),thisLayer||(text=elem.layerInterface.text,thisLayer=elem.layerInterface,thisComp=elem.comp.compInterface,toWorld=thisLayer.toWorld.bind(thisLayer),fromWorld=thisLayer.fromWorld.bind(thisLayer),fromComp=thisLayer.fromComp.bind(thisLayer),toComp=thisLayer.toComp.bind(thisLayer),mask=thisLayer.mask?thisLayer.mask.bind(thisLayer):null,fromCompToSurface=fromComp),transform||(transform=elem.layerInterface("ADBE Transform Group"),$bm_transform=transform,transform&&(anchorPoint=transform.anchorPoint)),elemType===4&&!content&&(content=thisLayer("ADBE Root Vectors Group")),effect||(effect=thisLayer(4)),hasParent=!!(elem.hierarchy&&elem.hierarchy.length),hasParent&&!parent&&(parent=elem.hierarchy[0].layerInterface),time=this.comp.renderedFrame/this.comp.globalData.frameRate,_needsRandom&&seedRandom(randSeed+time),needsVelocity&&(velocity=velocityAtTime(time)),expression_function(),this.frameExpressionId=elem.globalData.frameId,scoped_bm_rt=scoped_bm_rt.propType===propTypes.SHAPE?scoped_bm_rt.v:scoped_bm_rt,scoped_bm_rt)}return executeExpression.__preventDeadCodeRemoval=[$bm_transform,anchorPoint,time,velocity,inPoint,outPoint,width,height,name,loop_in,loop_out,smooth,toComp,fromCompToSurface,toWorld,fromWorld,mask,position,rotation,scale,thisComp,numKeys,active,wiggle,loopInDuration,loopOutDuration,comp,lookAt,easeOut,easeIn,ease,nearestKey,key,text,textIndex,textTotal,selectorValue,framesToTime,timeToFrames,sourceRectAtTime,substring,substr,posterizeTime,index,globalData],executeExpression}return ob.initiateExpression=initiateExpression,ob.__preventDeadCodeRemoval=[window,document,XMLHttpRequest,fetch,frames,$bm_neg,add,$bm_sum,$bm_sub,$bm_mul,$bm_div,$bm_mod,clamp,radians_to_degrees,degreesToRadians,degrees_to_radians,normalize,rgbToHsl,hslToRgb,linear,random,createPath,_lottieGlobal],ob.resetFrame=resetFrame,ob}(),Expressions=function(){var A={};A.initExpressions=T,A.resetFrame=ExpressionManager.resetFrame;function T(E){var C=0,P=[];function I(){C+=1}function R(){C-=1,C===0&&O()}function F(D){P.indexOf(D)===-1&&P.push(D)}function O(){var D,L=P.length;for(D=0;D<L;D+=1)P[D].release();P.length=0}E.renderer.compInterface=CompExpressionInterface(E.renderer),E.renderer.globalData.projectInterface.registerComposition(E.renderer),E.renderer.globalData.pushExpression=I,E.renderer.globalData.popExpression=R,E.renderer.globalData.registerExpressionProperty=F}return A}(),MaskManagerInterface=function(){function A(E,C){this._mask=E,this._data=C}Object.defineProperty(A.prototype,"maskPath",{get:function(){return this._mask.prop.k&&this._mask.prop.getValue(),this._mask.prop}}),Object.defineProperty(A.prototype,"maskOpacity",{get:function(){return this._mask.op.k&&this._mask.op.getValue(),this._mask.op.v*100}});var T=function(C){var P=createSizedArray(C.viewData.length),I,R=C.viewData.length;for(I=0;I<R;I+=1)P[I]=new A(C.viewData[I],C.masksProperties[I]);var F=function(D){for(I=0;I<R;){if(C.masksProperties[I].nm===D)return P[I];I+=1}return null};return F};return T}(),ExpressionPropertyInterface=function(){var A={pv:0,v:0,mult:1},T={pv:[0,0,0],v:[0,0,0],mult:1};function E(R,F,O){Object.defineProperty(R,"velocity",{get:function(){return F.getVelocityAtTime(F.comp.currentFrame)}}),R.numKeys=F.keyframes?F.keyframes.length:0,R.key=function(D){if(!R.numKeys)return 0;var L="";"s"in F.keyframes[D-1]?L=F.keyframes[D-1].s:"e"in F.keyframes[D-2]?L=F.keyframes[D-2].e:L=F.keyframes[D-2].s;var B=O==="unidimensional"?new Number(L):Object.assign({},L);return B.time=F.keyframes[D-1].t/F.elem.comp.globalData.frameRate,B.value=O==="unidimensional"?L[0]:L,B},R.valueAtTime=F.getValueAtTime,R.speedAtTime=F.getSpeedAtTime,R.velocityAtTime=F.getVelocityAtTime,R.propertyGroup=F.propertyGroup}function C(R){(!R||!("pv"in R))&&(R=A);var F=1/R.mult,O=R.pv*F,D=new Number(O);return D.value=O,E(D,R,"unidimensional"),function(){return R.k&&R.getValue(),O=R.v*F,D.value!==O&&(D=new Number(O),D.value=O,E(D,R,"unidimensional")),D}}function P(R){(!R||!("pv"in R))&&(R=T);var F=1/R.mult,O=R.data&&R.data.l||R.pv.length,D=createTypedArray("float32",O),L=createTypedArray("float32",O);return D.value=L,E(D,R,"multidimensional"),function(){R.k&&R.getValue();for(var B=0;B<O;B+=1)L[B]=R.v[B]*F,D[B]=L[B];return D}}function I(){return A}return function(R){return R?R.propType==="unidimensional"?C(R):P(R):I}}(),TransformExpressionInterface=function(){return function(A){function T(R){switch(R){case"scale":case"Scale":case"ADBE Scale":case 6:return T.scale;case"rotation":case"Rotation":case"ADBE Rotation":case"ADBE Rotate Z":case 10:return T.rotation;case"ADBE Rotate X":return T.xRotation;case"ADBE Rotate Y":return T.yRotation;case"position":case"Position":case"ADBE Position":case 2:return T.position;case"ADBE Position_0":return T.xPosition;case"ADBE Position_1":return T.yPosition;case"ADBE Position_2":return T.zPosition;case"anchorPoint":case"AnchorPoint":case"Anchor Point":case"ADBE AnchorPoint":case 1:return T.anchorPoint;case"opacity":case"Opacity":case 11:return T.opacity;default:return null}}Object.defineProperty(T,"rotation",{get:ExpressionPropertyInterface(A.r||A.rz)}),Object.defineProperty(T,"zRotation",{get:ExpressionPropertyInterface(A.rz||A.r)}),Object.defineProperty(T,"xRotation",{get:ExpressionPropertyInterface(A.rx)}),Object.defineProperty(T,"yRotation",{get:ExpressionPropertyInterface(A.ry)}),Object.defineProperty(T,"scale",{get:ExpressionPropertyInterface(A.s)});var E,C,P,I;return A.p?I=ExpressionPropertyInterface(A.p):(E=ExpressionPropertyInterface(A.px),C=ExpressionPropertyInterface(A.py),A.pz&&(P=ExpressionPropertyInterface(A.pz))),Object.defineProperty(T,"position",{get:function(){return A.p?I():[E(),C(),P?P():0]}}),Object.defineProperty(T,"xPosition",{get:ExpressionPropertyInterface(A.px)}),Object.defineProperty(T,"yPosition",{get:ExpressionPropertyInterface(A.py)}),Object.defineProperty(T,"zPosition",{get:ExpressionPropertyInterface(A.pz)}),Object.defineProperty(T,"anchorPoint",{get:ExpressionPropertyInterface(A.a)}),Object.defineProperty(T,"opacity",{get:ExpressionPropertyInterface(A.o)}),Object.defineProperty(T,"skew",{get:ExpressionPropertyInterface(A.sk)}),Object.defineProperty(T,"skewAxis",{get:ExpressionPropertyInterface(A.sa)}),Object.defineProperty(T,"orientation",{get:ExpressionPropertyInterface(A.or)}),T}}(),LayerExpressionInterface=function(){function A(D){var L=new Matrix;if(D!==void 0){var B=this._elem.finalTransform.mProp.getValueAtTime(D);B.clone(L)}else{var V=this._elem.finalTransform.mProp;V.applyToMatrix(L)}return L}function T(D,L){var B=this.getMatrix(L);return B.props[12]=0,B.props[13]=0,B.props[14]=0,this.applyPoint(B,D)}function E(D,L){var B=this.getMatrix(L);return this.applyPoint(B,D)}function C(D,L){var B=this.getMatrix(L);return B.props[12]=0,B.props[13]=0,B.props[14]=0,this.invertPoint(B,D)}function P(D,L){var B=this.getMatrix(L);return this.invertPoint(B,D)}function I(D,L){if(this._elem.hierarchy&&this._elem.hierarchy.length){var B,V=this._elem.hierarchy.length;for(B=0;B<V;B+=1)this._elem.hierarchy[B].finalTransform.mProp.applyToMatrix(D)}return D.applyToPointArray(L[0],L[1],L[2]||0)}function R(D,L){if(this._elem.hierarchy&&this._elem.hierarchy.length){var B,V=this._elem.hierarchy.length;for(B=0;B<V;B+=1)this._elem.hierarchy[B].finalTransform.mProp.applyToMatrix(D)}return D.inversePoint(L)}function F(D){var L=new Matrix;if(L.reset(),this._elem.finalTransform.mProp.applyToMatrix(L),this._elem.hierarchy&&this._elem.hierarchy.length){var B,V=this._elem.hierarchy.length;for(B=0;B<V;B+=1)this._elem.hierarchy[B].finalTransform.mProp.applyToMatrix(L);return L.inversePoint(D)}return L.inversePoint(D)}function O(){return[1,1,1,1]}return function(D){var L;function B(W){U.mask=new MaskManagerInterface(W,D)}function V(W){U.effect=W}function U(W){switch(W){case"ADBE Root Vectors Group":case"Contents":case 2:return U.shapeInterface;case 1:case 6:case"Transform":case"transform":case"ADBE Transform Group":return L;case 4:case"ADBE Effect Parade":case"effects":case"Effects":return U.effect;case"ADBE Text Properties":return U.textInterface;default:return null}}U.getMatrix=A,U.invertPoint=R,U.applyPoint=I,U.toWorld=E,U.toWorldVec=T,U.fromWorld=P,U.fromWorldVec=C,U.toComp=E,U.fromComp=F,U.sampleImage=O,U.sourceRectAtTime=D.sourceRectAtTime.bind(D),U._elem=D,L=TransformExpressionInterface(D.finalTransform.mProp);var z=getDescriptor(L,"anchorPoint");return Object.defineProperties(U,{hasParent:{get:function(){return D.hierarchy.length}},parent:{get:function(){return D.hierarchy[0].layerInterface}},rotation:getDescriptor(L,"rotation"),scale:getDescriptor(L,"scale"),position:getDescriptor(L,"position"),opacity:getDescriptor(L,"opacity"),anchorPoint:z,anchor_point:z,transform:{get:function(){return L}},active:{get:function(){return D.isInRange}}}),U.startTime=D.data.st,U.index=D.data.ind,U.source=D.data.refId,U.height=D.data.ty===0?D.data.h:100,U.width=D.data.ty===0?D.data.w:100,U.inPoint=D.data.ip/D.comp.globalData.frameRate,U.outPoint=D.data.op/D.comp.globalData.frameRate,U._name=D.data.nm,U.registerMaskInterface=B,U.registerEffectsInterface=V,U}}(),propertyGroupFactory=function(){return function(A,T){return function(E){return E=E===void 0?1:E,E<=0?A:T(E-1)}}}(),PropertyInterface=function(){return function(A,T){var E={_name:A};function C(P){return P=P===void 0?1:P,P<=0?E:T(P-1)}return C}}(),EffectsExpressionInterface=function(){var A={createEffectsInterface:T};function T(P,I){if(P.effectsManager){var R=[],F=P.data.ef,O,D=P.effectsManager.effectElements.length;for(O=0;O<D;O+=1)R.push(E(F[O],P.effectsManager.effectElements[O],I,P));var L=P.data.ef||[],B=function(U){for(O=0,D=L.length;O<D;){if(U===L[O].nm||U===L[O].mn||U===L[O].ix)return R[O];O+=1}return null};return Object.defineProperty(B,"numProperties",{get:function(){return L.length}}),B}return null}function E(P,I,R,F){function O(U){for(var z=P.ef,W=0,Z=z.length;W<Z;){if(U===z[W].nm||U===z[W].mn||U===z[W].ix)return z[W].ty===5?L[W]:L[W]();W+=1}throw new Error}var D=propertyGroupFactory(O,R),L=[],B,V=P.ef.length;for(B=0;B<V;B+=1)P.ef[B].ty===5?L.push(E(P.ef[B],I.effectElements[B],I.effectElements[B].propertyGroup,F)):L.push(C(I.effectElements[B],P.ef[B].ty,F,D));return P.mn==="ADBE Color Control"&&Object.defineProperty(O,"color",{get:function(){return L[0]()}}),Object.defineProperties(O,{numProperties:{get:function(){return P.np}},_name:{value:P.nm},propertyGroup:{value:D}}),O.enabled=P.en!==0,O.active=O.enabled,O}function C(P,I,R,F){var O=ExpressionPropertyInterface(P.p);function D(){return I===10?R.comp.compInterface(P.p.v):O()}return P.p.setGroupProperty&&P.p.setGroupProperty(PropertyInterface("",F)),D}return A}(),ShapePathInterface=function(){return function(T,E,C){var P=E.sh;function I(F){return F==="Shape"||F==="shape"||F==="Path"||F==="path"||F==="ADBE Vector Shape"||F===2?I.path:null}var R=propertyGroupFactory(I,C);return P.setGroupProperty(PropertyInterface("Path",R)),Object.defineProperties(I,{path:{get:function(){return P.k&&P.getValue(),P}},shape:{get:function(){return P.k&&P.getValue(),P}},_name:{value:T.nm},ix:{value:T.ix},propertyIndex:{value:T.ix},mn:{value:T.mn},propertyGroup:{value:C}}),I}}(),ShapeExpressionInterface=function(){function A(z,W,Z){var X=[],K,Y=z?z.length:0;for(K=0;K<Y;K+=1)z[K].ty==="gr"?X.push(E(z[K],W[K],Z)):z[K].ty==="fl"?X.push(C(z[K],W[K],Z)):z[K].ty==="st"?X.push(R(z[K],W[K],Z)):z[K].ty==="tm"?X.push(F(z[K],W[K],Z)):z[K].ty==="tr"||(z[K].ty==="el"?X.push(D(z[K],W[K],Z)):z[K].ty==="sr"?X.push(L(z[K],W[K],Z)):z[K].ty==="sh"?X.push(ShapePathInterface(z[K],W[K],Z)):z[K].ty==="rc"?X.push(B(z[K],W[K],Z)):z[K].ty==="rd"?X.push(V(z[K],W[K],Z)):z[K].ty==="rp"?X.push(U(z[K],W[K],Z)):z[K].ty==="gf"?X.push(P(z[K],W[K],Z)):X.push(I(z[K],W[K])));return X}function T(z,W,Z){var X,K=function(J){for(var te=0,ie=X.length;te<ie;){if(X[te]._name===J||X[te].mn===J||X[te].propertyIndex===J||X[te].ix===J||X[te].ind===J)return X[te];te+=1}return typeof J=="number"?X[J-1]:null};K.propertyGroup=propertyGroupFactory(K,Z),X=A(z.it,W.it,K.propertyGroup),K.numProperties=X.length;var Y=O(z.it[z.it.length-1],W.it[W.it.length-1],K.propertyGroup);return K.transform=Y,K.propertyIndex=z.cix,K._name=z.nm,K}function E(z,W,Z){var X=function(J){switch(J){case"ADBE Vectors Group":case"Contents":case 2:return X.content;default:return X.transform}};X.propertyGroup=propertyGroupFactory(X,Z);var K=T(z,W,X.propertyGroup),Y=O(z.it[z.it.length-1],W.it[W.it.length-1],X.propertyGroup);return X.content=K,X.transform=Y,Object.defineProperty(X,"_name",{get:function(){return z.nm}}),X.numProperties=z.np,X.propertyIndex=z.ix,X.nm=z.nm,X.mn=z.mn,X}function C(z,W,Z){function X(K){return K==="Color"||K==="color"?X.color:K==="Opacity"||K==="opacity"?X.opacity:null}return Object.defineProperties(X,{color:{get:ExpressionPropertyInterface(W.c)},opacity:{get:ExpressionPropertyInterface(W.o)},_name:{value:z.nm},mn:{value:z.mn}}),W.c.setGroupProperty(PropertyInterface("Color",Z)),W.o.setGroupProperty(PropertyInterface("Opacity",Z)),X}function P(z,W,Z){function X(K){return K==="Start Point"||K==="start point"?X.startPoint:K==="End Point"||K==="end point"?X.endPoint:K==="Opacity"||K==="opacity"?X.opacity:null}return Object.defineProperties(X,{startPoint:{get:ExpressionPropertyInterface(W.s)},endPoint:{get:ExpressionPropertyInterface(W.e)},opacity:{get:ExpressionPropertyInterface(W.o)},type:{get:function(){return"a"}},_name:{value:z.nm},mn:{value:z.mn}}),W.s.setGroupProperty(PropertyInterface("Start Point",Z)),W.e.setGroupProperty(PropertyInterface("End Point",Z)),W.o.setGroupProperty(PropertyInterface("Opacity",Z)),X}function I(){function z(){return null}return z}function R(z,W,Z){var X=propertyGroupFactory(ie,Z),K=propertyGroupFactory(te,X);function Y(ne){Object.defineProperty(te,z.d[ne].nm,{get:ExpressionPropertyInterface(W.d.dataProps[ne].p)})}var Q,J=z.d?z.d.length:0,te={};for(Q=0;Q<J;Q+=1)Y(Q),W.d.dataProps[Q].p.setGroupProperty(K);function ie(ne){return ne==="Color"||ne==="color"?ie.color:ne==="Opacity"||ne==="opacity"?ie.opacity:ne==="Stroke Width"||ne==="stroke width"?ie.strokeWidth:null}return Object.defineProperties(ie,{color:{get:ExpressionPropertyInterface(W.c)},opacity:{get:ExpressionPropertyInterface(W.o)},strokeWidth:{get:ExpressionPropertyInterface(W.w)},dash:{get:function(){return te}},_name:{value:z.nm},mn:{value:z.mn}}),W.c.setGroupProperty(PropertyInterface("Color",X)),W.o.setGroupProperty(PropertyInterface("Opacity",X)),W.w.setGroupProperty(PropertyInterface("Stroke Width",X)),ie}function F(z,W,Z){function X(Y){return Y===z.e.ix||Y==="End"||Y==="end"?X.end:Y===z.s.ix?X.start:Y===z.o.ix?X.offset:null}var K=propertyGroupFactory(X,Z);return X.propertyIndex=z.ix,W.s.setGroupProperty(PropertyInterface("Start",K)),W.e.setGroupProperty(PropertyInterface("End",K)),W.o.setGroupProperty(PropertyInterface("Offset",K)),X.propertyIndex=z.ix,X.propertyGroup=Z,Object.defineProperties(X,{start:{get:ExpressionPropertyInterface(W.s)},end:{get:ExpressionPropertyInterface(W.e)},offset:{get:ExpressionPropertyInterface(W.o)},_name:{value:z.nm}}),X.mn=z.mn,X}function O(z,W,Z){function X(Y){return z.a.ix===Y||Y==="Anchor Point"?X.anchorPoint:z.o.ix===Y||Y==="Opacity"?X.opacity:z.p.ix===Y||Y==="Position"?X.position:z.r.ix===Y||Y==="Rotation"||Y==="ADBE Vector Rotation"?X.rotation:z.s.ix===Y||Y==="Scale"?X.scale:z.sk&&z.sk.ix===Y||Y==="Skew"?X.skew:z.sa&&z.sa.ix===Y||Y==="Skew Axis"?X.skewAxis:null}var K=propertyGroupFactory(X,Z);return W.transform.mProps.o.setGroupProperty(PropertyInterface("Opacity",K)),W.transform.mProps.p.setGroupProperty(PropertyInterface("Position",K)),W.transform.mProps.a.setGroupProperty(PropertyInterface("Anchor Point",K)),W.transform.mProps.s.setGroupProperty(PropertyInterface("Scale",K)),W.transform.mProps.r.setGroupProperty(PropertyInterface("Rotation",K)),W.transform.mProps.sk&&(W.transform.mProps.sk.setGroupProperty(PropertyInterface("Skew",K)),W.transform.mProps.sa.setGroupProperty(PropertyInterface("Skew Angle",K))),W.transform.op.setGroupProperty(PropertyInterface("Opacity",K)),Object.defineProperties(X,{opacity:{get:ExpressionPropertyInterface(W.transform.mProps.o)},position:{get:ExpressionPropertyInterface(W.transform.mProps.p)},anchorPoint:{get:ExpressionPropertyInterface(W.transform.mProps.a)},scale:{get:ExpressionPropertyInterface(W.transform.mProps.s)},rotation:{get:ExpressionPropertyInterface(W.transform.mProps.r)},skew:{get:ExpressionPropertyInterface(W.transform.mProps.sk)},skewAxis:{get:ExpressionPropertyInterface(W.transform.mProps.sa)},_name:{value:z.nm}}),X.ty="tr",X.mn=z.mn,X.propertyGroup=Z,X}function D(z,W,Z){function X(Q){return z.p.ix===Q?X.position:z.s.ix===Q?X.size:null}var K=propertyGroupFactory(X,Z);X.propertyIndex=z.ix;var Y=W.sh.ty==="tm"?W.sh.prop:W.sh;return Y.s.setGroupProperty(PropertyInterface("Size",K)),Y.p.setGroupProperty(PropertyInterface("Position",K)),Object.defineProperties(X,{size:{get:ExpressionPropertyInterface(Y.s)},position:{get:ExpressionPropertyInterface(Y.p)},_name:{value:z.nm}}),X.mn=z.mn,X}function L(z,W,Z){function X(Q){return z.p.ix===Q?X.position:z.r.ix===Q?X.rotation:z.pt.ix===Q?X.points:z.or.ix===Q||Q==="ADBE Vector Star Outer Radius"?X.outerRadius:z.os.ix===Q?X.outerRoundness:z.ir&&(z.ir.ix===Q||Q==="ADBE Vector Star Inner Radius")?X.innerRadius:z.is&&z.is.ix===Q?X.innerRoundness:null}var K=propertyGroupFactory(X,Z),Y=W.sh.ty==="tm"?W.sh.prop:W.sh;return X.propertyIndex=z.ix,Y.or.setGroupProperty(PropertyInterface("Outer Radius",K)),Y.os.setGroupProperty(PropertyInterface("Outer Roundness",K)),Y.pt.setGroupProperty(PropertyInterface("Points",K)),Y.p.setGroupProperty(PropertyInterface("Position",K)),Y.r.setGroupProperty(PropertyInterface("Rotation",K)),z.ir&&(Y.ir.setGroupProperty(PropertyInterface("Inner Radius",K)),Y.is.setGroupProperty(PropertyInterface("Inner Roundness",K))),Object.defineProperties(X,{position:{get:ExpressionPropertyInterface(Y.p)},rotation:{get:ExpressionPropertyInterface(Y.r)},points:{get:ExpressionPropertyInterface(Y.pt)},outerRadius:{get:ExpressionPropertyInterface(Y.or)},outerRoundness:{get:ExpressionPropertyInterface(Y.os)},innerRadius:{get:ExpressionPropertyInterface(Y.ir)},innerRoundness:{get:ExpressionPropertyInterface(Y.is)},_name:{value:z.nm}}),X.mn=z.mn,X}function B(z,W,Z){function X(Q){return z.p.ix===Q?X.position:z.r.ix===Q?X.roundness:z.s.ix===Q||Q==="Size"||Q==="ADBE Vector Rect Size"?X.size:null}var K=propertyGroupFactory(X,Z),Y=W.sh.ty==="tm"?W.sh.prop:W.sh;return X.propertyIndex=z.ix,Y.p.setGroupProperty(PropertyInterface("Position",K)),Y.s.setGroupProperty(PropertyInterface("Size",K)),Y.r.setGroupProperty(PropertyInterface("Rotation",K)),Object.defineProperties(X,{position:{get:ExpressionPropertyInterface(Y.p)},roundness:{get:ExpressionPropertyInterface(Y.r)},size:{get:ExpressionPropertyInterface(Y.s)},_name:{value:z.nm}}),X.mn=z.mn,X}function V(z,W,Z){function X(Q){return z.r.ix===Q||Q==="Round Corners 1"?X.radius:null}var K=propertyGroupFactory(X,Z),Y=W;return X.propertyIndex=z.ix,Y.rd.setGroupProperty(PropertyInterface("Radius",K)),Object.defineProperties(X,{radius:{get:ExpressionPropertyInterface(Y.rd)},_name:{value:z.nm}}),X.mn=z.mn,X}function U(z,W,Z){function X(Q){return z.c.ix===Q||Q==="Copies"?X.copies:z.o.ix===Q||Q==="Offset"?X.offset:null}var K=propertyGroupFactory(X,Z),Y=W;return X.propertyIndex=z.ix,Y.c.setGroupProperty(PropertyInterface("Copies",K)),Y.o.setGroupProperty(PropertyInterface("Offset",K)),Object.defineProperties(X,{copies:{get:ExpressionPropertyInterface(Y.c)},offset:{get:ExpressionPropertyInterface(Y.o)},_name:{value:z.nm}}),X.mn=z.mn,X}return function(z,W,Z){var X;function K(Q){if(typeof Q=="number")return Q=Q===void 0?1:Q,Q===0?Z:X[Q-1];for(var J=0,te=X.length;J<te;){if(X[J]._name===Q)return X[J];J+=1}return null}function Y(){return Z}return K.propertyGroup=propertyGroupFactory(K,Y),X=A(z,W,K.propertyGroup),K.numProperties=X.length,K._name="Contents",K}}(),TextExpressionInterface=function(){return function(A){var T;function E(C){switch(C){case"ADBE Text Document":return E.sourceText;default:return null}}return Object.defineProperty(E,"sourceText",{get:function(){A.textProperty.getValue();var P=A.textProperty.currentData.t;return(!T||P!==T.value)&&(T=new String(P),T.value=P||new String(P),Object.defineProperty(T,"style",{get:function(){return{fillColor:A.textProperty.currentData.fc}}})),T}}),E}}();function _typeof(A){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?_typeof=function(E){return typeof E}:_typeof=function(E){return E&&typeof Symbol=="function"&&E.constructor===Symbol&&E!==Symbol.prototype?"symbol":typeof E},_typeof(A)}var FootageInterface=function(){var A=function(C){var P="",I=C.getFootageData();function R(){return P="",I=C.getFootageData(),F}function F(O){if(I[O])return P=O,I=I[O],_typeof(I)==="object"?F:I;var D=O.indexOf(P);if(D!==-1){var L=parseInt(O.substr(D+P.length),10);return I=I[L],_typeof(I)==="object"?F:I}return""}return R},T=function(C){function P(I){return I==="Outline"?P.outlineInterface():null}return P._name="Outline",P.outlineInterface=A(C),P};return function(E){function C(P){return P==="Data"?C.dataInterface:null}return C._name="Data",C.dataInterface=T(E),C}}(),interfaces={layer:LayerExpressionInterface,effects:EffectsExpressionInterface,comp:CompExpressionInterface,shape:ShapeExpressionInterface,text:TextExpressionInterface,footage:FootageInterface};function getInterface(A){return interfaces[A]||null}var expressionHelpers=function(){function A(R,F,O){F.x&&(O.k=!0,O.x=!0,O.initiateExpression=ExpressionManager.initiateExpression,O.effectsSequence.push(O.initiateExpression(R,F,O).bind(O)))}function T(R){return R*=this.elem.globalData.frameRate,R-=this.offsetTime,R!==this._cachingAtTime.lastFrame&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastFrame<R?this._cachingAtTime.lastIndex:0,this._cachingAtTime.value=this.interpolateValue(R,this._cachingAtTime),this._cachingAtTime.lastFrame=R),this._cachingAtTime.value}function E(R){var F=-.01,O=this.getValueAtTime(R),D=this.getValueAtTime(R+F),L=0;if(O.length){var B;for(B=0;B<O.length;B+=1)L+=Math.pow(D[B]-O[B],2);L=Math.sqrt(L)*100}else L=0;return L}function C(R){if(this.vel!==void 0)return this.vel;var F=-.001,O=this.getValueAtTime(R),D=this.getValueAtTime(R+F),L;if(O.length){L=createTypedArray("float32",O.length);var B;for(B=0;B<O.length;B+=1)L[B]=(D[B]-O[B])/F}else L=(D-O)/F;return L}function P(){return this.pv}function I(R){this.propertyGroup=R}return{searchExpressions:A,getSpeedAtTime:E,getVelocityAtTime:C,getValueAtTime:T,getStaticValueAtTime:P,setGroupProperty:I}}();function addPropertyDecorator(){function A(V,U,z){if(!this.k||!this.keyframes)return this.pv;V=V?V.toLowerCase():"";var W=this.comp.renderedFrame,Z=this.keyframes,X=Z[Z.length-1].t;if(W<=X)return this.pv;var K,Y;z?(U?K=Math.abs(X-this.elem.comp.globalData.frameRate*U):K=Math.max(0,X-this.elem.data.ip),Y=X-K):((!U||U>Z.length-1)&&(U=Z.length-1),Y=Z[Z.length-1-U].t,K=X-Y);var Q,J,te;if(V==="pingpong"){var ie=Math.floor((W-Y)/K);if(ie%2!==0)return this.getValueAtTime((K-(W-Y)%K+Y)/this.comp.globalData.frameRate,0)}else if(V==="offset"){var ne=this.getValueAtTime(Y/this.comp.globalData.frameRate,0),he=this.getValueAtTime(X/this.comp.globalData.frameRate,0),ve=this.getValueAtTime(((W-Y)%K+Y)/this.comp.globalData.frameRate,0),ye=Math.floor((W-Y)/K);if(this.pv.length){for(te=new Array(ne.length),J=te.length,Q=0;Q<J;Q+=1)te[Q]=(he[Q]-ne[Q])*ye+ve[Q];return te}return(he-ne)*ye+ve}else if(V==="continue"){var de=this.getValueAtTime(X/this.comp.globalData.frameRate,0),fe=this.getValueAtTime((X-.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(te=new Array(de.length),J=te.length,Q=0;Q<J;Q+=1)te[Q]=de[Q]+(de[Q]-fe[Q])*((W-X)/this.comp.globalData.frameRate)/5e-4;return te}return de+(de-fe)*((W-X)/.001)}return this.getValueAtTime(((W-Y)%K+Y)/this.comp.globalData.frameRate,0)}function T(V,U,z){if(!this.k)return this.pv;V=V?V.toLowerCase():"";var W=this.comp.renderedFrame,Z=this.keyframes,X=Z[0].t;if(W>=X)return this.pv;var K,Y;z?(U?K=Math.abs(this.elem.comp.globalData.frameRate*U):K=Math.max(0,this.elem.data.op-X),Y=X+K):((!U||U>Z.length-1)&&(U=Z.length-1),Y=Z[U].t,K=Y-X);var Q,J,te;if(V==="pingpong"){var ie=Math.floor((X-W)/K);if(ie%2===0)return this.getValueAtTime(((X-W)%K+X)/this.comp.globalData.frameRate,0)}else if(V==="offset"){var ne=this.getValueAtTime(X/this.comp.globalData.frameRate,0),he=this.getValueAtTime(Y/this.comp.globalData.frameRate,0),ve=this.getValueAtTime((K-(X-W)%K+X)/this.comp.globalData.frameRate,0),ye=Math.floor((X-W)/K)+1;if(this.pv.length){for(te=new Array(ne.length),J=te.length,Q=0;Q<J;Q+=1)te[Q]=ve[Q]-(he[Q]-ne[Q])*ye;return te}return ve-(he-ne)*ye}else if(V==="continue"){var de=this.getValueAtTime(X/this.comp.globalData.frameRate,0),fe=this.getValueAtTime((X+.001)/this.comp.globalData.frameRate,0);if(this.pv.length){for(te=new Array(de.length),J=te.length,Q=0;Q<J;Q+=1)te[Q]=de[Q]+(de[Q]-fe[Q])*(X-W)/.001;return te}return de+(de-fe)*(X-W)/.001}return this.getValueAtTime((K-((X-W)%K+X))/this.comp.globalData.frameRate,0)}function E(V,U){if(!this.k)return this.pv;if(V=(V||.4)*.5,U=Math.floor(U||5),U<=1)return this.pv;var z=this.comp.renderedFrame/this.comp.globalData.frameRate,W=z-V,Z=z+V,X=U>1?(Z-W)/(U-1):1,K=0,Y=0,Q;this.pv.length?Q=createTypedArray("float32",this.pv.length):Q=0;for(var J;K<U;){if(J=this.getValueAtTime(W+K*X),this.pv.length)for(Y=0;Y<this.pv.length;Y+=1)Q[Y]+=J[Y];else Q+=J;K+=1}if(this.pv.length)for(Y=0;Y<this.pv.length;Y+=1)Q[Y]/=U;else Q/=U;return Q}function C(V){this._transformCachingAtTime||(this._transformCachingAtTime={v:new Matrix});var U=this._transformCachingAtTime.v;if(U.cloneFromProps(this.pre.props),this.appliedTransformations<1){var z=this.a.getValueAtTime(V);U.translate(-z[0]*this.a.mult,-z[1]*this.a.mult,z[2]*this.a.mult)}if(this.appliedTransformations<2){var W=this.s.getValueAtTime(V);U.scale(W[0]*this.s.mult,W[1]*this.s.mult,W[2]*this.s.mult)}if(this.sk&&this.appliedTransformations<3){var Z=this.sk.getValueAtTime(V),X=this.sa.getValueAtTime(V);U.skewFromAxis(-Z*this.sk.mult,X*this.sa.mult)}if(this.r&&this.appliedTransformations<4){var K=this.r.getValueAtTime(V);U.rotate(-K*this.r.mult)}else if(!this.r&&this.appliedTransformations<4){var Y=this.rz.getValueAtTime(V),Q=this.ry.getValueAtTime(V),J=this.rx.getValueAtTime(V),te=this.or.getValueAtTime(V);U.rotateZ(-Y*this.rz.mult).rotateY(Q*this.ry.mult).rotateX(J*this.rx.mult).rotateZ(-te[2]*this.or.mult).rotateY(te[1]*this.or.mult).rotateX(te[0]*this.or.mult)}if(this.data.p&&this.data.p.s){var ie=this.px.getValueAtTime(V),ne=this.py.getValueAtTime(V);if(this.data.p.z){var he=this.pz.getValueAtTime(V);U.translate(ie*this.px.mult,ne*this.py.mult,-he*this.pz.mult)}else U.translate(ie*this.px.mult,ne*this.py.mult,0)}else{var ve=this.p.getValueAtTime(V);U.translate(ve[0]*this.p.mult,ve[1]*this.p.mult,-ve[2]*this.p.mult)}return U}function P(){return this.v.clone(new Matrix)}var I=TransformPropertyFactory.getTransformProperty;TransformPropertyFactory.getTransformProperty=function(V,U,z){var W=I(V,U,z);return W.dynamicProperties.length?W.getValueAtTime=C.bind(W):W.getValueAtTime=P.bind(W),W.setGroupProperty=expressionHelpers.setGroupProperty,W};var R=PropertyFactory.getProp;PropertyFactory.getProp=function(V,U,z,W,Z){var X=R(V,U,z,W,Z);X.kf?X.getValueAtTime=expressionHelpers.getValueAtTime.bind(X):X.getValueAtTime=expressionHelpers.getStaticValueAtTime.bind(X),X.setGroupProperty=expressionHelpers.setGroupProperty,X.loopOut=A,X.loopIn=T,X.smooth=E,X.getVelocityAtTime=expressionHelpers.getVelocityAtTime.bind(X),X.getSpeedAtTime=expressionHelpers.getSpeedAtTime.bind(X),X.numKeys=U.a===1?U.k.length:0,X.propertyIndex=U.ix;var K=0;return z!==0&&(K=createTypedArray("float32",U.a===1?U.k[0].s.length:U.k.length)),X._cachingAtTime={lastFrame:initialDefaultFrame,lastIndex:0,value:K},expressionHelpers.searchExpressions(V,U,X),X.k&&Z.addDynamicProperty(X),X};function F(V){return this._cachingAtTime||(this._cachingAtTime={shapeValue:shapePool.clone(this.pv),lastIndex:0,lastTime:initialDefaultFrame}),V*=this.elem.globalData.frameRate,V-=this.offsetTime,V!==this._cachingAtTime.lastTime&&(this._cachingAtTime.lastIndex=this._cachingAtTime.lastTime<V?this._caching.lastIndex:0,this._cachingAtTime.lastTime=V,this.interpolateShape(V,this._cachingAtTime.shapeValue,this._cachingAtTime)),this._cachingAtTime.shapeValue}var O=ShapePropertyFactory.getConstructorFunction(),D=ShapePropertyFactory.getKeyframedConstructorFunction();function L(){}L.prototype={vertices:function(U,z){this.k&&this.getValue();var W=this.v;z!==void 0&&(W=this.getValueAtTime(z,0));var Z,X=W._length,K=W[U],Y=W.v,Q=createSizedArray(X);for(Z=0;Z<X;Z+=1)U==="i"||U==="o"?Q[Z]=[K[Z][0]-Y[Z][0],K[Z][1]-Y[Z][1]]:Q[Z]=[K[Z][0],K[Z][1]];return Q},points:function(U){return this.vertices("v",U)},inTangents:function(U){return this.vertices("i",U)},outTangents:function(U){return this.vertices("o",U)},isClosed:function(){return this.v.c},pointOnPath:function(U,z){var W=this.v;z!==void 0&&(W=this.getValueAtTime(z,0)),this._segmentsLength||(this._segmentsLength=bez.getSegmentsLength(W));for(var Z=this._segmentsLength,X=Z.lengths,K=Z.totalLength*U,Y=0,Q=X.length,J=0,te;Y<Q;){if(J+X[Y].addedLength>K){var ie=Y,ne=W.c&&Y===Q-1?0:Y+1,he=(K-J)/X[Y].addedLength;te=bez.getPointInSegment(W.v[ie],W.v[ne],W.o[ie],W.i[ne],he,X[Y]);break}else J+=X[Y].addedLength;Y+=1}return te||(te=W.c?[W.v[0][0],W.v[0][1]]:[W.v[W._length-1][0],W.v[W._length-1][1]]),te},vectorOnPath:function(U,z,W){U==1?U=this.v.c:U==0&&(U=.999);var Z=this.pointOnPath(U,z),X=this.pointOnPath(U+.001,z),K=X[0]-Z[0],Y=X[1]-Z[1],Q=Math.sqrt(Math.pow(K,2)+Math.pow(Y,2));if(Q===0)return[0,0];var J=W==="tangent"?[K/Q,Y/Q]:[-Y/Q,K/Q];return J},tangentOnPath:function(U,z){return this.vectorOnPath(U,z,"tangent")},normalOnPath:function(U,z){return this.vectorOnPath(U,z,"normal")},setGroupProperty:expressionHelpers.setGroupProperty,getValueAtTime:expressionHelpers.getStaticValueAtTime},extendPrototype([L],O),extendPrototype([L],D),D.prototype.getValueAtTime=F,D.prototype.initiateExpression=ExpressionManager.initiateExpression;var B=ShapePropertyFactory.getShapeProp;ShapePropertyFactory.getShapeProp=function(V,U,z,W,Z){var X=B(V,U,z,W,Z);return X.propertyIndex=U.ix,X.lock=!1,z===3?expressionHelpers.searchExpressions(V,U.pt,X):z===4&&expressionHelpers.searchExpressions(V,U.ks,X),X.k&&V.addDynamicProperty(X),X}}function initialize$1(){addPropertyDecorator()}function addDecorator(){function A(){return this.data.d.x?(this.calculateExpression=ExpressionManager.initiateExpression.bind(this)(this.elem,this.data.d,this),this.addEffect(this.getExpressionValue.bind(this)),!0):null}TextProperty.prototype.getExpressionValue=function(T,E){var C=this.calculateExpression(E);if(T.t!==C){var P={};return this.copyData(P,T),P.t=C.toString(),P.__complete=!1,P}return T},TextProperty.prototype.searchProperty=function(){var T=this.searchKeyframes(),E=this.searchExpressions();return this.kf=T||E,this.kf},TextProperty.prototype.searchExpressions=A}function initialize(){addDecorator()}function SVGComposableEffect(){}SVGComposableEffect.prototype={createMergeNode:function A(T,E){var C=createNS("feMerge");C.setAttribute("result",T);var P,I;for(I=0;I<E.length;I+=1)P=createNS("feMergeNode"),P.setAttribute("in",E[I]),C.appendChild(P),C.appendChild(P);return C}};var linearFilterValue="0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0";function SVGTintFilter(A,T,E,C,P){this.filterManager=T;var I=createNS("feColorMatrix");I.setAttribute("type","matrix"),I.setAttribute("color-interpolation-filters","linearRGB"),I.setAttribute("values",linearFilterValue+" 1 0"),this.linearFilter=I,I.setAttribute("result",C+"_tint_1"),A.appendChild(I),I=createNS("feColorMatrix"),I.setAttribute("type","matrix"),I.setAttribute("color-interpolation-filters","sRGB"),I.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),I.setAttribute("result",C+"_tint_2"),A.appendChild(I),this.matrixFilter=I;var R=this.createMergeNode(C,[P,C+"_tint_1",C+"_tint_2"]);A.appendChild(R)}extendPrototype([SVGComposableEffect],SVGTintFilter),SVGTintFilter.prototype.renderFrame=function(A){if(A||this.filterManager._mdf){var T=this.filterManager.effectElements[0].p.v,E=this.filterManager.effectElements[1].p.v,C=this.filterManager.effectElements[2].p.v/100;this.linearFilter.setAttribute("values",linearFilterValue+" "+C+" 0"),this.matrixFilter.setAttribute("values",E[0]-T[0]+" 0 0 0 "+T[0]+" "+(E[1]-T[1])+" 0 0 0 "+T[1]+" "+(E[2]-T[2])+" 0 0 0 "+T[2]+" 0 0 0 1 0")}};function SVGFillFilter(A,T,E,C){this.filterManager=T;var P=createNS("feColorMatrix");P.setAttribute("type","matrix"),P.setAttribute("color-interpolation-filters","sRGB"),P.setAttribute("values","1 0 0 0 0 0 1 0 0 0 0 0 1 0 0 0 0 0 1 0"),P.setAttribute("result",C),A.appendChild(P),this.matrixFilter=P}SVGFillFilter.prototype.renderFrame=function(A){if(A||this.filterManager._mdf){var T=this.filterManager.effectElements[2].p.v,E=this.filterManager.effectElements[6].p.v;this.matrixFilter.setAttribute("values","0 0 0 0 "+T[0]+" 0 0 0 0 "+T[1]+" 0 0 0 0 "+T[2]+" 0 0 0 "+E+" 0")}};function SVGStrokeEffect(A,T,E){this.initialized=!1,this.filterManager=T,this.elem=E,this.paths=[]}SVGStrokeEffect.prototype.initialize=function(){var A=this.elem.layerElement.children||this.elem.layerElement.childNodes,T,E,C,P;for(this.filterManager.effectElements[1].p.v===1?(P=this.elem.maskManager.masksProperties.length,C=0):(C=this.filterManager.effectElements[0].p.v-1,P=C+1),E=createNS("g"),E.setAttribute("fill","none"),E.setAttribute("stroke-linecap","round"),E.setAttribute("stroke-dashoffset",1),C;C<P;C+=1)T=createNS("path"),E.appendChild(T),this.paths.push({p:T,m:C});if(this.filterManager.effectElements[10].p.v===3){var I=createNS("mask"),R=createElementID();I.setAttribute("id",R),I.setAttribute("mask-type","alpha"),I.appendChild(E),this.elem.globalData.defs.appendChild(I);var F=createNS("g");for(F.setAttribute("mask","url("+getLocationHref()+"#"+R+")");A[0];)F.appendChild(A[0]);this.elem.layerElement.appendChild(F),this.masker=I,E.setAttribute("stroke","#fff")}else if(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2){if(this.filterManager.effectElements[10].p.v===2)for(A=this.elem.layerElement.children||this.elem.layerElement.childNodes;A.length;)this.elem.layerElement.removeChild(A[0]);this.elem.layerElement.appendChild(E),this.elem.layerElement.removeAttribute("mask"),E.setAttribute("stroke","#fff")}this.initialized=!0,this.pathMasker=E},SVGStrokeEffect.prototype.renderFrame=function(A){this.initialized||this.initialize();var T,E=this.paths.length,C,P;for(T=0;T<E;T+=1)if(this.paths[T].m!==-1&&(C=this.elem.maskManager.viewData[this.paths[T].m],P=this.paths[T].p,(A||this.filterManager._mdf||C.prop._mdf)&&P.setAttribute("d",C.lastPath),A||this.filterManager.effectElements[9].p._mdf||this.filterManager.effectElements[4].p._mdf||this.filterManager.effectElements[7].p._mdf||this.filterManager.effectElements[8].p._mdf||C.prop._mdf)){var I;if(this.filterManager.effectElements[7].p.v!==0||this.filterManager.effectElements[8].p.v!==100){var R=Math.min(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,F=Math.max(this.filterManager.effectElements[7].p.v,this.filterManager.effectElements[8].p.v)*.01,O=P.getTotalLength();I="0 0 0 "+O*R+" ";var D=O*(F-R),L=1+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01,B=Math.floor(D/L),V;for(V=0;V<B;V+=1)I+="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01+" ";I+="0 "+O*10+" 0 0"}else I="1 "+this.filterManager.effectElements[4].p.v*2*this.filterManager.effectElements[9].p.v*.01;P.setAttribute("stroke-dasharray",I)}if((A||this.filterManager.effectElements[4].p._mdf)&&this.pathMasker.setAttribute("stroke-width",this.filterManager.effectElements[4].p.v*2),(A||this.filterManager.effectElements[6].p._mdf)&&this.pathMasker.setAttribute("opacity",this.filterManager.effectElements[6].p.v),(this.filterManager.effectElements[10].p.v===1||this.filterManager.effectElements[10].p.v===2)&&(A||this.filterManager.effectElements[3].p._mdf)){var U=this.filterManager.effectElements[3].p.v;this.pathMasker.setAttribute("stroke","rgb("+bmFloor(U[0]*255)+","+bmFloor(U[1]*255)+","+bmFloor(U[2]*255)+")")}};function SVGTritoneFilter(A,T,E,C){this.filterManager=T;var P=createNS("feColorMatrix");P.setAttribute("type","matrix"),P.setAttribute("color-interpolation-filters","linearRGB"),P.setAttribute("values","0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0.3333 0.3333 0.3333 0 0 0 0 0 1 0"),A.appendChild(P);var I=createNS("feComponentTransfer");I.setAttribute("color-interpolation-filters","sRGB"),I.setAttribute("result",C),this.matrixFilter=I;var R=createNS("feFuncR");R.setAttribute("type","table"),I.appendChild(R),this.feFuncR=R;var F=createNS("feFuncG");F.setAttribute("type","table"),I.appendChild(F),this.feFuncG=F;var O=createNS("feFuncB");O.setAttribute("type","table"),I.appendChild(O),this.feFuncB=O,A.appendChild(I)}SVGTritoneFilter.prototype.renderFrame=function(A){if(A||this.filterManager._mdf){var T=this.filterManager.effectElements[0].p.v,E=this.filterManager.effectElements[1].p.v,C=this.filterManager.effectElements[2].p.v,P=C[0]+" "+E[0]+" "+T[0],I=C[1]+" "+E[1]+" "+T[1],R=C[2]+" "+E[2]+" "+T[2];this.feFuncR.setAttribute("tableValues",P),this.feFuncG.setAttribute("tableValues",I),this.feFuncB.setAttribute("tableValues",R)}};function SVGProLevelsFilter(A,T,E,C){this.filterManager=T;var P=this.filterManager.effectElements,I=createNS("feComponentTransfer");(P[10].p.k||P[10].p.v!==0||P[11].p.k||P[11].p.v!==1||P[12].p.k||P[12].p.v!==1||P[13].p.k||P[13].p.v!==0||P[14].p.k||P[14].p.v!==1)&&(this.feFuncR=this.createFeFunc("feFuncR",I)),(P[17].p.k||P[17].p.v!==0||P[18].p.k||P[18].p.v!==1||P[19].p.k||P[19].p.v!==1||P[20].p.k||P[20].p.v!==0||P[21].p.k||P[21].p.v!==1)&&(this.feFuncG=this.createFeFunc("feFuncG",I)),(P[24].p.k||P[24].p.v!==0||P[25].p.k||P[25].p.v!==1||P[26].p.k||P[26].p.v!==1||P[27].p.k||P[27].p.v!==0||P[28].p.k||P[28].p.v!==1)&&(this.feFuncB=this.createFeFunc("feFuncB",I)),(P[31].p.k||P[31].p.v!==0||P[32].p.k||P[32].p.v!==1||P[33].p.k||P[33].p.v!==1||P[34].p.k||P[34].p.v!==0||P[35].p.k||P[35].p.v!==1)&&(this.feFuncA=this.createFeFunc("feFuncA",I)),(this.feFuncR||this.feFuncG||this.feFuncB||this.feFuncA)&&(I.setAttribute("color-interpolation-filters","sRGB"),A.appendChild(I)),(P[3].p.k||P[3].p.v!==0||P[4].p.k||P[4].p.v!==1||P[5].p.k||P[5].p.v!==1||P[6].p.k||P[6].p.v!==0||P[7].p.k||P[7].p.v!==1)&&(I=createNS("feComponentTransfer"),I.setAttribute("color-interpolation-filters","sRGB"),I.setAttribute("result",C),A.appendChild(I),this.feFuncRComposed=this.createFeFunc("feFuncR",I),this.feFuncGComposed=this.createFeFunc("feFuncG",I),this.feFuncBComposed=this.createFeFunc("feFuncB",I))}SVGProLevelsFilter.prototype.createFeFunc=function(A,T){var E=createNS(A);return E.setAttribute("type","table"),T.appendChild(E),E},SVGProLevelsFilter.prototype.getTableValue=function(A,T,E,C,P){for(var I=0,R=256,F,O=Math.min(A,T),D=Math.max(A,T),L=Array.call(null,{length:R}),B,V=0,U=P-C,z=T-A;I<=256;)F=I/256,F<=O?B=z<0?P:C:F>=D?B=z<0?C:P:B=C+U*Math.pow((F-A)/z,1/E),L[V]=B,V+=1,I+=256/(R-1);return L.join(" ")},SVGProLevelsFilter.prototype.renderFrame=function(A){if(A||this.filterManager._mdf){var T,E=this.filterManager.effectElements;this.feFuncRComposed&&(A||E[3].p._mdf||E[4].p._mdf||E[5].p._mdf||E[6].p._mdf||E[7].p._mdf)&&(T=this.getTableValue(E[3].p.v,E[4].p.v,E[5].p.v,E[6].p.v,E[7].p.v),this.feFuncRComposed.setAttribute("tableValues",T),this.feFuncGComposed.setAttribute("tableValues",T),this.feFuncBComposed.setAttribute("tableValues",T)),this.feFuncR&&(A||E[10].p._mdf||E[11].p._mdf||E[12].p._mdf||E[13].p._mdf||E[14].p._mdf)&&(T=this.getTableValue(E[10].p.v,E[11].p.v,E[12].p.v,E[13].p.v,E[14].p.v),this.feFuncR.setAttribute("tableValues",T)),this.feFuncG&&(A||E[17].p._mdf||E[18].p._mdf||E[19].p._mdf||E[20].p._mdf||E[21].p._mdf)&&(T=this.getTableValue(E[17].p.v,E[18].p.v,E[19].p.v,E[20].p.v,E[21].p.v),this.feFuncG.setAttribute("tableValues",T)),this.feFuncB&&(A||E[24].p._mdf||E[25].p._mdf||E[26].p._mdf||E[27].p._mdf||E[28].p._mdf)&&(T=this.getTableValue(E[24].p.v,E[25].p.v,E[26].p.v,E[27].p.v,E[28].p.v),this.feFuncB.setAttribute("tableValues",T)),this.feFuncA&&(A||E[31].p._mdf||E[32].p._mdf||E[33].p._mdf||E[34].p._mdf||E[35].p._mdf)&&(T=this.getTableValue(E[31].p.v,E[32].p.v,E[33].p.v,E[34].p.v,E[35].p.v),this.feFuncA.setAttribute("tableValues",T))}};function SVGDropShadowEffect(A,T,E,C,P){var I=T.container.globalData.renderConfig.filterSize,R=T.data.fs||I;A.setAttribute("x",R.x||I.x),A.setAttribute("y",R.y||I.y),A.setAttribute("width",R.width||I.width),A.setAttribute("height",R.height||I.height),this.filterManager=T;var F=createNS("feGaussianBlur");F.setAttribute("in","SourceAlpha"),F.setAttribute("result",C+"_drop_shadow_1"),F.setAttribute("stdDeviation","0"),this.feGaussianBlur=F,A.appendChild(F);var O=createNS("feOffset");O.setAttribute("dx","25"),O.setAttribute("dy","0"),O.setAttribute("in",C+"_drop_shadow_1"),O.setAttribute("result",C+"_drop_shadow_2"),this.feOffset=O,A.appendChild(O);var D=createNS("feFlood");D.setAttribute("flood-color","#00ff00"),D.setAttribute("flood-opacity","1"),D.setAttribute("result",C+"_drop_shadow_3"),this.feFlood=D,A.appendChild(D);var L=createNS("feComposite");L.setAttribute("in",C+"_drop_shadow_3"),L.setAttribute("in2",C+"_drop_shadow_2"),L.setAttribute("operator","in"),L.setAttribute("result",C+"_drop_shadow_4"),A.appendChild(L);var B=this.createMergeNode(C,[C+"_drop_shadow_4",P]);A.appendChild(B)}extendPrototype([SVGComposableEffect],SVGDropShadowEffect),SVGDropShadowEffect.prototype.renderFrame=function(A){if(A||this.filterManager._mdf){if((A||this.filterManager.effectElements[4].p._mdf)&&this.feGaussianBlur.setAttribute("stdDeviation",this.filterManager.effectElements[4].p.v/4),A||this.filterManager.effectElements[0].p._mdf){var T=this.filterManager.effectElements[0].p.v;this.feFlood.setAttribute("flood-color",rgbToHex(Math.round(T[0]*255),Math.round(T[1]*255),Math.round(T[2]*255)))}if((A||this.filterManager.effectElements[1].p._mdf)&&this.feFlood.setAttribute("flood-opacity",this.filterManager.effectElements[1].p.v/255),A||this.filterManager.effectElements[2].p._mdf||this.filterManager.effectElements[3].p._mdf){var E=this.filterManager.effectElements[3].p.v,C=(this.filterManager.effectElements[2].p.v-90)*degToRads,P=E*Math.cos(C),I=E*Math.sin(C);this.feOffset.setAttribute("dx",P),this.feOffset.setAttribute("dy",I)}}};var _svgMatteSymbols=[];function SVGMatte3Effect(A,T,E){this.initialized=!1,this.filterManager=T,this.filterElem=A,this.elem=E,E.matteElement=createNS("g"),E.matteElement.appendChild(E.layerElement),E.matteElement.appendChild(E.transformedElement),E.baseElement=E.matteElement}SVGMatte3Effect.prototype.findSymbol=function(A){for(var T=0,E=_svgMatteSymbols.length;T<E;){if(_svgMatteSymbols[T]===A)return _svgMatteSymbols[T];T+=1}return null},SVGMatte3Effect.prototype.replaceInParent=function(A,T){var E=A.layerElement.parentNode;if(E){for(var C=E.children,P=0,I=C.length;P<I&&C[P]!==A.layerElement;)P+=1;var R;P<=I-2&&(R=C[P+1]);var F=createNS("use");F.setAttribute("href","#"+T),R?E.insertBefore(F,R):E.appendChild(F)}},SVGMatte3Effect.prototype.setElementAsMask=function(A,T){if(!this.findSymbol(T)){var E=createElementID(),C=createNS("mask");C.setAttribute("id",T.layerId),C.setAttribute("mask-type","alpha"),_svgMatteSymbols.push(T);var P=A.globalData.defs;P.appendChild(C);var I=createNS("symbol");I.setAttribute("id",E),this.replaceInParent(T,E),I.appendChild(T.layerElement),P.appendChild(I);var R=createNS("use");R.setAttribute("href","#"+E),C.appendChild(R),T.data.hd=!1,T.show()}A.setMatte(T.layerId)},SVGMatte3Effect.prototype.initialize=function(){for(var A=this.filterManager.effectElements[0].p.v,T=this.elem.comp.elements,E=0,C=T.length;E<C;)T[E]&&T[E].data.ind===A&&this.setElementAsMask(this.elem,T[E]),E+=1;this.initialized=!0},SVGMatte3Effect.prototype.renderFrame=function(){this.initialized||this.initialize()};function SVGGaussianBlurEffect(A,T,E,C){A.setAttribute("x","-100%"),A.setAttribute("y","-100%"),A.setAttribute("width","300%"),A.setAttribute("height","300%"),this.filterManager=T;var P=createNS("feGaussianBlur");P.setAttribute("result",C),A.appendChild(P),this.feGaussianBlur=P}SVGGaussianBlurEffect.prototype.renderFrame=function(A){if(A||this.filterManager._mdf){var T=.3,E=this.filterManager.effectElements[0].p.v*T,C=this.filterManager.effectElements[1].p.v,P=C==3?0:E,I=C==2?0:E;this.feGaussianBlur.setAttribute("stdDeviation",P+" "+I);var R=this.filterManager.effectElements[2].p.v==1?"wrap":"duplicate";this.feGaussianBlur.setAttribute("edgeMode",R)}};function TransformEffect(){}TransformEffect.prototype.init=function(A){this.effectsManager=A,this.type=effectTypes.TRANSFORM_EFFECT,this.matrix=new Matrix,this.opacity=-1,this._mdf=!1,this._opMdf=!1},TransformEffect.prototype.renderFrame=function(A){if(this._opMdf=!1,this._mdf=!1,A||this.effectsManager._mdf){var T=this.effectsManager.effectElements,E=T[0].p.v,C=T[1].p.v,P=T[2].p.v===1,I=T[3].p.v,R=P?I:T[4].p.v,F=T[5].p.v,O=T[6].p.v,D=T[7].p.v;this.matrix.reset(),this.matrix.translate(-E[0],-E[1],E[2]),this.matrix.scale(R*.01,I*.01,1),this.matrix.rotate(-D*degToRads),this.matrix.skewFromAxis(-F*degToRads,(O+90)*degToRads),this.matrix.translate(C[0],C[1],0),this._mdf=!0,this.opacity!==T[8].p.v&&(this.opacity=T[8].p.v,this._opMdf=!0)}};function SVGTransformEffect(A,T){this.init(T)}extendPrototype([TransformEffect],SVGTransformEffect);function CVTransformEffect(A){this.init(A)}return extendPrototype([TransformEffect],CVTransformEffect),registerRenderer("canvas",CanvasRenderer),registerRenderer("html",HybridRenderer),registerRenderer("svg",SVGRenderer),ShapeModifiers.registerModifier("tm",TrimModifier),ShapeModifiers.registerModifier("pb",PuckerAndBloatModifier),ShapeModifiers.registerModifier("rp",RepeaterModifier),ShapeModifiers.registerModifier("rd",RoundCornersModifier),ShapeModifiers.registerModifier("zz",ZigZagModifier),ShapeModifiers.registerModifier("op",OffsetPathModifier),setExpressionsPlugin(Expressions),setExpressionInterfaces(getInterface),initialize$1(),initialize(),registerEffect$1(20,SVGTintFilter,!0),registerEffect$1(21,SVGFillFilter,!0),registerEffect$1(22,SVGStrokeEffect,!1),registerEffect$1(23,SVGTritoneFilter,!0),registerEffect$1(24,SVGProLevelsFilter,!0),registerEffect$1(25,SVGDropShadowEffect,!0),registerEffect$1(28,SVGMatte3Effect,!1),registerEffect$1(29,SVGGaussianBlurEffect,!0),registerEffect$1(35,SVGTransformEffect,!1),registerEffect(35,CVTransformEffect),lottie})})(lottie$1,lottie$1.exports);var lottieExports=lottie$1.exports;const lottie=getDefaultExportFromCjs(lottieExports);function create_fragment$7(A){let T,E,C,P,I="Red",R,F,O,D,L,B,V,U="Green",z,W,Z,X,K,Y,Q,J="Blue",te,ie,ne,he,ve,ye,de,fe,ue,ge,ae,ce;return{c(){T=element("div"),E=element("div"),C=element("div"),P=element("strong"),P.textContent=I,R=space(),F=element("input"),O=space(),D=element("input"),L=space(),B=element("div"),V=element("strong"),V.textContent=U,z=space(),W=element("input"),Z=space(),X=element("input"),K=space(),Y=element("div"),Q=element("strong"),Q.textContent=J,te=space(),ie=element("input"),ne=space(),he=element("input"),ve=space(),ye=element("div"),de=element("div"),fe=space(),ue=element("div"),ge=element("input"),this.h()},l(se){T=claim_element(se,"DIV",{class:!0});var le=children$1(T);E=claim_element(le,"DIV",{class:!0});var _e=children$1(E);C=claim_element(_e,"DIV",{class:!0});var me=children$1(C);P=claim_element(me,"STRONG",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(P)!=="svelte-1t5qv47"&&(P.textContent=I),R=claim_space(me),F=claim_element(me,"INPUT",{type:!0,min:!0,max:!0,class:!0}),O=claim_space(me),D=claim_element(me,"INPUT",{class:!0,type:!0}),me.forEach(detach),L=claim_space(_e),B=claim_element(_e,"DIV",{class:!0});var Ee=children$1(B);V=claim_element(Ee,"STRONG",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(V)!=="svelte-603a6r"&&(V.textContent=U),z=claim_space(Ee),W=claim_element(Ee,"INPUT",{type:!0,min:!0,max:!0,class:!0}),Z=claim_space(Ee),X=claim_element(Ee,"INPUT",{class:!0,type:!0}),Ee.forEach(detach),K=claim_space(_e),Y=claim_element(_e,"DIV",{class:!0});var Pe=children$1(Y);Q=claim_element(Pe,"STRONG",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(Q)!=="svelte-u094rs"&&(Q.textContent=J),te=claim_space(Pe),ie=claim_element(Pe,"INPUT",{type:!0,min:!0,max:!0,class:!0}),ne=claim_space(Pe),he=claim_element(Pe,"INPUT",{class:!0,type:!0}),Pe.forEach(detach),_e.forEach(detach),ve=claim_space(le),ye=claim_element(le,"DIV",{class:!0});var Ce=children$1(ye);de=claim_element(Ce,"DIV",{class:!0,style:!0}),children$1(de).forEach(detach),fe=claim_space(Ce),ue=claim_element(Ce,"DIV",{});var ke=children$1(ue);ge=claim_element(ke,"INPUT",{class:!0,type:!0}),ke.forEach(detach),Ce.forEach(detach),le.forEach(detach),this.h()},h(){attr(P,"class","svelte-w9go3q"),attr(F,"type","range"),attr(F,"min","0"),attr(F,"max","255"),attr(F,"class","svelte-w9go3q"),attr(D,"class","text-input svelte-w9go3q"),attr(D,"type","number"),attr(C,"class","color-component svelte-w9go3q"),attr(V,"class","svelte-w9go3q"),attr(W,"type","range"),attr(W,"min","0"),attr(W,"max","255"),attr(W,"class","svelte-w9go3q"),attr(X,"class","text-input svelte-w9go3q"),attr(X,"type","number"),attr(B,"class","color-component svelte-w9go3q"),attr(Q,"class","svelte-w9go3q"),attr(ie,"type","range"),attr(ie,"min","0"),attr(ie,"max","255"),attr(ie,"class","svelte-w9go3q"),attr(he,"class","text-input svelte-w9go3q"),attr(he,"type","number"),attr(Y,"class","color-component svelte-w9go3q"),attr(E,"class","color-selectors svelte-w9go3q"),attr(de,"class","preview svelte-w9go3q"),set_style(de,"background",A[4]),attr(ge,"class","text-input svelte-w9go3q"),attr(ge,"type","text"),ge.value=A[3],attr(ye,"class","color-preview svelte-w9go3q"),attr(T,"class","color-picker svelte-w9go3q")},m(se,le){insert_hydration(se,T,le),append_hydration(T,E),append_hydration(E,C),append_hydration(C,P),append_hydration(C,R),append_hydration(C,F),set_input_value(F,A[0]),append_hydration(C,O),append_hydration(C,D),set_input_value(D,A[0]),append_hydration(E,L),append_hydration(E,B),append_hydration(B,V),append_hydration(B,z),append_hydration(B,W),set_input_value(W,A[1]),append_hydration(B,Z),append_hydration(B,X),set_input_value(X,A[1]),append_hydration(E,K),append_hydration(E,Y),append_hydration(Y,Q),append_hydration(Y,te),append_hydration(Y,ie),set_input_value(ie,A[2]),append_hydration(Y,ne),append_hydration(Y,he),set_input_value(he,A[2]),append_hydration(T,ve),append_hydration(T,ye),append_hydration(ye,de),append_hydration(ye,fe),append_hydration(ye,ue),append_hydration(ue,ge),ae||(ce=[listen(F,"change",A[7]),listen(F,"input",A[7]),listen(D,"input",A[8]),listen(W,"change",A[9]),listen(W,"input",A[9]),listen(X,"input",A[10]),listen(ie,"change",A[11]),listen(ie,"input",A[11]),listen(he,"input",A[12]),listen(ge,"change",A[13])],ae=!0)},p(se,[le]){le&1&&set_input_value(F,se[0]),le&1&&to_number(D.value)!==se[0]&&set_input_value(D,se[0]),le&2&&set_input_value(W,se[1]),le&2&&to_number(X.value)!==se[1]&&set_input_value(X,se[1]),le&4&&set_input_value(ie,se[2]),le&4&&to_number(he.value)!==se[2]&&set_input_value(he,se[2]),le&16&&set_style(de,"background",se[4]),le&8&&ge.value!==se[3]&&(ge.value=se[3])},i:noop$1,o:noop$1,d(se){se&&detach(T),ae=!1,run_all(ce)}}}function instance$5(A,T,E){let C;const P=createEventDispatcher();let{color:I}=T,R=0,F=0,O=0,D=null;const L=K=>{if(typeof K!="string")return;let Y=[];K[0]==="#"?Y=K.length===4?[K.slice(1,2),K.slice(2,3),K.slice(3,4)].map(Q=>parseInt(`${Q}${Q}`,16)):[K.slice(1,3),K.slice(3,5),K.slice(5,7)].map(Q=>parseInt(Q,16)):K.startsWith("rgb")&&(Y=K.match(/\d+/g).map(Q=>parseInt(Q))),Y.length&&(E(0,R=Y[0]),E(1,F=Y[1]),E(2,O=Y[2]))};function B(){R=to_number(this.value),E(0,R)}function V(){R=to_number(this.value),E(0,R)}function U(){F=to_number(this.value),E(1,F)}function z(){F=to_number(this.value),E(1,F)}function W(){O=to_number(this.value),E(2,O)}function Z(){O=to_number(this.value),E(2,O)}const X=K=>L(K.target.value);return A.$$set=K=>{"color"in K&&E(6,I=K.color)},A.$$.update=()=>{A.$$.dirty&64&&L(I),A.$$.dirty&7&&E(3,D="#"+(R|256).toString(16).slice(1)+(F|256).toString(16).slice(1)+(O|256).toString(16).slice(1)),A.$$.dirty&7&&E(4,C=`rgb(${R}, ${F}, ${O})`),A.$$.dirty&24&&P("color",{hex:D,rgb:C})},[R,F,O,D,C,L,I,B,V,U,z,W,Z,X]}class ColorPicker extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$5,create_fragment$7,safe_not_equal,{color:6})}}function create_if_block_10$1(A){let T,E,C="Lottie Version",P,I,R;return{c(){T=element("div"),E=element("span"),E.textContent=C,P=space(),I=element("span"),R=text(A[9]),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);E=claim_element(O,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(E)!=="svelte-140olyo"&&(E.textContent=C),P=claim_space(O),I=claim_element(O,"SPAN",{class:!0});var D=children$1(I);R=claim_text(D,A[9]),D.forEach(detach),O.forEach(detach),this.h()},h(){attr(E,"class","label svelte-1gm5gmt"),attr(I,"class","value svelte-1gm5gmt"),attr(T,"class","property svelte-1gm5gmt")},m(F,O){insert_hydration(F,T,O),append_hydration(T,E),append_hydration(T,P),append_hydration(T,I),append_hydration(I,R)},p(F,O){O&512&&set_data(R,F[9])},d(F){F&&detach(T)}}}function create_if_block_9$1(A){let T,E,C="Frames",P,I,R;return{c(){T=element("div"),E=element("span"),E.textContent=C,P=space(),I=element("span"),R=text(A[6]),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);E=claim_element(O,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(E)!=="svelte-t3mwqp"&&(E.textContent=C),P=claim_space(O),I=claim_element(O,"SPAN",{class:!0});var D=children$1(I);R=claim_text(D,A[6]),D.forEach(detach),O.forEach(detach),this.h()},h(){attr(E,"class","label svelte-1gm5gmt"),attr(I,"class","value svelte-1gm5gmt"),attr(T,"class","property svelte-1gm5gmt")},m(F,O){insert_hydration(F,T,O),append_hydration(T,E),append_hydration(T,P),append_hydration(T,I),append_hydration(I,R)},p(F,O){O&64&&set_data(R,F[6])},d(F){F&&detach(T)}}}function create_if_block_8$1(A){let T,E,C="Frame Rate",P,I,R;return{c(){T=element("div"),E=element("span"),E.textContent=C,P=space(),I=element("span"),R=text(A[1]),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);E=claim_element(O,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(E)!=="svelte-gz9x0y"&&(E.textContent=C),P=claim_space(O),I=claim_element(O,"SPAN",{class:!0});var D=children$1(I);R=claim_text(D,A[1]),D.forEach(detach),O.forEach(detach),this.h()},h(){attr(E,"class","label svelte-1gm5gmt"),attr(I,"class","value svelte-1gm5gmt"),attr(T,"class","property svelte-1gm5gmt")},m(F,O){insert_hydration(F,T,O),append_hydration(T,E),append_hydration(T,P),append_hydration(T,I),append_hydration(I,R)},p(F,O){O&2&&set_data(R,F[1])},d(F){F&&detach(T)}}}function create_if_block_7$1(A){let T,E,C="Layers",P,I,R;return{c(){T=element("div"),E=element("span"),E.textContent=C,P=space(),I=element("span"),R=text(A[7]),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);E=claim_element(O,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(E)!=="svelte-1xevuc9"&&(E.textContent=C),P=claim_space(O),I=claim_element(O,"SPAN",{class:!0});var D=children$1(I);R=claim_text(D,A[7]),D.forEach(detach),O.forEach(detach),this.h()},h(){attr(E,"class","label svelte-1gm5gmt"),attr(I,"class","value svelte-1gm5gmt"),attr(T,"class","property svelte-1gm5gmt")},m(F,O){insert_hydration(F,T,O),append_hydration(T,E),append_hydration(T,P),append_hydration(T,I),append_hydration(I,R)},p(F,O){O&128&&set_data(R,F[7])},d(F){F&&detach(T)}}}function create_if_block_6$1(A){let T,E,C="Assets",P,I,R;return{c(){T=element("div"),E=element("span"),E.textContent=C,P=space(),I=element("span"),R=text(A[4]),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);E=claim_element(O,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(E)!=="svelte-6uf78y"&&(E.textContent=C),P=claim_space(O),I=claim_element(O,"SPAN",{class:!0});var D=children$1(I);R=claim_text(D,A[4]),D.forEach(detach),O.forEach(detach),this.h()},h(){attr(E,"class","label svelte-1gm5gmt"),attr(I,"class","value svelte-1gm5gmt"),attr(T,"class","property svelte-1gm5gmt")},m(F,O){insert_hydration(F,T,O),append_hydration(T,E),append_hydration(T,P),append_hydration(T,I),append_hydration(I,R)},p(F,O){O&16&&set_data(R,F[4])},d(F){F&&detach(T)}}}function create_if_block_5$1(A){let T,E,C="Fonts",P,I,R;return{c(){T=element("div"),E=element("span"),E.textContent=C,P=space(),I=element("span"),R=text(A[5]),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);E=claim_element(O,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(E)!=="svelte-195sn5x"&&(E.textContent=C),P=claim_space(O),I=claim_element(O,"SPAN",{class:!0});var D=children$1(I);R=claim_text(D,A[5]),D.forEach(detach),O.forEach(detach),this.h()},h(){attr(E,"class","label svelte-1gm5gmt"),attr(I,"class","value svelte-1gm5gmt"),attr(T,"class","property svelte-1gm5gmt")},m(F,O){insert_hydration(F,T,O),append_hydration(T,E),append_hydration(T,P),append_hydration(T,I),append_hydration(I,R)},p(F,O){O&32&&set_data(R,F[5])},d(F){F&&detach(T)}}}function create_if_block$3(A){let T,E,C,P,I,R,F=A[2]&&create_if_block_4$1(A),O=A[0]&&create_if_block_3$1(A),D=A[3]&&create_if_block_2$1(A),L=A[8]&&create_if_block_1$3(A);return{c(){T=element("hr"),E=space(),F&&F.c(),C=space(),O&&O.c(),P=space(),D&&D.c(),I=space(),L&&L.c(),R=empty$1()},l(B){T=claim_element(B,"HR",{}),E=claim_space(B),F&&F.l(B),C=claim_space(B),O&&O.l(B),P=claim_space(B),D&&D.l(B),I=claim_space(B),L&&L.l(B),R=empty$1()},m(B,V){insert_hydration(B,T,V),insert_hydration(B,E,V),F&&F.m(B,V),insert_hydration(B,C,V),O&&O.m(B,V),insert_hydration(B,P,V),D&&D.m(B,V),insert_hydration(B,I,V),L&&L.m(B,V),insert_hydration(B,R,V)},p(B,V){B[2]?F?F.p(B,V):(F=create_if_block_4$1(B),F.c(),F.m(C.parentNode,C)):F&&(F.d(1),F=null),B[0]?O?O.p(B,V):(O=create_if_block_3$1(B),O.c(),O.m(P.parentNode,P)):O&&(O.d(1),O=null),B[3]?D?D.p(B,V):(D=create_if_block_2$1(B),D.c(),D.m(I.parentNode,I)):D&&(D.d(1),D=null),B[8]?L?L.p(B,V):(L=create_if_block_1$3(B),L.c(),L.m(R.parentNode,R)):L&&(L.d(1),L=null)},d(B){B&&(detach(T),detach(E),detach(C),detach(P),detach(I),detach(R)),F&&F.d(B),O&&O.d(B),D&&D.d(B),L&&L.d(B)}}}function create_if_block_4$1(A){let T,E,C="Generator",P,I,R;return{c(){T=element("div"),E=element("span"),E.textContent=C,P=space(),I=element("span"),R=text(A[2]),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);E=claim_element(O,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(E)!=="svelte-14vtnfc"&&(E.textContent=C),P=claim_space(O),I=claim_element(O,"SPAN",{class:!0});var D=children$1(I);R=claim_text(D,A[2]),D.forEach(detach),O.forEach(detach),this.h()},h(){attr(E,"class","label svelte-1gm5gmt"),attr(I,"class","value svelte-1gm5gmt"),attr(T,"class","property svelte-1gm5gmt")},m(F,O){insert_hydration(F,T,O),append_hydration(T,E),append_hydration(T,P),append_hydration(T,I),append_hydration(I,R)},p(F,O){O&4&&set_data(R,F[2])},d(F){F&&detach(T)}}}function create_if_block_3$1(A){let T,E,C="Author",P,I,R;return{c(){T=element("div"),E=element("span"),E.textContent=C,P=space(),I=element("span"),R=text(A[0]),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);E=claim_element(O,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(E)!=="svelte-1r8juj4"&&(E.textContent=C),P=claim_space(O),I=claim_element(O,"SPAN",{class:!0});var D=children$1(I);R=claim_text(D,A[0]),D.forEach(detach),O.forEach(detach),this.h()},h(){attr(E,"class","label svelte-1gm5gmt"),attr(I,"class","value svelte-1gm5gmt"),attr(T,"class","property svelte-1gm5gmt")},m(F,O){insert_hydration(F,T,O),append_hydration(T,E),append_hydration(T,P),append_hydration(T,I),append_hydration(I,R)},p(F,O){O&1&&set_data(R,F[0])},d(F){F&&detach(T)}}}function create_if_block_2$1(A){let T,E,C="Keywords",P,I,R;return{c(){T=element("div"),E=element("span"),E.textContent=C,P=space(),I=element("span"),R=text(A[3]),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);E=claim_element(O,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(E)!=="svelte-5f12vj"&&(E.textContent=C),P=claim_space(O),I=claim_element(O,"SPAN",{class:!0});var D=children$1(I);R=claim_text(D,A[3]),D.forEach(detach),O.forEach(detach),this.h()},h(){attr(E,"class","label svelte-1gm5gmt"),attr(I,"class","value svelte-1gm5gmt"),attr(T,"class","property svelte-1gm5gmt")},m(F,O){insert_hydration(F,T,O),append_hydration(T,E),append_hydration(T,P),append_hydration(T,I),append_hydration(I,R)},p(F,O){O&8&&set_data(R,F[3])},d(F){F&&detach(T)}}}function create_if_block_1$3(A){let T,E,C="Theme Color",P,I,R;return{c(){T=element("div"),E=element("span"),E.textContent=C,P=space(),I=element("span"),R=text(A[8]),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);E=claim_element(O,"SPAN",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(E)!=="svelte-1csv89t"&&(E.textContent=C),P=claim_space(O),I=claim_element(O,"SPAN",{class:!0});var D=children$1(I);R=claim_text(D,A[8]),D.forEach(detach),O.forEach(detach),this.h()},h(){attr(E,"class","label svelte-1gm5gmt"),attr(I,"class","value svelte-1gm5gmt"),attr(T,"class","property svelte-1gm5gmt")},m(F,O){insert_hydration(F,T,O),append_hydration(T,E),append_hydration(T,P),append_hydration(T,I),append_hydration(I,R)},p(F,O){O&256&&set_data(R,F[8])},d(F){F&&detach(T)}}}function create_fragment$6(A){let T,E="Info",C,P,I,R,F,O,D,L,B=A[9]&&create_if_block_10$1(A),V=A[6]&&create_if_block_9$1(A),U=A[1]&&create_if_block_8$1(A),z=A[7]&&create_if_block_7$1(A),W=A[4]&&create_if_block_6$1(A),Z=A[5]&&create_if_block_5$1(A),X=A[10]&&create_if_block$3(A);return{c(){T=element("h4"),T.textContent=E,C=space(),B&&B.c(),P=space(),V&&V.c(),I=space(),U&&U.c(),R=space(),z&&z.c(),F=space(),W&&W.c(),O=space(),Z&&Z.c(),D=space(),X&&X.c(),L=empty$1(),this.h()},l(K){T=claim_element(K,"H4",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(T)!=="svelte-11vwzdi"&&(T.textContent=E),C=claim_space(K),B&&B.l(K),P=claim_space(K),V&&V.l(K),I=claim_space(K),U&&U.l(K),R=claim_space(K),z&&z.l(K),F=claim_space(K),W&&W.l(K),O=claim_space(K),Z&&Z.l(K),D=claim_space(K),X&&X.l(K),L=empty$1(),this.h()},h(){attr(T,"class","svelte-1gm5gmt")},m(K,Y){insert_hydration(K,T,Y),insert_hydration(K,C,Y),B&&B.m(K,Y),insert_hydration(K,P,Y),V&&V.m(K,Y),insert_hydration(K,I,Y),U&&U.m(K,Y),insert_hydration(K,R,Y),z&&z.m(K,Y),insert_hydration(K,F,Y),W&&W.m(K,Y),insert_hydration(K,O,Y),Z&&Z.m(K,Y),insert_hydration(K,D,Y),X&&X.m(K,Y),insert_hydration(K,L,Y)},p(K,[Y]){K[9]?B?B.p(K,Y):(B=create_if_block_10$1(K),B.c(),B.m(P.parentNode,P)):B&&(B.d(1),B=null),K[6]?V?V.p(K,Y):(V=create_if_block_9$1(K),V.c(),V.m(I.parentNode,I)):V&&(V.d(1),V=null),K[1]?U?U.p(K,Y):(U=create_if_block_8$1(K),U.c(),U.m(R.parentNode,R)):U&&(U.d(1),U=null),K[7]?z?z.p(K,Y):(z=create_if_block_7$1(K),z.c(),z.m(F.parentNode,F)):z&&(z.d(1),z=null),K[4]?W?W.p(K,Y):(W=create_if_block_6$1(K),W.c(),W.m(O.parentNode,O)):W&&(W.d(1),W=null),K[5]?Z?Z.p(K,Y):(Z=create_if_block_5$1(K),Z.c(),Z.m(D.parentNode,D)):Z&&(Z.d(1),Z=null),K[10]?X?X.p(K,Y):(X=create_if_block$3(K),X.c(),X.m(L.parentNode,L)):X&&(X.d(1),X=null)},i:noop$1,o:noop$1,d(K){K&&(detach(T),detach(C),detach(P),detach(I),detach(R),detach(F),detach(O),detach(D),detach(L)),B&&B.d(K),V&&V.d(K),U&&U.d(K),z&&z.d(K),W&&W.d(K),Z&&Z.d(K),X&&X.d(K)}}}function instance$4(A,T,E){let{animationData:C}=T,P,I,R,F,O,D,L,B,V,U,z=!1;return A.$$set=W=>{"animationData"in W&&E(11,C=W.animationData)},A.$$.update=()=>{A.$$.dirty&2048&&C&&(E(1,I=C.fr),E(4,O=C.assets?C.assets.length:0),E(5,D=C.fonts?C.fonts.length:0),E(6,L=C.op-C.ip),E(7,B=C.layers?C.layers.length:0),E(9,U=C.v),C.meta&&(E(10,z=!0),E(0,P=C.meta.a),E(2,R=C.meta.g),E(3,F=C.meta.k),E(8,V=C.meta.tc)))},[P,I,R,F,O,D,L,B,V,U,z,C]}class Info extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$4,create_fragment$6,safe_not_equal,{animationData:11})}}const get_content_slot_changes=A=>({}),get_content_slot_context=A=>({}),get_target_slot_changes=A=>({}),get_target_slot_context=A=>({});function create_fragment$5(A){let T,E,C,P,I,R,F,O,D;const L=A[8].target,B=create_slot(L,A,A[7],get_target_slot_context),V=A[8].content,U=create_slot(V,A,A[7],get_content_slot_context);return{c(){T=element("div"),E=element("div"),B&&B.c(),C=space(),P=element("div"),U&&U.c(),I=space(),R=element("div"),this.h()},l(z){T=claim_element(z,"DIV",{class:!0});var W=children$1(T);E=claim_element(W,"DIV",{});var Z=children$1(E);B&&B.l(Z),Z.forEach(detach),C=claim_space(W),P=claim_element(W,"DIV",{class:!0});var X=children$1(P);U&&U.l(X),I=claim_space(X),R=claim_element(X,"DIV",{class:!0,style:!0}),children$1(R).forEach(detach),X.forEach(detach),W.forEach(detach),this.h()},h(){attr(R,"class","arrow svelte-cq7jp3"),set_style(R,"border-color",A[0]+" transparent transparent transparent"),attr(P,"class","popover-content svelte-cq7jp3"),toggle_class(P,"hidden",!A[4]),toggle_class(P,"left-align",A[3]!==-1),toggle_class(P,"right-align",A[3]===-1),attr(T,"class","popover svelte-cq7jp3")},m(z,W){insert_hydration(z,T,W),append_hydration(T,E),B&&B.m(E,null),A[12](E),append_hydration(T,C),append_hydration(T,P),U&&U.m(P,null),append_hydration(P,I),append_hydration(P,R),A[13](P),F=!0,O||(D=[listen(T,"mousedown",A[9]),listen(T,"mouseover",A[5]),listen(T,"mouseout",A[6]),listen(T,"mouseup",A[10]),listen(T,"mousewheel",A[11])],O=!0)},p(z,[W]){B&&B.p&&(!F||W&128)&&update_slot_base(B,L,z,z[7],F?get_slot_changes(L,z[7],W,get_target_slot_changes):get_all_dirty_from_scope(z[7]),get_target_slot_context),U&&U.p&&(!F||W&128)&&update_slot_base(U,V,z,z[7],F?get_slot_changes(V,z[7],W,get_content_slot_changes):get_all_dirty_from_scope(z[7]),get_content_slot_context),(!F||W&1)&&set_style(R,"border-color",z[0]+" transparent transparent transparent"),(!F||W&16)&&toggle_class(P,"hidden",!z[4]),(!F||W&8)&&toggle_class(P,"left-align",z[3]!==-1),(!F||W&8)&&toggle_class(P,"right-align",z[3]===-1)},i(z){F||(transition_in(B,z),transition_in(U,z),F=!0)},o(z){transition_out(B,z),transition_out(U,z),F=!1},d(z){z&&detach(T),B&&B.d(z),A[12](null),U&&U.d(z),A[13](null),O=!1,run_all(D)}}}function instance$3(A,T,E){let{$$slots:C={},$$scope:P}=T,{color:I="transparent"}=T,R,F,O,D=!0;onMount(()=>{const X=R.getBoundingClientRect(),K=F.getBoundingClientRect();E(3,O=X.left+K.width>window.innerWidth?-1:0),E(2,F.style.bottom=X.height+"px",F),B()});const L=()=>{E(4,D=!0)},B=()=>{E(4,D=!1)};function V(X){bubble.call(this,A,X)}function U(X){bubble.call(this,A,X)}function z(X){bubble.call(this,A,X)}function W(X){binding_callbacks[X?"unshift":"push"](()=>{R=X,E(1,R)})}function Z(X){binding_callbacks[X?"unshift":"push"](()=>{F=X,E(2,F)})}return A.$$set=X=>{"color"in X&&E(0,I=X.color),"$$scope"in X&&E(7,P=X.$$scope)},[I,R,F,O,D,L,B,P,C,V,U,z,W,Z]}class Popover extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$3,create_fragment$5,safe_not_equal,{color:0})}}const PlayerRender={SVG:"svg",Canvas:"canvas"},PlayerState={Loading:"loading",Playing:"playing",Paused:"paused",Stopped:"stopped",Frozen:"frozen",Error:"error"},PlayMode={Normal:"normal",Bounce:"bounce"},PlayerEvents={Load:"load",Error:"error",Ready:"ready",Play:"play",Pause:"pause",Stop:"stop",Freeze:"freeze",Loop:"loop",Complete:"complete",Frame:"frame"},ControlsLayoutOptions=["previousFrame","playpause","stop","nextFrame","progress","frame","loop","spacer","background","snapshot","info","zoom"],parseSrc=A=>{if(typeof A=="object")return A;try{return JSON.parse(A)}catch{return new URL(A,window.location.href).toString()}},triggerDownload=(A,T)=>{const E=document.createElement("a");E.href=A,E.download=T,document.body.appendChild(E),E.click(),document.body.removeChild(E)};function get_each_context(A,T,E){const C=A.slice();return C[40]=T[E],C}function create_if_block_13(A){let T;return{c(){T=element("div"),this.h()},l(E){T=claim_element(E,"DIV",{class:!0}),children$1(T).forEach(detach),this.h()},h(){attr(T,"class","spacer svelte-9yox50")},m(E,C){insert_hydration(E,T,C)},p:noop$1,i:noop$1,o:noop$1,d(E){E&&detach(T)}}}function create_if_block_12(A){let T,E,C,P,I,R,F,O=[A[19]],D={};for(let L=0;L<O.length;L+=1)D=assign$1(D,O[L]);return{c(){T=element("div"),E=svg_element("svg"),C=svg_element("path"),P=svg_element("rect"),I=space(),this.h()},l(L){T=claim_element(L,"DIV",{class:!0});var B=children$1(T);E=claim_svg_element(B,"svg",{});var V=children$1(E);C=claim_svg_element(V,"path",{d:!0}),children$1(C).forEach(detach),P=claim_svg_element(V,"rect",{height:!0,rx:!0,transform:!0,width:!0}),children$1(P).forEach(detach),V.forEach(detach),I=claim_space(B),B.forEach(detach),this.h()},h(){attr(C,"d","M22 4.5a1.4 1.4 0 00-2.1-1.2l-13 7.5a1.4 1.4 0 000 2.4l13 7.5a1.4 1.4 0 002.1-1.2z"),attr(P,"height","17.1"),attr(P,"rx","1.4"),attr(P,"transform","matrix(-1 0 0 1 7.7 3.4)"),attr(P,"width","5.7"),set_svg_attributes(E,D),toggle_class(E,"svelte-9yox50",!0),attr(T,"class","btn svelte-9yox50")},m(L,B){insert_hydration(L,T,B),append_hydration(T,E),append_hydration(E,C),append_hydration(E,P),append_hydration(T,I),R||(F=listen(T,"click",A[24]),R=!0)},p(L,B){toggle_class(E,"svelte-9yox50",!0)},i:noop$1,o:noop$1,d(L){L&&detach(T),R=!1,F()}}}function create_if_block_11(A){let T,E,C,P,I,R,F,O=[A[19]],D={};for(let L=0;L<O.length;L+=1)D=assign$1(D,O[L]);return{c(){T=element("div"),E=svg_element("svg"),C=svg_element("path"),P=svg_element("rect"),I=space(),this.h()},l(L){T=claim_element(L,"DIV",{class:!0});var B=children$1(T);E=claim_svg_element(B,"svg",{});var V=children$1(E);C=claim_svg_element(V,"path",{d:!0}),children$1(C).forEach(detach),P=claim_svg_element(V,"rect",{height:!0,rx:!0,transform:!0,width:!0}),children$1(P).forEach(detach),V.forEach(detach),I=claim_space(B),B.forEach(detach),this.h()},h(){attr(C,"d",`M2 19.513a1.429 1.429 0 0 0 2.148 1.234l12.88-7.513a1.429 1.429 0 0 0 0-2.468L4.147 3.253A1.429 1.429 0 0
            0 2 4.487z`),attr(P,"height","17.143"),attr(P,"rx","1.429"),attr(P,"transform","matrix(1 0 0 -1 16.286 20.571)"),attr(P,"width","5.714"),set_svg_attributes(E,D),toggle_class(E,"svelte-9yox50",!0),attr(T,"class","btn svelte-9yox50")},m(L,B){insert_hydration(L,T,B),append_hydration(T,E),append_hydration(E,C),append_hydration(E,P),append_hydration(T,I),R||(F=listen(T,"click",A[23]),R=!0)},p(L,B){toggle_class(E,"svelte-9yox50",!0)},i:noop$1,o:noop$1,d(L){L&&detach(T),R=!1,F()}}}function create_if_block_10(A){let T,E,C,P,I;return{c(){T=element("div"),E=element("input"),C=space(),this.h()},l(R){T=claim_element(R,"DIV",{class:!0});var F=children$1(T);E=claim_element(F,"INPUT",{class:!0,type:!0}),C=claim_space(F),F.forEach(detach),this.h()},h(){attr(E,"class","frame-number svelte-9yox50"),attr(E,"type","text"),attr(T,"class"," svelte-9yox50")},m(R,F){insert_hydration(R,T,F),append_hydration(T,E),set_input_value(E,A[15]),append_hydration(T,C),P||(I=[listen(E,"input",A[34]),listen(E,"mouseout",A[35]),listen(E,"mouseover",A[36]),listen(E,"input",A[37]),listen(E,"mousewheel",A[38])],P=!0)},p(R,F){F[0]&32768&&E.value!==R[15]&&set_input_value(E,R[15])},i:noop$1,o:noop$1,d(R){R&&detach(T),P=!1,run_all(I)}}}function create_if_block_9(A){let T,E,C,P;return E=new Popover({props:{color:"#fff",$$slots:{content:[create_content_slot_2],target:[create_target_slot_2]},$$scope:{ctx:A}}}),{c(){T=element("div"),create_component(E.$$.fragment),C=space(),this.h()},l(I){T=claim_element(I,"DIV",{class:!0});var R=children$1(T);claim_component(E.$$.fragment,R),C=claim_space(R),R.forEach(detach),this.h()},h(){attr(T,"class"," svelte-9yox50")},m(I,R){insert_hydration(I,T,R),mount_component(E,T,null),append_hydration(T,C),P=!0},p(I,R){const F={};R[0]&2|R[1]&4096&&(F.$$scope={dirty:R,ctx:I}),E.$set(F)},i(I){P||(transition_in(E.$$.fragment,I),P=!0)},o(I){transition_out(E.$$.fragment,I),P=!1},d(I){I&&detach(T),destroy_component(E)}}}function create_if_block_7(A){let T,E,C,P;function I(O,D){return O[14]?create_if_block_8:create_else_block_1$1}let R=I(A),F=R(A);return{c(){T=element("div"),F.c(),E=space(),this.h()},l(O){T=claim_element(O,"DIV",{class:!0});var D=children$1(T);F.l(D),E=claim_space(D),D.forEach(detach),this.h()},h(){attr(T,"class","btn svelte-9yox50")},m(O,D){insert_hydration(O,T,D),F.m(T,null),append_hydration(T,E),C||(P=listen(T,"click",A[22]),C=!0)},p(O,D){R===(R=I(O))&&F?F.p(O,D):(F.d(1),F=R(O),F&&(F.c(),F.m(T,E)))},i:noop$1,o:noop$1,d(O){O&&detach(T),F.d(),C=!1,P()}}}function create_if_block_6(A){let T,E,C,P,I,R;return E=new Popover({props:{color:"#fff",$$slots:{content:[create_content_slot_1],target:[create_target_slot_1]},$$scope:{ctx:A}}}),E.$on("mousewheel",A[31]),{c(){T=element("div"),create_component(E.$$.fragment),C=space(),this.h()},l(F){T=claim_element(F,"DIV",{class:!0});var O=children$1(T);claim_component(E.$$.fragment,O),C=claim_space(O),O.forEach(detach),this.h()},h(){attr(T,"class"," svelte-9yox50")},m(F,O){insert_hydration(F,T,O),mount_component(E,T,null),append_hydration(T,C),P=!0,I||(R=[listen(T,"mouseout",A[32]),listen(T,"mouseover",A[33])],I=!0)},p(F,O){const D={};O[0]&33792|O[1]&4096&&(D.$$scope={dirty:O,ctx:F}),E.$set(D)},i(F){P||(transition_in(E.$$.fragment,F),P=!0)},o(F){transition_out(E.$$.fragment,F),P=!1},d(F){F&&detach(T),destroy_component(E),I=!1,run_all(R)}}}function create_if_block_5(A){let T,E,C,P;return E=new Popover({props:{color:"#fff",$$slots:{content:[create_content_slot],target:[create_target_slot]},$$scope:{ctx:A}}}),{c(){T=element("div"),create_component(E.$$.fragment),C=space(),this.h()},l(I){T=claim_element(I,"DIV",{class:!0});var R=children$1(T);claim_component(E.$$.fragment,R),C=claim_space(R),R.forEach(detach),this.h()},h(){attr(T,"class"," svelte-9yox50")},m(I,R){insert_hydration(I,T,R),mount_component(E,T,null),append_hydration(T,C),P=!0},p(I,R){const F={};R[0]&4|R[1]&4096&&(F.$$scope={dirty:R,ctx:I}),E.$set(F)},i(I){P||(transition_in(E.$$.fragment,I),P=!0)},o(I){transition_out(E.$$.fragment,I),P=!1},d(I){I&&detach(T),destroy_component(E)}}}function create_if_block_4(A){let T,E,C,P,I,R,F,O=[A[19]],D={};for(let L=0;L<O.length;L+=1)D=assign$1(D,O[L]);return{c(){T=element("div"),E=svg_element("svg"),C=svg_element("path"),P=svg_element("path"),I=space(),this.h()},l(L){T=claim_element(L,"DIV",{class:!0});var B=children$1(T);E=claim_svg_element(B,"svg",{});var V=children$1(E);C=claim_svg_element(V,"path",{d:!0,stroke:!0,"stroke-width":!0}),children$1(C).forEach(detach),P=claim_svg_element(V,"path",{d:!0,fill:!0,stroke:!0,"stroke-width":!0}),children$1(P).forEach(detach),V.forEach(detach),I=claim_space(B),B.forEach(detach),this.h()},h(){attr(C,"d",`M12.5 16.8137h-.13v1.8939h4.9696c3.6455 0 6.6113-2.9658 6.6113-6.6116
            0-3.64549-2.9658-6.61131-6.6113-6.61131-.5231 0-.947.42391-.947.94696 0 .52304.4239.94696.947.94696 2.6011 0
            4.7174 2.11634 4.7174 4.71739 0 2.6014-2.1166 4.7177-4.7174 4.7177H12.5zM13.6025
            5.61469v-.13H7.48137C3.83582 5.48469.87 8.45051.87 12.096c0 3.6509 3.17269 6.6117 6.81304 6.6117.52304 0
            .94696-.424.94696-.947 0-.5231-.42392-.947-.94696-.947-2.60804 0-4.91907-2.1231-4.91907-4.7176 0-2.60115
            2.11634-4.71744 4.7174-4.71744h6.12113V5.61469z`),attr(C,"stroke","#8795A1"),attr(C,"stroke-width",".26"),attr(P,"d",`M11.1482
            2.20355h0l-.001-.00116c-.3412-.40061-.9405-.44558-1.33668-.0996h-.00001c-.39526.34519-.43936.94795-.09898
            1.34767l2.51487 3.03683-2.51894 3.06468c-.33872.40088-.29282 1.00363.10347
            1.34723l.08517-.0982-.08517.0982c.17853.1549.39807.2308.61647.2308.2671 0 .5328-.114.72-.3347h0l.0011-.0014
            3.0435-3.68655.0006-.00068c.3035-.35872.3025-.88754-.0019-1.24526l-3.0425-3.65786zM13.9453
            21.7965h0l.001.0011c.3413.4006.9407.4456 1.337.0996h0c.3953-.3452.4395-.9479.099-1.3477l-2.5154-3.0368
            2.5195-3.0647c.3388-.4008.2929-1.0036-.1035-1.3472l-.0852.0982.0852-.0982c-.1786-.1549-.3981-.2308-.6166-.2308-.2671
            0-.5329.114-.7202.3347h0l-.0011.0014-3.0442
            3.6865c-.0001.0003-.0003.0005-.0005.0007-.3036.3587-.3027.8876.0019 1.2453l3.0431 3.6579z`),attr(P,"fill","#8795A1"),attr(P,"stroke","#8795A1"),attr(P,"stroke-width",".26"),set_svg_attributes(E,D),toggle_class(E,"svelte-9yox50",!0),attr(T,"class","btn svelte-9yox50"),toggle_class(T,"active",A[7])},m(L,B){insert_hydration(L,T,B),append_hydration(T,E),append_hydration(E,C),append_hydration(E,P),append_hydration(T,I),R||(F=listen(T,"click",function(){is_function(A[12])&&A[12].apply(this,arguments)}),R=!0)},p(L,B){A=L,toggle_class(E,"svelte-9yox50",!0),B[0]&128&&toggle_class(T,"active",A[7])},i:noop$1,o:noop$1,d(L){L&&detach(T),R=!1,F()}}}function create_if_block_3(A){let T,E,C,P;return{c(){T=element("input"),this.h()},l(I){T=claim_element(I,"INPUT",{class:!0,type:!0,min:!0,step:!0,max:!0,style:!0}),this.h()},h(){attr(T,"class","progress svelte-9yox50"),attr(T,"type","range"),attr(T,"min","0"),attr(T,"step","1"),attr(T,"max","100"),attr(T,"style",E=`
          background-image: -webkit-gradient(linear, left top, right top, color-stop(${A[0]}%, rgba(15, 204, 206, 0.4)), color-stop(${A[0]}%, #DAE1E7));
          background-image: -moz-linear-gradient(left center, rgba(15, 204, 206, 0.4) 0%, rgba(15, 204, 206, 0.4) ${A[0]}%, #DAE1E7 ${A[0]}%, #DAE1E7 100%);
        `)},m(I,R){insert_hydration(I,T,R),set_input_value(T,A[0]),C||(P=[listen(T,"change",A[28]),listen(T,"input",A[28]),listen(T,"input",A[20]),listen(T,"mousedown",function(){is_function(A[5])&&A[5].apply(this,arguments)}),listen(T,"mouseup",function(){is_function(A[8])&&A[8].apply(this,arguments)})],C=!0)},p(I,R){A=I,R[0]&1&&E!==(E=`
          background-image: -webkit-gradient(linear, left top, right top, color-stop(${A[0]}%, rgba(15, 204, 206, 0.4)), color-stop(${A[0]}%, #DAE1E7));
          background-image: -moz-linear-gradient(left center, rgba(15, 204, 206, 0.4) 0%, rgba(15, 204, 206, 0.4) ${A[0]}%, #DAE1E7 ${A[0]}%, #DAE1E7 100%);
        `)&&attr(T,"style",E),R[0]&1&&set_input_value(T,A[0])},i:noop$1,o:noop$1,d(I){I&&detach(T),C=!1,run_all(P)}}}function create_if_block_2(A){let T,E,C,P,I,R,F=[A[19]],O={};for(let D=0;D<F.length;D+=1)O=assign$1(O,F[D]);return{c(){T=element("div"),E=svg_element("svg"),C=svg_element("path"),P=space(),this.h()},l(D){T=claim_element(D,"DIV",{class:!0});var L=children$1(T);E=claim_svg_element(L,"svg",{});var B=children$1(E);C=claim_svg_element(B,"path",{d:!0}),children$1(C).forEach(detach),B.forEach(detach),P=claim_space(L),L.forEach(detach),this.h()},h(){attr(C,"d",`M2 3.667A1.67 1.67 0 0 1 3.667 2h16.666A1.67 1.67 0 0 1 22 3.667v16.666A1.67 1.67 0 0 1 20.333
            22H3.667A1.67 1.67 0 0 1 2 20.333z`),set_svg_attributes(E,O),toggle_class(E,"svelte-9yox50",!0),attr(T,"class","btn svelte-9yox50"),toggle_class(T,"active",A[16])},m(D,L){insert_hydration(D,T,L),append_hydration(T,E),append_hydration(E,C),append_hydration(T,P),I||(R=listen(T,"click",function(){is_function(A[11])&&A[11].apply(this,arguments)}),I=!0)},p(D,L){A=D,toggle_class(E,"svelte-9yox50",!0),L[0]&65536&&toggle_class(T,"active",A[16])},i:noop$1,o:noop$1,d(D){D&&detach(T),I=!1,R()}}}function create_if_block$2(A){let T,E,C,P;function I(O,D){return O[18]?create_if_block_1$2:create_else_block$1}let R=I(A),F=R(A);return{c(){T=element("div"),F.c(),E=space(),this.h()},l(O){T=claim_element(O,"DIV",{class:!0});var D=children$1(T);F.l(D),E=claim_space(D),D.forEach(detach),this.h()},h(){attr(T,"class","btn svelte-9yox50"),toggle_class(T,"active",A[18]||A[17])},m(O,D){insert_hydration(O,T,D),F.m(T,null),append_hydration(T,E),C||(P=listen(T,"click",function(){is_function(A[13])&&A[13].apply(this,arguments)}),C=!0)},p(O,D){A=O,R===(R=I(A))&&F?F.p(A,D):(F.d(1),F=R(A),F&&(F.c(),F.m(T,E))),D[0]&393216&&toggle_class(T,"active",A[18]||A[17])},i:noop$1,o:noop$1,d(O){O&&detach(T),F.d(),C=!1,P()}}}function create_target_slot_2(A){let T,E,C,P,I=[A[19]],R={};for(let F=0;F<I.length;F+=1)R=assign$1(R,I[F]);return{c(){T=element("div"),E=svg_element("svg"),C=svg_element("path"),P=svg_element("path"),this.h()},l(F){T=claim_element(F,"DIV",{class:!0,slot:!0});var O=children$1(T);E=claim_svg_element(O,"svg",{});var D=children$1(E);C=claim_svg_element(D,"path",{"fill-rule":!0,"clip-rule":!0,d:!0}),children$1(C).forEach(detach),P=claim_svg_element(D,"path",{"fill-rule":!0,"clip-rule":!0,d:!0}),children$1(P).forEach(detach),D.forEach(detach),O.forEach(detach),this.h()},h(){attr(C,"fill-rule","evenodd"),attr(C,"clip-rule","evenodd"),attr(C,"d",`M3.15 0h17.7A3.12 3.12 0 0124 3.1v17.8c0 1.71-1.4 3.1-3.15 3.1H3.15A3.12 3.12 0 010 20.9V3.1C0 1.39
                1.4 0 3.15 0zm0 2.05c-.6 0-1.07.47-1.07 1.05v17.8c0 .58.48 1.05 1.07 1.05h17.7c.6 0 1.07-.47
                1.07-1.05V3.1c0-.58-.48-1.05-1.07-1.05H3.15z`),attr(P,"fill-rule","evenodd"),attr(P,"clip-rule","evenodd"),attr(P,"d",`M12 10c.55 0 1 .42 1 .94v6.12c0 .52-.45.94-1 .94s-1-.42-1-.94v-6.12c0-.52.45-.94 1-.94zM12 6a1 1 0
                011 1v.42a1 1 0 11-2 0V7a1 1 0 011-1z`),set_svg_attributes(E,R),toggle_class(E,"svelte-9yox50",!0),attr(T,"class","btn svelte-9yox50"),attr(T,"slot","target")},m(F,O){insert_hydration(F,T,O),append_hydration(T,E),append_hydration(E,C),append_hydration(E,P)},p(F,O){toggle_class(E,"svelte-9yox50",!0)},d(F){F&&detach(T)}}}function create_content_slot_2(A){let T,E,C;return E=new Info({props:{animationData:A[1]}}),{c(){T=element("div"),create_component(E.$$.fragment),this.h()},l(P){T=claim_element(P,"DIV",{slot:!0,class:!0});var I=children$1(T);claim_component(E.$$.fragment,I),I.forEach(detach),this.h()},h(){attr(T,"slot","content"),attr(T,"class","popover popover-info svelte-9yox50")},m(P,I){insert_hydration(P,T,I),mount_component(E,T,null),C=!0},p(P,I){const R={};I[0]&2&&(R.animationData=P[1]),E.$set(R)},i(P){C||(transition_in(E.$$.fragment,P),C=!0)},o(P){transition_out(E.$$.fragment,P),C=!1},d(P){P&&detach(T),destroy_component(E)}}}function create_else_block_1$1(A){let T,E,C=[A[19]],P={};for(let I=0;I<C.length;I+=1)P=assign$1(P,C[I]);return{c(){T=svg_element("svg"),E=svg_element("path"),this.h()},l(I){T=claim_svg_element(I,"svg",{});var R=children$1(T);E=claim_svg_element(R,"path",{d:!0,"stroke-width":!0}),children$1(E).forEach(detach),R.forEach(detach),this.h()},h(){attr(E,"d",`M21 8a1 1 0 102 0V4a3 3 0 00-3-3h-4a1 1 0 100 2h4a1 1 0 011 1v4zM1 8a1 1 0 102 0V4a1 1 0 011-1h4a1 1 0
              100-2H4a3 3 0 00-3 3v4zm15 15h4a3 3 0 003-3v-4a1 1 0 10-2 0v4a1 1 0 01-1 1h-4a1 1 0 100 2zM4 23h4a1 1 0
              100-2H4a1 1 0 01-1-1v-4a1 1 0 10-2 0v4a3 3 0 003 3z`),attr(E,"stroke-width",".2"),set_svg_attributes(T,P),toggle_class(T,"svelte-9yox50",!0)},m(I,R){insert_hydration(I,T,R),append_hydration(T,E)},p(I,R){toggle_class(T,"svelte-9yox50",!0)},d(I){I&&detach(T)}}}function create_if_block_8(A){let T,E,C=[A[19]],P={};for(let I=0;I<C.length;I+=1)P=assign$1(P,C[I]);return{c(){T=svg_element("svg"),E=svg_element("path"),this.h()},l(I){T=claim_svg_element(I,"svg",{});var R=children$1(T);E=claim_svg_element(R,"path",{d:!0,"stroke-width":!0}),children$1(E).forEach(detach),R.forEach(detach),this.h()},h(){attr(E,"d",`M7 22a1 1 0 102 0v-4a3 3 0 00-3-3H2a1 1 0 100 2h4a1 1 0 011 1v4zm8 0a1 1 0 102 0v-4a1 1 0 011-1h4a1 1 0
              100-2h-4a3 3 0 00-3 3v4zM2 9h4a3 3 0 003-3V2a1 1 0 10-2 0v4a1 1 0 01-1 1H2a1 1 0 100 2zm16 0h4a1 1 0
              100-2h-4a1 1 0 01-1-1V2a1 1 0 10-2 0v4a3 3 0 003 3z`),attr(E,"stroke-width",".2"),set_svg_attributes(T,P),toggle_class(T,"svelte-9yox50",!0)},m(I,R){insert_hydration(I,T,R),append_hydration(T,E)},p(I,R){toggle_class(T,"svelte-9yox50",!0)},d(I){I&&detach(T)}}}function create_target_slot_1(A){let T,E,C,P,I,R,F=[A[19]],O={};for(let D=0;D<F.length;D+=1)O=assign$1(O,F[D]);return{c(){T=element("div"),E=svg_element("svg"),C=svg_element("path"),P=svg_element("path"),I=svg_element("circle"),R=svg_element("path"),this.h()},l(D){T=claim_element(D,"DIV",{class:!0,slot:!0});var L=children$1(T);E=claim_svg_element(L,"svg",{});var B=children$1(E);C=claim_svg_element(B,"path",{"clip-rule":!0,d:!0,"fill-rule":!0}),children$1(C).forEach(detach),P=claim_svg_element(B,"path",{d:!0}),children$1(P).forEach(detach),I=claim_svg_element(B,"circle",{cx:!0,cy:!0,r:!0}),children$1(I).forEach(detach),R=claim_svg_element(B,"path",{d:!0,stroke:!0,"stroke-width":!0}),children$1(R).forEach(detach),B.forEach(detach),L.forEach(detach),this.h()},h(){attr(C,"clip-rule","evenodd"),attr(C,"d",`M0 3.01A2.983 2.983 0 012.983.027H16.99a2.983 2.983 0 012.983 2.983v14.008a2.982 2.982 0 01-2.983
                2.983H2.983A2.983 2.983 0 010 17.018zm2.983-.941a.941.941 0 00-.942.94v14.01c0
                .52.422.94.942.94H16.99a.94.94 0 00.941-.94V3.008a.941.941 0 00-.94-.94H2.981z`),attr(C,"fill-rule","evenodd"),attr(P,"d","M12.229 7.945l-2.07 4.598-2.586-2.605-2.414 2.758v2.146h9.656V11.93z"),attr(I,"cx","7.444"),attr(I,"cy","6.513"),attr(I,"r","2.032"),attr(R,"d",`M9.561 23.916h11.25a2.929 2.929 0 002.926-2.927V9.954a1.06 1.06 0 10-2.122 0v11.035a.805.805 0
                01-.803.804H9.562a1.061 1.061 0 100 2.123z`),attr(R,"stroke","#8795a1"),attr(R,"stroke-width",".215"),set_svg_attributes(E,O),toggle_class(E,"svelte-9yox50",!0),attr(T,"class","btn svelte-9yox50"),attr(T,"slot","target")},m(D,L){insert_hydration(D,T,L),append_hydration(T,E),append_hydration(E,C),append_hydration(E,P),append_hydration(E,I),append_hydration(E,R)},p(D,L){toggle_class(E,"svelte-9yox50",!0)},d(D){D&&detach(T)}}}function create_content_slot_1(A){let T,E,C,P,I,R,F="Download SVG",O,D,L="Download PNG",B,V,U="Scroll with mousewheel to find exact frame",z,W;return{c(){T=element("div"),E=element("h5"),C=text("Frame "),P=text(A[15]),I=space(),R=element("a"),R.textContent=F,O=space(),D=element("a"),D.textContent=L,B=space(),V=element("i"),V.textContent=U,this.h()},l(Z){T=claim_element(Z,"DIV",{slot:!0,class:!0});var X=children$1(T);E=claim_element(X,"H5",{class:!0});var K=children$1(E);C=claim_text(K,"Frame "),P=claim_text(K,A[15]),K.forEach(detach),I=claim_space(X),R=claim_element(X,"A",{href:!0,class:!0,"data-svelte-h":!0}),get_svelte_dataset(R)!=="svelte-1700g46"&&(R.textContent=F),O=claim_space(X),D=claim_element(X,"A",{href:!0,class:!0,"data-svelte-h":!0}),get_svelte_dataset(D)!=="svelte-v3u96x"&&(D.textContent=L),B=claim_space(X),V=claim_element(X,"I",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(V)!=="svelte-19sz8ci"&&(V.textContent=U),X.forEach(detach),this.h()},h(){attr(E,"class","svelte-9yox50"),attr(R,"href","#downloadsvg"),attr(R,"class","svelte-9yox50"),attr(D,"href","#downloadsvg"),attr(D,"class","svelte-9yox50"),attr(V,"class","note svelte-9yox50"),attr(T,"slot","content"),attr(T,"class","popover popover-snapshot svelte-9yox50")},m(Z,X){insert_hydration(Z,T,X),append_hydration(T,E),append_hydration(E,C),append_hydration(E,P),append_hydration(T,I),append_hydration(T,R),append_hydration(T,O),append_hydration(T,D),append_hydration(T,B),append_hydration(T,V),z||(W=[listen(R,"click",A[29]),listen(D,"click",A[30])],z=!0)},p(Z,X){X[0]&32768&&set_data(P,Z[15])},d(Z){Z&&detach(T),z=!1,run_all(W)}}}function create_target_slot(A){let T,E,C,P=[A[19]],I={};for(let R=0;R<P.length;R+=1)I=assign$1(I,P[R]);return{c(){T=element("div"),E=svg_element("svg"),C=svg_element("path"),this.h()},l(R){T=claim_element(R,"DIV",{class:!0,slot:!0});var F=children$1(T);E=claim_svg_element(F,"svg",{});var O=children$1(E);C=claim_svg_element(O,"path",{d:!0}),children$1(C).forEach(detach),O.forEach(detach),F.forEach(detach),this.h()},h(){attr(C,"d",`M12 3.1L6.1 8.6a7.6 7.6 0 00-2.2 4 7.2 7.2 0 00.4 4.4 7.9 7.9 0 003 3.5 8.7 8.7 0 004.7 1.3c1.6 0
                3.2-.5 4.6-1.3s2.4-2 3-3.5a7.2 7.2 0 00.5-4.5 7.6 7.6 0 00-2.2-4L12 3.2zM12 0l7.5 7a9.8 9.8 0 013 5.1
                9.3 9.3 0 01-.6 5.8c-.9 1.8-2.2 3.3-4 4.4A11.2 11.2 0 0112 24a11.2 11.2 0
                01-6-1.7c-1.7-1-3-2.6-3.9-4.4a9.3 9.3 0 01-.6-5.8c.4-2 1.5-3.7 3-5L12 0zM6 14h12c0 1.5-.7 3-1.8 4s-2.6
                1.6-4.2 1.6S9 19 7.8 18s-1.7-2.5-1.7-4z`),set_svg_attributes(E,I),toggle_class(E,"svelte-9yox50",!0),attr(T,"class","btn svelte-9yox50"),attr(T,"slot","target")},m(R,F){insert_hydration(R,T,F),append_hydration(T,E),append_hydration(E,C)},p(R,F){toggle_class(E,"svelte-9yox50",!0)},d(R){R&&detach(T)}}}function create_content_slot(A){let T,E,C;return E=new ColorPicker({props:{color:A[2]}}),E.$on("color",A[21]),{c(){T=element("div"),create_component(E.$$.fragment),this.h()},l(P){T=claim_element(P,"DIV",{slot:!0,class:!0});var I=children$1(T);claim_component(E.$$.fragment,I),I.forEach(detach),this.h()},h(){attr(T,"slot","content"),attr(T,"class","popover popover-background svelte-9yox50")},m(P,I){insert_hydration(P,T,I),mount_component(E,T,null),C=!0},p(P,I){const R={};I[0]&4&&(R.color=P[2]),E.$set(R)},i(P){C||(transition_in(E.$$.fragment,P),C=!0)},o(P){transition_out(E.$$.fragment,P),C=!1},d(P){P&&detach(T),destroy_component(E)}}}function create_else_block$1(A){let T,E,C=[A[19]],P={};for(let I=0;I<C.length;I+=1)P=assign$1(P,C[I]);return{c(){T=svg_element("svg"),E=svg_element("path"),this.h()},l(I){T=claim_svg_element(I,"svg",{});var R=children$1(T);E=claim_svg_element(R,"path",{d:!0}),children$1(E).forEach(detach),R.forEach(detach),this.h()},h(){attr(E,"d","M2 3.4C2 1.9 3.5 1 4.8 1.8l16.5 9.6c1.2.7 1.2 2.5 0 3.2L4.8 24.2C3.5 25 2 24.1 2 22.6V3.4z"),set_svg_attributes(T,P),toggle_class(T,"svelte-9yox50",!0)},m(I,R){insert_hydration(I,T,R),append_hydration(T,E)},p(I,R){toggle_class(T,"svelte-9yox50",!0)},d(I){I&&detach(T)}}}function create_if_block_1$2(A){let T,E,C,P=[A[19]],I={};for(let R=0;R<P.length;R+=1)I=assign$1(I,P[R]);return{c(){T=svg_element("svg"),E=svg_element("rect"),C=svg_element("rect"),this.h()},l(R){T=claim_svg_element(R,"svg",{});var F=children$1(T);E=claim_svg_element(F,"rect",{height:!0,rx:!0,width:!0,x:!0,y:!0}),children$1(E).forEach(detach),C=claim_svg_element(F,"rect",{height:!0,rx:!0,width:!0,x:!0,y:!0}),children$1(C).forEach(detach),F.forEach(detach),this.h()},h(){attr(E,"height","22.9"),attr(E,"rx","1.9"),attr(E,"width","7.6"),attr(E,"x","14"),attr(E,"y",".5"),attr(C,"height","22.9"),attr(C,"rx","1.9"),attr(C,"width","7.6"),attr(C,"x","2"),attr(C,"y",".5"),set_svg_attributes(T,I),toggle_class(T,"svelte-9yox50",!0)},m(R,F){insert_hydration(R,T,F),append_hydration(T,E),append_hydration(T,C)},p(R,F){toggle_class(T,"svelte-9yox50",!0)},d(R){R&&detach(T)}}}function create_each_block(A){let T,E,C,P;const I=[create_if_block$2,create_if_block_2,create_if_block_3,create_if_block_4,create_if_block_5,create_if_block_6,create_if_block_7,create_if_block_9,create_if_block_10,create_if_block_11,create_if_block_12,create_if_block_13],R=[];function F(O,D){return O[40]==="playpause"?0:O[40]==="stop"?1:O[40]==="progress"?2:O[40]==="loop"?3:O[40]==="background"?4:O[40]==="snapshot"?5:O[40]==="zoom"?6:O[40]==="info"?7:O[40]==="frame"?8:O[40]==="nextFrame"?9:O[40]==="previousFrame"?10:O[40]==="spacer"?11:-1}return~(T=F(A))&&(E=R[T]=I[T](A)),{c(){E&&E.c(),C=empty$1()},l(O){E&&E.l(O),C=empty$1()},m(O,D){~T&&R[T].m(O,D),insert_hydration(O,C,D),P=!0},p(O,D){let L=T;T=F(O),T===L?~T&&R[T].p(O,D):(E&&(group_outros(),transition_out(R[L],1,1,()=>{R[L]=null}),check_outros()),~T?(E=R[T],E?E.p(O,D):(E=R[T]=I[T](O),E.c()),transition_in(E,1),E.m(C.parentNode,C)):E=null)},i(O){P||(transition_in(E),P=!0)},o(O){transition_out(E),P=!1},d(O){O&&detach(C),~T&&R[T].d(O)}}}function create_fragment$4(A){let T,E,C=ensure_array_like(A[6]),P=[];for(let R=0;R<C.length;R+=1)P[R]=create_each_block(get_each_context(A,C,R));const I=R=>transition_out(P[R],1,1,()=>{P[R]=null});return{c(){T=element("div");for(let R=0;R<P.length;R+=1)P[R].c();this.h()},l(R){T=claim_element(R,"DIV",{class:!0});var F=children$1(T);for(let O=0;O<P.length;O+=1)P[O].l(F);F.forEach(detach),this.h()},h(){attr(T,"class","lottie-player-controls svelte-9yox50")},m(R,F){insert_hydration(R,T,F);for(let O=0;O<P.length;O+=1)P[O]&&P[O].m(T,null);E=!0},p(R,F){if(F[0]&33554431){C=ensure_array_like(R[6]);let O;for(O=0;O<C.length;O+=1){const D=get_each_context(R,C,O);P[O]?(P[O].p(D,F),transition_in(P[O],1)):(P[O]=create_each_block(D),P[O].c(),transition_in(P[O],1),P[O].m(T,null))}for(group_outros(),O=C.length;O<P.length;O+=1)I(O);check_outros()}},i(R){if(!E){for(let F=0;F<C.length;F+=1)transition_in(P[F]);E=!0}},o(R){P=P.filter(Boolean);for(let F=0;F<P.length;F+=1)transition_out(P[F]);E=!1},d(R){R&&detach(T),destroy_each(P,R)}}}function instance_1$1(A,T,E){let C,P,I,R;const F={width:14,height:14,viewBox:"0 0 24 24"},O=createEventDispatcher();let{animationData:D}=T,{background:L}=T,{currentState:B}=T,{frame:V}=T,{freeze:U}=T,{instance:z}=T,{layout:W=ControlsLayoutOptions}=T,{loop:Z}=T,{play:X}=T,{progress:K}=T,{seek:Y}=T,{snapshot:Q}=T,{stop:J}=T,{toggleZoom:te}=T,{toggleLooping:ie}=T,{togglePlay:ne}=T,{totalFrames:he=0}=T,ve=!1;const ye=Me=>{if(!z||isNaN(Me.target.value))return;const Oe=Me.target.value/100*he;Y(Oe)},de=Me=>{O("background",{color:Me.detail.hex})},fe=()=>{E(14,ve=!ve),te()},ue=()=>{const Me=V+1;Me<=he&&Y(Me)},ge=()=>{const Me=V-1;Me>=0&&Y(Me)};function ae(){K=to_number(this.value),E(0,K)}const ce=()=>Q(!0),se=()=>Q(!0),le=Me=>Y(V+(Me.deltaY>0?-1:1)),_e=()=>B===PlayerState.Frozen&&X(),me=()=>B!==PlayerState.Paused&&U();function Ee(){R=this.value,E(15,R),E(4,V)}const Pe=()=>B===PlayerState.Frozen&&X(),Ce=()=>B!==PlayerState.Paused&&U(),ke=Me=>Y(Me.target.value),Be=Me=>Y(V+(Me.deltaY>0?-1:1));return A.$$set=Me=>{"animationData"in Me&&E(1,D=Me.animationData),"background"in Me&&E(2,L=Me.background),"currentState"in Me&&E(3,B=Me.currentState),"frame"in Me&&E(4,V=Me.frame),"freeze"in Me&&E(5,U=Me.freeze),"instance"in Me&&E(25,z=Me.instance),"layout"in Me&&E(6,W=Me.layout),"loop"in Me&&E(7,Z=Me.loop),"play"in Me&&E(8,X=Me.play),"progress"in Me&&E(0,K=Me.progress),"seek"in Me&&E(9,Y=Me.seek),"snapshot"in Me&&E(10,Q=Me.snapshot),"stop"in Me&&E(11,J=Me.stop),"toggleZoom"in Me&&E(26,te=Me.toggleZoom),"toggleLooping"in Me&&E(12,ie=Me.toggleLooping),"togglePlay"in Me&&E(13,ne=Me.togglePlay),"totalFrames"in Me&&E(27,he=Me.totalFrames)},A.$$.update=()=>{A.$$.dirty[0]&8&&E(18,C=B===PlayerState.Playing),A.$$.dirty[0]&8&&E(17,P=B===PlayerState.Paused),A.$$.dirty[0]&8&&E(16,I=B===PlayerState.Stopped),A.$$.dirty[0]&16&&E(15,R=Math.round(V))},[K,D,L,B,V,U,W,Z,X,Y,Q,J,ie,ne,ve,R,I,P,C,F,ye,de,fe,ue,ge,z,te,he,ae,ce,se,le,_e,me,Ee,Pe,Ce,ke,Be]}class Controls extends SvelteComponent{constructor(T){super(),init$2(this,T,instance_1$1,create_fragment$4,safe_not_equal,{animationData:1,background:2,currentState:3,frame:4,freeze:5,instance:25,layout:6,loop:7,play:8,progress:0,seek:9,snapshot:10,stop:11,toggleZoom:26,toggleLooping:12,togglePlay:13,totalFrames:27},null,[-1,-1])}}const SVELTE_LOTTIE_PLAYER_VERSION="0.3.1",LOTTIE_WEB_VERSION="^5.10.0";function create_if_block_1$1(A){let T,E="⚠️";return{c(){T=element("div"),T.textContent=E,this.h()},l(C){T=claim_element(C,"DIV",{class:!0,"data-svelte-h":!0}),get_svelte_dataset(T)!=="svelte-tklwv2"&&(T.textContent=E),this.h()},h(){attr(T,"class","lottie-player-error svelte-1aiskgp")},m(C,P){insert_hydration(C,T,P)},d(C){C&&detach(T)}}}function create_if_block$1(A){let T,E;return T=new Controls({props:{layout:A[3],animationData:A[22],background:A[1],controls:A[2],currentState:A[28],frame:A[26],freeze:A[11],instance:A[21],loop:A[0],lottie,pause:A[9],play:A[8],progress:A[27],seek:A[12],setDirection:A[16],setSpeed:A[15],setLooping:A[14],snapshot:A[13],src:A[5],stop:A[10],toggleZoom:A[20],toggleLooping:A[18],togglePlay:A[17],totalFrames:A[32]}}),T.$on("background",A[47]),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p(C,P){const I={};P[0]&8&&(I.layout=C[3]),P[0]&4194304&&(I.animationData=C[22]),P[0]&2&&(I.background=C[1]),P[0]&4&&(I.controls=C[2]),P[0]&268435456&&(I.currentState=C[28]),P[0]&67108864&&(I.frame=C[26]),P[0]&2097152&&(I.instance=C[21]),P[0]&1&&(I.loop=C[0]),P[0]&134217728&&(I.progress=C[27]),P[0]&32&&(I.src=C[5]),P[1]&2&&(I.totalFrames=C[32]),T.$set(I)},i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function create_fragment$3(A){let T,E,C,P,I,R,F,O=A[28]===PlayerState.Error&&create_if_block_1$1(),D=A[2]&&create_if_block$1(A);return{c(){T=element("div"),E=element("div"),C=element("div"),O&&O.c(),P=space(),D&&D.c(),this.h()},l(L){T=claim_element(L,"DIV",{style:!0});var B=children$1(T);E=claim_element(B,"DIV",{class:!0});var V=children$1(E);C=claim_element(V,"DIV",{style:!0,class:!0});var U=children$1(C);O&&O.l(U),U.forEach(detach),P=claim_space(V),D&&D.l(V),V.forEach(detach),B.forEach(detach),this.h()},h(){set_style(C,"background",A[1]),attr(C,"class","svelte-1aiskgp"),toggle_class(C,"animation",!0),attr(E,"class","lottie-player svelte-1aiskgp"),toggle_class(E,"with-controls",A[2]),toggle_class(E,"is-zoomed",A[29]),attr(T,"style",I=(A[7]?`width:${A[7]}px;`:"")+(A[4]?`height:${A[4]}px;`:"")+A[6]),add_render_callback(()=>A[50].call(T))},m(L,B){insert_hydration(L,T,B),append_hydration(T,E),append_hydration(E,C),O&&O.m(C,null),A[46](C),append_hydration(E,P),D&&D.m(E,null),A[48](E),A[49](T),R=add_iframe_resize_listener(T,A[50].bind(T)),F=!0},p(L,B){L[28]===PlayerState.Error?O||(O=create_if_block_1$1(),O.c(),O.m(C,null)):O&&(O.d(1),O=null),(!F||B[0]&2)&&set_style(C,"background",L[1]),L[2]?D?(D.p(L,B),B[0]&4&&transition_in(D,1)):(D=create_if_block$1(L),D.c(),transition_in(D,1),D.m(E,null)):D&&(group_outros(),transition_out(D,1,1,()=>{D=null}),check_outros()),(!F||B[0]&4)&&toggle_class(E,"with-controls",L[2]),(!F||B[0]&536870912)&&toggle_class(E,"is-zoomed",L[29]),(!F||B[0]&208&&I!==(I=(L[7]?`width:${L[7]}px;`:"")+(L[4]?`height:${L[4]}px;`:"")+L[6]))&&attr(T,"style",I)},i(L){F||(transition_in(D),F=!0)},o(L){transition_out(D),F=!1},d(L){L&&detach(T),O&&O.d(),A[46](null),D&&D.d(),A[48](null),A[49](null),R()}}}function instance_1(A,T,E){let{autoplay:C=!1}=T,{background:P}=T,{controls:I}=T,{controlsLayout:R}=T,{count:F=void 0}=T,{defaultFrame:O=0}=T,{direction:D=1}=T,{height:L}=T,{hover:B=!1}=T,{loop:V=!1}=T,{mode:U=PlayMode.Normal}=T,{onToggleZoom:z=void 0}=T,{renderer:W=PlayerRender.SVG}=T,{speed:Z=1}=T,{src:X=""}=T,{style:K=""}=T,{width:Y}=T,Q,J,te,ie,ne,he=0,ve=0,ye,de=PlayerState.Loading,fe=!1,ue,ge,ae;const ce=()=>{document.hidden===!0&&de===PlayerState.Playing?Ce():de===PlayerState.Frozen&&_e()};onMount(()=>{"IntersectionObserver"in window&&(ye=new IntersectionObserver(Fe=>{Fe[0].isIntersecting?de===PlayerState.Frozen&&_e():de===PlayerState.Playing&&Ce()}),ye.observe(J)),typeof document.hidden<"u"&&document.addEventListener("visibilitychange",ce),X&&se(X)}),onDestroy(()=>{ye&&(ye.disconnect(),ye=void 0),document.removeEventListener("visibilitychange",ce)});const se=Fe=>{if(!J)return;ne&&ne.destroy();const He={container:J,loop:V,autoplay:C,renderer:W,rendererSettings:{preserveAspectRatio:"xMidYMid meet",clearCanvas:!0,progressiveLoad:!0,hideOnTransparent:!0}};try{const nt=parseSrc(Fe),ot=typeof nt=="string"?"path":"animationData";E(21,ne=lottie.loadAnimation({...He,[ot]:nt}))}catch{E(28,de=PlayerState.Error),dispatchEvent(new CustomEvent(PlayerEvents.Error))}ne&&(ne.addEventListener("enterFrame",()=>{E(26,he=ne.currentFrame),E(27,ve=ne.currentFrame/ne.totalFrames*100),dispatchEvent(new CustomEvent(PlayerEvents.Frame,{detail:{frame:ne.currentFrame,progress:ve}}))}),ne.addEventListener("complete",()=>{if(de!==PlayerState.Playing){dispatchEvent(new CustomEvent(PlayerEvents.Complete));return}if(!V||F&&_counter>=F){dispatchEvent(new CustomEvent(PlayerEvents.Complete));return}U===PlayMode.Bounce?(F&&(_counter+=.5),setTimeout(()=>{dispatchEvent(new CustomEvent(PlayerEvents.Loop)),de===PlayerState.Playing&&(ne.setDirection(ne.playDirection*-1),ne.play())},intermission)):(F&&(_counter+=1),window.setTimeout(()=>{dispatchEvent(new CustomEvent(PlayerEvents.Loop)),de===PlayerState.Playing&&(ne.stop(),ne.play())},intermission))}),ne.addEventListener("data_ready",()=>{E(22,Q=ne.animationData),E(32,ae=ne.totalFrames)}),ne.addEventListener("data_failed",()=>{E(28,de=PlayerState.Error),dispatchEvent(new CustomEvent(PlayerEvents.Error))}),J.addEventListener("mouseenter",()=>{B&&de!==PlayerState.Playing&&_e()}),J.addEventListener("mouseleave",()=>{B&&de===PlayerState.Playing&&Pe()}),Je(Z),et(D),C?_e():isNaN(O)||ne.goToAndStop(O,!0))},le=()=>ne,_e=()=>{ne&&(E(28,de=PlayerState.Playing),ne.play(),dispatchEvent(new CustomEvent(PlayerEvents.Play)))},me=()=>({lottieWebVersion:LOTTIE_WEB_VERSION,svelteLottiePlayerVersion:SVELTE_LOTTIE_PLAYER_VERSION}),Ee=()=>{ne&&(E(28,de=PlayerState.Paused),ne.pause(),dispatchEvent(new CustomEvent(PlayerEvents.Pause)))},Pe=()=>{ne&&(E(28,de=PlayerState.Stopped),ne.stop(),dispatchEvent(new CustomEvent(PlayerEvents.Stop)))},Ce=()=>{ne&&(ne.pause(),E(28,de=PlayerState.Frozen),dispatchEvent(new CustomEvent(PlayerEvents.Freeze)))},ke=()=>{ne&&ne.resize()},Be=Fe=>{if(!ne)return;const He=Fe.toString().match(/^([0-9\.]+)(%?)$/);if(!He)return;const nt=He[2]==="%"?ne.totalFrames*Number(He[1])/100:Number(He[1]);de===PlayerState.Playing?ne.goToAndPlay(nt,!0):(ne.goToAndStop(nt,!0),ne.pause())},Me=(Fe=!0)=>{let He;if(W===PlayerRender.SVG){const nt=J.querySelector("svg"),ot=new XMLSerializer().serializeToString(nt);He="data:image/svg+xml;charset=utf-8,"+encodeURIComponent(ot),Fe&&triggerDownload(He,`snapshot_${ve}.svg`)}else W===PlayerRender.Canvas&&(He=J.querySelector("canvas").toDataURL("image/png"),Fe&&triggerDownload(He,`snapshot_${ve}.png`));return He},Oe=Fe=>{ne&&E(0,V=Fe)},Je=Fe=>{ne&&E(34,Z=Fe)},et=Fe=>{ne&&E(33,D=Fe)},qe=()=>de===PlayerState.Playing?Ee():_e(),De=()=>{Oe(!V)},Ue=Fe=>{E(1,P=Fe)},Re=()=>{if(typeof z=="function"){E(29,fe=!!z(fe));return}fe?(ie.appendChild(te),E(25,ie.style.height=void 0,ie),E(25,ie.style.width=void 0,ie)):(E(25,ie.style.height=ue+"px",ie),E(25,ie.style.width=ge+"px",ie),document.body.appendChild(te)),E(29,fe=!fe),setTimeout(()=>ke(),100)};function Ne(Fe){binding_callbacks[Fe?"unshift":"push"](()=>{J=Fe,E(23,J)})}const Ge=Fe=>Ue(Fe.detail.color);function We(Fe){binding_callbacks[Fe?"unshift":"push"](()=>{te=Fe,E(24,te)})}function je(Fe){binding_callbacks[Fe?"unshift":"push"](()=>{ie=Fe,E(25,ie)})}function Ye(){ue=this.clientHeight,ge=this.clientWidth,E(30,ue),E(31,ge)}return A.$$set=Fe=>{"autoplay"in Fe&&E(35,C=Fe.autoplay),"background"in Fe&&E(1,P=Fe.background),"controls"in Fe&&E(2,I=Fe.controls),"controlsLayout"in Fe&&E(3,R=Fe.controlsLayout),"count"in Fe&&E(36,F=Fe.count),"defaultFrame"in Fe&&E(37,O=Fe.defaultFrame),"direction"in Fe&&E(33,D=Fe.direction),"height"in Fe&&E(4,L=Fe.height),"hover"in Fe&&E(38,B=Fe.hover),"loop"in Fe&&E(0,V=Fe.loop),"mode"in Fe&&E(39,U=Fe.mode),"onToggleZoom"in Fe&&E(40,z=Fe.onToggleZoom),"renderer"in Fe&&E(41,W=Fe.renderer),"speed"in Fe&&E(34,Z=Fe.speed),"src"in Fe&&E(5,X=Fe.src),"style"in Fe&&E(6,K=Fe.style),"width"in Fe&&E(7,Y=Fe.width)},A.$$.update=()=>{A.$$.dirty[0]&32&&se(X),A.$$.dirty[0]&2097153&&ne&&E(21,ne.loop=V,ne),A.$$.dirty[0]&2097152|A.$$.dirty[1]&8&&ne&&ne.setSpeed(Z),A.$$.dirty[0]&2097152|A.$$.dirty[1]&4&&ne&&ne.setDirection(D)},[V,P,I,R,L,X,K,Y,_e,Ee,Pe,Ce,Be,Me,Oe,Je,et,qe,De,Ue,Re,ne,Q,J,te,ie,he,ve,de,fe,ue,ge,ae,D,Z,C,F,O,B,U,z,W,se,le,me,ke,Ne,Ge,We,je,Ye]}class LottiePlayer extends SvelteComponent{constructor(T){super(),init$2(this,T,instance_1,create_fragment$3,safe_not_equal,{autoplay:35,background:1,controls:2,controlsLayout:3,count:36,defaultFrame:37,direction:33,height:4,hover:38,loop:0,mode:39,onToggleZoom:40,renderer:41,speed:34,src:5,style:6,width:7,load:42,getLottie:43,play:8,getVersions:44,pause:9,stop:10,freeze:11,resize:45,seek:12,snapshot:13,setLooping:14,setSpeed:15,setDirection:16,togglePlay:17,toggleLooping:18,setBackground:19,toggleZoom:20},null,[-1,-1])}get load(){return this.$$.ctx[42]}get getLottie(){return this.$$.ctx[43]}get play(){return this.$$.ctx[8]}get getVersions(){return this.$$.ctx[44]}get pause(){return this.$$.ctx[9]}get stop(){return this.$$.ctx[10]}get freeze(){return this.$$.ctx[11]}get resize(){return this.$$.ctx[45]}get seek(){return this.$$.ctx[12]}get snapshot(){return this.$$.ctx[13]}get setLooping(){return this.$$.ctx[14]}get setSpeed(){return this.$$.ctx[15]}get setDirection(){return this.$$.ctx[16]}get togglePlay(){return this.$$.ctx[17]}get toggleLooping(){return this.$$.ctx[18]}get setBackground(){return this.$$.ctx[19]}get toggleZoom(){return this.$$.ctx[20]}}const v="5.9.0",fr=29.9700012207031,ip=0,op=212.000008634937,w=176,h=172,nm="anima loader",ddd=0,assets=[],layers=[{ddd:0,ind:1,ty:3,nm:"Null 1",sr:1,ks:{o:{a:0,k:0,ix:11},r:{a:1,k:[{i:{x:[.01],y:[1]},o:{x:[.167],y:[.167]},t:50,s:[0]},{t:75.0000030548126,s:[90]}],ix:10},p:{a:0,k:[88,86,0],ix:2,l:2},a:{a:0,k:[0,0,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,ip:0,op:212.000008634937,st:0,bm:0},{ddd:0,ind:2,ty:4,nm:"Layer 13 Outlines",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.167,y:.167},t:20,s:[-8.183,15.355,0],to:[1.589,-2.292,0],ti:[-1.589,2.292,0]},{t:40.0000016292334,s:[1.353,1.605,0]}],ix:2,l:2},a:{a:0,k:[10,10,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[3.907,-3.907],[3.907,3.908],[0,0]],o:[[-3.903,3.903],[0,0],[3.907,3.908]],v:[[5.117,5.122],[-9.024,5.117],[5.117,-9.024]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[10.135,10.133],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:20.0000008146167,op:78.0000031770051,st:20.0000008146167,bm:0},{ddd:0,ind:3,ty:4,nm:"Layer 14 Outlines",parent:1,sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.167,y:.167},t:20,s:[13.103,-13.645,0],to:[-2.208,2.292,0],ti:[2.208,-2.292,0]},{t:40.0000016292334,s:[-.147,.105,0]}],ix:2,l:2},a:{a:0,k:[11.5,10.5,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,hasMask:!0,masksProperties:[{inv:!1,mode:"a",pt:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,.25]],o:[[0,0],[0,0],[0,0],[0,-.25]],v:[[11.647,-12.855],[-12.103,10.395],[-4.103,26.645],[23.397,-2.105]],c:!0},ix:1},o:{a:0,k:100,ix:3},x:{a:0,k:0,ix:4},nm:"Mask 1"}],shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.56,0],[1.952,-1.952],[-3.905,-3.905],[-2.559,0],[-1.952,1.952],[3.906,3.905]],o:[[-2.559,0],[-3.906,3.904],[1.953,1.953],[2.559,0],[3.905,-3.905],[-1.952,-1.953]],v:[[0,-10],[-7.07,-7.071],[-7.07,7.07],[0,10],[7.071,7.071],[7.07,-7.071]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[-2.494,0],[0,0],[-1.763,-1.763],[3.638,-3.64],[2.493,0],[1.763,1.763],[0,2.493],[-1.763,1.763]],o:[[0,0],[2.492,0],[3.639,3.64],[-1.763,1.762],[-2.493,0],[-1.763,-1.763],[0,-2.494],[1.763,-1.763]],v:[[0,-9.333],[0,-9.333],[6.6,-6.6],[6.601,6.6],[0,9.333],[-6.6,6.599],[-9.333,0],[-6.6,-6.6]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[11.5,10.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[2.581,0],[1.826,1.826],[.001,2.582],[-1.825,1.826],[-2.582,0],[-1.826,-1.826],[3.769,-3.769]],o:[[-2.582,0],[-1.825,-1.826],[0,-2.582],[1.826,-1.826],[2.582,0],[3.769,3.769],[-1.826,1.826]],v:[[-.468,9.667],[-7.304,6.835],[-10.136,0],[-7.305,-6.835],[-.47,-9.667],[6.366,-6.835],[6.367,6.835]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[11.969,10.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:20.0000008146167,op:78.0000031770051,st:20.0000008146167,bm:0},{ddd:0,ind:4,ty:4,nm:"Layer 8 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.167,y:.167},t:118,s:[87.966,108,0],to:[0,-4.083,0],ti:[0,4.083,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:147,s:[87.966,83.5,0],to:[0,0,0],ti:[0,0,0]},{i:{x:0,y:1},o:{x:.167,y:.167},t:150,s:[87.966,83.5,0],to:[0,-3.333,0],ti:[0,3.333,0]},{t:171.000006964973,s:[87.966,63.5,0]}],ix:2,l:2},a:{a:0,k:[10.5,5.5,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[0,-5],[-10,5],[10,5]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[0,-4.058],[8.391,4.333],[-8.391,4.333]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[10.534,5.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[-9.195,4.598],[0,-4.598],[9.195,4.598]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[10.534,5.569],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:2,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:119.000004846969,op:159.000006476203,st:118.000004806239,bm:0},{ddd:0,ind:5,ty:4,nm:"Layer 9 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.167,y:.167},t:118,s:[87.966,108,0],to:[0,-3.25,0],ti:[0,3.25,0]},{i:{x:.833,y:.833},o:{x:.167,y:.167},t:147,s:[87.966,88.5,0],to:[0,0,0],ti:[0,0,0]},{i:{x:0,y:1},o:{x:.167,y:.167},t:150,s:[87.966,88.5,0],to:[0,-3.333,0],ti:[0,3.333,0]},{t:181.000007372281,s:[87.966,68.5,0]}],ix:2,l:2},a:{a:0,k:[10.5,5.5,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[-10,5],[0,-5],[10,5]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[10.534,5.5],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:119.000004846969,op:159.000006476203,st:118.000004806239,bm:0},{ddd:0,ind:6,ty:4,nm:"Layer 11 Outlines",sr:1,ks:{o:{a:1,k:[{t:111,s:[100],h:1},{t:113.334,s:[0],h:1},{t:115.666,s:[100],h:1},{t:118.000004806239,s:[0],h:1}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.4,y:0},t:74,s:[68.793,65.885,0],to:[3.243,3.352,0],ti:[-3.243,-3.352,0]},{t:100.000004073084,s:[88.25,86,0]}],ix:2,l:2},a:{a:0,k:[11,10.5,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[-10,-10],[10,10],[-10,10]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[11.207,10.615],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:78.0000031770051,op:119.000004846969,st:78.0000031770051,bm:0},{ddd:0,ind:7,ty:4,nm:"Layer 12 Outlines",sr:1,ks:{o:{a:1,k:[{t:111,s:[100],h:1},{t:113.334,s:[0],h:1},{t:115.666,s:[100],h:1},{t:118.000004806239,s:[0],h:1}],ix:11},r:{a:0,k:0,ix:10},p:{a:1,k:[{i:{x:0,y:1},o:{x:.4,y:0},t:74,s:[105.793,103.885,0],to:[-2.924,-2.981,0],ti:[2.924,2.981,0]},{t:100.000004073084,s:[88.25,86,0]}],ix:2,l:2},a:{a:0,k:[11,10.5,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[10,-10],[-10,-10],[10,10]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ind:1,ty:"sh",ix:2,ks:{a:0,k:{i:[[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0]],v:[[9.334,9.334],[-9.333,-9.333],[9.334,-9.333]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[11.207,10.615],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1}],ip:78.0000031770051,op:119.000004846969,st:78.0000031770051,bm:0},{ddd:0,ind:8,ty:4,nm:"Layer 19 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[113.75,110.961,0],ix:2,l:2},a:{a:0,k:[26.5,26.5,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-25.054,-25.054],[25.054,25.054]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[26.401,26.44],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:100,s:[56]},{t:119.000004846969,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:78,s:[55]},{t:99.0000040323527,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:78.0000031770051,op:120.0000048877,st:78.0000031770051,bm:0},{ddd:0,ind:9,ty:4,nm:"Layer 20 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[63.75,110.961,0],ix:2,l:2},a:{a:0,k:[26.5,26.5,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[25.086,-25.087],[-25.086,25.087]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[26.261,26.473],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:100,s:[57]},{t:119.000004846969,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:78,s:[56]},{t:99.0000040323527,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:78.0000031770051,op:120.0000048877,st:78.0000031770051,bm:0},{ddd:0,ind:10,ty:4,nm:"Layer 21 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[88.75,115.961,0],ix:2,l:2},a:{a:0,k:[1.5,31.5,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[1.347,1.386],[1.347,61.749]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:100,s:[47]},{t:119.000004846969,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:78,s:[47]},{t:99.0000040323527,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:78.0000031770051,op:120.0000048877,st:78.0000031770051,bm:0},{ddd:0,ind:11,ty:4,nm:"Layer 22 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[88.75,55.961,0],ix:2,l:2},a:{a:0,k:[1.5,31.5,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[1.347,1.692],[1.347,61.386]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:78,s:[49]},{t:99.0000040323527,s:[0]}],ix:1},e:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:100,s:[53]},{t:119.000004846969,s:[0]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:78.0000031770051,op:120.0000048877,st:78.0000031770051,bm:0},{ddd:0,ind:12,ty:4,nm:"Layer 10 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:46,s:[0]},{t:79.000003217736,s:[180]}],ix:10},p:{a:0,k:[87.5,86.484,0],ix:2,l:2},a:{a:0,k:[30.5,35.5,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0],[0,0],[0,0]],v:[[0,33.302],[-28.774,16.653],[-28.774,-16.653],[0,-33.302],[28.774,-16.653],[28.774,16.653]],c:!0},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[30.5,35.734],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 2",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.26],y:[0]},t:0,s:[0]},{t:46.0000018736184,s:[100]}],ix:1},e:{a:0,k:0,ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:0,op:54.0000021994651,st:0,bm:0},{ddd:0,ind:13,ty:4,nm:"Layer 17 Outlines 2",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:53,s:[-90]},{i:{x:[.833],y:[1]},o:{x:[.167],y:[0]},t:79,s:[0]},{i:{x:[.01],y:[1]},o:{x:[.167],y:[.167]},t:182,s:[0]},{t:211.000008594206,s:[180]}],ix:10},p:{a:0,k:[88.6,85.833,0],ix:2,l:2},a:{a:0,k:[30.5,31,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0],[0,0],[0,0]],o:[[0,0],[0,0],[0,0],[0,0]],v:[[27.603,27.604],[-27.603,27.604],[-27.603,-27.602],[27.603,-27.602]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"fl",c:{a:0,k:[0,0,0,1],ix:4},o:{a:0,k:0,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[30.455,30.722],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:4,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:0,k:0,ix:1},e:{a:1,k:[{i:{x:[.01],y:[1]},o:{x:[.167],y:[.167]},t:182,s:[100]},{t:211.000008594206,s:[0]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:54.0000021994651,op:212.000008634937,st:53.0000021587343,bm:0},{ddd:0,ind:14,ty:4,nm:"Layer 17 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[88.6,85.833,0],ix:2,l:2},a:{a:0,k:[30.5,31,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ty:"rc",d:1,s:{a:0,k:[57,58],ix:2},p:{a:0,k:[0,0],ix:3},r:{a:0,k:0,ix:4},nm:"Rectangle Path 1",mn:"ADBE Vector Shape - Rect",hd:!1},{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[29.4,30.167],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Rectangle 1",np:3,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"gr",it:[{ty:"fl",c:{a:0,k:[1,1,1,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 1",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"mm",mm:1,nm:"Merge Paths 1",mn:"ADBE Vector Filter - Merge",hd:!1},{ty:"fl",c:{a:0,k:[1,0,0,1],ix:4},o:{a:0,k:100,ix:5},r:1,bm:0,nm:"Fill 2",mn:"ADBE Vector Graphic - Fill",hd:!1},{ty:"tr",p:{a:0,k:[30.455,30.722],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:3,cix:2,bm:0,ix:2,mn:"ADBE Vector Group",hd:!1}],ip:123.000005009893,op:181.000007372281,st:53.0000021587343,bm:0},{ddd:0,ind:15,ty:4,nm:"Layer 4 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[108.109,96.395,0],ix:2,l:2},a:{a:0,k:[41.5,41.5,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[-40.01,40.01],[40.01,-40.01]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[41.391,41.105],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:153,s:[0]},{t:184.000007494474,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:119,s:[0]},{t:148.000006028164,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:119.000004846969,op:178.000007250089,st:119.000004846969,bm:0},{ddd:0,ind:16,ty:4,nm:"Layer 5 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[98.109,106.395,0],ix:2,l:2},a:{a:0,k:[51.5,1.5,0],ix:1,l:2},s:{a:0,k:[100,100,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,0]],o:[[0,0],[0,0]],v:[[1.403,1.291],[101.401,1.291]],c:!1},ix:2},nm:"Path 1",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:10,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[0,0],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:153,s:[0]},{t:184.000007494474,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:119,s:[0]},{t:148.000006028164,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:119.000004846969,op:178.000007250089,st:119.000004846969,bm:0},{ddd:0,ind:17,ty:4,nm:"Layer 6 Outlines",sr:1,ks:{o:{a:0,k:100,ix:11},r:{a:0,k:0,ix:10},p:{a:0,k:[117.609,85.395,0],ix:2,l:2},a:{a:0,k:[21,30.5,0],ix:1,l:2},s:{a:0,k:[96,96,100],ix:6,l:2}},ao:0,shapes:[{ty:"gr",it:[{ind:0,ty:"sh",ix:1,ks:{a:0,k:{i:[[0,0],[0,-15.897],[15.897,0],[0,0],[0,0]],o:[[15.897,0],[0,15.897],[0,0],[0,0],[0,0]],v:[[-9.74,-28.83],[19.09,0],[-9.74,28.83],[-19.09,28.83],[-19.09,-28.83]],c:!0},ix:2},nm:"Path 2",mn:"ADBE Vector Shape - Group",hd:!1},{ty:"st",c:{a:0,k:[0,0,0,1],ix:3},o:{a:0,k:100,ix:4},w:{a:0,k:2,ix:5},lc:1,lj:1,ml:4,bm:0,nm:"Stroke 1",mn:"ADBE Vector Graphic - Stroke",hd:!1},{ty:"tr",p:{a:0,k:[21.176,30.318],ix:2},a:{a:0,k:[0,0],ix:1},s:{a:0,k:[100,100],ix:3},r:{a:0,k:0,ix:6},o:{a:0,k:100,ix:7},sk:{a:0,k:0,ix:4},sa:{a:0,k:0,ix:5},nm:"Transform"}],nm:"Group 1",np:2,cix:2,bm:0,ix:1,mn:"ADBE Vector Group",hd:!1},{ty:"tm",s:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:153,s:[0]},{t:203.000008268359,s:[100]}],ix:1},e:{a:1,k:[{i:{x:[0],y:[1]},o:{x:[.167],y:[.167]},t:119,s:[0]},{t:159.000006476203,s:[100]}],ix:2},o:{a:0,k:0,ix:3},m:1,ix:2,nm:"Trim Paths 1",mn:"ADBE Vector Filter - Trim",hd:!1}],ip:119.000004846969,op:162.000006598395,st:119.000004846969,bm:0}],markers=[],loadingLottie={v,fr,ip,op,w,h,nm,ddd,assets,layers,markers};function create_fragment$2(A){let T,E,C,P;return E=new LottiePlayer({props:{src:loadingLottie,autoplay:!0,loop:!0,controls:!1,renderer:"svg",background:"transparent",width:A[0],height:A[0],controlsLayout:[]}}),{c(){T=element("section"),create_component(E.$$.fragment),this.h()},l(I){T=claim_element(I,"SECTION",{class:!0});var R=children$1(T);claim_component(E.$$.fragment,R),R.forEach(detach),this.h()},h(){attr(T,"class","loading svelte-manu88")},m(I,R){insert_hydration(I,T,R),mount_component(E,T,null),P=!0},p(I,[R]){const F={};R&1&&(F.width=I[0]),R&1&&(F.height=I[0]),E.$set(F)},i(I){P||(transition_in(E.$$.fragment,I),C&&C.end(1),P=!0)},o(I){transition_out(E.$$.fragment,I),I&&(C=create_out_transition(T,scale,{start:1,opacity:0,delay:0,duration:500,delay:0})),P=!1},d(I){I&&detach(T),destroy_component(E),I&&C&&C.end()}}}function instance$2(A,T,E){let C,P,I;return component_subscribe(A,width,R=>E(1,P=R)),component_subscribe(A,height,R=>E(2,I=R)),A.$$.update=()=>{A.$$.dirty&6&&E(0,C=Math.min(200,Math.min(P,I)*(P<768?1:.85)))},[C,P,I]}class LoadingScreen extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$2,create_fragment$2,safe_not_equal,{})}}function create_else_block_1(A){let T,E;return T=new LoadingScreen({}),{c(){create_component(T.$$.fragment)},l(C){claim_component(T.$$.fragment,C)},m(C,P){mount_component(T,C,P),E=!0},p:noop$1,i(C){E||(transition_in(T.$$.fragment,C),E=!0)},o(C){transition_out(T.$$.fragment,C),E=!1},d(C){destroy_component(T,C)}}}function create_if_block(A){let T,E,C,P,I;const R=[create_if_block_1,create_else_block],F=[];function O(D,L){return D[1]<768?0:1}return T=O(A),E=F[T]=R[T](A),P=new TechSheet({}),{c(){E.c(),C=space(),create_component(P.$$.fragment)},l(D){E.l(D),C=claim_space(D),claim_component(P.$$.fragment,D)},m(D,L){F[T].m(D,L),insert_hydration(D,C,L),mount_component(P,D,L),I=!0},p(D,L){let B=T;T=O(D),T===B?F[T].p(D,L):(group_outros(),transition_out(F[B],1,1,()=>{F[B]=null}),check_outros(),E=F[T],E?E.p(D,L):(E=F[T]=R[T](D),E.c()),transition_in(E,1),E.m(C.parentNode,C))},i(D){I||(transition_in(E),transition_in(P.$$.fragment,D),I=!0)},o(D){transition_out(E),transition_out(P.$$.fragment,D),I=!1},d(D){D&&detach(C),F[T].d(D),destroy_component(P,D)}}}function create_else_block(A){let T,E,C;function P(R){A[18](R)}let I={};return A[0]!==void 0&&(I.layout=A[0]),T=new DesktopFrame({props:I}),binding_callbacks.push(()=>bind$2(T,"layout",P)),{c(){create_component(T.$$.fragment)},l(R){claim_component(T.$$.fragment,R)},m(R,F){mount_component(T,R,F),C=!0},p(R,F){const O={};!E&&F&1&&(E=!0,O.layout=R[0],add_flush_callback(()=>E=!1)),T.$set(O)},i(R){C||(transition_in(T.$$.fragment,R),C=!0)},o(R){transition_out(T.$$.fragment,R),C=!1},d(R){destroy_component(T,R)}}}function create_if_block_1(A){let T,E,C;function P(R){A[17](R)}let I={};return A[0]!==void 0&&(I.layout=A[0]),T=new MobileFrame({props:I}),binding_callbacks.push(()=>bind$2(T,"layout",P)),{c(){create_component(T.$$.fragment)},l(R){claim_component(T.$$.fragment,R)},m(R,F){mount_component(T,R,F),C=!0},p(R,F){const O={};!E&&F&1&&(E=!0,O.layout=R[0],add_flush_callback(()=>E=!1)),T.$set(O)},i(R){C||(transition_in(T.$$.fragment,R),C=!0)},o(R){transition_out(T.$$.fragment,R),C=!1},d(R){destroy_component(T,R)}}}function create_fragment$1(A){let T,E,C,P,I,R,F,O=`${A[1]}px`,D=`${A[2]}px`,L;E=new Renderer({});const B=[create_if_block,create_else_block_1],V=[];function U(z,W){return z[3]?0:1}return P=U(A),I=V[P]=B[P](A),F=new Onboarding({}),{c(){T=element("main"),create_component(E.$$.fragment),C=space(),I.c(),R=space(),create_component(F.$$.fragment),this.h()},l(z){T=claim_element(z,"MAIN",{class:!0});var W=children$1(T);claim_component(E.$$.fragment,W),C=claim_space(W),I.l(W),R=claim_space(W),claim_component(F.$$.fragment,W),W.forEach(detach),this.h()},h(){attr(T,"class","relative overflow-hidden"),set_style(T,"width",O),set_style(T,"height",D)},m(z,W){insert_hydration(z,T,W),mount_component(E,T,null),append_hydration(T,C),V[P].m(T,null),append_hydration(T,R),mount_component(F,T,null),L=!0},p(z,[W]){let Z=P;P=U(z),P===Z?V[P].p(z,W):(group_outros(),transition_out(V[Z],1,1,()=>{V[Z]=null}),check_outros(),I=V[P],I?I.p(z,W):(I=V[P]=B[P](z),I.c()),transition_in(I,1),I.m(T,R)),W&2&&O!==(O=`${z[1]}px`)&&set_style(T,"width",O),W&4&&D!==(D=`${z[2]}px`)&&set_style(T,"height",D)},i(z){L||(transition_in(E.$$.fragment,z),transition_in(I),transition_in(F.$$.fragment,z),L=!0)},o(z){transition_out(E.$$.fragment,z),transition_out(I),transition_out(F.$$.fragment,z),L=!1},d(z){z&&detach(T),destroy_component(E),V[P].d(),destroy_component(F)}}}function instance$1(A,T,E){let C,P,I,R,F,O,D,L,B,V,U,z,W,Z,X,K;component_subscribe(A,$locale,te=>E(4,C=te)),component_subscribe(A,linkProjectOn,te=>E(5,P=te)),component_subscribe(A,linkClientOn,te=>E(6,I=te)),component_subscribe(A,complexityOn,te=>E(7,R=te)),component_subscribe(A,hovered,te=>E(8,F=te)),component_subscribe(A,selected,te=>E(9,O=te)),component_subscribe(A,figureWidth,te=>E(10,D=te)),component_subscribe(A,width,te=>E(1,L=te)),component_subscribe(A,sortBy,te=>E(11,B=te)),component_subscribe(A,fproducts,te=>E(12,V=te)),component_subscribe(A,fgoals,te=>E(13,U=te)),component_subscribe(A,fdesigns,te=>E(14,z=te)),component_subscribe(A,findustries,te=>E(15,W=te)),component_subscribe(A,fyears,te=>E(16,Z=te)),component_subscribe(A,height,te=>E(2,X=te)),component_subscribe(A,loaded$1,te=>E(3,K=te));let Y="block";function Q(te){Y=te,E(0,Y)}function J(te){Y=te,E(0,Y)}return A.$$.update=()=>{A.$$.dirty&1&&simulation.setLayout(Y),A.$$.dirty&126976&&simulation.filter(Z,W,z,U,V),A.$$.dirty&2048&&simulation.sort(B),A.$$.dirty&2&&simulation.handleWindowResize(L),A.$$.dirty&1024&&simulation.handleFigureResize(D),A.$$.dirty&512&&simulation.handleSelected(O),A.$$.dirty&256&&simulation.handleHovered(F),A.$$.dirty&128&&simulation.handleComplexity(R),A.$$.dirty&64&&simulation.handleLinks("clients",I),A.$$.dirty&32&&simulation.handleLinks("projects",P),A.$$.dirty&16&&simulation.handleLanguageChange(C),A.$$.dirty&1&&console.log(Y)},[Y,L,X,K,C,P,I,R,F,O,D,B,V,U,z,W,Z,Q,J]}class App extends SvelteComponent{constructor(T){super(),init$2(this,T,instance$1,create_fragment$1,safe_not_equal,{})}}const{window:window_1}=globals;function create_fragment(A){let T,E,C,P,I,R,F,O,D,L,B,V,U,z,W,Z,X,K,Y;return add_render_callback(A[5]),document.title=T=A[3]("page.title"),Z=new App({}),{c(){E=element("meta"),C=element("meta"),I=element("meta"),F=element("meta"),D=element("meta"),B=element("meta"),V=element("meta"),U=element("meta"),z=element("meta"),W=space(),create_component(Z.$$.fragment),this.h()},l(Q){const J=head_selector("svelte-1ei3etp",document.head);E=claim_element(J,"META",{name:!0,content:!0}),C=claim_element(J,"META",{property:!0,content:!0}),I=claim_element(J,"META",{property:!0,content:!0}),F=claim_element(J,"META",{name:!0,content:!0}),D=claim_element(J,"META",{name:!0,content:!0}),B=claim_element(J,"META",{name:!0,content:!0}),V=claim_element(J,"META",{charset:!0}),U=claim_element(J,"META",{name:!0,content:!0}),z=claim_element(J,"META",{name:!0,content:!0}),J.forEach(detach),W=claim_space(Q),claim_component(Z.$$.fragment,Q),this.h()},h(){attr(E,"name","author"),attr(E,"content","datadot + italo doliva"),attr(C,"property","og:title"),attr(C,"content",P=A[3]("page.title")),attr(I,"property","og:description"),attr(I,"content",R=A[3]("page.description")),attr(F,"name","twitter:title"),attr(F,"content",O=A[3]("page.title")),attr(D,"name","twitter:description"),attr(D,"content",L=A[3]("page.description")),attr(B,"name","theme-color"),attr(B,"content","#6D78FC"),attr(V,"charset","UTF-8"),attr(U,"name","robots"),attr(U,"content","index, follow"),attr(z,"name","viewport"),attr(z,"content","width=device-width, initial-scale=1.0, viewport-fit=cover")},m(Q,J){append_hydration(document.head,E),append_hydration(document.head,C),append_hydration(document.head,I),append_hydration(document.head,F),append_hydration(document.head,D),append_hydration(document.head,B),append_hydration(document.head,V),append_hydration(document.head,U),append_hydration(document.head,z),insert_hydration(Q,W,J),mount_component(Z,Q,J),X=!0,K||(Y=[listen(window_1,"resize",handleResize),listen(window_1,"resize",A[5])],K=!0)},p(Q,[J]){(!X||J&8)&&T!==(T=Q[3]("page.title"))&&(document.title=T),(!X||J&8&&P!==(P=Q[3]("page.title")))&&attr(C,"content",P),(!X||J&8&&R!==(R=Q[3]("page.description")))&&attr(I,"content",R),(!X||J&8&&O!==(O=Q[3]("page.title")))&&attr(F,"content",O),(!X||J&8&&L!==(L=Q[3]("page.description")))&&attr(D,"content",L)},i(Q){X||(transition_in(Z.$$.fragment,Q),X=!0)},o(Q){transition_out(Z.$$.fragment,Q),X=!1},d(Q){Q&&detach(W),detach(E),detach(C),detach(I),detach(F),detach(D),detach(B),detach(V),detach(U),detach(z),destroy_component(Z,Q),K=!1,run_all(Y)}}}function handleResize(){window.location.reload()}function instance(A,T,E){let C,P,I,R;component_subscribe(A,width,D=>E(0,C=D)),component_subscribe(A,height,D=>E(1,P=D)),component_subscribe(A,pixelRatio,D=>E(2,I=D)),component_subscribe(A,$format,D=>E(3,R=D));let{data:F}=T;clients.set(F.clients),projects.set(F.projects),categories.set(F.categories),console.log(F),onMount(()=>{simulation.load(F.deliverables)});function O(){width.set(C=window_1.innerWidth),height.set(P=window_1.innerHeight),pixelRatio.set(I=window_1.devicePixelRatio)}return A.$$set=D=>{"data"in D&&E(4,F=D.data)},[C,P,I,R,F,O]}class Page extends SvelteComponent{constructor(T){super(),init$2(this,T,instance,create_fragment,safe_not_equal,{data:4})}}export{Page as component,_page as universal};
